var rH=Object.create;var r0=Object.defineProperty;var nH=Object.getOwnPropertyDescriptor;var iH=Object.getOwnPropertyNames;var sH=Object.getPrototypeOf,oH=Object.prototype.hasOwnProperty;var jT=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var dt=(t,e)=>()=>(t&&(e=t(t=0)),e);var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Cr=(t,e)=>{for(var r in e)r0(t,r,{get:e[r],enumerable:!0})},NT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of iH(e))!oH.call(t,s)&&s!==r&&r0(t,s,{get:()=>e[s],enumerable:!(n=nH(e,s))||n.enumerable});return t};var qn=(t,e,r)=>(r=t!=null?rH(sH(t)):{},NT(e||!t||!t.__esModule?r0(r,"default",{value:t,enumerable:!0}):r,t)),MT=t=>NT(r0({},"__esModule",{value:!0}),t);var R1=b((ZSe,qT)=>{var aH=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,n0=()=>aH.now(),uH=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),F1=t=>t===1/0||uH(t),k1=class t{constructor({max:e=1/0,ttl:r,updateAgeOnGet:n=!1,checkAgeOnGet:s=!1,noUpdateTTL:i=!1,dispose:o,noDisposeOnSet:a=!1}={}){if(this.expirations=Object.create(null),this.data=new Map,this.expirationMap=new Map,r!==void 0&&!F1(r))throw new TypeError("ttl must be positive integer or Infinity if set");if(!F1(e))throw new TypeError("max must be positive integer or Infinity");if(this.ttl=r,this.max=e,this.updateAgeOnGet=!!n,this.checkAgeOnGet=!!s,this.noUpdateTTL=!!i,this.noDisposeOnSet=!!a,o!==void 0){if(typeof o!="function")throw new TypeError("dispose must be function if set");this.dispose=o}this.timer=void 0,this.timerExpiration=void 0}setTimer(e,r){if(this.timerExpiration<e)return;this.timer&&clearTimeout(this.timer);let n=setTimeout(()=>{this.timer=void 0,this.timerExpiration=void 0,this.purgeStale();for(let s in this.expirations){this.setTimer(s,s-n0());break}},r);n.unref&&n.unref(),this.timerExpiration=e,this.timer=n}cancelTimer(){this.timer&&(clearTimeout(this.timer),this.timerExpiration=void 0,this.timer=void 0)}cancelTimers(){return process.emitWarning('TTLCache.cancelTimers has been renamed to TTLCache.cancelTimer (no "s"), and will be removed in the next major version update'),this.cancelTimer()}clear(){let e=this.dispose!==t.prototype.dispose?[...this]:[];this.data.clear(),this.expirationMap.clear(),this.cancelTimer(),this.expirations=Object.create(null);for(let[r,n]of e)this.dispose(n,r,"delete")}setTTL(e,r=this.ttl){let n=this.expirationMap.get(e);if(n!==void 0){let s=this.expirations[n];!s||s.length<=1?delete this.expirations[n]:this.expirations[n]=s.filter(i=>i!==e)}if(r!==1/0){let s=Math.floor(n0()+r);this.expirationMap.set(e,s),this.expirations[s]||(this.expirations[s]=[],this.setTimer(s,r)),this.expirations[s].push(e)}else this.expirationMap.set(e,1/0)}set(e,r,{ttl:n=this.ttl,noUpdateTTL:s=this.noUpdateTTL,noDisposeOnSet:i=this.noDisposeOnSet}={}){if(!F1(n))throw new TypeError("ttl must be positive integer or Infinity");if(this.expirationMap.has(e)){s||this.setTTL(e,n);let o=this.data.get(e);o!==r&&(this.data.set(e,r),i||this.dispose(o,e,"set"))}else this.setTTL(e,n),this.data.set(e,r);for(;this.size>this.max;)this.purgeToCapacity();return this}has(e){return this.data.has(e)}getRemainingTTL(e){let r=this.expirationMap.get(e);return r===1/0?r:r!==void 0?Math.max(0,Math.ceil(r-n0())):0}get(e,{updateAgeOnGet:r=this.updateAgeOnGet,ttl:n=this.ttl,checkAgeOnGet:s=this.checkAgeOnGet}={}){let i=this.data.get(e);if(s&&this.getRemainingTTL(e)===0){this.delete(e);return}return r&&this.setTTL(e,n),i}dispose(e,r){}delete(e){let r=this.expirationMap.get(e);if(r!==void 0){let n=this.data.get(e);this.data.delete(e),this.expirationMap.delete(e);let s=this.expirations[r];return s&&(s.length<=1?delete this.expirations[r]:this.expirations[r]=s.filter(i=>i!==e)),this.dispose(n,e,"delete"),this.size===0&&this.cancelTimer(),!0}return!1}purgeToCapacity(){for(let e in this.expirations){let r=this.expirations[e];if(this.size-r.length>=this.max){delete this.expirations[e];let n=[];for(let s of r)n.push([s,this.data.get(s)]),this.data.delete(s),this.expirationMap.delete(s);for(let[s,i]of n)this.dispose(i,s,"evict")}else{let n=this.size-this.max,s=[];for(let i of r.splice(0,n))s.push([i,this.data.get(i)]),this.data.delete(i),this.expirationMap.delete(i);for(let[i,o]of s)this.dispose(o,i,"evict");return}}}get size(){return this.data.size}purgeStale(){let e=Math.ceil(n0());for(let r in this.expirations){if(r==="Infinity"||r>e)return;let n=[...this.expirations[r]||[]],s=[];delete this.expirations[r];for(let i of n)s.push([i,this.data.get(i)]),this.data.delete(i),this.expirationMap.delete(i);for(let[i,o]of s)this.dispose(o,i,"stale")}this.size===0&&this.cancelTimer()}*entries(){for(let e in this.expirations)for(let r of this.expirations[e])yield[r,this.data.get(r)]}*keys(){for(let e in this.expirations)for(let r of this.expirations[e])yield r}*values(){for(let e in this.expirations)for(let r of this.expirations[e])yield this.data.get(r)}[Symbol.iterator](){return this.entries()}};qT.exports=k1});var n8=b(r8=>{"use strict";r8.supports=function(...e){let r=e.reduce((n,s)=>Object.assign(n,s),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})}});var rs=b((HAe,i8)=>{"use strict";i8.exports=class extends Error{constructor(e,r){super(e||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var a8=b(o0=>{"use strict";o0.byteLength=LH;o0.toByteArray=KH;o0.fromByteArray=JH;var js=[],_i=[],qH=typeof Uint8Array<"u"?Uint8Array:Array,W1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ac=0,s8=W1.length;ac<s8;++ac)js[ac]=W1[ac],_i[W1.charCodeAt(ac)]=ac;var ac,s8;_i[45]=62;_i[95]=63;function o8(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function LH(t){var e=o8(t),r=e[0],n=e[1];return(r+n)*3/4-n}function UH(t,e,r){return(e+r)*3/4-r}function KH(t){var e,r=o8(t),n=r[0],s=r[1],i=new qH(UH(t,n,s)),o=0,a=s>0?n-4:n,u;for(u=0;u<a;u+=4)e=_i[t.charCodeAt(u)]<<18|_i[t.charCodeAt(u+1)]<<12|_i[t.charCodeAt(u+2)]<<6|_i[t.charCodeAt(u+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=_i[t.charCodeAt(u)]<<2|_i[t.charCodeAt(u+1)]>>4,i[o++]=e&255),s===1&&(e=_i[t.charCodeAt(u)]<<10|_i[t.charCodeAt(u+1)]<<4|_i[t.charCodeAt(u+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function VH(t){return js[t>>18&63]+js[t>>12&63]+js[t>>6&63]+js[t&63]}function zH(t,e,r){for(var n,s=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(VH(n));return s.join("")}function JH(t){for(var e,r=t.length,n=r%3,s=[],i=16383,o=0,a=r-n;o<a;o+=i)s.push(zH(t,o,o+i>a?a:o+i));return n===1?(e=t[r-1],s.push(js[e>>2]+js[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],s.push(js[e>>10]+js[e>>4&63]+js[e<<2&63]+"=")),s.join("")}});var u8=b(G1=>{G1.read=function(t,e,r,n,s){var i,o,a=s*8-n-1,u=(1<<a)-1,c=u>>1,l=-7,d=r?s-1:0,p=r?-1:1,f=t[e+d];for(d+=p,i=f&(1<<-l)-1,f>>=-l,l+=a;l>0;i=i*256+t[e+d],d+=p,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=o*256+t[e+d],d+=p,l-=8);if(i===0)i=1-c;else{if(i===u)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-c}return(f?-1:1)*o*Math.pow(2,i-n)};G1.write=function(t,e,r,n,s,i){var o,a,u,c=i*8-s-1,l=(1<<c)-1,d=l>>1,p=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,h=n?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+d>=1?e+=p/u:e+=p*Math.pow(2,1-d),e*u>=2&&(o++,u/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(e*u-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[r+f]=a&255,f+=h,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;t[r+f]=o&255,f+=h,o/=256,c-=8);t[r+f-h]|=m*128}});var Ei=b(nd=>{"use strict";var Z1=a8(),td=u8(),c8=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;nd.Buffer=Z;nd.SlowBuffer=YH;nd.INSPECT_MAX_BYTES=50;var a0=2147483647;nd.kMaxLength=a0;Z.TYPED_ARRAY_SUPPORT=HH();!Z.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function HH(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(Z.prototype,"parent",{enumerable:!0,get:function(){if(Z.isBuffer(this))return this.buffer}});Object.defineProperty(Z.prototype,"offset",{enumerable:!0,get:function(){if(Z.isBuffer(this))return this.byteOffset}});function jo(t){if(t>a0)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,Z.prototype),e}function Z(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return e_(t)}return p8(t,e,r)}Z.poolSize=8192;function p8(t,e,r){if(typeof t=="string")return GH(t,e);if(ArrayBuffer.isView(t))return ZH(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Ns(t,ArrayBuffer)||t&&Ns(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ns(t,SharedArrayBuffer)||t&&Ns(t.buffer,SharedArrayBuffer)))return Y1(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return Z.from(n,e,r);let s=XH(t);if(s)return s;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return Z.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}Z.from=function(t,e,r){return p8(t,e,r)};Object.setPrototypeOf(Z.prototype,Uint8Array.prototype);Object.setPrototypeOf(Z,Uint8Array);function h8(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function WH(t,e,r){return h8(t),t<=0?jo(t):e!==void 0?typeof r=="string"?jo(t).fill(e,r):jo(t).fill(e):jo(t)}Z.alloc=function(t,e,r){return WH(t,e,r)};function e_(t){return h8(t),jo(t<0?0:t_(t)|0)}Z.allocUnsafe=function(t){return e_(t)};Z.allocUnsafeSlow=function(t){return e_(t)};function GH(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Z.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=y8(t,e)|0,n=jo(r),s=n.write(t,e);return s!==r&&(n=n.slice(0,s)),n}function X1(t){let e=t.length<0?0:t_(t.length)|0,r=jo(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function ZH(t){if(Ns(t,Uint8Array)){let e=new Uint8Array(t);return Y1(e.buffer,e.byteOffset,e.byteLength)}return X1(t)}function Y1(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,Z.prototype),n}function XH(t){if(Z.isBuffer(t)){let e=t_(t.length)|0,r=jo(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||n_(t.length)?jo(0):X1(t);if(t.type==="Buffer"&&Array.isArray(t.data))return X1(t.data)}function t_(t){if(t>=a0)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a0.toString(16)+" bytes");return t|0}function YH(t){return+t!=t&&(t=0),Z.alloc(+t)}Z.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==Z.prototype};Z.compare=function(e,r){if(Ns(e,Uint8Array)&&(e=Z.from(e,e.offset,e.byteLength)),Ns(r,Uint8Array)&&(r=Z.from(r,r.offset,r.byteLength)),!Z.isBuffer(e)||!Z.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,s=r.length;for(let i=0,o=Math.min(n,s);i<o;++i)if(e[i]!==r[i]){n=e[i],s=r[i];break}return n<s?-1:s<n?1:0};Z.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Z.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Z.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let s=Z.allocUnsafe(r),i=0;for(n=0;n<e.length;++n){let o=e[n];if(Ns(o,Uint8Array))i+o.length>s.length?(Z.isBuffer(o)||(o=Z.from(o)),o.copy(s,i)):Uint8Array.prototype.set.call(s,o,i);else if(Z.isBuffer(o))o.copy(s,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=o.length}return s};function y8(t,e){if(Z.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Ns(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Q1(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return A8(t).length;default:if(s)return n?-1:Q1(t).length;e=(""+e).toLowerCase(),s=!0}}Z.byteLength=y8;function QH(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return cW(this,e,r);case"utf8":case"utf-8":return g8(this,e,r);case"ascii":return aW(this,e,r);case"latin1":case"binary":return uW(this,e,r);case"base64":return sW(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return lW(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}Z.prototype._isBuffer=!0;function uc(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}Z.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)uc(this,r,r+1);return this};Z.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)uc(this,r,r+3),uc(this,r+1,r+2);return this};Z.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)uc(this,r,r+7),uc(this,r+1,r+6),uc(this,r+2,r+5),uc(this,r+3,r+4);return this};Z.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?g8(this,0,e):QH.apply(this,arguments)};Z.prototype.toLocaleString=Z.prototype.toString;Z.prototype.equals=function(e){if(!Z.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Z.compare(this,e)===0};Z.prototype.inspect=function(){let e="",r=nd.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};c8&&(Z.prototype[c8]=Z.prototype.inspect);Z.prototype.compare=function(e,r,n,s,i){if(Ns(e,Uint8Array)&&(e=Z.from(e,e.offset,e.byteLength)),!Z.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),s===void 0&&(s=0),i===void 0&&(i=this.length),r<0||n>e.length||s<0||i>this.length)throw new RangeError("out of range index");if(s>=i&&r>=n)return 0;if(s>=i)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,s>>>=0,i>>>=0,this===e)return 0;let o=i-s,a=n-r,u=Math.min(o,a),c=this.slice(s,i),l=e.slice(r,n);for(let d=0;d<u;++d)if(c[d]!==l[d]){o=c[d],a=l[d];break}return o<a?-1:a<o?1:0};function m8(t,e,r,n,s){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,n_(r)&&(r=s?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(s)return-1;r=t.length-1}else if(r<0)if(s)r=0;else return-1;if(typeof e=="string"&&(e=Z.from(e,n)),Z.isBuffer(e))return e.length===0?-1:l8(t,e,r,n,s);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):l8(t,[e],r,n,s);throw new TypeError("val must be string, number or Buffer")}function l8(t,e,r,n,s){let i=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;i=2,o/=2,a/=2,r/=2}function u(l,d){return i===1?l[d]:l.readUInt16BE(d*i)}let c;if(s){let l=-1;for(c=r;c<o;c++)if(u(t,c)===u(e,l===-1?0:c-l)){if(l===-1&&(l=c),c-l+1===a)return l*i}else l!==-1&&(c-=c-l),l=-1}else for(r+a>o&&(r=o-a),c=r;c>=0;c--){let l=!0;for(let d=0;d<a;d++)if(u(t,c+d)!==u(e,d)){l=!1;break}if(l)return c}return-1}Z.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};Z.prototype.indexOf=function(e,r,n){return m8(this,e,r,n,!0)};Z.prototype.lastIndexOf=function(e,r,n){return m8(this,e,r,n,!1)};function eW(t,e,r,n){r=Number(r)||0;let s=t.length-r;n?(n=Number(n),n>s&&(n=s)):n=s;let i=e.length;n>i/2&&(n=i/2);let o;for(o=0;o<n;++o){let a=parseInt(e.substr(o*2,2),16);if(n_(a))return o;t[r+o]=a}return o}function tW(t,e,r,n){return u0(Q1(e,t.length-r),t,r,n)}function rW(t,e,r,n){return u0(hW(e),t,r,n)}function nW(t,e,r,n){return u0(A8(e),t,r,n)}function iW(t,e,r,n){return u0(yW(e,t.length-r),t,r,n)}Z.prototype.write=function(e,r,n,s){if(r===void 0)s="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")s=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,s===void 0&&(s="utf8")):(s=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let i=this.length-r;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let o=!1;for(;;)switch(s){case"hex":return eW(this,e,r,n);case"utf8":case"utf-8":return tW(this,e,r,n);case"ascii":case"latin1":case"binary":return rW(this,e,r,n);case"base64":return nW(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return iW(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),o=!0}};Z.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function sW(t,e,r){return e===0&&r===t.length?Z1.fromByteArray(t):Z1.fromByteArray(t.slice(e,r))}function g8(t,e,r){r=Math.min(t.length,r);let n=[],s=e;for(;s<r;){let i=t[s],o=null,a=i>239?4:i>223?3:i>191?2:1;if(s+a<=r){let u,c,l,d;switch(a){case 1:i<128&&(o=i);break;case 2:u=t[s+1],(u&192)===128&&(d=(i&31)<<6|u&63,d>127&&(o=d));break;case 3:u=t[s+1],c=t[s+2],(u&192)===128&&(c&192)===128&&(d=(i&15)<<12|(u&63)<<6|c&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:u=t[s+1],c=t[s+2],l=t[s+3],(u&192)===128&&(c&192)===128&&(l&192)===128&&(d=(i&15)<<18|(u&63)<<12|(c&63)<<6|l&63,d>65535&&d<1114112&&(o=d))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),s+=a}return oW(n)}var d8=4096;function oW(t){let e=t.length;if(e<=d8)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=d8));return r}function aW(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]&127);return n}function uW(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]);return n}function cW(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let s="";for(let i=e;i<r;++i)s+=mW[t[i]];return s}function lW(t,e,r){let n=t.slice(e,r),s="";for(let i=0;i<n.length-1;i+=2)s+=String.fromCharCode(n[i]+n[i+1]*256);return s}Z.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let s=this.subarray(e,r);return Object.setPrototypeOf(s,Z.prototype),s};function Lr(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}Z.prototype.readUintLE=Z.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Lr(e,r,this.length);let s=this[e],i=1,o=0;for(;++o<r&&(i*=256);)s+=this[e+o]*i;return s};Z.prototype.readUintBE=Z.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Lr(e,r,this.length);let s=this[e+--r],i=1;for(;r>0&&(i*=256);)s+=this[e+--r]*i;return s};Z.prototype.readUint8=Z.prototype.readUInt8=function(e,r){return e=e>>>0,r||Lr(e,1,this.length),this[e]};Z.prototype.readUint16LE=Z.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Lr(e,2,this.length),this[e]|this[e+1]<<8};Z.prototype.readUint16BE=Z.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Lr(e,2,this.length),this[e]<<8|this[e+1]};Z.prototype.readUint32LE=Z.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Lr(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Z.prototype.readUint32BE=Z.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Lr(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Z.prototype.readBigUInt64LE=Ma(function(e){e=e>>>0,rd(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ip(e,this.length-8);let s=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,i=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(s)+(BigInt(i)<<BigInt(32))});Z.prototype.readBigUInt64BE=Ma(function(e){e=e>>>0,rd(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ip(e,this.length-8);let s=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],i=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(s)<<BigInt(32))+BigInt(i)});Z.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Lr(e,r,this.length);let s=this[e],i=1,o=0;for(;++o<r&&(i*=256);)s+=this[e+o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*r)),s};Z.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Lr(e,r,this.length);let s=r,i=1,o=this[e+--s];for(;s>0&&(i*=256);)o+=this[e+--s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*r)),o};Z.prototype.readInt8=function(e,r){return e=e>>>0,r||Lr(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Z.prototype.readInt16LE=function(e,r){e=e>>>0,r||Lr(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};Z.prototype.readInt16BE=function(e,r){e=e>>>0,r||Lr(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};Z.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Lr(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Z.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Lr(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Z.prototype.readBigInt64LE=Ma(function(e){e=e>>>0,rd(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ip(e,this.length-8);let s=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(s)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});Z.prototype.readBigInt64BE=Ma(function(e){e=e>>>0,rd(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ip(e,this.length-8);let s=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(s)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});Z.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Lr(e,4,this.length),td.read(this,e,!0,23,4)};Z.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Lr(e,4,this.length),td.read(this,e,!1,23,4)};Z.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Lr(e,8,this.length),td.read(this,e,!0,52,8)};Z.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Lr(e,8,this.length),td.read(this,e,!1,52,8)};function Un(t,e,r,n,s,i){if(!Z.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}Z.prototype.writeUintLE=Z.prototype.writeUIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){let a=Math.pow(2,8*n)-1;Un(this,e,r,n,a,0)}let i=1,o=0;for(this[r]=e&255;++o<n&&(i*=256);)this[r+o]=e/i&255;return r+n};Z.prototype.writeUintBE=Z.prototype.writeUIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){let a=Math.pow(2,8*n)-1;Un(this,e,r,n,a,0)}let i=n-1,o=1;for(this[r+i]=e&255;--i>=0&&(o*=256);)this[r+i]=e/o&255;return r+n};Z.prototype.writeUint8=Z.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||Un(this,e,r,1,255,0),this[r]=e&255,r+1};Z.prototype.writeUint16LE=Z.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Un(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};Z.prototype.writeUint16BE=Z.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Un(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};Z.prototype.writeUint32LE=Z.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Un(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};Z.prototype.writeUint32BE=Z.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Un(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function v8(t,e,r,n,s){S8(e,n,s,t,r,7);let i=Number(e&BigInt(4294967295));t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function b8(t,e,r,n,s){S8(e,n,s,t,r,7);let i=Number(e&BigInt(4294967295));t[r+7]=i,i=i>>8,t[r+6]=i,i=i>>8,t[r+5]=i,i=i>>8,t[r+4]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}Z.prototype.writeBigUInt64LE=Ma(function(e,r=0){return v8(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});Z.prototype.writeBigUInt64BE=Ma(function(e,r=0){return b8(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});Z.prototype.writeIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){let u=Math.pow(2,8*n-1);Un(this,e,r,n,u-1,-u)}let i=0,o=1,a=0;for(this[r]=e&255;++i<n&&(o*=256);)e<0&&a===0&&this[r+i-1]!==0&&(a=1),this[r+i]=(e/o>>0)-a&255;return r+n};Z.prototype.writeIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){let u=Math.pow(2,8*n-1);Un(this,e,r,n,u-1,-u)}let i=n-1,o=1,a=0;for(this[r+i]=e&255;--i>=0&&(o*=256);)e<0&&a===0&&this[r+i+1]!==0&&(a=1),this[r+i]=(e/o>>0)-a&255;return r+n};Z.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||Un(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};Z.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Un(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};Z.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Un(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};Z.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Un(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};Z.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Un(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};Z.prototype.writeBigInt64LE=Ma(function(e,r=0){return v8(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});Z.prototype.writeBigInt64BE=Ma(function(e,r=0){return b8(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function w8(t,e,r,n,s,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function _8(t,e,r,n,s){return e=+e,r=r>>>0,s||w8(t,e,r,4,34028234663852886e22,-34028234663852886e22),td.write(t,e,r,n,23,4),r+4}Z.prototype.writeFloatLE=function(e,r,n){return _8(this,e,r,!0,n)};Z.prototype.writeFloatBE=function(e,r,n){return _8(this,e,r,!1,n)};function E8(t,e,r,n,s){return e=+e,r=r>>>0,s||w8(t,e,r,8,17976931348623157e292,-17976931348623157e292),td.write(t,e,r,n,52,8),r+8}Z.prototype.writeDoubleLE=function(e,r,n){return E8(this,e,r,!0,n)};Z.prototype.writeDoubleBE=function(e,r,n){return E8(this,e,r,!1,n)};Z.prototype.copy=function(e,r,n,s){if(!Z.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!s&&s!==0&&(s=this.length),r>=e.length&&(r=e.length),r||(r=0),s>0&&s<n&&(s=n),s===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-r<s-n&&(s=e.length-r+n);let i=s-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,s):Uint8Array.prototype.set.call(e,this.subarray(n,s),r),i};Z.prototype.fill=function(e,r,n,s){if(typeof e=="string"){if(typeof r=="string"?(s=r,r=0,n=this.length):typeof n=="string"&&(s=n,n=this.length),s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!Z.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(e.length===1){let o=e.charCodeAt(0);(s==="utf8"&&o<128||s==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let i;if(typeof e=="number")for(i=r;i<n;++i)this[i]=e;else{let o=Z.isBuffer(e)?e:Z.from(e,s),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-r;++i)this[i+r]=o[i%a]}return this};var ed={};function r_(t,e,r){ed[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(s){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:s,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}r_("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);r_("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);r_("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,s=r;return Number.isInteger(r)&&Math.abs(r)>2**32?s=f8(String(r)):typeof r=="bigint"&&(s=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(s=f8(s)),s+="n"),n+=` It must be ${e}. Received ${s}`,n},RangeError);function f8(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function dW(t,e,r){rd(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Ip(e,t.length-(r+1))}function S8(t,e,r,n,s,i){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw i>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(i+1)*8}${o}`:a=`>= -(2${o} ** ${(i+1)*8-1}${o}) and < 2 ** ${(i+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new ed.ERR_OUT_OF_RANGE("value",a,t)}dW(n,s,i)}function rd(t,e){if(typeof t!="number")throw new ed.ERR_INVALID_ARG_TYPE(e,"number",t)}function Ip(t,e,r){throw Math.floor(t)!==t?(rd(t,r),new ed.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new ed.ERR_BUFFER_OUT_OF_BOUNDS:new ed.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var fW=/[^+/0-9A-Za-z-_]/g;function pW(t){if(t=t.split("=")[0],t=t.trim().replace(fW,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Q1(t,e){e=e||1/0;let r,n=t.length,s=null,i=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!s){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}s=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(e-=3)>-1&&i.push(239,191,189);if(s=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return i}function hW(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function yW(t,e){let r,n,s,i=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,s=r%256,i.push(s),i.push(n);return i}function A8(t){return Z1.toByteArray(pW(t))}function u0(t,e,r,n){let s;for(s=0;s<n&&!(s+r>=e.length||s>=t.length);++s)e[s+r]=t[s];return s}function Ns(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function n_(t){return t!==t}var mW=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let s=0;s<16;++s)e[n+s]=t[r]+t[s]}return e}();function Ma(t){return typeof BigInt>"u"?gW:t}function gW(){throw new Error("BigInt not supported")}});var s_=b((YAe,x8)=>{"use strict";var i_=null;x8.exports=function(){return i_===null&&(i_={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),i_}});var u_=b(D8=>{"use strict";var o_=rs(),vW=new Set(["buffer","view","utf8"]),a_=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!vW.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new o_(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new o_(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new o_(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};D8.Encoding=a_});var f_=b(c0=>{"use strict";var{Buffer:l_}=Ei()||{},{Encoding:d_}=u_(),bW=s_(),Fp=class extends d_{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new kp({encode:this.encode,decode:e=>this.decode(l_.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},kp=class extends d_{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new Fp({encode:e=>{let r=this.encode(e);return l_.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},c_=class extends d_{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new Fp({encode:e=>l_.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:r}=bW();return new kp({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(r.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};c0.BufferFormat=Fp;c0.ViewFormat=kp;c0.UTF8Format=c_});var T8=b(cc=>{"use strict";var{Buffer:hn}=Ei()||{Buffer:{isBuffer:()=>!1}},{textEncoder:P8,textDecoder:C8}=s_()(),{BufferFormat:Rp,ViewFormat:p_,UTF8Format:O8}=f_(),l0=t=>t;cc.utf8=new O8({encode:function(t){return hn.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?C8.decode(t):String(t)},decode:l0,name:"utf8",createViewTranscoder(){return new p_({encode:function(t){return ArrayBuffer.isView(t)?t:P8.encode(t)},decode:function(t){return C8.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new Rp({encode:function(t){return hn.isBuffer(t)?t:ArrayBuffer.isView(t)?hn.from(t.buffer,t.byteOffset,t.byteLength):hn.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});cc.json=new O8({encode:JSON.stringify,decode:JSON.parse,name:"json"});cc.buffer=new Rp({encode:function(t){return hn.isBuffer(t)?t:ArrayBuffer.isView(t)?hn.from(t.buffer,t.byteOffset,t.byteLength):hn.from(String(t),"utf8")},decode:l0,name:"buffer",createViewTranscoder(){return new p_({encode:function(t){return ArrayBuffer.isView(t)?t:hn.from(String(t),"utf8")},decode:function(t){return hn.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});cc.view=new p_({encode:function(t){return ArrayBuffer.isView(t)?t:P8.encode(t)},decode:l0,name:"view",createBufferTranscoder(){return new Rp({encode:function(t){return hn.isBuffer(t)?t:ArrayBuffer.isView(t)?hn.from(t.buffer,t.byteOffset,t.byteLength):hn.from(String(t),"utf8")},decode:l0,name:`${this.name}+buffer`})}});cc.hex=new Rp({encode:function(t){return hn.isBuffer(t)?t:hn.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});cc.base64=new Rp({encode:function(t){return hn.isBuffer(t)?t:hn.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"})});var F8=b(I8=>{"use strict";var B8=rs(),f0=T8(),{Encoding:wW}=u_(),{BufferFormat:_W,ViewFormat:EW,UTF8Format:SW}=f_(),$p=Symbol("formats"),d0=Symbol("encodings"),AW=new Set(["buffer","view","utf8"]),h_=class{constructor(e){if(Array.isArray(e)){if(!e.every(r=>AW.has(r)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[d0]=new Map,this[$p]=new Set(e);for(let r in f0)try{this.encoding(r)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[d0].values()))}encoding(e){let r=this[d0].get(e);if(r===void 0){if(typeof e=="string"&&e!==""){if(r=PW[e],!r)throw new B8(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");r=xW(e)}let{name:n,format:s}=r;if(!this[$p].has(s))if(this[$p].has("view"))r=r.createViewTranscoder();else if(this[$p].has("buffer"))r=r.createBufferTranscoder();else if(this[$p].has("utf8"))r=r.createUTF8Transcoder();else throw new B8(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let i of[e,n,r.name,r.commonName])this[d0].set(i,r)}return r}};I8.Transcoder=h_;function xW(t){if(t instanceof wW)return t;let e="type"in t&&typeof t.type=="string"?t.type:void 0,r=t.name||e||`anonymous-${OW++}`;switch(DW(t)){case"view":return new EW({...t,name:r});case"utf8":return new SW({...t,name:r});case"buffer":return new _W({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function DW(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}var CW={binary:f0.buffer,"utf-8":f0.utf8},PW={...f0,...CW},OW=0});var jp=b((nxe,y_)=>{"use strict";var id=typeof Reflect=="object"?Reflect:null,k8=id&&typeof id.apply=="function"?id.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},p0;id&&typeof id.ownKeys=="function"?p0=id.ownKeys:Object.getOwnPropertySymbols?p0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:p0=function(e){return Object.getOwnPropertyNames(e)};function TW(t){console&&console.warn&&console.warn(t)}var $8=Number.isNaN||function(e){return e!==e};function qt(){qt.init.call(this)}y_.exports=qt;y_.exports.once=kW;qt.EventEmitter=qt;qt.prototype._events=void 0;qt.prototype._eventsCount=0;qt.prototype._maxListeners=void 0;var R8=10;function h0(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(qt,"defaultMaxListeners",{enumerable:!0,get:function(){return R8},set:function(t){if(typeof t!="number"||t<0||$8(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");R8=t}});qt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};qt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||$8(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function j8(t){return t._maxListeners===void 0?qt.defaultMaxListeners:t._maxListeners}qt.prototype.getMaxListeners=function(){return j8(this)};qt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=i[e];if(u===void 0)return!1;if(typeof u=="function")k8(u,this,r);else for(var c=u.length,l=U8(u,c),n=0;n<c;++n)k8(l[n],this,r);return!0};function N8(t,e,r,n){var s,i,o;if(h0(r),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),o=i[e]),o===void 0)o=i[e]=r,++t._eventsCount;else if(typeof o=="function"?o=i[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),s=j8(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,TW(a)}return t}qt.prototype.addListener=function(e,r){return N8(this,e,r,!1)};qt.prototype.on=qt.prototype.addListener;qt.prototype.prependListener=function(e,r){return N8(this,e,r,!0)};function BW(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function M8(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},s=BW.bind(n);return s.listener=r,n.wrapFn=s,s}qt.prototype.once=function(e,r){return h0(r),this.on(e,M8(this,e,r)),this};qt.prototype.prependOnceListener=function(e,r){return h0(r),this.prependListener(e,M8(this,e,r)),this};qt.prototype.removeListener=function(e,r){var n,s,i,o,a;if(h0(r),s=this._events,s===void 0)return this;if(n=s[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,i=o;break}if(i<0)return this;i===0?n.shift():IW(n,i),n.length===1&&(s[e]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};qt.prototype.off=qt.prototype.removeListener;qt.prototype.removeAllListeners=function(e){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var i=Object.keys(n),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(e,r[s]);return this};function q8(t,e,r){var n=t._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?FW(s):U8(s,s.length)}qt.prototype.listeners=function(e){return q8(this,e,!0)};qt.prototype.rawListeners=function(e){return q8(this,e,!1)};qt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):L8.call(t,e)};qt.prototype.listenerCount=L8;function L8(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}qt.prototype.eventNames=function(){return this._eventsCount>0?p0(this._events):[]};function U8(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function IW(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function FW(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function kW(t,e){return new Promise(function(r,n){function s(o){t.removeListener(e,i),n(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),r([].slice.call(arguments))}K8(t,e,i,{once:!0}),e!=="error"&&RW(t,s,{once:!0})})}function RW(t,e,r){typeof t.on=="function"&&K8(t,"error",e,r)}function K8(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){n.once&&t.removeEventListener(e,s),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var z8=b((ixe,V8)=>{V8.exports=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t)});var Np=b(m_=>{"use strict";var J8=z8();m_.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(n,s){t=function(i,o){i?s(i):n(o)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};m_.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){J8(()=>e(null,r))}).catch(function(r){J8(()=>e(r))})}});var y0=b(g_=>{"use strict";g_.getCallback=function(t,e){return typeof t=="function"?t:e};g_.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}}});var za=b(b0=>{"use strict";var{fromCallback:v_}=Np(),ii=rs(),{getOptions:b_,getCallback:H8}=y0(),lc=Symbol("promise"),sd=Symbol("callback"),Ms=Symbol("working"),dc=Symbol("handleOne"),No=Symbol("handleMany"),w_=Symbol("autoClose"),Ka=Symbol("finishWork"),qs=Symbol("returnMany"),qa=Symbol("closing"),Mp=Symbol("handleClose"),m0=Symbol("closed"),qp=Symbol("closeCallbacks"),Ua=Symbol("keyEncoding"),fc=Symbol("valueEncoding"),__=Symbol("abortOnClose"),g0=Symbol("legacy"),E_=Symbol("keys"),S_=Symbol("values"),La=Symbol("limit"),Si=Symbol("count"),v0=Object.freeze({}),$W=()=>{},W8=!1,Lp=class{constructor(e,r,n){if(typeof e!="object"||e===null){let s=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${s}`)}if(typeof r!="object"||r===null)throw new TypeError("The second argument must be an options object");this[m0]=!1,this[qp]=[],this[Ms]=!1,this[qa]=!1,this[w_]=!1,this[sd]=null,this[dc]=this[dc].bind(this),this[No]=this[No].bind(this),this[Mp]=this[Mp].bind(this),this[Ua]=r[Ua],this[fc]=r[fc],this[g0]=n,this[La]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[Si]=0,this[__]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[Si]}get limit(){return this[La]}next(e){let r;if(e===void 0)r=new Promise((n,s)=>{e=(i,o,a)=>{i?s(i):this[g0]?o===void 0&&a===void 0?n():n([o,a]):n(o)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[qa]?this.nextTick(e,new ii("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ms]?this.nextTick(e,new ii("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ms]=!0,this[sd]=e,this[Si]>=this[La]?this.nextTick(this[dc],null):this._next(this[dc])),r}_next(e){this.nextTick(e)}nextv(e,r,n){return n=H8(r,n),n=v_(n,lc),r=b_(r,v0),Number.isInteger(e)?(this[qa]?this.nextTick(n,new ii("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ms]?this.nextTick(n,new ii("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[La]<1/0&&(e=Math.min(e,this[La]-this[Si])),this[Ms]=!0,this[sd]=n,e<=0?this.nextTick(this[No],null,[]):this._nextv(e,r,this[No])),n[lc]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[lc])}_nextv(e,r,n){let s=[],i=(o,a,u)=>{if(o)return n(o);if(this[g0]?a===void 0&&u===void 0:a===void 0)return n(null,s);s.push(this[g0]?[a,u]:a),s.length===e?n(null,s):this._next(i)};this._next(i)}all(e,r){return r=H8(e,r),r=v_(r,lc),e=b_(e,v0),this[qa]?this.nextTick(r,new ii("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ms]?this.nextTick(r,new ii("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ms]=!0,this[sd]=r,this[w_]=!0,this[Si]>=this[La]?this.nextTick(this[No],null,[]):this._all(e,this[No])),r[lc]}_all(e,r){let n=this[Si],s=[],i=()=>{let a=this[La]<1/0?Math.min(1e3,this[La]-n):1e3;a<=0?this.nextTick(r,null,s):this._nextv(a,v0,o)},o=(a,u)=>{a?r(a):u.length===0?r(null,s):(s.push.apply(s,u),n+=u.length,i())};i()}[Ka](){let e=this[sd];return this[__]&&e===null?$W:(this[Ms]=!1,this[sd]=null,this[qa]&&this._close(this[Mp]),e)}[qs](e,r,n){this[w_]?this.close(e.bind(null,r,n)):e(r,n)}seek(e,r){if(r=b_(r,v0),!this[qa]){if(this[Ms])throw new ii("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(r.keyEncoding||this[Ua]),s=n.format;r.keyEncoding!==s&&(r={...r,keyEncoding:s});let i=this.db.prefixKey(n.encode(e),s);this._seek(i,r)}}}_seek(e,r){throw new ii("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=v_(e,lc),this[m0]?this.nextTick(e):this[qa]?this[qp].push(e):(this[qa]=!0,this[qp].push(e),this[Ms]?this[__]&&this[Ka]()(new ii("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Mp])),e[lc]}_close(e){this.nextTick(e)}[Mp](){this[m0]=!0,this.db.detachResource(this);let e=this[qp];this[qp]=[];for(let r of e)r()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[m0]||await this.close()}}},od=class extends Lp{constructor(e,r){super(e,r,!0),this[E_]=r.keys!==!1,this[S_]=r.values!==!1}[dc](e,r,n){let s=this[Ka]();if(e)return s(e);try{r=this[E_]&&r!==void 0?this[Ua].decode(r):void 0,n=this[S_]&&n!==void 0?this[fc].decode(n):void 0}catch(i){return s(new Va("entry",i))}r===void 0&&n===void 0||this[Si]++,s(null,r,n)}[No](e,r){let n=this[Ka]();if(e)return this[qs](n,e);try{for(let s of r){let i=s[0],o=s[1];s[0]=this[E_]&&i!==void 0?this[Ua].decode(i):void 0,s[1]=this[S_]&&o!==void 0?this[fc].decode(o):void 0}}catch(s){return this[qs](n,new Va("entries",s))}this[Si]+=r.length,this[qs](n,null,r)}end(e){return!W8&&typeof console<"u"&&(W8=!0,console.warn(new ii("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},A_=class extends Lp{constructor(e,r){super(e,r,!1)}[dc](e,r){let n=this[Ka]();if(e)return n(e);try{r=r!==void 0?this[Ua].decode(r):void 0}catch(s){return n(new Va("key",s))}r!==void 0&&this[Si]++,n(null,r)}[No](e,r){let n=this[Ka]();if(e)return this[qs](n,e);try{for(let s=0;s<r.length;s++){let i=r[s];r[s]=i!==void 0?this[Ua].decode(i):void 0}}catch(s){return this[qs](n,new Va("keys",s))}this[Si]+=r.length,this[qs](n,null,r)}},x_=class extends Lp{constructor(e,r){super(e,r,!1)}[dc](e,r){let n=this[Ka]();if(e)return n(e);try{r=r!==void 0?this[fc].decode(r):void 0}catch(s){return n(new Va("value",s))}r!==void 0&&this[Si]++,n(null,r)}[No](e,r){let n=this[Ka]();if(e)return this[qs](n,e);try{for(let s=0;s<r.length;s++){let i=r[s];r[s]=i!==void 0?this[fc].decode(i):void 0}}catch(s){return this[qs](n,new Va("values",s))}this[Si]+=r.length,this[qs](n,null,r)}},Va=class extends ii{constructor(e,r){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:r})}};for(let t of["_ended property","_nexting property","_end method"])Object.defineProperty(od.prototype,t.split(" ")[0],{get(){throw new ii(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ii(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});od.keyEncoding=Ua;od.valueEncoding=fc;b0.AbstractIterator=od;b0.AbstractKeyIterator=A_;b0.AbstractValueIterator=x_});var G8=b(D_=>{"use strict";var{AbstractKeyIterator:jW,AbstractValueIterator:NW}=za(),pc=Symbol("iterator"),Up=Symbol("callback"),ad=Symbol("handleOne"),hc=Symbol("handleMany"),Kp=class extends jW{constructor(e,r){super(e,r),this[pc]=e.iterator({...r,keys:!0,values:!1}),this[ad]=this[ad].bind(this),this[hc]=this[hc].bind(this)}},w0=class extends NW{constructor(e,r){super(e,r),this[pc]=e.iterator({...r,keys:!1,values:!0}),this[ad]=this[ad].bind(this),this[hc]=this[hc].bind(this)}};for(let t of[Kp,w0]){let e=t===Kp,r=e?n=>n[0]:n=>n[1];t.prototype._next=function(n){this[Up]=n,this[pc].next(this[ad])},t.prototype[ad]=function(n,s,i){let o=this[Up];n?o(n):o(null,e?s:i)},t.prototype._nextv=function(n,s,i){this[Up]=i,this[pc].nextv(n,s,this[hc])},t.prototype._all=function(n,s){this[Up]=s,this[pc].all(n,this[hc])},t.prototype[hc]=function(n,s){let i=this[Up];n?i(n):i(null,s.map(r))},t.prototype._seek=function(n,s){this[pc].seek(n,s)},t.prototype._close=function(n){this[pc].close(n)}}D_.DefaultKeyIterator=Kp;D_.DefaultValueIterator=w0});var Z8=b(D0=>{"use strict";var{AbstractIterator:MW,AbstractKeyIterator:qW,AbstractValueIterator:LW}=za(),C_=rs(),Kn=Symbol("nut"),A0=Symbol("undefer"),x0=Symbol("factory"),_0=class extends MW{constructor(e,r){super(e,r),this[Kn]=null,this[x0]=()=>e.iterator(r),this.db.defer(()=>this[A0]())}},E0=class extends qW{constructor(e,r){super(e,r),this[Kn]=null,this[x0]=()=>e.keys(r),this.db.defer(()=>this[A0]())}},S0=class extends LW{constructor(e,r){super(e,r),this[Kn]=null,this[x0]=()=>e.values(r),this.db.defer(()=>this[A0]())}};for(let t of[_0,E0,S0])t.prototype[A0]=function(){this.db.status==="open"&&(this[Kn]=this[x0]())},t.prototype._next=function(e){this[Kn]!==null?this[Kn].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new C_("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,r,n){this[Kn]!==null?this[Kn].nextv(e,r,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,r,n)):this.nextTick(n,new C_("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,r){this[Kn]!==null?this[Kn].all(r):this.db.status==="opening"?this.db.defer(()=>this._all(e,r)):this.nextTick(r,new C_("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,r){this[Kn]!==null?this[Kn]._seek(e,r):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,r))},t.prototype._close=function(e){this[Kn]!==null?this[Kn].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};D0.DeferredIterator=_0;D0.DeferredKeyIterator=E0;D0.DeferredValueIterator=S0});var O_=b(Y8=>{"use strict";var{fromCallback:X8}=Np(),C0=rs(),{getCallback:UW,getOptions:KW}=y0(),P0=Symbol("promise"),Ai=Symbol("status"),ud=Symbol("operations"),Vp=Symbol("finishClose"),cd=Symbol("closeCallbacks"),P_=class{constructor(e){if(typeof e!="object"||e===null){let r=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${r}`)}this[ud]=[],this[cd]=[],this[Ai]="open",this[Vp]=this[Vp].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[ud].length}put(e,r,n){if(this[Ai]!=="open")throw new C0("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let s=this.db._checkKey(e)||this.db._checkValue(r);if(s)throw s;let i=n&&n.sublevel!=null?n.sublevel:this.db,o=n,a=i.keyEncoding(n&&n.keyEncoding),u=i.valueEncoding(n&&n.valueEncoding),c=a.format;n={...n,keyEncoding:c,valueEncoding:u.format},i!==this.db&&(n.sublevel=null);let l=i.prefixKey(a.encode(e),c),d=u.encode(r);return this._put(l,d,n),this[ud].push({...o,type:"put",key:e,value:r}),this}_put(e,r,n){}del(e,r){if(this[Ai]!=="open")throw new C0("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let s=r&&r.sublevel!=null?r.sublevel:this.db,i=r,o=s.keyEncoding(r&&r.keyEncoding),a=o.format;return r={...r,keyEncoding:a},s!==this.db&&(r.sublevel=null),this._del(s.prefixKey(o.encode(e),a),r),this[ud].push({...i,type:"del",key:e}),this}_del(e,r){}clear(){if(this[Ai]!=="open")throw new C0("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[ud]=[],this}_clear(){}write(e,r){return r=UW(e,r),r=X8(r,P0),e=KW(e),this[Ai]!=="open"?this.nextTick(r,new C0("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(r):(this[Ai]="writing",this._write(e,n=>{this[Ai]="closing",this[cd].push(()=>r(n)),n||this.db.emit("batch",this[ud]),this._close(this[Vp])})),r[P0]}_write(e,r){}close(e){return e=X8(e,P0),this[Ai]==="closing"?this[cd].push(e):this[Ai]==="closed"?this.nextTick(e):(this[cd].push(e),this[Ai]!=="writing"&&(this[Ai]="closing",this._close(this[Vp]))),e[P0]}_close(e){this.nextTick(e)}[Vp](){this[Ai]="closed",this.db.detachResource(this);let e=this[cd];this[cd]=[];for(let r of e)r()}};Y8.AbstractChainedBatch=P_});var eB=b(Q8=>{"use strict";var{AbstractChainedBatch:VW}=O_(),zW=rs(),ld=Symbol("encoded"),T_=class extends VW{constructor(e){super(e),this[ld]=[]}_put(e,r,n){this[ld].push({...n,type:"put",key:e,value:r})}_del(e,r){this[ld].push({...r,type:"del",key:e})}_clear(){this[ld]=[]}_write(e,r){this.db.status==="opening"?this.db.defer(()=>this._write(e,r)):this.db.status==="open"?this[ld].length===0?this.nextTick(r):this.db._batch(this[ld],e,r):this.nextTick(r,new zW("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};Q8.DefaultChainedBatch=T_});var nB=b((fxe,rB)=>{"use strict";var tB=rs(),JW=Object.prototype.hasOwnProperty,HW=new Set(["lt","lte","gt","gte"]);rB.exports=function(t,e){let r={};for(let n in t)if(JW.call(t,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new tB(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new tB("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});HW.has(n)?r[n]=e.encode(t[n]):r[n]=t[n]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r}});var B_=b((pxe,sB)=>{var iB;sB.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):t=>(iB||(iB=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0))});var uB=b((hxe,aB)=>{"use strict";var oB=B_();aB.exports=function(t,...e){e.length===0?oB(t):oB(()=>t(...e))}});var cB=b(O0=>{"use strict";var{AbstractIterator:WW,AbstractKeyIterator:GW,AbstractValueIterator:ZW}=za(),dd=Symbol("unfix"),ns=Symbol("iterator"),yc=Symbol("handleOne"),Ja=Symbol("handleMany"),Mo=Symbol("callback"),zp=class extends WW{constructor(e,r,n,s){super(e,r),this[ns]=n,this[dd]=s,this[yc]=this[yc].bind(this),this[Ja]=this[Ja].bind(this),this[Mo]=null}[yc](e,r,n){let s=this[Mo];if(e)return s(e);r!==void 0&&(r=this[dd](r)),s(e,r,n)}[Ja](e,r){let n=this[Mo];if(e)return n(e);for(let s of r){let i=s[0];i!==void 0&&(s[0]=this[dd](i))}n(e,r)}},Jp=class extends GW{constructor(e,r,n,s){super(e,r),this[ns]=n,this[dd]=s,this[yc]=this[yc].bind(this),this[Ja]=this[Ja].bind(this),this[Mo]=null}[yc](e,r){let n=this[Mo];if(e)return n(e);r!==void 0&&(r=this[dd](r)),n(e,r)}[Ja](e,r){let n=this[Mo];if(e)return n(e);for(let s=0;s<r.length;s++){let i=r[s];i!==void 0&&(r[s]=this[dd](i))}n(e,r)}},Hp=class extends ZW{constructor(e,r,n){super(e,r),this[ns]=n}};for(let t of[zp,Jp])t.prototype._next=function(e){this[Mo]=e,this[ns].next(this[yc])},t.prototype._nextv=function(e,r,n){this[Mo]=n,this[ns].nextv(e,r,this[Ja])},t.prototype._all=function(e,r){this[Mo]=r,this[ns].all(e,this[Ja])};for(let t of[Hp])t.prototype._next=function(e){this[ns].next(e)},t.prototype._nextv=function(e,r,n){this[ns].nextv(e,r,n)},t.prototype._all=function(e,r){this[ns].all(e,r)};for(let t of[zp,Jp,Hp])t.prototype._seek=function(e,r){this[ns].seek(e,r)},t.prototype._close=function(e){this[ns].close(e)};O0.AbstractSublevelIterator=zp;O0.AbstractSublevelKeyIterator=Jp;O0.AbstractSublevelValueIterator=Hp});var pB=b((mxe,fB)=>{"use strict";var I_=rs(),{Buffer:R_}=Ei()||{},{AbstractSublevelIterator:XW,AbstractSublevelKeyIterator:YW,AbstractSublevelValueIterator:QW}=cB(),qo=Symbol("prefix"),lB=Symbol("upperBound"),Wp=Symbol("prefixRange"),si=Symbol("parent"),F_=Symbol("unfix"),dB=new TextEncoder,eG={separator:"!"};fB.exports=function({AbstractLevel:t}){class e extends t{static defaults(n){if(typeof n=="string")throw new I_("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new I_("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?eG:n.separator?n:{...n,separator:"!"}}constructor(n,s,i){let{separator:o,manifest:a,...u}=e.defaults(i);s=rG(s,o);let c=o.charCodeAt(0)+1,l=n[si]||n;if(!dB.encode(s).every(f=>f>c&&f<127))throw new I_(`Prefix must use bytes > ${c} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(tG(l,a),u);let d=(n.prefix||"")+o+s+o,p=d.slice(0,-1)+String.fromCharCode(c);this[si]=l,this[qo]=new T0(d),this[lB]=new T0(p),this[F_]=new $_,this.nextTick=l.nextTick}prefixKey(n,s){if(s==="utf8")return this[qo].utf8+n;if(n.byteLength===0)return this[qo][s];if(s==="view"){let i=this[qo].view,o=new Uint8Array(i.byteLength+n.byteLength);return o.set(i,0),o.set(n,i.byteLength),o}else{let i=this[qo].buffer;return R_.concat([i,n],i.byteLength+n.byteLength)}}[Wp](n,s){n.gte!==void 0?n.gte=this.prefixKey(n.gte,s):n.gt!==void 0?n.gt=this.prefixKey(n.gt,s):n.gte=this[qo][s],n.lte!==void 0?n.lte=this.prefixKey(n.lte,s):n.lt!==void 0?n.lt=this.prefixKey(n.lt,s):n.lte=this[lB][s]}get prefix(){return this[qo].utf8}get db(){return this[si]}_open(n,s){this[si].open({passive:!0},s)}_put(n,s,i,o){this[si].put(n,s,i,o)}_get(n,s,i){this[si].get(n,s,i)}_getMany(n,s,i){this[si].getMany(n,s,i)}_del(n,s,i){this[si].del(n,s,i)}_batch(n,s,i){this[si].batch(n,s,i)}_clear(n,s){this[Wp](n,n.keyEncoding),this[si].clear(n,s)}_iterator(n){this[Wp](n,n.keyEncoding);let s=this[si].iterator(n),i=this[F_].get(this[qo].utf8.length,n.keyEncoding);return new XW(this,n,s,i)}_keys(n){this[Wp](n,n.keyEncoding);let s=this[si].keys(n),i=this[F_].get(this[qo].utf8.length,n.keyEncoding);return new YW(this,n,s,i)}_values(n){this[Wp](n,n.keyEncoding);let s=this[si].values(n);return new QW(this,n,s)}}return{AbstractSublevel:e}};var tG=function(t,e){return{...t.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:k_(t,"utf8"),buffer:k_(t,"buffer"),view:k_(t,"view")}}},k_=function(t,e){return t.supports.encodings[e]?t.keyEncoding(e).name===e:!1},T0=class{constructor(e){this.utf8=e,this.view=dB.encode(e),this.buffer=R_?R_.from(this.view.buffer,0,this.view.byteLength):{}}},$_=class{constructor(){this.cache=new Map}get(e,r){let n=this.cache.get(r);return n===void 0&&(r==="view"?n=(function(s,i){return i.subarray(s)}).bind(null,e):n=(function(s,i){return i.slice(s)}).bind(null,e),this.cache.set(r,n)),n}},rG=function(t,e){let r=0,n=t.length;for(;r<n&&t[r]===e;)r++;for(;n>r&&t[n-1]===e;)n--;return t.slice(r,n)}});var L_=b(q_=>{"use strict";var{supports:nG}=n8(),{Transcoder:iG}=F8(),{EventEmitter:sG}=jp(),{fromCallback:Ha}=Np(),is=rs(),{AbstractIterator:mc}=za(),{DefaultKeyIterator:oG,DefaultValueIterator:aG}=G8(),{DeferredIterator:uG,DeferredKeyIterator:cG,DeferredValueIterator:lG}=Z8(),{DefaultChainedBatch:hB}=eB(),{getCallback:gc,getOptions:Wa}=y0(),B0=nB(),Qe=Symbol("promise"),Lo=Symbol("landed"),vc=Symbol("resources"),j_=Symbol("closeResources"),Gp=Symbol("operations"),Zp=Symbol("undefer"),I0=Symbol("deferOpen"),yB=Symbol("options"),lt=Symbol("status"),bc=Symbol("defaultOptions"),fd=Symbol("transcoder"),F0=Symbol("keyEncoding"),N_=Symbol("valueEncoding"),dG=()=>{},Xp=class extends sG{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");r=Wa(r);let{keyEncoding:n,valueEncoding:s,passive:i,...o}=r;this[vc]=new Set,this[Gp]=[],this[I0]=!0,this[yB]=o,this[lt]="opening",this.supports=nG(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[fd]=new iG(fG(this)),this[F0]=this[fd].encoding(n||"utf8"),this[N_]=this[fd].encoding(s||"utf8");for(let a of this[fd].encodings())this.supports.encodings[a.commonName]||(this.supports.encodings[a.commonName]=!0);this[bc]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[F0].commonName,valueEncoding:this[N_].commonName}),key:Object.freeze({keyEncoding:this[F0].commonName})},this.nextTick(()=>{this[I0]&&this.open({passive:!1},dG)})}get status(){return this[lt]}keyEncoding(e){return this[fd].encoding(e??this[F0])}valueEncoding(e){return this[fd].encoding(e??this[N_])}open(e,r){r=gc(e,r),r=Ha(r,Qe),e={...this[yB],...Wa(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=s=>{this[lt]==="closing"||this[lt]==="opening"?this.once(Lo,s?()=>n(s):n):this[lt]!=="open"?r(new is("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:s})):r()};return e.passive?this[lt]==="opening"?this.once(Lo,n):this.nextTick(n):this[lt]==="closed"||this[I0]?(this[I0]=!1,this[lt]="opening",this.emit("opening"),this._open(e,s=>{if(s){this[lt]="closed",this[j_](()=>{this.emit(Lo),n(s)}),this[Zp]();return}this[lt]="open",this[Zp](),this.emit(Lo),this[lt]==="open"&&this.emit("open"),this[lt]==="open"&&this.emit("ready"),n()})):this[lt]==="open"?this.nextTick(n):this.once(Lo,()=>this.open(e,r)),r[Qe]}_open(e,r){this.nextTick(r)}close(e){e=Ha(e,Qe);let r=n=>{this[lt]==="opening"||this[lt]==="closing"?this.once(Lo,n?r(n):r):this[lt]!=="closed"?e(new is("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[lt]==="open"){this[lt]="closing",this.emit("closing");let n=s=>{this[lt]="open",this[Zp](),this.emit(Lo),r(s)};this[j_](()=>{this._close(s=>{if(s)return n(s);this[lt]="closed",this[Zp](),this.emit(Lo),this[lt]==="closed"&&this.emit("closed"),r()})})}else this[lt]==="closed"?this.nextTick(r):this.once(Lo,()=>this.close(e));return e[Qe]}[j_](e){if(this[vc].size===0)return this.nextTick(e);let r=this[vc].size,n=!0,s=()=>{--r===0&&(n?this.nextTick(e):e())};for(let i of this[vc])i.close(s);n=!1,this[vc].clear()}_close(e){this.nextTick(e)}get(e,r,n){if(n=gc(r,n),n=Ha(n,Qe),r=Wa(r,this[bc].entry),this[lt]==="opening")return this.defer(()=>this.get(e,r,n)),n[Qe];if(pd(this,n))return n[Qe];let s=this._checkKey(e);if(s)return this.nextTick(n,s),n[Qe];let i=this.keyEncoding(r.keyEncoding),o=this.valueEncoding(r.valueEncoding),a=i.format,u=o.format;return(r.keyEncoding!==a||r.valueEncoding!==u)&&(r=Object.assign({},r,{keyEncoding:a,valueEncoding:u})),this._get(this.prefixKey(i.encode(e),a),r,(c,l)=>{if(c)return(c.code==="LEVEL_NOT_FOUND"||c.notFound||/NotFound/i.test(c))&&(c.code||(c.code="LEVEL_NOT_FOUND"),c.notFound||(c.notFound=!0),c.status||(c.status=404)),n(c);try{l=o.decode(l)}catch(d){return n(new is("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:d}))}n(null,l)}),n[Qe]}_get(e,r,n){this.nextTick(n,new Error("NotFound"))}getMany(e,r,n){if(n=gc(r,n),n=Ha(n,Qe),r=Wa(r,this[bc].entry),this[lt]==="opening")return this.defer(()=>this.getMany(e,r,n)),n[Qe];if(pd(this,n))return n[Qe];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[Qe];if(e.length===0)return this.nextTick(n,null,[]),n[Qe];let s=this.keyEncoding(r.keyEncoding),i=this.valueEncoding(r.valueEncoding),o=s.format,a=i.format;(r.keyEncoding!==o||r.valueEncoding!==a)&&(r=Object.assign({},r,{keyEncoding:o,valueEncoding:a}));let u=new Array(e.length);for(let c=0;c<e.length;c++){let l=e[c],d=this._checkKey(l);if(d)return this.nextTick(n,d),n[Qe];u[c]=this.prefixKey(s.encode(l),o)}return this._getMany(u,r,(c,l)=>{if(c)return n(c);try{for(let d=0;d<l.length;d++)l[d]!==void 0&&(l[d]=i.decode(l[d]))}catch(d){return n(new is(`Could not decode one or more of ${l.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:d}))}n(null,l)}),n[Qe]}_getMany(e,r,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,r,n,s){if(s=gc(n,s),s=Ha(s,Qe),n=Wa(n,this[bc].entry),this[lt]==="opening")return this.defer(()=>this.put(e,r,n,s)),s[Qe];if(pd(this,s))return s[Qe];let i=this._checkKey(e)||this._checkValue(r);if(i)return this.nextTick(s,i),s[Qe];let o=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),u=o.format,c=a.format;(n.keyEncoding!==u||n.valueEncoding!==c)&&(n=Object.assign({},n,{keyEncoding:u,valueEncoding:c}));let l=this.prefixKey(o.encode(e),u),d=a.encode(r);return this._put(l,d,n,p=>{if(p)return s(p);this.emit("put",e,r),s()}),s[Qe]}_put(e,r,n,s){this.nextTick(s)}del(e,r,n){if(n=gc(r,n),n=Ha(n,Qe),r=Wa(r,this[bc].key),this[lt]==="opening")return this.defer(()=>this.del(e,r,n)),n[Qe];if(pd(this,n))return n[Qe];let s=this._checkKey(e);if(s)return this.nextTick(n,s),n[Qe];let i=this.keyEncoding(r.keyEncoding),o=i.format;return r.keyEncoding!==o&&(r=Object.assign({},r,{keyEncoding:o})),this._del(this.prefixKey(i.encode(e),o),r,a=>{if(a)return n(a);this.emit("del",e),n()}),n[Qe]}_del(e,r,n){this.nextTick(n)}batch(e,r,n){if(!arguments.length){if(this[lt]==="opening")return new hB(this);if(this[lt]!=="open")throw new is("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=gc(r,n),n=Ha(n,Qe),r=Wa(r,this[bc].empty),this[lt]==="opening")return this.defer(()=>this.batch(e,r,n)),n[Qe];if(pd(this,n))return n[Qe];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[Qe];if(e.length===0)return this.nextTick(n),n[Qe];let s=new Array(e.length),{keyEncoding:i,valueEncoding:o,...a}=r;for(let u=0;u<e.length;u++){if(typeof e[u]!="object"||e[u]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[Qe];let c=Object.assign({},e[u]);if(c.type!=="put"&&c.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[Qe];let l=this._checkKey(c.key);if(l)return this.nextTick(n,l),n[Qe];let d=c.sublevel!=null?c.sublevel:this,p=d.keyEncoding(c.keyEncoding||i),f=p.format;if(c.key=d.prefixKey(p.encode(c.key),f),c.keyEncoding=f,c.type==="put"){let h=this._checkValue(c.value);if(h)return this.nextTick(n,h),n[Qe];let m=d.valueEncoding(c.valueEncoding||o);c.value=m.encode(c.value),c.valueEncoding=m.format}d!==this&&(c.sublevel=null),s[u]=c}return this._batch(s,a,u=>{if(u)return n(u);this.emit("batch",e),n()}),n[Qe]}_batch(e,r,n){this.nextTick(n)}sublevel(e,r){return this._sublevel(e,M_.defaults(r))}_sublevel(e,r){return new M_(this,e,r)}prefixKey(e,r){return e}clear(e,r){if(r=gc(e,r),r=Ha(r,Qe),e=Wa(e,this[bc].empty),this[lt]==="opening")return this.defer(()=>this.clear(e,r)),r[Qe];if(pd(this,r))return r[Qe];let n=e,s=this.keyEncoding(e.keyEncoding);return e=B0(e,s),e.keyEncoding=s.format,e.limit===0?this.nextTick(r):this._clear(e,i=>{if(i)return r(i);this.emit("clear",n),r()}),r[Qe]}_clear(e,r){this.nextTick(r)}iterator(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=B0(e,r),e.keys=e.keys!==!1,e.values=e.values!==!1,e[mc.keyEncoding]=r,e[mc.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[lt]==="opening")return new uG(this,e);if(this[lt]!=="open")throw new is("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new mc(this,e)}keys(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=B0(e,r),e[mc.keyEncoding]=r,e[mc.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[lt]==="opening")return new cG(this,e);if(this[lt]!=="open")throw new is("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new oG(this,e)}values(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=B0(e,r),e[mc.keyEncoding]=r,e[mc.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[lt]==="opening")return new lG(this,e);if(this[lt]!=="open")throw new is("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new aG(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[Gp].push(e)}[Zp](){if(this[Gp].length===0)return;let e=this[Gp];this[Gp]=[];for(let r of e)r()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[vc].add(e)}detachResource(e){this[vc].delete(e)}_chainedBatch(){return new hB(this)}_checkKey(e){if(e==null)return new is("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new is("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Xp.prototype.nextTick=uB();var{AbstractSublevel:M_}=pB()({AbstractLevel:Xp});q_.AbstractLevel=Xp;q_.AbstractSublevel=M_;var pd=function(t,e){return t[lt]!=="open"?(t.nextTick(e,new is("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},fG=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])}});var U_=b(wc=>{"use strict";wc.AbstractLevel=L_().AbstractLevel;wc.AbstractSublevel=L_().AbstractSublevel;wc.AbstractIterator=za().AbstractIterator;wc.AbstractKeyIterator=za().AbstractKeyIterator;wc.AbstractValueIterator=za().AbstractValueIterator;wc.AbstractChainedBatch=O_().AbstractChainedBatch});var gB=b((bxe,mB)=>{mB.exports=hG;var pG=B_();function hG(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let n,s,i,o,a,u=!0,c;Array.isArray(t)?(n=[],i=s=t.length):(o=Object.keys(t),n={},i=s=o.length);function l(p){function f(){r&&r(p,n),r=null}u?pG(f):f()}function d(p,f,h){if(n[p]=h,f&&(a=!0),--i===0||f)l(f);else if(!a&&c<s){let m;o?(m=o[c],c+=1,t[m](function(g,_){d(m,g,_)})):(m=c,c+=1,t[m](function(g,_){d(m,g,_)}))}}c=e,i?o?o.some(function(p,f){return t[p](function(h,m){d(p,h,m)}),f===e-1}):t.some(function(p,f){return p(function(h,m){d(f,h,m)}),f===e-1}):l(null),u=!1}});var K_=b((wxe,vB)=>{"use strict";vB.exports=function(e){let r=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,s=e.gte===void 0,i=e.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,s,i):r!==void 0?IDBKeyRange.lowerBound(r,s):n!==void 0?IDBKeyRange.upperBound(n,i):null}});var V_=b((_xe,bB)=>{"use strict";var yG=new TextEncoder;bB.exports=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):yG.encode(t)}});var AB=b(SB=>{"use strict";var{AbstractIterator:mG}=U_(),wB=K_(),k0=V_(),Ls=Symbol("cache"),Uo=Symbol("finished"),oi=Symbol("options"),Ko=Symbol("currentOptions"),_c=Symbol("position"),z_=Symbol("location"),hd=Symbol("first"),_B={},J_=class extends mG{constructor(e,r,n){super(e,n),this[Ls]=[],this[Uo]=this.limit===0,this[oi]=n,this[Ko]={...n},this[_c]=void 0,this[z_]=r,this[hd]=!0}_nextv(e,r,n){if(this[hd]=!1,this[Uo])return this.nextTick(n,null,[]);if(this[Ls].length>0)return e=Math.min(e,this[Ls].length),this.nextTick(n,null,this[Ls].splice(0,e));this[_c]!==void 0&&(this[oi].reverse?(this[Ko].lt=this[_c],this[Ko].lte=void 0):(this[Ko].gt=this[_c],this[Ko].gte=void 0));let s;try{s=wB(this[Ko])}catch{return this[Uo]=!0,this.nextTick(n,null,[])}let i=this.db.db.transaction([this[z_]],"readonly"),o=i.objectStore(this[z_]),a=[];if(this[oi].reverse){let u=!this[oi].values&&o.openKeyCursor?"openKeyCursor":"openCursor";o[u](s,"prev").onsuccess=c=>{let l=c.target.result;if(l){let{key:d,value:p}=l;this[_c]=d,a.push([this[oi].keys&&d!==void 0?k0(d):void 0,this[oi].values&&p!==void 0?k0(p):void 0]),a.length<e?l.continue():EB(i)}else this[Uo]=!0}}else{let u,c,l=()=>{if(u===void 0||c===void 0)return;let d=Math.max(u.length,c.length);d===0||e===1/0?this[Uo]=!0:this[_c]=u[d-1],a.length=d;for(let p=0;p<d;p++){let f=u[p],h=c[p];a[p]=[this[oi].keys&&f!==void 0?k0(f):void 0,this[oi].values&&h!==void 0?k0(h):void 0]}EB(i)};this[oi].keys||e<1/0?o.getAllKeys(s,e<1/0?e:void 0).onsuccess=d=>{u=d.target.result,l()}:(u=[],this.nextTick(l)),this[oi].values?o.getAll(s,e<1/0?e:void 0).onsuccess=d=>{c=d.target.result,l()}:(c=[],this.nextTick(l))}i.onabort=()=>{n(i.error||new Error("aborted by user")),n=null},i.oncomplete=()=>{n(null,a),n=null}}_next(e){if(this[Ls].length>0){let[r,n]=this[Ls].shift();this.nextTick(e,null,r,n)}else if(this[Uo])this.nextTick(e);else{let r=Math.min(100,this.limit-this.count);this[hd]&&(this[hd]=!1,r=1),this._nextv(r,_B,(n,s)=>{if(n)return e(n);this[Ls]=s,this._next(e)})}}_all(e,r){this[hd]=!1;let n=this[Ls].splice(0,this[Ls].length),s=this.limit-this.count-n.length;if(s<=0)return this.nextTick(r,null,n);this._nextv(s,_B,(i,o)=>{if(i)return r(i);n.length>0&&(o=n.concat(o)),r(null,o)})}_seek(e,r){this[hd]=!0,this[Ls]=[],this[Uo]=!1,this[_c]=void 0,this[Ko]={...this[oi]};let n;try{n=wB(this[oi])}catch{this[Uo]=!0;return}n!==null&&!n.includes(e)?this[Uo]=!0:this[oi].reverse?this[Ko].lte=e:this[Ko].gte=e}};SB.Iterator=J_;function EB(t){typeof t.commit=="function"&&t.commit()}});var DB=b((Sxe,xB)=>{"use strict";xB.exports=function(e,r,n,s,i){if(s.limit===0)return e.nextTick(i);let o=e.db.transaction([r],"readwrite"),a=o.objectStore(r),u=0;o.oncomplete=function(){i()},o.onabort=function(){i(o.error||new Error("aborted by user"))};let c=a.openKeyCursor?"openKeyCursor":"openCursor",l=s.reverse?"prev":"next";a[c](n,l).onsuccess=function(d){let p=d.target.result;p&&(a.delete(p.key).onsuccess=function(){(s.limit<=0||++u<s.limit)&&p.continue()})}}});var G_=b(BB=>{"use strict";var{AbstractLevel:gG}=U_(),CB=rs(),vG=gB(),{fromCallback:bG}=Np(),{Iterator:wG}=AB(),PB=V_(),_G=DB(),EG=K_(),TB="level-js-",Yp=Symbol("idb"),H_=Symbol("namePrefix"),Vo=Symbol("location"),W_=Symbol("version"),Ec=Symbol("store"),Qp=Symbol("onComplete"),OB=Symbol("promise"),R0=class extends gG{constructor(e,r,n){if(typeof r=="function"||typeof n=="function")throw new CB("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:s,version:i,...o}=r||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),typeof e!="string")throw new Error("constructor requires a location string argument");this[Vo]=e,this[H_]=s??TB,this[W_]=parseInt(i||1,10),this[Yp]=null}get location(){return this[Vo]}get namePrefix(){return this[H_]}get version(){return this[W_]}get db(){return this[Yp]}get type(){return"browser-level"}_open(e,r){let n=indexedDB.open(this[H_]+this[Vo],this[W_]);n.onerror=function(){r(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[Yp]=n.result,r()},n.onupgradeneeded=s=>{let i=s.target.result;i.objectStoreNames.contains(this[Vo])||i.createObjectStore(this[Vo])}}[Ec](e){return this[Yp].transaction([this[Vo]],e).objectStore(this[Vo])}[Qp](e,r){let n=e.transaction;n.onabort=function(){r(n.error||new Error("aborted by user"))},n.oncomplete=function(){r(null,e.result)}}_get(e,r,n){let s=this[Ec]("readonly"),i;try{i=s.get(e)}catch(o){return this.nextTick(n,o)}this[Qp](i,function(o,a){if(o)return n(o);if(a===void 0)return n(new CB("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,PB(a))})}_getMany(e,r,n){let s=this[Ec]("readonly"),i=e.map(o=>a=>{let u;try{u=s.get(o)}catch(c){return a(c)}u.onsuccess=()=>{let c=u.result;a(null,c===void 0?c:PB(c))},u.onerror=c=>{c.stopPropagation(),a(u.error)}});vG(i,16,n)}_del(e,r,n){let s=this[Ec]("readwrite"),i;try{i=s.delete(e)}catch(o){return this.nextTick(n,o)}this[Qp](i,n)}_put(e,r,n,s){let i=this[Ec]("readwrite"),o;try{o=i.put(r,e)}catch(a){return this.nextTick(s,a)}this[Qp](o,s)}_iterator(e){return new wG(this,this[Vo],e)}_batch(e,r,n){let s=this[Ec]("readwrite"),i=s.transaction,o=0,a;i.onabort=function(){n(a||i.error||new Error("aborted by user"))},i.oncomplete=function(){n()};function u(){let c=e[o++],l=c.key,d;try{d=c.type==="del"?s.delete(l):s.put(c.value,l)}catch(p){a=p,i.abort();return}o<e.length?d.onsuccess=u:typeof i.commit=="function"&&i.commit()}u()}_clear(e,r){let n,s;try{n=EG(e)}catch{return this.nextTick(r)}if(e.limit>=0)return _G(this,this[Vo],n,e,r);try{let i=this[Ec]("readwrite");s=n?i.delete(n):i.clear()}catch(i){return this.nextTick(r,i)}this[Qp](s,r)}_close(e){this[Yp].close(),this.nextTick(e)}};R0.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=TB),r=bG(r,OB);let n=indexedDB.deleteDatabase(e+t);return n.onsuccess=function(){r()},n.onerror=function(s){r(s)},r[OB]};BB.BrowserLevel=R0});var Z_=b(IB=>{IB.Level=G_().BrowserLevel});var Pr=b((Oxe,FB)=>{"use strict";FB.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Uint8Array}});var Us=b((Txe,Y_)=>{"use strict";var AG=Ei(),xG=Object.getPrototypeOf(async function(){}).constructor,kB=globalThis.Blob||AG.Blob,DG=typeof kB<"u"?function(e){return e instanceof kB}:function(e){return!1},X_=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};Y_.exports={AggregateError:X_,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...s)=>n?r(n):e(...s))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let s=e.shift();return n==="f"?s.toFixed(6):n==="j"?JSON.stringify(s):n==="s"&&typeof s=="object"?`${s.constructor!==Object?s.constructor.name:""} {}`.trim():s.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof xG},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:DG};Y_.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var N0=b((Bxe,j0)=>{"use strict";var{AbortController:RB,AbortSignal:CG}=typeof self<"u"?self:typeof window<"u"?window:void 0;j0.exports=RB;j0.exports.AbortSignal=CG;j0.exports.default=RB});var Cn=b((Ixe,NB)=>{"use strict";var{format:PG,inspect:M0,AggregateError:OG}=Us(),TG=globalThis.AggregateError||OG,BG=Symbol("kIsNodeError"),IG=["string","function","number","object","Function","Object","boolean","bigint","symbol"],FG=/^([A-Z][a-z0-9]*)+$/,kG="__node_internal_",q0={};function Ac(t,e){if(!t)throw new q0.ERR_INTERNAL_ASSERTION(e)}function $B(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function RG(t,e,r){if(typeof e=="function")return Ac(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return Ac(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:PG(e,...r)}function Yr(t,e,r){r||(r=Error);class n extends r{constructor(...i){super(RG(t,e,i))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[BG]=!0,q0[t]=n}function jB(t){let e=kG+t.name;return Object.defineProperty(t,"name",{value:e}),t}function $G(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new TG([e,t],e.message);return r.code=e.code,r}return t||e}var Q_=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new q0.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};Yr("ERR_ASSERTION","%s",Error);Yr("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Ac(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let s=[],i=[],o=[];for(let u of e)Ac(typeof u=="string","All expected entries have to be of type string"),IG.includes(u)?s.push(u.toLowerCase()):FG.test(u)?i.push(u):(Ac(u!=="object",'The value "object" should be written as "Object"'),o.push(u));if(i.length>0){let u=s.indexOf("object");u!==-1&&(s.splice(s,u,1),i.push("Object"))}if(s.length>0){switch(s.length){case 1:n+=`of type ${s[0]}`;break;case 2:n+=`one of type ${s[0]} or ${s[1]}`;break;default:{let u=s.pop();n+=`one of type ${s.join(", ")}, or ${u}`}}(i.length>0||o.length>0)&&(n+=" or ")}if(i.length>0){switch(i.length){case 1:n+=`an instance of ${i[0]}`;break;case 2:n+=`an instance of ${i[0]} or ${i[1]}`;break;default:{let u=i.pop();n+=`an instance of ${i.join(", ")}, or ${u}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let u=o.pop();n+=`one of ${o.join(", ")}, or ${u}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let u=M0(r,{depth:-1});n+=`. Received ${u}`}}else{let u=M0(r,{colors:!1});u.length>25&&(u=`${u.slice(0,25)}...`),n+=`. Received type ${typeof r} (${u})`}return n},TypeError);Yr("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=M0(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);Yr("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let s=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${s}.`},TypeError);Yr("ERR_MISSING_ARGS",(...t)=>{Ac(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);Yr("ERR_OUT_OF_RANGE",(t,e,r)=>{Ac(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=$B(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=$B(n)),n+="n"):n=M0(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);Yr("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Yr("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Yr("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Yr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Yr("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Yr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Yr("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Yr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Yr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Yr("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Yr("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);NB.exports={AbortError:Q_,aggregateTwoErrors:jB($G),hideStackFrames:jB,codes:q0}});var eh=b((Fxe,HB)=>{"use strict";var{ArrayIsArray:tE,ArrayPrototypeIncludes:UB,ArrayPrototypeJoin:KB,ArrayPrototypeMap:jG,NumberIsInteger:rE,NumberIsNaN:NG,NumberMAX_SAFE_INTEGER:MG,NumberMIN_SAFE_INTEGER:qG,NumberParseInt:LG,ObjectPrototypeHasOwnProperty:UG,RegExpPrototypeExec:VB,String:KG,StringPrototypeToUpperCase:VG,StringPrototypeTrim:zG}=Pr(),{hideStackFrames:xi,codes:{ERR_SOCKET_BAD_PORT:JG,ERR_INVALID_ARG_TYPE:Pn,ERR_INVALID_ARG_VALUE:yd,ERR_OUT_OF_RANGE:xc,ERR_UNKNOWN_SIGNAL:MB}}=Cn(),{normalizeEncoding:HG}=Us(),{isAsyncFunction:WG,isArrayBufferView:GG}=Us().types,qB={};function ZG(t){return t===(t|0)}function XG(t){return t===t>>>0}var YG=/^[0-7]+$/,QG="must be a 32-bit unsigned integer or an octal string";function eZ(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(VB(YG,t)===null)throw new yd(e,t,QG);t=LG(t,8)}return zB(t,e),t}var tZ=xi((t,e,r=qG,n=MG)=>{if(typeof t!="number")throw new Pn(e,"number",t);if(!rE(t))throw new xc(e,"an integer",t);if(t<r||t>n)throw new xc(e,`>= ${r} && <= ${n}`,t)}),rZ=xi((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Pn(e,"number",t);if(!rE(t))throw new xc(e,"an integer",t);if(t<r||t>n)throw new xc(e,`>= ${r} && <= ${n}`,t)}),zB=xi((t,e,r=!1)=>{if(typeof t!="number")throw new Pn(e,"number",t);if(!rE(t))throw new xc(e,"an integer",t);let n=r?1:0,s=4294967295;if(t<n||t>s)throw new xc(e,`>= ${n} && <= ${s}`,t)});function nE(t,e){if(typeof t!="string")throw new Pn(e,"string",t)}function nZ(t,e,r=void 0,n){if(typeof t!="number")throw new Pn(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&NG(t))throw new xc(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var iZ=xi((t,e,r)=>{if(!UB(r,t)){let s="must be one of: "+KB(jG(r,i=>typeof i=="string"?`'${i}'`:KG(i)),", ");throw new yd(e,t,s)}});function JB(t,e){if(typeof t!="boolean")throw new Pn(e,"boolean",t)}function eE(t,e,r){return t==null||!UG(t,e)?r:t[e]}var sZ=xi((t,e,r=null)=>{let n=eE(r,"allowArray",!1),s=eE(r,"allowFunction",!1);if(!eE(r,"nullable",!1)&&t===null||!n&&tE(t)||typeof t!="object"&&(!s||typeof t!="function"))throw new Pn(e,"Object",t)}),oZ=xi((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Pn(e,"a dictionary",t)}),iE=xi((t,e,r=0)=>{if(!tE(t))throw new Pn(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new yd(e,t,n)}});function aZ(t,e){iE(t,e);for(let r=0;r<t.length;r++)nE(t[r],`${e}[${r}]`)}function uZ(t,e){iE(t,e);for(let r=0;r<t.length;r++)JB(t[r],`${e}[${r}]`)}function cZ(t,e="signal"){if(nE(t,e),qB[t]===void 0)throw qB[VG(t)]!==void 0?new MB(t+" (signals must use all capital letters)"):new MB(t)}var lZ=xi((t,e="buffer")=>{if(!GG(t))throw new Pn(e,["Buffer","TypedArray","DataView"],t)});function dZ(t,e){let r=HG(e),n=t.length;if(r==="hex"&&n%2!==0)throw new yd("encoding",e,`is invalid for data of length ${n}`)}function fZ(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&zG(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new JG(e,t,r);return t|0}var pZ=xi((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Pn(e,"AbortSignal",t)}),hZ=xi((t,e)=>{if(typeof t!="function")throw new Pn(e,"Function",t)}),yZ=xi((t,e)=>{if(typeof t!="function"||WG(t))throw new Pn(e,"Function",t)}),mZ=xi((t,e)=>{if(t!==void 0)throw new Pn(e,"undefined",t)});function gZ(t,e,r){if(!UB(r,t))throw new Pn(e,`('${KB(r,"|")}')`,t)}var vZ=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function LB(t,e){if(typeof t>"u"||!VB(vZ,t))throw new yd(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function bZ(t){if(typeof t=="string")return LB(t,"hints"),t;if(tE(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let s=t[n];LB(s,"hints"),r+=s,n!==e-1&&(r+=", ")}return r}throw new yd("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}HB.exports={isInt32:ZG,isUint32:XG,parseFileMode:eZ,validateArray:iE,validateStringArray:aZ,validateBooleanArray:uZ,validateBoolean:JB,validateBuffer:lZ,validateDictionary:oZ,validateEncoding:dZ,validateFunction:hZ,validateInt32:rZ,validateInteger:tZ,validateNumber:nZ,validateObject:sZ,validateOneOf:iZ,validatePlainFunction:yZ,validatePort:fZ,validateSignalName:cZ,validateString:nE,validateUint32:zB,validateUndefined:mZ,validateUnion:gZ,validateAbortSignal:pZ,validateLinkHeaderValue:bZ}});var Ga=b((kxe,XB)=>{var wr=XB.exports={},Ks,Vs;function sE(){throw new Error("setTimeout has not been defined")}function oE(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Ks=setTimeout:Ks=sE}catch{Ks=sE}try{typeof clearTimeout=="function"?Vs=clearTimeout:Vs=oE}catch{Vs=oE}})();function WB(t){if(Ks===setTimeout)return setTimeout(t,0);if((Ks===sE||!Ks)&&setTimeout)return Ks=setTimeout,setTimeout(t,0);try{return Ks(t,0)}catch{try{return Ks.call(null,t,0)}catch{return Ks.call(this,t,0)}}}function wZ(t){if(Vs===clearTimeout)return clearTimeout(t);if((Vs===oE||!Vs)&&clearTimeout)return Vs=clearTimeout,clearTimeout(t);try{return Vs(t)}catch{try{return Vs.call(null,t)}catch{return Vs.call(this,t)}}}var zo=[],md=!1,Dc,L0=-1;function _Z(){!md||!Dc||(md=!1,Dc.length?zo=Dc.concat(zo):L0=-1,zo.length&&GB())}function GB(){if(!md){var t=WB(_Z);md=!0;for(var e=zo.length;e;){for(Dc=zo,zo=[];++L0<e;)Dc&&Dc[L0].run();L0=-1,e=zo.length}Dc=null,md=!1,wZ(t)}}wr.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];zo.push(new ZB(t,e)),zo.length===1&&!md&&WB(GB)};function ZB(t,e){this.fun=t,this.array=e}ZB.prototype.run=function(){this.fun.apply(null,this.array)};wr.title="browser";wr.browser=!0;wr.env={};wr.argv=[];wr.version="";wr.versions={};function Jo(){}wr.on=Jo;wr.addListener=Jo;wr.once=Jo;wr.off=Jo;wr.removeListener=Jo;wr.removeAllListeners=Jo;wr.emit=Jo;wr.prependListener=Jo;wr.prependOnceListener=Jo;wr.listeners=function(t){return[]};wr.binding=function(t){throw new Error("process.binding is not supported")};wr.cwd=function(){return"/"};wr.chdir=function(t){throw new Error("process.chdir is not supported")};wr.umask=function(){return 0}});var Js=b((Rxe,pI)=>{"use strict";var{Symbol:U0,SymbolAsyncIterator:YB,SymbolIterator:QB,SymbolFor:eI}=Pr(),tI=U0("kDestroyed"),rI=U0("kIsErrored"),aE=U0("kIsReadable"),nI=U0("kIsDisturbed"),EZ=eI("nodejs.webstream.isClosedPromise"),SZ=eI("nodejs.webstream.controllerErrorFunction");function K0(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function V0(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function AZ(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function zs(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function iI(t){return!!(t&&!zs(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function sI(t){return!!(t&&!zs(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function oI(t){return!!(t&&!zs(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function xZ(t){return iI(t)||sI(t)||oI(t)}function DZ(t,e){return t==null?!1:e===!0?typeof t[YB]=="function":e===!1?typeof t[QB]=="function":typeof t[YB]=="function"||typeof t[QB]=="function"}function z0(t){if(!zs(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[tI]||n!=null&&n.destroyed)}function aI(t){if(!V0(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function CZ(t,e){if(!V0(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function PZ(t){if(!K0(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function uI(t,e){if(!K0(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function cI(t){return t&&t[aE]!=null?t[aE]:typeof t?.readable!="boolean"?null:z0(t)?!1:K0(t)&&t.readable&&!uI(t)}function lI(t){return typeof t?.writable!="boolean"?null:z0(t)?!1:V0(t)&&t.writable&&!aI(t)}function OZ(t,e){return zs(t)?z0(t)?!0:!(e?.readable!==!1&&cI(t)||e?.writable!==!1&&lI(t)):null}function TZ(t){var e,r;return zs(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function BZ(t){var e,r;return zs(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function IZ(t){if(!zs(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&dI(t)?t._closed:null}function dI(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function fI(t){return typeof t._sent100=="boolean"&&dI(t)}function FZ(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function kZ(t){if(!zs(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&fI(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function RZ(t){var e;return!!(t&&((e=t[nI])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function $Z(t){var e,r,n,s,i,o,a,u,c,l;return!!(t&&((e=(r=(n=(s=(i=(o=t[rI])!==null&&o!==void 0?o:t.readableErrored)!==null&&i!==void 0?i:t.writableErrored)!==null&&s!==void 0?s:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(u=t._writableState)===null||u===void 0?void 0:u.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((l=t._writableState)===null||l===void 0)&&l.errored))}pI.exports={kDestroyed:tI,isDisturbed:RZ,kIsDisturbed:nI,isErrored:$Z,kIsErrored:rI,isReadable:cI,kIsReadable:aE,kIsClosedPromise:EZ,kControllerErrorFunction:SZ,isClosed:IZ,isDestroyed:z0,isDuplexNodeStream:AZ,isFinished:OZ,isIterable:DZ,isReadableNodeStream:K0,isReadableStream:iI,isReadableEnded:PZ,isReadableFinished:uI,isReadableErrored:BZ,isNodeStream:zs,isWebStream:xZ,isWritable:lI,isWritableNodeStream:V0,isWritableStream:sI,isWritableEnded:aI,isWritableFinished:CZ,isWritableErrored:TZ,isServerRequest:FZ,isServerResponse:fI,willEmitClose:kZ,isTransformStream:oI}});var Ho=b(($xe,fE)=>{var Za=Ga(),{AbortError:EI,codes:jZ}=Cn(),{ERR_INVALID_ARG_TYPE:NZ,ERR_STREAM_PREMATURE_CLOSE:hI}=jZ,{kEmptyObject:cE,once:lE}=Us(),{validateAbortSignal:MZ,validateFunction:qZ,validateObject:LZ,validateBoolean:UZ}=eh(),{Promise:KZ,PromisePrototypeThen:VZ}=Pr(),{isClosed:zZ,isReadable:yI,isReadableNodeStream:uE,isReadableStream:JZ,isReadableFinished:mI,isReadableErrored:gI,isWritable:vI,isWritableNodeStream:bI,isWritableStream:HZ,isWritableFinished:wI,isWritableErrored:_I,isNodeStream:WZ,willEmitClose:GZ,kIsClosedPromise:ZZ}=Js();function XZ(t){return t.setHeader&&typeof t.abort=="function"}var dE=()=>{};function SI(t,e,r){var n,s;if(arguments.length===2?(r=e,e=cE):e==null?e=cE:LZ(e,"options"),qZ(r,"callback"),MZ(e.signal,"options.signal"),r=lE(r),JZ(t)||HZ(t))return YZ(t,e,r);if(!WZ(t))throw new NZ("stream",["ReadableStream","WritableStream","Stream"],t);let i=(n=e.readable)!==null&&n!==void 0?n:uE(t),o=(s=e.writable)!==null&&s!==void 0?s:bI(t),a=t._writableState,u=t._readableState,c=()=>{t.writable||p()},l=GZ(t)&&uE(t)===i&&bI(t)===o,d=wI(t,!1),p=()=>{d=!0,t.destroyed&&(l=!1),!(l&&(!t.readable||i))&&(!i||f)&&r.call(t)},f=mI(t,!1),h=()=>{f=!0,t.destroyed&&(l=!1),!(l&&(!t.writable||o))&&(!o||d)&&r.call(t)},m=S=>{r.call(t,S)},g=zZ(t),_=()=>{g=!0;let S=_I(t)||gI(t);if(S&&typeof S!="boolean")return r.call(t,S);if(i&&!f&&uE(t,!0)&&!mI(t,!1))return r.call(t,new hI);if(o&&!d&&!wI(t,!1))return r.call(t,new hI);r.call(t)},D=()=>{g=!0;let S=_I(t)||gI(t);if(S&&typeof S!="boolean")return r.call(t,S);r.call(t)},v=()=>{t.req.on("finish",p)};XZ(t)?(t.on("complete",p),l||t.on("abort",_),t.req?v():t.on("request",v)):o&&!a&&(t.on("end",c),t.on("close",c)),!l&&typeof t.aborted=="boolean"&&t.on("aborted",_),t.on("end",h),t.on("finish",p),e.error!==!1&&t.on("error",m),t.on("close",_),g?Za.nextTick(_):a!=null&&a.errorEmitted||u!=null&&u.errorEmitted?l||Za.nextTick(D):(!i&&(!l||yI(t))&&(d||vI(t)===!1)||!o&&(!l||vI(t))&&(f||yI(t)===!1)||u&&t.req&&t.aborted)&&Za.nextTick(D);let E=()=>{r=dE,t.removeListener("aborted",_),t.removeListener("complete",p),t.removeListener("abort",_),t.removeListener("request",v),t.req&&t.req.removeListener("finish",p),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",p),t.removeListener("end",h),t.removeListener("error",m),t.removeListener("close",_)};if(e.signal&&!g){let S=()=>{let P=r;E(),P.call(t,new EI(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Za.nextTick(S);else{let P=r;r=lE((...C)=>{e.signal.removeEventListener("abort",S),P.apply(t,C)}),e.signal.addEventListener("abort",S)}}return E}function YZ(t,e,r){let n=!1,s=dE;if(e.signal)if(s=()=>{n=!0,r.call(t,new EI(void 0,{cause:e.signal.reason}))},e.signal.aborted)Za.nextTick(s);else{let o=r;r=lE((...a)=>{e.signal.removeEventListener("abort",s),o.apply(t,a)}),e.signal.addEventListener("abort",s)}let i=(...o)=>{n||Za.nextTick(()=>r.apply(t,o))};return VZ(t[ZZ].promise,i,i),dE}function QZ(t,e){var r;let n=!1;return e===null&&(e=cE),(r=e)!==null&&r!==void 0&&r.cleanup&&(UZ(e.cleanup,"cleanup"),n=e.cleanup),new KZ((s,i)=>{let o=SI(t,e,a=>{n&&o(),a?i(a):s()})})}fE.exports=SI;fE.exports.finished=QZ});var Cc=b((jxe,BI)=>{"use strict";var Hs=Ga(),{aggregateTwoErrors:eX,codes:{ERR_MULTIPLE_CALLBACK:tX},AbortError:rX}=Cn(),{Symbol:DI}=Pr(),{kDestroyed:nX,isDestroyed:iX,isFinished:sX,isServerRequest:oX}=Js(),CI=DI("kDestroy"),pE=DI("kConstruct");function PI(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function aX(t,e){let r=this._readableState,n=this._writableState,s=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(PI(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),s.constructed?AI(this,t,e):this.once(CI,function(i){AI(this,eX(i,t),e)}),this)}function AI(t,e,r){let n=!1;function s(i){if(n)return;n=!0;let o=t._readableState,a=t._writableState;PI(i,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(i),i?Hs.nextTick(uX,t,i):Hs.nextTick(OI,t)}try{t._destroy(e||null,s)}catch(i){s(i)}}function uX(t,e){hE(t,e),OI(t)}function OI(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function hE(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function cX(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function yE(t,e,r){let n=t._readableState,s=t._writableState;if(s!=null&&s.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||s!=null&&s.autoDestroy?t.destroy(e):e&&(e.stack,s&&!s.errored&&(s.errored=e),n&&!n.errored&&(n.errored=e),r?Hs.nextTick(hE,t,e):hE(t,e))}function lX(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(pE,e),!(t.listenerCount(pE)>1)&&Hs.nextTick(dX,t)}function dX(t){let e=!1;function r(n){if(e){yE(t,n??new tX);return}e=!0;let s=t._readableState,i=t._writableState,o=i||s;s&&(s.constructed=!0),i&&(i.constructed=!0),o.destroyed?t.emit(CI,n):n?yE(t,n,!0):Hs.nextTick(fX,t)}try{t._construct(n=>{Hs.nextTick(r,n)})}catch(n){Hs.nextTick(r,n)}}function fX(t){t.emit(pE)}function xI(t){return t?.setHeader&&typeof t.abort=="function"}function TI(t){t.emit("close")}function pX(t,e){t.emit("error",e),Hs.nextTick(TI,t)}function hX(t,e){!t||iX(t)||(!e&&!sX(t)&&(e=new rX),oX(t)?(t.socket=null,t.destroy(e)):xI(t)?t.abort():xI(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Hs.nextTick(pX,t,e):Hs.nextTick(TI,t),t.destroyed||(t[nX]=!0))}BI.exports={construct:lX,destroyer:hX,destroy:aX,undestroy:cX,errorOrDestroy:yE}});var W0=b((Nxe,FI)=>{"use strict";var{ArrayIsArray:yX,ObjectSetPrototypeOf:II}=Pr(),{EventEmitter:J0}=jp();function H0(t){J0.call(this,t)}II(H0.prototype,J0.prototype);II(H0,J0);H0.prototype.pipe=function(t,e){let r=this;function n(l){t.writable&&t.write(l)===!1&&r.pause&&r.pause()}r.on("data",n);function s(){r.readable&&r.resume&&r.resume()}t.on("drain",s),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let i=!1;function o(){i||(i=!0,t.end())}function a(){i||(i=!0,typeof t.destroy=="function"&&t.destroy())}function u(l){c(),J0.listenerCount(this,"error")===0&&this.emit("error",l)}mE(r,"error",u),mE(t,"error",u);function c(){r.removeListener("data",n),t.removeListener("drain",s),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function mE(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):yX(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}FI.exports={Stream:H0,prependListener:mE}});var th=b((Mxe,G0)=>{"use strict";var{AbortError:kI,codes:mX}=Cn(),{isNodeStream:RI,isWebStream:gX,kControllerErrorFunction:vX}=Js(),bX=Ho(),{ERR_INVALID_ARG_TYPE:$I}=mX,wX=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new $I(e,"AbortSignal",t)};G0.exports.addAbortSignal=function(e,r){if(wX(e,"signal"),!RI(r)&&!gX(r))throw new $I("stream",["ReadableStream","WritableStream","Stream"],r);return G0.exports.addAbortSignalNoValidate(e,r)};G0.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=RI(e)?()=>{e.destroy(new kI(void 0,{cause:t.reason}))}:()=>{e[vX](new kI(void 0,{cause:t.reason}))};return t.aborted?r():(t.addEventListener("abort",r),bX(e,()=>t.removeEventListener("abort",r))),e}});var MI=b((Lxe,NI)=>{"use strict";var{StringPrototypeSlice:jI,SymbolIterator:_X,TypedArrayPrototypeSet:Z0,Uint8Array:EX}=Pr(),{Buffer:gE}=Ei(),{inspect:SX}=Us();NI.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return gE.alloc(0);let r=gE.allocUnsafe(e>>>0),n=this.head,s=0;for(;n;)Z0(r,n.data,s),s+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let s=n.slice(0,e);return this.head.data=n.slice(e),s}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[_X](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,s=0;do{let i=n.data;if(e>i.length)r+=i,e-=i.length;else{e===i.length?(r+=i,++s,n.next?this.head=n.next:this.head=this.tail=null):(r+=jI(i,0,e),this.head=n,n.data=jI(i,e));break}++s}while((n=n.next)!==null);return this.length-=s,r}_getBuffer(e){let r=gE.allocUnsafe(e),n=e,s=this.head,i=0;do{let o=s.data;if(e>o.length)Z0(r,o,n-e),e-=o.length;else{e===o.length?(Z0(r,o,n-e),++i,s.next?this.head=s.next:this.head=this.tail=null):(Z0(r,new EX(o.buffer,o.byteOffset,e),n-e),this.head=s,s.data=o.slice(e));break}++i}while((s=s.next)!==null);return this.length-=i,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return SX(this,{...r,depth:0,customInspect:!1})}}});var X0=b((Uxe,LI)=>{"use strict";var{MathFloor:AX,NumberIsInteger:xX}=Pr(),{ERR_INVALID_ARG_VALUE:DX}=Cn().codes;function CX(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function qI(t){return t?16:16*1024}function PX(t,e,r,n){let s=CX(e,n,r);if(s!=null){if(!xX(s)||s<0){let i=n?`options.${r}`:"options.highWaterMark";throw new DX(i,s)}return AX(s)}return qI(t.objectMode)}LI.exports={getHighWaterMark:PX,getDefaultHighWaterMark:qI}});var VI=b((vE,KI)=>{var Y0=Ei(),Ws=Y0.Buffer;function UI(t,e){for(var r in t)e[r]=t[r]}Ws.from&&Ws.alloc&&Ws.allocUnsafe&&Ws.allocUnsafeSlow?KI.exports=Y0:(UI(Y0,vE),vE.Buffer=Pc);function Pc(t,e,r){return Ws(t,e,r)}Pc.prototype=Object.create(Ws.prototype);UI(Ws,Pc);Pc.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ws(t,e,r)};Pc.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Ws(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Pc.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ws(t)};Pc.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Y0.SlowBuffer(t)}});var HI=b(JI=>{"use strict";var wE=VI().Buffer,zI=wE.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function OX(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function TX(t){var e=OX(t);if(typeof e!="string"&&(wE.isEncoding===zI||!zI(t)))throw new Error("Unknown encoding: "+t);return e||t}JI.StringDecoder=rh;function rh(t){this.encoding=TX(t);var e;switch(this.encoding){case"utf16le":this.text=$X,this.end=jX,e=4;break;case"utf8":this.fillLast=FX,e=4;break;case"base64":this.text=NX,this.end=MX,e=3;break;default:this.write=qX,this.end=LX;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=wE.allocUnsafe(e)}rh.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};rh.prototype.end=RX;rh.prototype.text=kX;rh.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function bE(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function BX(t,e,r){var n=e.length-1;if(n<r)return 0;var s=bE(e[n]);return s>=0?(s>0&&(t.lastNeed=s-1),s):--n<r||s===-2?0:(s=bE(e[n]),s>=0?(s>0&&(t.lastNeed=s-2),s):--n<r||s===-2?0:(s=bE(e[n]),s>=0?(s>0&&(s===2?s=0:t.lastNeed=s-3),s):0))}function IX(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function FX(t){var e=this.lastTotal-this.lastNeed,r=IX(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function kX(t,e){var r=BX(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function RX(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function $X(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function jX(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function NX(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function MX(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function qX(t){return t.toString(this.encoding)}function LX(t){return t&&t.length?this.write(t):""}});var _E=b((Vxe,XI)=>{"use strict";var WI=Ga(),{PromisePrototypeThen:UX,SymbolAsyncIterator:GI,SymbolIterator:ZI}=Pr(),{Buffer:KX}=Ei(),{ERR_INVALID_ARG_TYPE:VX,ERR_STREAM_NULL_VALUES:zX}=Cn().codes;function JX(t,e,r){let n;if(typeof e=="string"||e instanceof KX)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let s;if(e&&e[GI])s=!0,n=e[GI]();else if(e&&e[ZI])s=!1,n=e[ZI]();else throw new VX("iterable",["Iterable"],e);let i=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;i._read=function(){o||(o=!0,u())},i._destroy=function(c,l){UX(a(c),()=>WI.nextTick(l,c),d=>WI.nextTick(l,d||c))};async function a(c){let l=c!=null,d=typeof n.throw=="function";if(l&&d){let{value:p,done:f}=await n.throw(c);if(await p,f)return}if(typeof n.return=="function"){let{value:p}=await n.return();await p}}async function u(){for(;;){try{let{value:c,done:l}=s?await n.next():n.next();if(l)i.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new zX;if(i.push(d))continue;o=!1}}catch(c){i.destroy(c)}break}}return i}XI.exports=JX});var nh=b((zxe,lF)=>{var ss=Ga(),{ArrayPrototypeIndexOf:HX,NumberIsInteger:WX,NumberIsNaN:GX,NumberParseInt:ZX,ObjectDefineProperties:eF,ObjectKeys:XX,ObjectSetPrototypeOf:tF,Promise:YX,SafeSet:QX,SymbolAsyncIterator:eY,Symbol:tY}=Pr();lF.exports=nt;nt.ReadableState=CE;var{EventEmitter:rY}=jp(),{Stream:Xa,prependListener:nY}=W0(),{Buffer:EE}=Ei(),{addAbortSignal:iY}=th(),sY=Ho(),ft=Us().debuglog("stream",t=>{ft=t}),oY=MI(),vd=Cc(),{getHighWaterMark:aY,getDefaultHighWaterMark:uY}=X0(),{aggregateTwoErrors:YI,codes:{ERR_INVALID_ARG_TYPE:cY,ERR_METHOD_NOT_IMPLEMENTED:lY,ERR_OUT_OF_RANGE:dY,ERR_STREAM_PUSH_AFTER_EOF:fY,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:pY}}=Cn(),{validateObject:hY}=eh(),Oc=tY("kPaused"),{StringDecoder:rF}=HI(),yY=_E();tF(nt.prototype,Xa.prototype);tF(nt,Xa);var SE=()=>{},{errorOrDestroy:gd}=vd;function CE(t,e,r){typeof r!="boolean"&&(r=e instanceof Gs()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.readableObjectMode)),this.highWaterMark=t?aY(this,t,"readableHighWaterMark",r):uY(!1),this.buffer=new oY,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Oc]=null,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new rF(t.encoding),this.encoding=t.encoding)}function nt(t){if(!(this instanceof nt))return new nt(t);let e=this instanceof Gs();this._readableState=new CE(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&iY(t.signal,this)),Xa.call(this,t),vd.construct(this,()=>{this._readableState.needReadable&&Q0(this,this._readableState)})}nt.prototype.destroy=vd.destroy;nt.prototype._undestroy=vd.undestroy;nt.prototype._destroy=function(t,e){e(t)};nt.prototype[rY.captureRejectionSymbol]=function(t){this.destroy(t)};nt.prototype.push=function(t,e){return nF(this,t,e,!1)};nt.prototype.unshift=function(t,e){return nF(this,t,e,!0)};function nF(t,e,r,n){ft("readableAddChunk",e);let s=t._readableState,i;if(s.objectMode||(typeof e=="string"?(r=r||s.defaultEncoding,s.encoding!==r&&(n&&s.encoding?e=EE.from(e,r).toString(s.encoding):(e=EE.from(e,r),r=""))):e instanceof EE?r="":Xa._isUint8Array(e)?(e=Xa._uint8ArrayToBuffer(e),r=""):e!=null&&(i=new cY("chunk",["string","Buffer","Uint8Array"],e))),i)gd(t,i);else if(e===null)s.reading=!1,vY(t,s);else if(s.objectMode||e&&e.length>0)if(n)if(s.endEmitted)gd(t,new pY);else{if(s.destroyed||s.errored)return!1;AE(t,s,e,!0)}else if(s.ended)gd(t,new fY);else{if(s.destroyed||s.errored)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?AE(t,s,e,!1):Q0(t,s)):AE(t,s,e,!1)}else n||(s.reading=!1,Q0(t,s));return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function AE(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&eg(t)),Q0(t,e)}nt.prototype.isPaused=function(){let t=this._readableState;return t[Oc]===!0||t.flowing===!1};nt.prototype.setEncoding=function(t){let e=new rF(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let s of r)n+=e.write(s);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var mY=1073741824;function gY(t){if(t>mY)throw new dY("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function QI(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:GX(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}nt.prototype.read=function(t){ft("read",t),t===void 0?t=NaN:WX(t)||(t=ZX(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=gY(t)),t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return ft("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?xE(this):eg(this),null;if(t=QI(t,e),t===0&&e.ended)return e.length===0&&xE(this),null;let n=e.needReadable;if(ft("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,ft("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,ft("reading, ended or constructing",n);else if(n){ft("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0);try{this._read(e.highWaterMark)}catch(i){gd(this,i)}e.sync=!1,e.reading||(t=QI(r,e))}let s;return t>0?s=uF(t,e):s=null,s===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&xE(this)),s!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",s)),s};function vY(t,e){if(ft("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?eg(t):(e.needReadable=!1,e.emittedReadable=!0,iF(t))}}function eg(t){let e=t._readableState;ft("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(ft("emitReadable",e.flowing),e.emittedReadable=!0,ss.nextTick(iF,t))}function iF(t){let e=t._readableState;ft("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,oF(t)}function Q0(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,ss.nextTick(bY,t,e))}function bY(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(ft("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}nt.prototype._read=function(t){throw new lY("_read()")};nt.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new QX(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),ft("pipe count=%d opts=%j",n.pipes.length,e);let i=(!e||e.end!==!1)&&t!==ss.stdout&&t!==ss.stderr?a:g;n.endEmitted?ss.nextTick(i):r.once("end",i),t.on("unpipe",o);function o(_,D){ft("onunpipe"),_===r&&D&&D.hasUnpiped===!1&&(D.hasUnpiped=!0,l())}function a(){ft("onend"),t.end()}let u,c=!1;function l(){ft("cleanup"),t.removeListener("close",h),t.removeListener("finish",m),u&&t.removeListener("drain",u),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",p),c=!0,u&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&u()}function d(){c||(n.pipes.length===1&&n.pipes[0]===t?(ft("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(ft("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),u||(u=wY(r,t),t.on("drain",u))}r.on("data",p);function p(_){ft("ondata");let D=t.write(_);ft("dest.write",D),D===!1&&d()}function f(_){if(ft("onerror",_),g(),t.removeListener("error",f),t.listenerCount("error")===0){let D=t._writableState||t._readableState;D&&!D.errorEmitted?gd(t,_):t.emit("error",_)}}nY(t,"error",f);function h(){t.removeListener("finish",m),g()}t.once("close",h);function m(){ft("onfinish"),t.removeListener("close",h),g()}t.once("finish",m);function g(){ft("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?n.flowing&&d():n.flowing||(ft("pipe resume"),r.resume()),t};function wY(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(ft("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(ft("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}nt.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let s=e.pipes;e.pipes=[],this.pause();for(let i=0;i<s.length;i++)s[i].emit("unpipe",this,{hasUnpiped:!1});return this}let n=HX(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};nt.prototype.on=function(t,e){let r=Xa.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,ft("on readable",n.length,n.reading),n.length?eg(this):n.reading||ss.nextTick(_Y,this)),r};nt.prototype.addListener=nt.prototype.on;nt.prototype.removeListener=function(t,e){let r=Xa.prototype.removeListener.call(this,t,e);return t==="readable"&&ss.nextTick(sF,this),r};nt.prototype.off=nt.prototype.removeListener;nt.prototype.removeAllListeners=function(t){let e=Xa.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&ss.nextTick(sF,this),e};function sF(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Oc]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function _Y(t){ft("readable nexttick read 0"),t.read(0)}nt.prototype.resume=function(){let t=this._readableState;return t.flowing||(ft("resume"),t.flowing=!t.readableListening,EY(this,t)),t[Oc]=!1,this};function EY(t,e){e.resumeScheduled||(e.resumeScheduled=!0,ss.nextTick(SY,t,e))}function SY(t,e){ft("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),oF(t),e.flowing&&!e.reading&&t.read(0)}nt.prototype.pause=function(){return ft("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ft("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Oc]=!0,this};function oF(t){let e=t._readableState;for(ft("flow",e.flowing);e.flowing&&t.read()!==null;);}nt.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{gd(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=XX(t);for(let n=1;n<r.length;n++){let s=r[n];this[s]===void 0&&typeof t[s]=="function"&&(this[s]=t[s].bind(t))}return this};nt.prototype[eY]=function(){return aF(this)};nt.prototype.iterator=function(t){return t!==void 0&&hY(t,"options"),aF(this,t)};function aF(t,e){typeof t.read!="function"&&(t=nt.wrap(t,{objectMode:!0}));let r=AY(t,e);return r.stream=t,r}async function*AY(t,e){let r=SE;function n(o){this===t?(r(),r=SE):r=o}t.on("readable",n);let s,i=sY(t,{writable:!1},o=>{s=o?YI(s,o):null,r(),r=SE});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(s)throw s;if(s===null)return;await new YX(n)}}}catch(o){throw s=YI(s,o),s}finally{(s||e?.destroyOnReturn!==!1)&&(s===void 0||t._readableState.autoDestroy)?vd.destroyer(t,null):(t.off("readable",n),i())}}eF(nt.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});eF(CE.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Oc]!==!1},set(t){this[Oc]=!!t}}});nt._fromList=uF;function uF(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function xE(t){let e=t._readableState;ft("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,ss.nextTick(xY,e,t))}function xY(t,e){if(ft("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)ss.nextTick(DY,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function DY(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}nt.from=function(t,e){return yY(nt,t,e)};var DE;function cF(){return DE===void 0&&(DE={}),DE}nt.fromWeb=function(t,e){return cF().newStreamReadableFromReadableStream(t,e)};nt.toWeb=function(t,e){return cF().newReadableStreamFromStreamReadable(t,e)};nt.wrap=function(t,e){var r,n;return new nt({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(s,i){vd.destroyer(t,s),i(s)}}).wrap(t)}});var kE=b((Jxe,EF)=>{var Tc=Ga(),{ArrayPrototypeSlice:pF,Error:CY,FunctionPrototypeSymbolHasInstance:hF,ObjectDefineProperty:yF,ObjectDefineProperties:PY,ObjectSetPrototypeOf:mF,StringPrototypeToLowerCase:OY,Symbol:TY,SymbolHasInstance:BY}=Pr();EF.exports=ar;ar.WritableState=oh;var{EventEmitter:IY}=jp(),ih=W0().Stream,{Buffer:tg}=Ei(),ig=Cc(),{addAbortSignal:FY}=th(),{getHighWaterMark:kY,getDefaultHighWaterMark:RY}=X0(),{ERR_INVALID_ARG_TYPE:$Y,ERR_METHOD_NOT_IMPLEMENTED:jY,ERR_MULTIPLE_CALLBACK:gF,ERR_STREAM_CANNOT_PIPE:NY,ERR_STREAM_DESTROYED:sh,ERR_STREAM_ALREADY_FINISHED:MY,ERR_STREAM_NULL_VALUES:qY,ERR_STREAM_WRITE_AFTER_END:LY,ERR_UNKNOWN_ENCODING:vF}=Cn().codes,{errorOrDestroy:bd}=ig;mF(ar.prototype,ih.prototype);mF(ar,ih);function TE(){}var wd=TY("kOnFinished");function oh(t,e,r){typeof r!="boolean"&&(r=e instanceof Gs()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?kY(this,t,"writableHighWaterMark",r):RY(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=KY.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ng(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[wd]=[]}function ng(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}oh.prototype.getBuffer=function(){return pF(this.buffered,this.bufferedIndex)};yF(oh.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ar(t){let e=this instanceof Gs();if(!e&&!hF(ar,this))return new ar(t);this._writableState=new oh(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&FY(t.signal,this)),ih.call(this,t),ig.construct(this,()=>{let r=this._writableState;r.writing||IE(this,r),FE(this,r)})}yF(ar,BY,{__proto__:null,value:function(t){return hF(this,t)?!0:this!==ar?!1:t&&t._writableState instanceof oh}});ar.prototype.pipe=function(){bd(this,new NY)};function bF(t,e,r,n){let s=t._writableState;if(typeof r=="function")n=r,r=s.defaultEncoding;else{if(!r)r=s.defaultEncoding;else if(r!=="buffer"&&!tg.isEncoding(r))throw new vF(r);typeof n!="function"&&(n=TE)}if(e===null)throw new qY;if(!s.objectMode)if(typeof e=="string")s.decodeStrings!==!1&&(e=tg.from(e,r),r="buffer");else if(e instanceof tg)r="buffer";else if(ih._isUint8Array(e))e=ih._uint8ArrayToBuffer(e),r="buffer";else throw new $Y("chunk",["string","Buffer","Uint8Array"],e);let i;return s.ending?i=new LY:s.destroyed&&(i=new sh("write")),i?(Tc.nextTick(n,i),bd(t,i,!0),i):(s.pendingcb++,UY(t,s,e,r,n))}ar.prototype.write=function(t,e,r){return bF(this,t,e,r)===!0};ar.prototype.cork=function(){this._writableState.corked++};ar.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||IE(this,t))};ar.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=OY(e)),!tg.isEncoding(e))throw new vF(e);return this._writableState.defaultEncoding=e,this};function UY(t,e,r,n,s){let i=e.objectMode?1:r.length;e.length+=i;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:s}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&s!==TE&&(e.allNoop=!1)):(e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function dF(t,e,r,n,s,i,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new sh("write")):r?t._writev(s,e.onwrite):t._write(s,i,e.onwrite),e.sync=!1}function fF(t,e,r,n){--e.pendingcb,n(r),BE(e),bd(t,r)}function KY(t,e){let r=t._writableState,n=r.sync,s=r.writecb;if(typeof s!="function"){bd(t,new gF);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?Tc.nextTick(fF,t,r,e,s):fF(t,r,e,s)):(r.buffered.length>r.bufferedIndex&&IE(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===s?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:s,stream:t,state:r},Tc.nextTick(VY,r.afterWriteTickInfo)):wF(t,r,1,s))}function VY({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,wF(t,e,r,n)}function wF(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&BE(e),FE(t,e)}function BE(t){if(t.writing)return;for(let s=t.bufferedIndex;s<t.buffered.length;++s){var e;let{chunk:i,callback:o}=t.buffered[s],a=t.objectMode?1:i.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new sh("write"))}let r=t[wd].splice(0);for(let s=0;s<r.length;s++){var n;r[s]((n=t.errored)!==null&&n!==void 0?n:new sh("end"))}ng(t)}function IE(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:s}=e,i=r.length-n;if(!i)return;let o=n;if(e.bufferProcessing=!0,i>1&&t._writev){e.pendingcb-=i-1;let a=e.allNoop?TE:c=>{for(let l=o;l<r.length;++l)r[l].callback(c)},u=e.allNoop&&o===0?r:pF(r,o);u.allBuffers=e.allBuffers,dF(t,e,!0,e.length,u,"",a),ng(e)}else{do{let{chunk:a,encoding:u,callback:c}=r[o];r[o++]=null;let l=s?1:a.length;dF(t,e,!1,l,a,u,c)}while(o<r.length&&!e.writing);o===r.length?ng(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}ar.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new jY("_write()")};ar.prototype._writev=null;ar.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let s;if(t!=null){let i=bF(this,t,e);i instanceof CY&&(s=i)}return n.corked&&(n.corked=1,this.uncork()),s||(!n.errored&&!n.ending?(n.ending=!0,FE(this,n,!0),n.ended=!0):n.finished?s=new MY("end"):n.destroyed&&(s=new sh("end"))),typeof r=="function"&&(s||n.finished?Tc.nextTick(r,s):n[wd].push(r)),this};function rg(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function zY(t,e){let r=!1;function n(s){if(r){bd(t,s??gF());return}if(r=!0,e.pendingcb--,s){let i=e[wd].splice(0);for(let o=0;o<i.length;o++)i[o](s);bd(t,s,e.sync)}else rg(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,Tc.nextTick(OE,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(s){n(s)}e.sync=!1}function JY(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,zY(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function FE(t,e,r){rg(e)&&(JY(t,e),e.pendingcb===0&&(r?(e.pendingcb++,Tc.nextTick((n,s)=>{rg(s)?OE(n,s):s.pendingcb--},t,e)):rg(e)&&(e.pendingcb++,OE(t,e))))}function OE(t,e){e.pendingcb--,e.finished=!0;let r=e[wd].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}PY(ar.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var HY=ig.destroy;ar.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[wd].length)&&Tc.nextTick(BE,r),HY.call(this,t,e),this};ar.prototype._undestroy=ig.undestroy;ar.prototype._destroy=function(t,e){e(t)};ar.prototype[IY.captureRejectionSymbol]=function(t){this.destroy(t)};var PE;function _F(){return PE===void 0&&(PE={}),PE}ar.fromWeb=function(t,e){return _F().newStreamWritableFromWritableStream(t,e)};ar.toWeb=function(t){return _F().newWritableStreamFromStreamWritable(t)}});var kF=b((Hxe,FF)=>{var RE=Ga(),WY=Ei(),{isReadable:GY,isWritable:ZY,isIterable:SF,isNodeStream:XY,isReadableNodeStream:AF,isWritableNodeStream:xF,isDuplexNodeStream:YY}=Js(),DF=Ho(),{AbortError:IF,codes:{ERR_INVALID_ARG_TYPE:QY,ERR_INVALID_RETURN_VALUE:CF}}=Cn(),{destroyer:_d}=Cc(),eQ=Gs(),tQ=nh(),{createDeferredPromise:PF}=Us(),OF=_E(),TF=globalThis.Blob||WY.Blob,rQ=typeof TF<"u"?function(e){return e instanceof TF}:function(e){return!1},nQ=globalThis.AbortController||N0().AbortController,{FunctionPrototypeCall:BF}=Pr(),Bc=class extends eQ{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};FF.exports=function t(e,r){if(YY(e))return e;if(AF(e))return sg({readable:e});if(xF(e))return sg({writable:e});if(XY(e))return sg({writable:!1,readable:!1});if(typeof e=="function"){let{value:s,write:i,final:o,destroy:a}=iQ(e);if(SF(s))return OF(Bc,s,{objectMode:!0,write:i,final:o,destroy:a});let u=s?.then;if(typeof u=="function"){let c,l=BF(u,s,d=>{if(d!=null)throw new CF("nully","body",d)},d=>{_d(c,d)});return c=new Bc({objectMode:!0,readable:!1,write:i,final(d){o(async()=>{try{await l,RE.nextTick(d,null)}catch(p){RE.nextTick(d,p)}})},destroy:a})}throw new CF("Iterable, AsyncIterable or AsyncFunction",r,s)}if(rQ(e))return t(e.arrayBuffer());if(SF(e))return OF(Bc,e,{objectMode:!0,writable:!1});if(typeof e?.writable=="object"||typeof e?.readable=="object"){let s=e!=null&&e.readable?AF(e?.readable)?e?.readable:t(e.readable):void 0,i=e!=null&&e.writable?xF(e?.writable)?e?.writable:t(e.writable):void 0;return sg({readable:s,writable:i})}let n=e?.then;if(typeof n=="function"){let s;return BF(n,e,i=>{i!=null&&s.push(i),s.push(null)},i=>{_d(s,i)}),s=new Bc({objectMode:!0,writable:!1,read(){}})}throw new QY(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function iQ(t){let{promise:e,resolve:r}=PF(),n=new nQ,s=n.signal;return{value:t(async function*(){for(;;){let o=e;e=null;let{chunk:a,done:u,cb:c}=await o;if(RE.nextTick(c),u)return;if(s.aborted)throw new IF(void 0,{cause:s.reason});({promise:e,resolve:r}=PF()),yield a}}(),{signal:s}),write(o,a,u){let c=r;r=null,c({chunk:o,done:!1,cb:u})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function sg(t){let e=t.readable&&typeof t.readable.read!="function"?tQ.wrap(t.readable):t.readable,r=t.writable,n=!!GY(e),s=!!ZY(r),i,o,a,u,c;function l(d){let p=u;u=null,p?p(d):d&&c.destroy(d)}return c=new Bc({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:s}),s&&(DF(r,d=>{s=!1,d&&_d(e,d),l(d)}),c._write=function(d,p,f){r.write(d,p)?f():i=f},c._final=function(d){r.end(),o=d},r.on("drain",function(){if(i){let d=i;i=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(DF(e,d=>{n=!1,d&&_d(e,d),l(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,p){!d&&u!==null&&(d=new IF),a=null,i=null,o=null,u===null?p(d):(u=p,_d(r,d),_d(e,d))},c}});var Gs=b((Wxe,jF)=>{"use strict";var{ObjectDefineProperties:sQ,ObjectGetOwnPropertyDescriptor:Wo,ObjectKeys:oQ,ObjectSetPrototypeOf:RF}=Pr();jF.exports=os;var NE=nh(),Di=kE();RF(os.prototype,NE.prototype);RF(os,NE);{let t=oQ(Di.prototype);for(let e=0;e<t.length;e++){let r=t[e];os.prototype[r]||(os.prototype[r]=Di.prototype[r])}}function os(t){if(!(this instanceof os))return new os(t);NE.call(this,t),Di.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}sQ(os.prototype,{writable:{__proto__:null,...Wo(Di.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Wo(Di.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Wo(Di.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Wo(Di.prototype,"writableBuffer")},writableLength:{__proto__:null,...Wo(Di.prototype,"writableLength")},writableFinished:{__proto__:null,...Wo(Di.prototype,"writableFinished")},writableCorked:{__proto__:null,...Wo(Di.prototype,"writableCorked")},writableEnded:{__proto__:null,...Wo(Di.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Wo(Di.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var $E;function $F(){return $E===void 0&&($E={}),$E}os.fromWeb=function(t,e){return $F().newStreamDuplexFromReadableWritablePair(t,e)};os.toWeb=function(t){return $F().newReadableWritablePairFromDuplex(t)};var jE;os.from=function(t){return jE||(jE=kF()),jE(t,"body")}});var LE=b((Gxe,MF)=>{"use strict";var{ObjectSetPrototypeOf:NF,Symbol:aQ}=Pr();MF.exports=Go;var{ERR_METHOD_NOT_IMPLEMENTED:uQ}=Cn().codes,qE=Gs(),{getHighWaterMark:cQ}=X0();NF(Go.prototype,qE.prototype);NF(Go,qE);var ah=aQ("kCallback");function Go(t){if(!(this instanceof Go))return new Go(t);let e=t?cQ(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),qE.call(this,t),this._readableState.sync=!1,this[ah]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",lQ)}function ME(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function lQ(){this._final!==ME&&ME.call(this)}Go.prototype._final=ME;Go.prototype._transform=function(t,e,r){throw new uQ("_transform()")};Go.prototype._write=function(t,e,r){let n=this._readableState,s=this._writableState,i=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),s.ended||i===n.length||n.length<n.highWaterMark?r():this[ah]=r})};Go.prototype._read=function(){if(this[ah]){let t=this[ah];this[ah]=null,t()}}});var KE=b((Zxe,LF)=>{"use strict";var{ObjectSetPrototypeOf:qF}=Pr();LF.exports=Ed;var UE=LE();qF(Ed.prototype,UE.prototype);qF(Ed,UE);function Ed(t){if(!(this instanceof Ed))return new Ed(t);UE.call(this,t)}Ed.prototype._transform=function(t,e,r){r(null,t)}});var cg=b((Xxe,JF)=>{var uh=Ga(),{ArrayIsArray:dQ,Promise:fQ,SymbolAsyncIterator:pQ}=Pr(),ug=Ho(),{once:hQ}=Us(),yQ=Cc(),UF=Gs(),{aggregateTwoErrors:mQ,codes:{ERR_INVALID_ARG_TYPE:XE,ERR_INVALID_RETURN_VALUE:VE,ERR_MISSING_ARGS:gQ,ERR_STREAM_DESTROYED:vQ,ERR_STREAM_PREMATURE_CLOSE:bQ},AbortError:wQ}=Cn(),{validateFunction:_Q,validateAbortSignal:EQ}=eh(),{isIterable:Ic,isReadable:zE,isReadableNodeStream:ag,isNodeStream:KF,isTransformStream:Sd,isWebStream:SQ,isReadableStream:JE,isReadableEnded:AQ}=Js(),xQ=globalThis.AbortController||N0().AbortController,HE,WE;function VF(t,e,r){let n=!1;t.on("close",()=>{n=!0});let s=ug(t,{readable:e,writable:r},i=>{n=!i});return{destroy:i=>{n||(n=!0,yQ.destroyer(t,i||new vQ("pipe")))},cleanup:s}}function DQ(t){return _Q(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function GE(t){if(Ic(t))return t;if(ag(t))return CQ(t);throw new XE("val",["Readable","Iterable","AsyncIterable"],t)}async function*CQ(t){WE||(WE=nh()),yield*WE.prototype[pQ].call(t)}async function og(t,e,r,{end:n}){let s,i=null,o=c=>{if(c&&(s=c),i){let l=i;i=null,l()}},a=()=>new fQ((c,l)=>{s?l(s):i=()=>{s?l(s):c()}});e.on("drain",o);let u=ug(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&e.end(),await a(),r()}catch(c){r(s!==c?mQ(s,c):c)}finally{u(),e.off("drain",o)}}async function ZE(t,e,r,{end:n}){Sd(e)&&(e=e.writable);let s=e.getWriter();try{for await(let i of t)await s.ready,s.write(i).catch(()=>{});await s.ready,n&&await s.close(),r()}catch(i){try{await s.abort(i),r(i)}catch(o){r(o)}}}function PQ(...t){return zF(t,hQ(DQ(t)))}function zF(t,e,r){if(t.length===1&&dQ(t[0])&&(t=t[0]),t.length<2)throw new gQ("streams");let n=new xQ,s=n.signal,i=r?.signal,o=[];EQ(i,"options.signal");function a(){f(new wQ)}i?.addEventListener("abort",a);let u,c,l=[],d=0;function p(D){f(D,--d===0)}function f(D,v){if(D&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=D),!(!u&&!v)){for(;l.length;)l.shift()(u);i?.removeEventListener("abort",a),n.abort(),v&&(u||o.forEach(E=>E()),uh.nextTick(e,u,c))}}let h;for(let D=0;D<t.length;D++){let v=t[D],E=D<t.length-1,S=D>0,P=E||r?.end!==!1,C=D===t.length-1;if(KF(v)){let B=function(F){F&&F.name!=="AbortError"&&F.code!=="ERR_STREAM_PREMATURE_CLOSE"&&p(F)};var _=B;if(P){let{destroy:F,cleanup:I}=VF(v,E,S);l.push(F),zE(v)&&C&&o.push(I)}v.on("error",B),zE(v)&&C&&o.push(()=>{v.removeListener("error",B)})}if(D===0)if(typeof v=="function"){if(h=v({signal:s}),!Ic(h))throw new VE("Iterable, AsyncIterable or Stream","source",h)}else Ic(v)||ag(v)||Sd(v)?h=v:h=UF.from(v);else if(typeof v=="function"){if(Sd(h)){var m;h=GE((m=h)===null||m===void 0?void 0:m.readable)}else h=GE(h);if(h=v(h,{signal:s}),E){if(!Ic(h,!0))throw new VE("AsyncIterable",`transform[${D-1}]`,h)}else{var g;HE||(HE=KE());let B=new HE({objectMode:!0}),F=(g=h)===null||g===void 0?void 0:g.then;if(typeof F=="function")d++,F.call(h,q=>{c=q,q!=null&&B.write(q),P&&B.end(),uh.nextTick(p)},q=>{B.destroy(q),uh.nextTick(p,q)});else if(Ic(h,!0))d++,og(h,B,p,{end:P});else if(JE(h)||Sd(h)){let q=h.readable||h;d++,og(q,B,p,{end:P})}else throw new VE("AsyncIterable or Promise","destination",h);h=B;let{destroy:I,cleanup:$}=VF(h,!1,!0);l.push(I),C&&o.push($)}}else if(KF(v)){if(ag(h)){d+=2;let B=OQ(h,v,p,{end:P});zE(v)&&C&&o.push(B)}else if(Sd(h)||JE(h)){let B=h.readable||h;d++,og(B,v,p,{end:P})}else if(Ic(h))d++,og(h,v,p,{end:P});else throw new XE("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=v}else if(SQ(v)){if(ag(h))d++,ZE(GE(h),v,p,{end:P});else if(JE(h)||Ic(h))d++,ZE(h,v,p,{end:P});else if(Sd(h))d++,ZE(h.readable,v,p,{end:P});else throw new XE("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=v}else h=UF.from(v)}return(s!=null&&s.aborted||i!=null&&i.aborted)&&uh.nextTick(a),h}function OQ(t,e,r,{end:n}){let s=!1;if(e.on("close",()=>{s||r(new bQ)}),t.pipe(e,{end:!1}),n){let o=function(){s=!0,e.end()};var i=o;AQ(t)?uh.nextTick(o):t.once("end",o)}else r();return ug(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),ug(e,{readable:!1,writable:!0},r)}JF.exports={pipelineImpl:zF,pipeline:PQ}});var QE=b((Yxe,YF)=>{"use strict";var{pipeline:TQ}=cg(),lg=Gs(),{destroyer:BQ}=Cc(),{isNodeStream:dg,isReadable:HF,isWritable:WF,isWebStream:YE,isTransformStream:Fc,isWritableStream:GF,isReadableStream:ZF}=Js(),{AbortError:IQ,codes:{ERR_INVALID_ARG_VALUE:XF,ERR_MISSING_ARGS:FQ}}=Cn(),kQ=Ho();YF.exports=function(...e){if(e.length===0)throw new FQ("streams");if(e.length===1)return lg.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=lg.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=lg.from(e[f])}for(let f=0;f<e.length;++f)if(!(!dg(e[f])&&!YE(e[f]))){if(f<e.length-1&&!(HF(e[f])||ZF(e[f])||Fc(e[f])))throw new XF(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(WF(e[f])||GF(e[f])||Fc(e[f])))throw new XF(`streams[${f}]`,r[f],"must be writable")}let n,s,i,o,a;function u(f){let h=o;o=null,h?h(f):f?a.destroy(f):!p&&!d&&a.destroy()}let c=e[0],l=TQ(e,u),d=!!(WF(c)||GF(c)||Fc(c)),p=!!(HF(l)||ZF(l)||Fc(l));if(a=new lg({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(l!=null&&l.writableObjectMode),writable:d,readable:p}),d){if(dg(c))a._write=function(h,m,g){c.write(h,m)?g():n=g},a._final=function(h){c.end(),s=h},c.on("drain",function(){if(n){let h=n;n=null,h()}});else if(YE(c)){let m=(Fc(c)?c.writable:c).getWriter();a._write=async function(g,_,D){try{await m.ready,m.write(g).catch(()=>{}),D()}catch(v){D(v)}},a._final=async function(g){try{await m.ready,m.close().catch(()=>{}),s=g}catch(_){g(_)}}}let f=Fc(l)?l.readable:l;kQ(f,()=>{if(s){let h=s;s=null,h()}})}if(p){if(dg(l))l.on("readable",function(){if(i){let f=i;i=null,f()}}),l.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=l.read();if(f===null){i=a._read;return}if(!a.push(f))return}};else if(YE(l)){let h=(Fc(l)?l.readable:l).getReader();a._read=async function(){for(;;)try{let{value:m,done:g}=await h.read();if(!a.push(m))return;if(g){a.push(null);return}}catch{return}}}}return a._destroy=function(f,h){!f&&o!==null&&(f=new IQ),i=null,n=null,s=null,o===null?h(f):(o=h,dg(l)&&BQ(l,f))},a}});var o3=b((Qxe,rS)=>{"use strict";var r3=globalThis.AbortController||N0().AbortController,{codes:{ERR_INVALID_ARG_VALUE:RQ,ERR_INVALID_ARG_TYPE:ch,ERR_MISSING_ARGS:$Q,ERR_OUT_OF_RANGE:jQ},AbortError:Zs}=Cn(),{validateAbortSignal:kc,validateInteger:NQ,validateObject:Rc}=eh(),MQ=Pr().Symbol("kWeak"),{finished:qQ}=Ho(),LQ=QE(),{addAbortSignalNoValidate:UQ}=th(),{isWritable:KQ,isNodeStream:VQ}=Js(),{ArrayPrototypePush:zQ,MathFloor:JQ,Number:HQ,NumberIsNaN:WQ,Promise:QF,PromiseReject:e3,PromisePrototypeThen:GQ,Symbol:n3}=Pr(),fg=n3("kEmpty"),t3=n3("kEof");function ZQ(t,e){if(e!=null&&Rc(e,"options"),e?.signal!=null&&kc(e.signal,"options.signal"),VQ(t)&&!KQ(t))throw new RQ("stream",t,"must be writable");let r=LQ(this,t);return e!=null&&e.signal&&UQ(e.signal,r),r}function pg(t,e){if(typeof t!="function")throw new ch("fn",["Function","AsyncFunction"],t);e!=null&&Rc(e,"options"),e?.signal!=null&&kc(e.signal,"options.signal");let r=1;return e?.concurrency!=null&&(r=JQ(e.concurrency)),NQ(r,"concurrency",1),(async function*(){var s,i;let o=new r3,a=this,u=[],c=o.signal,l={signal:c},d=()=>o.abort();e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted&&d(),e==null||(i=e.signal)===null||i===void 0||i.addEventListener("abort",d);let p,f,h=!1;function m(){h=!0}async function g(){try{for await(let v of a){var _;if(h)return;if(c.aborted)throw new Zs;try{v=t(v,l)}catch(E){v=e3(E)}v!==fg&&(typeof((_=v)===null||_===void 0?void 0:_.catch)=="function"&&v.catch(m),u.push(v),p&&(p(),p=null),!h&&u.length&&u.length>=r&&await new QF(E=>{f=E}))}u.push(t3)}catch(v){let E=e3(v);GQ(E,void 0,m),u.push(E)}finally{var D;h=!0,p&&(p(),p=null),e==null||(D=e.signal)===null||D===void 0||D.removeEventListener("abort",d)}}g();try{for(;;){for(;u.length>0;){let _=await u[0];if(_===t3)return;if(c.aborted)throw new Zs;_!==fg&&(yield _),u.shift(),f&&(f(),f=null)}await new QF(_=>{p=_})}}finally{o.abort(),h=!0,f&&(f(),f=null)}}).call(this)}function XQ(t=void 0){return t!=null&&Rc(t,"options"),t?.signal!=null&&kc(t.signal,"options.signal"),(async function*(){let r=0;for await(let s of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Zs({cause:t.signal.reason});yield[r++,s]}}).call(this)}async function i3(t,e=void 0){for await(let r of tS.call(this,t,e))return!0;return!1}async function YQ(t,e=void 0){if(typeof t!="function")throw new ch("fn",["Function","AsyncFunction"],t);return!await i3.call(this,async(...r)=>!await t(...r),e)}async function QQ(t,e){for await(let r of tS.call(this,t,e))return r}async function eee(t,e){if(typeof t!="function")throw new ch("fn",["Function","AsyncFunction"],t);async function r(n,s){return await t(n,s),fg}for await(let n of pg.call(this,r,e));}function tS(t,e){if(typeof t!="function")throw new ch("fn",["Function","AsyncFunction"],t);async function r(n,s){return await t(n,s)?n:fg}return pg.call(this,r,e)}var eS=class extends $Q{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function tee(t,e,r){var n;if(typeof t!="function")throw new ch("reducer",["Function","AsyncFunction"],t);r!=null&&Rc(r,"options"),r?.signal!=null&&kc(r.signal,"options.signal");let s=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new Zs(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await qQ(this.destroy(c)),c}let i=new r3,o=i.signal;if(r!=null&&r.signal){let c={once:!0,[MQ]:this};r.signal.addEventListener("abort",()=>i.abort(),c)}let a=!1;try{for await(let c of this){var u;if(a=!0,r!=null&&(u=r.signal)!==null&&u!==void 0&&u.aborted)throw new Zs;s?e=await t(e,c,{signal:o}):(e=c,s=!0)}if(!a&&!s)throw new eS}finally{i.abort()}return e}async function ree(t){t!=null&&Rc(t,"options"),t?.signal!=null&&kc(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Zs(void 0,{cause:t.signal.reason});zQ(e,n)}return e}function nee(t,e){let r=pg.call(this,t,e);return(async function*(){for await(let s of r)yield*s}).call(this)}function s3(t){if(t=HQ(t),WQ(t))return 0;if(t<0)throw new jQ("number",">= 0",t);return t}function iee(t,e=void 0){return e!=null&&Rc(e,"options"),e?.signal!=null&&kc(e.signal,"options.signal"),t=s3(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Zs;for await(let i of this){var s;if(e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted)throw new Zs;t--<=0&&(yield i)}}).call(this)}function see(t,e=void 0){return e!=null&&Rc(e,"options"),e?.signal!=null&&kc(e.signal,"options.signal"),t=s3(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Zs;for await(let i of this){var s;if(e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted)throw new Zs;if(t-- >0)yield i;else return}}).call(this)}rS.exports.streamReturningOperators={asIndexedPairs:XQ,drop:iee,filter:tS,flatMap:nee,map:pg,take:see,compose:ZQ};rS.exports.promiseReturningOperators={every:YQ,forEach:eee,reduce:tee,toArray:ree,some:i3,find:QQ}});var nS=b((eDe,a3)=>{"use strict";var{ArrayPrototypePop:oee,Promise:aee}=Pr(),{isIterable:uee,isNodeStream:cee,isWebStream:lee}=Js(),{pipelineImpl:dee}=cg(),{finished:fee}=Ho();iS();function pee(...t){return new aee((e,r)=>{let n,s,i=t[t.length-1];if(i&&typeof i=="object"&&!cee(i)&&!uee(i)&&!lee(i)){let o=oee(t);n=o.signal,s=o.end}dee(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:s})})}a3.exports={finished:fee,pipeline:pee}});var iS=b((tDe,m3)=>{var{Buffer:hee}=Ei(),{ObjectDefineProperty:Zo,ObjectKeys:l3,ReflectApply:d3}=Pr(),{promisify:{custom:f3}}=Us(),{streamReturningOperators:u3,promiseReturningOperators:c3}=o3(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:p3}}=Cn(),yee=QE(),{pipeline:h3}=cg(),{destroyer:mee}=Cc(),y3=Ho(),sS=nS(),oS=Js(),_r=m3.exports=W0().Stream;_r.isDisturbed=oS.isDisturbed;_r.isErrored=oS.isErrored;_r.isReadable=oS.isReadable;_r.Readable=nh();for(let t of l3(u3)){let r=function(...n){if(new.target)throw p3();return _r.Readable.from(d3(e,this,n))};aS=r;let e=u3[t];Zo(r,"name",{__proto__:null,value:e.name}),Zo(r,"length",{__proto__:null,value:e.length}),Zo(_r.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var aS;for(let t of l3(c3)){let r=function(...s){if(new.target)throw p3();return d3(e,this,s)};aS=r;let e=c3[t];Zo(r,"name",{__proto__:null,value:e.name}),Zo(r,"length",{__proto__:null,value:e.length}),Zo(_r.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var aS;_r.Writable=kE();_r.Duplex=Gs();_r.Transform=LE();_r.PassThrough=KE();_r.pipeline=h3;var{addAbortSignal:gee}=th();_r.addAbortSignal=gee;_r.finished=y3;_r.destroy=mee;_r.compose=yee;Zo(_r,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return sS}});Zo(h3,f3,{__proto__:null,enumerable:!0,get(){return sS.pipeline}});Zo(y3,f3,{__proto__:null,enumerable:!0,get(){return sS.finished}});_r.Stream=_r;_r._isUint8Array=function(e){return e instanceof Uint8Array};_r._uint8ArrayToBuffer=function(e){return hee.from(e.buffer,e.byteOffset,e.byteLength)}});var lh=b((rDe,Er)=>{"use strict";var Fr=iS(),vee=nS(),bee=Fr.Readable.destroy;Er.exports=Fr.Readable;Er.exports._uint8ArrayToBuffer=Fr._uint8ArrayToBuffer;Er.exports._isUint8Array=Fr._isUint8Array;Er.exports.isDisturbed=Fr.isDisturbed;Er.exports.isErrored=Fr.isErrored;Er.exports.isReadable=Fr.isReadable;Er.exports.Readable=Fr.Readable;Er.exports.Writable=Fr.Writable;Er.exports.Duplex=Fr.Duplex;Er.exports.Transform=Fr.Transform;Er.exports.PassThrough=Fr.PassThrough;Er.exports.addAbortSignal=Fr.addAbortSignal;Er.exports.finished=Fr.finished;Er.exports.destroy=Fr.destroy;Er.exports.destroy=bee;Er.exports.pipeline=Fr.pipeline;Er.exports.compose=Fr.compose;Object.defineProperty(Fr,"promises",{configurable:!0,enumerable:!0,get(){return vee}});Er.exports.Stream=Fr.Stream;Er.exports.default=Er.exports});var h5=b(p5=>{p5.Level=G_().BrowserLevel});var fk=b((hv,dk)=>{(function(t,e){typeof hv=="object"&&typeof dk<"u"?e(hv):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(hv,function(t){"use strict";function e(){for(var k=arguments.length,T=Array(k),M=0;M<k;M++)T[M]=arguments[M];if(T.length>1){T[0]=T[0].slice(0,-1);for(var z=T.length-1,J=1;J<z;++J)T[J]=T[J].slice(1,-1);return T[z]=T[z].slice(1),T.join("")}else return T[0]}function r(k){return"(?:"+k+")"}function n(k){return k===void 0?"undefined":k===null?"null":Object.prototype.toString.call(k).split(" ").pop().split("]").shift().toLowerCase()}function s(k){return k.toUpperCase()}function i(k){return k!=null?k instanceof Array?k:typeof k.length!="number"||k.split||k.setInterval||k.call?[k]:Array.prototype.slice.call(k):[]}function o(k,T){var M=k;if(T)for(var z in T)M[z]=T[z];return M}function a(k){var T="[A-Za-z]",M="[\\x0D]",z="[0-9]",J="[\\x22]",le=e(z,"[A-Fa-f]"),Ge="[\\x0A]",At="[\\x20]",Rt=r(r("%[EFef]"+le+"%"+le+le+"%"+le+le)+"|"+r("%[89A-Fa-f]"+le+"%"+le+le)+"|"+r("%"+le+le)),xr="[\\:\\/\\?\\#\\[\\]\\@]",wt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",sr=e(xr,wt),Dr=k?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",tr=k?"[\\uE000-\\uF8FF]":"[]",Ct=e(T,z,"[\\-\\.\\_\\~]",Dr),or=r(T+e(T,z,"[\\+\\-\\.]")+"*"),Mt=r(r(Rt+"|"+e(Ct,wt,"[\\:]"))+"*"),tc=r(r("25[0-5]")+"|"+r("2[0-4]"+z)+"|"+r("1"+z+z)+"|"+r("[1-9]"+z)+"|"+z),ri=r(r("25[0-5]")+"|"+r("2[0-4]"+z)+"|"+r("1"+z+z)+"|"+r("0?[1-9]"+z)+"|0?0?"+z),bi=r(ri+"\\."+ri+"\\."+ri+"\\."+ri),Vt=r(le+"{1,4}"),ni=r(r(Vt+"\\:"+Vt)+"|"+bi),wi=r(r(Vt+"\\:")+"{6}"+ni),ks=r("\\:\\:"+r(Vt+"\\:")+"{5}"+ni),rc=r(r(Vt)+"?\\:\\:"+r(Vt+"\\:")+"{4}"+ni),Fo=r(r(r(Vt+"\\:")+"{0,1}"+Vt)+"?\\:\\:"+r(Vt+"\\:")+"{3}"+ni),Sp=r(r(r(Vt+"\\:")+"{0,2}"+Vt)+"?\\:\\:"+r(Vt+"\\:")+"{2}"+ni),Qm=r(r(r(Vt+"\\:")+"{0,3}"+Vt)+"?\\:\\:"+Vt+"\\:"+ni),e0=r(r(r(Vt+"\\:")+"{0,4}"+Vt)+"?\\:\\:"+ni),zl=r(r(r(Vt+"\\:")+"{0,5}"+Vt)+"?\\:\\:"+Vt),Jl=r(r(r(Vt+"\\:")+"{0,6}"+Vt)+"?\\:\\:"),ko=r([wi,ks,rc,Fo,Sp,Qm,e0,zl,Jl].join("|")),Hl=r(r(Ct+"|"+Rt)+"+"),B1=r(ko+"\\%25"+Hl),nc=r(ko+r("\\%25|\\%(?!"+le+"{2})")+Hl),GJ=r("[vV]"+le+"+\\."+e(Ct,wt,"[\\:]")+"+"),ZJ=r("\\["+r(nc+"|"+ko+"|"+GJ)+"\\]"),FT=r(r(Rt+"|"+e(Ct,wt))+"*"),Ap=r(ZJ+"|"+bi+"(?!"+FT+")|"+FT),xp=r(z+"*"),kT=r(r(Mt+"@")+"?"+Ap+r("\\:"+xp)+"?"),Dp=r(Rt+"|"+e(Ct,wt,"[\\:\\@]")),XJ=r(Dp+"*"),RT=r(Dp+"+"),YJ=r(r(Rt+"|"+e(Ct,wt,"[\\@]"))+"+"),Ro=r(r("\\/"+XJ)+"*"),Wl=r("\\/"+r(RT+Ro)+"?"),I1=r(YJ+Ro),t0=r(RT+Ro),Gl="(?!"+Dp+")",LSe=r(Ro+"|"+Wl+"|"+I1+"|"+t0+"|"+Gl),Zl=r(r(Dp+"|"+e("[\\/\\?]",tr))+"*"),Cp=r(r(Dp+"|[\\/\\?]")+"*"),$T=r(r("\\/\\/"+kT+Ro)+"|"+Wl+"|"+t0+"|"+Gl),QJ=r(or+"\\:"+$T+r("\\?"+Zl)+"?"+r("\\#"+Cp)+"?"),eH=r(r("\\/\\/"+kT+Ro)+"|"+Wl+"|"+I1+"|"+Gl),tH=r(eH+r("\\?"+Zl)+"?"+r("\\#"+Cp)+"?"),USe=r(QJ+"|"+tH),KSe=r(or+"\\:"+$T+r("\\?"+Zl)+"?"),VSe="^("+or+")\\:"+r(r("\\/\\/("+r("("+Mt+")@")+"?("+Ap+")"+r("\\:("+xp+")")+"?)")+"?("+Ro+"|"+Wl+"|"+t0+"|"+Gl+")")+r("\\?("+Zl+")")+"?"+r("\\#("+Cp+")")+"?$",zSe="^(){0}"+r(r("\\/\\/("+r("("+Mt+")@")+"?("+Ap+")"+r("\\:("+xp+")")+"?)")+"?("+Ro+"|"+Wl+"|"+I1+"|"+Gl+")")+r("\\?("+Zl+")")+"?"+r("\\#("+Cp+")")+"?$",JSe="^("+or+")\\:"+r(r("\\/\\/("+r("("+Mt+")@")+"?("+Ap+")"+r("\\:("+xp+")")+"?)")+"?("+Ro+"|"+Wl+"|"+t0+"|"+Gl+")")+r("\\?("+Zl+")")+"?$",HSe="^"+r("\\#("+Cp+")")+"?$",WSe="^"+r("("+Mt+")@")+"?("+Ap+")"+r("\\:("+xp+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",T,z,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",Ct,wt),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",Ct,wt),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",Ct,wt),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",Ct,wt),"g"),NOT_QUERY:new RegExp(e("[^\\%]",Ct,wt,"[\\:\\@\\/\\?]",tr),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",Ct,wt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",Ct,wt),"g"),UNRESERVED:new RegExp(Ct,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",Ct,sr),"g"),PCT_ENCODED:new RegExp(Rt,"g"),IPV4ADDRESS:new RegExp("^("+bi+")$"),IPV6ADDRESS:new RegExp("^\\[?("+ko+")"+r(r("\\%25|\\%(?!"+le+"{2})")+"("+Hl+")")+"?\\]?$")}}var u=a(!1),c=a(!0),l=function(){function k(T,M){var z=[],J=!0,le=!1,Ge=void 0;try{for(var At=T[Symbol.iterator](),Rt;!(J=(Rt=At.next()).done)&&(z.push(Rt.value),!(M&&z.length===M));J=!0);}catch(xr){le=!0,Ge=xr}finally{try{!J&&At.return&&At.return()}finally{if(le)throw Ge}}return z}return function(T,M){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return k(T,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(k){if(Array.isArray(k)){for(var T=0,M=Array(k.length);T<k.length;T++)M[T]=k[T];return M}else return Array.from(k)},p=2147483647,f=36,h=1,m=26,g=38,_=700,D=72,v=128,E="-",S=/^xn--/,P=/[^\0-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},F=f-h,I=Math.floor,$=String.fromCharCode;function q(k){throw new RangeError(B[k])}function X(k,T){for(var M=[],z=k.length;z--;)M[z]=T(k[z]);return M}function Q(k,T){var M=k.split("@"),z="";M.length>1&&(z=M[0]+"@",k=M[1]),k=k.replace(C,".");var J=k.split("."),le=X(J,T).join(".");return z+le}function K(k){for(var T=[],M=0,z=k.length;M<z;){var J=k.charCodeAt(M++);if(J>=55296&&J<=56319&&M<z){var le=k.charCodeAt(M++);(le&64512)==56320?T.push(((J&1023)<<10)+(le&1023)+65536):(T.push(J),M--)}else T.push(J)}return T}var G=function(T){return String.fromCodePoint.apply(String,d(T))},ne=function(T){return T-48<10?T-22:T-65<26?T-65:T-97<26?T-97:f},U=function(T,M){return T+22+75*(T<26)-((M!=0)<<5)},R=function(T,M,z){var J=0;for(T=z?I(T/_):T>>1,T+=I(T/M);T>F*m>>1;J+=f)T=I(T/F);return I(J+(F+1)*T/(T+g))},j=function(T){var M=[],z=T.length,J=0,le=v,Ge=D,At=T.lastIndexOf(E);At<0&&(At=0);for(var Rt=0;Rt<At;++Rt)T.charCodeAt(Rt)>=128&&q("not-basic"),M.push(T.charCodeAt(Rt));for(var xr=At>0?At+1:0;xr<z;){for(var wt=J,sr=1,Dr=f;;Dr+=f){xr>=z&&q("invalid-input");var tr=ne(T.charCodeAt(xr++));(tr>=f||tr>I((p-J)/sr))&&q("overflow"),J+=tr*sr;var Ct=Dr<=Ge?h:Dr>=Ge+m?m:Dr-Ge;if(tr<Ct)break;var or=f-Ct;sr>I(p/or)&&q("overflow"),sr*=or}var Mt=M.length+1;Ge=R(J-wt,Mt,wt==0),I(J/Mt)>p-le&&q("overflow"),le+=I(J/Mt),J%=Mt,M.splice(J++,0,le)}return String.fromCodePoint.apply(String,M)},W=function(T){var M=[];T=K(T);var z=T.length,J=v,le=0,Ge=D,At=!0,Rt=!1,xr=void 0;try{for(var wt=T[Symbol.iterator](),sr;!(At=(sr=wt.next()).done);At=!0){var Dr=sr.value;Dr<128&&M.push($(Dr))}}catch(nc){Rt=!0,xr=nc}finally{try{!At&&wt.return&&wt.return()}finally{if(Rt)throw xr}}var tr=M.length,Ct=tr;for(tr&&M.push(E);Ct<z;){var or=p,Mt=!0,tc=!1,ri=void 0;try{for(var bi=T[Symbol.iterator](),Vt;!(Mt=(Vt=bi.next()).done);Mt=!0){var ni=Vt.value;ni>=J&&ni<or&&(or=ni)}}catch(nc){tc=!0,ri=nc}finally{try{!Mt&&bi.return&&bi.return()}finally{if(tc)throw ri}}var wi=Ct+1;or-J>I((p-le)/wi)&&q("overflow"),le+=(or-J)*wi,J=or;var ks=!0,rc=!1,Fo=void 0;try{for(var Sp=T[Symbol.iterator](),Qm;!(ks=(Qm=Sp.next()).done);ks=!0){var e0=Qm.value;if(e0<J&&++le>p&&q("overflow"),e0==J){for(var zl=le,Jl=f;;Jl+=f){var ko=Jl<=Ge?h:Jl>=Ge+m?m:Jl-Ge;if(zl<ko)break;var Hl=zl-ko,B1=f-ko;M.push($(U(ko+Hl%B1,0))),zl=I(Hl/B1)}M.push($(U(zl,0))),Ge=R(le,wi,Ct==tr),le=0,++Ct}}}catch(nc){rc=!0,Fo=nc}finally{try{!ks&&Sp.return&&Sp.return()}finally{if(rc)throw Fo}}++le,++J}return M.join("")},re=function(T){return Q(T,function(M){return S.test(M)?j(M.slice(4).toLowerCase()):M})},L=function(T){return Q(T,function(M){return P.test(M)?"xn--"+W(M):M})},V={version:"2.1.0",ucs2:{decode:K,encode:G},decode:j,encode:W,toASCII:L,toUnicode:re},ie={};function ue(k){var T=k.charCodeAt(0),M=void 0;return T<16?M="%0"+T.toString(16).toUpperCase():T<128?M="%"+T.toString(16).toUpperCase():T<2048?M="%"+(T>>6|192).toString(16).toUpperCase()+"%"+(T&63|128).toString(16).toUpperCase():M="%"+(T>>12|224).toString(16).toUpperCase()+"%"+(T>>6&63|128).toString(16).toUpperCase()+"%"+(T&63|128).toString(16).toUpperCase(),M}function he(k){for(var T="",M=0,z=k.length;M<z;){var J=parseInt(k.substr(M+1,2),16);if(J<128)T+=String.fromCharCode(J),M+=3;else if(J>=194&&J<224){if(z-M>=6){var le=parseInt(k.substr(M+4,2),16);T+=String.fromCharCode((J&31)<<6|le&63)}else T+=k.substr(M,6);M+=6}else if(J>=224){if(z-M>=9){var Ge=parseInt(k.substr(M+4,2),16),At=parseInt(k.substr(M+7,2),16);T+=String.fromCharCode((J&15)<<12|(Ge&63)<<6|At&63)}else T+=k.substr(M,9);M+=9}else T+=k.substr(M,3),M+=3}return T}function ye(k,T){function M(z){var J=he(z);return J.match(T.UNRESERVED)?J:z}return k.scheme&&(k.scheme=String(k.scheme).replace(T.PCT_ENCODED,M).toLowerCase().replace(T.NOT_SCHEME,"")),k.userinfo!==void 0&&(k.userinfo=String(k.userinfo).replace(T.PCT_ENCODED,M).replace(T.NOT_USERINFO,ue).replace(T.PCT_ENCODED,s)),k.host!==void 0&&(k.host=String(k.host).replace(T.PCT_ENCODED,M).toLowerCase().replace(T.NOT_HOST,ue).replace(T.PCT_ENCODED,s)),k.path!==void 0&&(k.path=String(k.path).replace(T.PCT_ENCODED,M).replace(k.scheme?T.NOT_PATH:T.NOT_PATH_NOSCHEME,ue).replace(T.PCT_ENCODED,s)),k.query!==void 0&&(k.query=String(k.query).replace(T.PCT_ENCODED,M).replace(T.NOT_QUERY,ue).replace(T.PCT_ENCODED,s)),k.fragment!==void 0&&(k.fragment=String(k.fragment).replace(T.PCT_ENCODED,M).replace(T.NOT_FRAGMENT,ue).replace(T.PCT_ENCODED,s)),k}function xe(k){return k.replace(/^0*(.*)/,"$1")||"0"}function Oe(k,T){var M=k.match(T.IPV4ADDRESS)||[],z=l(M,2),J=z[1];return J?J.split(".").map(xe).join("."):k}function Le(k,T){var M=k.match(T.IPV6ADDRESS)||[],z=l(M,3),J=z[1],le=z[2];if(J){for(var Ge=J.toLowerCase().split("::").reverse(),At=l(Ge,2),Rt=At[0],xr=At[1],wt=xr?xr.split(":").map(xe):[],sr=Rt.split(":").map(xe),Dr=T.IPV4ADDRESS.test(sr[sr.length-1]),tr=Dr?7:8,Ct=sr.length-tr,or=Array(tr),Mt=0;Mt<tr;++Mt)or[Mt]=wt[Mt]||sr[Ct+Mt]||"";Dr&&(or[tr-1]=Oe(or[tr-1],T));var tc=or.reduce(function(wi,ks,rc){if(!ks||ks==="0"){var Fo=wi[wi.length-1];Fo&&Fo.index+Fo.length===rc?Fo.length++:wi.push({index:rc,length:1})}return wi},[]),ri=tc.sort(function(wi,ks){return ks.length-wi.length})[0],bi=void 0;if(ri&&ri.length>1){var Vt=or.slice(0,ri.index),ni=or.slice(ri.index+ri.length);bi=Vt.join(":")+"::"+ni.join(":")}else bi=or.join(":");return le&&(bi+="%"+le),bi}else return k}var je=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Et="".match(/(){0}/)[1]===void 0;function yt(k){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M={},z=T.iri!==!1?c:u;T.reference==="suffix"&&(k=(T.scheme?T.scheme+":":"")+"//"+k);var J=k.match(je);if(J){Et?(M.scheme=J[1],M.userinfo=J[3],M.host=J[4],M.port=parseInt(J[5],10),M.path=J[6]||"",M.query=J[7],M.fragment=J[8],isNaN(M.port)&&(M.port=J[5])):(M.scheme=J[1]||void 0,M.userinfo=k.indexOf("@")!==-1?J[3]:void 0,M.host=k.indexOf("//")!==-1?J[4]:void 0,M.port=parseInt(J[5],10),M.path=J[6]||"",M.query=k.indexOf("?")!==-1?J[7]:void 0,M.fragment=k.indexOf("#")!==-1?J[8]:void 0,isNaN(M.port)&&(M.port=k.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?J[4]:void 0)),M.host&&(M.host=Le(Oe(M.host,z),z)),M.scheme===void 0&&M.userinfo===void 0&&M.host===void 0&&M.port===void 0&&!M.path&&M.query===void 0?M.reference="same-document":M.scheme===void 0?M.reference="relative":M.fragment===void 0?M.reference="absolute":M.reference="uri",T.reference&&T.reference!=="suffix"&&T.reference!==M.reference&&(M.error=M.error||"URI is not a "+T.reference+" reference.");var le=ie[(T.scheme||M.scheme||"").toLowerCase()];if(!T.unicodeSupport&&(!le||!le.unicodeSupport)){if(M.host&&(T.domainHost||le&&le.domainHost))try{M.host=V.toASCII(M.host.replace(z.PCT_ENCODED,he).toLowerCase())}catch(Ge){M.error=M.error||"Host's domain name can not be converted to ASCII via punycode: "+Ge}ye(M,u)}else ye(M,z);le&&le.parse&&le.parse(M,T)}else M.error=M.error||"URI can not be parsed.";return M}function pn(k,T){var M=T.iri!==!1?c:u,z=[];return k.userinfo!==void 0&&(z.push(k.userinfo),z.push("@")),k.host!==void 0&&z.push(Le(Oe(String(k.host),M),M).replace(M.IPV6ADDRESS,function(J,le,Ge){return"["+le+(Ge?"%25"+Ge:"")+"]"})),(typeof k.port=="number"||typeof k.port=="string")&&(z.push(":"),z.push(String(k.port))),z.length?z.join(""):void 0}var gr=/^\.\.?\//,Bs=/^\/\.(\/|$)/,es=/^\/\.\.(\/|$)/,Io=/^\/?(?:.|\n)*?(?=\/|$)/;function vr(k){for(var T=[];k.length;)if(k.match(gr))k=k.replace(gr,"");else if(k.match(Bs))k=k.replace(Bs,"/");else if(k.match(es))k=k.replace(es,"/"),T.pop();else if(k==="."||k==="..")k="";else{var M=k.match(Io);if(M){var z=M[0];k=k.slice(z.length),T.push(z)}else throw new Error("Unexpected dot segment condition")}return T.join("")}function Nn(k){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=T.iri?c:u,z=[],J=ie[(T.scheme||k.scheme||"").toLowerCase()];if(J&&J.serialize&&J.serialize(k,T),k.host&&!M.IPV6ADDRESS.test(k.host)){if(T.domainHost||J&&J.domainHost)try{k.host=T.iri?V.toUnicode(k.host):V.toASCII(k.host.replace(M.PCT_ENCODED,he).toLowerCase())}catch(At){k.error=k.error||"Host's domain name can not be converted to "+(T.iri?"Unicode":"ASCII")+" via punycode: "+At}}ye(k,M),T.reference!=="suffix"&&k.scheme&&(z.push(k.scheme),z.push(":"));var le=pn(k,T);if(le!==void 0&&(T.reference!=="suffix"&&z.push("//"),z.push(le),k.path&&k.path.charAt(0)!=="/"&&z.push("/")),k.path!==void 0){var Ge=k.path;!T.absolutePath&&(!J||!J.absolutePath)&&(Ge=vr(Ge)),le===void 0&&(Ge=Ge.replace(/^\/\//,"/%2F")),z.push(Ge)}return k.query!==void 0&&(z.push("?"),z.push(k.query)),k.fragment!==void 0&&(z.push("#"),z.push(k.fragment)),z.join("")}function Na(k,T){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},z=arguments[3],J={};return z||(k=yt(Nn(k,M),M),T=yt(Nn(T,M),M)),M=M||{},!M.tolerant&&T.scheme?(J.scheme=T.scheme,J.userinfo=T.userinfo,J.host=T.host,J.port=T.port,J.path=vr(T.path||""),J.query=T.query):(T.userinfo!==void 0||T.host!==void 0||T.port!==void 0?(J.userinfo=T.userinfo,J.host=T.host,J.port=T.port,J.path=vr(T.path||""),J.query=T.query):(T.path?(T.path.charAt(0)==="/"?J.path=vr(T.path):((k.userinfo!==void 0||k.host!==void 0||k.port!==void 0)&&!k.path?J.path="/"+T.path:k.path?J.path=k.path.slice(0,k.path.lastIndexOf("/")+1)+T.path:J.path=T.path,J.path=vr(J.path)),J.query=T.query):(J.path=k.path,T.query!==void 0?J.query=T.query:J.query=k.query),J.userinfo=k.userinfo,J.host=k.host,J.port=k.port),J.scheme=k.scheme),J.fragment=T.fragment,J}function mt(k,T,M){var z=o({scheme:"null"},M);return Nn(Na(yt(k,z),yt(T,z),z,!0),z)}function ir(k,T){return typeof k=="string"?k=Nn(yt(k,T),T):n(k)==="object"&&(k=yt(Nn(k,T),T)),k}function Re(k,T,M){return typeof k=="string"?k=Nn(yt(k,M),M):n(k)==="object"&&(k=Nn(k,M)),typeof T=="string"?T=Nn(yt(T,M),M):n(T)==="object"&&(T=Nn(T,M)),k===T}function br(k,T){return k&&k.toString().replace(!T||!T.iri?u.ESCAPE:c.ESCAPE,ue)}function St(k,T){return k&&k.toString().replace(!T||!T.iri?u.PCT_ENCODED:c.PCT_ENCODED,he)}var Is={scheme:"http",domainHost:!0,parse:function(T,M){return T.host||(T.error=T.error||"HTTP URIs must have a host."),T},serialize:function(T,M){var z=String(T.scheme).toLowerCase()==="https";return(T.port===(z?443:80)||T.port==="")&&(T.port=void 0),T.path||(T.path="/"),T}},Qu={scheme:"https",domainHost:Is.domainHost,parse:Is.parse,serialize:Is.serialize};function Mn(k){return typeof k.secure=="boolean"?k.secure:String(k.scheme).toLowerCase()==="wss"}var Fs={scheme:"ws",domainHost:!0,parse:function(T,M){var z=T;return z.secure=Mn(z),z.resourceName=(z.path||"/")+(z.query?"?"+z.query:""),z.path=void 0,z.query=void 0,z},serialize:function(T,M){if((T.port===(Mn(T)?443:80)||T.port==="")&&(T.port=void 0),typeof T.secure=="boolean"&&(T.scheme=T.secure?"wss":"ws",T.secure=void 0),T.resourceName){var z=T.resourceName.split("?"),J=l(z,2),le=J[0],Ge=J[1];T.path=le&&le!=="/"?le:void 0,T.query=Ge,T.resourceName=void 0}return T.fragment=void 0,T}},ts={scheme:"wss",domainHost:Fs.domainHost,parse:Fs.parse,serialize:Fs.serialize},fr={},Zm=!0,Xm="[A-Za-z0-9\\-\\.\\_\\~"+(Zm?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Tt="[0-9A-Fa-f]",xn=r(r("%[EFef]"+Tt+"%"+Tt+Tt+"%"+Tt+Tt)+"|"+r("%[89A-Fa-f]"+Tt+"%"+Tt+Tt)+"|"+r("%"+Tt+Tt)),ec="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Vl="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Ym=e(Vl,'[\\"\\\\]'),O1="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",T1=new RegExp(Xm,"g"),y=new RegExp(xn,"g"),A=new RegExp(e("[^]",ec,"[\\.]",'[\\"]',Ym),"g"),w=new RegExp(e("[^]",Xm,O1),"g"),x=w;function O(k){var T=he(k);return T.match(T1)?T:k}var H={scheme:"mailto",parse:function(T,M){var z=T,J=z.to=z.path?z.path.split(","):[];if(z.path=void 0,z.query){for(var le=!1,Ge={},At=z.query.split("&"),Rt=0,xr=At.length;Rt<xr;++Rt){var wt=At[Rt].split("=");switch(wt[0]){case"to":for(var sr=wt[1].split(","),Dr=0,tr=sr.length;Dr<tr;++Dr)J.push(sr[Dr]);break;case"subject":z.subject=St(wt[1],M);break;case"body":z.body=St(wt[1],M);break;default:le=!0,Ge[St(wt[0],M)]=St(wt[1],M);break}}le&&(z.headers=Ge)}z.query=void 0;for(var Ct=0,or=J.length;Ct<or;++Ct){var Mt=J[Ct].split("@");if(Mt[0]=St(Mt[0]),M.unicodeSupport)Mt[1]=St(Mt[1],M).toLowerCase();else try{Mt[1]=V.toASCII(St(Mt[1],M).toLowerCase())}catch(tc){z.error=z.error||"Email address's domain name can not be converted to ASCII via punycode: "+tc}J[Ct]=Mt.join("@")}return z},serialize:function(T,M){var z=T,J=i(T.to);if(J){for(var le=0,Ge=J.length;le<Ge;++le){var At=String(J[le]),Rt=At.lastIndexOf("@"),xr=At.slice(0,Rt).replace(y,O).replace(y,s).replace(A,ue),wt=At.slice(Rt+1);try{wt=M.iri?V.toUnicode(wt):V.toASCII(St(wt,M).toLowerCase())}catch(Ct){z.error=z.error||"Email address's domain name can not be converted to "+(M.iri?"Unicode":"ASCII")+" via punycode: "+Ct}J[le]=xr+"@"+wt}z.path=J.join(",")}var sr=T.headers=T.headers||{};T.subject&&(sr.subject=T.subject),T.body&&(sr.body=T.body);var Dr=[];for(var tr in sr)sr[tr]!==fr[tr]&&Dr.push(tr.replace(y,O).replace(y,s).replace(w,ue)+"="+sr[tr].replace(y,O).replace(y,s).replace(x,ue));return Dr.length&&(z.query=Dr.join("&")),z}},te=/^([^\:]+)\:(.*)/,se={scheme:"urn",parse:function(T,M){var z=T.path&&T.path.match(te),J=T;if(z){var le=M.scheme||J.scheme||"urn",Ge=z[1].toLowerCase(),At=z[2],Rt=le+":"+(M.nid||Ge),xr=ie[Rt];J.nid=Ge,J.nss=At,J.path=void 0,xr&&(J=xr.parse(J,M))}else J.error=J.error||"URN can not be parsed.";return J},serialize:function(T,M){var z=M.scheme||T.scheme||"urn",J=T.nid,le=z+":"+(M.nid||J),Ge=ie[le];Ge&&(T=Ge.serialize(T,M));var At=T,Rt=T.nss;return At.path=(J||M.nid)+":"+Rt,At}},me=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ut={scheme:"urn:uuid",parse:function(T,M){var z=T;return z.uuid=z.nss,z.nss=void 0,!M.tolerant&&(!z.uuid||!z.uuid.match(me))&&(z.error=z.error||"UUID is not valid."),z},serialize:function(T,M){var z=T;return z.nss=(T.uuid||"").toLowerCase(),z}};ie[Is.scheme]=Is,ie[Qu.scheme]=Qu,ie[Fs.scheme]=Fs,ie[ts.scheme]=ts,ie[H.scheme]=H,ie[se.scheme]=se,ie[ut.scheme]=ut,t.SCHEMES=ie,t.pctEncChar=ue,t.pctDecChars=he,t.parse=yt,t.removeDotSegments=vr,t.serialize=Nn,t.resolveComponents=Na,t.resolve=mt,t.normalize=ir,t.equal=Re,t.escapeComponent=br,t.unescapeComponent=St,Object.defineProperty(t,"__esModule",{value:!0})})});var hk=b((gIe,pk)=>{"use strict";pk.exports=function t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?t(e.toJSON()):Array.isArray(e)?`[${e.reduce((s,i,o)=>`${s}${o===0?"":","}${t(i===void 0||typeof i=="symbol"?null:i)}`,"")}]`:`{${Object.keys(e).sort().reduce((n,s)=>{if(e[s]===void 0||typeof e[s]=="symbol")return n;let i=n.length===0?"":",";return`${n}${i}${t(s)}:${t(e[s])}`},"")}}`}});var Ck=b((QFe,Dk)=>{var Xd=1e3,Yd=Xd*60,Qd=Yd*60,Gc=Qd*24,hie=Gc*7,yie=Gc*365.25;Dk.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return mie(t);if(r==="number"&&isFinite(t))return e.long?vie(t):gie(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function mie(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*yie;case"weeks":case"week":case"w":return r*hie;case"days":case"day":case"d":return r*Gc;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Qd;case"minutes":case"minute":case"mins":case"min":case"m":return r*Yd;case"seconds":case"second":case"secs":case"sec":case"s":return r*Xd;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function gie(t){var e=Math.abs(t);return e>=Gc?Math.round(t/Gc)+"d":e>=Qd?Math.round(t/Qd)+"h":e>=Yd?Math.round(t/Yd)+"m":e>=Xd?Math.round(t/Xd)+"s":t+"ms"}function vie(t){var e=Math.abs(t);return e>=Gc?bv(t,e,Gc,"day"):e>=Qd?bv(t,e,Qd,"hour"):e>=Yd?bv(t,e,Yd,"minute"):e>=Xd?bv(t,e,Xd,"second"):t+" ms"}function bv(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var Nr=b(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.hasErrors=fa.Checked=fa.Status=void 0;fa.Status={INFO:"info",WARN:"warn",ERROR:"error"};var Eie=class{constructor(t,e,r){this.tag=t,this.status=e,this.message=r}};fa.Checked=Eie;var Sie=t=>{function e(r){return r.status===fa.Status.ERROR}return t.filter(r=>e(r)).length>0};fa.hasErrors=Sie});var Ik=b(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.parseDid=mu.IProofType=mu.IProofPurpose=void 0;var Tk;(function(t){t.verificationMethod="verificationMethod",t.assertionMethod="assertionMethod",t.authentication="authentication",t.keyAgreement="keyAgreement",t.contractAgreement="contactAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(Tk||(mu.IProofPurpose=Tk={}));var Bk;(function(t){t.Ed25519Signature2018="Ed25519Signature2018",t.Ed25519Signature2020="Ed25519Signature2020",t.EcdsaSecp256k1Signature2019="EcdsaSecp256k1Signature2019",t.EcdsaSecp256k1RecoverySignature2020="EcdsaSecp256k1RecoverySignature2020",t.JsonWebSignature2020="JsonWebSignature2020",t.RsaSignature2018="RsaSignature2018",t.GpgSignature2020="GpgSignature2020",t.JcsEd25519Signature2020="JcsEd25519Signature2020",t.BbsBlsSignatureProof2020="BbsBlsSignatureProof2020",t.BbsBlsBoundSignatureProof2020="BbsBlsBoundSignatureProof2020",t.JwtProof2020="JwtProof2020"})(Bk||(mu.IProofType=Bk={}));var Aie=t=>{let e=xie(t);if(e===null)throw new Error("invalid did");return e};mu.parseDid=Aie;var xie=t=>{let r="(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))",n="([a-z0-9]+)",s=`((?:${r}*:)*(${r}+))`,i="[a-zA-Z0-9_.:%-]",a=`((${`;${i}+=${i}*`})*)`,u="(/[^#?]*)?",c="([?][^#]*)?",l="(#.*)?",d=new RegExp(`^did:${n}:${s}${a}${u}${c}${l}$`);if(t===""||!t)return null;let p=t.match(d);if(p){let f={did:`did:${p[1]}:${p[2]}`,method:p[1],id:p[2],didUrl:t};if(p[4]){let h=p[4].slice(1).split(";");f.params={};for(let m of h){let g=m.split("=");f.params[g[0]]=g[1]}}return p[6]&&(f.path=p[6]),p[7]&&(f.query=p[7].slice(1)),p[8]&&(f.fragment=p[8].slice(1)),f}return null}});var kk=b(Fk=>{"use strict";Object.defineProperty(Fk,"__esModule",{value:!0})});var jk=b(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});ef.DocumentFormat=ef.OriginalType=void 0;var Rk;(function(t){t.JSONLD="json-ld",t.JWT_ENCODED="jwt-encoded",t.JWT_DECODED="jwt-decoded",t.SD_JWT_VC_ENCODED="sd-jwt-vc-encoded",t.SD_JWT_VC_DECODED="sd-jwt-vc-decoded"})(Rk||(ef.OriginalType=Rk={}));var $k;(function(t){t[t.JWT=0]="JWT",t[t.JSONLD=1]="JSONLD",t[t.SD_JWT_VC=2]="SD_JWT_VC",t[t.EIP712=3]="EIP712"})($k||(ef.DocumentFormat=$k={}))});var Mk=b(Nk=>{"use strict";Object.defineProperty(Nk,"__esModule",{value:!0})});var qk=b((MA,qA)=>{(function(t,e){typeof MA=="object"&&typeof qA<"u"?qA.exports=e():typeof define=="function"&&define.amd?define(e):function(){var r=t.Base64,n=e();n.noConflict=function(){return t.Base64=r,n},t.Meteor&&(Base64=n),t.Base64=n}()})(typeof self<"u"?self:typeof window<"u"?window:typeof globalThis<"u"?globalThis:MA,function(){"use strict";var t="3.7.7",e=t,r=typeof Buffer=="function",n=typeof TextDecoder=="function"?new TextDecoder:void 0,s=typeof TextEncoder=="function"?new TextEncoder:void 0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=Array.prototype.slice.call(i),a=function(L){var V={};return L.forEach(function(ie,ue){return V[ie]=ue}),V}(o),u=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,c=String.fromCharCode.bind(String),l=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(L){return new Uint8Array(Array.prototype.slice.call(L,0))},d=function(L){return L.replace(/=/g,"").replace(/[+\/]/g,function(V){return V=="+"?"-":"_"})},p=function(L){return L.replace(/[^A-Za-z0-9\+\/]/g,"")},f=function(L){for(var V,ie,ue,he,ye="",xe=L.length%3,Oe=0;Oe<L.length;){if((ie=L.charCodeAt(Oe++))>255||(ue=L.charCodeAt(Oe++))>255||(he=L.charCodeAt(Oe++))>255)throw new TypeError("invalid character found");V=ie<<16|ue<<8|he,ye+=o[V>>18&63]+o[V>>12&63]+o[V>>6&63]+o[V&63]}return xe?ye.slice(0,xe-3)+"===".substring(xe):ye},h=typeof btoa=="function"?function(L){return btoa(L)}:r?function(L){return Buffer.from(L,"binary").toString("base64")}:f,m=r?function(L){return Buffer.from(L).toString("base64")}:function(L){for(var V=4096,ie=[],ue=0,he=L.length;ue<he;ue+=V)ie.push(c.apply(null,L.subarray(ue,ue+V)));return h(ie.join(""))},g=function(L,V){return V===void 0&&(V=!1),V?d(m(L)):m(L)},_=function(L){if(L.length<2){var V=L.charCodeAt(0);return V<128?L:V<2048?c(192|V>>>6)+c(128|V&63):c(224|V>>>12&15)+c(128|V>>>6&63)+c(128|V&63)}else{var V=65536+(L.charCodeAt(0)-55296)*1024+(L.charCodeAt(1)-56320);return c(240|V>>>18&7)+c(128|V>>>12&63)+c(128|V>>>6&63)+c(128|V&63)}},D=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,v=function(L){return L.replace(D,_)},E=r?function(L){return Buffer.from(L,"utf8").toString("base64")}:s?function(L){return m(s.encode(L))}:function(L){return h(v(L))},S=function(L,V){return V===void 0&&(V=!1),V?d(E(L)):E(L)},P=function(L){return S(L,!0)},C=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,B=function(L){switch(L.length){case 4:var V=(7&L.charCodeAt(0))<<18|(63&L.charCodeAt(1))<<12|(63&L.charCodeAt(2))<<6|63&L.charCodeAt(3),ie=V-65536;return c((ie>>>10)+55296)+c((ie&1023)+56320);case 3:return c((15&L.charCodeAt(0))<<12|(63&L.charCodeAt(1))<<6|63&L.charCodeAt(2));default:return c((31&L.charCodeAt(0))<<6|63&L.charCodeAt(1))}},F=function(L){return L.replace(C,B)},I=function(L){if(L=L.replace(/\s+/g,""),!u.test(L))throw new TypeError("malformed base64.");L+="==".slice(2-(L.length&3));for(var V,ie="",ue,he,ye=0;ye<L.length;)V=a[L.charAt(ye++)]<<18|a[L.charAt(ye++)]<<12|(ue=a[L.charAt(ye++)])<<6|(he=a[L.charAt(ye++)]),ie+=ue===64?c(V>>16&255):he===64?c(V>>16&255,V>>8&255):c(V>>16&255,V>>8&255,V&255);return ie},$=typeof atob=="function"?function(L){return atob(p(L))}:r?function(L){return Buffer.from(L,"base64").toString("binary")}:I,q=r?function(L){return l(Buffer.from(L,"base64"))}:function(L){return l($(L).split("").map(function(V){return V.charCodeAt(0)}))},X=function(L){return q(K(L))},Q=r?function(L){return Buffer.from(L,"base64").toString("utf8")}:n?function(L){return n.decode(q(L))}:function(L){return F($(L))},K=function(L){return p(L.replace(/[-_]/g,function(V){return V=="-"?"+":"/"}))},G=function(L){return Q(K(L))},ne=function(L){if(typeof L!="string")return!1;var V=L.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(V)||!/[^\s0-9a-zA-Z\-_]/.test(V)},U=function(L){return{value:L,enumerable:!1,writable:!0,configurable:!0}},R=function(){var L=function(V,ie){return Object.defineProperty(String.prototype,V,U(ie))};L("fromBase64",function(){return G(this)}),L("toBase64",function(V){return S(this,V)}),L("toBase64URI",function(){return S(this,!0)}),L("toBase64URL",function(){return S(this,!0)}),L("toUint8Array",function(){return X(this)})},j=function(){var L=function(V,ie){return Object.defineProperty(Uint8Array.prototype,V,U(ie))};L("toBase64",function(V){return g(this,V)}),L("toBase64URI",function(){return g(this,!0)}),L("toBase64URL",function(){return g(this,!0)})},W=function(){R(),j()},re={version:t,VERSION:e,atob:$,atobPolyfill:I,btoa:h,btoaPolyfill:f,fromBase64:G,toBase64:S,encode:S,encodeURI:P,encodeURL:P,utob:v,btou:F,decode:G,isValid:ne,fromUint8Array:g,toUint8Array:X,extendString:R,extendUint8Array:j,extendBuiltins:W};return re.Base64={},Object.keys(re).forEach(function(L){return re.Base64[L]=re[L]}),re})});var VA=b((I3e,Jk)=>{"use strict";var UA=Object.defineProperty,Die=Object.getOwnPropertyDescriptor,Cie=Object.getOwnPropertyNames,Pie=Object.prototype.hasOwnProperty,Oie=(t,e)=>{for(var r in e)UA(t,r,{get:e[r],enumerable:!0})},Tie=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Cie(e))!Pie.call(t,s)&&s!==r&&UA(t,s,{get:()=>e[s],enumerable:!(n=Die(e,s))||n.enumerable});return t},Bie=t=>Tie(UA({},"__esModule",{value:!0}),t),Lk=(t,e,r)=>new Promise((n,s)=>{var i=u=>{try{a(r.next(u))}catch(c){s(c)}},o=u=>{try{a(r.throw(u))}catch(c){s(c)}},a=u=>u.done?n(u.value):Promise.resolve(u.value).then(i,o);a((r=r.apply(t,e)).next())}),Uk={};Oie(Uk,{Disclosure:()=>Iie,SDJWTException:()=>Vk,base64urlDecode:()=>LA,base64urlEncode:()=>Kk,uint8ArrayToBase64Url:()=>Yh});Jk.exports=Bie(Uk);var KA=qk(),Kk=KA.Base64.encodeURI,LA=KA.Base64.decode,Yh=t=>KA.Base64.fromUint8Array(t,!0),Vk=class zk extends Error{constructor(e,r){super(e),Object.setPrototypeOf(this,zk.prototype),this.name="SDJWTException",this.details=r}getFullMessage(){return`${this.name}: ${this.message} ${this.details?`- ${JSON.stringify(this.details)}`:""}`}},Iie=class _v{constructor(e,r){if(this._digest=r?.digest,this._encoded=r?.encoded,e.length===2){this.salt=e[0],this.value=e[1];return}if(e.length===3){this.salt=e[0],this.key=e[1],this.value=e[2];return}throw new Vk("Invalid disclosure data")}static fromEncode(e,r){return Lk(this,null,function*(){let{hasher:n,alg:s}=r,i=yield n(e,s),o=Yh(i),a=JSON.parse(LA(e));return _v.fromArray(a,{digest:o,encoded:e})})}static fromEncodeSync(e,r){let{hasher:n,alg:s}=r,i=n(e,s),o=Yh(i),a=JSON.parse(LA(e));return _v.fromArray(a,{digest:o,encoded:e})}static fromArray(e,r){return new _v(e,r)}encode(){return this._encoded||(this._encoded=Kk(JSON.stringify(this.decode()))),this._encoded}decode(){return this.key?[this.salt,this.key,this.value]:[this.salt,this.value]}digest(e){return Lk(this,null,function*(){let{hasher:r,alg:n}=e;if(!this._digest){let s=yield r(this.encode(),n);this._digest=Yh(s)}return this._digest})}digestSync(e){let{hasher:r,alg:n}=e;if(!this._digest){let s=r(this.encode(),n);this._digest=Yh(s)}return this._digest}}});var JA=b((F3e,Wk)=>{"use strict";var zA=Object.defineProperty,Fie=Object.getOwnPropertyDescriptor,kie=Object.getOwnPropertyNames,Rie=Object.prototype.hasOwnProperty,$ie=(t,e)=>{for(var r in e)zA(t,r,{get:e[r],enumerable:!0})},jie=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of kie(e))!Rie.call(t,s)&&s!==r&&zA(t,s,{get:()=>e[s],enumerable:!(n=Fie(e,s))||n.enumerable});return t},Nie=t=>jie(zA({},"__esModule",{value:!0}),t),Hk={};$ie(Hk,{KB_JWT_TYP:()=>Kie,SD_DECOY:()=>Uie,SD_DIGEST:()=>Lie,SD_LIST_KEY:()=>qie,SD_SEPARATOR:()=>Mie});Wk.exports=Nie(Hk);var Mie="~",qie="...",Lie="_sd",Uie="_sd_decoy",Kie="kb+jwt"});var Sv=b((k3e,i6)=>{"use strict";var HA=Object.defineProperty,Vie=Object.getOwnPropertyDescriptor,zie=Object.getOwnPropertyNames,Gk=Object.getOwnPropertySymbols,Zk=Object.prototype.hasOwnProperty,Jie=Object.prototype.propertyIsEnumerable,Xk=(t,e)=>{var r={};for(var n in t)Zk.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Gk)for(var n of Gk(t))e.indexOf(n)<0&&Jie.call(t,n)&&(r[n]=t[n]);return r},Hie=(t,e)=>{for(var r in e)HA(t,r,{get:e[r],enumerable:!0})},Wie=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of zie(e))!Zk.call(t,s)&&s!==r&&HA(t,s,{get:()=>e[s],enumerable:!(n=Vie(e,s))||n.enumerable});return t},Gie=t=>Wie(HA({},"__esModule",{value:!0}),t),Ev=(t,e,r)=>new Promise((n,s)=>{var i=u=>{try{a(r.next(u))}catch(c){s(c)}},o=u=>{try{a(r.throw(u))}catch(c){s(c)}},a=u=>u.done?n(u.value):Promise.resolve(u.value).then(i,o);a((r=r.apply(t,e)).next())}),Yk={};Hie(Yk,{createHashMapping:()=>e6,createHashMappingSync:()=>t6,decodeJwt:()=>ey,decodeSdJwt:()=>Xie,decodeSdJwtSync:()=>Yie,getClaims:()=>Qie,getClaimsSync:()=>ese,getSDAlgAndPayload:()=>ty,splitSdJwt:()=>Zie,unpack:()=>r6,unpackArray:()=>Qk,unpackObj:()=>Zc,unpackSync:()=>n6});i6.exports=Gie(Yk);var Qh=VA(),tf=JA(),ey=t=>{let{0:e,1:r,2:n,length:s}=t.split(".");if(s!==3)throw new Qh.SDJWTException("Invalid JWT as input");return{header:JSON.parse((0,Qh.base64urlDecode)(e)),payload:JSON.parse((0,Qh.base64urlDecode)(r)),signature:n}},Zie=t=>{let[e,...r]=t.split(tf.SD_SEPARATOR);if(r.length===0)return{jwt:e,disclosures:[]};let n=r.pop();return{jwt:e,disclosures:r,kbJwt:n||void 0}},Xie=(t,e)=>Ev(void 0,null,function*(){let[r,...n]=t.split(tf.SD_SEPARATOR),s=ey(r);if(n.length===0)return{jwt:s,disclosures:[]};let i=n.pop(),o=i?ey(i):void 0,{_sd_alg:a}=ty(s.payload),u=yield Promise.all(n.map(c=>Qh.Disclosure.fromEncode(c,{alg:a,hasher:e})));return{jwt:s,disclosures:u,kbJwt:o}}),Yie=(t,e)=>{let[r,...n]=t.split(tf.SD_SEPARATOR),s=ey(r);if(n.length===0)return{jwt:s,disclosures:[]};let i=n.pop(),o=i?ey(i):void 0,{_sd_alg:a}=ty(s.payload),u=n.map(c=>Qh.Disclosure.fromEncodeSync(c,{alg:a,hasher:e}));return{jwt:s,disclosures:u,kbJwt:o}},Qie=(t,e,r)=>Ev(void 0,null,function*(){let{unpackedObj:n}=yield r6(t,e,r);return n}),ese=(t,e,r)=>{let{unpackedObj:n}=n6(t,e,r);return n},Qk=(t,e,r="")=>{let n={},s=[];return t.forEach((i,o)=>{if(typeof i=="object"&&i!==null){let a=i[tf.SD_LIST_KEY];if(a){let u=e[a];if(u){let c=r?`${r}.${o}`:`${o}`;n[c]=a;let{unpackedObj:l,disclosureKeymap:d}=Zc(u.value,e,c);s.push(l),Object.assign(n,d)}}else{let u=r?`${r}.${o}`:`${o}`,{unpackedObj:c,disclosureKeymap:l}=Zc(i,e,u);s.push(c),Object.assign(n,l)}}else s.push(i)}),{unpackedObj:s,disclosureKeymap:n}},Zc=(t,e,r="")=>{let n={};if(typeof t=="object"&&t!==null){if(Array.isArray(t))return Qk(t,e,r);for(let c in t)if(c!==tf.SD_DIGEST&&c!==tf.SD_LIST_KEY&&typeof t[c]=="object"){let l=r?`${r}.${c}`:c,{unpackedObj:d,disclosureKeymap:p}=Zc(t[c],e,l);t[c]=d,Object.assign(n,p)}let s=t,{_sd:i}=s,o=Xk(s,["_sd"]),a={};if(i)for(let c of i){let l=e[c];if(l?.key){let d=r?`${r}.${l.key}`:l.key;n[d]=c;let{unpackedObj:p,disclosureKeymap:f}=Zc(l.value,e,d);a[l.key]=p,Object.assign(n,f)}}return{unpackedObj:Object.assign(o,a),disclosureKeymap:n}}return{unpackedObj:t,disclosureKeymap:n}},e6=(t,e)=>Ev(void 0,null,function*(){let r={};for(let n=0;n<t.length;n++){let s=t[n],i=yield s.digest(e);r[i]=s}return r}),t6=(t,e)=>{let r={};for(let n=0;n<t.length;n++){let s=t[n],i=s.digestSync(e);r[i]=s}return r},ty=t=>{let e=t,{_sd_alg:r}=e,n=Xk(e,["_sd_alg"]);return typeof r!="string"?{_sd_alg:"sha-256",payload:n}:{_sd_alg:r,payload:n}},r6=(t,e,r)=>Ev(void 0,null,function*(){let{_sd_alg:n,payload:s}=ty(t),o=yield e6(e,{hasher:r,alg:n});return Zc(s,o)}),n6=(t,e,r)=>{let{_sd_alg:n,payload:s}=ty(t),o=t6(e,{hasher:r,alg:n});return Zc(s,o)}});var s6=b($i=>{"use strict";var tse=$i&&$i.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty($i,"__esModule",{value:!0});$i.decodeSdJwtVcAsync=$i.decodeSdJwtVc=$i.isWrappedSdJwtVerifiablePresentation=$i.isWrappedSdJwtVerifiableCredential=void 0;var Av=Sv();function rse(t){return t.format==="vc+sd-jwt"}$i.isWrappedSdJwtVerifiableCredential=rse;function nse(t){return t.format==="vc+sd-jwt"}$i.isWrappedSdJwtVerifiablePresentation=nse;function ise(t,e){let{jwt:r,disclosures:n}=(0,Av.decodeSdJwtSync)(t,e),s=r.payload,i=(0,Av.getClaimsSync)(s,n,e);return{compactSdJwtVc:t,decodedPayload:i,disclosures:n.map(o=>{let a=o.key?[o.salt,o.key,o.value]:[o.salt,o.value];if(!o._digest)throw new Error("Implementation error: digest not present in disclosure");return{decoded:a,digest:o._digest,encoded:o.encode()}}),signedPayload:s}}$i.decodeSdJwtVc=ise;function sse(t,e){return tse(this,void 0,void 0,function*(){let{jwt:r,disclosures:n}=yield(0,Av.decodeSdJwt)(t,e),s=r.payload,i=yield(0,Av.getClaims)(s,n,e);return{compactSdJwtVc:t,decodedPayload:i,disclosures:n.map(o=>{let a=o.key?[o.salt,o.key,o.value]:[o.salt,o.value];if(!o._digest)throw new Error("Implementation error: digest not present in disclosure");return{decoded:a,digest:o._digest,encoded:o.encode()}}),signedPayload:s}})}$i.decodeSdJwtVcAsync=sse});var c6=b(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.isWrappedW3CVerifiablePresentation=Zn.isWrappedW3CVerifiableCredential=Zn.StatusListDriverType=Zn.StatusListCredentialIdMode=Zn.StatusListType=Zn.JWT_PROOF_TYPE_2020=void 0;Zn.JWT_PROOF_TYPE_2020="JwtProof2020";var o6;(function(t){t.StatusList2021="StatusList2021"})(o6||(Zn.StatusListType=o6={}));var a6;(function(t){t.ISSUANCE="ISSUANCE",t.PERSISTENCE="PERSISTENCE",t.NEVER="NEVER"})(a6||(Zn.StatusListCredentialIdMode=a6={}));var u6;(function(t){t.AGENT_TYPEORM="agent_typeorm",t.AGENT_KV_STORE="agent_kv_store",t.GITHUB="github",t.AGENT_FILESYSTEM="agent_filesystem"})(u6||(Zn.StatusListDriverType=u6={}));function ose(t){return t.format==="jwt_vc"||t.format==="ldp_vc"}Zn.isWrappedW3CVerifiableCredential=ose;function ase(t){return t.format==="jwt_vp"||t.format==="ldp_vp"}Zn.isWrappedW3CVerifiablePresentation=ase});var WA=b(ji=>{"use strict";var use=ji&&ji.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),rf=ji&&ji.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&use(e,t,r)};Object.defineProperty(ji,"__esModule",{value:!0});rf(Ik(),ji);rf(kk(),ji);rf(jk(),ji);rf(Mk(),ji);rf(s6(),ji);rf(c6(),ji)});var l6=b(xv=>{"use strict";Object.defineProperty(xv,"__esModule",{value:!0});xv.ObjectUtils=void 0;var GA=class t{static asArray(e){return Array.isArray(e)?e:[e]}static isObject(e){return typeof e=="object"||Object.prototype.toString.call(e)==="[object Object]"}static isUrlAbsolute(e){let r=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;t.isString(e)&&r.test(e)}static isString(e){return typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"}};xv.ObjectUtils=GA});var Dv=b(Xc=>{"use strict";var cse=Xc&&Xc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),lse=Xc&&Xc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&cse(e,t,r)};Object.defineProperty(Xc,"__esModule",{value:!0});lse(l6(),Xc)});var h6=b((q3e,p6)=>{"use strict";function XA(t){this.message=t}XA.prototype=new Error,XA.prototype.name="InvalidCharacterError";var d6=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new XA("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,s=0,i=0,o="";n=e.charAt(i++);~n&&(r=s%4?64*r+n:n,s++%4)?o+=String.fromCharCode(255&r>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};function dse(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(d6(r).replace(/(.)/g,function(n,s){var i=s.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}(e)}catch{return d6(e)}}function ry(t){this.message=t}function f6(t,e){if(typeof t!="string")throw new ry("Invalid token specified");var r=(e=e||{}).header===!0?0:1;try{return JSON.parse(dse(t.split(".")[r]))}catch(n){throw new ry("Invalid token specified: "+n.message)}}ry.prototype=new Error,ry.prototype.name="InvalidTokenError";var ZA=f6;ZA.default=f6,ZA.InvalidTokenError=ry,p6.exports=ZA});var m6=b(gu=>{"use strict";var y6=gu&&gu.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},fse=gu&&gu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gu,"__esModule",{value:!0});gu.CredentialMapper=void 0;var nf=fse(h6()),cr=WA(),YA=Dv(),Yc=class t{static decodeSdJwtVcAsync(e,r){return(0,cr.decodeSdJwtVcAsync)(e,r)}static decodeVerifiablePresentation(e,r){var n;if(t.isJwtEncoded(e)){let s=(0,nf.default)(e),i=(0,nf.default)(e,{header:!0});return s.vp.proof={type:cr.IProofType.JwtProof2020,created:s.nbf,proofPurpose:cr.IProofPurpose.authentication,verificationMethod:(n=i.kid)!==null&&n!==void 0?n:s.iss,jwt:e},s}else{if(t.isJwtDecodedPresentation(e))return e;if(t.isSdJwtEncoded(e)){if(!r)throw new Error("Hasher implementation is required to decode SD-JWT");return(0,cr.decodeSdJwtVc)(e,r)}else return t.isSdJwtDecodedCredential(e)?e:t.isJsonLdAsString(e)?JSON.parse(e):e}}static decodeVerifiableCredential(e,r){var n;if(t.isJwtEncoded(e)){let s=(0,nf.default)(e),i=(0,nf.default)(e,{header:!0});return s.vc.proof={type:cr.IProofType.JwtProof2020,created:s.nbf,proofPurpose:cr.IProofPurpose.authentication,verificationMethod:(n=i.kid)!==null&&n!==void 0?n:s.iss,jwt:e},s}else{if(t.isJwtDecodedCredential(e))return e;if(t.isJsonLdAsString(e))return JSON.parse(e);if(t.isSdJwtEncoded(e)){if(!r)throw new Error("Hasher implementation is required to decode SD-JWT");return(0,cr.decodeSdJwtVc)(e,r)}else return t.isSdJwtDecodedCredential(e),e}}static toWrappedVerifiablePresentation(e,r){if(t.isSdJwtDecodedCredential(e)||t.isSdJwtEncoded(e)){let f;if(t.isSdJwtEncoded(e)){if(!r?.hasher)throw new Error("Hasher implementation is required to decode SD-JWT");f=(0,cr.decodeSdJwtVc)(e,r.hasher)}else f=e;return{type:t.isSdJwtDecodedCredential(e)?cr.OriginalType.SD_JWT_VC_DECODED:cr.OriginalType.SD_JWT_VC_ENCODED,format:"vc+sd-jwt",original:e,presentation:f,decoded:f.decodedPayload,vcs:[t.toWrappedVerifiableCredential(e,r)]}}let n=t.getFirstProof(e),s=typeof e!="string"&&t.hasJWTProofType(e)?n?.jwt:e;if(!s)throw Error("Could not determine original presentation, probably it was a converted JWT presentation, that is now missing the JWT value in the proof");let i=t.decodeVerifiablePresentation(s),o=t.isJwtEncoded(s),a=t.isJwtDecodedPresentation(s),u=o?cr.OriginalType.JWT_ENCODED:a?cr.OriginalType.JWT_DECODED:cr.OriginalType.JSONLD,c=a||o?"jwt_vp":"ldp_vp",l;if(o||a?l=t.jwtDecodedPresentationToUniformPresentation(i,!1,r):l=i,!l||!("verifiableCredential"in l)||!l.verifiableCredential||l.verifiableCredential.length===0)throw Error("VP needs to have at least one verifiable credential at this point");let d=t.toWrappedVerifiableCredentials(l.verifiableCredential,r),p=Object.assign(Object.assign({},l),{verifiableCredential:d});return{type:u,format:c,original:s,decoded:i,presentation:p,vcs:d}}static toWrappedVerifiableCredentials(e,r){return e.map(n=>t.toWrappedVerifiableCredential(n,r))}static toWrappedVerifiableCredential(e,r){var n;if(t.isSdJwtDecodedCredential(e)||t.isSdJwtEncoded(e)){let p;if(t.isSdJwtEncoded(e)){if(!r?.hasher)throw new Error("Hasher implementation is required to decode SD-JWT");p=(0,cr.decodeSdJwtVc)(e,r.hasher)}else p=e;return{type:t.isSdJwtDecodedCredential(e)?cr.OriginalType.SD_JWT_VC_DECODED:cr.OriginalType.SD_JWT_VC_ENCODED,format:"vc+sd-jwt",original:e,credential:p,decoded:p.decodedPayload}}let s=t.getFirstProof(e),i=t.hasJWTProofType(e)&&s&&(n=s.jwt)!==null&&n!==void 0?n:e;if(!i)throw Error("Could not determine original credential, probably it was a converted JWT credential, that is now missing the JWT value in the proof");let o=t.decodeVerifiableCredential(i),a=t.isJwtEncoded(i),u=t.isJwtDecodedCredential(i),c=a?cr.OriginalType.JWT_ENCODED:u?cr.OriginalType.JWT_DECODED:cr.OriginalType.JSONLD,l=a||u?t.jwtDecodedCredentialToUniformCredential(o,r):o;return{original:i,decoded:o,format:a||u?"jwt_vc":"ldp_vc",type:c,credential:l}}static isJwtEncoded(e){return YA.ObjectUtils.isString(e)&&e.startsWith("ey")&&!e.includes("~")}static isSdJwtEncoded(e){return YA.ObjectUtils.isString(e)&&e.startsWith("ey")&&e.includes("~")}static isW3cCredential(e){var r;return"@context"in e&&(((r=e.type)===null||r===void 0?void 0:r.includes("VerifiableCredential"))||!1)}static isCredential(e){try{if(t.isJwtEncoded(e)){let r=t.toUniformCredential(e);return t.isW3cCredential(r)}else if(t.isSdJwtEncoded(e))return!0;return t.isW3cCredential(e)||t.isSdJwtDecodedCredentialPayload(e)||t.isJwtDecodedCredential(e)||t.isSdJwtDecodedCredential(e)}catch{return!1}}static isPresentation(e){try{if(t.isJwtEncoded(e)){let r=t.toUniformPresentation(e);return t.isW3cPresentation(r)}else if(t.isSdJwtEncoded(e))return!1;return t.isW3cPresentation(e)||t.isSdJwtDecodedCredentialPayload(e)||t.isJwtDecodedPresentation(e)||t.isSdJwtDecodedCredential(e)}catch{return!1}}static hasProof(e){try{return t.isJwtEncoded(e)||t.isJwtDecodedCredential(e)||t.isSdJwtEncoded(e)||t.isSdJwtDecodedCredential(e)||"vc"in e&&e.vc.proof||"vp"in e&&e.vp.proof?!0:!!e.proof}catch{return!1}}static isW3cPresentation(e){var r;return"@context"in e&&(((r=e.type)===null||r===void 0?void 0:r.includes("VerifiablePresentation"))||!1)}static isSdJwtDecodedCredentialPayload(e){return"vct"in e}static areOriginalVerifiableCredentialsEqual(e,r){return typeof e=="string"||typeof r=="string"?e===r:t.isSdJwtDecodedCredential(e)||t.isSdJwtDecodedCredential(r)?e.compactSdJwtVc===r.compactSdJwtVc:JSON.stringify(r.proof)===JSON.stringify(e.proof)}static isJsonLdAsString(e){return YA.ObjectUtils.isString(e)&&e.includes("@context")}static isSdJwtDecodedCredential(e){return e.compactSdJwtVc!==void 0}static isJwtDecodedCredential(e){return e.vc!==void 0&&e.iss!==void 0}static isJwtDecodedPresentation(e){return e.vp!==void 0&&e.iss!==void 0}static jwtEncodedPresentationToUniformPresentation(e,r=!0,n){return t.jwtDecodedPresentationToUniformPresentation((0,nf.default)(e),r,n)}static jwtDecodedPresentationToUniformPresentation(e,r=!0,n){let{iss:s,aud:i,jti:o,vp:a}=e,u=y6(e,["iss","aud","jti","vp"]),c=Object.assign(Object.assign({},u),a);if(r){if(!a.verifiableCredential)throw Error("Verifiable Presentation should have a verifiable credential at this point");c.verifiableCredential=a.verifiableCredential.map(l=>t.toUniformCredential(l,n))}if(s){let l=c.holder;if(l&&l!==s)throw new Error(`Inconsistent holders between JWT claim (${s}) and VC value (${l})`);c.holder=s}if(i){let l=c.verifier;if(l&&l!==i)throw new Error(`Inconsistent holders between JWT claim (${i}) and VC value (${l})`);c.verifier=i}if(o){let l=c.id;if(l&&l!==o)throw new Error(`Inconsistent VP ids between JWT claim (${o}) and VP value (${l})`);c.id=o}return c}static toUniformCredential(e,r){var n;if(t.isSdJwtDecodedCredential(e))throw new Error("Converting SD-JWT VC to uniform VC is not supported.");let s=typeof e!="string"&&t.hasJWTProofType(e)?(n=t.getFirstProof(e))===null||n===void 0?void 0:n.jwt:e;if(!s)throw Error("Could not determine original credential from passed in credential. Probably because a JWT proof type was present, but now is not available anymore");let i=t.decodeVerifiableCredential(s),o=t.isJwtEncoded(s);return t.isJwtDecodedCredential(s)||o?t.jwtDecodedCredentialToUniformCredential(i,r):i}static toUniformPresentation(e,r){var n;if(t.isSdJwtDecodedCredential(e))throw new Error("Converting SD-JWT VC to uniform VP is not supported.");let s=t.getFirstProof(e),i=typeof e!="string"&&t.hasJWTProofType(e)?s?.jwt:e;if(!i)throw Error("Could not determine original presentation, probably it was a converted JWT presentation, that is now missing the JWT value in the proof");let o=t.decodeVerifiablePresentation(i),a=t.isJwtEncoded(i),u=t.isJwtDecodedPresentation(i),c=a||u?t.jwtDecodedPresentationToUniformPresentation(o,!1):o;return r?.addContextIfMissing&&!c["@context"]&&(c["@context"]=["https://www.w3.org/2018/credentials/v1"]),c.verifiableCredential=(n=c.verifiableCredential)===null||n===void 0?void 0:n.map(l=>t.toUniformCredential(l,r)),c}static jwtEncodedCredentialToUniformCredential(e,r){return t.jwtDecodedCredentialToUniformCredential((0,nf.default)(e),r)}static jwtDecodedCredentialToUniformCredential(e,r){var n;let{exp:s,nbf:i,iss:o,vc:a,sub:u,jti:c}=e,l=y6(e,["exp","nbf","iss","vc","sub","jti"]),d=Object.assign(Object.assign({},l),a),p=(n=r?.maxTimeSkewInMS)!==null&&n!==void 0?n:1500;if(s){let f=d.expirationDate,h=parseInt(s.toString()),m=h<9999999999?new Date(h*1e3).toISOString().replace(/\.000Z/,"Z"):new Date(h).toISOString();if(f&&f!==m){let g=Math.abs(new Date(m).getTime()-new Date(f).getTime());if(!p||g>p)throw new Error(`Inconsistent expiration dates between JWT claim (${m}) and VC value (${f})`)}d.expirationDate=m}if(i){let f=d.issuanceDate,h=parseInt(i.toString()),m=h<9999999999?new Date(h*1e3).toISOString().replace(/\.000Z/,"Z"):new Date(h).toISOString();if(f&&f!==m){let g=Math.abs(new Date(m).getTime()-new Date(f).getTime());if(!p||g>p)throw new Error(`Inconsistent issuance dates between JWT claim (${m}) and VC value (${f})`)}d.issuanceDate=m}if(o){let f=d.issuer;if(f){if(typeof f=="string"){if(f!==o)throw new Error(`Inconsistent issuers between JWT claim (${o}) and VC value (${f})`)}else if(!f.id&&Object.keys(f).length>0&&(f.id=o),f.id!==o)throw new Error(`Inconsistent issuers between JWT claim (${o}) and VC value (${f.id})`)}else d.issuer=o}if(u){let f=Array.isArray(d.credentialSubject)?d.credentialSubject:[d.credentialSubject];for(let h=0;h<f.length;h++){let m=f[h].id;if(m&&m!==u)throw new Error(`Inconsistent credential subject ids between JWT claim (${u}) and VC value (${m})`);Array.isArray(d.credentialSubject)?d.credentialSubject[h].id=u:d.credentialSubject.id=u}}if(c){let f=d.id;if(f&&f!==c)throw new Error(`Inconsistent credential ids between JWT claim (${c}) and VC value (${f})`);d.id=c}return d}static toExternalVerifiableCredential(e){let r;if(e.proof){if(!e.proof.type)throw new Error("Verifiable credential proof is missing a type");if(!e.proof.created)throw new Error("Verifiable credential proof is missing a created date");if(!e.proof.proofPurpose)throw new Error("Verifiable credential proof is missing a proof purpose");if(!e.proof.verificationMethod)throw new Error("Verifiable credential proof is missing a verification method");r=Object.assign(Object.assign({},e.proof),{type:e.proof.type,created:e.proof.created,proofPurpose:e.proof.proofPurpose,verificationMethod:e.proof.verificationMethod})}return Object.assign(Object.assign({},e),{type:e.type?typeof e.type=="string"?[e.type]:e.type:["VerifiableCredential"],proof:r})}static storedCredentialToOriginalFormat(e){let r=t.detectDocumentType(e);if(typeof e=="string"){if(r===0)return t.toCompactJWT(e);if(r===1)return JSON.parse(e)}else{if(r===0&&"vc"in e)return t.toCompactJWT(e);if("proof"in e&&e.proof.type==="JwtProof2020"&&e.proof.jwt)return e.proof.jwt}return e}static storedPresentationToOriginalFormat(e){let r=t.detectDocumentType(e);if(typeof e=="string"){if(r===0)return t.toCompactJWT(e);if(r===1)return JSON.parse(e)}else{if(r===0&&"vp"in e)return t.toCompactJWT(e);if("proof"in e&&e.proof.type==="JwtProof2020"&&e.proof.jwt)return e.proof.jwt}return e}static toCompactJWT(e){if(!e||t.detectDocumentType(e)!==0)throw Error("Cannot convert non JWT credential to JWT");if(typeof e=="string")return e;let r;if("vp"in e?r="jwt"in e.vp.proof?e.vp.proof.jwt:e.vp.proof:"vc"in e?r="jwt"in e.vc.proof?e.vc.proof.jwt:e.vc.proof:r=Array.isArray(e.proof)?e.proof[0].jwt:e.proof.jwt,!r)throw Error("Could not get JWT from supplied document");return r}static detectDocumentType(e){if(this.isJsonLdAsString(e))return 1;if(this.isJwtEncoded(e))return 0;if(this.isSdJwtEncoded(e)||this.isSdJwtDecodedCredential(e))return 2;let r="vc"in e?e.vc.proof:"vp"in e?e.vp.proof:e.proof,n=Array.isArray(r)?r[0]:r;return n?.jwt?0:n?.type==="EthereumEip712Signature2021"?3:1}static hasJWTProofType(e){var r;return typeof e=="string"?!1:!!(!((r=t.getFirstProof(e))===null||r===void 0)&&r.jwt)}static getFirstProof(e){if(!e||typeof e=="string")return;let r="vc"in e?e.vc.proof:"vp"in e?e.vp.proof:e.proof;return Array.isArray(r)?r[0]:r}};gu.CredentialMapper=Yc;Yc.isWrappedSdJwtVerifiableCredential=cr.isWrappedSdJwtVerifiableCredential;Yc.isWrappedSdJwtVerifiablePresentation=cr.isWrappedSdJwtVerifiablePresentation;Yc.isWrappedW3CVerifiableCredential=cr.isWrappedW3CVerifiableCredential;Yc.isWrappedW3CVerifiablePresentation=cr.isWrappedW3CVerifiablePresentation});var g6=b(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.mapLanguageValues=pr.mapLanguageValue=pr.toLanguageValueObjects=pr.toLanguageValueObject=pr.isLanguageValueObjects=pr.isLanguageValueObject=void 0;var QA=Dv(),pse=t=>{if(!t||!QA.ObjectUtils.isObject(t)||Array.isArray(t)||Object.keys(t).length!==2)return!1;if("language"in t&&t.language){if(!("value"in t&&t.value))return!1}else return!1;return!0};pr.isLanguageValueObject=pse;var hse=t=>!t||!Array.isArray(t)?!1:t.every(e=>(0,pr.isLanguageValueObject)(e));pr.isLanguageValueObjects=hse;var yse=t=>(0,pr.isLanguageValueObject)(t)?t:void 0;pr.toLanguageValueObject=yse;var mse=t=>{if((0,pr.isLanguageValueObject)(t))return QA.ObjectUtils.asArray((0,pr.toLanguageValueObject)(t));if((0,pr.isLanguageValueObjects)(t))return t};pr.toLanguageValueObjects=mse;var gse=(t,e)=>{let r=(0,pr.toLanguageValueObjects)(t);if(Array.isArray(r)){if(r.length===0)return t;let n=r.filter(i=>e?.language?i.language.toLowerCase().includes(e.language.toLowerCase()):!0),s;if(n.length>0)s=n[0];else{if(e?.fallbackToFirstObject===!1)return t;s=r[0]}return s.value}return t};pr.mapLanguageValue=gse;var vse=(t,e)=>{let r=e?.noDeepClone?t:JSON.parse(JSON.stringify(t));return Object.keys(t).forEach(n=>{r[n]=(0,pr.mapLanguageValue)(r[n],e),(QA.ObjectUtils.isObject(r[n])||Array.isArray(r[n]))&&(r[n]=(0,pr.mapLanguageValues)(r[n],Object.assign(Object.assign({},e),{noDeepClone:!0})))}),r};pr.mapLanguageValues=vse});var b6=b(vu=>{"use strict";var bse=vu&&vu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),v6=vu&&vu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&bse(e,t,r)};Object.defineProperty(vu,"__esModule",{value:!0});v6(m6(),vu);v6(g6(),vu)});var ys=b(pa=>{"use strict";var wse=pa&&pa.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ex=pa&&pa.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&wse(e,t,r)};Object.defineProperty(pa,"__esModule",{value:!0});ex(WA(),pa);ex(Dv(),pa);ex(b6(),pa)});var _6=b(w6=>{"use strict";Object.defineProperty(w6,"__esModule",{value:!0})});var E6=b(Cv=>{"use strict";Object.defineProperty(Cv,"__esModule",{value:!0});Cv.HandlerCheckResult=void 0;var _se=class{constructor(t,e,r,n,s,i){this.input_descriptor_path=t,this.verifiable_credential_path=e,this.evaluator=r,this.status=n,this.message=s,this.payload=i}};Cv.HandlerCheckResult=_se});var A6=b(S6=>{"use strict";Object.defineProperty(S6,"__esModule",{value:!0})});var D6=b(x6=>{"use strict";Object.defineProperty(x6,"__esModule",{value:!0})});var C6=b(uo=>{"use strict";var Ese=uo&&uo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Pv=uo&&uo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ese(e,t,r)};Object.defineProperty(uo,"__esModule",{value:!0});Pv(_6(),uo);Pv(E6(),uo);Pv(A6(),uo);Pv(D6(),uo)});var ms=b(rx=>{"use strict";Object.defineProperty(rx,"__esModule",{value:!0});var tx;(function(t){t.INPUT_CANDIDATE_DOESNT_CONTAIN_PROPERTY="Input candidate does not contain property",t.INPUT_CANDIDATE_FAILED_FILTER_EVALUATION="Input candidate failed filter evaluation",t.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION="The input candidate is eligible for submission",t.INPUT_CANDIDATE_IS_NOT_ELIGIBLE_FOR_PRESENTATION_SUBMISSION="The input candidate is not eligible for submission",t.INPUT_DESCRIPTOR_CONTEXT_CONTAINS_HASHLINK_VERIFICATION_NOT_SUPPORTED="Input descriptor contains hashlink. This version doesn't support hashlink verification.",t.LIMIT_DISCLOSURE_APPLIED="added variable in the limit_disclosure to the verifiableCredential",t.LIMIT_DISCLOSURE_NOT_SUPPORTED="Limit disclosure not supported",t.SUBJECT_IS_NOT_ISSUER="subject is not issuer",t.SUBJECT_IS_ISSUER="subject is issuer",t.FORMAT_RESTRICTION_PASSED="the Credential format of the candidate inputs matches the required formats",t.FORMAT_RESTRICTION_DIDNT_PASS="the Credential format of the candidate inputs didn't match the required formats",t.URI_EVALUATION_PASSED="@context URI(s) for the schema of the candidate input is equal to one of the input_descriptors object uri values.",t.URI_EVALUATION_DIDNT_PASS="@context URI for the of the candidate input MUST be equal to one of the input_descriptors object uri values exactly.",t.UNKNOWN_EXCEPTION="unknown exception occurred: ",t.VERIFIABLE_CREDENTIAL_MANDATORY_FIELD_NOT_PRESENT="mandatory field not present in the verifiableCredential"})(tx||(tx={}));rx.default=tx});var z6=b(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.version=Ae.parse=Ae.tokenize=Ae.Syntax=void 0;var fe,vs,I6,bu,pe,ox,ax,ce,$t,N,We,st,Nt,Y,de,Pe,ee;fe={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};vs={};vs[fe.BooleanLiteral]="Boolean";vs[fe.EOF]="<end>";vs[fe.Identifier]="Identifier";vs[fe.Keyword]="Keyword";vs[fe.NullLiteral]="Null";vs[fe.NumericLiteral]="Numeric";vs[fe.Punctuator]="Punctuator";vs[fe.StringLiteral]="String";vs[fe.RegularExpression]="RegularExpression";I6=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="];Ae.Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};bu={Data:1,Get:2,Set:4};pe={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};ox={NonAsciiIdentifierStart:new RegExp("[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]"),NonAsciiIdentifierPart:new RegExp("[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]")};function sy(t,e){if(!t)throw new Error("ASSERT: "+e)}function ha(t){return t>=48&&t<=57}function F6(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function ny(t){return"01234567".indexOf(t)>=0}function Sse(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function el(t){return t===10||t===13||t===8232||t===8233}function of(t){return t==64||t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&ox.NonAsciiIdentifierStart.test(String.fromCharCode(t))}function Tv(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&ox.NonAsciiIdentifierPart.test(String.fromCharCode(t))}function Ase(t){switch(t){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function oy(t){switch(t){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function Ni(t){return t==="eval"||t==="arguments"}function xse(t){if($t&&oy(t))return!0;switch(t.length){case 2:return t==="if"||t==="in"||t==="do";case 3:return t==="var"||t==="for"||t==="new"||t==="try"||t==="let";case 4:return t==="this"||t==="else"||t==="case"||t==="void"||t==="with"||t==="enum";case 5:return t==="while"||t==="break"||t==="catch"||t==="throw"||t==="const"||t==="yield"||t==="class"||t==="super";case 6:return t==="return"||t==="typeof"||t==="delete"||t==="switch"||t==="export"||t==="import";case 7:return t==="default"||t==="finally"||t==="extends";case 8:return t==="function"||t==="continue"||t==="debugger";case 10:return t==="instanceof";default:return!1}}function sx(t,e,r,n,s){var i,o;sy(typeof r=="number","Comment must have valid position"),!(Pe.lastCommentStart>=r)&&(Pe.lastCommentStart=r,i={type:t,value:e},ee.range&&(i.range=[r,n]),ee.loc&&(i.loc=s),ee.comments.push(i),ee.attachComment&&(ee.leadingComments.push(i),ee.trailingComments.push(i)))}function nx(t){var e,r,n,s;for(e=N-t,r={start:{line:We,column:N-st-t}};N<Nt;)if(n=ce.charCodeAt(N),++N,el(n)){ee.comments&&(s=ce.slice(e+t,N-1),r.end={line:We,column:N-st-1},sx("Line",s,e,N-1,r)),n===13&&ce.charCodeAt(N)===10&&++N,++We,st=N;return}ee.comments&&(s=ce.slice(e+t,N),r.end={line:We,column:N-st},sx("Line",s,e,N,r))}function Dse(){var t,e,r,n;for(ee.comments&&(t=N-2,e={start:{line:We,column:N-st-2}});N<Nt;)if(r=ce.charCodeAt(N),el(r))r===13&&ce.charCodeAt(N+1)===10&&++N,++We,++N,st=N,N>=Nt&&tt({},pe.UnexpectedToken,"ILLEGAL");else if(r===42){if(ce.charCodeAt(N+1)===47){++N,++N,ee.comments&&(n=ce.slice(t+2,N-2),e.end={line:We,column:N-st},sx("Block",n,t,N,e));return}++N}else++N;tt({},pe.UnexpectedToken,"ILLEGAL")}function wu(){var t,e;for(e=N===0;N<Nt;)if(t=ce.charCodeAt(N),Sse(t))++N;else if(el(t))++N,t===13&&ce.charCodeAt(N)===10&&++N,++We,st=N,e=!0;else if(t===47)if(t=ce.charCodeAt(N+1),t===47)++N,++N,nx(2),e=!0;else if(t===42)++N,++N,Dse();else break;else if(e&&t===45)if(ce.charCodeAt(N+1)===45&&ce.charCodeAt(N+2)===62)N+=3,nx(3);else break;else if(t===60)if(ce.slice(N+1,N+4)==="!--")++N,++N,++N,++N,nx(4);else break;else break}function Bv(t){var e,r,n,s=0;for(r=t==="u"?4:2,e=0;e<r;++e)if(N<Nt&&F6(ce[N]))n=ce[N++],s=s*16+"0123456789abcdef".indexOf(n.toLowerCase());else return"";return String.fromCharCode(s)}function k6(){var t,e;for(t=ce.charCodeAt(N++),e=String.fromCharCode(t),t===92&&(ce.charCodeAt(N)!==117&&tt({},pe.UnexpectedToken,"ILLEGAL"),++N,t=Bv("u"),(!t||t==="\\"||!of(t.charCodeAt(0)))&&tt({},pe.UnexpectedToken,"ILLEGAL"),e=t);N<Nt&&(t=ce.charCodeAt(N),!!Tv(t));)++N,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),ce.charCodeAt(N)!==117&&tt({},pe.UnexpectedToken,"ILLEGAL"),++N,t=Bv("u"),(!t||t==="\\"||!Tv(t.charCodeAt(0)))&&tt({},pe.UnexpectedToken,"ILLEGAL"),e+=t);return e}function Cse(){var t,e;for(t=N++;N<Nt;){if(e=ce.charCodeAt(N),e===92)return N=t,k6();if(Tv(e))++N;else break}return ce.slice(t,N)}function Pse(){var t,e,r;return t=N,e=ce.charCodeAt(N)===92?k6():Cse(),e.length===1?r=fe.Identifier:xse(e)?r=fe.Keyword:e==="null"?r=fe.NullLiteral:e==="true"||e==="false"?r=fe.BooleanLiteral:r=fe.Identifier,{type:r,value:e,lineNumber:We,lineStart:st,start:t,end:N}}function ya(){var t=N,e=ce.charCodeAt(N),r,n=ce[N],s,i,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++N,ee.tokenize&&(e===40?ee.openParenToken=ee.tokens.length:e===123&&(ee.openCurlyToken=ee.tokens.length)),{type:fe.Punctuator,value:String.fromCharCode(e),lineNumber:We,lineStart:st,start:t,end:N};default:if(r=ce.charCodeAt(N+1),r===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return N+=2,{type:fe.Punctuator,value:String.fromCharCode(e)+String.fromCharCode(r),lineNumber:We,lineStart:st,start:t,end:N};case 33:case 61:return N+=2,ce.charCodeAt(N)===61&&++N,{type:fe.Punctuator,value:ce.slice(t,N),lineNumber:We,lineStart:st,start:t,end:N}}}if(o=ce.substr(N,4),o===">>>=")return N+=4,{type:fe.Punctuator,value:o,lineNumber:We,lineStart:st,start:t,end:N};if(i=o.substr(0,3),i===">>>"||i==="<<="||i===">>=")return N+=3,{type:fe.Punctuator,value:i,lineNumber:We,lineStart:st,start:t,end:N};if(s=i.substr(0,2),n===s[1]&&"+-<>&|".indexOf(n)>=0||s==="=>")return N+=2,{type:fe.Punctuator,value:s,lineNumber:We,lineStart:st,start:t,end:N};if("<>=!+-*%&|^/".indexOf(n)>=0)return++N,{type:fe.Punctuator,value:n,lineNumber:We,lineStart:st,start:t,end:N};tt({},pe.UnexpectedToken,"ILLEGAL")}function Ose(t){for(var e="";N<Nt&&F6(ce[N]);)e+=ce[N++];return e.length===0&&tt({},pe.UnexpectedToken,"ILLEGAL"),of(ce.charCodeAt(N))&&tt({},pe.UnexpectedToken,"ILLEGAL"),{type:fe.NumericLiteral,value:parseInt("0x"+e,16),lineNumber:We,lineStart:st,start:t,end:N}}function Tse(t){for(var e="0"+ce[N++];N<Nt&&ny(ce[N]);)e+=ce[N++];return(of(ce.charCodeAt(N))||ha(ce.charCodeAt(N)))&&tt({},pe.UnexpectedToken,"ILLEGAL"),{type:fe.NumericLiteral,value:parseInt(e,8),octal:!0,lineNumber:We,lineStart:st,start:t,end:N}}function P6(){var t,e,r;if(r=ce[N],sy(ha(r.charCodeAt(0))||r===".","Numeric literal must start with a decimal digit or a decimal point"),e=N,t="",r!=="."){if(t=ce[N++],r=ce[N],t==="0"){if(r==="x"||r==="X")return++N,Ose(e);if(ny(r))return Tse(e);r&&ha(r.charCodeAt(0))&&tt({},pe.UnexpectedToken,"ILLEGAL")}for(;ha(ce.charCodeAt(N));)t+=ce[N++];r=ce[N]}if(r==="."){for(t+=ce[N++];ha(ce.charCodeAt(N));)t+=ce[N++];r=ce[N]}if(r==="e"||r==="E")if(t+=ce[N++],r=ce[N],(r==="+"||r==="-")&&(t+=ce[N++]),ha(ce.charCodeAt(N)))for(;ha(ce.charCodeAt(N));)t+=ce[N++];else tt({},pe.UnexpectedToken,"ILLEGAL");return of(ce.charCodeAt(N))&&tt({},pe.UnexpectedToken,"ILLEGAL"),{type:fe.NumericLiteral,value:parseFloat(t),lineNumber:We,lineStart:st,start:e,end:N}}function Bse(){var t="",e,r,n,s,i,o,a=!1,u,c;for(u=We,c=st,e=ce[N],sy(e==="'"||e==='"',"String literal must starts with a quote"),r=N,++N;N<Nt;)if(n=ce[N++],n===e){e="";break}else if(n==="\\")if(n=ce[N++],!n||!el(n.charCodeAt(0)))switch(n){case"u":case"x":o=N,i=Bv(n),i?t+=i:(N=o,t+=n);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:ny(n)?(s="01234567".indexOf(n),s!==0&&(a=!0),N<Nt&&ny(ce[N])&&(a=!0,s=s*8+"01234567".indexOf(ce[N++]),"0123".indexOf(n)>=0&&N<Nt&&ny(ce[N])&&(s=s*8+"01234567".indexOf(ce[N++]))),t+=String.fromCharCode(s)):t+=n;break}else++We,n==="\r"&&ce[N]===`
`&&++N,st=N;else{if(el(n.charCodeAt(0)))break;t+=n}return e!==""&&tt({},pe.UnexpectedToken,"ILLEGAL"),{type:fe.StringLiteral,value:t,octal:a,startLineNumber:u,startLineStart:c,lineNumber:We,lineStart:st,start:r,end:N}}function Ise(t,e){var r;try{r=new RegExp(t,e)}catch{tt({},pe.InvalidRegExp)}return r}function Fse(){var t,e,r,n,s;for(t=ce[N],sy(t==="/","Regular expression literal must start with a slash"),e=ce[N++],r=!1,n=!1;N<Nt;)if(t=ce[N++],e+=t,t==="\\")t=ce[N++],el(t.charCodeAt(0))&&tt({},pe.UnterminatedRegExp),e+=t;else if(el(t.charCodeAt(0)))tt({},pe.UnterminatedRegExp);else if(r)t==="]"&&(r=!1);else if(t==="/"){n=!0;break}else t==="["&&(r=!0);return n||tt({},pe.UnterminatedRegExp),s=e.substr(1,e.length-2),{value:s,literal:e}}function kse(){var t,e,r,n;for(e="",r="";N<Nt&&(t=ce[N],!!Tv(t.charCodeAt(0)));)if(++N,t==="\\"&&N<Nt)if(t=ce[N],t==="u"){if(++N,n=N,t=Bv("u"),t)for(r+=t,e+="\\u";n<N;++n)e+=ce[n];else N=n,r+="u",e+="\\u";jt({},pe.UnexpectedToken,"ILLEGAL")}else e+="\\",jt({},pe.UnexpectedToken,"ILLEGAL");else r+=t,e+=t;return{value:r,literal:e}}function R6(){var t,e,r,n,s;return de=null,wu(),t=N,e=Fse(),r=kse(),s=Ise(e.value,r.value),ee.tokenize?{type:fe.RegularExpression,value:s,lineNumber:We,lineStart:st,start:t,end:N}:{literal:e.literal+r.literal,value:s,start:t,end:N}}function Qc(){var t,e,r,n;return wu(),t=N,e={start:{line:We,column:N-st}},r=R6(),e.end={line:We,column:N-st},ee.tokenize||(ee.tokens.length>0&&(n=ee.tokens[ee.tokens.length-1],n.range[0]===t&&n.type==="Punctuator"&&(n.value==="/"||n.value==="/=")&&ee.tokens.pop()),ee.tokens.push({type:"RegularExpression",value:r.literal,range:[t,N],loc:e})),r}function Rse(t){return t.type===fe.Identifier||t.type===fe.Keyword||t.type===fe.BooleanLiteral||t.type===fe.NullLiteral}function $se(){var t,e;if(t=ee.tokens[ee.tokens.length-1],!t)return Qc();if(t.type==="Punctuator"){if(t.value==="]")return ya();if(t.value===")")return e=ee.tokens[ee.openParenToken-1],e&&e.type==="Keyword"&&(e.value==="if"||e.value==="while"||e.value==="for"||e.value==="with")?Qc():ya();if(t.value==="}"){if(ee.tokens[ee.openCurlyToken-3]&&ee.tokens[ee.openCurlyToken-3].type==="Keyword"){if(e=ee.tokens[ee.openCurlyToken-4],!e)return ya()}else if(ee.tokens[ee.openCurlyToken-4]&&ee.tokens[ee.openCurlyToken-4].type==="Keyword"){if(e=ee.tokens[ee.openCurlyToken-5],!e)return Qc()}else return ya();return I6.indexOf(e.value)>=0?ya():Qc()}return Qc()}return t.type==="Keyword"?Qc():ya()}function ux(){var t;return wu(),N>=Nt?{type:fe.EOF,lineNumber:We,lineStart:st,start:N,end:N}:(t=ce.charCodeAt(N),of(t)?Pse():t===40||t===41||t===59?ya():t===39||t===34?Bse():t===46?ha(ce.charCodeAt(N+1))?P6():ya():ha(t)?P6():ee.tokenize&&t===47?$se():ya())}function $6(){var t,e,r,n;return wu(),t={start:{line:We,column:N-st}},e=ux(),t.end={line:We,column:N-st},e.type!==fe.EOF&&(n=ce.slice(e.start,e.end),ee.tokens.push({type:vs[e.type],value:n,range:[e.start,e.end],loc:t})),e}function et(){var t;return t=de,N=t.end,We=t.lineNumber,st=t.lineStart,de=typeof ee.tokens<"u"?$6():ux(),N=t.end,We=t.lineNumber,st=t.lineStart,t}function cx(){var t,e,r;t=N,e=We,r=st,de=typeof ee.tokens<"u"?$6():ux(),N=t,We=e,st=r}function O6(t,e){this.line=t,this.column=e}function jse(t,e,r,n){this.start=new O6(t,e),this.end=new O6(r,n)}ax={name:"SyntaxTree",processComment:function(t){var e,r;if(!(t.type===Ae.Syntax.Program&&t.body.length>0)){for(ee.trailingComments.length>0?ee.trailingComments[0].range[0]>=t.range[1]?(r=ee.trailingComments,ee.trailingComments=[]):ee.trailingComments.length=0:ee.bottomRightStack.length>0&&ee.bottomRightStack[ee.bottomRightStack.length-1].trailingComments&&ee.bottomRightStack[ee.bottomRightStack.length-1].trailingComments[0].range[0]>=t.range[1]&&(r=ee.bottomRightStack[ee.bottomRightStack.length-1].trailingComments,delete ee.bottomRightStack[ee.bottomRightStack.length-1].trailingComments);ee.bottomRightStack.length>0&&ee.bottomRightStack[ee.bottomRightStack.length-1].range[0]>=t.range[0];)e=ee.bottomRightStack.pop();e?e.leadingComments&&e.leadingComments[e.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=e.leadingComments,delete e.leadingComments):ee.leadingComments.length>0&&ee.leadingComments[ee.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=ee.leadingComments,ee.leadingComments=[]),r&&(t.trailingComments=r),ee.bottomRightStack.push(t)}},markEnd:function(t,e){return ee.range&&(t.range=[e.start,N]),ee.loc&&(t.loc=new jse(e.startLineNumber===void 0?e.lineNumber:e.startLineNumber,e.start-(e.startLineStart===void 0?e.lineStart:e.startLineStart),We,N-st),this.postProcess(t)),ee.attachComment&&this.processComment(t),t},postProcess:function(t){return ee.source&&(t.loc.source=ee.source),t},createArrayExpression:function(t){return{type:Ae.Syntax.ArrayExpression,elements:t}},createAssignmentExpression:function(t,e,r){return{type:Ae.Syntax.AssignmentExpression,operator:t,left:e,right:r}},createBinaryExpression:function(t,e,r){var n=t==="||"||t==="&&"?Ae.Syntax.LogicalExpression:Ae.Syntax.BinaryExpression;return{type:n,operator:t,left:e,right:r}},createBlockStatement:function(t){return{type:Ae.Syntax.BlockStatement,body:t}},createBreakStatement:function(t){return{type:Ae.Syntax.BreakStatement,label:t}},createCallExpression:function(t,e){return{type:Ae.Syntax.CallExpression,callee:t,arguments:e}},createCatchClause:function(t,e){return{type:Ae.Syntax.CatchClause,param:t,body:e}},createConditionalExpression:function(t,e,r){return{type:Ae.Syntax.ConditionalExpression,test:t,consequent:e,alternate:r}},createContinueStatement:function(t){return{type:Ae.Syntax.ContinueStatement,label:t}},createDebuggerStatement:function(){return{type:Ae.Syntax.DebuggerStatement}},createDoWhileStatement:function(t,e){return{type:Ae.Syntax.DoWhileStatement,body:t,test:e}},createEmptyStatement:function(){return{type:Ae.Syntax.EmptyStatement}},createExpressionStatement:function(t){return{type:Ae.Syntax.ExpressionStatement,expression:t}},createForStatement:function(t,e,r,n){return{type:Ae.Syntax.ForStatement,init:t,test:e,update:r,body:n}},createForInStatement:function(t,e,r){return{type:Ae.Syntax.ForInStatement,left:t,right:e,body:r,each:!1}},createFunctionDeclaration:function(t,e,r,n){return{type:Ae.Syntax.FunctionDeclaration,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(t,e,r,n){return{type:Ae.Syntax.FunctionExpression,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(t){return{type:Ae.Syntax.Identifier,name:t}},createIfStatement:function(t,e,r){return{type:Ae.Syntax.IfStatement,test:t,consequent:e,alternate:r}},createLabeledStatement:function(t,e){return{type:Ae.Syntax.LabeledStatement,label:t,body:e}},createLiteral:function(t){return{type:Ae.Syntax.Literal,value:t.value,raw:ce.slice(t.start,t.end)}},createMemberExpression:function(t,e,r){return{type:Ae.Syntax.MemberExpression,computed:t==="[",object:e,property:r}},createNewExpression:function(t,e){return{type:Ae.Syntax.NewExpression,callee:t,arguments:e}},createObjectExpression:function(t){return{type:Ae.Syntax.ObjectExpression,properties:t}},createPostfixExpression:function(t,e){return{type:Ae.Syntax.UpdateExpression,operator:t,argument:e,prefix:!1}},createProgram:function(t){return{type:Ae.Syntax.Program,body:t}},createProperty:function(t,e,r){return{type:Ae.Syntax.Property,key:e,value:r,kind:t}},createReturnStatement:function(t){return{type:Ae.Syntax.ReturnStatement,argument:t}},createSequenceExpression:function(t){return{type:Ae.Syntax.SequenceExpression,expressions:t}},createSwitchCase:function(t,e){return{type:Ae.Syntax.SwitchCase,test:t,consequent:e}},createSwitchStatement:function(t,e){return{type:Ae.Syntax.SwitchStatement,discriminant:t,cases:e}},createThisExpression:function(){return{type:Ae.Syntax.ThisExpression}},createThrowStatement:function(t){return{type:Ae.Syntax.ThrowStatement,argument:t}},createTryStatement:function(t,e,r,n){return{type:Ae.Syntax.TryStatement,block:t,guardedHandlers:e,handlers:r,finalizer:n}},createUnaryExpression:function(t,e){return t==="++"||t==="--"?{type:Ae.Syntax.UpdateExpression,operator:t,argument:e,prefix:!0}:{type:Ae.Syntax.UnaryExpression,operator:t,argument:e,prefix:!0}},createVariableDeclaration:function(t,e){return{type:Ae.Syntax.VariableDeclaration,declarations:t,kind:e}},createVariableDeclarator:function(t,e){return{type:Ae.Syntax.VariableDeclarator,id:t,init:e}},createWhileStatement:function(t,e){return{type:Ae.Syntax.WhileStatement,test:t,body:e}},createWithStatement:function(t,e){return{type:Ae.Syntax.WithStatement,object:t,body:e}}};function ay(){var t,e,r,n;return t=N,e=We,r=st,wu(),n=We!==e,N=t,We=e,st=r,n}function tt(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var s,i=e.replace(/%(\d)/g,function(o,a){return sy(a<r.length,"Message reference must be in range"),r[a]});throw typeof t.lineNumber=="number"?(s=new Error("Line "+t.lineNumber+": "+i),s.index=t.start,s.lineNumber=t.lineNumber,s.column=t.start-st+1):(s=new Error("Line "+We+": "+i),s.index=N,s.lineNumber=We,s.column=N-st+1),s.description=i,s}function jt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{tt.apply(null,t)}catch(r){if(ee.errors)ee.errors.push(r);else throw r}}function co(t){if(t.type===fe.EOF&&tt(t,pe.UnexpectedEOS),t.type===fe.NumericLiteral&&tt(t,pe.UnexpectedNumber),t.type===fe.StringLiteral&&tt(t,pe.UnexpectedString),t.type===fe.Identifier&&tt(t,pe.UnexpectedIdentifier),t.type===fe.Keyword){if(Ase(t.value))tt(t,pe.UnexpectedReserved);else if($t&&oy(t.value)){jt(t,pe.StrictReservedWord);return}tt(t,pe.UnexpectedToken,t.value)}tt(t,pe.UnexpectedToken,t.value)}function Me(t){var e=et();(e.type!==fe.Punctuator||e.value!==t)&&co(e)}function Tr(t){var e=et();(e.type!==fe.Keyword||e.value!==t)&&co(e)}function $e(t){return de.type===fe.Punctuator&&de.value===t}function an(t){return de.type===fe.Keyword&&de.value===t}function Nse(){var t;return de.type!==fe.Punctuator?!1:(t=de.value,t==="="||t==="*="||t==="/="||t==="%="||t==="+="||t==="-="||t==="<<="||t===">>="||t===">>>="||t==="&="||t==="^="||t==="|=")}function lo(){var t;if(ce.charCodeAt(N)===59||$e(";")){et();return}t=We,wu(),We===t&&de.type!==fe.EOF&&!$e("}")&&co(de)}function Fv(t){return t.type===Ae.Syntax.Identifier||t.type===Ae.Syntax.MemberExpression}function Mse(){var t=[],e;for(e=de,Me("[");!$e("]");)$e(",")?(et(),t.push(null)):(t.push(gs()),$e("]")||Me(","));return et(),Y.markEnd(Y.createArrayExpression(t),e)}function ix(t,e){var r,n,s;return r=$t,s=de,n=dx(),e&&$t&&Ni(t[0].name)&&jt(e,pe.StrictParamName),$t=r,Y.markEnd(Y.createFunctionExpression(null,t,[],n),s)}function Ov(){var t,e;return e=de,t=et(),t.type===fe.StringLiteral||t.type===fe.NumericLiteral?($t&&t.octal&&jt(t,pe.StrictOctalLiteral),Y.markEnd(Y.createLiteral(t),e)):Y.markEnd(Y.createIdentifier(t.value),e)}function qse(){var t,e,r,n,s,i;if(t=de,i=de,t.type===fe.Identifier)return r=Ov(),t.value==="get"&&!$e(":")?(e=Ov(),Me("("),Me(")"),n=ix([]),Y.markEnd(Y.createProperty("get",e,n),i)):t.value==="set"&&!$e(":")?(e=Ov(),Me("("),t=de,t.type!==fe.Identifier?(Me(")"),jt(t,pe.UnexpectedToken,t.value),n=ix([])):(s=[_u()],Me(")"),n=ix(s,t)),Y.markEnd(Y.createProperty("set",e,n),i)):(Me(":"),n=gs(),Y.markEnd(Y.createProperty("init",r,n),i));if(t.type===fe.EOF||t.type===fe.Punctuator)co(t);else return e=Ov(),Me(":"),n=gs(),Y.markEnd(Y.createProperty("init",e,n),i)}function Lse(){var t=[],e,r,n,s,i={},o=String,a;for(a=de,Me("{");!$e("}");)e=qse(),e.key.type===Ae.Syntax.Identifier?r=e.key.name:r=o(e.key.value),s=e.kind==="init"?bu.Data:e.kind==="get"?bu.Get:bu.Set,n="$"+r,Object.prototype.hasOwnProperty.call(i,n)?(i[n]===bu.Data?$t&&s===bu.Data?jt({},pe.StrictDuplicateProperty):s!==bu.Data&&jt({},pe.AccessorDataProperty):s===bu.Data?jt({},pe.AccessorDataProperty):i[n]&s&&jt({},pe.AccessorGetSet),i[n]|=s):i[n]=s,t.push(e),$e("}")||Me(",");return Me("}"),Y.markEnd(Y.createObjectExpression(t),a)}function Use(){var t;return Me("("),t=Jr(),Me(")"),t}function j6(){var t,e,r,n;if($e("("))return Use();if($e("["))return Mse();if($e("{"))return Lse();if(t=de.type,n=de,t===fe.Identifier)r=Y.createIdentifier(et().value);else if(t===fe.StringLiteral||t===fe.NumericLiteral)$t&&de.octal&&jt(de,pe.StrictOctalLiteral),r=Y.createLiteral(et());else if(t===fe.Keyword){if(an("function"))return yoe();an("this")?(et(),r=Y.createThisExpression()):co(et())}else t===fe.BooleanLiteral?(e=et(),e.value=e.value==="true",r=Y.createLiteral(e)):t===fe.NullLiteral?(e=et(),e.value=null,r=Y.createLiteral(e)):$e("/")||$e("/=")?(typeof ee.tokens<"u"?r=Y.createLiteral(Qc()):r=Y.createLiteral(R6()),cx()):co(et());return Y.markEnd(r,n)}function N6(){var t=[];if(Me("("),!$e(")"))for(;N<Nt&&(t.push(gs()),!$e(")"));)Me(",");return Me(")"),t}function Kse(){var t,e;return e=de,t=et(),Rse(t)||co(t),Y.markEnd(Y.createIdentifier(t.value),e)}function M6(){return Me("."),Kse()}function q6(){var t;return Me("["),t=Jr(),Me("]"),t}function L6(){var t,e,r;return r=de,Tr("new"),t=zse(),e=$e("(")?N6():[],Y.markEnd(Y.createNewExpression(t,e),r)}function Vse(){var t,e,r,n,s;for(s=de,t=Pe.allowIn,Pe.allowIn=!0,e=an("new")?L6():j6(),Pe.allowIn=t;;){if($e("."))n=M6(),e=Y.createMemberExpression(".",e,n);else if($e("("))r=N6(),e=Y.createCallExpression(e,r);else if($e("["))n=q6(),e=Y.createMemberExpression("[",e,n);else break;Y.markEnd(e,s)}return e}function zse(){var t,e,r,n;for(n=de,t=Pe.allowIn,e=an("new")?L6():j6(),Pe.allowIn=t;$e(".")||$e("[");)$e("[")?(r=q6(),e=Y.createMemberExpression("[",e,r)):(r=M6(),e=Y.createMemberExpression(".",e,r)),Y.markEnd(e,n);return e}function T6(){var t,e,r=de;return t=Vse(),de.type===fe.Punctuator&&($e("++")||$e("--"))&&!ay()&&($t&&t.type===Ae.Syntax.Identifier&&Ni(t.name)&&jt({},pe.StrictLHSPostfix),Fv(t)||jt({},pe.InvalidLHSInAssignment),e=et(),t=Y.markEnd(Y.createPostfixExpression(e.value,t),r)),t}function sf(){var t,e,r;return de.type!==fe.Punctuator&&de.type!==fe.Keyword?e=T6():$e("++")||$e("--")?(r=de,t=et(),e=sf(),$t&&e.type===Ae.Syntax.Identifier&&Ni(e.name)&&jt({},pe.StrictLHSPrefix),Fv(e)||jt({},pe.InvalidLHSInAssignment),e=Y.createUnaryExpression(t.value,e),e=Y.markEnd(e,r)):$e("+")||$e("-")||$e("~")||$e("!")?(r=de,t=et(),e=sf(),e=Y.createUnaryExpression(t.value,e),e=Y.markEnd(e,r)):an("delete")||an("void")||an("typeof")?(r=de,t=et(),e=sf(),e=Y.createUnaryExpression(t.value,e),e=Y.markEnd(e,r),$t&&e.operator==="delete"&&e.argument.type===Ae.Syntax.Identifier&&jt({},pe.StrictDelete)):e=T6(),e}function B6(t,e){var r=0;if(t.type!==fe.Punctuator&&t.type!==fe.Keyword)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=e?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break;default:break}return r}function Jse(){var t,e,r,n,s,i,o,a,u,c;if(t=de,u=sf(),n=de,s=B6(n,Pe.allowIn),s===0)return u;for(n.prec=s,et(),e=[t,de],o=sf(),i=[u,n,o];(s=B6(de,Pe.allowIn))>0;){for(;i.length>2&&s<=i[i.length-2].prec;)o=i.pop(),a=i.pop().value,u=i.pop(),r=Y.createBinaryExpression(a,u,o),e.pop(),t=e[e.length-1],Y.markEnd(r,t),i.push(r);n=et(),n.prec=s,i.push(n),e.push(de),r=sf(),i.push(r)}for(c=i.length-1,r=i[c],e.pop();c>1;)r=Y.createBinaryExpression(i[c-1].value,i[c-2],r),c-=2,t=e.pop(),Y.markEnd(r,t);return r}function Hse(){var t,e,r,n,s;return s=de,t=Jse(),$e("?")&&(et(),e=Pe.allowIn,Pe.allowIn=!0,r=gs(),Pe.allowIn=e,Me(":"),n=gs(),t=Y.createConditionalExpression(t,r,n),Y.markEnd(t,s)),t}function gs(){var t,e,r,n,s;return t=de,s=de,n=e=Hse(),Nse()&&(Fv(e)||jt({},pe.InvalidLHSInAssignment),$t&&e.type===Ae.Syntax.Identifier&&Ni(e.name)&&jt(t,pe.StrictLHSAssignment),t=et(),r=gs(),n=Y.markEnd(Y.createAssignmentExpression(t.value,e,r),s)),n}function Jr(){var t,e=de;if(t=gs(),$e(",")){for(t=Y.createSequenceExpression([t]);N<Nt&&$e(",");)et(),t.expressions.push(gs());Y.markEnd(t,e)}return t}function Wse(){for(var t=[],e;N<Nt&&!($e("}")||(e=iy(),typeof e>"u"));)t.push(e);return t}function Iv(){var t,e;return e=de,Me("{"),t=Wse(),Me("}"),Y.markEnd(Y.createBlockStatement(t),e)}function _u(){var t,e;return e=de,t=et(),t.type!==fe.Identifier&&co(t),Y.markEnd(Y.createIdentifier(t.value),e)}function Gse(t){var e=null,r,n;return n=de,r=_u(),$t&&Ni(r.name)&&jt({},pe.StrictVarName),t==="const"?(Me("="),e=gs()):$e("=")&&(et(),e=gs()),Y.markEnd(Y.createVariableDeclarator(r,e),n)}function lx(t){var e=[];do{if(e.push(Gse(t)),!$e(","))break;et()}while(N<Nt);return e}function Zse(){var t;return Tr("var"),t=lx(),lo(),Y.createVariableDeclaration(t,"var")}function Xse(t){var e,r;return r=de,Tr(t),e=lx(t),lo(),Y.markEnd(Y.createVariableDeclaration(e,t),r)}function Yse(){return Me(";"),Y.createEmptyStatement()}function Qse(){var t=Jr();return lo(),Y.createExpressionStatement(t)}function eoe(){var t,e,r;return Tr("if"),Me("("),t=Jr(),Me(")"),e=fo(),an("else")?(et(),r=fo()):r=null,Y.createIfStatement(t,e,r)}function toe(){var t,e,r;return Tr("do"),r=Pe.inIteration,Pe.inIteration=!0,t=fo(),Pe.inIteration=r,Tr("while"),Me("("),e=Jr(),Me(")"),$e(";")&&et(),Y.createDoWhileStatement(t,e)}function roe(){var t,e,r;return Tr("while"),Me("("),t=Jr(),Me(")"),r=Pe.inIteration,Pe.inIteration=!0,e=fo(),Pe.inIteration=r,Y.createWhileStatement(t,e)}function noe(){var t,e,r;return r=de,t=et(),e=lx(),Y.markEnd(Y.createVariableDeclaration(e,t.value),r)}function ioe(){var t,e,r,n,s,i,o;return t=e=r=null,Tr("for"),Me("("),$e(";")?et():(an("var")||an("let")?(Pe.allowIn=!1,t=noe(),Pe.allowIn=!0,t.declarations.length===1&&an("in")&&(et(),n=t,s=Jr(),t=null)):(Pe.allowIn=!1,t=Jr(),Pe.allowIn=!0,an("in")&&(Fv(t)||jt({},pe.InvalidLHSInForIn),et(),n=t,s=Jr(),t=null)),typeof n>"u"&&Me(";")),typeof n>"u"&&($e(";")||(e=Jr()),Me(";"),$e(")")||(r=Jr())),Me(")"),o=Pe.inIteration,Pe.inIteration=!0,i=fo(),Pe.inIteration=o,typeof n>"u"?Y.createForStatement(t,e,r,i):Y.createForInStatement(n,s,i)}function soe(){var t=null,e;return Tr("continue"),ce.charCodeAt(N)===59?(et(),Pe.inIteration||tt({},pe.IllegalContinue),Y.createContinueStatement(null)):ay()?(Pe.inIteration||tt({},pe.IllegalContinue),Y.createContinueStatement(null)):(de.type===fe.Identifier&&(t=_u(),e="$"+t.name,Object.prototype.hasOwnProperty.call(Pe.labelSet,e)||tt({},pe.UnknownLabel,t.name)),lo(),t===null&&!Pe.inIteration&&tt({},pe.IllegalContinue),Y.createContinueStatement(t))}function ooe(){var t=null,e;return Tr("break"),ce.charCodeAt(N)===59?(et(),Pe.inIteration||Pe.inSwitch||tt({},pe.IllegalBreak),Y.createBreakStatement(null)):ay()?(Pe.inIteration||Pe.inSwitch||tt({},pe.IllegalBreak),Y.createBreakStatement(null)):(de.type===fe.Identifier&&(t=_u(),e="$"+t.name,Object.prototype.hasOwnProperty.call(Pe.labelSet,e)||tt({},pe.UnknownLabel,t.name)),lo(),t===null&&!(Pe.inIteration||Pe.inSwitch)&&tt({},pe.IllegalBreak),Y.createBreakStatement(t))}function aoe(){var t=null;return Tr("return"),Pe.inFunctionBody||jt({},pe.IllegalReturn),ce.charCodeAt(N)===32&&of(ce.charCodeAt(N+1))?(t=Jr(),lo(),Y.createReturnStatement(t)):ay()?Y.createReturnStatement(null):($e(";")||!$e("}")&&de.type!==fe.EOF&&(t=Jr()),lo(),Y.createReturnStatement(t))}function uoe(){var t,e;return $t&&(wu(),jt({},pe.StrictModeWith)),Tr("with"),Me("("),t=Jr(),Me(")"),e=fo(),Y.createWithStatement(t,e)}function coe(){var t,e=[],r,n;for(n=de,an("default")?(et(),t=null):(Tr("case"),t=Jr()),Me(":");N<Nt&&!($e("}")||an("default")||an("case"));)r=fo(),e.push(r);return Y.markEnd(Y.createSwitchCase(t,e),n)}function loe(){var t,e,r,n,s;if(Tr("switch"),Me("("),t=Jr(),Me(")"),Me("{"),e=[],$e("}"))return et(),Y.createSwitchStatement(t,e);for(n=Pe.inSwitch,Pe.inSwitch=!0,s=!1;N<Nt&&!$e("}");)r=coe(),r.test===null&&(s&&tt({},pe.MultipleDefaultsInSwitch),s=!0),e.push(r);return Pe.inSwitch=n,Me("}"),Y.createSwitchStatement(t,e)}function doe(){var t;return Tr("throw"),ay()&&tt({},pe.NewlineAfterThrow),t=Jr(),lo(),Y.createThrowStatement(t)}function foe(){var t,e,r;return r=de,Tr("catch"),Me("("),$e(")")&&co(de),t=_u(),$t&&Ni(t.name)&&jt({},pe.StrictCatchVariable),Me(")"),e=Iv(),Y.markEnd(Y.createCatchClause(t,e),r)}function poe(){var t,e=[],r=null;return Tr("try"),t=Iv(),an("catch")&&e.push(foe()),an("finally")&&(et(),r=Iv()),e.length===0&&!r&&tt({},pe.NoCatchOrFinally),Y.createTryStatement(t,[],e,r)}function hoe(){return Tr("debugger"),lo(),Y.createDebuggerStatement()}function fo(){var t=de.type,e,r,n,s;if(t===fe.EOF&&co(de),t===fe.Punctuator&&de.value==="{")return Iv();if(s=de,t===fe.Punctuator)switch(de.value){case";":return Y.markEnd(Yse(),s);case"(":return Y.markEnd(Qse(),s);default:break}if(t===fe.Keyword)switch(de.value){case"break":return Y.markEnd(ooe(),s);case"continue":return Y.markEnd(soe(),s);case"debugger":return Y.markEnd(hoe(),s);case"do":return Y.markEnd(toe(),s);case"for":return Y.markEnd(ioe(),s);case"function":return Y.markEnd(K6(),s);case"if":return Y.markEnd(eoe(),s);case"return":return Y.markEnd(aoe(),s);case"switch":return Y.markEnd(loe(),s);case"throw":return Y.markEnd(doe(),s);case"try":return Y.markEnd(poe(),s);case"var":return Y.markEnd(Zse(),s);case"while":return Y.markEnd(roe(),s);case"with":return Y.markEnd(uoe(),s);default:break}return e=Jr(),e.type===Ae.Syntax.Identifier&&$e(":")?(et(),n="$"+e.name,Object.prototype.hasOwnProperty.call(Pe.labelSet,n)&&tt({},pe.Redeclaration,"Label",e.name),Pe.labelSet[n]=!0,r=fo(),delete Pe.labelSet[n],Y.markEnd(Y.createLabeledStatement(e,r),s)):(lo(),Y.markEnd(Y.createExpressionStatement(e),s))}function dx(){var t,e=[],r,n,s,i,o,a,u,c;for(c=de,Me("{");N<Nt&&!(de.type!==fe.StringLiteral||(r=de,t=iy(),e.push(t),t.expression.type!==Ae.Syntax.Literal));)n=ce.slice(r.start+1,r.end-1),n==="use strict"?($t=!0,s&&jt(s,pe.StrictOctalLiteral)):!s&&r.octal&&(s=r);for(i=Pe.labelSet,o=Pe.inIteration,a=Pe.inSwitch,u=Pe.inFunctionBody,Pe.labelSet={},Pe.inIteration=!1,Pe.inSwitch=!1,Pe.inFunctionBody=!0;N<Nt&&!($e("}")||(t=iy(),typeof t>"u"));)e.push(t);return Me("}"),Pe.labelSet=i,Pe.inIteration=o,Pe.inSwitch=a,Pe.inFunctionBody=u,Y.markEnd(Y.createBlockStatement(e),c)}function U6(t){var e,r=[],n,s,i,o,a;if(Me("("),!$e(")"))for(i={};N<Nt&&(n=de,e=_u(),o="$"+n.value,$t?(Ni(n.value)&&(s=n,a=pe.StrictParamName),Object.prototype.hasOwnProperty.call(i,o)&&(s=n,a=pe.StrictParamDupe)):t||(Ni(n.value)?(t=n,a=pe.StrictParamName):oy(n.value)?(t=n,a=pe.StrictReservedWord):Object.prototype.hasOwnProperty.call(i,o)&&(t=n,a=pe.StrictParamDupe)),r.push(e),i[o]=!0,!$e(")"));)Me(",");return Me(")"),{params:r,stricted:s,firstRestricted:t,message:a}}function K6(){var t,e=[],r,n,s,i,o,a,u,c;return c=de,Tr("function"),n=de,t=_u(),$t?Ni(n.value)&&jt(n,pe.StrictFunctionName):Ni(n.value)?(o=n,a=pe.StrictFunctionName):oy(n.value)&&(o=n,a=pe.StrictReservedWord),i=U6(o),e=i.params,s=i.stricted,o=i.firstRestricted,i.message&&(a=i.message),u=$t,r=dx(),$t&&o&&tt(o,a),$t&&s&&jt(s,a),$t=u,Y.markEnd(Y.createFunctionDeclaration(t,e,[],r),c)}function yoe(){var t,e=null,r,n,s,i,o=[],a,u,c;return c=de,Tr("function"),$e("(")||(t=de,e=_u(),$t?Ni(t.value)&&jt(t,pe.StrictFunctionName):Ni(t.value)?(n=t,s=pe.StrictFunctionName):oy(t.value)&&(n=t,s=pe.StrictReservedWord)),i=U6(n),o=i.params,r=i.stricted,n=i.firstRestricted,i.message&&(s=i.message),u=$t,a=dx(),$t&&n&&tt(n,s),$t&&r&&jt(r,s),$t=u,Y.markEnd(Y.createFunctionExpression(e,o,[],a),c)}function iy(){if(de.type===fe.Keyword)switch(de.value){case"const":case"let":return Xse(de.value);case"function":return K6();default:return fo()}if(de.type!==fe.EOF)return fo()}function moe(){for(var t,e=[],r,n,s;N<Nt&&(r=de,!(r.type!==fe.StringLiteral||(t=iy(),e.push(t),t.expression.type!==Ae.Syntax.Literal)));)n=ce.slice(r.start+1,r.end-1),n==="use strict"?($t=!0,s&&jt(s,pe.StrictOctalLiteral)):!s&&r.octal&&(s=r);for(;N<Nt&&(t=iy(),!(typeof t>"u"));)e.push(t);return e}function goe(){var t,e;return wu(),cx(),e=de,$t=!1,t=moe(),Y.markEnd(Y.createProgram(t),e)}function V6(){var t,e,r,n=[];for(t=0;t<ee.tokens.length;++t)e=ee.tokens[t],r={type:e.type,value:e.value},ee.range&&(r.range=e.range),ee.loc&&(r.loc=e.loc),n.push(r);ee.tokens=n}function voe(t,e){var r,n,s;r=String,typeof t!="string"&&!(t instanceof String)&&(t=r(t)),Y=ax,ce=t,N=0,We=ce.length>0?1:0,st=0,Nt=ce.length,de=null,Pe={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},ee={},e=e||{},e.tokens=!0,ee.tokens=[],ee.tokenize=!0,ee.openParenToken=-1,ee.openCurlyToken=-1,ee.range=typeof e.range=="boolean"&&e.range,ee.loc=typeof e.loc=="boolean"&&e.loc,typeof e.comment=="boolean"&&e.comment&&(ee.comments=[]),typeof e.tolerant=="boolean"&&e.tolerant&&(ee.errors=[]);try{if(cx(),de.type===fe.EOF)return ee.tokens;for(n=et();de.type!==fe.EOF;)try{n=et()}catch(i){if(n=de,ee.errors){ee.errors.push(i);break}else throw i}V6(),s=ee.tokens,typeof ee.comments<"u"&&(s.comments=ee.comments),typeof ee.errors<"u"&&(s.errors=ee.errors)}catch(i){throw i}finally{ee={}}return s}Ae.tokenize=voe;function boe(t,e){var r,n;n=String,typeof t!="string"&&!(t instanceof String)&&(t=n(t)),Y=ax,ce=t,N=0,We=ce.length>0?1:0,st=0,Nt=ce.length,de=null,Pe={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},ee={},typeof e<"u"&&(ee.range=typeof e.range=="boolean"&&e.range,ee.loc=typeof e.loc=="boolean"&&e.loc,ee.attachComment=typeof e.attachComment=="boolean"&&e.attachComment,ee.loc&&e.source!==null&&e.source!==void 0&&(ee.source=n(e.source)),typeof e.tokens=="boolean"&&e.tokens&&(ee.tokens=[]),typeof e.comment=="boolean"&&e.comment&&(ee.comments=[]),typeof e.tolerant=="boolean"&&e.tolerant&&(ee.errors=[]),ee.attachComment&&(ee.range=!0,ee.comments=[],ee.bottomRightStack=[],ee.trailingComments=[],ee.leadingComments=[]));try{r=goe(),typeof ee.comments<"u"&&(r.comments=ee.comments),typeof ee.tokens<"u"&&(V6(),r.tokens=ee.tokens),typeof ee.errors<"u"&&(r.errors=ee.errors)}catch(s){throw s}finally{ee={}}return r}Ae.parse=boe;Ae.version="1.2.2"});var J6=b(kv=>{"use strict";Object.defineProperty(kv,"__esModule",{value:!0});kv.slice=void 0;function woe(t,e,r,n){function s(u){return String(u).match(/^[0-9]+$/)?parseInt(u):Number.isFinite(u)?parseInt(u,10):0}if(typeof e=="string")throw new Error("start cannot be a string");if(typeof r=="string")throw new Error("end cannot be a string");if(typeof n=="string")throw new Error("step cannot be a string");var i=t.length;if(n===0)throw new Error("step cannot be zero");if(n=n?s(n):1,e=e<0?i+e:e,r=r<0?i+r:r,e=s(e===0?0:e||(n>0?0:i-1)),r=s(r===0?0:r||(n>0?i:-1)),e=n>0?Math.max(0,e):Math.min(i,e),r=n>0?Math.min(r,i):Math.max(-1,r),n>0&&r<=e)return[];if(n<0&&e<=r)return[];for(var o=[],a=e;a!=r&&!(n<0&&a<=r||n>0&&a>=r);a+=n)o.push(t[a]);return o}kv.slice=woe});var H6=b((e5e,_oe)=>{_oe.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"4.3.0",engines:{node:">=4.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/estraverse.git"},devDependencies:{"babel-preset-env":"^1.6.1","babel-register":"^6.3.13",chai:"^2.1.1",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.3.0",jshint:"^2.5.6",mocha:"^2.1.0"},license:"BSD-2-Clause",scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers js:babel-register"}}});var G6=b(W6=>{(function t(e){"use strict";var r,n,s,i,o,a;function u(v){var E={},S,P;for(S in v)v.hasOwnProperty(S)&&(P=v[S],typeof P=="object"&&P!==null?E[S]=u(P):E[S]=P);return E}function c(v,E){var S,P,C,B;for(P=v.length,C=0;P;)S=P>>>1,B=C+S,E(v[B])?P=S:(C=B+1,P-=S+1);return C}r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},s={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},i={},o={},a={},n={Break:i,Skip:o,Remove:a};function l(v,E){this.parent=v,this.key=E}l.prototype.replace=function(E){this.parent[this.key]=E},l.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function d(v,E,S,P){this.node=v,this.path=E,this.wrap=S,this.ref=P}function p(){}p.prototype.path=function(){var E,S,P,C,B,F;function I($,q){if(Array.isArray(q))for(P=0,C=q.length;P<C;++P)$.push(q[P]);else $.push(q)}if(!this.__current.path)return null;for(B=[],E=2,S=this.__leavelist.length;E<S;++E)F=this.__leavelist[E],I(B,F.path);return I(B,this.__current.path),B},p.prototype.type=function(){var v=this.current();return v.type||this.__current.wrap},p.prototype.parents=function(){var E,S,P;for(P=[],E=1,S=this.__leavelist.length;E<S;++E)P.push(this.__leavelist[E].node);return P},p.prototype.current=function(){return this.__current.node},p.prototype.__execute=function(E,S){var P,C;return C=void 0,P=this.__current,this.__current=S,this.__state=null,E&&(C=E.call(this,S.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=P,C},p.prototype.notify=function(E){this.__state=E},p.prototype.skip=function(){this.notify(o)},p.prototype.break=function(){this.notify(i)},p.prototype.remove=function(){this.notify(a)},p.prototype.__initialize=function(v,E){this.visitor=E,this.root=v,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,E.fallback==="iteration"?this.__fallback=Object.keys:typeof E.fallback=="function"&&(this.__fallback=E.fallback),this.__keys=s,E.keys&&(this.__keys=Object.assign(Object.create(this.__keys),E.keys))};function f(v){return v==null?!1:typeof v=="object"&&typeof v.type=="string"}function h(v,E){return(v===r.ObjectExpression||v===r.ObjectPattern)&&E==="properties"}p.prototype.traverse=function(E,S){var P,C,B,F,I,$,q,X,Q,K,G,ne;for(this.__initialize(E,S),ne={},P=this.__worklist,C=this.__leavelist,P.push(new d(E,null,null,null)),C.push(new d(null,null,null,null));P.length;){if(B=P.pop(),B===ne){if(B=C.pop(),$=this.__execute(S.leave,B),this.__state===i||$===i)return;continue}if(B.node){if($=this.__execute(S.enter,B),this.__state===i||$===i)return;if(P.push(ne),C.push(B),this.__state===o||$===o)continue;if(F=B.node,I=F.type||B.wrap,K=this.__keys[I],!K)if(this.__fallback)K=this.__fallback(F);else throw new Error("Unknown node type "+I+".");for(X=K.length;(X-=1)>=0;)if(q=K[X],G=F[q],!!G)if(Array.isArray(G)){for(Q=G.length;(Q-=1)>=0;)if(G[Q]){if(h(I,K[X]))B=new d(G[Q],[q,Q],"Property",null);else if(f(G[Q]))B=new d(G[Q],[q,Q],null,null);else continue;P.push(B)}}else f(G)&&P.push(new d(G,q,null,null))}}},p.prototype.replace=function(E,S){var P,C,B,F,I,$,q,X,Q,K,G,ne,U;function R(j){var W,re,L,V;if(j.ref.remove()){for(re=j.ref.key,V=j.ref.parent,W=P.length;W--;)if(L=P[W],L.ref&&L.ref.parent===V){if(L.ref.key<re)break;--L.ref.key}}}for(this.__initialize(E,S),G={},P=this.__worklist,C=this.__leavelist,ne={root:E},$=new d(E,null,null,new l(ne,"root")),P.push($),C.push($);P.length;){if($=P.pop(),$===G){if($=C.pop(),I=this.__execute(S.leave,$),I!==void 0&&I!==i&&I!==o&&I!==a&&$.ref.replace(I),(this.__state===a||I===a)&&R($),this.__state===i||I===i)return ne.root;continue}if(I=this.__execute(S.enter,$),I!==void 0&&I!==i&&I!==o&&I!==a&&($.ref.replace(I),$.node=I),(this.__state===a||I===a)&&(R($),$.node=null),this.__state===i||I===i)return ne.root;if(B=$.node,!!B&&(P.push(G),C.push($),!(this.__state===o||I===o))){if(F=B.type||$.wrap,Q=this.__keys[F],!Q)if(this.__fallback)Q=this.__fallback(B);else throw new Error("Unknown node type "+F+".");for(q=Q.length;(q-=1)>=0;)if(U=Q[q],K=B[U],!!K)if(Array.isArray(K)){for(X=K.length;(X-=1)>=0;)if(K[X]){if(h(F,Q[q]))$=new d(K[X],[U,X],"Property",new l(K,X));else if(f(K[X]))$=new d(K[X],[U,X],null,new l(K,X));else continue;P.push($)}}else f(K)&&P.push(new d(K,U,null,new l(B,U)))}}return ne.root};function m(v,E){var S=new p;return S.traverse(v,E)}function g(v,E){var S=new p;return S.replace(v,E)}function _(v,E){var S;return S=c(E,function(C){return C.range[0]>v.range[0]}),v.extendedRange=[v.range[0],v.range[1]],S!==E.length&&(v.extendedRange[1]=E[S].range[0]),S-=1,S>=0&&(v.extendedRange[0]=E[S].range[1]),v}function D(v,E,S){var P=[],C,B,F,I;if(!v.range)throw new Error("attachComments needs range information");if(!S.length){if(E.length){for(F=0,B=E.length;F<B;F+=1)C=u(E[F]),C.extendedRange=[0,v.range[0]],P.push(C);v.leadingComments=P}return v}for(F=0,B=E.length;F<B;F+=1)P.push(_(u(E[F]),S));return I=0,m(v,{enter:function($){for(var q;I<P.length&&(q=P[I],!(q.extendedRange[1]>$.range[0]));)q.extendedRange[1]===$.range[0]?($.leadingComments||($.leadingComments=[]),$.leadingComments.push(q),P.splice(I,1)):I+=1;if(I===P.length)return n.Break;if(P[I].extendedRange[0]>$.range[1])return n.Skip}}),I=0,m(v,{leave:function($){for(var q;I<P.length&&(q=P[I],!($.range[1]<q.extendedRange[0]));)$.range[1]===q.extendedRange[0]?($.trailingComments||($.trailingComments=[]),$.trailingComments.push(q),P.splice(I,1)):I+=1;if(I===P.length)return n.Break;if(P[I].extendedRange[0]>$.range[1])return n.Skip}}),v}return e.version=H6().version,e.Syntax=r,e.traverse=m,e.replace=g,e.attachComments=D,e.VisitorKeys=s,e.VisitorOption=n,e.Controller=p,e.cloneEnvironment=function(){return t({})},e})(W6)});var X6=b((r5e,Z6)=>{(function(){"use strict";function t(o){if(o==null)return!1;switch(o.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function e(o){if(o==null)return!1;switch(o.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function r(o){if(o==null)return!1;switch(o.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function n(o){return r(o)||o!=null&&o.type==="FunctionDeclaration"}function s(o){switch(o.type){case"IfStatement":return o.alternate!=null?o.alternate:o.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return o.body}return null}function i(o){var a;if(o.type!=="IfStatement"||o.alternate==null)return!1;a=o.consequent;do{if(a.type==="IfStatement"&&a.alternate==null)return!0;a=s(a)}while(a);return!1}Z6.exports={isExpression:t,isStatement:r,isIterationStatement:e,isSourceElement:n,isProblematicIfStatement:i,trailingStatement:s}})()});var fx=b((n5e,Y6)=>{(function(){"use strict";var t,e,r,n,s,i;e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function o(g){return 48<=g&&g<=57}function a(g){return 48<=g&&g<=57||97<=g&&g<=102||65<=g&&g<=70}function u(g){return g>=48&&g<=55}r=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function c(g){return g===32||g===9||g===11||g===12||g===160||g>=5760&&r.indexOf(g)>=0}function l(g){return g===10||g===13||g===8232||g===8233}function d(g){if(g<=65535)return String.fromCharCode(g);var _=String.fromCharCode(Math.floor((g-65536)/1024)+55296),D=String.fromCharCode((g-65536)%1024+56320);return _+D}for(n=new Array(128),i=0;i<128;++i)n[i]=i>=97&&i<=122||i>=65&&i<=90||i===36||i===95;for(s=new Array(128),i=0;i<128;++i)s[i]=i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||i===36||i===95;function p(g){return g<128?n[g]:e.NonAsciiIdentifierStart.test(d(g))}function f(g){return g<128?s[g]:e.NonAsciiIdentifierPart.test(d(g))}function h(g){return g<128?n[g]:t.NonAsciiIdentifierStart.test(d(g))}function m(g){return g<128?s[g]:t.NonAsciiIdentifierPart.test(d(g))}Y6.exports={isDecimalDigit:o,isHexDigit:a,isOctalDigit:u,isWhiteSpace:c,isLineTerminator:l,isIdentifierStartES5:p,isIdentifierPartES5:f,isIdentifierStartES6:h,isIdentifierPartES6:m}})()});var eR=b((i5e,Q6)=>{(function(){"use strict";var t=fx();function e(p){switch(p){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function r(p,f){return!f&&p==="yield"?!1:n(p,f)}function n(p,f){if(f&&e(p))return!0;switch(p.length){case 2:return p==="if"||p==="in"||p==="do";case 3:return p==="var"||p==="for"||p==="new"||p==="try";case 4:return p==="this"||p==="else"||p==="case"||p==="void"||p==="with"||p==="enum";case 5:return p==="while"||p==="break"||p==="catch"||p==="throw"||p==="const"||p==="yield"||p==="class"||p==="super";case 6:return p==="return"||p==="typeof"||p==="delete"||p==="switch"||p==="export"||p==="import";case 7:return p==="default"||p==="finally"||p==="extends";case 8:return p==="function"||p==="continue"||p==="debugger";case 10:return p==="instanceof";default:return!1}}function s(p,f){return p==="null"||p==="true"||p==="false"||r(p,f)}function i(p,f){return p==="null"||p==="true"||p==="false"||n(p,f)}function o(p){return p==="eval"||p==="arguments"}function a(p){var f,h,m;if(p.length===0||(m=p.charCodeAt(0),!t.isIdentifierStartES5(m)))return!1;for(f=1,h=p.length;f<h;++f)if(m=p.charCodeAt(f),!t.isIdentifierPartES5(m))return!1;return!0}function u(p,f){return(p-55296)*1024+(f-56320)+65536}function c(p){var f,h,m,g,_;if(p.length===0)return!1;for(_=t.isIdentifierStartES6,f=0,h=p.length;f<h;++f){if(m=p.charCodeAt(f),55296<=m&&m<=56319){if(++f,f>=h||(g=p.charCodeAt(f),!(56320<=g&&g<=57343)))return!1;m=u(m,g)}if(!_(m))return!1;_=t.isIdentifierPartES6}return!0}function l(p,f){return a(p)&&!s(p,f)}function d(p,f){return c(p)&&!i(p,f)}Q6.exports={isKeywordES5:r,isKeywordES6:n,isReservedWordES5:s,isReservedWordES6:i,isRestrictedWord:o,isIdentifierNameES5:a,isIdentifierNameES6:c,isIdentifierES5:l,isIdentifierES6:d}})()});var tR=b(Rv=>{(function(){"use strict";Rv.ast=X6(),Rv.code=fx(),Rv.keyword=eR()})()});var nR=b(px=>{var rR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");px.encode=function(t){if(0<=t&&t<rR.length)return rR[t];throw new TypeError("Must be between 0 and 63: "+t)};px.decode=function(t){var e=65,r=90,n=97,s=122,i=48,o=57,a=43,u=47,c=26,l=52;return e<=t&&t<=r?t-e:n<=t&&t<=s?t-n+c:i<=t&&t<=o?t-i+l:t==a?62:t==u?63:-1}});var mx=b(yx=>{var iR=nR(),hx=5,sR=1<<hx,oR=sR-1,aR=sR;function Eoe(t){return t<0?(-t<<1)+1:(t<<1)+0}function Soe(t){var e=(t&1)===1,r=t>>1;return e?-r:r}yx.encode=function(e){var r="",n,s=Eoe(e);do n=s&oR,s>>>=hx,s>0&&(n|=aR),r+=iR.encode(n);while(s>0);return r};yx.decode=function(e,r,n){var s=e.length,i=0,o=0,a,u;do{if(r>=s)throw new Error("Expected more digits in base 64 VLQ value.");if(u=iR.decode(e.charCodeAt(r++)),u===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));a=!!(u&aR),u&=oR,i=i+(u<<o),o+=hx}while(a);n.value=Soe(i),n.rest=r}});var cf=b(gn=>{function Aoe(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}gn.getArg=Aoe;var uR=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,xoe=/^data:.+\,.+$/;function uy(t){var e=t.match(uR);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}gn.urlParse=uy;function af(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}gn.urlGenerate=af;function gx(t){var e=t,r=uy(t);if(r){if(!r.path)return t;e=r.path}for(var n=gn.isAbsolute(e),s=e.split(/\/+/),i,o=0,a=s.length-1;a>=0;a--)i=s[a],i==="."?s.splice(a,1):i===".."?o++:o>0&&(i===""?(s.splice(a+1,o),o=0):(s.splice(a,2),o--));return e=s.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,af(r)):e}gn.normalize=gx;function cR(t,e){t===""&&(t="."),e===""&&(e=".");var r=uy(e),n=uy(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),af(r);if(r||e.match(xoe))return e;if(n&&!n.host&&!n.path)return n.host=e,af(n);var s=e.charAt(0)==="/"?e:gx(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=s,af(n)):s}gn.join=cR;gn.isAbsolute=function(t){return t.charAt(0)==="/"||uR.test(t)};function Doe(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}gn.relative=Doe;var lR=function(){var t=Object.create(null);return!("__proto__"in t)}();function dR(t){return t}function Coe(t){return fR(t)?"$"+t:t}gn.toSetString=lR?dR:Coe;function Poe(t){return fR(t)?t.slice(1):t}gn.fromSetString=lR?dR:Poe;function fR(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function Ooe(t,e,r){var n=uf(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:uf(t.name,e.name)}gn.compareByOriginalPositions=Ooe;function Toe(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=uf(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:uf(t.name,e.name)}gn.compareByGeneratedPositionsDeflated=Toe;function uf(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function Boe(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=uf(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:uf(t.name,e.name)}gn.compareByGeneratedPositionsInflated=Boe;function Ioe(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}gn.parseSourceMapInput=Ioe;function Foe(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=uy(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var s=n.path.lastIndexOf("/");s>=0&&(n.path=n.path.substring(0,s+1))}e=cR(af(n),e)}return gx(e)}gn.computeSourceURL=Foe});var wx=b(pR=>{var vx=cf(),bx=Object.prototype.hasOwnProperty,tl=typeof Map<"u";function ma(){this._array=[],this._set=tl?new Map:Object.create(null)}ma.fromArray=function(e,r){for(var n=new ma,s=0,i=e.length;s<i;s++)n.add(e[s],r);return n};ma.prototype.size=function(){return tl?this._set.size:Object.getOwnPropertyNames(this._set).length};ma.prototype.add=function(e,r){var n=tl?e:vx.toSetString(e),s=tl?this.has(e):bx.call(this._set,n),i=this._array.length;(!s||r)&&this._array.push(e),s||(tl?this._set.set(e,i):this._set[n]=i)};ma.prototype.has=function(e){if(tl)return this._set.has(e);var r=vx.toSetString(e);return bx.call(this._set,r)};ma.prototype.indexOf=function(e){if(tl){var r=this._set.get(e);if(r>=0)return r}else{var n=vx.toSetString(e);if(bx.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};ma.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};ma.prototype.toArray=function(){return this._array.slice()};pR.ArraySet=ma});var mR=b(yR=>{var hR=cf();function koe(t,e){var r=t.generatedLine,n=e.generatedLine,s=t.generatedColumn,i=e.generatedColumn;return n>r||n==r&&i>=s||hR.compareByGeneratedPositionsInflated(t,e)<=0}function $v(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}$v.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};$v.prototype.add=function(e){koe(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};$v.prototype.toArray=function(){return this._sorted||(this._array.sort(hR.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};yR.MappingList=$v});var _x=b(gR=>{var cy=mx(),Br=cf(),jv=wx().ArraySet,Roe=mR().MappingList;function Mi(t){t||(t={}),this._file=Br.getArg(t,"file",null),this._sourceRoot=Br.getArg(t,"sourceRoot",null),this._skipValidation=Br.getArg(t,"skipValidation",!1),this._sources=new jv,this._names=new jv,this._mappings=new Roe,this._sourcesContents=null}Mi.prototype._version=3;Mi.fromSourceMap=function(e){var r=e.sourceRoot,n=new Mi({file:e.file,sourceRoot:r});return e.eachMapping(function(s){var i={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(i.source=s.source,r!=null&&(i.source=Br.relative(r,i.source)),i.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(i.name=s.name)),n.addMapping(i)}),e.sources.forEach(function(s){var i=s;r!==null&&(i=Br.relative(r,s)),n._sources.has(i)||n._sources.add(i);var o=e.sourceContentFor(s);o!=null&&n.setSourceContent(s,o)}),n};Mi.prototype.addMapping=function(e){var r=Br.getArg(e,"generated"),n=Br.getArg(e,"original",null),s=Br.getArg(e,"source",null),i=Br.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,s,i),s!=null&&(s=String(s),this._sources.has(s)||this._sources.add(s)),i!=null&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:s,name:i})};Mi.prototype.setSourceContent=function(e,r){var n=e;this._sourceRoot!=null&&(n=Br.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Br.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Br.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Mi.prototype.applySourceMap=function(e,r,n){var s=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);s=e.file}var i=this._sourceRoot;i!=null&&(s=Br.relative(i,s));var o=new jv,a=new jv;this._mappings.unsortedForEach(function(u){if(u.source===s&&u.originalLine!=null){var c=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});c.source!=null&&(u.source=c.source,n!=null&&(u.source=Br.join(n,u.source)),i!=null&&(u.source=Br.relative(i,u.source)),u.originalLine=c.line,u.originalColumn=c.column,c.name!=null&&(u.name=c.name))}var l=u.source;l!=null&&!o.has(l)&&o.add(l);var d=u.name;d!=null&&!a.has(d)&&a.add(d)},this),this._sources=o,this._names=a,e.sources.forEach(function(u){var c=e.sourceContentFor(u);c!=null&&(n!=null&&(u=Br.join(n,u)),i!=null&&(u=Br.relative(i,u)),this.setSourceContent(u,c))},this)};Mi.prototype._validateMapping=function(e,r,n,s){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!s)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:s}))}};Mi.prototype._serializeMappings=function(){for(var e=0,r=1,n=0,s=0,i=0,o=0,a="",u,c,l,d,p=this._mappings.toArray(),f=0,h=p.length;f<h;f++){if(c=p[f],u="",c.generatedLine!==r)for(e=0;c.generatedLine!==r;)u+=";",r++;else if(f>0){if(!Br.compareByGeneratedPositionsInflated(c,p[f-1]))continue;u+=","}u+=cy.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(d=this._sources.indexOf(c.source),u+=cy.encode(d-o),o=d,u+=cy.encode(c.originalLine-1-s),s=c.originalLine-1,u+=cy.encode(c.originalColumn-n),n=c.originalColumn,c.name!=null&&(l=this._names.indexOf(c.name),u+=cy.encode(l-i),i=l)),a+=u}return a};Mi.prototype._generateSourcesContent=function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Br.relative(r,n));var s=Br.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,s)?this._sourcesContents[s]:null},this)};Mi.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};Mi.prototype.toString=function(){return JSON.stringify(this.toJSON())};gR.SourceMapGenerator=Mi});var vR=b(rl=>{rl.GREATEST_LOWER_BOUND=1;rl.LEAST_UPPER_BOUND=2;function Ex(t,e,r,n,s,i){var o=Math.floor((e-t)/2)+t,a=s(r,n[o],!0);return a===0?o:a>0?e-o>1?Ex(o,e,r,n,s,i):i==rl.LEAST_UPPER_BOUND?e<n.length?e:-1:o:o-t>1?Ex(t,o,r,n,s,i):i==rl.LEAST_UPPER_BOUND?o:t<0?-1:t}rl.search=function(e,r,n,s){if(r.length===0)return-1;var i=Ex(-1,r.length,e,r,n,s||rl.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&n(r[i],r[i-1],!0)===0;)--i;return i}});var wR=b(bR=>{function Sx(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function $oe(t,e){return Math.round(t+Math.random()*(e-t))}function Ax(t,e,r,n){if(r<n){var s=$oe(r,n),i=r-1;Sx(t,s,n);for(var o=t[n],a=r;a<n;a++)e(t[a],o)<=0&&(i+=1,Sx(t,i,a));Sx(t,i+1,a);var u=i+1;Ax(t,e,r,u-1),Ax(t,e,u+1,n)}}bR.quickSort=function(t,e){Ax(t,e,0,t.length-1)}});var ER=b(Nv=>{var Ee=cf(),xx=vR(),lf=wx().ArraySet,joe=mx(),ly=wR().quickSort;function Yt(t,e){var r=t;return typeof t=="string"&&(r=Ee.parseSourceMapInput(t)),r.sections!=null?new bs(r,e):new un(r,e)}Yt.fromSourceMap=function(t,e){return un.fromSourceMap(t,e)};Yt.prototype._version=3;Yt.prototype.__generatedMappings=null;Object.defineProperty(Yt.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});Yt.prototype.__originalMappings=null;Object.defineProperty(Yt.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});Yt.prototype._charIsMappingSeparator=function(e,r){var n=e.charAt(r);return n===";"||n===","};Yt.prototype._parseMappings=function(e,r){throw new Error("Subclasses must implement _parseMappings")};Yt.GENERATED_ORDER=1;Yt.ORIGINAL_ORDER=2;Yt.GREATEST_LOWER_BOUND=1;Yt.LEAST_UPPER_BOUND=2;Yt.prototype.eachMapping=function(e,r,n){var s=r||null,i=n||Yt.GENERATED_ORDER,o;switch(i){case Yt.GENERATED_ORDER:o=this._generatedMappings;break;case Yt.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;o.map(function(u){var c=u.source===null?null:this._sources.at(u.source);return c=Ee.computeSourceURL(a,c,this._sourceMapURL),{source:c,generatedLine:u.generatedLine,generatedColumn:u.generatedColumn,originalLine:u.originalLine,originalColumn:u.originalColumn,name:u.name===null?null:this._names.at(u.name)}},this).forEach(e,s)};Yt.prototype.allGeneratedPositionsFor=function(e){var r=Ee.getArg(e,"line"),n={source:Ee.getArg(e,"source"),originalLine:r,originalColumn:Ee.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var s=[],i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Ee.compareByOriginalPositions,xx.LEAST_UPPER_BOUND);if(i>=0){var o=this._originalMappings[i];if(e.column===void 0)for(var a=o.originalLine;o&&o.originalLine===a;)s.push({line:Ee.getArg(o,"generatedLine",null),column:Ee.getArg(o,"generatedColumn",null),lastColumn:Ee.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++i];else for(var u=o.originalColumn;o&&o.originalLine===r&&o.originalColumn==u;)s.push({line:Ee.getArg(o,"generatedLine",null),column:Ee.getArg(o,"generatedColumn",null),lastColumn:Ee.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++i]}return s};Nv.SourceMapConsumer=Yt;function un(t,e){var r=t;typeof t=="string"&&(r=Ee.parseSourceMapInput(t));var n=Ee.getArg(r,"version"),s=Ee.getArg(r,"sources"),i=Ee.getArg(r,"names",[]),o=Ee.getArg(r,"sourceRoot",null),a=Ee.getArg(r,"sourcesContent",null),u=Ee.getArg(r,"mappings"),c=Ee.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);o&&(o=Ee.normalize(o)),s=s.map(String).map(Ee.normalize).map(function(l){return o&&Ee.isAbsolute(o)&&Ee.isAbsolute(l)?Ee.relative(o,l):l}),this._names=lf.fromArray(i.map(String),!0),this._sources=lf.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map(function(l){return Ee.computeSourceURL(o,l,e)}),this.sourceRoot=o,this.sourcesContent=a,this._mappings=u,this._sourceMapURL=e,this.file=c}un.prototype=Object.create(Yt.prototype);un.prototype.consumer=Yt;un.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=Ee.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};un.fromSourceMap=function(e,r){var n=Object.create(un.prototype),s=n._names=lf.fromArray(e._names.toArray(),!0),i=n._sources=lf.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(f){return Ee.computeSourceURL(n.sourceRoot,f,r)});for(var o=e._mappings.toArray().slice(),a=n.__generatedMappings=[],u=n.__originalMappings=[],c=0,l=o.length;c<l;c++){var d=o[c],p=new _R;p.generatedLine=d.generatedLine,p.generatedColumn=d.generatedColumn,d.source&&(p.source=i.indexOf(d.source),p.originalLine=d.originalLine,p.originalColumn=d.originalColumn,d.name&&(p.name=s.indexOf(d.name)),u.push(p)),a.push(p)}return ly(n.__originalMappings,Ee.compareByOriginalPositions),n};un.prototype._version=3;Object.defineProperty(un.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function _R(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}un.prototype._parseMappings=function(e,r){for(var n=1,s=0,i=0,o=0,a=0,u=0,c=e.length,l=0,d={},p={},f=[],h=[],m,g,_,D,v;l<c;)if(e.charAt(l)===";")n++,l++,s=0;else if(e.charAt(l)===",")l++;else{for(m=new _R,m.generatedLine=n,D=l;D<c&&!this._charIsMappingSeparator(e,D);D++);if(g=e.slice(l,D),_=d[g],_)l+=g.length;else{for(_=[];l<D;)joe.decode(e,l,p),v=p.value,l=p.rest,_.push(v);if(_.length===2)throw new Error("Found a source, but no line and column");if(_.length===3)throw new Error("Found a source and line, but no column");d[g]=_}m.generatedColumn=s+_[0],s=m.generatedColumn,_.length>1&&(m.source=a+_[1],a+=_[1],m.originalLine=i+_[2],i=m.originalLine,m.originalLine+=1,m.originalColumn=o+_[3],o=m.originalColumn,_.length>4&&(m.name=u+_[4],u+=_[4])),h.push(m),typeof m.originalLine=="number"&&f.push(m)}ly(h,Ee.compareByGeneratedPositionsDeflated),this.__generatedMappings=h,ly(f,Ee.compareByOriginalPositions),this.__originalMappings=f};un.prototype._findMapping=function(e,r,n,s,i,o){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[s]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[s]);return xx.search(e,r,i,o)};un.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};un.prototype.originalPositionFor=function(e){var r={generatedLine:Ee.getArg(e,"line"),generatedColumn:Ee.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",Ee.compareByGeneratedPositionsDeflated,Ee.getArg(e,"bias",Yt.GREATEST_LOWER_BOUND));if(n>=0){var s=this._generatedMappings[n];if(s.generatedLine===r.generatedLine){var i=Ee.getArg(s,"source",null);i!==null&&(i=this._sources.at(i),i=Ee.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var o=Ee.getArg(s,"name",null);return o!==null&&(o=this._names.at(o)),{source:i,line:Ee.getArg(s,"originalLine",null),column:Ee.getArg(s,"originalColumn",null),name:o}}}return{source:null,line:null,column:null,name:null}};un.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};un.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var s=e;this.sourceRoot!=null&&(s=Ee.relative(this.sourceRoot,s));var i;if(this.sourceRoot!=null&&(i=Ee.urlParse(this.sourceRoot))){var o=s.replace(/^file:\/\//,"");if(i.scheme=="file"&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!i.path||i.path=="/")&&this._sources.has("/"+s))return this.sourcesContent[this._sources.indexOf("/"+s)]}if(r)return null;throw new Error('"'+s+'" is not in the SourceMap.')};un.prototype.generatedPositionFor=function(e){var r=Ee.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:Ee.getArg(e,"line"),originalColumn:Ee.getArg(e,"column")},s=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Ee.compareByOriginalPositions,Ee.getArg(e,"bias",Yt.GREATEST_LOWER_BOUND));if(s>=0){var i=this._originalMappings[s];if(i.source===n.source)return{line:Ee.getArg(i,"generatedLine",null),column:Ee.getArg(i,"generatedColumn",null),lastColumn:Ee.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};Nv.BasicSourceMapConsumer=un;function bs(t,e){var r=t;typeof t=="string"&&(r=Ee.parseSourceMapInput(t));var n=Ee.getArg(r,"version"),s=Ee.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new lf,this._names=new lf;var i={line:-1,column:0};this._sections=s.map(function(o){if(o.url)throw new Error("Support for url field in sections not implemented.");var a=Ee.getArg(o,"offset"),u=Ee.getArg(a,"line"),c=Ee.getArg(a,"column");if(u<i.line||u===i.line&&c<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=a,{generatedOffset:{generatedLine:u+1,generatedColumn:c+1},consumer:new Yt(Ee.getArg(o,"map"),e)}})}bs.prototype=Object.create(Yt.prototype);bs.prototype.constructor=Yt;bs.prototype._version=3;Object.defineProperty(bs.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}});bs.prototype.originalPositionFor=function(e){var r={generatedLine:Ee.getArg(e,"line"),generatedColumn:Ee.getArg(e,"column")},n=xx.search(r,this._sections,function(i,o){var a=i.generatedLine-o.generatedOffset.generatedLine;return a||i.generatedColumn-o.generatedOffset.generatedColumn}),s=this._sections[n];return s?s.consumer.originalPositionFor({line:r.generatedLine-(s.generatedOffset.generatedLine-1),column:r.generatedColumn-(s.generatedOffset.generatedLine===r.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};bs.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};bs.prototype.sourceContentFor=function(e,r){for(var n=0;n<this._sections.length;n++){var s=this._sections[n],i=s.consumer.sourceContentFor(e,!0);if(i)return i}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')};bs.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(Ee.getArg(e,"source"))!==-1){var s=n.consumer.generatedPositionFor(e);if(s){var i={line:s.line+(n.generatedOffset.generatedLine-1),column:s.column+(n.generatedOffset.generatedLine===s.line?n.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}};bs.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var s=this._sections[n],i=s.consumer._generatedMappings,o=0;o<i.length;o++){var a=i[o],u=s.consumer._sources.at(a.source);u=Ee.computeSourceURL(s.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var c=null;a.name&&(c=s.consumer._names.at(a.name),this._names.add(c),c=this._names.indexOf(c));var l={source:u,generatedLine:a.generatedLine+(s.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(s.generatedOffset.generatedLine===a.generatedLine?s.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:c};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}ly(this.__generatedMappings,Ee.compareByGeneratedPositionsDeflated),ly(this.__originalMappings,Ee.compareByOriginalPositions)};Nv.IndexedSourceMapConsumer=bs});var AR=b(SR=>{var Noe=_x().SourceMapGenerator,Mv=cf(),Moe=/(\r?\n)/,qoe=10,df="$$$isSourceNode$$$";function li(t,e,r,n,s){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=s??null,this[df]=!0,n!=null&&this.add(n)}li.fromStringWithSourceMap=function(e,r,n){var s=new li,i=e.split(Moe),o=0,a=function(){var p=h(),f=h()||"";return p+f;function h(){return o<i.length?i[o++]:void 0}},u=1,c=0,l=null;return r.eachMapping(function(p){if(l!==null)if(u<p.generatedLine)d(l,a()),u++,c=0;else{var f=i[o]||"",h=f.substr(0,p.generatedColumn-c);i[o]=f.substr(p.generatedColumn-c),c=p.generatedColumn,d(l,h),l=p;return}for(;u<p.generatedLine;)s.add(a()),u++;if(c<p.generatedColumn){var f=i[o]||"";s.add(f.substr(0,p.generatedColumn)),i[o]=f.substr(p.generatedColumn),c=p.generatedColumn}l=p},this),o<i.length&&(l&&d(l,a()),s.add(i.splice(o).join(""))),r.sources.forEach(function(p){var f=r.sourceContentFor(p);f!=null&&(n!=null&&(p=Mv.join(n,p)),s.setSourceContent(p,f))}),s;function d(p,f){if(p===null||p.source===void 0)s.add(f);else{var h=n?Mv.join(n,p.source):p.source;s.add(new li(p.originalLine,p.originalColumn,h,f,p.name))}}};li.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[df]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};li.prototype.prepend=function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[df]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};li.prototype.walk=function(e){for(var r,n=0,s=this.children.length;n<s;n++)r=this.children[n],r[df]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})};li.prototype.join=function(e){var r,n,s=this.children.length;if(s>0){for(r=[],n=0;n<s-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this};li.prototype.replaceRight=function(e,r){var n=this.children[this.children.length-1];return n[df]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this};li.prototype.setSourceContent=function(e,r){this.sourceContents[Mv.toSetString(e)]=r};li.prototype.walkSourceContents=function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][df]&&this.children[r].walkSourceContents(e);for(var s=Object.keys(this.sourceContents),r=0,n=s.length;r<n;r++)e(Mv.fromSetString(s[r]),this.sourceContents[s[r]])};li.prototype.toString=function(){var e="";return this.walk(function(r){e+=r}),e};li.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},n=new Noe(e),s=!1,i=null,o=null,a=null,u=null;return this.walk(function(c,l){r.code+=c,l.source!==null&&l.line!==null&&l.column!==null?((i!==l.source||o!==l.line||a!==l.column||u!==l.name)&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name}),i=l.source,o=l.line,a=l.column,u=l.name,s=!0):s&&(n.addMapping({generated:{line:r.line,column:r.column}}),i=null,s=!1);for(var d=0,p=c.length;d<p;d++)c.charCodeAt(d)===qoe?(r.line++,r.column=0,d+1===p?(i=null,s=!1):s&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name})):r.column++}),this.walkSourceContents(function(c,l){n.setSourceContent(c,l)}),{code:r.code,map:n}};SR.SourceNode=li});var xR=b(qv=>{qv.SourceMapGenerator=_x().SourceMapGenerator;qv.SourceMapConsumer=ER().SourceMapConsumer;qv.SourceNode=AR().SourceNode});var DR=b((g5e,Loe)=>{Loe.exports={name:"escodegen",description:"ECMAScript code generator",homepage:"http://github.com/estools/escodegen",main:"escodegen.js",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files:["LICENSE.BSD","README.md","bin","escodegen.js","package.json"],version:"1.14.3",engines:{node:">=4.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/escodegen.git"},dependencies:{estraverse:"^4.2.0",esutils:"^2.0.2",esprima:"^4.0.1",optionator:"^0.8.1"},optionalDependencies:{"source-map":"~0.6.1"},devDependencies:{acorn:"^7.1.0",bluebird:"^3.4.7","bower-registry-client":"^1.0.0",chai:"^3.5.0","commonjs-everywhere":"^0.9.7",gulp:"^3.8.10","gulp-eslint":"^3.0.1","gulp-mocha":"^3.0.1",semver:"^5.1.0"},license:"BSD-2-Clause",scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"}}});var CR=b(ga=>{(function(){"use strict";var t,e,r,n,s,i,o,a,u,c,l,d,p,f,h,m,g,_,D,v,E,S,P,C,B,F;s=G6(),i=tR(),t=s.Syntax;function I(y){return Tt.Expression.hasOwnProperty(y.type)}function $(y){return Tt.Statement.hasOwnProperty(y.type)}e={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,Call:16,New:17,TaggedTemplate:18,Member:19,Primary:20},r={"||":e.LogicalOR,"&&":e.LogicalAND,"|":e.BitwiseOR,"^":e.BitwiseXOR,"&":e.BitwiseAND,"==":e.Equality,"!=":e.Equality,"===":e.Equality,"!==":e.Equality,is:e.Equality,isnt:e.Equality,"<":e.Relational,">":e.Relational,"<=":e.Relational,">=":e.Relational,in:e.Relational,instanceof:e.Relational,"<<":e.BitwiseSHIFT,">>":e.BitwiseSHIFT,">>>":e.BitwiseSHIFT,"+":e.Additive,"-":e.Additive,"*":e.Multiplicative,"%":e.Multiplicative,"/":e.Multiplicative,"**":e.Exponentiation};var q=1,X=2,Q=4,K=8,G=16,ne=32,U=X|Q,R=q|X,j=q|X|Q,W=q,re=Q,L=q|Q,V=q,ie=q|ne,ue=0,he=q|G,ye=q|K;function xe(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function Oe(y,A){var w="";for(A|=0;A>0;A>>>=1,y+=y)A&1&&(w+=y);return w}function Le(y){return/[\r\n]/g.test(y)}function je(y){var A=y.length;return A&&i.code.isLineTerminator(y.charCodeAt(A-1))}function Et(y,A){var w;for(w in A)A.hasOwnProperty(w)&&(y[w]=A[w]);return y}function yt(y,A){var w,x;function O(H){return typeof H=="object"&&H instanceof Object&&!(H instanceof RegExp)}for(w in A)A.hasOwnProperty(w)&&(x=A[w],O(x)?O(y[w])?yt(y[w],x):y[w]=yt({},x):y[w]=x);return y}function pn(y){var A,w,x,O,H;if(y!==y)throw new Error("Numeric literal whose value is NaN");if(y<0||y===0&&1/y<0)throw new Error("Numeric literal whose value is negative");if(y===1/0)return u?"null":c?"1e400":"1e+400";if(A=""+y,!c||A.length<3)return A;for(w=A.indexOf("."),!u&&A.charCodeAt(0)===48&&w===1&&(w=0,A=A.slice(1)),x=A,A=A.replace("e+","e"),O=0,(H=x.indexOf("e"))>0&&(O=+x.slice(H+1),x=x.slice(0,H)),w>=0&&(O-=x.length-w-1,x=+(x.slice(0,w)+x.slice(w+1))+""),H=0;x.charCodeAt(x.length+H-1)===48;)--H;return H!==0&&(O-=H,x=x.slice(0,H)),O!==0&&(x+="e"+O),(x.length<A.length||l&&y>1e12&&Math.floor(y)===y&&(x="0x"+y.toString(16)).length<A.length)&&+x===y&&(A=x),A}function gr(y,A){return(y&-2)===8232?(A?"u":"\\u")+(y===8232?"2028":"2029"):y===10||y===13?(A?"":"\\")+(y===10?"n":"r"):String.fromCharCode(y)}function Bs(y){var A,w,x,O,H,te,se,me;if(w=y.toString(),y.source){if(A=w.match(/\/([^/]*)$/),!A)return w;for(x=A[1],w="",se=!1,me=!1,O=0,H=y.source.length;O<H;++O)te=y.source.charCodeAt(O),me?(w+=gr(te,me),me=!1):(se?te===93&&(se=!1):te===47?w+="\\":te===91&&(se=!0),w+=gr(te,me),me=te===92);return"/"+w+"/"+x}return w}function es(y,A){var w;return y===8?"\\b":y===12?"\\f":y===9?"\\t":(w=y.toString(16).toUpperCase(),u||y>255?"\\u"+"0000".slice(w.length)+w:y===0&&!i.code.isDecimalDigit(A)?"\\0":y===11?"\\x0B":"\\x"+"00".slice(w.length)+w)}function Io(y){if(y===92)return"\\\\";if(y===10)return"\\n";if(y===13)return"\\r";if(y===8232)return"\\u2028";if(y===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function vr(y){var A,w,x,O;for(O=d==="double"?'"':"'",A=0,w=y.length;A<w;++A)if(x=y.charCodeAt(A),x===39){O='"';break}else if(x===34){O="'";break}else x===92&&++A;return O+y+O}function Nn(y){var A="",w,x,O,H=0,te=0,se,me;for(w=0,x=y.length;w<x;++w){if(O=y.charCodeAt(w),O===39)++H;else if(O===34)++te;else if(O===47&&u)A+="\\";else if(i.code.isLineTerminator(O)||O===92){A+=Io(O);continue}else if(!i.code.isIdentifierPartES5(O)&&(u&&O<32||!u&&!p&&(O<32||O>126))){A+=es(O,y.charCodeAt(w+1));continue}A+=String.fromCharCode(O)}if(se=!(d==="double"||d==="auto"&&te<H),me=se?"'":'"',!(se?H:te))return me+A+me;for(y=A,A=me,w=0,x=y.length;w<x;++w)O=y.charCodeAt(w),(O===39&&se||O===34&&!se)&&(A+="\\"),A+=String.fromCharCode(O);return A+me}function Na(y){var A,w,x,O="";for(A=0,w=y.length;A<w;++A)x=y[A],O+=Array.isArray(x)?Na(x):x;return O}function mt(y,A){if(!S)return Array.isArray(y)?Na(y):y;if(A==null){if(y instanceof n)return y;A={}}return A.loc==null?new n(null,null,S,y,A.name||null):new n(A.loc.start.line,A.loc.start.column,S===!0?A.loc.source||null:S,y,A.name||null)}function ir(){return h||" "}function Re(y,A){var w,x,O,H;return w=mt(y).toString(),w.length===0?[A]:(x=mt(A).toString(),x.length===0?[y]:(O=w.charCodeAt(w.length-1),H=x.charCodeAt(0),(O===43||O===45)&&O===H||i.code.isIdentifierPartES5(O)&&i.code.isIdentifierPartES5(H)||O===47&&H===105?[y,ir(),A]:i.code.isWhiteSpace(O)||i.code.isLineTerminator(O)||i.code.isWhiteSpace(H)||i.code.isLineTerminator(H)?[y,A]:[y,h,A]))}function br(y){return[o,y]}function St(y){var A;A=o,o+=a,y(o),o=A}function Is(y){var A;for(A=y.length-1;A>=0&&!i.code.isLineTerminator(y.charCodeAt(A));--A);return y.length-1-A}function Qu(y,A){var w,x,O,H,te,se,me,ut;for(w=y.split(/\r\n|[\r\n]/),se=Number.MAX_VALUE,x=1,O=w.length;x<O;++x){for(H=w[x],te=0;te<H.length&&i.code.isWhiteSpace(H.charCodeAt(te));)++te;se>te&&(se=te)}for(typeof A<"u"?(me=o,w[1][se]==="*"&&(A+=" "),o=A):(se&1&&--se,me=o),x=1,O=w.length;x<O;++x)ut=mt(br(w[x].slice(se))),w[x]=S?ut.join(""):ut;return o=me,w.join(`
`)}function Mn(y,A){if(y.type==="Line"){if(je(y.value))return"//"+y.value;var w="//"+y.value;return C||(w+=`
`),w}return v.format.indent.adjustMultilineComment&&/[\n\r]/.test(y.value)?Qu("/*"+y.value+"*/",A):"/*"+y.value+"*/"}function Fs(y,A){var w,x,O,H,te,se,me,ut,k,T,M,z,J,le;if(y.leadingComments&&y.leadingComments.length>0){if(H=A,C){for(O=y.leadingComments[0],A=[],ut=O.extendedRange,k=O.range,M=P.substring(ut[0],k[0]),le=(M.match(/\n/g)||[]).length,le>0?(A.push(Oe(`
`,le)),A.push(br(Mn(O)))):(A.push(M),A.push(Mn(O))),T=k,w=1,x=y.leadingComments.length;w<x;w++)O=y.leadingComments[w],k=O.range,z=P.substring(T[1],k[0]),le=(z.match(/\n/g)||[]).length,A.push(Oe(`
`,le)),A.push(br(Mn(O))),T=k;J=P.substring(k[1],ut[1]),le=(J.match(/\n/g)||[]).length,A.push(Oe(`
`,le))}else for(O=y.leadingComments[0],A=[],_&&y.type===t.Program&&y.body.length===0&&A.push(`
`),A.push(Mn(O)),je(mt(A).toString())||A.push(`
`),w=1,x=y.leadingComments.length;w<x;++w)O=y.leadingComments[w],me=[Mn(O)],je(mt(me).toString())||me.push(`
`),A.push(br(me));A.push(br(H))}if(y.trailingComments)if(C)O=y.trailingComments[0],ut=O.extendedRange,k=O.range,M=P.substring(ut[0],k[0]),le=(M.match(/\n/g)||[]).length,le>0?(A.push(Oe(`
`,le)),A.push(br(Mn(O)))):(A.push(M),A.push(Mn(O)));else for(te=!je(mt(A).toString()),se=Oe(" ",Is(mt([o,A,a]).toString())),w=0,x=y.trailingComments.length;w<x;++w)O=y.trailingComments[w],te?(w===0?A=[A,a]:A=[A,se],A.push(Mn(O,se))):A=[A,br(Mn(O))],w!==x-1&&!je(mt(A).toString())&&(A=[A,`
`]);return A}function ts(y,A,w){var x,O=0;for(x=y;x<A;x++)P[x]===`
`&&O++;for(x=1;x<O;x++)w.push(f)}function fr(y,A,w){return A<w?["(",y,")"]:y}function Zm(y){var A,w,x;for(x=y.split(/\r\n|\n/),A=1,w=x.length;A<w;A++)x[A]=f+o+x[A];return x}function Xm(y,A){var w,x,O;return w=y[v.verbatim],typeof w=="string"?x=fr(Zm(w),e.Sequence,A):(x=Zm(w.content),O=w.precedence!=null?w.precedence:e.Sequence,x=fr(x,O,A)),mt(x,y)}function Tt(){}Tt.prototype.maybeBlock=function(y,A){var w,x,O=this;return x=!v.comment||!y.leadingComments,y.type===t.BlockStatement&&x?[h,this.generateStatement(y,A)]:y.type===t.EmptyStatement&&x?";":(St(function(){w=[f,br(O.generateStatement(y,A))]}),w)},Tt.prototype.maybeBlockSuffix=function(y,A){var w=je(mt(A).toString());return y.type===t.BlockStatement&&(!v.comment||!y.leadingComments)&&!w?[A,h]:w?[A,o]:[A,f,o]};function xn(y){return mt(y.name,y)}function ec(y,A){return y.async?"async"+(A?ir():h):""}function Vl(y){var A=y.generator&&!v.moz.starlessGenerator;return A?"*"+h:""}function Ym(y){var A=y.value,w="";return A.async&&(w+=ec(A,!y.computed)),A.generator&&(w+=Vl(A)?"*":""),w}Tt.prototype.generatePattern=function(y,A,w){return y.type===t.Identifier?xn(y):this.generateExpression(y,A,w)},Tt.prototype.generateFunctionParams=function(y){var A,w,x,O;if(O=!1,y.type===t.ArrowFunctionExpression&&!y.rest&&(!y.defaults||y.defaults.length===0)&&y.params.length===1&&y.params[0].type===t.Identifier)x=[ec(y,!0),xn(y.params[0])];else{for(x=y.type===t.ArrowFunctionExpression?[ec(y,!1)]:[],x.push("("),y.defaults&&(O=!0),A=0,w=y.params.length;A<w;++A)O&&y.defaults[A]?x.push(this.generateAssignment(y.params[A],y.defaults[A],"=",e.Assignment,j)):x.push(this.generatePattern(y.params[A],e.Assignment,j)),A+1<w&&x.push(","+h);y.rest&&(y.params.length&&x.push(","+h),x.push("..."),x.push(xn(y.rest))),x.push(")")}return x},Tt.prototype.generateFunctionBody=function(y){var A,w;return A=this.generateFunctionParams(y),y.type===t.ArrowFunctionExpression&&(A.push(h),A.push("=>")),y.expression?(A.push(h),w=this.generateExpression(y.body,e.Assignment,j),w.toString().charAt(0)==="{"&&(w=["(",w,")"]),A.push(w)):A.push(this.maybeBlock(y.body,ye)),A},Tt.prototype.generateIterationForStatement=function(y,A,w){var x=["for"+(A.await?ir()+"await":"")+h+"("],O=this;return St(function(){A.left.type===t.VariableDeclaration?St(function(){x.push(A.left.kind+ir()),x.push(O.generateStatement(A.left.declarations[0],ue))}):x.push(O.generateExpression(A.left,e.Call,j)),x=Re(x,y),x=[Re(x,O.generateExpression(A.right,e.Assignment,j)),")"]}),x.push(this.maybeBlock(A.body,w)),x},Tt.prototype.generatePropertyKey=function(y,A){var w=[];return A&&w.push("["),w.push(this.generateExpression(y,e.Assignment,j)),A&&w.push("]"),w},Tt.prototype.generateAssignment=function(y,A,w,x,O){return e.Assignment<x&&(O|=q),fr([this.generateExpression(y,e.Call,O),h+w+h,this.generateExpression(A,e.Assignment,O)],e.Assignment,x)},Tt.prototype.semicolon=function(y){return!g&&y&ne?"":";"},Tt.Statement={BlockStatement:function(y,A){var w,x,O=["{",f],H=this;return St(function(){y.body.length===0&&C&&(w=y.range,w[1]-w[0]>2&&(x=P.substring(w[0]+1,w[1]-1),x[0]===`
`&&(O=["{"]),O.push(x)));var te,se,me,ut;for(ut=V,A&K&&(ut|=G),te=0,se=y.body.length;te<se;++te)C&&(te===0&&(y.body[0].leadingComments&&(w=y.body[0].leadingComments[0].extendedRange,x=P.substring(w[0],w[1]),x[0]===`
`&&(O=["{"])),y.body[0].leadingComments||ts(y.range[0],y.body[0].range[0],O)),te>0&&!y.body[te-1].trailingComments&&!y.body[te].leadingComments&&ts(y.body[te-1].range[1],y.body[te].range[0],O)),te===se-1&&(ut|=ne),y.body[te].leadingComments&&C?me=H.generateStatement(y.body[te],ut):me=br(H.generateStatement(y.body[te],ut)),O.push(me),je(mt(me).toString())||C&&te<se-1&&y.body[te+1].leadingComments||O.push(f),C&&te===se-1&&(y.body[te].trailingComments||ts(y.body[te].range[1],y.range[1],O))}),O.push(br("}")),O},BreakStatement:function(y,A){return y.label?"break "+y.label.name+this.semicolon(A):"break"+this.semicolon(A)},ContinueStatement:function(y,A){return y.label?"continue "+y.label.name+this.semicolon(A):"continue"+this.semicolon(A)},ClassBody:function(y,A){var w=["{",f],x=this;return St(function(O){var H,te;for(H=0,te=y.body.length;H<te;++H)w.push(O),w.push(x.generateExpression(y.body[H],e.Sequence,j)),H+1<te&&w.push(f)}),je(mt(w).toString())||w.push(f),w.push(o),w.push("}"),w},ClassDeclaration:function(y,A){var w,x;return w=["class"],y.id&&(w=Re(w,this.generateExpression(y.id,e.Sequence,j))),y.superClass&&(x=Re("extends",this.generateExpression(y.superClass,e.Unary,j)),w=Re(w,x)),w.push(h),w.push(this.generateStatement(y.body,ie)),w},DirectiveStatement:function(y,A){return v.raw&&y.raw?y.raw+this.semicolon(A):vr(y.directive)+this.semicolon(A)},DoWhileStatement:function(y,A){var w=Re("do",this.maybeBlock(y.body,V));return w=this.maybeBlockSuffix(y.body,w),Re(w,["while"+h+"(",this.generateExpression(y.test,e.Sequence,j),")"+this.semicolon(A)])},CatchClause:function(y,A){var w,x=this;return St(function(){var O;y.param?(w=["catch"+h+"(",x.generateExpression(y.param,e.Sequence,j),")"],y.guard&&(O=x.generateExpression(y.guard,e.Sequence,j),w.splice(2,0," if ",O))):w=["catch"]}),w.push(this.maybeBlock(y.body,V)),w},DebuggerStatement:function(y,A){return"debugger"+this.semicolon(A)},EmptyStatement:function(y,A){return";"},ExportDefaultDeclaration:function(y,A){var w=["export"],x;return x=A&ne?ie:V,w=Re(w,"default"),$(y.declaration)?w=Re(w,this.generateStatement(y.declaration,x)):w=Re(w,this.generateExpression(y.declaration,e.Assignment,j)+this.semicolon(A)),w},ExportNamedDeclaration:function(y,A){var w=["export"],x,O=this;return x=A&ne?ie:V,y.declaration?Re(w,this.generateStatement(y.declaration,x)):(y.specifiers&&(y.specifiers.length===0?w=Re(w,"{"+h+"}"):y.specifiers[0].type===t.ExportBatchSpecifier?w=Re(w,this.generateExpression(y.specifiers[0],e.Sequence,j)):(w=Re(w,"{"),St(function(H){var te,se;for(w.push(f),te=0,se=y.specifiers.length;te<se;++te)w.push(H),w.push(O.generateExpression(y.specifiers[te],e.Sequence,j)),te+1<se&&w.push(","+f)}),je(mt(w).toString())||w.push(f),w.push(o+"}")),y.source?w=Re(w,["from"+h,this.generateExpression(y.source,e.Sequence,j),this.semicolon(A)]):w.push(this.semicolon(A))),w)},ExportAllDeclaration:function(y,A){return["export"+h,"*"+h,"from"+h,this.generateExpression(y.source,e.Sequence,j),this.semicolon(A)]},ExpressionStatement:function(y,A){var w,x;function O(se){var me;return se.slice(0,5)!=="class"?!1:(me=se.charCodeAt(5),me===123||i.code.isWhiteSpace(me)||i.code.isLineTerminator(me))}function H(se){var me;return se.slice(0,8)!=="function"?!1:(me=se.charCodeAt(8),me===40||i.code.isWhiteSpace(me)||me===42||i.code.isLineTerminator(me))}function te(se){var me,ut,k;if(se.slice(0,5)!=="async"||!i.code.isWhiteSpace(se.charCodeAt(5)))return!1;for(ut=6,k=se.length;ut<k&&i.code.isWhiteSpace(se.charCodeAt(ut));++ut);return ut===k||se.slice(ut,ut+8)!=="function"?!1:(me=se.charCodeAt(ut+8),me===40||i.code.isWhiteSpace(me)||me===42||i.code.isLineTerminator(me))}return w=[this.generateExpression(y.expression,e.Sequence,j)],x=mt(w).toString(),x.charCodeAt(0)===123||O(x)||H(x)||te(x)||D&&A&G&&y.expression.type===t.Literal&&typeof y.expression.value=="string"?w=["(",w,")"+this.semicolon(A)]:w.push(this.semicolon(A)),w},ImportDeclaration:function(y,A){var w,x,O=this;return y.specifiers.length===0?["import",h,this.generateExpression(y.source,e.Sequence,j),this.semicolon(A)]:(w=["import"],x=0,y.specifiers[x].type===t.ImportDefaultSpecifier&&(w=Re(w,[this.generateExpression(y.specifiers[x],e.Sequence,j)]),++x),y.specifiers[x]&&(x!==0&&w.push(","),y.specifiers[x].type===t.ImportNamespaceSpecifier?w=Re(w,[h,this.generateExpression(y.specifiers[x],e.Sequence,j)]):(w.push(h+"{"),y.specifiers.length-x===1?(w.push(h),w.push(this.generateExpression(y.specifiers[x],e.Sequence,j)),w.push(h+"}"+h)):(St(function(H){var te,se;for(w.push(f),te=x,se=y.specifiers.length;te<se;++te)w.push(H),w.push(O.generateExpression(y.specifiers[te],e.Sequence,j)),te+1<se&&w.push(","+f)}),je(mt(w).toString())||w.push(f),w.push(o+"}"+h)))),w=Re(w,["from"+h,this.generateExpression(y.source,e.Sequence,j),this.semicolon(A)]),w)},VariableDeclarator:function(y,A){var w=A&q?j:U;return y.init?[this.generateExpression(y.id,e.Assignment,w),h,"=",h,this.generateExpression(y.init,e.Assignment,w)]:this.generatePattern(y.id,e.Assignment,w)},VariableDeclaration:function(y,A){var w,x,O,H,te,se=this;w=[y.kind],te=A&q?V:ue;function me(){for(H=y.declarations[0],v.comment&&H.leadingComments?(w.push(`
`),w.push(br(se.generateStatement(H,te)))):(w.push(ir()),w.push(se.generateStatement(H,te))),x=1,O=y.declarations.length;x<O;++x)H=y.declarations[x],v.comment&&H.leadingComments?(w.push(","+f),w.push(br(se.generateStatement(H,te)))):(w.push(","+h),w.push(se.generateStatement(H,te)))}return y.declarations.length>1?St(me):me(),w.push(this.semicolon(A)),w},ThrowStatement:function(y,A){return[Re("throw",this.generateExpression(y.argument,e.Sequence,j)),this.semicolon(A)]},TryStatement:function(y,A){var w,x,O,H;if(w=["try",this.maybeBlock(y.block,V)],w=this.maybeBlockSuffix(y.block,w),y.handlers)for(x=0,O=y.handlers.length;x<O;++x)w=Re(w,this.generateStatement(y.handlers[x],V)),(y.finalizer||x+1!==O)&&(w=this.maybeBlockSuffix(y.handlers[x].body,w));else{for(H=y.guardedHandlers||[],x=0,O=H.length;x<O;++x)w=Re(w,this.generateStatement(H[x],V)),(y.finalizer||x+1!==O)&&(w=this.maybeBlockSuffix(H[x].body,w));if(y.handler)if(Array.isArray(y.handler))for(x=0,O=y.handler.length;x<O;++x)w=Re(w,this.generateStatement(y.handler[x],V)),(y.finalizer||x+1!==O)&&(w=this.maybeBlockSuffix(y.handler[x].body,w));else w=Re(w,this.generateStatement(y.handler,V)),y.finalizer&&(w=this.maybeBlockSuffix(y.handler.body,w))}return y.finalizer&&(w=Re(w,["finally",this.maybeBlock(y.finalizer,V)])),w},SwitchStatement:function(y,A){var w,x,O,H,te,se=this;if(St(function(){w=["switch"+h+"(",se.generateExpression(y.discriminant,e.Sequence,j),")"+h+"{"+f]}),y.cases)for(te=V,O=0,H=y.cases.length;O<H;++O)O===H-1&&(te|=ne),x=br(this.generateStatement(y.cases[O],te)),w.push(x),je(mt(x).toString())||w.push(f);return w.push(br("}")),w},SwitchCase:function(y,A){var w,x,O,H,te,se=this;return St(function(){for(y.test?w=[Re("case",se.generateExpression(y.test,e.Sequence,j)),":"]:w=["default:"],O=0,H=y.consequent.length,H&&y.consequent[0].type===t.BlockStatement&&(x=se.maybeBlock(y.consequent[0],V),w.push(x),O=1),O!==H&&!je(mt(w).toString())&&w.push(f),te=V;O<H;++O)O===H-1&&A&ne&&(te|=ne),x=br(se.generateStatement(y.consequent[O],te)),w.push(x),O+1!==H&&!je(mt(x).toString())&&w.push(f)}),w},IfStatement:function(y,A){var w,x,O,H=this;return St(function(){w=["if"+h+"(",H.generateExpression(y.test,e.Sequence,j),")"]}),O=A&ne,x=V,O&&(x|=ne),y.alternate?(w.push(this.maybeBlock(y.consequent,V)),w=this.maybeBlockSuffix(y.consequent,w),y.alternate.type===t.IfStatement?w=Re(w,["else ",this.generateStatement(y.alternate,x)]):w=Re(w,Re("else",this.maybeBlock(y.alternate,x)))):w.push(this.maybeBlock(y.consequent,x)),w},ForStatement:function(y,A){var w,x=this;return St(function(){w=["for"+h+"("],y.init?y.init.type===t.VariableDeclaration?w.push(x.generateStatement(y.init,ue)):(w.push(x.generateExpression(y.init,e.Sequence,U)),w.push(";")):w.push(";"),y.test&&(w.push(h),w.push(x.generateExpression(y.test,e.Sequence,j))),w.push(";"),y.update&&(w.push(h),w.push(x.generateExpression(y.update,e.Sequence,j))),w.push(")")}),w.push(this.maybeBlock(y.body,A&ne?ie:V)),w},ForInStatement:function(y,A){return this.generateIterationForStatement("in",y,A&ne?ie:V)},ForOfStatement:function(y,A){return this.generateIterationForStatement("of",y,A&ne?ie:V)},LabeledStatement:function(y,A){return[y.label.name+":",this.maybeBlock(y.body,A&ne?ie:V)]},Program:function(y,A){var w,x,O,H,te;for(H=y.body.length,w=[_&&H>0?`
`:""],te=he,O=0;O<H;++O)!_&&O===H-1&&(te|=ne),C&&(O===0&&(y.body[0].leadingComments||ts(y.range[0],y.body[O].range[0],w)),O>0&&!y.body[O-1].trailingComments&&!y.body[O].leadingComments&&ts(y.body[O-1].range[1],y.body[O].range[0],w)),x=br(this.generateStatement(y.body[O],te)),w.push(x),O+1<H&&!je(mt(x).toString())&&(C&&y.body[O+1].leadingComments||w.push(f)),C&&O===H-1&&(y.body[O].trailingComments||ts(y.body[O].range[1],y.range[1],w));return w},FunctionDeclaration:function(y,A){return[ec(y,!0),"function",Vl(y)||ir(),y.id?xn(y.id):"",this.generateFunctionBody(y)]},ReturnStatement:function(y,A){return y.argument?[Re("return",this.generateExpression(y.argument,e.Sequence,j)),this.semicolon(A)]:["return"+this.semicolon(A)]},WhileStatement:function(y,A){var w,x=this;return St(function(){w=["while"+h+"(",x.generateExpression(y.test,e.Sequence,j),")"]}),w.push(this.maybeBlock(y.body,A&ne?ie:V)),w},WithStatement:function(y,A){var w,x=this;return St(function(){w=["with"+h+"(",x.generateExpression(y.object,e.Sequence,j),")"]}),w.push(this.maybeBlock(y.body,A&ne?ie:V)),w}},Et(Tt.prototype,Tt.Statement),Tt.Expression={SequenceExpression:function(y,A,w){var x,O,H;for(e.Sequence<A&&(w|=q),x=[],O=0,H=y.expressions.length;O<H;++O)x.push(this.generateExpression(y.expressions[O],e.Assignment,w)),O+1<H&&x.push(","+h);return fr(x,e.Sequence,A)},AssignmentExpression:function(y,A,w){return this.generateAssignment(y.left,y.right,y.operator,A,w)},ArrowFunctionExpression:function(y,A,w){return fr(this.generateFunctionBody(y),e.ArrowFunction,A)},ConditionalExpression:function(y,A,w){return e.Conditional<A&&(w|=q),fr([this.generateExpression(y.test,e.LogicalOR,w),h+"?"+h,this.generateExpression(y.consequent,e.Assignment,w),h+":"+h,this.generateExpression(y.alternate,e.Assignment,w)],e.Conditional,A)},LogicalExpression:function(y,A,w){return this.BinaryExpression(y,A,w)},BinaryExpression:function(y,A,w){var x,O,H,te,se,me;return te=r[y.operator],O=y.operator==="**"?e.Postfix:te,H=y.operator==="**"?te:te+1,te<A&&(w|=q),se=this.generateExpression(y.left,O,w),me=se.toString(),me.charCodeAt(me.length-1)===47&&i.code.isIdentifierPartES5(y.operator.charCodeAt(0))?x=[se,ir(),y.operator]:x=Re(se,y.operator),se=this.generateExpression(y.right,H,w),y.operator==="/"&&se.toString().charAt(0)==="/"||y.operator.slice(-1)==="<"&&se.toString().slice(0,3)==="!--"?(x.push(ir()),x.push(se)):x=Re(x,se),y.operator==="in"&&!(w&q)?["(",x,")"]:fr(x,te,A)},CallExpression:function(y,A,w){var x,O,H;for(x=[this.generateExpression(y.callee,e.Call,R)],x.push("("),O=0,H=y.arguments.length;O<H;++O)x.push(this.generateExpression(y.arguments[O],e.Assignment,j)),O+1<H&&x.push(","+h);return x.push(")"),w&X?fr(x,e.Call,A):["(",x,")"]},NewExpression:function(y,A,w){var x,O,H,te,se;if(O=y.arguments.length,se=w&Q&&!m&&O===0?L:W,x=Re("new",this.generateExpression(y.callee,e.New,se)),!(w&Q)||m||O>0){for(x.push("("),H=0,te=O;H<te;++H)x.push(this.generateExpression(y.arguments[H],e.Assignment,j)),H+1<te&&x.push(","+h);x.push(")")}return fr(x,e.New,A)},MemberExpression:function(y,A,w){var x,O;return x=[this.generateExpression(y.object,e.Call,w&X?R:W)],y.computed?(x.push("["),x.push(this.generateExpression(y.property,e.Sequence,w&X?j:L)),x.push("]")):(y.object.type===t.Literal&&typeof y.object.value=="number"&&(O=mt(x).toString(),O.indexOf(".")<0&&!/[eExX]/.test(O)&&i.code.isDecimalDigit(O.charCodeAt(O.length-1))&&!(O.length>=2&&O.charCodeAt(0)===48)&&x.push(" ")),x.push("."),x.push(xn(y.property))),fr(x,e.Member,A)},MetaProperty:function(y,A,w){var x;return x=[],x.push(typeof y.meta=="string"?y.meta:xn(y.meta)),x.push("."),x.push(typeof y.property=="string"?y.property:xn(y.property)),fr(x,e.Member,A)},UnaryExpression:function(y,A,w){var x,O,H,te,se;return O=this.generateExpression(y.argument,e.Unary,j),h===""?x=Re(y.operator,O):(x=[y.operator],y.operator.length>2?x=Re(x,O):(te=mt(x).toString(),se=te.charCodeAt(te.length-1),H=O.toString().charCodeAt(0),((se===43||se===45)&&se===H||i.code.isIdentifierPartES5(se)&&i.code.isIdentifierPartES5(H))&&x.push(ir()),x.push(O))),fr(x,e.Unary,A)},YieldExpression:function(y,A,w){var x;return y.delegate?x="yield*":x="yield",y.argument&&(x=Re(x,this.generateExpression(y.argument,e.Yield,j))),fr(x,e.Yield,A)},AwaitExpression:function(y,A,w){var x=Re(y.all?"await*":"await",this.generateExpression(y.argument,e.Await,j));return fr(x,e.Await,A)},UpdateExpression:function(y,A,w){return y.prefix?fr([y.operator,this.generateExpression(y.argument,e.Unary,j)],e.Unary,A):fr([this.generateExpression(y.argument,e.Postfix,j),y.operator],e.Postfix,A)},FunctionExpression:function(y,A,w){var x=[ec(y,!0),"function"];return y.id?(x.push(Vl(y)||ir()),x.push(xn(y.id))):x.push(Vl(y)||h),x.push(this.generateFunctionBody(y)),x},ArrayPattern:function(y,A,w){return this.ArrayExpression(y,A,w,!0)},ArrayExpression:function(y,A,w,x){var O,H,te=this;return y.elements.length?(H=x?!1:y.elements.length>1,O=["[",H?f:""],St(function(se){var me,ut;for(me=0,ut=y.elements.length;me<ut;++me)y.elements[me]?(O.push(H?se:""),O.push(te.generateExpression(y.elements[me],e.Assignment,j))):(H&&O.push(se),me+1===ut&&O.push(",")),me+1<ut&&O.push(","+(H?f:h))}),H&&!je(mt(O).toString())&&O.push(f),O.push(H?o:""),O.push("]"),O):"[]"},RestElement:function(y,A,w){return"..."+this.generatePattern(y.argument)},ClassExpression:function(y,A,w){var x,O;return x=["class"],y.id&&(x=Re(x,this.generateExpression(y.id,e.Sequence,j))),y.superClass&&(O=Re("extends",this.generateExpression(y.superClass,e.Unary,j)),x=Re(x,O)),x.push(h),x.push(this.generateStatement(y.body,ie)),x},MethodDefinition:function(y,A,w){var x,O;return y.static?x=["static"+h]:x=[],y.kind==="get"||y.kind==="set"?O=[Re(y.kind,this.generatePropertyKey(y.key,y.computed)),this.generateFunctionBody(y.value)]:O=[Ym(y),this.generatePropertyKey(y.key,y.computed),this.generateFunctionBody(y.value)],Re(x,O)},Property:function(y,A,w){return y.kind==="get"||y.kind==="set"?[y.kind,ir(),this.generatePropertyKey(y.key,y.computed),this.generateFunctionBody(y.value)]:y.shorthand?y.value.type==="AssignmentPattern"?this.AssignmentPattern(y.value,e.Sequence,j):this.generatePropertyKey(y.key,y.computed):y.method?[Ym(y),this.generatePropertyKey(y.key,y.computed),this.generateFunctionBody(y.value)]:[this.generatePropertyKey(y.key,y.computed),":"+h,this.generateExpression(y.value,e.Assignment,j)]},ObjectExpression:function(y,A,w){var x,O,H,te=this;return y.properties.length?(x=y.properties.length>1,St(function(){H=te.generateExpression(y.properties[0],e.Sequence,j)}),!x&&!Le(mt(H).toString())?["{",h,H,h,"}"]:(St(function(se){var me,ut;if(O=["{",f,se,H],x)for(O.push(","+f),me=1,ut=y.properties.length;me<ut;++me)O.push(se),O.push(te.generateExpression(y.properties[me],e.Sequence,j)),me+1<ut&&O.push(","+f)}),je(mt(O).toString())||O.push(f),O.push(o),O.push("}"),O)):"{}"},AssignmentPattern:function(y,A,w){return this.generateAssignment(y.left,y.right,"=",A,w)},ObjectPattern:function(y,A,w){var x,O,H,te,se,me=this;if(!y.properties.length)return"{}";if(te=!1,y.properties.length===1)se=y.properties[0],se.type===t.Property&&se.value.type!==t.Identifier&&(te=!0);else for(O=0,H=y.properties.length;O<H;++O)if(se=y.properties[O],se.type===t.Property&&!se.shorthand){te=!0;break}return x=["{",te?f:""],St(function(ut){var k,T;for(k=0,T=y.properties.length;k<T;++k)x.push(te?ut:""),x.push(me.generateExpression(y.properties[k],e.Sequence,j)),k+1<T&&x.push(","+(te?f:h))}),te&&!je(mt(x).toString())&&x.push(f),x.push(te?o:""),x.push("}"),x},ThisExpression:function(y,A,w){return"this"},Super:function(y,A,w){return"super"},Identifier:function(y,A,w){return xn(y)},ImportDefaultSpecifier:function(y,A,w){return xn(y.id||y.local)},ImportNamespaceSpecifier:function(y,A,w){var x=["*"],O=y.id||y.local;return O&&x.push(h+"as"+ir()+xn(O)),x},ImportSpecifier:function(y,A,w){var x=y.imported,O=[x.name],H=y.local;return H&&H.name!==x.name&&O.push(ir()+"as"+ir()+xn(H)),O},ExportSpecifier:function(y,A,w){var x=y.local,O=[x.name],H=y.exported;return H&&H.name!==x.name&&O.push(ir()+"as"+ir()+xn(H)),O},Literal:function(y,A,w){var x;if(y.hasOwnProperty("raw")&&E&&v.raw)try{if(x=E(y.raw).body[0].expression,x.type===t.Literal&&x.value===y.value)return y.raw}catch{}return y.regex?"/"+y.regex.pattern+"/"+y.regex.flags:y.value===null?"null":typeof y.value=="string"?Nn(y.value):typeof y.value=="number"?pn(y.value):typeof y.value=="boolean"?y.value?"true":"false":Bs(y.value)},GeneratorExpression:function(y,A,w){return this.ComprehensionExpression(y,A,w)},ComprehensionExpression:function(y,A,w){var x,O,H,te,se=this;return x=y.type===t.GeneratorExpression?["("]:["["],v.moz.comprehensionExpressionStartsWithAssignment&&(te=this.generateExpression(y.body,e.Assignment,j),x.push(te)),y.blocks&&St(function(){for(O=0,H=y.blocks.length;O<H;++O)te=se.generateExpression(y.blocks[O],e.Sequence,j),O>0||v.moz.comprehensionExpressionStartsWithAssignment?x=Re(x,te):x.push(te)}),y.filter&&(x=Re(x,"if"+h),te=this.generateExpression(y.filter,e.Sequence,j),x=Re(x,["(",te,")"])),v.moz.comprehensionExpressionStartsWithAssignment||(te=this.generateExpression(y.body,e.Assignment,j),x=Re(x,te)),x.push(y.type===t.GeneratorExpression?")":"]"),x},ComprehensionBlock:function(y,A,w){var x;return y.left.type===t.VariableDeclaration?x=[y.left.kind,ir(),this.generateStatement(y.left.declarations[0],ue)]:x=this.generateExpression(y.left,e.Call,j),x=Re(x,y.of?"of":"in"),x=Re(x,this.generateExpression(y.right,e.Sequence,j)),["for"+h+"(",x,")"]},SpreadElement:function(y,A,w){return["...",this.generateExpression(y.argument,e.Assignment,j)]},TaggedTemplateExpression:function(y,A,w){var x=R;w&X||(x=W);var O=[this.generateExpression(y.tag,e.Call,x),this.generateExpression(y.quasi,e.Primary,re)];return fr(O,e.TaggedTemplate,A)},TemplateElement:function(y,A,w){return y.value.raw},TemplateLiteral:function(y,A,w){var x,O,H;for(x=["`"],O=0,H=y.quasis.length;O<H;++O)x.push(this.generateExpression(y.quasis[O],e.Primary,j)),O+1<H&&(x.push("${"+h),x.push(this.generateExpression(y.expressions[O],e.Sequence,j)),x.push(h+"}"));return x.push("`"),x},ModuleSpecifier:function(y,A,w){return this.Literal(y,A,w)},ImportExpression:function(y,A,w){return fr(["import(",this.generateExpression(y.source,e.Assignment,j),")"],e.Call,A)}},Et(Tt.prototype,Tt.Expression),Tt.prototype.generateExpression=function(y,A,w){var x,O;return O=y.type||t.Property,v.verbatim&&y.hasOwnProperty(v.verbatim)?Xm(y,A):(x=this[O](y,A,w),v.comment&&(x=Fs(y,x)),mt(x,y))},Tt.prototype.generateStatement=function(y,A){var w,x;return w=this[y.type](y,A),v.comment&&(w=Fs(y,w)),x=mt(w).toString(),y.type===t.Program&&!_&&f===""&&x.charAt(x.length-1)===`
`&&(w=S?mt(w).replaceRight(/\s+$/,""):x.replace(/\s+$/,"")),mt(w,y)};function O1(y){var A;if(A=new Tt,$(y))return A.generateStatement(y,V);if(I(y))return A.generateExpression(y,e.Sequence,j);throw new Error("Unknown node type: "+y.type)}function T1(y,A){var w=xe(),x,O;return A!=null?(typeof A.indent=="string"&&(w.format.indent.style=A.indent),typeof A.base=="number"&&(w.format.indent.base=A.base),A=yt(w,A),a=A.format.indent.style,typeof A.base=="string"?o=A.base:o=Oe(a,A.format.indent.base)):(A=w,a=A.format.indent.style,o=Oe(a,A.format.indent.base)),u=A.format.json,c=A.format.renumber,l=u?!1:A.format.hexadecimal,d=u?"double":A.format.quotes,p=A.format.escapeless,f=A.format.newline,h=A.format.space,A.format.compact&&(f=h=a=o=""),m=A.format.parentheses,g=A.format.semicolons,_=A.format.safeConcatenation,D=A.directive,E=u?null:A.parse,S=A.sourceMap,P=A.sourceCode,C=A.format.preserveBlankLines&&P!==null,v=A,S&&(ga.browser?n=globalThis.sourceMap.SourceNode:n=xR().SourceNode),x=O1(y),S?(O=x.toStringWithSourceMap({file:A.file,sourceRoot:A.sourceMapRoot}),A.sourceContent&&O.map.setSourceContent(A.sourceMap,A.sourceContent),A.sourceMapWithCode?O:O.map.toString()):(O={code:x.toString(),map:null},A.sourceMapWithCode?O:O.code)}B={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},F=xe().format,ga.version=DR().version,ga.generate=T1,ga.attachComments=s.attachComments,ga.Precedence=yt({},e),ga.browser=!1,ga.FORMAT_MINIFY=B,ga.FORMAT_DEFAULTS=F})()});var OR=b((b5e,PR)=>{var Uoe=CR().generate;PR.exports=function(t,e){e||(e={});var r={},n=function s(i,o){if(i.type==="Literal")return i.value;if(i.type==="UnaryExpression"){var a=s(i.argument);return i.operator==="+"?+a:i.operator==="-"?-a:i.operator==="~"?~a:i.operator==="!"?!a:r}else if(i.type==="ArrayExpression"){for(var u=[],c=0,l=i.elements.length;c<l;c++){var d=s(i.elements[c]);if(d===r)return r;u.push(d)}return u}else if(i.type==="ObjectExpression"){for(var p={},c=0;c<i.properties.length;c++){var f=i.properties[c],h=f.value===null?f.value:s(f.value);if(h===r)return r;p[f.key.value||f.key.name]=h}return p}else if(i.type==="BinaryExpression"||i.type==="LogicalExpression"){var l=s(i.left);if(l===r)return r;var m=s(i.right);if(m===r)return r;var g=i.operator;return g==="=="?l==m:g==="==="?l===m:g==="!="?l!=m:g==="!=="?l!==m:g==="+"?l+m:g==="-"?l-m:g==="*"?l*m:g==="/"?l/m:g==="%"?l%m:g==="<"?l<m:g==="<="?l<=m:g===">"?l>m:g===">="?l>=m:g==="|"?l|m:g==="&"?l&m:g==="^"?l^m:g==="&&"?l&&m:g==="||"?l||m:r}else{if(i.type==="Identifier")return{}.hasOwnProperty.call(e,i.name)?e[i.name]:r;if(i.type==="ThisExpression")return{}.hasOwnProperty.call(e,"this")?e.this:r;if(i.type==="CallExpression"){var _=s(i.callee);if(_===r||typeof _!="function")return r;var D=i.callee.object?s(i.callee.object):r;D===r&&(D=null);for(var v=[],c=0,l=i.arguments.length;c<l;c++){var d=s(i.arguments[c]);if(d===r)return r;v.push(d)}return _.apply(D,v)}else if(i.type==="MemberExpression"){var p=s(i.object);if(p===r||typeof p=="function")return r;if(i.property.type==="Identifier")return p[i.property.name];var f=s(i.property);return f===r?r:p[f]}else if(i.type==="ConditionalExpression"){var a=s(i.test);return a===r?r:s(a?i.consequent:i.alternate)}else if(i.type==="ExpressionStatement"){var a=s(i.expression);return a===r?r:a}else{if(i.type==="ReturnStatement")return s(i.argument);if(i.type==="FunctionExpression"){var E=i.body.body,S={};Object.keys(e).forEach(function(Q){S[Q]=e[Q]});for(var c=0;c<i.params.length;c++){var P=i.params[c];if(P.type=="Identifier")e[P.name]=null;else return r}for(var c in E)if(s(E[c])===r)return r;e=S;var C=Object.keys(e),B=C.map(function(Q){return e[Q]});return Function(C.join(", "),"return "+Uoe(i)).apply(null,B)}else if(i.type==="TemplateLiteral"){for(var F="",c=0;c<i.expressions.length;c++)F+=s(i.quasis[c]),F+=s(i.expressions[c]);return F+=s(i.quasis[c]),F}else if(i.type==="TaggedTemplateExpression"){var I=s(i.tag),$=i.quasi,q=$.quasis.map(s),X=$.expressions.map(s);return I.apply(null,[q].concat(X))}else return i.type==="TemplateElement"?i.value.cooked:r}}}(t);return n===r?void 0:n}});var kR=b(qi=>{"use strict";var Koe=qi&&qi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Voe=qi&&qi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zoe=qi&&qi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Koe(e,t,r);return Voe(e,t),e},Joe=qi&&qi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qi,"__esModule",{value:!0});qi.Handlers=void 0;var Cx=zoe(z6()),Hoe=J6(),IR=Li(),Woe=Joe(OR());function TR(t){return function(e,r,n,s){var i=e.value,o=e.path,a=[],u=(function(c,l){FR(c)?(c.forEach(function(d,p){a.length>=s||n(p,d,r)&&a.push({path:l.concat(p),value:d})}),c.forEach(function(d,p){a.length>=s||t&&u(d,l.concat(p))})):Zoe(c)&&(Object.keys(c).forEach(function(d){a.length>=s||n(d,c[d],r)&&a.push({path:l.concat(d),value:c[d]})}),Object.keys(c).forEach(function(d){a.length>=s||t&&u(c[d],l.concat(d))}))}).bind(this);return u(i,o),a}}function Px(t,e){try{return(0,Woe.default)(t,e)}catch{}}function Lv(t){return function(e,r,n){return this.descend(r,e.expression.value,t,n)}}function Uv(t){return function(e,r,n){return this.traverse(r,e.expression.value,t,n)}}function BR(t){return t=t.filter(function(e){return e}),Yoe(t,function(e){return e.path.map(function(r){return String(r).replace("-","--")}).join("-")})}function Goe(t){var e=String(t);return e.match(/^-?[0-9]+$/)?parseInt(e):null}function FR(t){return Array.isArray(t)}function Zoe(t){return t&&!(t instanceof Array)&&t instanceof Object}function Dx(t,e,r){var n=Cx.parse(e).body[0].expression,s=Px(n,{"@":t.value}),i=r.replace(/\{\{\s*value\s*\}\}/g,s),o=IR.JSONPath.nodes(t.value,i);return o.forEach(function(a){a.path=t.path.concat(a.path.slice(1))}),o}var Xoe=function(){function t(){this._fns={"member-child-identifier":function(e,r){var n=e.expression.value,s=r.value;if(s instanceof Object&&n in s)return[{value:s[n],path:r.path.concat(n)}]},"member-descendant-identifier":Uv(function(e,r,n){return e==n}),"subscript-child-numeric_literal":Lv(function(e,r,n){return e===n}),"member-child-numeric_literal":Lv(function(e,r,n){return String(e)===String(n)}),"subscript-descendant-numeric_literal":Uv(function(e,r,n){return e===n}),"member-child-wildcard":Lv(function(){return!0}),"member-descendant-wildcard":Uv(function(){return!0}),"subscript-descendant-wildcard":Uv(function(){return!0}),"subscript-child-wildcard":Lv(function(){return!0}),"subscript-child-slice":function(e,r){if(FR(r.value)){var n=e.expression.value.split(":").map(Goe),s=r.value.map(function(i,o){return{value:i,path:r.path.concat(o)}});return Hoe.slice.apply(null,[s].concat(n))}},"subscript-child-union":function(e,r){var n=[];return e.expression.value.forEach(function(s){var i={operation:"subscript",scope:"child",expression:s.expression},o=this.resolve(i),a=o(i,r);a&&(n=n.concat(a))},this),BR(n)},"subscript-descendant-union":function(e,r,n){var s=this,i=[],o=IR.JSONPath.nodes(r,"$..*").slice(1);return o.forEach(function(a){i.length>=n||e.expression.value.forEach(function(u){var c={operation:"subscript",scope:"child",expression:u.expression},l=s.resolve(c),d=l(c,a);i=i.concat(d)})}),BR(i)},"subscript-child-filter_expression":function(e,r,n){var s=e.expression.value.slice(2,-1),i=Cx.parse(s).body[0].expression,o=function(a,u){return Px(i,{"@":u})};return this.descend(r,null,o,n)},"subscript-descendant-filter_expression":function(e,r,n){var s=e.expression.value.slice(2,-1),i=Cx.parse(s).body[0].expression,o=function(a,u){return Px(i,{"@":u})};return this.traverse(r,null,o,n)},"subscript-child-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return Dx(r,n,"$[{{value}}]")},"member-child-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return Dx(r,n,"$.{{value}}")},"member-descendant-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return Dx(r,n,"$..value")}},this.initialize()}return t.prototype.initialize=function(){this.traverse=TR(!0),this.descend=TR(),this._fns["subscript-child-string_literal"]=this._fns["member-child-identifier"],this._fns["member-descendant-numeric_literal"]=this._fns["subscript-descendant-string_literal"]=this._fns["member-descendant-identifier"]},t.prototype.resolve=function(e){var r=[e.operation,e.scope,e.expression.type].join("-"),n=this._fns[r];if(!n)throw new Error("couldn't resolve key: "+r);return n.bind(this)},t.prototype.register=function(e,r){if(!(r instanceof Function))throw new Error("handler must be a function");this._fns[e]=r},t}();qi.Handlers=Xoe;function Yoe(t,e){for(var r=[],n=[],s=0,i=t?.length;s<i;s++){var o=t[s],a=e?e(o,s):o;n.includes(a)||(n.push(a),r.push(o))}return r}});var RR=b(Kv=>{"use strict";Object.defineProperty(Kv,"__esModule",{value:!0});Kv.TOKENS=void 0;Kv.TOKENS={identifier:"[a-zA-Z_]+[a-zA-Z0-9_]*",integer:"-?(?:0|[1-9][0-9]*)",qq_string:'"(?:\\\\["bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^"\\\\])*"',q_string:"'(?:\\\\['bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^'\\\\])*'"}});var $R=b(dy=>{var Vv=function(){var t=function(P,C,B,F){for(B=B||{},F=P.length;F--;B[P[F]]=C);return B},e=[1,5],r=[1,6],n=[1,7],s=[1,8],i=[1,9],o=[1,18],a=[1,19],u=[1,20],c=[1,12,14,22],l=[1,29],d=[1,30],p=[1,33],f=[1,35],h=[1,31],m=[1,36],g=[1,37],_=[24,28],D={trace:function(){},yy:{},symbols_:{error:2,JSON_PATH:3,DOLLAR:4,PATH_COMPONENTS:5,LEADING_CHILD_MEMBER_EXPRESSION:6,PATH_COMPONENT:7,MEMBER_COMPONENT:8,SUBSCRIPT_COMPONENT:9,CHILD_MEMBER_COMPONENT:10,DESCENDANT_MEMBER_COMPONENT:11,DOT:12,MEMBER_EXPRESSION:13,DOT_DOT:14,STAR:15,IDENTIFIER:16,SCRIPT_EXPRESSION:17,INTEGER:18,END:19,CHILD_SUBSCRIPT_COMPONENT:20,DESCENDANT_SUBSCRIPT_COMPONENT:21,"[":22,SUBSCRIPT:23,"]":24,SUBSCRIPT_EXPRESSION:25,SUBSCRIPT_EXPRESSION_LIST:26,SUBSCRIPT_EXPRESSION_LISTABLE:27,",":28,STRING_LITERAL:29,ARRAY_SLICE:30,FILTER_EXPRESSION:31,QQ_STRING:32,Q_STRING:33,$accept:0,$end:1},terminals_:{2:"error",4:"DOLLAR",12:"DOT",14:"DOT_DOT",15:"STAR",16:"IDENTIFIER",17:"SCRIPT_EXPRESSION",18:"INTEGER",19:"END",22:"[",24:"]",28:",",30:"ARRAY_SLICE",31:"FILTER_EXPRESSION",32:"QQ_STRING",33:"Q_STRING"},productions_:[0,[3,1],[3,2],[3,1],[3,2],[5,1],[5,2],[7,1],[7,1],[8,1],[8,1],[10,2],[6,1],[11,2],[13,1],[13,1],[13,1],[13,1],[13,1],[9,1],[9,1],[20,3],[21,4],[23,1],[23,1],[26,1],[26,3],[27,1],[27,1],[27,1],[25,1],[25,1],[25,1],[29,1],[29,1]],performAction:function(C,B,F,I,$,q,X){I.ast||(I.ast=v,v.initialize());var Q=q.length-1;switch($){case 1:return I.ast.set({expression:{type:"root",value:q[Q]}}),I.ast.unshift(),I.ast.yield();break;case 2:return I.ast.set({expression:{type:"root",value:q[Q-1]}}),I.ast.unshift(),I.ast.yield();break;case 3:return I.ast.unshift(),I.ast.yield();break;case 4:return I.ast.set({operation:"member",scope:"child",expression:{type:"identifier",value:q[Q-1]}}),I.ast.unshift(),I.ast.yield();break;case 5:case 6:case 11:case 13:case 18:case 21:case 22:case 23:break;case 7:I.ast.set({operation:"member"}),I.ast.push();break;case 8:I.ast.set({operation:"subscript"}),I.ast.push();break;case 9:case 19:I.ast.set({scope:"child"});break;case 10:case 20:I.ast.set({scope:"descendant"});break;case 12:I.ast.set({scope:"child",operation:"member"});break;case 14:I.ast.set({expression:{type:"wildcard",value:q[Q]}});break;case 15:I.ast.set({expression:{type:"identifier",value:q[Q]}});break;case 16:I.ast.set({expression:{type:"script_expression",value:q[Q]}});break;case 17:I.ast.set({expression:{type:"numeric_literal",value:parseInt(q[Q])}});break;case 24:q[Q].length>1?I.ast.set({expression:{type:"union",value:q[Q]}}):this.$=q[Q];break;case 25:this.$=[q[Q]];break;case 26:this.$=q[Q-2].concat(q[Q]);break;case 27:this.$={expression:{type:"numeric_literal",value:parseInt(q[Q])}},I.ast.set(this.$);break;case 28:this.$={expression:{type:"string_literal",value:q[Q]}},I.ast.set(this.$);break;case 29:this.$={expression:{type:"slice",value:q[Q]}},I.ast.set(this.$);break;case 30:this.$={expression:{type:"wildcard",value:q[Q]}},I.ast.set(this.$);break;case 31:this.$={expression:{type:"script_expression",value:q[Q]}},I.ast.set(this.$);break;case 32:this.$={expression:{type:"filter_expression",value:q[Q]}},I.ast.set(this.$);break;case 33:case 34:this.$=q[Q];break}},table:[{3:1,4:[1,2],6:3,13:4,15:e,16:r,17:n,18:s,19:i},{1:[3]},{1:[2,1],5:10,7:11,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},{1:[2,3],5:21,7:11,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},t(c,[2,12]),t(c,[2,14]),t(c,[2,15]),t(c,[2,16]),t(c,[2,17]),t(c,[2,18]),{1:[2,2],7:22,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},t(c,[2,5]),t(c,[2,7]),t(c,[2,8]),t(c,[2,9]),t(c,[2,10]),t(c,[2,19]),t(c,[2,20]),{13:23,15:e,16:r,17:n,18:s,19:i},{13:24,15:e,16:r,17:n,18:s,19:i,22:[1,25]},{15:l,17:d,18:p,23:26,25:27,26:28,27:32,29:34,30:f,31:h,32:m,33:g},{1:[2,4],7:22,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},t(c,[2,6]),t(c,[2,11]),t(c,[2,13]),{15:l,17:d,18:p,23:38,25:27,26:28,27:32,29:34,30:f,31:h,32:m,33:g},{24:[1,39]},{24:[2,23]},{24:[2,24],28:[1,40]},{24:[2,30]},{24:[2,31]},{24:[2,32]},t(_,[2,25]),t(_,[2,27]),t(_,[2,28]),t(_,[2,29]),t(_,[2,33]),t(_,[2,34]),{24:[1,41]},t(c,[2,21]),{18:p,27:42,29:34,30:f,32:m,33:g},t(c,[2,22]),t(_,[2,26])],defaultActions:{27:[2,23],29:[2,30],30:[2,31],31:[2,32]},parseError:function(C,B){if(B.recoverable)this.trace(C);else{var F=new Error(C);throw F.hash=B,F}},parse:function(C){var B=this,F=[0],I=[],$=[null],q=[],X=this.table,Q="",K=0,G=0,ne=0,U=2,R=1,j=q.slice.call(arguments,1),W=Object.create(this.lexer),re={yy:{}};for(var L in this.yy)Object.prototype.hasOwnProperty.call(this.yy,L)&&(re.yy[L]=this.yy[L]);W.setInput(C,re.yy),re.yy.lexer=W,re.yy.parser=this,typeof W.yylloc>"u"&&(W.yylloc={});var V=W.yylloc;q.push(V);var ie=W.options&&W.options.ranges;typeof re.yy.parseError=="function"?this.parseError=re.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ue(vr){F.length=F.length-2*vr,$.length=$.length-vr,q.length=q.length-vr}for(var he=function(){var vr;return vr=W.lex()||R,typeof vr!="number"&&(vr=B.symbols_[vr]||vr),vr},ye,xe,Oe,Le,je,Et,yt={},pn,gr,Bs,es;;){if(Oe=F[F.length-1],this.defaultActions[Oe]?Le=this.defaultActions[Oe]:((ye===null||typeof ye>"u")&&(ye=he()),Le=X[Oe]&&X[Oe][ye]),typeof Le>"u"||!Le.length||!Le[0]){var Io="";es=[];for(pn in X[Oe])this.terminals_[pn]&&pn>U&&es.push("'"+this.terminals_[pn]+"'");W.showPosition?Io="Parse error on line "+(K+1)+`:
`+W.showPosition()+`
Expecting `+es.join(", ")+", got '"+(this.terminals_[ye]||ye)+"'":Io="Parse error on line "+(K+1)+": Unexpected "+(ye==R?"end of input":"'"+(this.terminals_[ye]||ye)+"'"),this.parseError(Io,{text:W.match,token:this.terminals_[ye]||ye,line:W.yylineno,loc:V,expected:es})}if(Le[0]instanceof Array&&Le.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Oe+", token: "+ye);switch(Le[0]){case 1:F.push(ye),$.push(W.yytext),q.push(W.yylloc),F.push(Le[1]),ye=null,xe?(ye=xe,xe=null):(G=W.yyleng,Q=W.yytext,K=W.yylineno,V=W.yylloc,ne>0&&ne--);break;case 2:if(gr=this.productions_[Le[1]][1],yt.$=$[$.length-gr],yt._$={first_line:q[q.length-(gr||1)].first_line,last_line:q[q.length-1].last_line,first_column:q[q.length-(gr||1)].first_column,last_column:q[q.length-1].last_column},ie&&(yt._$.range=[q[q.length-(gr||1)].range[0],q[q.length-1].range[1]]),Et=this.performAction.apply(yt,[Q,G,K,re.yy,Le[1],$,q].concat(j)),typeof Et<"u")return Et;gr&&(F=F.slice(0,-1*gr*2),$=$.slice(0,-1*gr),q=q.slice(0,-1*gr)),F.push(this.productions_[Le[1]][0]),$.push(yt.$),q.push(yt._$),Bs=X[F[F.length-2]][F[F.length-1]],F.push(Bs);break;case 3:return!0}}return!0}},v={initialize:function(){this._nodes=[],this._node={},this._stash=[]},set:function(P){for(var C in P)this._node[C]=P[C];return this._node},node:function(P){return arguments.length&&(this._node=P),this._node},push:function(){this._nodes.push(this._node),this._node={}},unshift:function(){this._nodes.unshift(this._node),this._node={}},yield:function(){var P=this._nodes;return this.initialize(),P}},E=function(){var P={EOF:1,parseError:function(B,F){if(this.yy.parser)this.yy.parser.parseError(B,F);else throw new Error(B)},setInput:function(C,B){return this.yy=B||this.yy||{},this._input=C,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var C=this._input[0];this.yytext+=C,this.yyleng++,this.offset++,this.match+=C,this.matched+=C;var B=C.match(/(?:\r\n?|\n).*/g);return B?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),C},unput:function(C){var B=C.length,F=C.split(/(?:\r\n?|\n)/g);this._input=C+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-B),this.offset-=B;var I=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),F.length-1&&(this.yylineno-=F.length-1);var $=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:F?(F.length===I.length?this.yylloc.first_column:0)+I[I.length-F.length].length-F[0].length:this.yylloc.first_column-B},this.options.ranges&&(this.yylloc.range=[$[0],$[0]+this.yyleng-B]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(C){this.unput(this.match.slice(C))},pastInput:function(){var C=this.matched.substr(0,this.matched.length-this.match.length);return(C.length>20?"...":"")+C.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var C=this.match;return C.length<20&&(C+=this._input.substr(0,20-C.length)),(C.substr(0,20)+(C.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var C=this.pastInput(),B=new Array(C.length+1).join("-");return C+this.upcomingInput()+`
`+B+"^"},test_match:function(C,B){var F,I,$;if(this.options.backtrack_lexer&&($={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&($.yylloc.range=this.yylloc.range.slice(0))),I=C[0].match(/(?:\r\n?|\n).*/g),I&&(this.yylineno+=I.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:I?I[I.length-1].length-I[I.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+C[0].length},this.yytext+=C[0],this.match+=C[0],this.matches=C,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(C[0].length),this.matched+=C[0],F=this.performAction.call(this,this.yy,this,B,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),F)return F;if(this._backtrack){for(var q in $)this[q]=$[q];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var C,B,F,I;this._more||(this.yytext="",this.match="");for(var $=this._currentRules(),q=0;q<$.length;q++)if(F=this._input.match(this.rules[$[q]]),F&&(!B||F[0].length>B[0].length)){if(B=F,I=q,this.options.backtrack_lexer){if(C=this.test_match(F,$[q]),C!==!1)return C;if(this._backtrack){B=!1;continue}else return!1}else if(!this.options.flex)break}return B?(C=this.test_match(B,$[I]),C!==!1?C:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var B=this.next();return B||this.lex()},begin:function(B){this.conditionStack.push(B)},popState:function(){var B=this.conditionStack.length-1;return B>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(B){return B=this.conditionStack.length-1-Math.abs(B||0),B>=0?this.conditionStack[B]:"INITIAL"},pushState:function(B){this.begin(B)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(B,F,I,$){var q=$;switch(I){case 0:return 4;case 1:return 14;case 2:return 12;case 3:return 15;case 4:return 16;case 5:return 22;case 6:return 24;case 7:return 28;case 8:return 30;case 9:return 18;case 10:return F.yytext=F.yytext.substr(1,F.yyleng-2),32;break;case 11:return F.yytext=F.yytext.substr(1,F.yyleng-2),33;break;case 12:return 17;case 13:return 31}},rules:[/^(?:\$)/,/^(?:\.\.)/,/^(?:\.)/,/^(?:\*)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:((-?(?:0|[1-9][0-9]*)))?\:((-?(?:0|[1-9][0-9]*)))?(\:((-?(?:0|[1-9][0-9]*)))?)?)/,/^(?:(-?(?:0|[1-9][0-9]*)))/,/^(?:"(?:\\["bfnrt\/\\]|\\u[a-fA-F0-9]{4}|[^"\\])*")/,/^(?:'(?:\\['bfnrt\/\\]|\\u[a-fA-F0-9]{4}|[^'\\])*')/,/^(?:\(.+?\)(?=\]))/,/^(?:\?\(.+?\)(?=\]))/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return P}();D.lexer=E;function S(){this.yy={}}return S.prototype=D,D.Parser=S,new S}();typeof jT<"u"&&typeof dy<"u"&&(dy.parser=Vv,dy.Parser=Vv.Parser,dy.parse=function(){return Vv.parse.apply(Vv,arguments)})});var jR=b(po=>{"use strict";var Qoe=po&&po.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),eae=po&&po.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),tae=po&&po.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Qoe(e,t,r);return eae(e,t),e};Object.defineProperty(po,"__esModule",{value:!0});po.Parser=void 0;var rae=tae($R());function nae(){var t=new rae.Parser,e=t.parseError;return t.yy.parseError=function(){t.yy.ast&&t.yy.ast.initialize(),e.apply(t,arguments)},t}po.Parser=nae});var NR=b(zv=>{"use strict";Object.defineProperty(zv,"__esModule",{value:!0});zv.assert=void 0;var iae=function(){function t(){}return t.ok=function(e,r){if(!e)throw new Error(r)},t.equal=function(e,r,n){if(e!==r)throw new Error(n)},t}();zv.assert=iae});var MR=b(Hv=>{"use strict";Object.defineProperty(Hv,"__esModule",{value:!0});Hv.JSONPath=void 0;var sae=kR(),oae=RR(),Jv=jR(),Hr=NR(),aae=function(){function t(){}return t.parse=function(e){return Hr.assert.ok(typeof e=="string","we need a path"),new Jv.Parser().parse(e)},t.parent=function(e,r){Hr.assert.ok(e instanceof Object,"obj needs to be an object"),Hr.assert.ok(r,"we need a path");var n=this.nodes(e,r)[0],s=n.path.pop();return this.value(e,n.path)},t.apply=function(e,r,n){Hr.assert.ok(e instanceof Object,"obj needs to be an object"),Hr.assert.ok(r,"we need a path"),Hr.assert.equal(typeof n,"function","fn needs to be function");var s=this.nodes(e,r).sort(function(i,o){return o.path.length-i.path.length});return s.forEach(function(i){var o=i.path.pop(),a=this.value(e,this.stringify(i.path)),u=i.value=n.call(e,a[o]);a[o]=u},this),s},t.value=function(e,r,n){if(Hr.assert.ok(e instanceof Object,"obj needs to be an object"),Hr.assert.ok(r,"we need a path"),n!==void 0){var s=this.nodes(e,r).shift();if(!s)return this._vivify(e,r,n);var i=s.path.slice(-1).shift(),o=this.parent(e,this.stringify(s.path));o[i]=n}return this.query(e,this.stringify(r),1).shift()},t._vivify=function(e,r,n){var s=this;Hr.assert.ok(e instanceof Object,"obj needs to be an object"),Hr.assert.ok(r,"we need a path");var i=new Jv.Parser().parse(r).map(function(a){return a.expression.value}),o=function(a,u){var c=a.pop(),l=s.value(e,a);l||(o(a.concat(),typeof c=="string"?{}:[]),l=s.value(e,a)),l[c]=u};return o(i,n),this.query(e,r)[0]},t.query=function(e,r,n){Hr.assert.ok(e instanceof Object,"obj needs to be an object"),Hr.assert.ok(typeof r=="string","we need a path");var s=this.nodes(e,r,n).map(function(i){return i.value});return s},t.paths=function(e,r,n){Hr.assert.ok(e instanceof Object,"obj needs to be an object"),Hr.assert.ok(r,"we need a path");var s=this.nodes(e,r,n).map(function(i){return i.path});return s},t.nodes=function(e,r,n){if(Hr.assert.ok(e instanceof Object,"obj needs to be an object"),Hr.assert.ok(r,"we need a path"),n===0)return[];var s=new Jv.Parser().parse(r),i=new sae.Handlers,o=[{path:["$"],value:e}],a=[];return s.length&&s[0].expression.type=="root"&&s.shift(),s.length?(s.forEach(function(u,c){if(!(a.length>=n)){var l=i.resolve(u),d=[];o.forEach(function(p){if(!(a.length>=n)){var f=l(u,p,n);c==s.length-1?a=a.concat(f||[]):d=d.concat(f||[])}}),o=d}}),n?a.slice(0,n):a):o},t.stringify=function(e){Hr.assert.ok(e,"we need a path");var r="$",n={"descendant-member":"..{{value}}","child-member":".{{value}}","descendant-subscript":"..[{{value}}]","child-subscript":"[{{value}}]"};return e=this._normalize(e),e.forEach(function(s){if(s.expression.type!="root"){var i=[s.scope,s.operation].join("-"),o=n[i],a;if(s.expression.type=="string_literal"?a=JSON.stringify(s.expression.value):a=s.expression.value,!o)throw new Error("couldn't find template "+i);r+=o.replace(/{{value}}/,a)}}),r},t._normalize=function(e){if(Hr.assert.ok(e,"we need a path"),typeof e=="string")return new Jv.Parser().parse(e);if(Array.isArray(e)&&typeof e[0]=="string"){var r=[{expression:{type:"root",value:"$"}}];return e.forEach(function(n,s){if(!(n=="$"&&s===0))if(typeof n=="string"&&n.match("^"+oae.TOKENS.identifier+"$"))r.push({operation:"member",scope:"child",expression:{value:n,type:"identifier"}});else{var i=typeof n=="number"?"numeric_literal":"string_literal";r.push({operation:"subscript",scope:"child",expression:{value:n,type:i}})}}),r}else if(Array.isArray(e)&&typeof e[0]=="object")return e;throw new Error("couldn't understand path "+e)},t}();Hv.JSONPath=aae});var Li=b(nl=>{"use strict";var uae=nl&&nl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cae=nl&&nl.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&uae(e,t,r)};Object.defineProperty(nl,"__esModule",{value:!0});cae(MR(),nl)});var UR=b((P5e,LR)=>{"use strict";var lae="Function.prototype.bind called on incompatible ",dae=Object.prototype.toString,fae=Math.max,pae="[object Function]",qR=function(e,r){for(var n=[],s=0;s<e.length;s+=1)n[s]=e[s];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},hae=function(e,r){for(var n=[],s=r||0,i=0;s<e.length;s+=1,i+=1)n[i]=e[s];return n},yae=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};LR.exports=function(e){var r=this;if(typeof r!="function"||dae.apply(r)!==pae)throw new TypeError(lae+r);for(var n=hae(arguments,1),s,i=function(){if(this instanceof s){var l=r.apply(this,qR(n,arguments));return Object(l)===l?l:this}return r.apply(e,qR(n,arguments))},o=fae(0,r.length-n.length),a=[],u=0;u<o;u++)a[u]="$"+u;if(s=Function("binder","return function ("+yae(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,s.prototype=new c,c.prototype=null}return s}});var Wv=b((O5e,KR)=>{"use strict";var mae=UR();KR.exports=Function.prototype.bind||mae});var zR=b((T5e,VR)=>{"use strict";VR.exports=Error});var HR=b((B5e,JR)=>{"use strict";JR.exports=EvalError});var GR=b((I5e,WR)=>{"use strict";WR.exports=RangeError});var XR=b((F5e,ZR)=>{"use strict";ZR.exports=ReferenceError});var Gv=b((k5e,YR)=>{"use strict";YR.exports=SyntaxError});var pt=b((R5e,QR)=>{"use strict";QR.exports=TypeError});var t4=b(($5e,e4)=>{"use strict";e4.exports=URIError});var Ox=b((j5e,r4)=>{"use strict";r4.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;e[r]=s;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==s||o.enumerable!==!0)return!1}return!0}});var il=b((N5e,i4)=>{"use strict";var n4=typeof Symbol<"u"&&Symbol,gae=Ox();i4.exports=function(){return typeof n4!="function"||typeof Symbol!="function"||typeof n4("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:gae()}});var Bx=b((M5e,s4)=>{"use strict";var Tx={__proto__:null,foo:{}},vae=Object;s4.exports=function(){return{__proto__:Tx}.foo===Tx.foo&&!(Tx instanceof vae)}});var sl=b((q5e,o4)=>{"use strict";var bae=Function.prototype.call,wae=Object.prototype.hasOwnProperty,_ae=Wv();o4.exports=_ae.call(bae,wae)});var lr=b((L5e,d4)=>{"use strict";var ht,Eae=zR(),Sae=HR(),Aae=GR(),xae=XR(),yf=Gv(),hf=pt(),Dae=t4(),l4=Function,Ix=function(t){try{return l4('"use strict"; return ('+t+").constructor;")()}catch{}},ol=Object.getOwnPropertyDescriptor;if(ol)try{ol({},"")}catch{ol=null}var Fx=function(){throw new hf},Cae=ol?function(){try{return arguments.callee,Fx}catch{try{return ol(arguments,"callee").get}catch{return Fx}}}():Fx,ff=il()(),Pae=Bx()(),Wr=Object.getPrototypeOf||(Pae?function(t){return t.__proto__}:null),pf={},Oae=typeof Uint8Array>"u"||!Wr?ht:Wr(Uint8Array),al={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?ht:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ht:ArrayBuffer,"%ArrayIteratorPrototype%":ff&&Wr?Wr([][Symbol.iterator]()):ht,"%AsyncFromSyncIteratorPrototype%":ht,"%AsyncFunction%":pf,"%AsyncGenerator%":pf,"%AsyncGeneratorFunction%":pf,"%AsyncIteratorPrototype%":pf,"%Atomics%":typeof Atomics>"u"?ht:Atomics,"%BigInt%":typeof BigInt>"u"?ht:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ht:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ht:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ht:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Eae,"%eval%":eval,"%EvalError%":Sae,"%Float32Array%":typeof Float32Array>"u"?ht:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ht:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ht:FinalizationRegistry,"%Function%":l4,"%GeneratorFunction%":pf,"%Int8Array%":typeof Int8Array>"u"?ht:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ht:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ht:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ff&&Wr?Wr(Wr([][Symbol.iterator]())):ht,"%JSON%":typeof JSON=="object"?JSON:ht,"%Map%":typeof Map>"u"?ht:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ff||!Wr?ht:Wr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ht:Promise,"%Proxy%":typeof Proxy>"u"?ht:Proxy,"%RangeError%":Aae,"%ReferenceError%":xae,"%Reflect%":typeof Reflect>"u"?ht:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ht:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ff||!Wr?ht:Wr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ht:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ff&&Wr?Wr(""[Symbol.iterator]()):ht,"%Symbol%":ff?Symbol:ht,"%SyntaxError%":yf,"%ThrowTypeError%":Cae,"%TypedArray%":Oae,"%TypeError%":hf,"%Uint8Array%":typeof Uint8Array>"u"?ht:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ht:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ht:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ht:Uint32Array,"%URIError%":Dae,"%WeakMap%":typeof WeakMap>"u"?ht:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ht:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ht:WeakSet};if(Wr)try{null.error}catch(t){a4=Wr(Wr(t)),al["%Error.prototype%"]=a4}var a4,Tae=function t(e){var r;if(e==="%AsyncFunction%")r=Ix("async function () {}");else if(e==="%GeneratorFunction%")r=Ix("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Ix("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=t("%AsyncGenerator%");s&&Wr&&(r=Wr(s.prototype))}return al[e]=r,r},u4={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},fy=Wv(),Zv=sl(),Bae=fy.call(Function.call,Array.prototype.concat),Iae=fy.call(Function.apply,Array.prototype.splice),c4=fy.call(Function.call,String.prototype.replace),Xv=fy.call(Function.call,String.prototype.slice),Fae=fy.call(Function.call,RegExp.prototype.exec),kae=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Rae=/\\(\\)?/g,$ae=function(e){var r=Xv(e,0,1),n=Xv(e,-1);if(r==="%"&&n!=="%")throw new yf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new yf("invalid intrinsic syntax, expected opening `%`");var s=[];return c4(e,kae,function(i,o,a,u){s[s.length]=a?c4(u,Rae,"$1"):o||i}),s},jae=function(e,r){var n=e,s;if(Zv(u4,n)&&(s=u4[n],n="%"+s[0]+"%"),Zv(al,n)){var i=al[n];if(i===pf&&(i=Tae(n)),typeof i>"u"&&!r)throw new hf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:i}}throw new yf("intrinsic "+e+" does not exist!")};d4.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new hf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new hf('"allowMissing" argument must be a boolean');if(Fae(/^%?[^%]*%?$/,e)===null)throw new yf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=$ae(e),s=n.length>0?n[0]:"",i=jae("%"+s+"%",r),o=i.name,a=i.value,u=!1,c=i.alias;c&&(s=c[0],Iae(n,Bae([0,1],c)));for(var l=1,d=!0;l<n.length;l+=1){var p=n[l],f=Xv(p,0,1),h=Xv(p,-1);if((f==='"'||f==="'"||f==="`"||h==='"'||h==="'"||h==="`")&&f!==h)throw new yf("property names with quotes must have matching quotes");if((p==="constructor"||!d)&&(u=!0),s+="."+p,o="%"+s+"%",Zv(al,o))a=al[o];else if(a!=null){if(!(p in a)){if(!r)throw new hf("base intrinsic for "+e+" exists, but the property is not available.");return}if(ol&&l+1>=n.length){var m=ol(a,p);d=!!m,d&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[p]}else d=Zv(a,p),a=a[p];d&&!u&&(al[o]=a)}}return a}});var py=b((U5e,f4)=>{"use strict";var Nae=lr(),Yv=Nae("%Object.defineProperty%",!0)||!1;if(Yv)try{Yv({},"a",{value:1})}catch{Yv=!1}f4.exports=Yv});var eb=b((K5e,p4)=>{"use strict";var Mae=lr(),Qv=Mae("%Object.getOwnPropertyDescriptor%",!0);if(Qv)try{Qv([],"length")}catch{Qv=null}p4.exports=Qv});var tb=b((V5e,m4)=>{"use strict";var h4=py(),qae=Gv(),mf=pt(),y4=eb();m4.exports=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new mf("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new mf("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new mf("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new mf("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new mf("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new mf("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!y4&&y4(e,r);if(h4)h4(e,r,{configurable:o===null&&u?u.configurable:!o,enumerable:s===null&&u?u.enumerable:!s,value:n,writable:i===null&&u?u.writable:!i});else if(a||!s&&!i&&!o)e[r]=n;else throw new qae("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var hy=b((z5e,v4)=>{"use strict";var kx=py(),g4=function(){return!!kx};g4.hasArrayLengthDefineBug=function(){if(!kx)return null;try{return kx([],"length",{value:1}).length!==1}catch{return!0}};v4.exports=g4});var S4=b((J5e,E4)=>{"use strict";var Lae=lr(),b4=tb(),Uae=hy()(),w4=eb(),_4=pt(),Kae=Lae("%Math.floor%");E4.exports=function(e,r){if(typeof e!="function")throw new _4("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Kae(r)!==r)throw new _4("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],s=!0,i=!0;if("length"in e&&w4){var o=w4(e,"length");o&&!o.configurable&&(s=!1),o&&!o.writable&&(i=!1)}return(s||i||!n)&&(Uae?b4(e,"length",r,!0,!0):b4(e,"length",r)),e}});var yy=b((H5e,rb)=>{"use strict";var Rx=Wv(),nb=lr(),Vae=S4(),zae=pt(),D4=nb("%Function.prototype.apply%"),C4=nb("%Function.prototype.call%"),P4=nb("%Reflect.apply%",!0)||Rx.call(C4,D4),A4=py(),Jae=nb("%Math.max%");rb.exports=function(e){if(typeof e!="function")throw new zae("a function is required");var r=P4(Rx,C4,arguments);return Vae(r,1+Jae(0,e.length-(arguments.length-1)),!0)};var x4=function(){return P4(Rx,D4,arguments)};A4?A4(rb.exports,"apply",{value:x4}):rb.exports.apply=x4});var $x=b((W5e,T4)=>{"use strict";var O4=Object.prototype.toString;T4.exports=function(e){var r=O4.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&O4.call(e.callee)==="[object Function]"),n}});var M4=b((G5e,N4)=>{"use strict";var j4;Object.keys||(my=Object.prototype.hasOwnProperty,jx=Object.prototype.toString,B4=$x(),Nx=Object.prototype.propertyIsEnumerable,I4=!Nx.call({toString:null},"toString"),F4=Nx.call(function(){},"prototype"),gy=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ib=function(t){var e=t.constructor;return e&&e.prototype===t},k4={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},R4=function(){if(typeof window>"u")return!1;for(var t in window)try{if(!k4["$"+t]&&my.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{ib(window[t])}catch{return!0}}catch{return!0}return!1}(),$4=function(t){if(typeof window>"u"||!R4)return ib(t);try{return ib(t)}catch{return!1}},j4=function(e){var r=e!==null&&typeof e=="object",n=jx.call(e)==="[object Function]",s=B4(e),i=r&&jx.call(e)==="[object String]",o=[];if(!r&&!n&&!s)throw new TypeError("Object.keys called on a non-object");var a=F4&&n;if(i&&e.length>0&&!my.call(e,0))for(var u=0;u<e.length;++u)o.push(String(u));if(s&&e.length>0)for(var c=0;c<e.length;++c)o.push(String(c));else for(var l in e)!(a&&l==="prototype")&&my.call(e,l)&&o.push(String(l));if(I4)for(var d=$4(e),p=0;p<gy.length;++p)!(d&&gy[p]==="constructor")&&my.call(e,gy[p])&&o.push(gy[p]);return o});var my,jx,B4,Nx,I4,F4,gy,ib,k4,R4,$4;N4.exports=j4});var K4=b((Z5e,U4)=>{"use strict";var Hae=Array.prototype.slice,Wae=$x(),q4=Object.keys,sb=q4?function(e){return q4(e)}:M4(),L4=Object.keys;sb.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return Wae(n)?L4(Hae.call(n)):L4(n)})}else Object.keys=sb;return Object.keys||sb};U4.exports=sb});var Eu=b((X5e,H4)=>{"use strict";var Gae=K4(),Zae=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Xae=Object.prototype.toString,Yae=Array.prototype.concat,V4=tb(),Qae=function(t){return typeof t=="function"&&Xae.call(t)==="[object Function]"},z4=hy()(),eue=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!Qae(n)||!n())return}z4?V4(t,e,r,!0):V4(t,e,r)},J4=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Gae(e);Zae&&(n=Yae.call(n,Object.getOwnPropertySymbols(e)));for(var s=0;s<n.length;s+=1)eue(t,n[s],e[n[s]],r[n[s]])};J4.supportsDescriptors=!!z4;H4.exports=J4});var di=b((Y5e,Z4)=>{"use strict";var W4=lr(),G4=yy(),tue=G4(W4("String.prototype.indexOf"));Z4.exports=function(e,r){var n=W4(e,!!r);return typeof n=="function"&&tue(e,".prototype.")>-1?G4(n):n}});var Mx=b((Q5e,Y4)=>{"use strict";var rue=lr(),X4=rue("%Array%"),nue=!X4.isArray&&di()("Object.prototype.toString");Y4.exports=X4.isArray||function(e){return nue(e)==="[object Array]"}});var qx=b((eke,Q4)=>{"use strict";Q4.exports=Mx()});var Lx=b((tke,e$)=>{"use strict";var iue=lr(),sue=di(),oue=pt(),aue=qx(),uue=iue("%Reflect.apply%",!0)||sue("Function.prototype.apply");e$.exports=function(e,r){var n=arguments.length>2?arguments[2]:[];if(!aue(n))throw new oue("Assertion failed: optional `argumentsList`, if provided, must be a List");return uue(e,r,n)}});var t$=b(()=>{});var _y=b((ike,w$)=>{var Xx=typeof Map=="function"&&Map.prototype,Ux=Object.getOwnPropertyDescriptor&&Xx?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ab=Xx&&Ux&&typeof Ux.get=="function"?Ux.get:null,r$=Xx&&Map.prototype.forEach,Yx=typeof Set=="function"&&Set.prototype,Kx=Object.getOwnPropertyDescriptor&&Yx?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,ub=Yx&&Kx&&typeof Kx.get=="function"?Kx.get:null,n$=Yx&&Set.prototype.forEach,cue=typeof WeakMap=="function"&&WeakMap.prototype,by=cue?WeakMap.prototype.has:null,lue=typeof WeakSet=="function"&&WeakSet.prototype,wy=lue?WeakSet.prototype.has:null,due=typeof WeakRef=="function"&&WeakRef.prototype,i$=due?WeakRef.prototype.deref:null,fue=Boolean.prototype.valueOf,pue=Object.prototype.toString,hue=Function.prototype.toString,yue=String.prototype.match,Qx=String.prototype.slice,Au=String.prototype.replace,mue=String.prototype.toUpperCase,s$=String.prototype.toLowerCase,h$=RegExp.prototype.test,o$=Array.prototype.concat,ho=Array.prototype.join,gue=Array.prototype.slice,a$=Math.floor,Jx=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Vx=Object.getOwnPropertySymbols,Hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,gf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",vn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===gf||!0)?Symbol.toStringTag:null,y$=Object.prototype.propertyIsEnumerable,u$=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function c$(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||h$.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-a$(-t):a$(t);if(n!==t){var s=String(n),i=Qx.call(e,s.length+1);return Au.call(s,r,"$&_")+"."+Au.call(Au.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Au.call(e,r,"$&_")}var Wx=t$(),l$=Wx.custom,d$=g$(l$)?l$:null;w$.exports=function t(e,r,n,s){var i=r||{};if(Su(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Su(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Su(i,"customInspect")?i.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Su(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Su(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return b$(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return a?c$(e,u):u}if(typeof e=="bigint"){var c=String(e)+"n";return a?c$(e,c):c}var l=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=l&&l>0&&typeof e=="object")return Gx(e)?"[Array]":"[Object]";var d=Rue(i,n);if(typeof s>"u")s=[];else if(v$(s,e)>=0)return"[Circular]";function p(X,Q,K){if(Q&&(s=gue.call(s),s.push(Q)),K){var G={depth:i.depth};return Su(i,"quoteStyle")&&(G.quoteStyle=i.quoteStyle),t(X,G,n+1,s)}return t(X,i,n+1,s)}if(typeof e=="function"&&!f$(e)){var f=Due(e),h=ob(e,p);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(h.length>0?" { "+ho.call(h,", ")+" }":"")}if(g$(e)){var m=gf?Au.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Hx.call(e);return typeof e=="object"&&!gf?vy(m):m}if(Iue(e)){for(var g="<"+s$.call(String(e.nodeName)),_=e.attributes||[],D=0;D<_.length;D++)g+=" "+_[D].name+"="+m$(vue(_[D].value),"double",i);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+s$.call(String(e.nodeName))+">",g}if(Gx(e)){if(e.length===0)return"[]";var v=ob(e,p);return d&&!kue(v)?"["+Zx(v,d)+"]":"[ "+ho.call(v,", ")+" ]"}if(wue(e)){var E=ob(e,p);return!("cause"in Error.prototype)&&"cause"in e&&!y$.call(e,"cause")?"{ ["+String(e)+"] "+ho.call(o$.call("[cause]: "+p(e.cause),E),", ")+" }":E.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+ho.call(E,", ")+" }"}if(typeof e=="object"&&o){if(d$&&typeof e[d$]=="function"&&Wx)return Wx(e,{depth:l-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Cue(e)){var S=[];return r$&&r$.call(e,function(X,Q){S.push(p(Q,e,!0)+" => "+p(X,e))}),p$("Map",ab.call(e),S,d)}if(Tue(e)){var P=[];return n$&&n$.call(e,function(X){P.push(p(X,e))}),p$("Set",ub.call(e),P,d)}if(Pue(e))return zx("WeakMap");if(Bue(e))return zx("WeakSet");if(Oue(e))return zx("WeakRef");if(Eue(e))return vy(p(Number(e)));if(Aue(e))return vy(p(Jx.call(e)));if(Sue(e))return vy(fue.call(e));if(_ue(e))return vy(p(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof globalThis<"u"&&e===globalThis)return"{ [object globalThis] }";if(!bue(e)&&!f$(e)){var C=ob(e,p),B=u$?u$(e)===Object.prototype:e instanceof Object||e.constructor===Object,F=e instanceof Object?"":"null prototype",I=!B&&vn&&Object(e)===e&&vn in e?Qx.call(xu(e),8,-1):F?"Object":"",$=B||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",q=$+(I||F?"["+ho.call(o$.call([],I||[],F||[]),": ")+"] ":"");return C.length===0?q+"{}":d?q+"{"+Zx(C,d)+"}":q+"{ "+ho.call(C,", ")+" }"}return String(e)};function m$(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function vue(t){return Au.call(String(t),/"/g,"&quot;")}function Gx(t){return xu(t)==="[object Array]"&&(!vn||!(typeof t=="object"&&vn in t))}function bue(t){return xu(t)==="[object Date]"&&(!vn||!(typeof t=="object"&&vn in t))}function f$(t){return xu(t)==="[object RegExp]"&&(!vn||!(typeof t=="object"&&vn in t))}function wue(t){return xu(t)==="[object Error]"&&(!vn||!(typeof t=="object"&&vn in t))}function _ue(t){return xu(t)==="[object String]"&&(!vn||!(typeof t=="object"&&vn in t))}function Eue(t){return xu(t)==="[object Number]"&&(!vn||!(typeof t=="object"&&vn in t))}function Sue(t){return xu(t)==="[object Boolean]"&&(!vn||!(typeof t=="object"&&vn in t))}function g$(t){if(gf)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Hx)return!1;try{return Hx.call(t),!0}catch{}return!1}function Aue(t){if(!t||typeof t!="object"||!Jx)return!1;try{return Jx.call(t),!0}catch{}return!1}var xue=Object.prototype.hasOwnProperty||function(t){return t in this};function Su(t,e){return xue.call(t,e)}function xu(t){return pue.call(t)}function Due(t){if(t.name)return t.name;var e=yue.call(hue.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function v$(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function Cue(t){if(!ab||!t||typeof t!="object")return!1;try{ab.call(t);try{ub.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Pue(t){if(!by||!t||typeof t!="object")return!1;try{by.call(t,by);try{wy.call(t,wy)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Oue(t){if(!i$||!t||typeof t!="object")return!1;try{return i$.call(t),!0}catch{}return!1}function Tue(t){if(!ub||!t||typeof t!="object")return!1;try{ub.call(t);try{ab.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Bue(t){if(!wy||!t||typeof t!="object")return!1;try{wy.call(t,wy);try{by.call(t,by)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Iue(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function b$(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return b$(Qx.call(t,0,e.maxStringLength),e)+n}var s=Au.call(Au.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Fue);return m$(s,"single",e)}function Fue(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+mue.call(e.toString(16))}function vy(t){return"Object("+t+")"}function zx(t){return t+" { ? }"}function p$(t,e,r,n){var s=n?Zx(r,n):ho.call(r,", ");return t+" ("+e+") {"+s+"}"}function kue(t){for(var e=0;e<t.length;e++)if(v$(t[e],`
`)>=0)return!1;return!0}function Rue(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=ho.call(Array(t.indent+1)," ");else return null;return{base:r,prev:ho.call(Array(e+1),r)}}function Zx(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+ho.call(t,","+r)+`
`+e.prev}function ob(t,e){var r=Gx(t),n=[];if(r){n.length=t.length;for(var s=0;s<t.length;s++)n[s]=Su(t,s)?e(t[s],t):""}var i=typeof Vx=="function"?Vx(t):[],o;if(gf){o={};for(var a=0;a<i.length;a++)o["$"+i[a]]=i[a]}for(var u in t)Su(t,u)&&(r&&String(Number(u))===u&&u<t.length||gf&&o["$"+u]instanceof Symbol||(h$.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if(typeof Vx=="function")for(var c=0;c<i.length;c++)y$.call(t,i[c])&&n.push("["+e(i[c])+"]: "+e(t[i[c]],t));return n}});var ul=b((ske,_$)=>{"use strict";_$.exports=function(e){return typeof e=="string"||typeof e=="symbol"}});var S$=b((oke,E$)=>{"use strict";E$.exports=function(e){if(e===null)return"Null";if(typeof e>"u")return"Undefined";if(typeof e=="function"||typeof e=="object")return"Object";if(typeof e=="number")return"Number";if(typeof e=="boolean")return"Boolean";if(typeof e=="string")return"String"}});var ws=b((ake,A$)=>{"use strict";var $ue=S$();A$.exports=function(e){return typeof e=="symbol"?"Symbol":typeof e=="bigint"?"BigInt":$ue(e)}});var Ey=b((uke,D$)=>{"use strict";var x$=pt(),jue=_y(),Nue=ul(),Mue=ws();D$.exports=function(e,r){if(Mue(e)!=="Object")throw new x$("Assertion failed: Type(O) is not Object");if(!Nue(r))throw new x$("Assertion failed: IsPropertyKey(P) is not true, got "+jue(r));return e[r]}});var P$=b((cke,C$)=>{"use strict";var que=pt(),Lue=_y(),Uue=ul();C$.exports=function(e,r){if(!Uue(r))throw new que("Assertion failed: IsPropertyKey(P) is not true, got "+Lue(r));return e[r]}});var iD=b((lke,B$)=>{"use strict";var T$=Function.prototype.toString,vf=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,tD,cb;if(typeof vf=="function"&&typeof Object.defineProperty=="function")try{tD=Object.defineProperty({},"length",{get:function(){throw cb}}),cb={},vf(function(){throw 42},null,tD)}catch(t){t!==cb&&(vf=null)}else vf=null;var Kue=/^\s*class\b/,rD=function(e){try{var r=T$.call(e);return Kue.test(r)}catch{return!1}},eD=function(e){try{return rD(e)?!1:(T$.call(e),!0)}catch{return!1}},lb=Object.prototype.toString,Vue="[object Object]",zue="[object Function]",Jue="[object GeneratorFunction]",Hue="[object HTMLAllCollection]",Wue="[object HTML document.all class]",Gue="[object HTMLCollection]",Zue=typeof Symbol=="function"&&!!Symbol.toStringTag,Xue=!(0 in[,]),nD=function(){return!1};typeof document=="object"&&(O$=document.all,lb.call(O$)===lb.call(document.all)&&(nD=function(e){if((Xue||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=lb.call(e);return(r===Hue||r===Wue||r===Gue||r===Vue)&&e("")==null}catch{}return!1}));var O$;B$.exports=vf?function(e){if(nD(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{vf(e,null,tD)}catch(r){if(r!==cb)return!1}return!rD(e)&&eD(e)}:function(e){if(nD(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Zue)return eD(e);if(rD(e))return!1;var r=lb.call(e);return r!==zue&&r!==Jue&&!/^\[object HTML/.test(r)?!1:eD(e)}});var db=b((dke,I$)=>{"use strict";I$.exports=iD()});var $$=b((fke,R$)=>{"use strict";var F$=pt(),Yue=P$(),Que=db(),ece=ul(),k$=_y();R$.exports=function(e,r){if(!ece(r))throw new F$("Assertion failed: IsPropertyKey(P) is not true");var n=Yue(e,r);if(n!=null){if(!Que(n))throw new F$(k$(r)+" is not a function: "+k$(n));return n}}});var fb=b((pke,j$)=>{"use strict";var tce=Ox();j$.exports=function(){return tce()&&!!Symbol.toStringTag}});var uD=b((hke,L$)=>{"use strict";var sD=di(),N$=fb()(),M$,q$,oD,aD;N$&&(M$=sD("Object.prototype.hasOwnProperty"),q$=sD("RegExp.prototype.exec"),oD={},pb=function(){throw oD},aD={toString:pb,valueOf:pb},typeof Symbol.toPrimitive=="symbol"&&(aD[Symbol.toPrimitive]=pb));var pb,rce=sD("Object.prototype.toString"),nce=Object.getOwnPropertyDescriptor,ice="[object RegExp]";L$.exports=N$?function(e){if(!e||typeof e!="object")return!1;var r=nce(e,"lastIndex"),n=r&&M$(r,"value");if(!n)return!1;try{q$(e,aD)}catch(s){return s===oD}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:rce(e)===ice}});var cD=b((yke,U$)=>{"use strict";U$.exports=function(e){return!!e}});var z$=b((mke,V$)=>{"use strict";var sce=lr(),K$=sce("%Symbol.match%",!0),oce=uD(),ace=cD();V$.exports=function(e){if(!e||typeof e!="object")return!1;if(K$){var r=e[K$];if(typeof r<"u")return ace(r)}return oce(e)}});var Sy=b((gke,J$)=>{"use strict";var uce=lr(),cce=uce("%String%"),lce=pt();J$.exports=function(e){if(typeof e=="symbol")throw new lce("Cannot convert a Symbol value to a string");return cce(e)}});var hb=b((vke,H$)=>{"use strict";var dce=pt();H$.exports=function(e){if(e==null)throw new dce(arguments.length>0&&arguments[1]||"Cannot call method on "+e);return e}});var G$=b((bke,W$)=>{"use strict";var xy=function(){return typeof(function(){}).name=="string"},Ay=Object.getOwnPropertyDescriptor;if(Ay)try{Ay([],"length")}catch{Ay=null}xy.functionsHaveConfigurableNames=function(){if(!xy()||!Ay)return!1;var e=Ay(function(){},"name");return!!e&&!!e.configurable};var fce=Function.prototype.bind;xy.boundFunctionsHaveNames=function(){return xy()&&typeof fce=="function"&&(function(){}).bind().name!==""};W$.exports=xy});var lD=b((wke,X$)=>{"use strict";var Z$=tb(),pce=hy()(),hce=G$().functionsHaveConfigurableNames(),yce=pt();X$.exports=function(e,r){if(typeof e!="function")throw new yce("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||hce)&&(pce?Z$(e,"name",r,!0,!0):Z$(e,"name",r)),e}});var dD=b((_ke,Y$)=>{"use strict";var mce=lD(),gce=pt(),vce=Object;Y$.exports=mce(function(){if(this==null||this!==vce(this))throw new gce("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0)});var fD=b((Eke,Q$)=>{"use strict";var bce=dD(),wce=Eu().supportsDescriptors,_ce=Object.getOwnPropertyDescriptor;Q$.exports=function(){if(wce&&/a/mig.flags==="gim"){var e=_ce(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return e.get}}return bce}});var rj=b((Ske,tj)=>{"use strict";var Ece=Eu().supportsDescriptors,Sce=fD(),Ace=Object.getOwnPropertyDescriptor,xce=Object.defineProperty,Dce=TypeError,ej=Object.getPrototypeOf,Cce=/a/;tj.exports=function(){if(!Ece||!ej)throw new Dce("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=Sce(),r=ej(Cce),n=Ace(r,"flags");return(!n||n.get!==e)&&xce(r,"flags",{configurable:!0,enumerable:!1,get:e}),e}});var pD=b((Ake,sj)=>{"use strict";var Pce=Eu(),Oce=yy(),Tce=dD(),nj=fD(),Bce=rj(),ij=Oce(nj());Pce(ij,{getPolyfill:nj,implementation:Tce,shim:Bce});sj.exports=ij});var hD=b((xke,oj)=>{"use strict";oj.exports=function(e){return typeof e=="number"&&e>=55296&&e<=56319}});var yD=b((Dke,aj)=>{"use strict";aj.exports=function(e){return typeof e=="number"&&e>=56320&&e<=57343}});var lj=b((Cke,cj)=>{"use strict";var Ice=lr(),Fce=pt(),uj=Ice("%String.fromCharCode%"),kce=hD(),Rce=yD();cj.exports=function(e,r){if(!kce(e)||!Rce(r))throw new Fce("Assertion failed: `lead` must be a leading surrogate char code, and `trail` must be a trailing surrogate char code");return uj(e)+uj(r)}});var mj=b((Pke,yj)=>{"use strict";var dj=pt(),hj=di(),$ce=hD(),fj=yD(),jce=lj(),Nce=hj("String.prototype.charAt"),pj=hj("String.prototype.charCodeAt");yj.exports=function(e,r){if(typeof e!="string")throw new dj("Assertion failed: `string` must be a String");var n=e.length;if(r<0||r>=n)throw new dj("Assertion failed: `position` must be >= 0, and < the length of `string`");var s=pj(e,r),i=Nce(e,r),o=$ce(s),a=fj(s);if(!o&&!a)return{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!1};if(a||r+1===n)return{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0};var u=pj(e,r+1);return fj(u)?{"[[CodePoint]]":jce(s,u),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":!1}:{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0}}});var Dy=b((Oke,gj)=>{"use strict";gj.exports=Number.isNaN||function(e){return e!==e}});var mD=b((Tke,vj)=>{"use strict";var Mce=Dy();vj.exports=function(t){return(typeof t=="number"||typeof t=="bigint")&&!Mce(t)&&t!==1/0&&t!==-1/0}});var _j=b((Bke,wj)=>{"use strict";var bj=lr(),qce=bj("%Math.abs%"),Lce=bj("%Math.floor%"),Uce=Dy(),Kce=mD();wj.exports=function(e){if(typeof e!="number"||Uce(e)||!Kce(e))return!1;var r=qce(e);return Lce(r)===r}});var gD=b((Ike,Ej)=>{"use strict";Ej.exports=Number.MAX_SAFE_INTEGER||9007199254740991});var Aj=b((Fke,Sj)=>{"use strict";var Vce=mj(),zce=_j(),Jce=gD(),vD=pt();Sj.exports=function(e,r,n){if(typeof e!="string")throw new vD("Assertion failed: `S` must be a String");if(!zce(r)||r<0||r>Jce)throw new vD("Assertion failed: `length` must be an integer >= 0 and <= 2**53");if(typeof n!="boolean")throw new vD("Assertion failed: `unicode` must be a Boolean");if(!n)return r+1;var s=e.length;if(r+1>=s)return r+1;var i=Vce(e,r);return r+i["[[CodeUnitCount]]"]}});var Dj=b((kke,xj)=>{"use strict";var Hce=pt();xj.exports=function(e,r){if(typeof r!="boolean")throw new Hce("Assertion failed: Type(done) is not Boolean");return{value:e,done:r}}});var yb=b((Rke,Cj)=>{"use strict";var Wce=pt(),Cy=sl(),Gce={__proto__:null,"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};Cj.exports=function(e){if(!e||typeof e!="object")return!1;for(var r in e)if(Cy(e,r)&&!Gce[r])return!1;var n=Cy(e,"[[Value]]")||Cy(e,"[[Writable]]"),s=Cy(e,"[[Get]]")||Cy(e,"[[Set]]");if(n&&s)throw new Wce("Property Descriptors may not be both accessor and data descriptors");return!0}});var Bj=b(($ke,Tj)=>{"use strict";var Zce=hy(),Pj=py(),Oj=Zce.hasArrayLengthDefineBug(),Xce=Oj&&Mx(),Yce=di(),Qce=Yce("Object.prototype.propertyIsEnumerable");Tj.exports=function(e,r,n,s,i,o){if(!Pj){if(!e(o)||!o["[[Configurable]]"]||!o["[[Writable]]"]||i in s&&Qce(s,i)!==!!o["[[Enumerable]]"])return!1;var a=o["[[Value]]"];return s[i]=a,r(s[i],a)}return Oj&&i==="length"&&"[[Value]]"in o&&Xce(s)&&s.length!==o["[[Value]]"]?(s.length=o["[[Value]]"],s.length===o["[[Value]]"]):(Pj(s,i,n(o)),!0)}});var Fj=b((jke,Ij)=>{"use strict";Ij.exports=function(e){if(typeof e>"u")return e;var r={};return"[[Value]]"in e&&(r.value=e["[[Value]]"]),"[[Writable]]"in e&&(r.writable=!!e["[[Writable]]"]),"[[Get]]"in e&&(r.get=e["[[Get]]"]),"[[Set]]"in e&&(r.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(r.enumerable=!!e["[[Enumerable]]"]),"[[Configurable]]"in e&&(r.configurable=!!e["[[Configurable]]"]),r}});var Rj=b((Nke,kj)=>{"use strict";var ele=pt(),tle=yb(),rle=Fj();kj.exports=function(e){if(typeof e<"u"&&!tle(e))throw new ele("Assertion failed: `Desc` must be a Property Descriptor");return rle(e)}});var Nj=b((Mke,jj)=>{"use strict";var nle=pt(),$j=sl(),ile=yb();jj.exports=function(e){if(typeof e>"u")return!1;if(!ile(e))throw new nle("Assertion failed: `Desc` must be a Property Descriptor");return!(!$j(e,"[[Value]]")&&!$j(e,"[[Writable]]"))}});var bD=b((qke,qj)=>{"use strict";var Mj=Dy();qj.exports=function(e,r){return e===r?e===0?1/e===1/r:!0:Mj(e)&&Mj(r)}});var Kj=b((Lke,Uj)=>{"use strict";var yo=sl(),mb=pt(),sle=ws(),wD=cD(),Lj=db();Uj.exports=function(e){if(sle(e)!=="Object")throw new mb("ToPropertyDescriptor requires an object");var r={};if(yo(e,"enumerable")&&(r["[[Enumerable]]"]=wD(e.enumerable)),yo(e,"configurable")&&(r["[[Configurable]]"]=wD(e.configurable)),yo(e,"value")&&(r["[[Value]]"]=e.value),yo(e,"writable")&&(r["[[Writable]]"]=wD(e.writable)),yo(e,"get")){var n=e.get;if(typeof n<"u"&&!Lj(n))throw new mb("getter must be a function");r["[[Get]]"]=n}if(yo(e,"set")){var s=e.set;if(typeof s<"u"&&!Lj(s))throw new mb("setter must be a function");r["[[Set]]"]=s}if((yo(r,"[[Get]]")||yo(r,"[[Set]]"))&&(yo(r,"[[Value]]")||yo(r,"[[Writable]]")))throw new mb("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return r}});var ED=b((Uke,zj)=>{"use strict";var _D=pt(),Vj=yb(),ole=Bj(),ale=Rj(),ule=Nj(),cle=ul(),lle=bD(),dle=Kj(),fle=ws();zj.exports=function(e,r,n){if(fle(e)!=="Object")throw new _D("Assertion failed: Type(O) is not Object");if(!cle(r))throw new _D("Assertion failed: IsPropertyKey(P) is not true");var s=Vj(n)?n:dle(n);if(!Vj(s))throw new _D("Assertion failed: Desc is not a valid Property Descriptor");return ole(ule,lle,ale,e,r,s)}});var SD=b((Kke,Jj)=>{"use strict";Jj.exports=function(e){return e===null||typeof e!="function"&&typeof e!="object"}});var Zj=b((Vke,Gj)=>{"use strict";var Wj=lr(),ple=Wj("%Object.preventExtensions%",!0),hle=Wj("%Object.isExtensible%",!0),Hj=SD();Gj.exports=ple?function(e){return!Hj(e)&&hle(e)}:function(e){return!Hj(e)}});var Yj=b((zke,Xj)=>{"use strict";var Py=pt(),yle=ED(),mle=Zj(),gle=ul(),vle=ws();Xj.exports=function(e,r,n,s){if(vle(e)!=="Object")throw new Py("Assertion failed: `homeObject` is not an Object");if(!gle(r))throw new Py("Assertion failed: `key` is not a Property Key or a Private Name");if(typeof n!="function")throw new Py("Assertion failed: `closure` is not a function");if(typeof s!="boolean")throw new Py("Assertion failed: `enumerable` is not a Boolean");if(!mle(e))throw new Py("Assertion failed: `homeObject` is not an ordinary, extensible object, with no non-configurable properties");var i={"[[Value]]":n,"[[Writable]]":!0,"[[Enumerable]]":s,"[[Configurable]]":!0};yle(e,r,i)}});var eN=b((Jke,Qj)=>{"use strict";Qj.exports=function(e,r){for(var n=0;n<e.length;n+=1)r(e[n],n,e)}});var xD=b((Hke,rN)=>{"use strict";var tN=lr(),bf=di(),ble=_y(),wle=pt(),gb=tN("%WeakMap%",!0),vb=tN("%Map%",!0),_le=bf("WeakMap.prototype.get",!0),Ele=bf("WeakMap.prototype.set",!0),Sle=bf("WeakMap.prototype.has",!0),Ale=bf("Map.prototype.get",!0),xle=bf("Map.prototype.set",!0),Dle=bf("Map.prototype.has",!0),AD=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},Cle=function(t,e){var r=AD(t,e);return r&&r.value},Ple=function(t,e,r){var n=AD(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},Ole=function(t,e){return!!AD(t,e)};rN.exports=function(){var e,r,n,s={assert:function(i){if(!s.has(i))throw new wle("Side channel does not contain "+ble(i))},get:function(i){if(gb&&i&&(typeof i=="object"||typeof i=="function")){if(e)return _le(e,i)}else if(vb){if(r)return Ale(r,i)}else if(n)return Cle(n,i)},has:function(i){if(gb&&i&&(typeof i=="object"||typeof i=="function")){if(e)return Sle(e,i)}else if(vb){if(r)return Dle(r,i)}else if(n)return Ole(n,i);return!1},set:function(i,o){gb&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new gb),Ele(e,i,o)):vb?(r||(r=new vb),xle(r,i,o)):(n||(n={key:{},next:null}),Ple(n,i,o))}};return s}});var CD=b((Wke,nN)=>{"use strict";var Tle=sl(),Oy=xD()(),va=pt(),DD={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new va("`O` is not an object");if(typeof e!="string")throw new va("`slot` must be a string");if(Oy.assert(t),!DD.has(t,e))throw new va("`"+e+"` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new va("`O` is not an object");if(typeof e!="string")throw new va("`slot` must be a string");var r=Oy.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new va("`O` is not an object");if(typeof e!="string")throw new va("`slot` must be a string");var r=Oy.get(t);return!!r&&Tle(r,"$"+e)},set:function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new va("`O` is not an object");if(typeof e!="string")throw new va("`slot` must be a string");var n=Oy.get(t);n||(n={},Oy.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(DD);nN.exports=DD});var aN=b((Gke,oN)=>{"use strict";var Ble=lr(),iN=Ble("%Object.create%",!0),sN=pt(),Ile=Gv(),Fle=qx(),kle=ws(),Rle=eN(),$le=CD(),jle=Bx()();oN.exports=function(e){if(e!==null&&kle(e)!=="Object")throw new sN("Assertion failed: `proto` must be null or an object");var r=arguments.length<2?[]:arguments[1];if(!Fle(r))throw new sN("Assertion failed: `additionalInternalSlotsList` must be an Array");var n;if(iN)n=iN(e);else if(jle)n={__proto__:e};else{if(e===null)throw new Ile("native Object.create support is required to create null objects");var s=function(){};s.prototype=e,n=new s}return r.length>0&&Rle(r,function(i){$le.set(n,i,void 0)}),n}});var cN=b((Zke,uN)=>{"use strict";var PD=pt(),Nle=di()("RegExp.prototype.exec"),Mle=Lx(),qle=Ey(),Lle=db(),Ule=ws();uN.exports=function(e,r){if(Ule(e)!=="Object")throw new PD("Assertion failed: `R` must be an Object");if(typeof r!="string")throw new PD("Assertion failed: `S` must be a String");var n=qle(e,"exec");if(Lle(n)){var s=Mle(n,e,[r]);if(typeof s=="object")return s;throw new PD('"exec" method must return `null` or an Object')}return Nle(e,r)}});var OD=b((Xke,fN)=>{"use strict";var bb=pt(),Kle=ul(),lN=bD(),Vle=ws(),dN=function(){try{return delete[].length,!0}catch{return!1}}();fN.exports=function(e,r,n,s){if(Vle(e)!=="Object")throw new bb("Assertion failed: `O` must be an Object");if(!Kle(r))throw new bb("Assertion failed: `P` must be a Property Key");if(typeof s!="boolean")throw new bb("Assertion failed: `Throw` must be a Boolean");if(s){if(e[r]=n,dN&&!lN(e[r],n))throw new bb("Attempted to assign to readonly property.");return!0}try{return e[r]=n,dN?lN(e[r],n):!0}catch{return!1}}});var hN=b((Yke,pN)=>{"use strict";pN.exports=function(e){return e===null||typeof e!="function"&&typeof e!="object"}});var mN=b((Qke,yN)=>{"use strict";var zle=Date.prototype.getDay,Jle=function(e){try{return zle.call(e),!0}catch{return!1}},Hle=Object.prototype.toString,Wle="[object Date]",Gle=fb()();yN.exports=function(e){return typeof e!="object"||e===null?!1:Gle?Jle(e):Hle.call(e)===Wle}});var wN=b((e6e,TD)=>{"use strict";var Zle=Object.prototype.toString,Xle=il()();Xle?(gN=Symbol.prototype.toString,vN=/^Symbol\(.*\)$/,bN=function(e){return typeof e.valueOf()!="symbol"?!1:vN.test(gN.call(e))},TD.exports=function(e){if(typeof e=="symbol")return!0;if(Zle.call(e)!=="[object Symbol]")return!1;try{return bN(e)}catch{return!1}}):TD.exports=function(e){return!1};var gN,vN,bN});var AN=b((t6e,SN)=>{"use strict";var Yle=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",BD=hN(),EN=iD(),Qle=mN(),_N=wN(),ede=function(e,r){if(typeof e>"u"||e===null)throw new TypeError("Cannot call method on "+e);if(typeof r!="string"||r!=="number"&&r!=="string")throw new TypeError('hint must be "string" or "number"');var n=r==="string"?["toString","valueOf"]:["valueOf","toString"],s,i,o;for(o=0;o<n.length;++o)if(s=e[n[o]],EN(s)&&(i=s.call(e),BD(i)))return i;throw new TypeError("No default value")},tde=function(e,r){var n=e[r];if(n!==null&&typeof n<"u"){if(!EN(n))throw new TypeError(n+" returned for property "+r+" of object "+e+" is not a function");return n}};SN.exports=function(e){if(BD(e))return e;var r="default";arguments.length>1&&(arguments[1]===String?r="string":arguments[1]===Number&&(r="number"));var n;if(Yle&&(Symbol.toPrimitive?n=tde(e,Symbol.toPrimitive):_N(e)&&(n=Symbol.prototype.valueOf)),typeof n<"u"){var s=n.call(e,r);if(BD(s))return s;throw new TypeError("unable to convert exotic object to primitive")}return r==="default"&&(Qle(e)||_N(e))&&(r="string"),ede(e,r==="default"?"number":r)}});var CN=b((r6e,DN)=>{"use strict";var xN=AN();DN.exports=function(e){return arguments.length>1?xN(e,arguments[1]):xN(e)}});var ON=b((n6e,PN)=>{"use strict";var rde=di(),nde=uD(),ide=rde("RegExp.prototype.exec"),sde=pt();PN.exports=function(e){if(!nde(e))throw new sde("`regex` must be a RegExp");return function(n){return ide(e,n)!==null}}});var ID=b((i6e,IN)=>{"use strict";var ode=hb(),ade=Sy(),ude=di(),TN=ude("String.prototype.replace"),BN=/^\s$/.test("\u180E"),cde=BN?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,lde=BN?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;IN.exports=function(){var e=ade(ode(this));return TN(TN(e,cde,""),lde,"")}});var FD=b((s6e,kN)=>{"use strict";var dde=ID(),FN="\u200B",wf="\u180E";kN.exports=function(){return String.prototype.trim&&FN.trim()===FN&&wf.trim()===wf&&("_"+wf).trim()==="_"+wf&&(wf+"_").trim()===wf+"_"?String.prototype.trim:dde}});var $N=b((o6e,RN)=>{"use strict";var fde=Eu(),pde=FD();RN.exports=function(){var e=pde();return fde(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}});var qN=b((a6e,MN)=>{"use strict";var hde=yy(),yde=Eu(),mde=hb(),gde=ID(),jN=FD(),vde=$N(),bde=hde(jN()),NN=function(e){return mde(e),bde(e)};yde(NN,{getPolyfill:jN,implementation:gde,shim:vde});MN.exports=NN});var VN=b((u6e,KN)=>{"use strict";var RD=lr(),kD=RD("%Number%"),wde=RD("%RegExp%"),_de=pt(),LN=RD("%parseInt%"),Ede=di(),wb=ON(),UN=Ede("String.prototype.slice"),Sde=wb(/^0b[01]+$/i),Ade=wb(/^0o[0-7]+$/i),xde=wb(/^[-+]0x[0-9a-f]+$/i),Dde=["\x85","\u200B","\uFFFE"].join(""),Cde=new wde("["+Dde+"]","g"),Pde=wb(Cde),Ode=qN();KN.exports=function t(e){if(typeof e!="string")throw new _de("Assertion failed: `argument` is not a String");if(Sde(e))return kD(LN(UN(e,2),2));if(Ade(e))return kD(LN(UN(e,2),8));if(Pde(e)||xde(e))return NaN;var r=Ode(e);return r!==e?t(r):kD(e)}});var WN=b((c6e,HN)=>{"use strict";var Tde=lr(),zN=pt(),JN=Tde("%Number%"),Bde=SD(),Ide=CN(),Fde=VN();HN.exports=function(e){var r=Bde(e)?e:Ide(e,JN);if(typeof r=="symbol")throw new zN("Cannot convert a Symbol value to a number");if(typeof r=="bigint")throw new zN("Conversion from 'BigInt' to 'number' is not allowed.");return typeof r=="string"?Fde(r):JN(r)}});var ZN=b((l6e,GN)=>{"use strict";var kde=Math.floor;GN.exports=function(e){return typeof e=="bigint"?e:kde(e)}});var QN=b((d6e,YN)=>{"use strict";var XN=ZN(),Rde=pt();YN.exports=function(e){if(typeof e!="number"&&typeof e!="bigint")throw new Rde("argument must be a Number or a BigInt");var r=e<0?-XN(-e):XN(e);return r===0?0:r}});var t9=b((f6e,e9)=>{"use strict";var $de=WN(),jde=QN(),Nde=Dy(),Mde=mD();e9.exports=function(e){var r=$de(e);return Nde(r)||r===0?0:Mde(r)?jde(r):r}});var $D=b((p6e,n9)=>{"use strict";var r9=gD(),qde=t9();n9.exports=function(e){var r=qde(e);return r<=0?0:r>r9?r9:r}});var o9=b((h6e,s9)=>{"use strict";var Lde=lr(),i9=Lde("%Object.defineProperty%",!0),Ude=fb()(),Kde=sl(),_b=Ude?Symbol.toStringTag:null;s9.exports=function(e,r){var n=arguments.length>2&&arguments[2]&&arguments[2].force;_b&&(n||!Kde(e,_b))&&(i9?i9(e,_b,{configurable:!0,enumerable:!1,value:r,writable:!1}):e[_b]=r)}});var f9=b((y6e,d9)=>{"use strict";var Vde=lr(),zde=il()(),Ty=pt(),a9=Vde("%IteratorPrototype%",!0),Jde=Aj(),Eb=Dj(),l9=Yj(),u9=Ey(),Hde=aN(),Wde=cN(),Gde=OD(),Zde=$D(),Xde=Sy(),Yde=ws(),cn=CD(),Qde=o9(),cl=function(e,r,n,s){if(typeof r!="string")throw new Ty("`S` must be a string");if(typeof n!="boolean")throw new Ty("`global` must be a boolean");if(typeof s!="boolean")throw new Ty("`fullUnicode` must be a boolean");cn.set(this,"[[IteratingRegExp]]",e),cn.set(this,"[[IteratedString]]",r),cn.set(this,"[[Global]]",n),cn.set(this,"[[Unicode]]",s),cn.set(this,"[[Done]]",!1)};a9&&(cl.prototype=Hde(a9));var efe=function(){var e=this;if(Yde(e)!=="Object")throw new Ty("receiver must be an object");if(!(e instanceof cl)||!cn.has(e,"[[IteratingRegExp]]")||!cn.has(e,"[[IteratedString]]")||!cn.has(e,"[[Global]]")||!cn.has(e,"[[Unicode]]")||!cn.has(e,"[[Done]]"))throw new Ty('"this" value must be a RegExpStringIterator instance');if(cn.get(e,"[[Done]]"))return Eb(void 0,!0);var r=cn.get(e,"[[IteratingRegExp]]"),n=cn.get(e,"[[IteratedString]]"),s=cn.get(e,"[[Global]]"),i=cn.get(e,"[[Unicode]]"),o=Wde(r,n);if(o===null)return cn.set(e,"[[Done]]",!0),Eb(void 0,!0);if(s){var a=Xde(u9(o,"0"));if(a===""){var u=Zde(u9(r,"lastIndex")),c=Jde(n,u,i);Gde(r,"lastIndex",c,!0)}return Eb(o,!1)}return cn.set(e,"[[Done]]",!0),Eb(o,!1)};l9(cl.prototype,"next",efe,!1);zde&&(Qde(cl.prototype,"RegExp String Iterator"),Symbol.iterator&&typeof cl.prototype[Symbol.iterator]!="function"&&(c9=function(){return this},l9(cl.prototype,Symbol.iterator,c9,!1)));var c9;d9.exports=function(e,r,n,s){return new cl(e,r,n,s)}});var h9=b((m6e,p9)=>{"use strict";p9.exports=lr()});var m9=b((g6e,MD)=>{"use strict";var tfe=h9(),y9=tfe("%Reflect.construct%",!0),Sb=ED();try{Sb({},"",{"[[Get]]":function(){}})}catch{Sb=null}Sb&&y9?(jD={},ND={},Sb(ND,"length",{"[[Get]]":function(){throw jD},"[[Enumerable]]":!0}),MD.exports=function(e){try{y9(e,ND)}catch(r){return r===jD}}):MD.exports=function(e){return typeof e=="function"&&!!e.prototype};var jD,ND});var w9=b((v6e,b9)=>{"use strict";var rfe=lr(),g9=rfe("%Symbol.species%",!0),qD=pt(),nfe=m9(),v9=ws();b9.exports=function(e,r){if(v9(e)!=="Object")throw new qD("Assertion failed: Type(O) is not Object");var n=e.constructor;if(typeof n>"u")return r;if(v9(n)!=="Object")throw new qD("O.constructor is not an Object");var s=g9?n[g9]:void 0;if(s==null)return r;if(nfe(s))return s;throw new qD("no constructor found")}});var x9=b((b6e,A9)=>{"use strict";var ife=f9(),E9=Ey(),sfe=OD(),ofe=w9(),afe=$D(),S9=Sy(),ufe=ws(),cfe=pD(),lfe=lD(),dfe=di(),ffe=lr(),pfe=pt(),_9=dfe("String.prototype.indexOf"),LD=ffe("%RegExp%"),hfe="flags"in LD.prototype,yfe=function(e,r){var n,s="flags"in r?E9(r,"flags"):S9(cfe(r));return hfe&&typeof s=="string"?n=new e(r,s):e===LD?n=new e(r.source,s):n=new e(r,s),{flags:s,matcher:n}},mfe=lfe(function(e){var r=this;if(ufe(r)!=="Object")throw new pfe('"this" value must be an Object');var n=S9(e),s=ofe(r,LD),i=yfe(s,r),o=i.flags,a=i.matcher,u=afe(E9(r,"lastIndex"));sfe(a,"lastIndex",u,!0);var c=_9(o,"g")>-1,l=_9(o,"u")>-1;return ife(a,n,c,l)},"[Symbol.matchAll]",!0);A9.exports=mfe});var UD=b((w6e,D9)=>{"use strict";var gfe=il()(),vfe=x9();D9.exports=function(){return!gfe||typeof Symbol.matchAll!="symbol"||typeof RegExp.prototype[Symbol.matchAll]!="function"?vfe:RegExp.prototype[Symbol.matchAll]}});var KD=b((_6e,F9)=>{"use strict";var C9=Lx(),bfe=Ey(),wfe=$$(),B9=z$(),P9=Sy(),O9=hb(),_fe=di(),Efe=il()(),Sfe=pD(),Afe=lr(),xfe=pt(),I9=Afe("%RegExp%"),Dfe=_fe("String.prototype.indexOf"),Cfe=UD(),T9=function(e){var r=Cfe();if(Efe&&typeof Symbol.matchAll=="symbol"){var n=wfe(e,Symbol.matchAll);return n===I9.prototype[Symbol.matchAll]&&n!==r?r:n}if(B9(e))return r};F9.exports=function(e){var r=O9(this);if(typeof e<"u"&&e!==null){var n=B9(e);if(n){var s="flags"in e?bfe(e,"flags"):Sfe(e);if(O9(s),Dfe(P9(s),"g")<0)throw new xfe("matchAll requires a global regular expression")}var i=T9(e);if(typeof i<"u")return C9(i,e,[r])}var o=P9(r),a=new I9(e,"g");return C9(T9(a),a,[o])}});var VD=b((E6e,k9)=>{"use strict";var Pfe=KD();k9.exports=function(){if(String.prototype.matchAll)try{"".matchAll(RegExp.prototype)}catch{return String.prototype.matchAll}return Pfe}});var N9=b((S6e,j9)=>{"use strict";var zD=Eu(),Ofe=il()(),R9=eb(),Tfe=VD(),Bfe=UD(),$9=Object.defineProperty;j9.exports=function(){var e=Tfe();if(zD(String.prototype,{matchAll:e},{matchAll:function(){return String.prototype.matchAll!==e}}),Ofe){var r=Symbol.matchAll||(Symbol.for?Symbol.for("Symbol.matchAll"):Symbol("Symbol.matchAll"));if(zD(Symbol,{matchAll:r},{matchAll:function(){return Symbol.matchAll!==r}}),$9&&R9){var n=R9(Symbol,r);(!n||n.configurable)&&$9(Symbol,r,{configurable:!1,enumerable:!1,value:r,writable:!1})}var s=Bfe(),i={};i[r]=s;var o={};o[r]=function(){return RegExp.prototype[r]!==s},zD(RegExp.prototype,i,o)}return e}});var JD=b((A6e,L9)=>{"use strict";var Ife=yy(),Ffe=Eu(),M9=KD(),kfe=VD(),Rfe=N9(),q9=Ife(M9);Ffe(q9,{getPolyfill:kfe,implementation:M9,shim:Rfe});L9.exports=q9});var WD=b(Ab=>{"use strict";Object.defineProperty(Ab,"__esModule",{value:!0});Ab.JsonPathUtils=void 0;var HD=Li(),By=class t{static extractInputField(e,r){let n=[];if(r){for(let s of r)if(n=HD.JSONPath.nodes(e,s),n.length)break}return n}static changePropertyNameRecursively(e,r,n){let s=t.extractInputField(e,["$.."+r]);for(let i of s)this.copyResultPathToDestinationDefinition(i.path,e,n)}static setValue(e,r,n){let s=typeof r=="string"?r:HD.JSONPath.stringify(r);return HD.JSONPath.value(e,s,n),e}static copyResultPathToDestinationDefinition(e,r,n){let s=r;for(let i=1;i<e.length;i++)if(i+1<e.length&&(s=s[e[i]]),e.length==i+1){s[n]=s[e[i]],delete s[e[i]];break}}static changeSpecialPathsRecursively(e){let r=t.extractInputField(e,["$..path"]);for(let n of r)this.modifyPathsWithSpecialCharacter(n.path,e)}static modifyPathsWithSpecialCharacter(e,r){let n=r;for(let s=1;s<e.length;s++)if(s+1<e.length&&(n=n[e[s]]),e.length==s+1){let i=n[e[s]],o=[];for(let a=0;a<i.length;a++)o.push(this.modifyPathWithSpecialCharacter(i[a]));n[e[s]]=o;break}}static modifyPathWithSpecialCharacter(e){let r=this.matchAll(e,this.REGEX_PATH);return e=this.modifyPathRecursive(r,e),e}static modifyPathRecursive(e,r){let n=e.next(),s=!1;for(;n&&!n.done&&!s;){let i=n.value.index;if(i&&i==1)r=r.charAt(0)+"['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0,this.modifyPathRecursive(e,r);else if(i&&i>1&&r.substring(i-2,i)!=="['"&&r.substring(i-2,i)!=='["')if(r.substring(i-2,i)===".."){r=r.substring(0,i-2)+"..['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0;let o=this.matchAll(r,this.REGEX_PATH);this.modifyPathRecursive(o,r)}else r.charAt(i-1)==="."&&(r=r.substring(0,i-1)+"['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0,this.modifyPathRecursive(e,r));n=e.next()}return r}};Ab.JsonPathUtils=By;By.matchAll=JD();By.REGEX_PATH=/@\w+/g});var Db=b(xb=>{"use strict";Object.defineProperty(xb,"__esModule",{value:!0});xb.ObjectUtils=void 0;var GD=class t{static asArray(e){return Array.isArray(e)?e:[e]}static isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}static isUrlAbsolute(e){let r=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;t.isString(e)&&r.test(e)}static isString(e){return typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"}static getDistinctFieldInObject(e,r){let n=e.map(s=>s[r]);return Array.from(new Set(n))}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}};xb.ObjectUtils=GD});var U9=b(Cb=>{"use strict";Object.defineProperty(Cb,"__esModule",{value:!0});Cb.ObjectValidationUtils=void 0;var ZD=class{static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static isValidDIDURI(e){let r="[a-zA-Z-\\._~]|%[0-9a-fA-F]{2}|[!$&'()*+,;=:@]",n="^did:([a-z0-9]+)(:([a-zA-Z0-9\\.\\-_]|%[0-9a-fA-F]{2})+)+(/("+r+")*)?";return""+r+r,new RegExp(n).test(e)}};Cb.ObjectValidationUtils=ZD});var QD=b(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.PEVersion=Du.InternalPresentationDefinitionV2=Du.InternalPresentationDefinitionV1=void 0;var XD=class{constructor(e,r,n,s,i,o){this.id=e,this.input_descriptors=r,this.format=n,this.name=s,this.purpose=i,this.submission_requirements=o}getVersion(){return Pb.v1}};Du.InternalPresentationDefinitionV1=XD;var YD=class{constructor(e,r,n,s,i,o,a){this.format=n,this.frame=s,this.id=e,this.input_descriptors=r,this.name=i,this.purpose=o,this.submission_requirements=a}getVersion(){return Pb.v2}};Du.InternalPresentationDefinitionV2=YD;var Pb;(function(t){t.v1="v1",t.v2="v2"})(Pb||(Du.PEVersion=Pb={}))});var V9=b(Tb=>{"use strict";Object.defineProperty(Tb,"__esModule",{value:!0});Tb.SSITypesBuilder=void 0;var K9=ys(),Ob=Ui(),e2=QD(),t2=class t{static modelEntityToInternalPresentationDefinitionV1(e){let r=t.createCopyAndModifyPresentationDefinition(e);return new e2.InternalPresentationDefinitionV1(r.id,r.input_descriptors,r.format,r.name,r.purpose,r.submission_requirements)}static modelEntityInternalPresentationDefinitionV2(e){let r=t.createCopyAndModifyPresentationDefinition(e);return new e2.InternalPresentationDefinitionV2(r.id,r.input_descriptors,r.format,r.frame,r.name,r.purpose,r.submission_requirements)}static createCopyAndModifyPresentationDefinition(e){let r=JSON.parse(JSON.stringify(e));return Ob.JsonPathUtils.changePropertyNameRecursively(r,"_const","const"),Ob.JsonPathUtils.changePropertyNameRecursively(r,"_enum","enum"),Ob.JsonPathUtils.changeSpecialPathsRecursively(r),r}static mapExternalVerifiablePresentationToWrappedVP(e,r){return K9.CredentialMapper.toWrappedVerifiablePresentation(e,{hasher:r})}static mapExternalVerifiableCredentialsToWrappedVcs(e,r){return K9.CredentialMapper.toWrappedVerifiableCredentials(Array.isArray(e)?e:[e],{hasher:r})}static toInternalPresentationDefinition(e){let r=JSON.parse(JSON.stringify(e)),n=(0,Ob.definitionVersionDiscovery)(r);if(n.error)throw n.error;return n.version==e2.PEVersion.v1?t.modelEntityToInternalPresentationDefinitionV1(r):t.modelEntityInternalPresentationDefinitionV2(r)}};Tb.SSITypesBuilder=t2});var ll=b(ba=>{"use strict";var $fe=ba&&ba.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),r2=ba&&ba.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$fe(e,t,r)};Object.defineProperty(ba,"__esModule",{value:!0});r2(ms(),ba);r2(QD(),ba);r2(V9(),ba)});var o2=b((B6e,s2)=>{"use strict";s2.exports=i2;s2.exports.default=i2;var Mr={$schema:"http://json-schema.org/draft-07/schema#",title:"Presentation Definition",definitions:{schema:{type:"object",properties:{uri:{type:"string"},required:{type:"boolean"}},required:["uri"],additionalProperties:!1},issuance:{type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0},filter:{type:"object",properties:{type:{type:"string"},format:{type:"string"},pattern:{type:"string"},minimum:{type:["number","string"]},minLength:{type:"integer"},maxLength:{type:"integer"},exclusiveMinimum:{type:["number","string"]},exclusiveMaximum:{type:["number","string"]},maximum:{type:["number","string"]},const:{type:["number","string"]},enum:{type:"array",items:{type:["number","string"]}},not:{type:"object",minProperties:1}},required:["type"],additionalProperties:!1},format:{type:"object",properties:{"vc+sd-jwt":{type:"object",properties:{"sd-jwt_alg_values":{type:"array",description:"A JSON array containing identifiers of cryptographic algorithms the verifier supports for protection of a SD-JWT. If present, the alg JOSE header (as defined in [RFC7515]) of the presented SD-JWT MUST match one of the array values.",minItems:1,items:{type:"string"}},"kb-jwt_alg_values":{type:"array",description:"A JSON array containing identifiers of cryptographic algorithms the verifier supports for protection of a KB-JWT. If present, the alg JOSE header (as defined in [RFC7515]) of the presented KB-JWT MUST match one of the array values.",minItems:1,items:{type:"string"}}},required:[],additionalProperties:!1}},patternProperties:{"^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},"^di_vc$|^di_vp$|^di$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}},cryptosuite:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type","cryptosuite"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},submission_requirements:{type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},input_descriptors:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},group:{type:"array",items:{type:"string"}},schema:{type:"array",items:{$ref:"#/definitions/schema"}},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id","schema"],additionalProperties:!1},field:{type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"},predicate:{type:"string",enum:["required","preferred"]}},required:["path","filter","predicate"],additionalProperties:!1}]}},type:"object",properties:{presentation_definition:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},format:{$ref:"#/definitions/format"},submission_requirements:{type:"array",items:{$ref:"#/definitions/submission_requirements"}},input_descriptors:{type:"array",items:{$ref:"#/definitions/input_descriptors"}}},required:["id","input_descriptors"],additionalProperties:!1}}},Ie={type:"object",properties:{"vc+sd-jwt":{type:"object",properties:{"sd-jwt_alg_values":{type:"array",description:"A JSON array containing identifiers of cryptographic algorithms the verifier supports for protection of a SD-JWT. If present, the alg JOSE header (as defined in [RFC7515]) of the presented SD-JWT MUST match one of the array values.",minItems:1,items:{type:"string"}},"kb-jwt_alg_values":{type:"array",description:"A JSON array containing identifiers of cryptographic algorithms the verifier supports for protection of a KB-JWT. If present, the alg JOSE header (as defined in [RFC7515]) of the presented KB-JWT MUST match one of the array values.",minItems:1,items:{type:"string"}}},required:[],additionalProperties:!1}},patternProperties:{"^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},"^di_vc$|^di_vp$|^di$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}},cryptosuite:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type","cryptosuite"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},z9=new RegExp("^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$","u"),J9=new RegExp("^ldp_vc$|^ldp_vp$|^ldp$","u"),H9=new RegExp("^di_vc$|^di_vp$|^di$","u"),W9=new RegExp("additionalProperties","u");function Ib(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(let a in t)if(!(a==="vc+sd-jwt"||z9.test(a)||J9.test(a)||H9.test(a)||W9.test(a))){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Ie,data:t};i===null?i=[u]:i.push(u),o++}if(t["vc+sd-jwt"]!==void 0){let a=t["vc+sd-jwt"];if(a&&typeof a=="object"&&!Array.isArray(a)){for(let u in a)if(!(u==="sd-jwt_alg_values"||u==="kb-jwt_alg_values")){let c={instancePath:e+"/vc+sd-jwt",schemaPath:"#/properties/vc%2Bsd-jwt/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Ie.properties["vc+sd-jwt"],data:a};i===null?i=[c]:i.push(c),o++}if(a["sd-jwt_alg_values"]!==void 0){let u=a["sd-jwt_alg_values"];if(Array.isArray(u)){if(u.length<1){let l={instancePath:e+"/vc+sd-jwt/sd-jwt_alg_values",schemaPath:"#/properties/vc%2Bsd-jwt/properties/sd-jwt_alg_values/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Ie.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"],data:u};i===null?i=[l]:i.push(l),o++}let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(typeof d!="string"){let p={instancePath:e+"/vc+sd-jwt/sd-jwt_alg_values/"+l,schemaPath:"#/properties/vc%2Bsd-jwt/properties/sd-jwt_alg_values/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ie.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"].items.type,parentSchema:Ie.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"].items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let c={instancePath:e+"/vc+sd-jwt/sd-jwt_alg_values",schemaPath:"#/properties/vc%2Bsd-jwt/properties/sd-jwt_alg_values/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ie.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"].type,parentSchema:Ie.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"],data:u};i===null?i=[c]:i.push(c),o++}}if(a["kb-jwt_alg_values"]!==void 0){let u=a["kb-jwt_alg_values"];if(Array.isArray(u)){if(u.length<1){let l={instancePath:e+"/vc+sd-jwt/kb-jwt_alg_values",schemaPath:"#/properties/vc%2Bsd-jwt/properties/kb-jwt_alg_values/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Ie.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"],data:u};i===null?i=[l]:i.push(l),o++}let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(typeof d!="string"){let p={instancePath:e+"/vc+sd-jwt/kb-jwt_alg_values/"+l,schemaPath:"#/properties/vc%2Bsd-jwt/properties/kb-jwt_alg_values/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ie.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"].items.type,parentSchema:Ie.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"].items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let c={instancePath:e+"/vc+sd-jwt/kb-jwt_alg_values",schemaPath:"#/properties/vc%2Bsd-jwt/properties/kb-jwt_alg_values/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ie.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"].type,parentSchema:Ie.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"],data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/vc+sd-jwt",schemaPath:"#/properties/vc%2Bsd-jwt/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ie.properties["vc+sd-jwt"].type,parentSchema:Ie.properties["vc+sd-jwt"],data:a};i===null?i=[u]:i.push(u),o++}}for(let a in t)if(z9.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.alg===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24/required",keyword:"required",params:{missingProperty:"alg"},message:"must have required property 'alg'",schema:Ie.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"].required,parentSchema:Ie.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="alg"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Ie.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.alg!==void 0){let c=u.alg;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24/properties/alg/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Ie.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"].properties.alg,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let p=c[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg/"+d,schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24/properties/alg/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ie.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"].properties.alg.items.type,parentSchema:Ie.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"].properties.alg.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24/properties/alg/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ie.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"].properties.alg.type,parentSchema:Ie.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"].properties.alg,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ie.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"].type,parentSchema:Ie.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(J9.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.proof_type===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:Ie.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].required,parentSchema:Ie.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="proof_type"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Ie.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.proof_type!==void 0){let c=u.proof_type;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Ie.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let p=c[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ie.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items.type,parentSchema:Ie.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ie.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.type,parentSchema:Ie.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ie.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].type,parentSchema:Ie.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(H9.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.proof_type===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"].required,parentSchema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"],data:u};i===null?i=[c]:i.push(c),o++}if(u.cryptosuite===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/required",keyword:"required",params:{missingProperty:"cryptosuite"},message:"must have required property 'cryptosuite'",schema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"].required,parentSchema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(!(c==="proof_type"||c==="cryptosuite")){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.proof_type!==void 0){let c=u.proof_type;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let p=c[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type.items.type,parentSchema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type.type,parentSchema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type,data:c};i===null?i=[l]:i.push(l),o++}}if(u.cryptosuite!==void 0){let c=u.cryptosuite;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/cryptosuite",schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/cryptosuite/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let p=c[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/cryptosuite/"+d,schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/cryptosuite/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite.items.type,parentSchema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/cryptosuite",schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/cryptosuite/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite.type,parentSchema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"].type,parentSchema:Ie.patternProperties["^di_vc$|^di_vp$|^di$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(W9.test(a)){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false",schema:!1,parentSchema:Ie.patternProperties.additionalProperties,data:t[a]};i===null?i=[u]:i.push(u),o++}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ie.type,parentSchema:Ie,data:t};i===null?i=[a]:i.push(a),o++}return Ib.errors=i,o===0}var Te={type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},n2={validate:Iy};function Iy(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Te.type,parentSchema:Te,data:t};i===null?i=[f]:i.push(f),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Te.oneOf[0].required,parentSchema:Te.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}if(t.from===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"from"},message:"must have required property 'from'",schema:Te.oneOf[0].required,parentSchema:Te.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from")){let h={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Te.oneOf[0],data:t};i===null?i=[h]:i.push(h),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Te.oneOf[0].properties.name.type,parentSchema:Te.oneOf[0].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Te.oneOf[0].properties.purpose.type,parentSchema:Te.oneOf[0].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Te.oneOf[0].properties.rule.type,parentSchema:Te.oneOf[0].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="all"||f==="pick")){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/enum",keyword:"enum",params:{allowedValues:Te.oneOf[0].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Te.oneOf[0].properties.rule.enum,parentSchema:Te.oneOf[0].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Te.oneOf[0].properties.count.type,parentSchema:Te.oneOf[0].properties.count,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Te.oneOf[0].properties.count,data:f};i===null?i=[h]:i.push(h),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Te.oneOf[0].properties.min.type,parentSchema:Te.oneOf[0].properties.min,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Te.oneOf[0].properties.min,data:f};i===null?i=[h]:i.push(h),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Te.oneOf[0].properties.max.type,parentSchema:Te.oneOf[0].properties.max,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Te.oneOf[0].properties.max,data:f};i===null?i=[h]:i.push(h),o++}}if(t.from!==void 0){let f=t.from;if(typeof f!="string"){let h={instancePath:e+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Te.oneOf[0].properties.from.type,parentSchema:Te.oneOf[0].properties.from,data:f};i===null?i=[h]:i.push(h),o++}}}var p=l===o;p&&(u=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Te.oneOf[1].required,parentSchema:Te.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.from_nested===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"from_nested"},message:"must have required property 'from_nested'",schema:Te.oneOf[1].required,parentSchema:Te.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from_nested")){let h={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Te.oneOf[1],data:t};i===null?i=[h]:i.push(h),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Te.oneOf[1].properties.name.type,parentSchema:Te.oneOf[1].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Te.oneOf[1].properties.purpose.type,parentSchema:Te.oneOf[1].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Te.oneOf[1].properties.rule.type,parentSchema:Te.oneOf[1].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="all"||f==="pick")){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/enum",keyword:"enum",params:{allowedValues:Te.oneOf[1].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Te.oneOf[1].properties.rule.enum,parentSchema:Te.oneOf[1].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Te.oneOf[1].properties.count.type,parentSchema:Te.oneOf[1].properties.count,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Te.oneOf[1].properties.count,data:f};i===null?i=[h]:i.push(h),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Te.oneOf[1].properties.min.type,parentSchema:Te.oneOf[1].properties.min,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Te.oneOf[1].properties.min,data:f};i===null?i=[h]:i.push(h),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Te.oneOf[1].properties.max.type,parentSchema:Te.oneOf[1].properties.max,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Te.oneOf[1].properties.max,data:f};i===null?i=[h]:i.push(h),o++}}if(t.from_nested!==void 0){let f=t.from_nested;if(Array.isArray(f)){if(f.length<1){let m={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Te.oneOf[1].properties.from_nested,data:f};i===null?i=[m]:i.push(m),o++}let h=f.length;for(let m=0;m<h;m++)n2.validate(f[m],{instancePath:e+"/from_nested/"+m,parentData:f,parentDataProperty:m,rootData:s})||(i=i===null?n2.validate.errors:i.concat(n2.validate.errors),o=i.length)}else{let h={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Te.oneOf[1].properties.from_nested.type,parentSchema:Te.oneOf[1].properties.from_nested,data:f};i===null?i=[h]:i.push(h),o++}}}var p=d===o;if(p&&u?(u=!1,c=[c,1]):p&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:Te.oneOf,parentSchema:Te,data:t};i===null?i=[f]:i.push(f),o++}return Iy.errors=i,o===0}var oe={type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},group:{type:"array",items:{type:"string"}},schema:{type:"array",items:{$ref:"#/definitions/schema"}},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id","schema"],additionalProperties:!1},wa={type:"object",properties:{uri:{type:"string"},required:{type:"boolean"}},required:["uri"],additionalProperties:!1};function Fb(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.uri===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"uri"},message:"must have required property 'uri'",schema:wa.required,parentSchema:wa,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="uri"||a==="required")){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:wa,data:t};i===null?i=[u]:i.push(u),o++}if(t.uri!==void 0){let a=t.uri;if(typeof a!="string"){let u={instancePath:e+"/uri",schemaPath:"#/properties/uri/type",keyword:"type",params:{type:"string"},message:"must be string",schema:wa.properties.uri.type,parentSchema:wa.properties.uri,data:a};i===null?i=[u]:i.push(u),o++}}if(t.required!==void 0){let a=t.required;if(typeof a!="boolean"){let u={instancePath:e+"/required",schemaPath:"#/properties/required/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:wa.properties.required.type,parentSchema:wa.properties.required,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:wa.type,parentSchema:wa,data:t};i===null?i=[a]:i.push(a),o++}return Fb.errors=i,o===0}var Bb={type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0};function kb(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.manifest!==void 0){let a=t.manifest;if(typeof a!="string"){let u={instancePath:e+"/manifest",schemaPath:"#/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Bb.properties.manifest.type,parentSchema:Bb.properties.manifest,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Bb.type,parentSchema:Bb,data:t};i===null?i=[a]:i.push(a),o++}return kb.errors=i,o===0}var gt={type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"},predicate:{type:"string",enum:["required","preferred"]}},required:["path","filter","predicate"],additionalProperties:!1}]},ot={type:"object",properties:{type:{type:"string"},format:{type:"string"},pattern:{type:"string"},minimum:{type:["number","string"]},minLength:{type:"integer"},maxLength:{type:"integer"},exclusiveMinimum:{type:["number","string"]},exclusiveMaximum:{type:["number","string"]},maximum:{type:["number","string"]},const:{type:["number","string"]},enum:{type:"array",items:{type:["number","string"]}},not:{type:"object",minProperties:1}},required:["type"],additionalProperties:!1},jfe=Object.prototype.hasOwnProperty;function dl(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:ot.required,parentSchema:ot,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!jfe.call(ot.properties,a)){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:ot,data:t};i===null?i=[u]:i.push(u),o++}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){let u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ot.properties.type.type,parentSchema:ot.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}if(t.format!==void 0){let a=t.format;if(typeof a!="string"){let u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ot.properties.format.type,parentSchema:ot.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){let u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ot.properties.pattern.type,parentSchema:ot.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0){let a=t.minimum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:ot.properties.minimum.type},message:"must be number,string",schema:ot.properties.minimum.type,parentSchema:ot.properties.minimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minLength!==void 0){let a=t.minLength;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a))){let u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:ot.properties.minLength.type,parentSchema:ot.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a))){let u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:ot.properties.maxLength.type,parentSchema:ot.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMinimum!==void 0){let a=t.exclusiveMinimum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:ot.properties.exclusiveMinimum.type},message:"must be number,string",schema:ot.properties.exclusiveMinimum.type,parentSchema:ot.properties.exclusiveMinimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0){let a=t.exclusiveMaximum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:ot.properties.exclusiveMaximum.type},message:"must be number,string",schema:ot.properties.exclusiveMaximum.type,parentSchema:ot.properties.exclusiveMaximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0){let a=t.maximum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:ot.properties.maximum.type},message:"must be number,string",schema:ot.properties.maximum.type,parentSchema:ot.properties.maximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.const!==void 0){let a=t.const;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/const",schemaPath:"#/properties/const/type",keyword:"type",params:{type:ot.properties.const.type},message:"must be number,string",schema:ot.properties.const.type,parentSchema:ot.properties.const,data:a};i===null?i=[u]:i.push(u),o++}}if(t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++){let l=a[c];if(typeof l!="number"&&typeof l!="string"){let d={instancePath:e+"/enum/"+c,schemaPath:"#/properties/enum/items/type",keyword:"type",params:{type:ot.properties.enum.items.type},message:"must be number,string",schema:ot.properties.enum.items.type,parentSchema:ot.properties.enum.items,data:l};i===null?i=[d]:i.push(d),o++}}}else{let u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ot.properties.enum.type,parentSchema:ot.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.not!==void 0){let a=t.not;if(a&&typeof a=="object"&&!Array.isArray(a)){if(Object.keys(a).length<1){let u={instancePath:e+"/not",schemaPath:"#/properties/not/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties",schema:1,parentSchema:ot.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}else{let u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ot.properties.not.type,parentSchema:ot.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ot.type,parentSchema:ot,data:t};i===null?i=[a]:i.push(a),o++}return dl.errors=i,o===0}function Rb(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:gt.type,parentSchema:gt,data:t};i===null?i=[f]:i.push(f),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:gt.oneOf[0].required,parentSchema:gt.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="filter")){let h={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:gt.oneOf[0],data:t};i===null?i=[h]:i.push(h),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let h={instancePath:e+"/id",schemaPath:"#/oneOf/0/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:gt.oneOf[0].properties.id.type,parentSchema:gt.oneOf[0].properties.id,data:f};i===null?i=[h]:i.push(h),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let h=f.length;for(let m=0;m<h;m++){let g=f[m];if(typeof g!="string"){let _={instancePath:e+"/path/"+m,schemaPath:"#/oneOf/0/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:gt.oneOf[0].properties.path.items.type,parentSchema:gt.oneOf[0].properties.path.items,data:g};i===null?i=[_]:i.push(_),o++}}}else{let h={instancePath:e+"/path",schemaPath:"#/oneOf/0/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:gt.oneOf[0].properties.path.type,parentSchema:gt.oneOf[0].properties.path,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:gt.oneOf[0].properties.purpose.type,parentSchema:gt.oneOf[0].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}t.filter!==void 0&&(dl(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?dl.errors:i.concat(dl.errors),o=i.length))}var p=l===o;p&&(u=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:gt.oneOf[1].required,parentSchema:gt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.filter===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"filter"},message:"must have required property 'filter'",schema:gt.oneOf[1].required,parentSchema:gt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.predicate===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"predicate"},message:"must have required property 'predicate'",schema:gt.oneOf[1].required,parentSchema:gt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="filter"||f==="predicate")){let h={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:gt.oneOf[1],data:t};i===null?i=[h]:i.push(h),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let h={instancePath:e+"/id",schemaPath:"#/oneOf/1/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:gt.oneOf[1].properties.id.type,parentSchema:gt.oneOf[1].properties.id,data:f};i===null?i=[h]:i.push(h),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let h=f.length;for(let m=0;m<h;m++){let g=f[m];if(typeof g!="string"){let _={instancePath:e+"/path/"+m,schemaPath:"#/oneOf/1/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:gt.oneOf[1].properties.path.items.type,parentSchema:gt.oneOf[1].properties.path.items,data:g};i===null?i=[_]:i.push(_),o++}}}else{let h={instancePath:e+"/path",schemaPath:"#/oneOf/1/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:gt.oneOf[1].properties.path.type,parentSchema:gt.oneOf[1].properties.path,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:gt.oneOf[1].properties.purpose.type,parentSchema:gt.oneOf[1].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.filter!==void 0&&(dl(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?dl.errors:i.concat(dl.errors),o=i.length)),t.predicate!==void 0){let f=t.predicate;if(typeof f!="string"){let h={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/type",keyword:"type",params:{type:"string"},message:"must be string",schema:gt.oneOf[1].properties.predicate.type,parentSchema:gt.oneOf[1].properties.predicate,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="required"||f==="preferred")){let h={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/enum",keyword:"enum",params:{allowedValues:gt.oneOf[1].properties.predicate.enum},message:"must be equal to one of the allowed values",schema:gt.oneOf[1].properties.predicate.enum,parentSchema:gt.oneOf[1].properties.predicate,data:f};i===null?i=[h]:i.push(h),o++}}}var p=d===o;if(p&&u?(u=!1,c=[c,1]):p&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:gt.oneOf,parentSchema:gt,data:t};i===null?i=[f]:i.push(f),o++}return Rb.errors=i,o===0}function $b(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.id===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:oe.required,parentSchema:oe,data:t};i===null?i=[a]:i.push(a),o++}if(t.schema===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"schema"},message:"must have required property 'schema'",schema:oe.required,parentSchema:oe,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="id"||a==="name"||a==="purpose"||a==="group"||a==="schema"||a==="issuance"||a==="constraints")){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:oe,data:t};i===null?i=[u]:i.push(u),o++}if(t.id!==void 0){let a=t.id;if(typeof a!="string"){let u={instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.id.type,parentSchema:oe.properties.id,data:a};i===null?i=[u]:i.push(u),o++}}if(t.name!==void 0){let a=t.name;if(typeof a!="string"){let u={instancePath:e+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.name.type,parentSchema:oe.properties.name,data:a};i===null?i=[u]:i.push(u),o++}}if(t.purpose!==void 0){let a=t.purpose;if(typeof a!="string"){let u={instancePath:e+"/purpose",schemaPath:"#/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.purpose.type,parentSchema:oe.properties.purpose,data:a};i===null?i=[u]:i.push(u),o++}}if(t.group!==void 0){let a=t.group;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++){let l=a[c];if(typeof l!="string"){let d={instancePath:e+"/group/"+c,schemaPath:"#/properties/group/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.group.items.type,parentSchema:oe.properties.group.items,data:l};i===null?i=[d]:i.push(d),o++}}}else{let u={instancePath:e+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.group.type,parentSchema:oe.properties.group,data:a};i===null?i=[u]:i.push(u),o++}}if(t.schema!==void 0){let a=t.schema;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)Fb(a[c],{instancePath:e+"/schema/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?Fb.errors:i.concat(Fb.errors),o=i.length)}else{let u={instancePath:e+"/schema",schemaPath:"#/properties/schema/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.schema.type,parentSchema:oe.properties.schema,data:a};i===null?i=[u]:i.push(u),o++}}if(t.issuance!==void 0){let a=t.issuance;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)kb(a[c],{instancePath:e+"/issuance/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?kb.errors:i.concat(kb.errors),o=i.length)}else{let u={instancePath:e+"/issuance",schemaPath:"#/properties/issuance/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.issuance.type,parentSchema:oe.properties.issuance,data:a};i===null?i=[u]:i.push(u),o++}}if(t.constraints!==void 0){let a=t.constraints;if(a&&typeof a=="object"&&!Array.isArray(a)){for(let u in a)if(!(u==="limit_disclosure"||u==="statuses"||u==="fields"||u==="subject_is_issuer"||u==="is_holder"||u==="same_subject")){let c={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:oe.properties.constraints,data:a};i===null?i=[c]:i.push(c),o++}if(a.limit_disclosure!==void 0){let u=a.limit_disclosure;if(typeof u!="string"){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.limit_disclosure.type,parentSchema:oe.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.limit_disclosure.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.limit_disclosure.enum,parentSchema:oe.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}}if(a.statuses!==void 0){let u=a.statuses;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.active!==void 0){let c=u.active;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.statuses.properties.active.properties.directive.type,parentSchema:oe.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.statuses.properties.active.properties.directive.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.statuses.properties.active.properties.directive.enum,parentSchema:oe.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/active",schemaPath:"#/properties/constraints/properties/statuses/properties/active/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.statuses.properties.active.type,parentSchema:oe.properties.constraints.properties.statuses.properties.active,data:c};i===null?i=[l]:i.push(l),o++}}if(u.suspended!==void 0){let c=u.suspended;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.statuses.properties.suspended.properties.directive.type,parentSchema:oe.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum,parentSchema:oe.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/suspended",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.statuses.properties.suspended.type,parentSchema:oe.properties.constraints.properties.statuses.properties.suspended,data:c};i===null?i=[l]:i.push(l),o++}}if(u.revoked!==void 0){let c=u.revoked;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.statuses.properties.revoked.properties.directive.type,parentSchema:oe.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum,parentSchema:oe.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/revoked",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.statuses.properties.revoked.type,parentSchema:oe.properties.constraints.properties.statuses.properties.revoked,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/constraints/statuses",schemaPath:"#/properties/constraints/properties/statuses/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.statuses.type,parentSchema:oe.properties.constraints.properties.statuses,data:u};i===null?i=[c]:i.push(c),o++}}if(a.fields!==void 0){let u=a.fields;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)Rb(u[l],{instancePath:e+"/constraints/fields/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?Rb.errors:i.concat(Rb.errors),o=i.length)}else{let c={instancePath:e+"/constraints/fields",schemaPath:"#/properties/constraints/properties/fields/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.constraints.properties.fields.type,parentSchema:oe.properties.constraints.properties.fields,data:u};i===null?i=[c]:i.push(c),o++}}if(a.subject_is_issuer!==void 0){let u=a.subject_is_issuer;if(typeof u!="string"){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.subject_is_issuer.type,parentSchema:oe.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.subject_is_issuer.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.subject_is_issuer.enum,parentSchema:oe.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}}if(a.is_holder!==void 0){let u=a.is_holder;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:oe.properties.constraints.properties.is_holder.items.required,parentSchema:oe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}if(d.directive===void 0){let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:oe.properties.constraints.properties.is_holder.items.required,parentSchema:oe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}for(let p in d)if(!(p==="field_id"||p==="directive")){let f={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties",schema:!1,parentSchema:oe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let p=d.field_id;if(Array.isArray(p)){let f=p.length;for(let h=0;h<f;h++){let m=p[h];if(typeof m!="string"){let g={instancePath:e+"/constraints/is_holder/"+l+"/field_id/"+h,schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.is_holder.items.properties.field_id.items.type,parentSchema:oe.properties.constraints.properties.is_holder.items.properties.field_id.items,data:m};i===null?i=[g]:i.push(g),o++}}}else{let f={instancePath:e+"/constraints/is_holder/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.constraints.properties.is_holder.items.properties.field_id.type,parentSchema:oe.properties.constraints.properties.is_holder.items.properties.field_id,data:p};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let p=d.directive;if(typeof p!="string"){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.is_holder.items.properties.directive.type,parentSchema:oe.properties.constraints.properties.is_holder.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}if(!(p==="required"||p==="preferred")){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.is_holder.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.is_holder.items.properties.directive.enum,parentSchema:oe.properties.constraints.properties.is_holder.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}}}else{let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.is_holder.items.type,parentSchema:oe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let c={instancePath:e+"/constraints/is_holder",schemaPath:"#/properties/constraints/properties/is_holder/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.constraints.properties.is_holder.type,parentSchema:oe.properties.constraints.properties.is_holder,data:u};i===null?i=[c]:i.push(c),o++}}if(a.same_subject!==void 0){let u=a.same_subject;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:oe.properties.constraints.properties.same_subject.items.required,parentSchema:oe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}if(d.directive===void 0){let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:oe.properties.constraints.properties.same_subject.items.required,parentSchema:oe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}for(let p in d)if(!(p==="field_id"||p==="directive")){let f={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties",schema:!1,parentSchema:oe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let p=d.field_id;if(Array.isArray(p)){let f=p.length;for(let h=0;h<f;h++){let m=p[h];if(typeof m!="string"){let g={instancePath:e+"/constraints/same_subject/"+l+"/field_id/"+h,schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.same_subject.items.properties.field_id.items.type,parentSchema:oe.properties.constraints.properties.same_subject.items.properties.field_id.items,data:m};i===null?i=[g]:i.push(g),o++}}}else{let f={instancePath:e+"/constraints/same_subject/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.constraints.properties.same_subject.items.properties.field_id.type,parentSchema:oe.properties.constraints.properties.same_subject.items.properties.field_id,data:p};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let p=d.directive;if(typeof p!="string"){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.same_subject.items.properties.directive.type,parentSchema:oe.properties.constraints.properties.same_subject.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}if(!(p==="required"||p==="preferred")){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.same_subject.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.same_subject.items.properties.directive.enum,parentSchema:oe.properties.constraints.properties.same_subject.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}}}else{let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.same_subject.items.type,parentSchema:oe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let c={instancePath:e+"/constraints/same_subject",schemaPath:"#/properties/constraints/properties/same_subject/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.constraints.properties.same_subject.type,parentSchema:oe.properties.constraints.properties.same_subject,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.type,parentSchema:oe.properties.constraints,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.type,parentSchema:oe,data:t};i===null?i=[a]:i.push(a),o++}return $b.errors=i,o===0}function i2(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.presentation_definition!==void 0){let a=t.presentation_definition;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.id===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:Mr.properties.presentation_definition.required,parentSchema:Mr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}if(a.input_descriptors===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"input_descriptors"},message:"must have required property 'input_descriptors'",schema:Mr.properties.presentation_definition.required,parentSchema:Mr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}for(let u in a)if(!(u==="id"||u==="name"||u==="purpose"||u==="format"||u==="submission_requirements"||u==="input_descriptors")){let c={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Mr.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}if(a.id!==void 0){let u=a.id;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/id",schemaPath:"#/properties/presentation_definition/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mr.properties.presentation_definition.properties.id.type,parentSchema:Mr.properties.presentation_definition.properties.id,data:u};i===null?i=[c]:i.push(c),o++}}if(a.name!==void 0){let u=a.name;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/name",schemaPath:"#/properties/presentation_definition/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mr.properties.presentation_definition.properties.name.type,parentSchema:Mr.properties.presentation_definition.properties.name,data:u};i===null?i=[c]:i.push(c),o++}}if(a.purpose!==void 0){let u=a.purpose;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/purpose",schemaPath:"#/properties/presentation_definition/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mr.properties.presentation_definition.properties.purpose.type,parentSchema:Mr.properties.presentation_definition.properties.purpose,data:u};i===null?i=[c]:i.push(c),o++}}if(a.format!==void 0&&(Ib(a.format,{instancePath:e+"/presentation_definition/format",parentData:a,parentDataProperty:"format",rootData:s})||(i=i===null?Ib.errors:i.concat(Ib.errors),o=i.length)),a.submission_requirements!==void 0){let u=a.submission_requirements;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)Iy(u[l],{instancePath:e+"/presentation_definition/submission_requirements/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?Iy.errors:i.concat(Iy.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/submission_requirements",schemaPath:"#/properties/presentation_definition/properties/submission_requirements/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Mr.properties.presentation_definition.properties.submission_requirements.type,parentSchema:Mr.properties.presentation_definition.properties.submission_requirements,data:u};i===null?i=[c]:i.push(c),o++}}if(a.input_descriptors!==void 0){let u=a.input_descriptors;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)$b(u[l],{instancePath:e+"/presentation_definition/input_descriptors/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?$b.errors:i.concat($b.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/input_descriptors",schemaPath:"#/properties/presentation_definition/properties/input_descriptors/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Mr.properties.presentation_definition.properties.input_descriptors.type,parentSchema:Mr.properties.presentation_definition.properties.input_descriptors,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Mr.properties.presentation_definition.type,parentSchema:Mr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Mr.type,parentSchema:Mr,data:t};i===null?i=[a]:i.push(a),o++}return i2.errors=i,o===0}});var a2=b((I6e,G9)=>{"use strict";G9.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var Fy=b(u2=>{"use strict";Object.defineProperty(u2,"__esModule",{value:!0});var Z9=a2();Z9.code='require("ajv/dist/runtime/equal").default';u2.default=Z9});var m2=b((k6e,y2)=>{"use strict";y2.exports=h2;y2.exports.default=h2;var Sr={$schema:"http://json-schema.org/draft-07/schema#",title:"Presentation Definition",definitions:{issuance:{type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0},format:{type:"object",properties:{"vc+sd-jwt":{type:"object",properties:{"sd-jwt_alg_values":{type:"array",description:"A JSON array containing identifiers of cryptographic algorithms the verifier supports for protection of a SD-JWT. If present, the alg JOSE header (as defined in [RFC7515]) of the presented SD-JWT MUST match one of the array values.",minItems:1,items:{type:"string"}},"kb-jwt_alg_values":{type:"array",description:"A JSON array containing identifiers of cryptographic algorithms the verifier supports for protection of a KB-JWT. If present, the alg JOSE header (as defined in [RFC7515]) of the presented KB-JWT MUST match one of the array values.",minItems:1,items:{type:"string"}}},required:[],additionalProperties:!1}},patternProperties:{"^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},"^di_vc$|^di_vp$|^di$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}},cryptosuite:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type","cryptosuite"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},submission_requirements:{type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},input_descriptors:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},group:{type:"array",items:{type:"string"}},format:{$ref:"#/definitions/format"},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id"],additionalProperties:!1},field:{type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},name:{type:"string"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},predicate:{type:"string",enum:["required","preferred"]},name:{type:"string"}},required:["path","filter","predicate"],additionalProperties:!1}]}},type:"object",properties:{presentation_definition:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},format:{$ref:"#/definitions/format"},frame:{type:"object",additionalProperties:!0},submission_requirements:{type:"array",items:{$ref:"#/definitions/submission_requirements"}},input_descriptors:{type:"array",items:{$ref:"#/definitions/input_descriptors"}}},required:["id","input_descriptors"],additionalProperties:!1}}},Fe={type:"object",properties:{"vc+sd-jwt":{type:"object",properties:{"sd-jwt_alg_values":{type:"array",description:"A JSON array containing identifiers of cryptographic algorithms the verifier supports for protection of a SD-JWT. If present, the alg JOSE header (as defined in [RFC7515]) of the presented SD-JWT MUST match one of the array values.",minItems:1,items:{type:"string"}},"kb-jwt_alg_values":{type:"array",description:"A JSON array containing identifiers of cryptographic algorithms the verifier supports for protection of a KB-JWT. If present, the alg JOSE header (as defined in [RFC7515]) of the presented KB-JWT MUST match one of the array values.",minItems:1,items:{type:"string"}}},required:[],additionalProperties:!1}},patternProperties:{"^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},"^di_vc$|^di_vp$|^di$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}},cryptosuite:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type","cryptosuite"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},X9=new RegExp("^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$","u"),Y9=new RegExp("^ldp_vc$|^ldp_vp$|^ldp$","u"),Q9=new RegExp("^di_vc$|^di_vp$|^di$","u"),eM=new RegExp("additionalProperties","u");function hl(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(let a in t)if(!(a==="vc+sd-jwt"||X9.test(a)||Y9.test(a)||Q9.test(a)||eM.test(a))){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Fe,data:t};i===null?i=[u]:i.push(u),o++}if(t["vc+sd-jwt"]!==void 0){let a=t["vc+sd-jwt"];if(a&&typeof a=="object"&&!Array.isArray(a)){for(let u in a)if(!(u==="sd-jwt_alg_values"||u==="kb-jwt_alg_values")){let c={instancePath:e+"/vc+sd-jwt",schemaPath:"#/properties/vc%2Bsd-jwt/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Fe.properties["vc+sd-jwt"],data:a};i===null?i=[c]:i.push(c),o++}if(a["sd-jwt_alg_values"]!==void 0){let u=a["sd-jwt_alg_values"];if(Array.isArray(u)){if(u.length<1){let l={instancePath:e+"/vc+sd-jwt/sd-jwt_alg_values",schemaPath:"#/properties/vc%2Bsd-jwt/properties/sd-jwt_alg_values/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Fe.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"],data:u};i===null?i=[l]:i.push(l),o++}let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(typeof d!="string"){let p={instancePath:e+"/vc+sd-jwt/sd-jwt_alg_values/"+l,schemaPath:"#/properties/vc%2Bsd-jwt/properties/sd-jwt_alg_values/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"].items.type,parentSchema:Fe.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"].items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let c={instancePath:e+"/vc+sd-jwt/sd-jwt_alg_values",schemaPath:"#/properties/vc%2Bsd-jwt/properties/sd-jwt_alg_values/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"].type,parentSchema:Fe.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"],data:u};i===null?i=[c]:i.push(c),o++}}if(a["kb-jwt_alg_values"]!==void 0){let u=a["kb-jwt_alg_values"];if(Array.isArray(u)){if(u.length<1){let l={instancePath:e+"/vc+sd-jwt/kb-jwt_alg_values",schemaPath:"#/properties/vc%2Bsd-jwt/properties/kb-jwt_alg_values/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Fe.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"],data:u};i===null?i=[l]:i.push(l),o++}let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(typeof d!="string"){let p={instancePath:e+"/vc+sd-jwt/kb-jwt_alg_values/"+l,schemaPath:"#/properties/vc%2Bsd-jwt/properties/kb-jwt_alg_values/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"].items.type,parentSchema:Fe.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"].items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let c={instancePath:e+"/vc+sd-jwt/kb-jwt_alg_values",schemaPath:"#/properties/vc%2Bsd-jwt/properties/kb-jwt_alg_values/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"].type,parentSchema:Fe.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"],data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/vc+sd-jwt",schemaPath:"#/properties/vc%2Bsd-jwt/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.properties["vc+sd-jwt"].type,parentSchema:Fe.properties["vc+sd-jwt"],data:a};i===null?i=[u]:i.push(u),o++}}for(let a in t)if(X9.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.alg===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24%7C%5Emso_mdoc%24/required",keyword:"required",params:{missingProperty:"alg"},message:"must have required property 'alg'",schema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"].required,parentSchema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="alg"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24%7C%5Emso_mdoc%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.alg!==void 0){let c=u.alg;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24%7C%5Emso_mdoc%24/properties/alg/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"].properties.alg,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let p=c[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg/"+d,schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24%7C%5Emso_mdoc%24/properties/alg/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"].properties.alg.items.type,parentSchema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"].properties.alg.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24%7C%5Emso_mdoc%24/properties/alg/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"].properties.alg.type,parentSchema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"].properties.alg,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24%7C%5Emso_mdoc%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"].type,parentSchema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(Y9.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.proof_type===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].required,parentSchema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="proof_type"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.proof_type!==void 0){let c=u.proof_type;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let p=c[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items.type,parentSchema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.type,parentSchema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].type,parentSchema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(Q9.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.proof_type===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].required,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"],data:u};i===null?i=[c]:i.push(c),o++}if(u.cryptosuite===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/required",keyword:"required",params:{missingProperty:"cryptosuite"},message:"must have required property 'cryptosuite'",schema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].required,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(!(c==="proof_type"||c==="cryptosuite")){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.proof_type!==void 0){let c=u.proof_type;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let p=c[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type.items.type,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type.type,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type,data:c};i===null?i=[l]:i.push(l),o++}}if(u.cryptosuite!==void 0){let c=u.cryptosuite;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/cryptosuite",schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/cryptosuite/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let p=c[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/cryptosuite/"+d,schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/cryptosuite/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite.items.type,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/cryptosuite",schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/cryptosuite/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite.type,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].type,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(eM.test(a)){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false",schema:!1,parentSchema:Fe.patternProperties.additionalProperties,data:t[a]};i===null?i=[u]:i.push(u),o++}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.type,parentSchema:Fe,data:t};i===null?i=[a]:i.push(a),o++}return hl.errors=i,o===0}var Be={type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},c2={validate:Ry};function Ry(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Be.type,parentSchema:Be,data:t};i===null?i=[f]:i.push(f),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Be.oneOf[0].required,parentSchema:Be.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}if(t.from===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"from"},message:"must have required property 'from'",schema:Be.oneOf[0].required,parentSchema:Be.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from")){let h={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Be.oneOf[0],data:t};i===null?i=[h]:i.push(h),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Be.oneOf[0].properties.name.type,parentSchema:Be.oneOf[0].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Be.oneOf[0].properties.purpose.type,parentSchema:Be.oneOf[0].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Be.oneOf[0].properties.rule.type,parentSchema:Be.oneOf[0].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="all"||f==="pick")){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/enum",keyword:"enum",params:{allowedValues:Be.oneOf[0].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Be.oneOf[0].properties.rule.enum,parentSchema:Be.oneOf[0].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Be.oneOf[0].properties.count.type,parentSchema:Be.oneOf[0].properties.count,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Be.oneOf[0].properties.count,data:f};i===null?i=[h]:i.push(h),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Be.oneOf[0].properties.min.type,parentSchema:Be.oneOf[0].properties.min,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Be.oneOf[0].properties.min,data:f};i===null?i=[h]:i.push(h),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Be.oneOf[0].properties.max.type,parentSchema:Be.oneOf[0].properties.max,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Be.oneOf[0].properties.max,data:f};i===null?i=[h]:i.push(h),o++}}if(t.from!==void 0){let f=t.from;if(typeof f!="string"){let h={instancePath:e+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Be.oneOf[0].properties.from.type,parentSchema:Be.oneOf[0].properties.from,data:f};i===null?i=[h]:i.push(h),o++}}}var p=l===o;p&&(u=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Be.oneOf[1].required,parentSchema:Be.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.from_nested===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"from_nested"},message:"must have required property 'from_nested'",schema:Be.oneOf[1].required,parentSchema:Be.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from_nested")){let h={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Be.oneOf[1],data:t};i===null?i=[h]:i.push(h),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Be.oneOf[1].properties.name.type,parentSchema:Be.oneOf[1].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Be.oneOf[1].properties.purpose.type,parentSchema:Be.oneOf[1].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Be.oneOf[1].properties.rule.type,parentSchema:Be.oneOf[1].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="all"||f==="pick")){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/enum",keyword:"enum",params:{allowedValues:Be.oneOf[1].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Be.oneOf[1].properties.rule.enum,parentSchema:Be.oneOf[1].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Be.oneOf[1].properties.count.type,parentSchema:Be.oneOf[1].properties.count,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Be.oneOf[1].properties.count,data:f};i===null?i=[h]:i.push(h),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Be.oneOf[1].properties.min.type,parentSchema:Be.oneOf[1].properties.min,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Be.oneOf[1].properties.min,data:f};i===null?i=[h]:i.push(h),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Be.oneOf[1].properties.max.type,parentSchema:Be.oneOf[1].properties.max,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Be.oneOf[1].properties.max,data:f};i===null?i=[h]:i.push(h),o++}}if(t.from_nested!==void 0){let f=t.from_nested;if(Array.isArray(f)){if(f.length<1){let m={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Be.oneOf[1].properties.from_nested,data:f};i===null?i=[m]:i.push(m),o++}let h=f.length;for(let m=0;m<h;m++)c2.validate(f[m],{instancePath:e+"/from_nested/"+m,parentData:f,parentDataProperty:m,rootData:s})||(i=i===null?c2.validate.errors:i.concat(c2.validate.errors),o=i.length)}else{let h={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Be.oneOf[1].properties.from_nested.type,parentSchema:Be.oneOf[1].properties.from_nested,data:f};i===null?i=[h]:i.push(h),o++}}}var p=d===o;if(p&&u?(u=!1,c=[c,1]):p&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:Be.oneOf,parentSchema:Be,data:t};i===null?i=[f]:i.push(f),o++}return Ry.errors=i,o===0}var ae={type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},group:{type:"array",items:{type:"string"}},format:{$ref:"#/definitions/format"},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id"],additionalProperties:!1},jb={type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0};function Nb(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.manifest!==void 0){let a=t.manifest;if(typeof a!="string"){let u={instancePath:e+"/manifest",schemaPath:"#/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string",schema:jb.properties.manifest.type,parentSchema:jb.properties.manifest,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:jb.type,parentSchema:jb,data:t};i===null?i=[a]:i.push(a),o++}return Nb.errors=i,o===0}var ze={type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},name:{type:"string"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},predicate:{type:"string",enum:["required","preferred"]},name:{type:"string"}},required:["path","filter","predicate"],additionalProperties:!1}]},we={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},l2={type:"integer",minimum:0};function pi(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(typeof t=="number"&&!(t%1)&&!isNaN(t))){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:l2.type,parentSchema:l2,data:t};i===null?i=[a]:i.push(a),o++}if(typeof t=="number"&&(t<0||isNaN(t))){let a={instancePath:e,schemaPath:"#/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:l2,data:t};i===null?i=[a]:i.push(a),o++}return pi.errors=i,o===0}function mo(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return pi(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?pi.errors:i.concat(pi.errors),o=i.length),mo.errors=i,o===0}var d2={type:"array",minItems:1,items:{$ref:"#"}},f2={validate:Ue};function fi(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(Array.isArray(t)){if(t.length<1){let u={instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:d2,data:t};i===null?i=[u]:i.push(u),o++}let a=t.length;for(let u=0;u<a;u++)f2.validate(t[u],{instancePath:e+"/"+u,parentData:t,parentDataProperty:u,rootData:s})||(i=i===null?f2.validate.errors:i.concat(f2.validate.errors),o=i.length)}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array",schema:d2.type,parentSchema:d2,data:t};i===null?i=[a]:i.push(a),o++}return fi.errors=i,o===0}var ky={type:"array",items:{type:"string"},uniqueItems:!0,default:[]};function fl(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(Array.isArray(t)){let a=t.length;for(let l=0;l<a;l++){let d=t[l];if(typeof d!="string"){let p={instancePath:e+"/"+l,schemaPath:"#/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ky.items.type,parentSchema:ky.items,data:d};i===null?i=[p]:i.push(p),o++}}let u=t.length,c;if(u>1){let l={};for(;u--;){let d=t[u];if(typeof d=="string"){if(typeof l[d]=="number"){c=l[d];let p={instancePath:e,schemaPath:"#/uniqueItems",keyword:"uniqueItems",params:{i:u,j:c},message:"must NOT have duplicate items (items ## "+c+" and "+u+" are identical)",schema:!0,parentSchema:ky,data:t};i===null?i=[p]:i.push(p),o++;break}l[d]=u}}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ky.type,parentSchema:ky,data:t};i===null?i=[a]:i.push(a),o++}return fl.errors=i,o===0}var p2={enum:["array","boolean","integer","null","number","object","string"]};function pl(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t==="array"||t==="boolean"||t==="integer"||t==="null"||t==="number"||t==="object"||t==="string")){let a={instancePath:e,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:p2.enum},message:"must be equal to one of the allowed values",schema:p2.enum,parentSchema:p2,data:t};i===null?i=[a]:i.push(a),o++}return pl.errors=i,o===0}var tM=Fy().default;function Ue(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean"){let d={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:we.type},message:"must be object,boolean",schema:we.type,parentSchema:we,data:t};i===null?i=[d]:i.push(d),o++}if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){let d=t.$id;if(typeof d!="string"){let p={instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.$id.type,parentSchema:we.properties.$id,data:d};i===null?i=[p]:i.push(p),o++}}if(t.$schema!==void 0){let d=t.$schema;if(typeof d!="string"){let p={instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.$schema.type,parentSchema:we.properties.$schema,data:d};i===null?i=[p]:i.push(p),o++}}if(t.$ref!==void 0){let d=t.$ref;if(typeof d!="string"){let p={instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.$ref.type,parentSchema:we.properties.$ref,data:d};i===null?i=[p]:i.push(p),o++}}if(t.$comment!==void 0){let d=t.$comment;if(typeof d!="string"){let p={instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.$comment.type,parentSchema:we.properties.$comment,data:d};i===null?i=[p]:i.push(p),o++}}if(t.title!==void 0){let d=t.title;if(typeof d!="string"){let p={instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.title.type,parentSchema:we.properties.title,data:d};i===null?i=[p]:i.push(p),o++}}if(t.description!==void 0){let d=t.description;if(typeof d!="string"){let p={instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.description.type,parentSchema:we.properties.description,data:d};i===null?i=[p]:i.push(p),o++}}if(t.readOnly!==void 0){let d=t.readOnly;if(typeof d!="boolean"){let p={instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:we.properties.readOnly.type,parentSchema:we.properties.readOnly,data:d};i===null?i=[p]:i.push(p),o++}}if(t.examples!==void 0){let d=t.examples;if(!Array.isArray(d)){let p={instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array",schema:we.properties.examples.type,parentSchema:we.properties.examples,data:d};i===null?i=[p]:i.push(p),o++}}if(t.multipleOf!==void 0){let d=t.multipleOf;if(typeof d=="number"){if(d<=0||isNaN(d)){let p={instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0",schema:0,parentSchema:we.properties.multipleOf,data:d};i===null?i=[p]:i.push(p),o++}}else{let p={instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number",schema:we.properties.multipleOf.type,parentSchema:we.properties.multipleOf,data:d};i===null?i=[p]:i.push(p),o++}}if(t.maximum!==void 0){let d=t.maximum;if(typeof d!="number"){let p={instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:we.properties.maximum.type,parentSchema:we.properties.maximum,data:d};i===null?i=[p]:i.push(p),o++}}if(t.exclusiveMaximum!==void 0){let d=t.exclusiveMaximum;if(typeof d!="number"){let p={instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:we.properties.exclusiveMaximum.type,parentSchema:we.properties.exclusiveMaximum,data:d};i===null?i=[p]:i.push(p),o++}}if(t.minimum!==void 0){let d=t.minimum;if(typeof d!="number"){let p={instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:we.properties.minimum.type,parentSchema:we.properties.minimum,data:d};i===null?i=[p]:i.push(p),o++}}if(t.exclusiveMinimum!==void 0){let d=t.exclusiveMinimum;if(typeof d!="number"){let p={instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:we.properties.exclusiveMinimum.type,parentSchema:we.properties.exclusiveMinimum,data:d};i===null?i=[p]:i.push(p),o++}}if(t.maxLength!==void 0&&(pi(t.maxLength,{instancePath:e+"/maxLength",parentData:t,parentDataProperty:"maxLength",rootData:s})||(i=i===null?pi.errors:i.concat(pi.errors),o=i.length)),t.minLength!==void 0&&(mo(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:s})||(i=i===null?mo.errors:i.concat(mo.errors),o=i.length)),t.pattern!==void 0){let d=t.pattern;if(typeof d!="string"){let p={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.pattern.type,parentSchema:we.properties.pattern,data:d};i===null?i=[p]:i.push(p),o++}}if(t.additionalItems!==void 0&&(Ue(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?Ue.errors:i.concat(Ue.errors),o=i.length)),t.items!==void 0){let d=t.items,p=o,f=!1,h=o;Ue(d,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?Ue.errors:i.concat(Ue.errors),o=i.length);var a=h===o;if(f=f||a,!f){let m=o;fi(d,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?fi.errors:i.concat(fi.errors),o=i.length);var a=m===o;f=f||a}if(f)o=p,i!==null&&(p?i.length=p:i=null);else{let m={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:we.properties.items.anyOf,parentSchema:we.properties.items,data:d};i===null?i=[m]:i.push(m),o++}}if(t.maxItems!==void 0&&(pi(t.maxItems,{instancePath:e+"/maxItems",parentData:t,parentDataProperty:"maxItems",rootData:s})||(i=i===null?pi.errors:i.concat(pi.errors),o=i.length)),t.minItems!==void 0&&(mo(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:s})||(i=i===null?mo.errors:i.concat(mo.errors),o=i.length)),t.uniqueItems!==void 0){let d=t.uniqueItems;if(typeof d!="boolean"){let p={instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:we.properties.uniqueItems.type,parentSchema:we.properties.uniqueItems,data:d};i===null?i=[p]:i.push(p),o++}}if(t.contains!==void 0&&(Ue(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?Ue.errors:i.concat(Ue.errors),o=i.length)),t.maxProperties!==void 0&&(pi(t.maxProperties,{instancePath:e+"/maxProperties",parentData:t,parentDataProperty:"maxProperties",rootData:s})||(i=i===null?pi.errors:i.concat(pi.errors),o=i.length)),t.minProperties!==void 0&&(mo(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:s})||(i=i===null?mo.errors:i.concat(mo.errors),o=i.length)),t.required!==void 0&&(fl(t.required,{instancePath:e+"/required",parentData:t,parentDataProperty:"required",rootData:s})||(i=i===null?fl.errors:i.concat(fl.errors),o=i.length)),t.additionalProperties!==void 0&&(Ue(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?Ue.errors:i.concat(Ue.errors),o=i.length)),t.definitions!==void 0){let d=t.definitions;if(d&&typeof d=="object"&&!Array.isArray(d))for(let p in d)Ue(d[p],{instancePath:e+"/definitions/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:p,rootData:s})||(i=i===null?Ue.errors:i.concat(Ue.errors),o=i.length);else{let p={instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object",schema:we.properties.definitions.type,parentSchema:we.properties.definitions,data:d};i===null?i=[p]:i.push(p),o++}}if(t.properties!==void 0){let d=t.properties;if(d&&typeof d=="object"&&!Array.isArray(d))for(let p in d)Ue(d[p],{instancePath:e+"/properties/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:p,rootData:s})||(i=i===null?Ue.errors:i.concat(Ue.errors),o=i.length);else{let p={instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object",schema:we.properties.properties.type,parentSchema:we.properties.properties,data:d};i===null?i=[p]:i.push(p),o++}}if(t.patternProperties!==void 0){let d=t.patternProperties;if(d&&typeof d=="object"&&!Array.isArray(d)){for(let p in d){var u=o===o;if(!u){let h={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:p},message:"property name must be valid",schema:we.properties.patternProperties.propertyNames,parentSchema:we.properties.patternProperties,data:d};i===null?i=[h]:i.push(h),o++}}for(let p in d)Ue(d[p],{instancePath:e+"/patternProperties/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:p,rootData:s})||(i=i===null?Ue.errors:i.concat(Ue.errors),o=i.length)}else{let p={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object",schema:we.properties.patternProperties.type,parentSchema:we.properties.patternProperties,data:d};i===null?i=[p]:i.push(p),o++}}if(t.dependencies!==void 0){let d=t.dependencies;if(d&&typeof d=="object"&&!Array.isArray(d))for(let p in d){let f=d[p],h=o,m=!1,g=o;Ue(f,{instancePath:e+"/dependencies/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:p,rootData:s})||(i=i===null?Ue.errors:i.concat(Ue.errors),o=i.length);var c=g===o;if(m=m||c,!m){let _=o;fl(f,{instancePath:e+"/dependencies/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:p,rootData:s})||(i=i===null?fl.errors:i.concat(fl.errors),o=i.length);var c=_===o;m=m||c}if(m)o=h,i!==null&&(h?i.length=h:i=null);else{let _={instancePath:e+"/dependencies/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:we.properties.dependencies.additionalProperties.anyOf,parentSchema:we.properties.dependencies.additionalProperties,data:f};i===null?i=[_]:i.push(_),o++}}else{let p={instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object",schema:we.properties.dependencies.type,parentSchema:we.properties.dependencies,data:d};i===null?i=[p]:i.push(p),o++}}if(t.propertyNames!==void 0&&(Ue(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?Ue.errors:i.concat(Ue.errors),o=i.length)),t.enum!==void 0){let d=t.enum;if(Array.isArray(d)){if(d.length<1){let h={instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:we.properties.enum,data:d};i===null?i=[h]:i.push(h),o++}let p=d.length,f;if(p>1){e:for(;p--;)for(f=p;f--;)if(tM(d[p],d[f])){let h={instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:p,j:f},message:"must NOT have duplicate items (items ## "+f+" and "+p+" are identical)",schema:!0,parentSchema:we.properties.enum,data:d};i===null?i=[h]:i.push(h),o++;break e}}}else{let p={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:we.properties.enum.type,parentSchema:we.properties.enum,data:d};i===null?i=[p]:i.push(p),o++}}if(t.type!==void 0){let d=t.type,p=o,f=!1,h=o;pl(d,{instancePath:e+"/type",parentData:t,parentDataProperty:"type",rootData:s})||(i=i===null?pl.errors:i.concat(pl.errors),o=i.length);var l=h===o;if(f=f||l,!f){let m=o;if(Array.isArray(d)){if(d.length<1){let E={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:we.properties.type.anyOf[1],data:d};i===null?i=[E]:i.push(E),o++}let _=d.length;for(let E=0;E<_;E++)pl(d[E],{instancePath:e+"/type/"+E,parentData:d,parentDataProperty:E,rootData:s})||(i=i===null?pl.errors:i.concat(pl.errors),o=i.length);let D=d.length,v;if(D>1){e:for(;D--;)for(v=D;v--;)if(tM(d[D],d[v])){let E={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:D,j:v},message:"must NOT have duplicate items (items ## "+v+" and "+D+" are identical)",schema:!0,parentSchema:we.properties.type.anyOf[1],data:d};i===null?i=[E]:i.push(E),o++;break e}}}else{let _={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array",schema:we.properties.type.anyOf[1].type,parentSchema:we.properties.type.anyOf[1],data:d};i===null?i=[_]:i.push(_),o++}var l=m===o;f=f||l}if(f)o=p,i!==null&&(p?i.length=p:i=null);else{let m={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:we.properties.type.anyOf,parentSchema:we.properties.type,data:d};i===null?i=[m]:i.push(m),o++}}if(t.format!==void 0){let d=t.format;if(typeof d!="string"){let p={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.format.type,parentSchema:we.properties.format,data:d};i===null?i=[p]:i.push(p),o++}}if(t.contentMediaType!==void 0){let d=t.contentMediaType;if(typeof d!="string"){let p={instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.contentMediaType.type,parentSchema:we.properties.contentMediaType,data:d};i===null?i=[p]:i.push(p),o++}}if(t.contentEncoding!==void 0){let d=t.contentEncoding;if(typeof d!="string"){let p={instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.contentEncoding.type,parentSchema:we.properties.contentEncoding,data:d};i===null?i=[p]:i.push(p),o++}}t.if!==void 0&&(Ue(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:s})||(i=i===null?Ue.errors:i.concat(Ue.errors),o=i.length)),t.then!==void 0&&(Ue(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:s})||(i=i===null?Ue.errors:i.concat(Ue.errors),o=i.length)),t.else!==void 0&&(Ue(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:s})||(i=i===null?Ue.errors:i.concat(Ue.errors),o=i.length)),t.allOf!==void 0&&(fi(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:s})||(i=i===null?fi.errors:i.concat(fi.errors),o=i.length)),t.anyOf!==void 0&&(fi(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:s})||(i=i===null?fi.errors:i.concat(fi.errors),o=i.length)),t.oneOf!==void 0&&(fi(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:s})||(i=i===null?fi.errors:i.concat(fi.errors),o=i.length)),t.not!==void 0&&(Ue(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:s})||(i=i===null?Ue.errors:i.concat(Ue.errors),o=i.length))}return Ue.errors=i,o===0}function Mb(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ze.type,parentSchema:ze,data:t};i===null?i=[f]:i.push(f),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:ze.oneOf[0].required,parentSchema:ze.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="intent_to_retain"||f==="filter"||f==="name")){let h={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:ze.oneOf[0],data:t};i===null?i=[h]:i.push(h),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let h={instancePath:e+"/id",schemaPath:"#/oneOf/0/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[0].properties.id.type,parentSchema:ze.oneOf[0].properties.id,data:f};i===null?i=[h]:i.push(h),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let h=f.length;for(let m=0;m<h;m++){let g=f[m];if(typeof g!="string"){let _={instancePath:e+"/path/"+m,schemaPath:"#/oneOf/0/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[0].properties.path.items.type,parentSchema:ze.oneOf[0].properties.path.items,data:g};i===null?i=[_]:i.push(_),o++}}}else{let h={instancePath:e+"/path",schemaPath:"#/oneOf/0/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ze.oneOf[0].properties.path.type,parentSchema:ze.oneOf[0].properties.path,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[0].properties.purpose.type,parentSchema:ze.oneOf[0].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.intent_to_retain!==void 0){let f=t.intent_to_retain;if(typeof f!="boolean"){let h={instancePath:e+"/intent_to_retain",schemaPath:"#/oneOf/0/properties/intent_to_retain/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:ze.oneOf[0].properties.intent_to_retain.type,parentSchema:ze.oneOf[0].properties.intent_to_retain,data:f};i===null?i=[h]:i.push(h),o++}}if(t.filter!==void 0&&(Ue(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?Ue.errors:i.concat(Ue.errors),o=i.length)),t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[0].properties.name.type,parentSchema:ze.oneOf[0].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}}var p=l===o;p&&(u=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:ze.oneOf[1].required,parentSchema:ze.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.filter===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"filter"},message:"must have required property 'filter'",schema:ze.oneOf[1].required,parentSchema:ze.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.predicate===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"predicate"},message:"must have required property 'predicate'",schema:ze.oneOf[1].required,parentSchema:ze.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="intent_to_retain"||f==="filter"||f==="predicate"||f==="name")){let h={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:ze.oneOf[1],data:t};i===null?i=[h]:i.push(h),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let h={instancePath:e+"/id",schemaPath:"#/oneOf/1/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[1].properties.id.type,parentSchema:ze.oneOf[1].properties.id,data:f};i===null?i=[h]:i.push(h),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let h=f.length;for(let m=0;m<h;m++){let g=f[m];if(typeof g!="string"){let _={instancePath:e+"/path/"+m,schemaPath:"#/oneOf/1/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[1].properties.path.items.type,parentSchema:ze.oneOf[1].properties.path.items,data:g};i===null?i=[_]:i.push(_),o++}}}else{let h={instancePath:e+"/path",schemaPath:"#/oneOf/1/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ze.oneOf[1].properties.path.type,parentSchema:ze.oneOf[1].properties.path,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[1].properties.purpose.type,parentSchema:ze.oneOf[1].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.intent_to_retain!==void 0){let f=t.intent_to_retain;if(typeof f!="boolean"){let h={instancePath:e+"/intent_to_retain",schemaPath:"#/oneOf/1/properties/intent_to_retain/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:ze.oneOf[1].properties.intent_to_retain.type,parentSchema:ze.oneOf[1].properties.intent_to_retain,data:f};i===null?i=[h]:i.push(h),o++}}if(t.filter!==void 0&&(Ue(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?Ue.errors:i.concat(Ue.errors),o=i.length)),t.predicate!==void 0){let f=t.predicate;if(typeof f!="string"){let h={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[1].properties.predicate.type,parentSchema:ze.oneOf[1].properties.predicate,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="required"||f==="preferred")){let h={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/enum",keyword:"enum",params:{allowedValues:ze.oneOf[1].properties.predicate.enum},message:"must be equal to one of the allowed values",schema:ze.oneOf[1].properties.predicate.enum,parentSchema:ze.oneOf[1].properties.predicate,data:f};i===null?i=[h]:i.push(h),o++}}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[1].properties.name.type,parentSchema:ze.oneOf[1].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}}var p=d===o;if(p&&u?(u=!1,c=[c,1]):p&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:ze.oneOf,parentSchema:ze,data:t};i===null?i=[f]:i.push(f),o++}return Mb.errors=i,o===0}function qb(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.id===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:ae.required,parentSchema:ae,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="id"||a==="name"||a==="purpose"||a==="issuance"||a==="group"||a==="format"||a==="constraints")){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:ae,data:t};i===null?i=[u]:i.push(u),o++}if(t.id!==void 0){let a=t.id;if(typeof a!="string"){let u={instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.id.type,parentSchema:ae.properties.id,data:a};i===null?i=[u]:i.push(u),o++}}if(t.name!==void 0){let a=t.name;if(typeof a!="string"){let u={instancePath:e+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.name.type,parentSchema:ae.properties.name,data:a};i===null?i=[u]:i.push(u),o++}}if(t.purpose!==void 0){let a=t.purpose;if(typeof a!="string"){let u={instancePath:e+"/purpose",schemaPath:"#/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.purpose.type,parentSchema:ae.properties.purpose,data:a};i===null?i=[u]:i.push(u),o++}}if(t.issuance!==void 0){let a=t.issuance;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)Nb(a[c],{instancePath:e+"/issuance/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?Nb.errors:i.concat(Nb.errors),o=i.length)}else{let u={instancePath:e+"/issuance",schemaPath:"#/properties/issuance/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.issuance.type,parentSchema:ae.properties.issuance,data:a};i===null?i=[u]:i.push(u),o++}}if(t.group!==void 0){let a=t.group;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++){let l=a[c];if(typeof l!="string"){let d={instancePath:e+"/group/"+c,schemaPath:"#/properties/group/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.group.items.type,parentSchema:ae.properties.group.items,data:l};i===null?i=[d]:i.push(d),o++}}}else{let u={instancePath:e+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.group.type,parentSchema:ae.properties.group,data:a};i===null?i=[u]:i.push(u),o++}}if(t.format!==void 0&&(hl(t.format,{instancePath:e+"/format",parentData:t,parentDataProperty:"format",rootData:s})||(i=i===null?hl.errors:i.concat(hl.errors),o=i.length)),t.constraints!==void 0){let a=t.constraints;if(a&&typeof a=="object"&&!Array.isArray(a)){for(let u in a)if(!(u==="limit_disclosure"||u==="statuses"||u==="fields"||u==="subject_is_issuer"||u==="is_holder"||u==="same_subject")){let c={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:ae.properties.constraints,data:a};i===null?i=[c]:i.push(c),o++}if(a.limit_disclosure!==void 0){let u=a.limit_disclosure;if(typeof u!="string"){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.limit_disclosure.type,parentSchema:ae.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.limit_disclosure.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.limit_disclosure.enum,parentSchema:ae.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}}if(a.statuses!==void 0){let u=a.statuses;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.active!==void 0){let c=u.active;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.statuses.properties.active.properties.directive.type,parentSchema:ae.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.statuses.properties.active.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.statuses.properties.active.properties.directive.enum,parentSchema:ae.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/active",schemaPath:"#/properties/constraints/properties/statuses/properties/active/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.statuses.properties.active.type,parentSchema:ae.properties.constraints.properties.statuses.properties.active,data:c};i===null?i=[l]:i.push(l),o++}}if(u.suspended!==void 0){let c=u.suspended;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.statuses.properties.suspended.properties.directive.type,parentSchema:ae.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum,parentSchema:ae.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/suspended",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.statuses.properties.suspended.type,parentSchema:ae.properties.constraints.properties.statuses.properties.suspended,data:c};i===null?i=[l]:i.push(l),o++}}if(u.revoked!==void 0){let c=u.revoked;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.statuses.properties.revoked.properties.directive.type,parentSchema:ae.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum,parentSchema:ae.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/revoked",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.statuses.properties.revoked.type,parentSchema:ae.properties.constraints.properties.statuses.properties.revoked,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/constraints/statuses",schemaPath:"#/properties/constraints/properties/statuses/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.statuses.type,parentSchema:ae.properties.constraints.properties.statuses,data:u};i===null?i=[c]:i.push(c),o++}}if(a.fields!==void 0){let u=a.fields;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)Mb(u[l],{instancePath:e+"/constraints/fields/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?Mb.errors:i.concat(Mb.errors),o=i.length)}else{let c={instancePath:e+"/constraints/fields",schemaPath:"#/properties/constraints/properties/fields/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.constraints.properties.fields.type,parentSchema:ae.properties.constraints.properties.fields,data:u};i===null?i=[c]:i.push(c),o++}}if(a.subject_is_issuer!==void 0){let u=a.subject_is_issuer;if(typeof u!="string"){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.subject_is_issuer.type,parentSchema:ae.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.subject_is_issuer.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.subject_is_issuer.enum,parentSchema:ae.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}}if(a.is_holder!==void 0){let u=a.is_holder;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:ae.properties.constraints.properties.is_holder.items.required,parentSchema:ae.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}if(d.directive===void 0){let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:ae.properties.constraints.properties.is_holder.items.required,parentSchema:ae.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}for(let p in d)if(!(p==="field_id"||p==="directive")){let f={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties",schema:!1,parentSchema:ae.properties.constraints.properties.is_holder.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let p=d.field_id;if(Array.isArray(p)){let f=p.length;for(let h=0;h<f;h++){let m=p[h];if(typeof m!="string"){let g={instancePath:e+"/constraints/is_holder/"+l+"/field_id/"+h,schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.is_holder.items.properties.field_id.items.type,parentSchema:ae.properties.constraints.properties.is_holder.items.properties.field_id.items,data:m};i===null?i=[g]:i.push(g),o++}}}else{let f={instancePath:e+"/constraints/is_holder/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.constraints.properties.is_holder.items.properties.field_id.type,parentSchema:ae.properties.constraints.properties.is_holder.items.properties.field_id,data:p};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let p=d.directive;if(typeof p!="string"){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.is_holder.items.properties.directive.type,parentSchema:ae.properties.constraints.properties.is_holder.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}if(!(p==="required"||p==="preferred")){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.is_holder.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.is_holder.items.properties.directive.enum,parentSchema:ae.properties.constraints.properties.is_holder.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}}}else{let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.is_holder.items.type,parentSchema:ae.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let c={instancePath:e+"/constraints/is_holder",schemaPath:"#/properties/constraints/properties/is_holder/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.constraints.properties.is_holder.type,parentSchema:ae.properties.constraints.properties.is_holder,data:u};i===null?i=[c]:i.push(c),o++}}if(a.same_subject!==void 0){let u=a.same_subject;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:ae.properties.constraints.properties.same_subject.items.required,parentSchema:ae.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}if(d.directive===void 0){let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:ae.properties.constraints.properties.same_subject.items.required,parentSchema:ae.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}for(let p in d)if(!(p==="field_id"||p==="directive")){let f={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties",schema:!1,parentSchema:ae.properties.constraints.properties.same_subject.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let p=d.field_id;if(Array.isArray(p)){let f=p.length;for(let h=0;h<f;h++){let m=p[h];if(typeof m!="string"){let g={instancePath:e+"/constraints/same_subject/"+l+"/field_id/"+h,schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.same_subject.items.properties.field_id.items.type,parentSchema:ae.properties.constraints.properties.same_subject.items.properties.field_id.items,data:m};i===null?i=[g]:i.push(g),o++}}}else{let f={instancePath:e+"/constraints/same_subject/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.constraints.properties.same_subject.items.properties.field_id.type,parentSchema:ae.properties.constraints.properties.same_subject.items.properties.field_id,data:p};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let p=d.directive;if(typeof p!="string"){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.same_subject.items.properties.directive.type,parentSchema:ae.properties.constraints.properties.same_subject.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}if(!(p==="required"||p==="preferred")){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.same_subject.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.same_subject.items.properties.directive.enum,parentSchema:ae.properties.constraints.properties.same_subject.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}}}else{let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.same_subject.items.type,parentSchema:ae.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let c={instancePath:e+"/constraints/same_subject",schemaPath:"#/properties/constraints/properties/same_subject/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.constraints.properties.same_subject.type,parentSchema:ae.properties.constraints.properties.same_subject,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.type,parentSchema:ae.properties.constraints,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.type,parentSchema:ae,data:t};i===null?i=[a]:i.push(a),o++}return qb.errors=i,o===0}function h2(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.presentation_definition!==void 0){let a=t.presentation_definition;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.id===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:Sr.properties.presentation_definition.required,parentSchema:Sr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}if(a.input_descriptors===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"input_descriptors"},message:"must have required property 'input_descriptors'",schema:Sr.properties.presentation_definition.required,parentSchema:Sr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}for(let u in a)if(!(u==="id"||u==="name"||u==="purpose"||u==="format"||u==="frame"||u==="submission_requirements"||u==="input_descriptors")){let c={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Sr.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}if(a.id!==void 0){let u=a.id;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/id",schemaPath:"#/properties/presentation_definition/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Sr.properties.presentation_definition.properties.id.type,parentSchema:Sr.properties.presentation_definition.properties.id,data:u};i===null?i=[c]:i.push(c),o++}}if(a.name!==void 0){let u=a.name;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/name",schemaPath:"#/properties/presentation_definition/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Sr.properties.presentation_definition.properties.name.type,parentSchema:Sr.properties.presentation_definition.properties.name,data:u};i===null?i=[c]:i.push(c),o++}}if(a.purpose!==void 0){let u=a.purpose;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/purpose",schemaPath:"#/properties/presentation_definition/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Sr.properties.presentation_definition.properties.purpose.type,parentSchema:Sr.properties.presentation_definition.properties.purpose,data:u};i===null?i=[c]:i.push(c),o++}}if(a.format!==void 0&&(hl(a.format,{instancePath:e+"/presentation_definition/format",parentData:a,parentDataProperty:"format",rootData:s})||(i=i===null?hl.errors:i.concat(hl.errors),o=i.length)),a.frame!==void 0){let u=a.frame;if(!(u&&typeof u=="object"&&!Array.isArray(u))){let c={instancePath:e+"/presentation_definition/frame",schemaPath:"#/properties/presentation_definition/properties/frame/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Sr.properties.presentation_definition.properties.frame.type,parentSchema:Sr.properties.presentation_definition.properties.frame,data:u};i===null?i=[c]:i.push(c),o++}}if(a.submission_requirements!==void 0){let u=a.submission_requirements;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)Ry(u[l],{instancePath:e+"/presentation_definition/submission_requirements/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?Ry.errors:i.concat(Ry.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/submission_requirements",schemaPath:"#/properties/presentation_definition/properties/submission_requirements/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Sr.properties.presentation_definition.properties.submission_requirements.type,parentSchema:Sr.properties.presentation_definition.properties.submission_requirements,data:u};i===null?i=[c]:i.push(c),o++}}if(a.input_descriptors!==void 0){let u=a.input_descriptors;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)qb(u[l],{instancePath:e+"/presentation_definition/input_descriptors/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?qb.errors:i.concat(qb.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/input_descriptors",schemaPath:"#/properties/presentation_definition/properties/input_descriptors/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Sr.properties.presentation_definition.properties.input_descriptors.type,parentSchema:Sr.properties.presentation_definition.properties.input_descriptors,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Sr.properties.presentation_definition.type,parentSchema:Sr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Sr.type,parentSchema:Sr,data:t};i===null?i=[a]:i.push(a),o++}return h2.errors=i,o===0}});var sM=b(bn=>{"use strict";var iM=bn&&bn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bn,"__esModule",{value:!0});bn.filterToRestrictedDIDs=bn.isRestrictedDID=bn.uniformDIDMethods=bn.definitionVersionDiscovery=bn.getIssuerString=bn.getSubjectIdsAsString=void 0;var rM=ll(),Nfe=iM(o2()),Mfe=iM(m2()),qfe=Db(),nM=WD();function Lfe(t){return(Array.isArray(t.credentialSubject)?t.credentialSubject:[t.credentialSubject]).filter(r=>!!r.id).map(r=>r.id)}bn.getSubjectIdsAsString=Lfe;function Ufe(t){return qfe.ObjectUtils.isString(t.issuer)?t.issuer:t.issuer.id}bn.getIssuerString=Ufe;function Kfe(t){let e=JSON.parse(JSON.stringify(t));nM.JsonPathUtils.changePropertyNameRecursively(e,"_const","const"),nM.JsonPathUtils.changePropertyNameRecursively(e,"_enum","enum");let r={presentation_definition:e},n=(0,Mfe.default)(r);return n?{version:rM.PEVersion.v2}:(n=(0,Nfe.default)(r),n?{version:rM.PEVersion.v1}:{error:"This is not a valid PresentationDefinition"})}bn.definitionVersionDiscovery=Kfe;function g2(t,e){var r;let n=(r=t?.map(s=>s.toLowerCase()).map(s=>s.startsWith("did:")?s:`did:${s}`))!==null&&r!==void 0?r:[];if(e?.removePrefix){let s=e.removePrefix.endsWith(":")?e.removePrefix.length:e.removePrefix.length+1;n=n.map(i=>i.startsWith(e.removePrefix)?i.substring(s):i)}return n.includes("did")?[]:n}bn.uniformDIDMethods=g2;function Vfe(t,e){let r=g2(e);return r.length===0||r.some(n=>t.toLowerCase().startsWith(n))}bn.isRestrictedDID=Vfe;function zfe(t,e){let r=g2(e);return r.length===0?t:r.flatMap(n=>t.filter(s=>s.toLowerCase().startsWith(n)))}bn.filterToRestrictedDIDs=zfe});var fM=b(($6e,dM)=>{"use strict";var v2=Object.defineProperty,Jfe=Object.getOwnPropertyDescriptor,Hfe=Object.getOwnPropertyNames,Wfe=Object.prototype.hasOwnProperty,Gfe=(t,e)=>{for(var r in e)v2(t,r,{get:e[r],enumerable:!0})},Zfe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Hfe(e))!Wfe.call(t,s)&&s!==r&&v2(t,s,{get:()=>e[s],enumerable:!(n=Jfe(e,s))||n.enumerable});return t},Xfe=t=>Zfe(v2({},"__esModule",{value:!0}),t),oM=(t,e,r)=>new Promise((n,s)=>{var i=u=>{try{a(r.next(u))}catch(c){s(c)}},o=u=>{try{a(r.throw(u))}catch(c){s(c)}},a=u=>u.done?n(u.value):Promise.resolve(u.value).then(i,o);a((r=r.apply(t,e)).next())}),aM={};Gfe(aM,{createHashMappingForSerializedDisclosure:()=>lM,present:()=>epe,presentSync:()=>tpe,presentableKeys:()=>Yfe,presentableKeysSync:()=>Qfe,selectDisclosures:()=>rpe,transformPresentationFrame:()=>$y});dM.exports=Xfe(aM);var uM=JA(),cM=VA(),hi=Sv(),Yfe=(t,e,r)=>oM(void 0,null,function*(){let{disclosureKeymap:n}=yield(0,hi.unpack)(t,e,r);return Object.keys(n).sort()}),Qfe=(t,e,r)=>{let{disclosureKeymap:n}=(0,hi.unpackSync)(t,e,r);return Object.keys(n).sort()},epe=(t,e,r)=>oM(void 0,null,function*(){let{jwt:n,kbJwt:s}=(0,hi.splitSdJwt)(t),{jwt:{payload:i},disclosures:o}=yield(0,hi.decodeSdJwt)(t,r),{_sd_alg:a}=(0,hi.getSDAlgAndPayload)(i),u={alg:a,hasher:r},c=$y(e),l=yield(0,hi.createHashMapping)(o,u),{disclosureKeymap:d}=yield(0,hi.unpack)(i,o,r),p=c.map(f=>l[d[f]]).filter(f=>f!==void 0);return[n,...p.map(f=>f.encode()),s??""].join(uM.SD_SEPARATOR)}),tpe=(t,e,r)=>{let{jwt:n,kbJwt:s}=(0,hi.splitSdJwt)(t),{jwt:{payload:i},disclosures:o}=(0,hi.decodeSdJwtSync)(t,r),{_sd_alg:a}=(0,hi.getSDAlgAndPayload)(i),u={alg:a,hasher:r},c=$y(e),l=(0,hi.createHashMappingSync)(o,u),{disclosureKeymap:d}=(0,hi.unpackSync)(i,o,r),p=c.map(f=>l[d[f]]).filter(f=>f!==void 0);return[n,...p.map(f=>f.encode()),s??""].join(uM.SD_SEPARATOR)},$y=(t,e="")=>Object.entries(t).reduce((r,[n,s])=>{let i=e?`${e}.${n}`:n;return typeof s=="boolean"?s&&r.push(i):r.push(i,...$y(s,i)),r},[]),lM=t=>{let e={};for(let r=0;r<t.length;r++){let n=t[r],{digest:s,encoded:i,key:o,salt:a,value:u}=n;e[s]=cM.Disclosure.fromArray(o?[a,o,u]:[a,u],{digest:s,encoded:i})}return e},rpe=(t,e,r)=>{if(e.length===0)return[];let n=lM(e),{disclosureKeymap:s}=(0,hi.unpackObj)(t,n);return $y(r).map(u=>n[s[u]]).filter(u=>u!==void 0).map(u=>{let{salt:c,key:l,value:d,_digest:p}=u;if(!p)throw new cM.SDJWTException("Implementation error: _digest is not defined");return{digest:p,encoded:u.encode(),salt:c,key:l,value:d}})}});function pM(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}var hM=dt(()=>{});function Cu(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}var jy=dt(()=>{});function _f(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Cu(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}var Lb=dt(()=>{jy()});function yM(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));let r=_f(e),n=0;for(let s of t)r.set(s,n),n+=s.length;return Cu(r)}var mM=dt(()=>{Lb();jy()});function gM(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var vM=dt(()=>{});function npe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var m=0,g=0,_=0,D=h.length;_!==D&&h[_]===0;)_++,m++;for(var v=(D-_)*l+1>>>0,E=new Uint8Array(v);_!==D;){for(var S=h[_],P=0,C=v-1;(S!==0||P<g)&&C!==-1;C--,P++)S+=256*E[C]>>>0,E[C]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");g=P,_++}for(var B=v-g;B!==v&&E[B]===0;)B++;for(var F=u.repeat(m);B<v;++B)F+=t.charAt(E[B]);return F}function p(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var m=0;if(h[m]!==" "){for(var g=0,_=0;h[m]===u;)g++,m++;for(var D=(h.length-m)*c+1>>>0,v=new Uint8Array(D);h[m];){var E=r[h.charCodeAt(m)];if(E===255)return;for(var S=0,P=D-1;(E!==0||S<_)&&P!==-1;P--,S++)E+=a*v[P]>>>0,v[P]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");_=S,m++}if(h[m]!==" "){for(var C=D-_;C!==D&&v[C]===0;)C++;for(var B=new Uint8Array(g+(D-C)),F=g;C!==D;)B[F++]=v[C++];return B}}}function f(h){var m=p(h);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:p,decode:f}}var ipe,spe,bM,wM=dt(()=>{ipe=npe,spe=ipe,bM=spe});var J6e,_M,_a,EM,SM,Pu=dt(()=>{J6e=new Uint8Array(0),_M=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},_a=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},EM=t=>new TextEncoder().encode(t),SM=t=>new TextDecoder().decode(t)});var b2,w2,_2,xM,E2,Ef,Ou,ope,ape,hr,_s=dt(()=>{wM();Pu();b2=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},w2=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return xM(this,e)}},_2=class{constructor(e){this.decoders=e}or(e){return xM(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},xM=(t,e)=>new _2({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),E2=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new b2(e,r,n),this.decoder=new w2(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Ef=({name:t,prefix:e,encode:r,decode:n})=>new E2(t,e,r,n),Ou=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:s}=bM(r,e);return Ef({prefix:t,name:e,encode:n,decode:i=>_a(s(i))})},ope=(t,e,r,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,u=0,c=0;for(let l=0;l<i;++l){let d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},ape=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},hr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Ef({prefix:e,name:t,encode(s){return ape(s,n,r)},decode(s){return ope(s,n,r,t)}})});var S2={};Cr(S2,{identity:()=>upe});var upe,DM=dt(()=>{_s();Pu();upe=Ef({prefix:"\0",name:"identity",encode:t=>SM(t),decode:t=>EM(t)})});var A2={};Cr(A2,{base2:()=>cpe});var cpe,CM=dt(()=>{_s();cpe=hr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var x2={};Cr(x2,{base8:()=>lpe});var lpe,PM=dt(()=>{_s();lpe=hr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var D2={};Cr(D2,{base10:()=>dpe});var dpe,OM=dt(()=>{_s();dpe=Ou({prefix:"9",name:"base10",alphabet:"0123456789"})});var C2={};Cr(C2,{base16:()=>fpe,base16upper:()=>ppe});var fpe,ppe,TM=dt(()=>{_s();fpe=hr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ppe=hr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var P2={};Cr(P2,{base32:()=>Sf,base32hex:()=>gpe,base32hexpad:()=>bpe,base32hexpadupper:()=>wpe,base32hexupper:()=>vpe,base32pad:()=>ype,base32padupper:()=>mpe,base32upper:()=>hpe,base32z:()=>_pe});var Sf,hpe,ype,mpe,gpe,vpe,bpe,wpe,_pe,O2=dt(()=>{_s();Sf=hr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),hpe=hr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ype=hr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),mpe=hr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),gpe=hr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),vpe=hr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bpe=hr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),wpe=hr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),_pe=hr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var T2={};Cr(T2,{base36:()=>Epe,base36upper:()=>Spe});var Epe,Spe,BM=dt(()=>{_s();Epe=Ou({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Spe=Ou({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var B2={};Cr(B2,{base58btc:()=>go,base58flickr:()=>Ape});var go,Ape,I2=dt(()=>{_s();go=Ou({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ape=Ou({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var F2={};Cr(F2,{base64:()=>xpe,base64pad:()=>Dpe,base64url:()=>Cpe,base64urlpad:()=>Ppe});var xpe,Dpe,Cpe,Ppe,IM=dt(()=>{_s();xpe=hr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Dpe=hr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Cpe=hr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ppe=hr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var k2={};Cr(k2,{base256emoji:()=>Fpe});function Bpe(t){return t.reduce((e,r)=>(e+=Ope[r],e),"")}function Ipe(t){let e=[];for(let r of t){let n=Tpe[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var FM,Ope,Tpe,Fpe,kM=dt(()=>{_s();FM=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Ope=FM.reduce((t,e,r)=>(t[r]=e,t),[]),Tpe=FM.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);Fpe=Ef({prefix:"\u{1F680}",name:"base256emoji",encode:Bpe,decode:Ipe})});function jM(t,e,r){e=e||[],r=r||0;for(var n=r;t>=jpe;)e[r++]=t&255|RM,t/=128;for(;t&$pe;)e[r++]=t&255|RM,t>>>=7;return e[r]=t|0,jM.bytes=r-n+1,e}function R2(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw R2.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&$M)<<s:(o&$M)*Math.pow(2,s),s+=7}while(o>=Mpe);return R2.bytes=i-n,r}var kpe,RM,Rpe,$pe,jpe,Npe,Mpe,$M,qpe,Lpe,Upe,Kpe,Vpe,zpe,Jpe,Hpe,Wpe,Gpe,Zpe,Xpe,Ny,NM=dt(()=>{kpe=jM,RM=128,Rpe=127,$pe=~Rpe,jpe=Math.pow(2,31);Npe=R2,Mpe=128,$M=127;qpe=Math.pow(2,7),Lpe=Math.pow(2,14),Upe=Math.pow(2,21),Kpe=Math.pow(2,28),Vpe=Math.pow(2,35),zpe=Math.pow(2,42),Jpe=Math.pow(2,49),Hpe=Math.pow(2,56),Wpe=Math.pow(2,63),Gpe=function(t){return t<qpe?1:t<Lpe?2:t<Upe?3:t<Kpe?4:t<Vpe?5:t<zpe?6:t<Jpe?7:t<Hpe?8:t<Wpe?9:10},Zpe={encode:kpe,decode:Npe,encodingLength:Gpe},Xpe=Zpe,Ny=Xpe});var My,Af,xf,Kb=dt(()=>{NM();My=(t,e=0)=>[Ny.decode(t,e),Ny.decode.bytes],Af=(t,e,r=0)=>(Ny.encode(t,e,r),e),xf=t=>Ny.encodingLength(t)});var yl,MM,qM,Df,Ly=dt(()=>{Pu();Kb();yl=(t,e)=>{let r=e.byteLength,n=xf(t),s=n+xf(r),i=new Uint8Array(s+r);return Af(t,i,0),Af(r,i,n),i.set(e,s),new Df(t,r,e,i)},MM=t=>{let e=_a(t),[r,n]=My(e),[s,i]=My(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new Df(r,s,o,e)},qM=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&_M(t.bytes,e.bytes),Df=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}});var j2,$2,N2=dt(()=>{Ly();j2=({name:t,code:e,encode:r})=>new $2(t,e,r),$2=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?yl(this.code,r):r.then(n=>yl(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var M2={};Cr(M2,{sha256:()=>Ype,sha512:()=>Qpe});var UM,Ype,Qpe,KM=dt(()=>{N2();UM=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Ype=j2({name:"sha2-256",code:18,encode:UM("SHA-256")}),Qpe=j2({name:"sha2-512",code:19,encode:UM("SHA-512")})});var q2={};Cr(q2,{identity:()=>rhe});var VM,ehe,zM,the,rhe,JM=dt(()=>{Pu();Ly();VM=0,ehe="identity",zM=_a,the=t=>yl(VM,zM(t)),rhe={code:VM,name:ehe,encode:zM,digest:the}});var HM=dt(()=>{Pu()});var pRe,hRe,WM=dt(()=>{pRe=new TextEncoder,hRe=new TextDecoder});var Jb,she,ohe,ahe,Uy,uhe,GM,ZM,Vb,zb,che,lhe,dhe,XM=dt(()=>{Kb();Ly();I2();O2();Pu();Jb=class t{constructor(e,r,n,s){this.code=r,this.version=e,this.multihash=n,this.bytes=s,this.byteOffset=s.byteOffset,this.byteLength=s.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:zb,byteLength:zb,code:Vb,version:Vb,multihash:Vb,bytes:Vb,_baseCache:zb,asCID:zb})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==Uy)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==uhe)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=yl(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&qM(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:s}=this;switch(n){case 0:return ohe(r,s,e||go.encoder);default:return ahe(r,s,e||Sf.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return lhe(/^0\.0/,dhe),!!(e&&(e[ZM]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof t)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:s,bytes:i}=e;return new t(r,n,s,i||GM(r,n,s.bytes))}else if(e!=null&&e[ZM]===!0){let{version:r,multihash:n,code:s}=e,i=MM(n);return t.create(r,s,i)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==Uy)throw new Error(`Version 0 CID must use dag-pb (code: ${Uy}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let s=GM(e,r,n.bytes);return new t(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,Uy,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,s=_a(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=s.subarray(r.multihashSize-r.digestSize),o=new Df(r.multihashCode,r.digestSize,i,s);return[r.version===0?t.createV0(o):t.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[d,p]=My(e.subarray(r));return r+=p,d},s=n(),i=Uy;if(s===18?(s=0,r=0):s===1&&(i=n()),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);let o=r,a=n(),u=n(),c=r+u,l=c-o;return{version:s,codec:i,multihashCode:a,digestSize:u,multihashSize:l,size:c}}static parse(e,r){let[n,s]=she(e,r),i=t.decode(s);return i._baseCache.set(n,e),i}},she=(t,e)=>{switch(t[0]){case"Q":{let r=e||go;return[go.prefix,r.decode(`${go.prefix}${t}`)]}case go.prefix:{let r=e||go;return[go.prefix,r.decode(t)]}case Sf.prefix:{let r=e||Sf;return[Sf.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},ohe=(t,e,r)=>{let{prefix:n}=r;if(n!==go.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let s=e.get(n);if(s==null){let i=r.encode(t).slice(1);return e.set(n,i),i}else return s},ahe=(t,e,r)=>{let{prefix:n}=r,s=e.get(n);if(s==null){let i=r.encode(t);return e.set(n,i),i}else return s},Uy=112,uhe=18,GM=(t,e,r)=>{let n=xf(t),s=n+xf(e),i=new Uint8Array(s+r.byteLength);return Af(t,i,0),Af(e,i,n),i.set(r,s),i},ZM=Symbol.for("@ipld/js-cid/CID"),Vb={writable:!1,configurable:!1,enumerable:!0},zb={writable:!1,enumerable:!1,configurable:!1},che="0.0.0-dev",lhe=(t,e)=>{if(t.test(che))console.warn(e);else throw new Error(e)},dhe=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var YM=dt(()=>{XM();Kb();Pu();N2();Ly()});var L2,ERe,QM=dt(()=>{DM();CM();PM();OM();TM();O2();BM();I2();IM();kM();KM();JM();HM();WM();YM();L2={...S2,...A2,...x2,...D2,...C2,...P2,...T2,...B2,...F2,...k2},ERe={...M2,...q2}});function tq(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var eq,U2,fhe,Hb,K2=dt(()=>{QM();Lb();eq=tq("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),U2=tq("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=_f(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),fhe={utf8:eq,"utf-8":eq,hex:L2.base16,latin1:U2,ascii:U2,binary:U2,...L2},Hb=fhe});function rq(t,e="utf8"){let r=Hb[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Cu(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var nq=dt(()=>{K2();jy()});function iq(t,e="utf8"){let r=Hb[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var sq=dt(()=>{K2()});function oq(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");let r=_f(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return Cu(r)}var aq=dt(()=>{Lb();jy()});var uq={};Cr(uq,{compare:()=>pM,concat:()=>yM,equals:()=>gM,fromString:()=>rq,toString:()=>iq,xor:()=>oq});var cq=dt(()=>{hM();mM();vM();nq();sq();aq()});var pq=b(Ki=>{"use strict";var phe=Ki&&Ki.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),hhe=Ki&&Ki.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),yhe=Ki&&Ki.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&phe(e,t,r);return hhe(e,t),e};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.applySdJwtLimitDisclosure=Ki.calculateSdHash=void 0;var lq=Sv(),dq=fM(),mhe=yhe((cq(),MT(uq))),fq=Db();function ghe(t,e,r){let n=r(t,e);return mhe.toString(n,"base64url")}Ki.calculateSdHash=ghe;function vhe(t,e){let r=t.disclosures.map(c=>({digest:c.digest,encoded:c.encoded,salt:c.decoded[0],value:c.decoded.length===3?c.decoded[2]:c.decoded[1],key:c.decoded.length===3?c.decoded[1]:void 0})),n=(0,dq.selectDisclosures)(fq.ObjectUtils.cloneDeep(t.signedPayload),r,e);t.disclosures=n.map(c=>({encoded:c.encoded,decoded:c.key?[c.salt,c.key,c.value]:[c.salt,c.value],digest:c.digest}));let s=t.disclosures.map(c=>c.encoded),i=t.compactSdJwtVc.split("~");t.compactSdJwtVc=i.filter((c,l)=>l===0||l===i.length-1||s.includes(c)).join("~");let{payload:o}=(0,lq.getSDAlgAndPayload)(fq.ObjectUtils.cloneDeep(t.signedPayload)),a=(0,dq.createHashMappingForSerializedDisclosure)(n),{unpackedObj:u}=(0,lq.unpackObj)(o,a);t.decodedPayload=u}Ki.applySdJwtLimitDisclosure=vhe});var Ui=b(Es=>{"use strict";var bhe=Es&&Es.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ky=Es&&Es.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&bhe(e,t,r)};Object.defineProperty(Es,"__esModule",{value:!0});Ky(WD(),Es);Ky(Db(),Es);Ky(U9(),Es);Ky(sM(),Es);Ky(pq(),Es)});var Vi=b(Wb=>{"use strict";Object.defineProperty(Wb,"__esModule",{value:!0});Wb.AbstractEvaluationHandler=void 0;var whe=Li(),_he=Nr(),V2=class{constructor(e){this._client=e}setNext(e){return this.nextHandler=e,e}getNext(){return this.nextHandler}hasNext(){return this.nextHandler!=null}get client(){return this._client}get wrappedVcs(){return this._client.wrappedVcs}set wrappedVcs(e){this._client.wrappedVcs=e}get presentationSubmission(){return this._client.presentationSubmission}set presentationSubmission(e){this._client.presentationSubmission=e}getResults(){return this._client.results}updatePresentationSubmission(e){this._client.assertPresentationSubmission(),this.presentationSubmission.descriptor_map.forEach((r,n,s)=>{let i;this.getResults().filter(a=>a.status===_he.Status.ERROR&&a.evaluator===this.getName()).find(a=>(i=whe.JSONPath.query(e,a.input_descriptor_path)[0],a.verifiable_credential_path===r.path&&i?.id===r.id))&&delete s[n]})}removeDuplicate(e){return e.reduce((r,n)=>r.find(i=>i.input_descriptor_path===n.input_descriptor_path&&i.verifiable_credential_path===n.verifiable_credential_path)?r:r.concat([n]),[])}};Wb.AbstractEvaluationHandler=V2});var yq=b(hq=>{"use strict";Object.defineProperty(hq,"__esModule",{value:!0})});var Jy=b(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.regexpCode=xt.getEsmExportName=xt.getProperty=xt.safeStringify=xt.stringify=xt.strConcat=xt.addCodeArg=xt.str=xt._=xt.nil=xt._Code=xt.Name=xt.IDENTIFIER=xt._CodeOrName=void 0;var Vy=class{};xt._CodeOrName=Vy;xt.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var ml=class extends Vy{constructor(e){if(super(),!xt.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};xt.Name=ml;var zi=class extends Vy{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof ml&&(r[n.str]=(r[n.str]||0)+1),r),{})}};xt._Code=zi;xt.nil=new zi("");function mq(t,...e){let r=[t[0]],n=0;for(;n<e.length;)J2(r,e[n]),r.push(t[++n]);return new zi(r)}xt._=mq;var z2=new zi("+");function gq(t,...e){let r=[zy(t[0])],n=0;for(;n<e.length;)r.push(z2),J2(r,e[n]),r.push(z2,zy(t[++n]));return Ehe(r),new zi(r)}xt.str=gq;function J2(t,e){e instanceof zi?t.push(...e._items):e instanceof ml?t.push(e):t.push(xhe(e))}xt.addCodeArg=J2;function Ehe(t){let e=1;for(;e<t.length-1;){if(t[e]===z2){let r=She(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function She(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof ml||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof ml))return`"${t}${e.slice(1)}`}function Ahe(t,e){return e.emptyStr()?t:t.emptyStr()?e:gq`${t}${e}`}xt.strConcat=Ahe;function xhe(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:zy(Array.isArray(t)?t.join(","):t)}function Dhe(t){return new zi(zy(t))}xt.stringify=Dhe;function zy(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}xt.safeStringify=zy;function Che(t){return typeof t=="string"&&xt.IDENTIFIER.test(t)?new zi(`.${t}`):mq`[${t}]`}xt.getProperty=Che;function Phe(t){if(typeof t=="string"&&xt.IDENTIFIER.test(t))return new zi(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}xt.getEsmExportName=Phe;function Ohe(t){return new zi(t.toString())}xt.regexpCode=Ohe});var G2=b(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.ValueScope=Yn.ValueScopeName=Yn.Scope=Yn.varKinds=Yn.UsedValueState=void 0;var Xn=Jy(),H2=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Gb;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Gb||(Yn.UsedValueState=Gb={}));Yn.varKinds={const:new Xn.Name("const"),let:new Xn.Name("let"),var:new Xn.Name("var")};var Zb=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Xn.Name?e:this.name(e)}name(e){return new Xn.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Yn.Scope=Zb;var Xb=class extends Xn.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,Xn._)`.${new Xn.Name(r)}[${n}]`}};Yn.ValueScopeName=Xb;var The=(0,Xn._)`\n`,W2=class extends Zb{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?The:Xn.nil}}get(){return this._scope}name(e){return new Xb(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let l=a.get(o);if(l)return l}else a=this._values[i]=new Map;a.set(o,s);let u=this._scope[i]||(this._scope[i]=[]),c=u.length;return u[c]=r.ref,s.setValue(r,{property:i,itemIndex:c}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Xn._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=Xn.nil;for(let o in e){let a=e[o];if(!a)continue;let u=n[o]=n[o]||new Map;a.forEach(c=>{if(u.has(c))return;u.set(c,Gb.Started);let l=r(c);if(l){let d=this.opts.es5?Yn.varKinds.var:Yn.varKinds.const;i=(0,Xn._)`${i}${d} ${c} = ${l};${this.opts._n}`}else if(l=s?.(c))i=(0,Xn._)`${i}${l}${this.opts._n}`;else throw new H2(c);u.set(c,Gb.Completed)})}return i}};Yn.ValueScope=W2});var rt=b(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.or=at.and=at.not=at.CodeGen=at.operators=at.varKinds=at.ValueScopeName=at.ValueScope=at.Scope=at.Name=at.regexpCode=at.stringify=at.getProperty=at.nil=at.strConcat=at.str=at._=void 0;var vt=Jy(),Ss=G2(),Tu=Jy();Object.defineProperty(at,"_",{enumerable:!0,get:function(){return Tu._}});Object.defineProperty(at,"str",{enumerable:!0,get:function(){return Tu.str}});Object.defineProperty(at,"strConcat",{enumerable:!0,get:function(){return Tu.strConcat}});Object.defineProperty(at,"nil",{enumerable:!0,get:function(){return Tu.nil}});Object.defineProperty(at,"getProperty",{enumerable:!0,get:function(){return Tu.getProperty}});Object.defineProperty(at,"stringify",{enumerable:!0,get:function(){return Tu.stringify}});Object.defineProperty(at,"regexpCode",{enumerable:!0,get:function(){return Tu.regexpCode}});Object.defineProperty(at,"Name",{enumerable:!0,get:function(){return Tu.Name}});var tw=G2();Object.defineProperty(at,"Scope",{enumerable:!0,get:function(){return tw.Scope}});Object.defineProperty(at,"ValueScope",{enumerable:!0,get:function(){return tw.ValueScope}});Object.defineProperty(at,"ValueScopeName",{enumerable:!0,get:function(){return tw.ValueScopeName}});Object.defineProperty(at,"varKinds",{enumerable:!0,get:function(){return tw.varKinds}});at.operators={GT:new vt._Code(">"),GTE:new vt._Code(">="),LT:new vt._Code("<"),LTE:new vt._Code("<="),EQ:new vt._Code("==="),NEQ:new vt._Code("!=="),NOT:new vt._Code("!"),OR:new vt._Code("||"),AND:new vt._Code("&&"),ADD:new vt._Code("+")};var Ea=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},Z2=class extends Ea{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Ss.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Pf(this.rhs,e,r)),this}get names(){return this.rhs instanceof vt._CodeOrName?this.rhs.names:{}}},Yb=class extends Ea{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof vt.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Pf(this.rhs,e,r),this}get names(){let e=this.lhs instanceof vt.Name?{}:{...this.lhs.names};return ew(e,this.rhs)}},X2=class extends Yb{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},Y2=class extends Ea{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Q2=class extends Ea{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},eC=class extends Ea{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},tC=class extends Ea{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Pf(this.code,e,r),this}get names(){return this.code instanceof vt._CodeOrName?this.code.names:{}}},Hy=class extends Ea{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(Bhe(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>bl(e,r.names),{})}},Sa=class extends Hy{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},rC=class extends Hy{},Cf=class extends Sa{};Cf.kind="else";var gl=class t extends Sa{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Cf(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(vq(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Pf(this.condition,e,r),this}get names(){let e=super.names;return ew(e,this.condition),this.else&&bl(e,this.else.names),e}};gl.kind="if";var vl=class extends Sa{};vl.kind="for";var nC=class extends vl{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Pf(this.iteration,e,r),this}get names(){return bl(super.names,this.iteration.names)}},iC=class extends vl{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?Ss.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=ew(super.names,this.from);return ew(e,this.to)}},Qb=class extends vl{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Pf(this.iterable,e,r),this}get names(){return bl(super.names,this.iterable.names)}},Wy=class extends Sa{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Wy.kind="func";var Gy=class extends Hy{render(e){return"return "+super.render(e)}};Gy.kind="return";var sC=class extends Sa{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&bl(e,this.catch.names),this.finally&&bl(e,this.finally.names),e}},Zy=class extends Sa{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Zy.kind="catch";var Xy=class extends Sa{render(e){return"finally"+super.render(e)}};Xy.kind="finally";var oC=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Ss.Scope({parent:e}),this._nodes=[new rC]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new Z2(e,i,n)),i}const(e,r,n){return this._def(Ss.varKinds.const,e,r,n)}let(e,r,n){return this._def(Ss.varKinds.let,e,r,n)}var(e,r,n){return this._def(Ss.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new Yb(e,r,n))}add(e,r){return this._leafNode(new X2(e,at.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==vt.nil&&this._leafNode(new tC(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,vt.addCodeArg)(r,s));return r.push("}"),new vt._Code(r)}if(e,r,n){if(this._blockNode(new gl(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new gl(e))}else(){return this._elseNode(new Cf)}endIf(){return this._endBlockNode(gl,Cf)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new nC(e),r)}forRange(e,r,n,s,i=this.opts.es5?Ss.varKinds.var:Ss.varKinds.let){let o=this._scope.toName(e);return this._for(new iC(i,o,r,n),()=>s(o))}forOf(e,r,n,s=Ss.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof vt.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,vt._)`${o}.length`,a=>{this.var(i,(0,vt._)`${o}[${a}]`),n(i)})}return this._for(new Qb("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?Ss.varKinds.var:Ss.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,vt._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new Qb("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(vl)}label(e){return this._leafNode(new Y2(e))}break(e){return this._leafNode(new Q2(e))}return(e){let r=new Gy;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Gy)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new sC;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new Zy(i),r(i)}return n&&(this._currNode=s.finally=new Xy,this.code(n)),this._endBlockNode(Zy,Xy)}throw(e){return this._leafNode(new eC(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=vt.nil,n,s){return this._blockNode(new Wy(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Wy)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof gl))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};at.CodeGen=oC;function bl(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function ew(t,e){return e instanceof vt._CodeOrName?bl(t,e.names):t}function Pf(t,e,r){if(t instanceof vt.Name)return n(t);if(!s(t))return t;return new vt._Code(t._items.reduce((i,o)=>(o instanceof vt.Name&&(o=n(o)),o instanceof vt._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof vt._Code&&i._items.some(o=>o instanceof vt.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function Bhe(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function vq(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,vt._)`!${aC(t)}`}at.not=vq;var Ihe=bq(at.operators.AND);function Fhe(...t){return t.reduce(Ihe)}at.and=Fhe;var khe=bq(at.operators.OR);function Rhe(...t){return t.reduce(khe)}at.or=Rhe;function bq(t){return(e,r)=>e===vt.nil?r:r===vt.nil?e:(0,vt._)`${aC(e)} ${t} ${aC(r)}`}function aC(t){return t instanceof vt.Name?t:(0,vt._)`(${t})`}});var Dt=b(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.checkStrictMode=ct.getErrorPath=ct.Type=ct.useFunc=ct.setEvaluated=ct.evaluatedPropsToName=ct.mergeEvaluated=ct.eachItem=ct.unescapeJsonPointer=ct.escapeJsonPointer=ct.escapeFragment=ct.unescapeFragment=ct.schemaRefOrVal=ct.schemaHasRulesButRef=ct.schemaHasRules=ct.checkUnknownRules=ct.alwaysValidSchema=ct.toHash=void 0;var Ht=rt(),$he=Jy();function jhe(t){let e={};for(let r of t)e[r]=!0;return e}ct.toHash=jhe;function Nhe(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(Eq(t,e),!Sq(e,t.self.RULES.all))}ct.alwaysValidSchema=Nhe;function Eq(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||Dq(t,`unknown keyword: "${i}"`)}ct.checkUnknownRules=Eq;function Sq(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}ct.schemaHasRules=Sq;function Mhe(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}ct.schemaHasRulesButRef=Mhe;function qhe({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Ht._)`${r}`}return(0,Ht._)`${t}${e}${(0,Ht.getProperty)(n)}`}ct.schemaRefOrVal=qhe;function Lhe(t){return Aq(decodeURIComponent(t))}ct.unescapeFragment=Lhe;function Uhe(t){return encodeURIComponent(cC(t))}ct.escapeFragment=Uhe;function cC(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}ct.escapeJsonPointer=cC;function Aq(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}ct.unescapeJsonPointer=Aq;function Khe(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}ct.eachItem=Khe;function wq({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let u=o===void 0?i:o instanceof Ht.Name?(i instanceof Ht.Name?t(s,i,o):e(s,i,o),o):i instanceof Ht.Name?(e(s,o,i),i):r(i,o);return a===Ht.Name&&!(u instanceof Ht.Name)?n(s,u):u}}ct.mergeEvaluated={props:wq({mergeNames:(t,e,r)=>t.if((0,Ht._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Ht._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Ht._)`${r} || {}`).code((0,Ht._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Ht._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Ht._)`${r} || {}`),lC(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:xq}),items:wq({mergeNames:(t,e,r)=>t.if((0,Ht._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Ht._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Ht._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Ht._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function xq(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,Ht._)`{}`);return e!==void 0&&lC(t,r,e),r}ct.evaluatedPropsToName=xq;function lC(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Ht._)`${e}${(0,Ht.getProperty)(n)}`,!0))}ct.setEvaluated=lC;var _q={};function Vhe(t,e){return t.scopeValue("func",{ref:e,code:_q[e.code]||(_q[e.code]=new $he._Code(e.code))})}ct.useFunc=Vhe;var uC;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(uC||(ct.Type=uC={}));function zhe(t,e,r){if(t instanceof Ht.Name){let n=e===uC.Num;return r?n?(0,Ht._)`"[" + ${t} + "]"`:(0,Ht._)`"['" + ${t} + "']"`:n?(0,Ht._)`"/" + ${t}`:(0,Ht._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Ht.getProperty)(t).toString():"/"+cC(t)}ct.getErrorPath=zhe;function Dq(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}ct.checkStrictMode=Dq});var Aa=b(dC=>{"use strict";Object.defineProperty(dC,"__esModule",{value:!0});var wn=rt(),Jhe={data:new wn.Name("data"),valCxt:new wn.Name("valCxt"),instancePath:new wn.Name("instancePath"),parentData:new wn.Name("parentData"),parentDataProperty:new wn.Name("parentDataProperty"),rootData:new wn.Name("rootData"),dynamicAnchors:new wn.Name("dynamicAnchors"),vErrors:new wn.Name("vErrors"),errors:new wn.Name("errors"),this:new wn.Name("this"),self:new wn.Name("self"),scope:new wn.Name("scope"),json:new wn.Name("json"),jsonPos:new wn.Name("jsonPos"),jsonLen:new wn.Name("jsonLen"),jsonPart:new wn.Name("jsonPart")};dC.default=Jhe});var Yy=b(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.extendErrors=_n.resetErrorsCount=_n.reportExtraError=_n.reportError=_n.keyword$DataError=_n.keywordError=void 0;var _t=rt(),rw=Dt(),kn=Aa();_n.keywordError={message:({keyword:t})=>(0,_t.str)`must pass "${t}" keyword validation`};_n.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,_t.str)`"${t}" keyword must be ${e} ($data)`:(0,_t.str)`"${t}" keyword is invalid ($data)`};function Hhe(t,e=_n.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,u=Oq(t,e,r);n??(o||a)?Cq(i,u):Pq(s,(0,_t._)`[${u}]`)}_n.reportError=Hhe;function Whe(t,e=_n.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=Oq(t,e,r);Cq(s,a),i||o||Pq(n,kn.default.vErrors)}_n.reportExtraError=Whe;function Ghe(t,e){t.assign(kn.default.errors,e),t.if((0,_t._)`${kn.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,_t._)`${kn.default.vErrors}.length`,e),()=>t.assign(kn.default.vErrors,null)))}_n.resetErrorsCount=Ghe;function Zhe({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,kn.default.errors,a=>{t.const(o,(0,_t._)`${kn.default.vErrors}[${a}]`),t.if((0,_t._)`${o}.instancePath === undefined`,()=>t.assign((0,_t._)`${o}.instancePath`,(0,_t.strConcat)(kn.default.instancePath,i.errorPath))),t.assign((0,_t._)`${o}.schemaPath`,(0,_t.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,_t._)`${o}.schema`,r),t.assign((0,_t._)`${o}.data`,n))})}_n.extendErrors=Zhe;function Cq(t,e){let r=t.const("err",e);t.if((0,_t._)`${kn.default.vErrors} === null`,()=>t.assign(kn.default.vErrors,(0,_t._)`[${r}]`),(0,_t._)`${kn.default.vErrors}.push(${r})`),t.code((0,_t._)`${kn.default.errors}++`)}function Pq(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,_t._)`new ${t.ValidationError}(${e})`):(r.assign((0,_t._)`${n}.errors`,e),r.return(!1))}var wl={keyword:new _t.Name("keyword"),schemaPath:new _t.Name("schemaPath"),params:new _t.Name("params"),propertyName:new _t.Name("propertyName"),message:new _t.Name("message"),schema:new _t.Name("schema"),parentSchema:new _t.Name("parentSchema")};function Oq(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,_t._)`{}`:Xhe(t,e,r)}function Xhe(t,e,r={}){let{gen:n,it:s}=t,i=[Yhe(s,r),Qhe(t,r)];return eye(t,e,i),n.object(...i)}function Yhe({errorPath:t},{instancePath:e}){let r=e?(0,_t.str)`${t}${(0,rw.getErrorPath)(e,rw.Type.Str)}`:t;return[kn.default.instancePath,(0,_t.strConcat)(kn.default.instancePath,r)]}function Qhe({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,_t.str)`${e}/${t}`;return r&&(s=(0,_t.str)`${s}${(0,rw.getErrorPath)(r,rw.Type.Str)}`),[wl.schemaPath,s]}function eye(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:u,propertyName:c,topSchemaRef:l,schemaPath:d}=a;n.push([wl.keyword,s],[wl.params,typeof e=="function"?e(t):e||(0,_t._)`{}`]),u.messages&&n.push([wl.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([wl.schema,o],[wl.parentSchema,(0,_t._)`${l}${d}`],[kn.default.data,i]),c&&n.push([wl.propertyName,c])}});var Bq=b(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.boolOrEmptySchema=Of.topBoolOrEmptySchema=void 0;var tye=Yy(),rye=rt(),nye=Aa(),iye={message:"boolean schema is false"};function sye(t){let{gen:e,schema:r,validateName:n}=t;r===!1?Tq(t,!1):typeof r=="object"&&r.$async===!0?e.return(nye.default.data):(e.assign((0,rye._)`${n}.errors`,null),e.return(!0))}Of.topBoolOrEmptySchema=sye;function oye(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),Tq(t)):r.var(e,!0)}Of.boolOrEmptySchema=oye;function Tq(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,tye.reportError)(s,iye,void 0,e)}});var fC=b(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});Tf.getRules=Tf.isJSONType=void 0;var aye=["string","number","integer","boolean","null","object","array"],uye=new Set(aye);function cye(t){return typeof t=="string"&&uye.has(t)}Tf.isJSONType=cye;function lye(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Tf.getRules=lye});var pC=b(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.shouldUseRule=Bu.shouldUseGroup=Bu.schemaHasRulesForType=void 0;function dye({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&Iq(t,n)}Bu.schemaHasRulesForType=dye;function Iq(t,e){return e.rules.some(r=>Fq(t,r))}Bu.shouldUseGroup=Iq;function Fq(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Bu.shouldUseRule=Fq});var Qy=b(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.reportTypeError=En.checkDataTypes=En.checkDataType=En.coerceAndCheckDataType=En.getJSONTypes=En.getSchemaTypes=En.DataType=void 0;var fye=fC(),pye=pC(),hye=Yy(),Ye=rt(),kq=Dt(),Bf;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Bf||(En.DataType=Bf={}));function yye(t){let e=Rq(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}En.getSchemaTypes=yye;function Rq(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(fye.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}En.getJSONTypes=Rq;function mye(t,e){let{gen:r,data:n,opts:s}=t,i=gye(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,pye.schemaHasRulesForType)(t,e[0]));if(o){let a=yC(e,n,s.strictNumbers,Bf.Wrong);r.if(a,()=>{i.length?vye(t,e,i):mC(t)})}return o}En.coerceAndCheckDataType=mye;var $q=new Set(["string","number","integer","boolean","null"]);function gye(t,e){return e?t.filter(r=>$q.has(r)||e==="array"&&r==="array"):[]}function vye(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,Ye._)`typeof ${s}`),a=n.let("coerced",(0,Ye._)`undefined`);i.coerceTypes==="array"&&n.if((0,Ye._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,Ye._)`${s}[0]`).assign(o,(0,Ye._)`typeof ${s}`).if(yC(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,Ye._)`${a} !== undefined`);for(let c of r)($q.has(c)||c==="array"&&i.coerceTypes==="array")&&u(c);n.else(),mC(t),n.endIf(),n.if((0,Ye._)`${a} !== undefined`,()=>{n.assign(s,a),bye(t,a)});function u(c){switch(c){case"string":n.elseIf((0,Ye._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Ye._)`"" + ${s}`).elseIf((0,Ye._)`${s} === null`).assign(a,(0,Ye._)`""`);return;case"number":n.elseIf((0,Ye._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,Ye._)`+${s}`);return;case"integer":n.elseIf((0,Ye._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,Ye._)`+${s}`);return;case"boolean":n.elseIf((0,Ye._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,Ye._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,Ye._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,Ye._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,Ye._)`[${s}]`)}}}function bye({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,Ye._)`${e} !== undefined`,()=>t.assign((0,Ye._)`${e}[${r}]`,n))}function hC(t,e,r,n=Bf.Correct){let s=n===Bf.Correct?Ye.operators.EQ:Ye.operators.NEQ,i;switch(t){case"null":return(0,Ye._)`${e} ${s} null`;case"array":i=(0,Ye._)`Array.isArray(${e})`;break;case"object":i=(0,Ye._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,Ye._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,Ye._)`typeof ${e} ${s} ${t}`}return n===Bf.Correct?i:(0,Ye.not)(i);function o(a=Ye.nil){return(0,Ye.and)((0,Ye._)`typeof ${e} == "number"`,a,r?(0,Ye._)`isFinite(${e})`:Ye.nil)}}En.checkDataType=hC;function yC(t,e,r,n){if(t.length===1)return hC(t[0],e,r,n);let s,i=(0,kq.toHash)(t);if(i.array&&i.object){let o=(0,Ye._)`typeof ${e} != "object"`;s=i.null?o:(0,Ye._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=Ye.nil;i.number&&delete i.integer;for(let o in i)s=(0,Ye.and)(s,hC(o,e,r,n));return s}En.checkDataTypes=yC;var wye={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,Ye._)`{type: ${t}}`:(0,Ye._)`{type: ${e}}`};function mC(t){let e=_ye(t);(0,hye.reportError)(e,wye)}En.reportTypeError=mC;function _ye(t){let{gen:e,data:r,schema:n}=t,s=(0,kq.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var Nq=b(nw=>{"use strict";Object.defineProperty(nw,"__esModule",{value:!0});nw.assignDefaults=void 0;var If=rt(),Eye=Dt();function Sye(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)jq(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>jq(t,i,s.default))}nw.assignDefaults=Sye;function jq(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,If._)`${i}${(0,If.getProperty)(e)}`;if(s){(0,Eye.checkStrictMode)(t,`default is ignored for: ${a}`);return}let u=(0,If._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,If._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,If._)`${a} = ${(0,If.stringify)(r)}`)}});var Ji=b(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.validateUnion=Kt.validateArray=Kt.usePattern=Kt.callValidateCode=Kt.schemaProperties=Kt.allSchemaProperties=Kt.noPropertyInData=Kt.propertyInData=Kt.isOwnProperty=Kt.hasPropFunc=Kt.reportMissingProp=Kt.checkMissingProp=Kt.checkReportMissingProp=void 0;var Qt=rt(),gC=Dt(),Iu=Aa(),Aye=Dt();function xye(t,e){let{gen:r,data:n,it:s}=t;r.if(bC(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Qt._)`${e}`},!0),t.error()})}Kt.checkReportMissingProp=xye;function Dye({gen:t,data:e,it:{opts:r}},n,s){return(0,Qt.or)(...n.map(i=>(0,Qt.and)(bC(t,e,i,r.ownProperties),(0,Qt._)`${s} = ${i}`)))}Kt.checkMissingProp=Dye;function Cye(t,e){t.setParams({missingProperty:e},!0),t.error()}Kt.reportMissingProp=Cye;function Mq(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Qt._)`Object.prototype.hasOwnProperty`})}Kt.hasPropFunc=Mq;function vC(t,e,r){return(0,Qt._)`${Mq(t)}.call(${e}, ${r})`}Kt.isOwnProperty=vC;function Pye(t,e,r,n){let s=(0,Qt._)`${e}${(0,Qt.getProperty)(r)} !== undefined`;return n?(0,Qt._)`${s} && ${vC(t,e,r)}`:s}Kt.propertyInData=Pye;function bC(t,e,r,n){let s=(0,Qt._)`${e}${(0,Qt.getProperty)(r)} === undefined`;return n?(0,Qt.or)(s,(0,Qt.not)(vC(t,e,r))):s}Kt.noPropertyInData=bC;function qq(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Kt.allSchemaProperties=qq;function Oye(t,e){return qq(e).filter(r=>!(0,gC.alwaysValidSchema)(t,e[r]))}Kt.schemaProperties=Oye;function Tye({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,u,c){let l=c?(0,Qt._)`${t}, ${e}, ${n}${s}`:e,d=[[Iu.default.instancePath,(0,Qt.strConcat)(Iu.default.instancePath,i)],[Iu.default.parentData,o.parentData],[Iu.default.parentDataProperty,o.parentDataProperty],[Iu.default.rootData,Iu.default.rootData]];o.opts.dynamicRef&&d.push([Iu.default.dynamicAnchors,Iu.default.dynamicAnchors]);let p=(0,Qt._)`${l}, ${r.object(...d)}`;return u!==Qt.nil?(0,Qt._)`${a}.call(${u}, ${p})`:(0,Qt._)`${a}(${p})`}Kt.callValidateCode=Tye;var Bye=(0,Qt._)`new RegExp`;function Iye({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,Qt._)`${s.code==="new RegExp"?Bye:(0,Aye.useFunc)(t,s)}(${r}, ${n})`})}Kt.usePattern=Iye;function Fye(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let u=e.const("len",(0,Qt._)`${r}.length`);e.forRange("i",0,u,c=>{t.subschema({keyword:n,dataProp:c,dataPropType:gC.Type.Num},i),e.if((0,Qt.not)(i),a)})}}Kt.validateArray=Fye;function kye(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,gC.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((u,c)=>{let l=t.subschema({keyword:n,schemaProp:c,compositeRule:!0},a);e.assign(o,(0,Qt._)`${o} || ${a}`),t.mergeValidEvaluated(l,a)||e.if((0,Qt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}Kt.validateUnion=kye});var Kq=b(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.validateKeywordUsage=vo.validSchemaType=vo.funcKeywordCode=vo.macroKeywordCode=void 0;var Rn=rt(),_l=Aa(),Rye=Ji(),$ye=Yy();function jye(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),u=Uq(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let c=r.name("valid");t.subschema({schema:a,schemaPath:Rn.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},c),t.pass(c,()=>t.error(!0))}vo.macroKeywordCode=jye;function Nye(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:u}=t;qye(u,e);let c=!a&&e.compile?e.compile.call(u.self,i,o,u):e.validate,l=Uq(n,s,c),d=n.let("valid");t.block$data(d,p),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function p(){if(e.errors===!1)m(),e.modifying&&Lq(t),g(()=>t.error());else{let _=e.async?f():h();e.modifying&&Lq(t),g(()=>Mye(t,_))}}function f(){let _=n.let("ruleErrs",null);return n.try(()=>m((0,Rn._)`await `),D=>n.assign(d,!1).if((0,Rn._)`${D} instanceof ${u.ValidationError}`,()=>n.assign(_,(0,Rn._)`${D}.errors`),()=>n.throw(D))),_}function h(){let _=(0,Rn._)`${l}.errors`;return n.assign(_,null),m(Rn.nil),_}function m(_=e.async?(0,Rn._)`await `:Rn.nil){let D=u.opts.passContext?_l.default.this:_l.default.self,v=!("compile"in e&&!a||e.schema===!1);n.assign(d,(0,Rn._)`${_}${(0,Rye.callValidateCode)(t,l,D,v)}`,e.modifying)}function g(_){var D;n.if((0,Rn.not)((D=e.valid)!==null&&D!==void 0?D:d),_)}}vo.funcKeywordCode=Nye;function Lq(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Rn._)`${n.parentData}[${n.parentDataProperty}]`))}function Mye(t,e){let{gen:r}=t;r.if((0,Rn._)`Array.isArray(${e})`,()=>{r.assign(_l.default.vErrors,(0,Rn._)`${_l.default.vErrors} === null ? ${e} : ${_l.default.vErrors}.concat(${e})`).assign(_l.default.errors,(0,Rn._)`${_l.default.vErrors}.length`),(0,$ye.extendErrors)(t)},()=>t.error())}function qye({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function Uq(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Rn.stringify)(r)})}function Lye(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}vo.validSchemaType=Lye;function Uye({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}vo.validateKeywordUsage=Uye});var zq=b(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.extendSubschemaMode=Fu.extendSubschemaData=Fu.getSubschema=void 0;var bo=rt(),Vq=Dt();function Kye(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,bo._)`${t.schemaPath}${(0,bo.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,bo._)`${t.schemaPath}${(0,bo.getProperty)(e)}${(0,bo.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,Vq.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Fu.getSubschema=Kye;function Vye(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:c,dataPathArr:l,opts:d}=e,p=a.let("data",(0,bo._)`${e.data}${(0,bo.getProperty)(r)}`,!0);u(p),t.errorPath=(0,bo.str)`${c}${(0,Vq.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,bo._)`${r}`,t.dataPathArr=[...l,t.parentDataProperty]}if(s!==void 0){let c=s instanceof bo.Name?s:a.let("data",s,!0);u(c),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function u(c){t.data=c,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,c]}}Fu.extendSubschemaData=Vye;function zye(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}Fu.extendSubschemaMode=zye});var Hq=b((s4e,Jq)=>{"use strict";var ku=Jq.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};iw(e,n,s,t,"",t)};ku.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};ku.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};ku.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};ku.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function iw(t,e,r,n,s,i,o,a,u,c){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,u,c);for(var l in n){var d=n[l];if(Array.isArray(d)){if(l in ku.arrayKeywords)for(var p=0;p<d.length;p++)iw(t,e,r,d[p],s+"/"+l+"/"+p,i,s,l,n,p)}else if(l in ku.propsKeywords){if(d&&typeof d=="object")for(var f in d)iw(t,e,r,d[f],s+"/"+l+"/"+Jye(f),i,s,l,n,f)}else(l in ku.keywords||t.allKeys&&!(l in ku.skipKeywords))&&iw(t,e,r,d,s+"/"+l,i,s,l,n)}r(n,s,i,o,a,u,c)}}function Jye(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var em=b(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.getSchemaRefs=Qn.resolveUrl=Qn.normalizeId=Qn._getFullPath=Qn.getFullPath=Qn.inlineRef=void 0;var Hye=Dt(),Wye=a2(),Gye=Hq(),Zye=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Xye(t,e=!0){return typeof t=="boolean"?!0:e===!0?!wC(t):e?Wq(t)<=e:!1}Qn.inlineRef=Xye;var Yye=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function wC(t){for(let e in t){if(Yye.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(wC)||typeof r=="object"&&wC(r))return!0}return!1}function Wq(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!Zye.has(r)&&(typeof t[r]=="object"&&(0,Hye.eachItem)(t[r],n=>e+=Wq(n)),e===1/0))return 1/0}return e}function Gq(t,e="",r){r!==!1&&(e=Ff(e));let n=t.parse(e);return Zq(t,n)}Qn.getFullPath=Gq;function Zq(t,e){return t.serialize(e).split("#")[0]+"#"}Qn._getFullPath=Zq;var Qye=/#\/?$/;function Ff(t){return t?t.replace(Qye,""):""}Qn.normalizeId=Ff;function eme(t,e,r){return r=Ff(r),t.resolve(e,r)}Qn.resolveUrl=eme;var tme=/^[a-z_][-a-z0-9._]*$/i;function rme(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=Ff(t[r]||e),i={"":s},o=Gq(n,s,!1),a={},u=new Set;return Gye(t,{allKeys:!0},(d,p,f,h)=>{if(h===void 0)return;let m=o+p,g=i[h];typeof d[r]=="string"&&(g=_.call(this,d[r])),D.call(this,d.$anchor),D.call(this,d.$dynamicAnchor),i[p]=g;function _(v){let E=this.opts.uriResolver.resolve;if(v=Ff(g?E(g,v):v),u.has(v))throw l(v);u.add(v);let S=this.refs[v];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?c(d,S.schema,v):v!==Ff(m)&&(v[0]==="#"?(c(d,a[v],v),a[v]=d):this.refs[v]=m),v}function D(v){if(typeof v=="string"){if(!tme.test(v))throw new Error(`invalid anchor "${v}"`);_.call(this,`#${v}`)}}}),a;function c(d,p,f){if(p!==void 0&&!Wye(d,p))throw l(f)}function l(d){return new Error(`reference "${d}" resolves to more than one schema`)}}Qn.getSchemaRefs=rme});var nm=b(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.getData=Ru.KeywordCxt=Ru.validateFunctionCode=void 0;var tL=Bq(),Xq=Qy(),EC=pC(),sw=Qy(),nme=Nq(),rm=Kq(),_C=zq(),De=rt(),Ke=Aa(),ime=em(),xa=Dt(),tm=Yy();function sme(t){if(iL(t)&&(sL(t),nL(t))){ume(t);return}rL(t,()=>(0,tL.topBoolOrEmptySchema)(t))}Ru.validateFunctionCode=sme;function rL({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,De._)`${Ke.default.data}, ${Ke.default.valCxt}`,n.$async,()=>{t.code((0,De._)`"use strict"; ${Yq(r,s)}`),ame(t,s),t.code(i)}):t.func(e,(0,De._)`${Ke.default.data}, ${ome(s)}`,n.$async,()=>t.code(Yq(r,s)).code(i))}function ome(t){return(0,De._)`{${Ke.default.instancePath}="", ${Ke.default.parentData}, ${Ke.default.parentDataProperty}, ${Ke.default.rootData}=${Ke.default.data}${t.dynamicRef?(0,De._)`, ${Ke.default.dynamicAnchors}={}`:De.nil}}={}`}function ame(t,e){t.if(Ke.default.valCxt,()=>{t.var(Ke.default.instancePath,(0,De._)`${Ke.default.valCxt}.${Ke.default.instancePath}`),t.var(Ke.default.parentData,(0,De._)`${Ke.default.valCxt}.${Ke.default.parentData}`),t.var(Ke.default.parentDataProperty,(0,De._)`${Ke.default.valCxt}.${Ke.default.parentDataProperty}`),t.var(Ke.default.rootData,(0,De._)`${Ke.default.valCxt}.${Ke.default.rootData}`),e.dynamicRef&&t.var(Ke.default.dynamicAnchors,(0,De._)`${Ke.default.valCxt}.${Ke.default.dynamicAnchors}`)},()=>{t.var(Ke.default.instancePath,(0,De._)`""`),t.var(Ke.default.parentData,(0,De._)`undefined`),t.var(Ke.default.parentDataProperty,(0,De._)`undefined`),t.var(Ke.default.rootData,Ke.default.data),e.dynamicRef&&t.var(Ke.default.dynamicAnchors,(0,De._)`{}`)})}function ume(t){let{schema:e,opts:r,gen:n}=t;rL(t,()=>{r.$comment&&e.$comment&&aL(t),pme(t),n.let(Ke.default.vErrors,null),n.let(Ke.default.errors,0),r.unevaluated&&cme(t),oL(t),mme(t)})}function cme(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,De._)`${r}.evaluated`),e.if((0,De._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,De._)`${t.evaluated}.props`,(0,De._)`undefined`)),e.if((0,De._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,De._)`${t.evaluated}.items`,(0,De._)`undefined`))}function Yq(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,De._)`/*# sourceURL=${r} */`:De.nil}function lme(t,e){if(iL(t)&&(sL(t),nL(t))){dme(t,e);return}(0,tL.boolOrEmptySchema)(t,e)}function nL({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function iL(t){return typeof t.schema!="boolean"}function dme(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&aL(t),hme(t),yme(t);let i=n.const("_errs",Ke.default.errors);oL(t,i),n.var(e,(0,De._)`${i} === ${Ke.default.errors}`)}function sL(t){(0,xa.checkUnknownRules)(t),fme(t)}function oL(t,e){if(t.opts.jtd)return Qq(t,[],!1,e);let r=(0,Xq.getSchemaTypes)(t.schema),n=(0,Xq.coerceAndCheckDataType)(t,r);Qq(t,r,!n,e)}function fme(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,xa.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function pme(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,xa.checkStrictMode)(t,"default is ignored in the schema root")}function hme(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,ime.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function yme(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function aL({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,De._)`${Ke.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,De.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,De._)`${Ke.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function mme(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,De._)`${Ke.default.errors} === 0`,()=>e.return(Ke.default.data),()=>e.throw((0,De._)`new ${s}(${Ke.default.vErrors})`)):(e.assign((0,De._)`${n}.errors`,Ke.default.vErrors),i.unevaluated&&gme(t),e.return((0,De._)`${Ke.default.errors} === 0`))}function gme({gen:t,evaluated:e,props:r,items:n}){r instanceof De.Name&&t.assign((0,De._)`${e}.props`,r),n instanceof De.Name&&t.assign((0,De._)`${e}.items`,n)}function Qq(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:u,self:c}=t,{RULES:l}=c;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,xa.schemaHasRulesButRef)(i,l))){s.block(()=>cL(t,"$ref",l.all.$ref.definition));return}u.jtd||vme(t,e),s.block(()=>{for(let p of l.rules)d(p);d(l.post)});function d(p){(0,EC.shouldUseGroup)(i,p)&&(p.type?(s.if((0,sw.checkDataType)(p.type,o,u.strictNumbers)),eL(t,p),e.length===1&&e[0]===p.type&&r&&(s.else(),(0,sw.reportTypeError)(t)),s.endIf()):eL(t,p),a||s.if((0,De._)`${Ke.default.errors} === ${n||0}`))}}function eL(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,nme.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,EC.shouldUseRule)(n,i)&&cL(t,i.keyword,i.definition,e.type)})}function vme(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(bme(t,e),t.opts.allowUnionTypes||wme(t,e),_me(t,t.dataTypes))}function bme(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{uL(t.dataTypes,r)||SC(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),Sme(t,e)}}function wme(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&SC(t,"use allowUnionTypes to allow union type keyword")}function _me(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,EC.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>Eme(e,o))&&SC(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function Eme(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function uL(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Sme(t,e){let r=[];for(let n of t.dataTypes)uL(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function SC(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,xa.checkStrictMode)(t,e,t.opts.strictTypes)}var ow=class{constructor(e,r,n){if((0,rm.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,xa.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",lL(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,rm.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Ke.default.errors))}result(e,r,n){this.failResult((0,De.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,De.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,De._)`${r} !== undefined && (${(0,De.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?tm.reportExtraError:tm.reportError)(this,this.def.error,r)}$dataError(){(0,tm.reportError)(this,this.def.$dataError||tm.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,tm.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=De.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=De.nil,r=De.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,De.or)((0,De._)`${s} === undefined`,r)),e!==De.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==De.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,De.or)(o(),a());function o(){if(n.length){if(!(r instanceof De.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,De._)`${(0,sw.checkDataTypes)(u,r,i.opts.strictNumbers,sw.DataType.Wrong)}`}return De.nil}function a(){if(s.validateSchema){let u=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,De._)`!${u}(${r})`}return De.nil}}subschema(e,r){let n=(0,_C.getSubschema)(this.it,e);(0,_C.extendSubschemaData)(n,this.it,e),(0,_C.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return lme(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=xa.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=xa.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,De.Name)),!0}};Ru.KeywordCxt=ow;function cL(t,e,r,n){let s=new ow(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,rm.funcKeywordCode)(s,r):"macro"in r?(0,rm.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,rm.funcKeywordCode)(s,r)}var Ame=/^\/(?:[^~]|~0|~1)*$/,xme=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function lL(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return Ke.default.rootData;if(t[0]==="/"){if(!Ame.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=Ke.default.rootData}else{let c=xme.exec(t);if(!c)throw new Error(`Invalid JSON-pointer: ${t}`);let l=+c[1];if(s=c[2],s==="#"){if(l>=e)throw new Error(u("property/index",l));return n[e-l]}if(l>e)throw new Error(u("data",l));if(i=r[e-l],!s)return i}let o=i,a=s.split("/");for(let c of a)c&&(i=(0,De._)`${i}${(0,De.getProperty)((0,xa.unescapeJsonPointer)(c))}`,o=(0,De._)`${o} && ${i}`);return o;function u(c,l){return`Cannot access ${c} ${l} levels up, current level is ${e}`}}Ru.getData=lL});var aw=b(xC=>{"use strict";Object.defineProperty(xC,"__esModule",{value:!0});var AC=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};xC.default=AC});var im=b(PC=>{"use strict";Object.defineProperty(PC,"__esModule",{value:!0});var DC=em(),CC=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,DC.resolveUrl)(e,r,n),this.missingSchema=(0,DC.normalizeId)((0,DC.getFullPath)(e,this.missingRef))}};PC.default=CC});var cw=b(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.resolveSchema=Hi.getCompilingSchema=Hi.resolveRef=Hi.compileSchema=Hi.SchemaEnv=void 0;var As=rt(),Dme=aw(),El=Aa(),xs=em(),dL=Dt(),Cme=nm(),kf=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,xs.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};Hi.SchemaEnv=kf;function TC(t){let e=fL.call(this,t);if(e)return e;let r=(0,xs.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new As.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:Dme.default,code:(0,As._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");t.validateName=u;let c={gen:o,allErrors:this.opts.allErrors,data:El.default.data,parentData:El.default.parentData,parentDataProperty:El.default.parentDataProperty,dataNames:[El.default.data],dataPathArr:[As.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,As.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:As.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,As._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(t),(0,Cme.validateFunctionCode)(c),o.optimize(this.opts.code.optimize);let d=o.toString();l=`${o.scopeRefs(El.default.scope)}return ${d}`,this.opts.code.process&&(l=this.opts.code.process(l,t));let f=new Function(`${El.default.self}`,`${El.default.scope}`,l)(this,this.scope.get());if(this.scope.value(u,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:u,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){let{props:h,items:m}=c;f.evaluated={props:h instanceof As.Name?void 0:h,items:m instanceof As.Name?void 0:m,dynamicProps:h instanceof As.Name,dynamicItems:m instanceof As.Name},f.source&&(f.source.evaluated=(0,As.stringify)(f.evaluated))}return t.validate=f,t}catch(d){throw delete t.validate,delete t.validateName,l&&this.logger.error("Error compiling schema, function code:",l),d}finally{this._compilations.delete(t)}}Hi.compileSchema=TC;function Pme(t,e,r){var n;r=(0,xs.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=Bme.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new kf({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=Ome.call(this,i)}Hi.resolveRef=Pme;function Ome(t){return(0,xs.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:TC.call(this,t)}function fL(t){for(let e of this._compilations)if(Tme(e,t))return e}Hi.getCompilingSchema=fL;function Tme(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Bme(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||uw.call(this,t,e)}function uw(t,e){let r=this.opts.uriResolver.parse(e),n=(0,xs._getFullPath)(this.opts.uriResolver,r),s=(0,xs.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return OC.call(this,r,t);let i=(0,xs.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=uw.call(this,t,o);return typeof a?.schema!="object"?void 0:OC.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||TC.call(this,o),i===(0,xs.normalizeId)(e)){let{schema:a}=o,{schemaId:u}=this.opts,c=a[u];return c&&(s=(0,xs.resolveUrl)(this.opts.uriResolver,s,c)),new kf({schema:a,schemaId:u,root:t,baseId:s})}return OC.call(this,r,o)}}Hi.resolveSchema=uw;var Ime=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function OC(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,dL.unescapeFragment)(a)];if(u===void 0)return;r=u;let c=typeof r=="object"&&r[this.opts.schemaId];!Ime.has(a)&&c&&(e=(0,xs.resolveUrl)(this.opts.uriResolver,e,c))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,dL.schemaHasRulesButRef)(r,this.RULES)){let a=(0,xs.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=uw.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new kf({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var pL=b((d4e,Fme)=>{Fme.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var yL=b((f4e,hL)=>{"use strict";var kme={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};hL.exports={HEX:kme}});var SL=b((p4e,EL)=>{"use strict";var{HEX:Rme}=yL();function bL(t){if(_L(t,".")<3)return{host:t,isIPV4:!1};let e=t.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=e;return r?{host:jme(r,"."),isIPV4:!0}:{host:t,isIPV4:!1}}function BC(t,e=!1){let r="",n=!0;for(let s of t){if(Rme[s]===void 0)return;s!=="0"&&n===!0&&(n=!1),n||(r+=s)}return e&&r.length===0&&(r="0"),r}function $me(t){let e=0,r={error:!1,address:"",zone:""},n=[],s=[],i=!1,o=!1,a=!1;function u(){if(s.length){if(i===!1){let c=BC(s);if(c!==void 0)n.push(c);else return r.error=!0,!1}s.length=0}return!0}for(let c=0;c<t.length;c++){let l=t[c];if(!(l==="["||l==="]"))if(l===":"){if(o===!0&&(a=!0),!u())break;if(e++,n.push(":"),e>7){r.error=!0;break}c-1>=0&&t[c-1]===":"&&(o=!0);continue}else if(l==="%"){if(!u())break;i=!0}else{s.push(l);continue}}return s.length&&(i?r.zone=s.join(""):a?n.push(s.join("")):n.push(BC(s))),r.address=n.join(""),r}function wL(t,e={}){if(_L(t,":")<2)return{host:t,isIPV6:!1};let r=$me(t);if(r.error)return{host:t,isIPV6:!1};{let n=r.address,s=r.address;return r.zone&&(n+="%"+r.zone,s+="%25"+r.zone),{host:n,escapedHost:s,isIPV6:!0}}}function jme(t,e){let r="",n=!0,s=t.length;for(let i=0;i<s;i++){let o=t[i];o==="0"&&n?(i+1<=s&&t[i+1]===e||i+1===s)&&(r+=o,n=!1):(o===e?n=!0:n=!1,r+=o)}return r}function _L(t,e){let r=0;for(let n=0;n<t.length;n++)t[n]===e&&r++;return r}var mL=/^\.\.?\//u,gL=/^\/\.(?:\/|$)/u,vL=/^\/\.\.(?:\/|$)/u,Nme=/^\/?(?:.|\n)*?(?=\/|$)/u;function Mme(t){let e=[];for(;t.length;)if(t.match(mL))t=t.replace(mL,"");else if(t.match(gL))t=t.replace(gL,"/");else if(t.match(vL))t=t.replace(vL,"/"),e.pop();else if(t==="."||t==="..")t="";else{let r=t.match(Nme);if(r){let n=r[0];t=t.slice(n.length),e.push(n)}else throw new Error("Unexpected dot segment condition")}return e.join("")}function qme(t,e){let r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function Lme(t,e){let r=[];if(t.userinfo!==void 0&&(r.push(t.userinfo),r.push("@")),t.host!==void 0){let n=unescape(t.host),s=bL(n);if(s.isIPV4)n=s.host;else{let i=wL(s.host,{isIPV4:!1});i.isIPV6===!0?n=`[${i.escapedHost}]`:n=t.host}r.push(n)}return(typeof t.port=="number"||typeof t.port=="string")&&(r.push(":"),r.push(String(t.port))),r.length?r.join(""):void 0}EL.exports={recomposeAuthority:Lme,normalizeComponentEncoding:qme,removeDotSegments:Mme,normalizeIPv4:bL,normalizeIPv6:wL,stringArrayToHexStripped:BC}});var OL=b((h4e,PL)=>{"use strict";var Ume=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,Kme=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function AL(t){return typeof t.secure=="boolean"?t.secure:String(t.scheme).toLowerCase()==="wss"}function xL(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function DL(t){let e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function Vme(t){return t.secure=AL(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function zme(t){if((t.port===(AL(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){let[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function Jme(t,e){if(!t.path)return t.error="URN can not be parsed",t;let r=t.path.match(Kme);if(r){let n=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];let s=`${n}:${e.nid||t.nid}`,i=IC[s];t.path=void 0,i&&(t=i.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function Hme(t,e){let r=e.scheme||t.scheme||"urn",n=t.nid.toLowerCase(),s=`${r}:${e.nid||n}`,i=IC[s];i&&(t=i.serialize(t,e));let o=t,a=t.nss;return o.path=`${n||e.nid}:${a}`,e.skipEscape=!0,o}function Wme(t,e){let r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!Ume.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Gme(t){let e=t;return e.nss=(t.uuid||"").toLowerCase(),e}var CL={scheme:"http",domainHost:!0,parse:xL,serialize:DL},Zme={scheme:"https",domainHost:CL.domainHost,parse:xL,serialize:DL},lw={scheme:"ws",domainHost:!0,parse:Vme,serialize:zme},Xme={scheme:"wss",domainHost:lw.domainHost,parse:lw.parse,serialize:lw.serialize},Yme={scheme:"urn",parse:Jme,serialize:Hme,skipNormalize:!0},Qme={scheme:"urn:uuid",parse:Wme,serialize:Gme,skipNormalize:!0},IC={http:CL,https:Zme,ws:lw,wss:Xme,urn:Yme,"urn:uuid":Qme};PL.exports=IC});var BL=b((y4e,fw)=>{"use strict";var{normalizeIPv6:e0e,normalizeIPv4:t0e,removeDotSegments:sm,recomposeAuthority:r0e,normalizeComponentEncoding:dw}=SL(),FC=OL();function n0e(t,e){return typeof t=="string"?t=wo(Da(t,e),e):typeof t=="object"&&(t=Da(wo(t,e),e)),t}function i0e(t,e,r){let n=Object.assign({scheme:"null"},r),s=TL(Da(t,n),Da(e,n),n,!0);return wo(s,{...n,skipEscape:!0})}function TL(t,e,r,n){let s={};return n||(t=Da(wo(t,r),r),e=Da(wo(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(s.scheme=e.scheme,s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=sm(e.path||""),s.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=sm(e.path||""),s.query=e.query):(e.path?(e.path.charAt(0)==="/"?s.path=sm(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?s.path="/"+e.path:t.path?s.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:s.path=e.path,s.path=sm(s.path)),s.query=e.query):(s.path=t.path,e.query!==void 0?s.query=e.query:s.query=t.query),s.userinfo=t.userinfo,s.host=t.host,s.port=t.port),s.scheme=t.scheme),s.fragment=e.fragment,s}function s0e(t,e,r){return typeof t=="string"?(t=unescape(t),t=wo(dw(Da(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=wo(dw(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=wo(dw(Da(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=wo(dw(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function wo(t,e){let r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},n=Object.assign({},e),s=[],i=FC[(n.scheme||r.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&(s.push(r.scheme),s.push(":"));let o=r0e(r,n);if(o!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(o),r.path&&r.path.charAt(0)!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(a=sm(a)),o===void 0&&(a=a.replace(/^\/\//u,"/%2F")),s.push(a)}return r.query!==void 0&&(s.push("?"),s.push(r.query)),r.fragment!==void 0&&(s.push("#"),s.push(r.fragment)),s.join("")}var o0e=Array.from({length:127},(t,e)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(e)));function a0e(t){let e=0;for(let r=0,n=t.length;r<n;++r)if(e=t.charCodeAt(r),e>126||o0e[e])return!0;return!1}var u0e=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Da(t,e){let r=Object.assign({},e),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=t.indexOf("%")!==-1,i=!1;r.reference==="suffix"&&(t=(r.scheme?r.scheme+":":"")+"//"+t);let o=t.match(u0e);if(o){if(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5]),n.host){let u=t0e(n.host);if(u.isIPV4===!1){let c=e0e(u.host,{isIPV4:!1});n.host=c.host.toLowerCase(),i=c.isIPV6}else n.host=u.host,i=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let a=FC[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!a||!a.unicodeSupport)&&n.host&&(r.domainHost||a&&a.domainHost)&&i===!1&&a0e(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(u){n.error=n.error||"Host's domain name can not be converted to ASCII: "+u}(!a||a&&!a.skipNormalize)&&(s&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),s&&n.userinfo!==void 0&&(n.userinfo=unescape(n.userinfo)),s&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=escape(unescape(n.path))),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),a&&a.parse&&a.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var kC={SCHEMES:FC,normalize:n0e,resolve:i0e,resolveComponents:TL,equal:s0e,serialize:wo,parse:Da};fw.exports=kC;fw.exports.default=kC;fw.exports.fastUri=kC});var FL=b(RC=>{"use strict";Object.defineProperty(RC,"__esModule",{value:!0});var IL=BL();IL.code='require("ajv/dist/runtime/uri").default';RC.default=IL});var LL=b(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.CodeGen=ln.Name=ln.nil=ln.stringify=ln.str=ln._=ln.KeywordCxt=void 0;var c0e=nm();Object.defineProperty(ln,"KeywordCxt",{enumerable:!0,get:function(){return c0e.KeywordCxt}});var Rf=rt();Object.defineProperty(ln,"_",{enumerable:!0,get:function(){return Rf._}});Object.defineProperty(ln,"str",{enumerable:!0,get:function(){return Rf.str}});Object.defineProperty(ln,"stringify",{enumerable:!0,get:function(){return Rf.stringify}});Object.defineProperty(ln,"nil",{enumerable:!0,get:function(){return Rf.nil}});Object.defineProperty(ln,"Name",{enumerable:!0,get:function(){return Rf.Name}});Object.defineProperty(ln,"CodeGen",{enumerable:!0,get:function(){return Rf.CodeGen}});var l0e=aw(),NL=im(),d0e=fC(),om=cw(),f0e=rt(),am=em(),pw=Qy(),jC=Dt(),kL=pL(),p0e=FL(),ML=(t,e)=>new RegExp(t,e);ML.code="new RegExp";var h0e=["removeAdditional","useDefaults","coerceTypes"],y0e=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),m0e={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},g0e={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},RL=200;function v0e(t){var e,r,n,s,i,o,a,u,c,l,d,p,f,h,m,g,_,D,v,E,S,P,C,B,F;let I=t.strict,$=(e=t.code)===null||e===void 0?void 0:e.optimize,q=$===!0||$===void 0?1:$||0,X=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:ML,Q=(s=t.uriResolver)!==null&&s!==void 0?s:p0e.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:I)!==null&&o!==void 0?o:!0,strictNumbers:(u=(a=t.strictNumbers)!==null&&a!==void 0?a:I)!==null&&u!==void 0?u:!0,strictTypes:(l=(c=t.strictTypes)!==null&&c!==void 0?c:I)!==null&&l!==void 0?l:"log",strictTuples:(p=(d=t.strictTuples)!==null&&d!==void 0?d:I)!==null&&p!==void 0?p:"log",strictRequired:(h=(f=t.strictRequired)!==null&&f!==void 0?f:I)!==null&&h!==void 0?h:!1,code:t.code?{...t.code,optimize:q,regExp:X}:{optimize:q,regExp:X},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:RL,loopEnum:(g=t.loopEnum)!==null&&g!==void 0?g:RL,meta:(_=t.meta)!==null&&_!==void 0?_:!0,messages:(D=t.messages)!==null&&D!==void 0?D:!0,inlineRefs:(v=t.inlineRefs)!==null&&v!==void 0?v:!0,schemaId:(E=t.schemaId)!==null&&E!==void 0?E:"$id",addUsedSchema:(S=t.addUsedSchema)!==null&&S!==void 0?S:!0,validateSchema:(P=t.validateSchema)!==null&&P!==void 0?P:!0,validateFormats:(C=t.validateFormats)!==null&&C!==void 0?C:!0,unicodeRegExp:(B=t.unicodeRegExp)!==null&&B!==void 0?B:!0,int32range:(F=t.int32range)!==null&&F!==void 0?F:!0,uriResolver:Q}}var um=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...v0e(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new f0e.ValueScope({scope:{},prefixes:y0e,es5:r,lines:n}),this.logger=A0e(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,d0e.getRules)(),$L.call(this,m0e,e,"NOT SUPPORTED"),$L.call(this,g0e,e,"DEPRECATED","warn"),this._metaOpts=E0e.call(this),e.formats&&w0e.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&_0e.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),b0e.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=kL;n==="id"&&(s={...kL},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(l,d){await i.call(this,l.$schema);let p=this._addSchema(l,d);return p.validate||o.call(this,p)}async function i(l){l&&!this.getSchema(l)&&await s.call(this,{$ref:l},!0)}async function o(l){try{return this._compileSchemaEnv(l)}catch(d){if(!(d instanceof NL.default))throw d;return a.call(this,d),await u.call(this,d.missingSchema),o.call(this,l)}}function a({missingSchema:l,missingRef:d}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${d} cannot be resolved`)}async function u(l){let d=await c.call(this,l);this.refs[l]||await i.call(this,d.$schema),this.refs[l]||this.addSchema(d,l,r)}async function c(l){let d=this._loading[l];if(d)return d;try{return await(this._loading[l]=n(l))}finally{delete this._loading[l]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,am.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=jL.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new om.SchemaEnv({schema:{},schemaId:n});if(r=om.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=jL.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,am.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(D0e.call(this,n,r),!r)return(0,jC.eachItem)(n,i=>$C.call(this,i)),this;P0e.call(this,r);let s={...r,type:(0,pw.getJSONTypes)(r.type),schemaType:(0,pw.getJSONTypes)(r.schemaType)};return(0,jC.eachItem)(n,s.type.length===0?i=>$C.call(this,i,s):i=>s.type.forEach(o=>$C.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let u=n[a];if(typeof u!="object")continue;let{$data:c}=u.definition,l=o[a];c&&l&&(o[a]=qL(l))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,am.normalizeId)(o||n);let c=am.getSchemaRefs.call(this,e,n);return u=new om.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:c}),this._cache.set(u.schema,u),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),s&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):om.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{om.compileSchema.call(this,e)}finally{this.opts=r}}};um.ValidationError=l0e.default;um.MissingRefError=NL.default;ln.default=um;function $L(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function jL(t){return t=(0,am.normalizeId)(t),this.schemas[t]||this.refs[t]}function b0e(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function w0e(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function _0e(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function E0e(){let t={...this.opts};for(let e of h0e)delete t[e];return t}var S0e={log(){},warn(){},error(){}};function A0e(t){if(t===!1)return S0e;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var x0e=/^[a-z_$][a-z0-9_$:-]*$/i;function D0e(t,e){let{RULES:r}=this;if((0,jC.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!x0e.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function $C(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:u})=>u===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,pw.getJSONTypes)(e.type),schemaType:(0,pw.getJSONTypes)(e.schemaType)}};e.before?C0e.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function C0e(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function P0e(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=qL(e)),t.validateSchema=this.compile(e,!0))}var O0e={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function qL(t){return{anyOf:[t,O0e]}}});var UL=b(NC=>{"use strict";Object.defineProperty(NC,"__esModule",{value:!0});var T0e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};NC.default=T0e});var JL=b(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.callRef=Sl.getValidate=void 0;var B0e=im(),KL=Ji(),ei=rt(),$f=Aa(),VL=cw(),hw=Dt(),I0e={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:u}=n,{root:c}=i;if((r==="#"||r==="#/")&&s===c.baseId)return d();let l=VL.resolveRef.call(u,c,s,r);if(l===void 0)throw new B0e.default(n.opts.uriResolver,s,r);if(l instanceof VL.SchemaEnv)return p(l);return f(l);function d(){if(i===c)return yw(t,o,i,i.$async);let h=e.scopeValue("root",{ref:c});return yw(t,(0,ei._)`${h}.validate`,c,c.$async)}function p(h){let m=zL(t,h);yw(t,m,h,h.$async)}function f(h){let m=e.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,ei.stringify)(h)}:{ref:h}),g=e.name("valid"),_=t.subschema({schema:h,dataTypes:[],schemaPath:ei.nil,topSchemaRef:m,errSchemaPath:r},g);t.mergeEvaluated(_),t.ok(g)}}};function zL(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,ei._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Sl.getValidate=zL;function yw(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:u}=i,c=u.passContext?$f.default.this:ei.nil;n?l():d();function l(){if(!a.$async)throw new Error("async schema referenced by sync schema");let h=s.let("valid");s.try(()=>{s.code((0,ei._)`await ${(0,KL.callValidateCode)(t,e,c)}`),f(e),o||s.assign(h,!0)},m=>{s.if((0,ei._)`!(${m} instanceof ${i.ValidationError})`,()=>s.throw(m)),p(m),o||s.assign(h,!1)}),t.ok(h)}function d(){t.result((0,KL.callValidateCode)(t,e,c),()=>f(e),()=>p(e))}function p(h){let m=(0,ei._)`${h}.errors`;s.assign($f.default.vErrors,(0,ei._)`${$f.default.vErrors} === null ? ${m} : ${$f.default.vErrors}.concat(${m})`),s.assign($f.default.errors,(0,ei._)`${$f.default.vErrors}.length`)}function f(h){var m;if(!i.opts.unevaluated)return;let g=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(i.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(i.props=hw.mergeEvaluated.props(s,g.props,i.props));else{let _=s.var("props",(0,ei._)`${h}.evaluated.props`);i.props=hw.mergeEvaluated.props(s,_,i.props,ei.Name)}if(i.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(i.items=hw.mergeEvaluated.items(s,g.items,i.items));else{let _=s.var("items",(0,ei._)`${h}.evaluated.items`);i.items=hw.mergeEvaluated.items(s,_,i.items,ei.Name)}}}Sl.callRef=yw;Sl.default=I0e});var HL=b(MC=>{"use strict";Object.defineProperty(MC,"__esModule",{value:!0});var F0e=UL(),k0e=JL(),R0e=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",F0e.default,k0e.default];MC.default=R0e});var WL=b(qC=>{"use strict";Object.defineProperty(qC,"__esModule",{value:!0});var mw=rt(),$u=mw.operators,gw={maximum:{okStr:"<=",ok:$u.LTE,fail:$u.GT},minimum:{okStr:">=",ok:$u.GTE,fail:$u.LT},exclusiveMaximum:{okStr:"<",ok:$u.LT,fail:$u.GTE},exclusiveMinimum:{okStr:">",ok:$u.GT,fail:$u.LTE}},$0e={message:({keyword:t,schemaCode:e})=>(0,mw.str)`must be ${gw[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,mw._)`{comparison: ${gw[t].okStr}, limit: ${e}}`},j0e={keyword:Object.keys(gw),type:"number",schemaType:"number",$data:!0,error:$0e,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,mw._)`${r} ${gw[e].fail} ${n} || isNaN(${r})`)}};qC.default=j0e});var GL=b(LC=>{"use strict";Object.defineProperty(LC,"__esModule",{value:!0});var cm=rt(),N0e={message:({schemaCode:t})=>(0,cm.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,cm._)`{multipleOf: ${t}}`},M0e={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:N0e,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,cm._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,cm._)`${o} !== parseInt(${o})`;t.fail$data((0,cm._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};LC.default=M0e});var XL=b(UC=>{"use strict";Object.defineProperty(UC,"__esModule",{value:!0});function ZL(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}UC.default=ZL;ZL.code='require("ajv/dist/runtime/ucs2length").default'});var YL=b(KC=>{"use strict";Object.defineProperty(KC,"__esModule",{value:!0});var Al=rt(),q0e=Dt(),L0e=XL(),U0e={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,Al.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,Al._)`{limit: ${t}}`},K0e={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:U0e,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?Al.operators.GT:Al.operators.LT,o=s.opts.unicode===!1?(0,Al._)`${r}.length`:(0,Al._)`${(0,q0e.useFunc)(t.gen,L0e.default)}(${r})`;t.fail$data((0,Al._)`${o} ${i} ${n}`)}};KC.default=K0e});var QL=b(VC=>{"use strict";Object.defineProperty(VC,"__esModule",{value:!0});var V0e=Ji(),vw=rt(),z0e={message:({schemaCode:t})=>(0,vw.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,vw._)`{pattern: ${t}}`},J0e={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:z0e,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,vw._)`(new RegExp(${s}, ${o}))`:(0,V0e.usePattern)(t,n);t.fail$data((0,vw._)`!${a}.test(${e})`)}};VC.default=J0e});var eU=b(zC=>{"use strict";Object.defineProperty(zC,"__esModule",{value:!0});var lm=rt(),H0e={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,lm.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,lm._)`{limit: ${t}}`},W0e={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:H0e,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?lm.operators.GT:lm.operators.LT;t.fail$data((0,lm._)`Object.keys(${r}).length ${s} ${n}`)}};zC.default=W0e});var tU=b(JC=>{"use strict";Object.defineProperty(JC,"__esModule",{value:!0});var dm=Ji(),fm=rt(),G0e=Dt(),Z0e={message:({params:{missingProperty:t}})=>(0,fm.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,fm._)`{missingProperty: ${t}}`},X0e={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Z0e,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let u=r.length>=a.loopRequired;if(o.allErrors?c():l(),a.strictRequired){let f=t.parentSchema.properties,{definedProperties:h}=t.it;for(let m of r)if(f?.[m]===void 0&&!h.has(m)){let g=o.schemaEnv.baseId+o.errSchemaPath,_=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,G0e.checkStrictMode)(o,_,o.opts.strictRequired)}}function c(){if(u||i)t.block$data(fm.nil,d);else for(let f of r)(0,dm.checkReportMissingProp)(t,f)}function l(){let f=e.let("missing");if(u||i){let h=e.let("valid",!0);t.block$data(h,()=>p(f,h)),t.ok(h)}else e.if((0,dm.checkMissingProp)(t,r,f)),(0,dm.reportMissingProp)(t,f),e.else()}function d(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,dm.noPropertyInData)(e,s,f,a.ownProperties),()=>t.error())})}function p(f,h){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(h,(0,dm.propertyInData)(e,s,f,a.ownProperties)),e.if((0,fm.not)(h),()=>{t.error(),e.break()})},fm.nil)}}};JC.default=X0e});var rU=b(HC=>{"use strict";Object.defineProperty(HC,"__esModule",{value:!0});var pm=rt(),Y0e={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,pm.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,pm._)`{limit: ${t}}`},Q0e={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Y0e,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?pm.operators.GT:pm.operators.LT;t.fail$data((0,pm._)`${r}.length ${s} ${n}`)}};HC.default=Q0e});var nU=b(GC=>{"use strict";Object.defineProperty(GC,"__esModule",{value:!0});var WC=Qy(),dn=rt(),ege=Dt(),tge=Fy(),rge={message:({params:{i:t,j:e}})=>(0,dn.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,dn._)`{i: ${t}, j: ${e}}`},nge={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:rge,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let u=e.let("valid"),c=i.items?(0,WC.getSchemaTypes)(i.items):[];t.block$data(u,l,(0,dn._)`${o} === false`),t.ok(u);function l(){let h=e.let("i",(0,dn._)`${r}.length`),m=e.let("j");t.setParams({i:h,j:m}),e.assign(u,!0),e.if((0,dn._)`${h} > 1`,()=>(d()?p:f)(h,m))}function d(){return c.length>0&&!c.some(h=>h==="object"||h==="array")}function p(h,m){let g=e.name("item"),_=(0,WC.checkDataTypes)(c,g,a.opts.strictNumbers,WC.DataType.Wrong),D=e.const("indices",(0,dn._)`{}`);e.for((0,dn._)`;${h}--;`,()=>{e.let(g,(0,dn._)`${r}[${h}]`),e.if(_,(0,dn._)`continue`),c.length>1&&e.if((0,dn._)`typeof ${g} == "string"`,(0,dn._)`${g} += "_"`),e.if((0,dn._)`typeof ${D}[${g}] == "number"`,()=>{e.assign(m,(0,dn._)`${D}[${g}]`),t.error(),e.assign(u,!1).break()}).code((0,dn._)`${D}[${g}] = ${h}`)})}function f(h,m){let g=(0,ege.useFunc)(e,tge.default),_=e.name("outer");e.label(_).for((0,dn._)`;${h}--;`,()=>e.for((0,dn._)`${m} = ${h}; ${m}--;`,()=>e.if((0,dn._)`${g}(${r}[${h}], ${r}[${m}])`,()=>{t.error(),e.assign(u,!1).break(_)})))}}};GC.default=nge});var iU=b(XC=>{"use strict";Object.defineProperty(XC,"__esModule",{value:!0});var ZC=rt(),ige=Dt(),sge=Fy(),oge={message:"must be equal to constant",params:({schemaCode:t})=>(0,ZC._)`{allowedValue: ${t}}`},age={keyword:"const",$data:!0,error:oge,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,ZC._)`!${(0,ige.useFunc)(e,sge.default)}(${r}, ${s})`):t.fail((0,ZC._)`${i} !== ${r}`)}};XC.default=age});var sU=b(YC=>{"use strict";Object.defineProperty(YC,"__esModule",{value:!0});var hm=rt(),uge=Dt(),cge=Fy(),lge={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,hm._)`{allowedValues: ${t}}`},dge={keyword:"enum",schemaType:"array",$data:!0,error:lge,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,u,c=()=>u??(u=(0,uge.useFunc)(e,cge.default)),l;if(a||n)l=e.let("valid"),t.block$data(l,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let f=e.const("vSchema",i);l=(0,hm.or)(...s.map((h,m)=>p(f,m)))}t.pass(l);function d(){e.assign(l,!1),e.forOf("v",i,f=>e.if((0,hm._)`${c()}(${r}, ${f})`,()=>e.assign(l,!0).break()))}function p(f,h){let m=s[h];return typeof m=="object"&&m!==null?(0,hm._)`${c()}(${r}, ${f}[${h}])`:(0,hm._)`${r} === ${m}`}}};YC.default=dge});var oU=b(QC=>{"use strict";Object.defineProperty(QC,"__esModule",{value:!0});var fge=WL(),pge=GL(),hge=YL(),yge=QL(),mge=eU(),gge=tU(),vge=rU(),bge=nU(),wge=iU(),_ge=sU(),Ege=[fge.default,pge.default,hge.default,yge.default,mge.default,gge.default,vge.default,bge.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},wge.default,_ge.default];QC.default=Ege});var tP=b(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});ym.validateAdditionalItems=void 0;var xl=rt(),eP=Dt(),Sge={message:({params:{len:t}})=>(0,xl.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,xl._)`{limit: ${t}}`},Age={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Sge,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,eP.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}aU(t,n)}};function aU(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,xl._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,xl._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,eP.alwaysValidSchema)(o,n)){let c=r.var("valid",(0,xl._)`${a} <= ${e.length}`);r.if((0,xl.not)(c),()=>u(c)),t.ok(c)}function u(c){r.forRange("i",e.length,a,l=>{t.subschema({keyword:i,dataProp:l,dataPropType:eP.Type.Num},c),o.allErrors||r.if((0,xl.not)(c),()=>r.break())})}}ym.validateAdditionalItems=aU;ym.default=Age});var rP=b(mm=>{"use strict";Object.defineProperty(mm,"__esModule",{value:!0});mm.validateTuple=void 0;var uU=rt(),bw=Dt(),xge=Ji(),Dge={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return cU(t,"additionalItems",e);r.items=!0,!(0,bw.alwaysValidSchema)(r,e)&&t.ok((0,xge.validateArray)(t))}};function cU(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;l(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=bw.mergeEvaluated.items(n,r.length,a.items));let u=n.name("valid"),c=n.const("len",(0,uU._)`${i}.length`);r.forEach((d,p)=>{(0,bw.alwaysValidSchema)(a,d)||(n.if((0,uU._)`${c} > ${p}`,()=>t.subschema({keyword:o,schemaProp:p,dataProp:p},u)),t.ok(u))});function l(d){let{opts:p,errSchemaPath:f}=a,h=r.length,m=h===d.minItems&&(h===d.maxItems||d[e]===!1);if(p.strictTuples&&!m){let g=`"${o}" is ${h}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,bw.checkStrictMode)(a,g,p.strictTuples)}}}mm.validateTuple=cU;mm.default=Dge});var lU=b(nP=>{"use strict";Object.defineProperty(nP,"__esModule",{value:!0});var Cge=rP(),Pge={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,Cge.validateTuple)(t,"items")};nP.default=Pge});var fU=b(iP=>{"use strict";Object.defineProperty(iP,"__esModule",{value:!0});var dU=rt(),Oge=Dt(),Tge=Ji(),Bge=tP(),Ige={message:({params:{len:t}})=>(0,dU.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,dU._)`{limit: ${t}}`},Fge={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Ige,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,Oge.alwaysValidSchema)(n,e)&&(s?(0,Bge.validateAdditionalItems)(t,s):t.ok((0,Tge.validateArray)(t)))}};iP.default=Fge});var pU=b(sP=>{"use strict";Object.defineProperty(sP,"__esModule",{value:!0});var Wi=rt(),ww=Dt(),kge={message:({params:{min:t,max:e}})=>e===void 0?(0,Wi.str)`must contain at least ${t} valid item(s)`:(0,Wi.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Wi._)`{minContains: ${t}}`:(0,Wi._)`{minContains: ${t}, maxContains: ${e}}`},Rge={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:kge,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:u,maxContains:c}=n;i.opts.next?(o=u===void 0?1:u,a=c):o=1;let l=e.const("len",(0,Wi._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,ww.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,ww.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,ww.alwaysValidSchema)(i,r)){let m=(0,Wi._)`${l} >= ${o}`;a!==void 0&&(m=(0,Wi._)`${m} && ${l} <= ${a}`),t.pass(m);return}i.items=!0;let d=e.name("valid");a===void 0&&o===1?f(d,()=>e.if(d,()=>e.break())):o===0?(e.let(d,!0),a!==void 0&&e.if((0,Wi._)`${s}.length > 0`,p)):(e.let(d,!1),p()),t.result(d,()=>t.reset());function p(){let m=e.name("_valid"),g=e.let("count",0);f(m,()=>e.if(m,()=>h(g)))}function f(m,g){e.forRange("i",0,l,_=>{t.subschema({keyword:"contains",dataProp:_,dataPropType:ww.Type.Num,compositeRule:!0},m),g()})}function h(m){e.code((0,Wi._)`${m}++`),a===void 0?e.if((0,Wi._)`${m} >= ${o}`,()=>e.assign(d,!0).break()):(e.if((0,Wi._)`${m} > ${a}`,()=>e.assign(d,!1).break()),o===1?e.assign(d,!0):e.if((0,Wi._)`${m} >= ${o}`,()=>e.assign(d,!0)))}}};sP.default=Rge});var mU=b(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.validateSchemaDeps=_o.validatePropertyDeps=_o.error=void 0;var oP=rt(),$ge=Dt(),gm=Ji();_o.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,oP.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,oP._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var jge={keyword:"dependencies",type:"object",schemaType:"object",error:_o.error,code(t){let[e,r]=Nge(t);hU(t,e),yU(t,r)}};function Nge({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function hU(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let u=(0,gm.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(u,()=>{for(let c of a)(0,gm.checkReportMissingProp)(t,c)}):(r.if((0,oP._)`${u} && (${(0,gm.checkMissingProp)(t,a,i)})`),(0,gm.reportMissingProp)(t,i),r.else())}}_o.validatePropertyDeps=hU;function yU(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,$ge.alwaysValidSchema)(i,e[a])||(r.if((0,gm.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let u=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(u,o)},()=>r.var(o,!0)),t.ok(o))}_o.validateSchemaDeps=yU;_o.default=jge});var vU=b(aP=>{"use strict";Object.defineProperty(aP,"__esModule",{value:!0});var gU=rt(),Mge=Dt(),qge={message:"property name must be valid",params:({params:t})=>(0,gU._)`{propertyName: ${t.propertyName}}`},Lge={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:qge,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,Mge.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,gU.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};aP.default=Lge});var cP=b(uP=>{"use strict";Object.defineProperty(uP,"__esModule",{value:!0});var _w=Ji(),Ds=rt(),Uge=Aa(),Ew=Dt(),Kge={message:"must NOT have additional properties",params:({params:t})=>(0,Ds._)`{additionalProperty: ${t.additionalProperty}}`},Vge={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Kge,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,Ew.alwaysValidSchema)(o,r))return;let c=(0,_w.allSchemaProperties)(n.properties),l=(0,_w.allSchemaProperties)(n.patternProperties);d(),t.ok((0,Ds._)`${i} === ${Uge.default.errors}`);function d(){e.forIn("key",s,g=>{!c.length&&!l.length?h(g):e.if(p(g),()=>h(g))})}function p(g){let _;if(c.length>8){let D=(0,Ew.schemaRefOrVal)(o,n.properties,"properties");_=(0,_w.isOwnProperty)(e,D,g)}else c.length?_=(0,Ds.or)(...c.map(D=>(0,Ds._)`${g} === ${D}`)):_=Ds.nil;return l.length&&(_=(0,Ds.or)(_,...l.map(D=>(0,Ds._)`${(0,_w.usePattern)(t,D)}.test(${g})`))),(0,Ds.not)(_)}function f(g){e.code((0,Ds._)`delete ${s}[${g}]`)}function h(g){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){f(g);return}if(r===!1){t.setParams({additionalProperty:g}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Ew.alwaysValidSchema)(o,r)){let _=e.name("valid");u.removeAdditional==="failing"?(m(g,_,!1),e.if((0,Ds.not)(_),()=>{t.reset(),f(g)})):(m(g,_),a||e.if((0,Ds.not)(_),()=>e.break()))}}function m(g,_,D){let v={keyword:"additionalProperties",dataProp:g,dataPropType:Ew.Type.Str};D===!1&&Object.assign(v,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(v,_)}}};uP.default=Vge});var _U=b(dP=>{"use strict";Object.defineProperty(dP,"__esModule",{value:!0});var zge=nm(),bU=Ji(),lP=Dt(),wU=cP(),Jge={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&wU.default.code(new zge.KeywordCxt(i,wU.default,"additionalProperties"));let o=(0,bU.allSchemaProperties)(r);for(let d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=lP.mergeEvaluated.props(e,(0,lP.toHash)(o),i.props));let a=o.filter(d=>!(0,lP.alwaysValidSchema)(i,r[d]));if(a.length===0)return;let u=e.name("valid");for(let d of a)c(d)?l(d):(e.if((0,bU.propertyInData)(e,s,d,i.opts.ownProperties)),l(d),i.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(u);function c(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function l(d){t.subschema({keyword:"properties",schemaProp:d,dataProp:d},u)}}};dP.default=Jge});var xU=b(fP=>{"use strict";Object.defineProperty(fP,"__esModule",{value:!0});var EU=Ji(),Sw=rt(),SU=Dt(),AU=Dt(),Hge={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,EU.allSchemaProperties)(r),u=a.filter(m=>(0,SU.alwaysValidSchema)(i,r[m]));if(a.length===0||u.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let c=o.strictSchema&&!o.allowMatchingProperties&&s.properties,l=e.name("valid");i.props!==!0&&!(i.props instanceof Sw.Name)&&(i.props=(0,AU.evaluatedPropsToName)(e,i.props));let{props:d}=i;p();function p(){for(let m of a)c&&f(m),i.allErrors?h(m):(e.var(l,!0),h(m),e.if(l))}function f(m){for(let g in c)new RegExp(m).test(g)&&(0,SU.checkStrictMode)(i,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function h(m){e.forIn("key",n,g=>{e.if((0,Sw._)`${(0,EU.usePattern)(t,m)}.test(${g})`,()=>{let _=u.includes(m);_||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:AU.Type.Str},l),i.opts.unevaluated&&d!==!0?e.assign((0,Sw._)`${d}[${g}]`,!0):!_&&!i.allErrors&&e.if((0,Sw.not)(l),()=>e.break())})})}}};fP.default=Hge});var DU=b(pP=>{"use strict";Object.defineProperty(pP,"__esModule",{value:!0});var Wge=Dt(),Gge={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,Wge.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};pP.default=Gge});var CU=b(hP=>{"use strict";Object.defineProperty(hP,"__esModule",{value:!0});var Zge=Ji(),Xge={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Zge.validateUnion,error:{message:"must match a schema in anyOf"}};hP.default=Xge});var PU=b(yP=>{"use strict";Object.defineProperty(yP,"__esModule",{value:!0});var Aw=rt(),Yge=Dt(),Qge={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Aw._)`{passingSchemas: ${t.passing}}`},eve={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Qge,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),u=e.name("_valid");t.setParams({passing:a}),e.block(c),t.result(o,()=>t.reset(),()=>t.error(!0));function c(){i.forEach((l,d)=>{let p;(0,Yge.alwaysValidSchema)(s,l)?e.var(u,!0):p=t.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},u),d>0&&e.if((0,Aw._)`${u} && ${o}`).assign(o,!1).assign(a,(0,Aw._)`[${a}, ${d}]`).else(),e.if(u,()=>{e.assign(o,!0),e.assign(a,d),p&&t.mergeEvaluated(p,Aw.Name)})})}}};yP.default=eve});var OU=b(mP=>{"use strict";Object.defineProperty(mP,"__esModule",{value:!0});var tve=Dt(),rve={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,tve.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};mP.default=rve});var IU=b(gP=>{"use strict";Object.defineProperty(gP,"__esModule",{value:!0});var xw=rt(),BU=Dt(),nve={message:({params:t})=>(0,xw.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,xw._)`{failingKeyword: ${t.ifClause}}`},ive={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:nve,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,BU.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=TU(n,"then"),i=TU(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(u(),t.reset(),s&&i){let l=e.let("ifClause");t.setParams({ifClause:l}),e.if(a,c("then",l),c("else",l))}else s?e.if(a,c("then")):e.if((0,xw.not)(a),c("else"));t.pass(o,()=>t.error(!0));function u(){let l=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(l)}function c(l,d){return()=>{let p=t.subschema({keyword:l},a);e.assign(o,a),t.mergeValidEvaluated(p,o),d?e.assign(d,(0,xw._)`${l}`):t.setParams({ifClause:l})}}}};function TU(t,e){let r=t.schema[e];return r!==void 0&&!(0,BU.alwaysValidSchema)(t,r)}gP.default=ive});var FU=b(vP=>{"use strict";Object.defineProperty(vP,"__esModule",{value:!0});var sve=Dt(),ove={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,sve.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};vP.default=ove});var kU=b(bP=>{"use strict";Object.defineProperty(bP,"__esModule",{value:!0});var ave=tP(),uve=lU(),cve=rP(),lve=fU(),dve=pU(),fve=mU(),pve=vU(),hve=cP(),yve=_U(),mve=xU(),gve=DU(),vve=CU(),bve=PU(),wve=OU(),_ve=IU(),Eve=FU();function Sve(t=!1){let e=[gve.default,vve.default,bve.default,wve.default,_ve.default,Eve.default,pve.default,hve.default,fve.default,yve.default,mve.default];return t?e.push(uve.default,lve.default):e.push(ave.default,cve.default),e.push(dve.default),e}bP.default=Sve});var RU=b(wP=>{"use strict";Object.defineProperty(wP,"__esModule",{value:!0});var Ar=rt(),Ave={message:({schemaCode:t})=>(0,Ar.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Ar._)`{format: ${t}}`},xve={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Ave,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:u,errSchemaPath:c,schemaEnv:l,self:d}=a;if(!u.validateFormats)return;s?p():f();function p(){let h=r.scopeValue("formats",{ref:d.formats,code:u.code.formats}),m=r.const("fDef",(0,Ar._)`${h}[${o}]`),g=r.let("fType"),_=r.let("format");r.if((0,Ar._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(g,(0,Ar._)`${m}.type || "string"`).assign(_,(0,Ar._)`${m}.validate`),()=>r.assign(g,(0,Ar._)`"string"`).assign(_,m)),t.fail$data((0,Ar.or)(D(),v()));function D(){return u.strictSchema===!1?Ar.nil:(0,Ar._)`${o} && !${_}`}function v(){let E=l.$async?(0,Ar._)`(${m}.async ? await ${_}(${n}) : ${_}(${n}))`:(0,Ar._)`${_}(${n})`,S=(0,Ar._)`(typeof ${_} == "function" ? ${E} : ${_}.test(${n}))`;return(0,Ar._)`${_} && ${_} !== true && ${g} === ${e} && !${S}`}}function f(){let h=d.formats[i];if(!h){D();return}if(h===!0)return;let[m,g,_]=v(h);m===e&&t.pass(E());function D(){if(u.strictSchema===!1){d.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${i}" ignored in schema at path "${c}"`}}function v(S){let P=S instanceof RegExp?(0,Ar.regexpCode)(S):u.code.formats?(0,Ar._)`${u.code.formats}${(0,Ar.getProperty)(i)}`:void 0,C=r.scopeValue("formats",{key:i,ref:S,code:P});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,Ar._)`${C}.validate`]:["string",S,C]}function E(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!l.$async)throw new Error("async format in sync schema");return(0,Ar._)`await ${_}(${n})`}return typeof g=="function"?(0,Ar._)`${_}(${n})`:(0,Ar._)`${_}.test(${n})`}}}};wP.default=xve});var $U=b(_P=>{"use strict";Object.defineProperty(_P,"__esModule",{value:!0});var Dve=RU(),Cve=[Dve.default];_P.default=Cve});var jU=b(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.contentVocabulary=jf.metadataVocabulary=void 0;jf.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];jf.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var MU=b(EP=>{"use strict";Object.defineProperty(EP,"__esModule",{value:!0});var Pve=HL(),Ove=oU(),Tve=kU(),Bve=$U(),NU=jU(),Ive=[Pve.default,Ove.default,(0,Tve.default)(),Bve.default,NU.metadataVocabulary,NU.contentVocabulary];EP.default=Ive});var LU=b(Dw=>{"use strict";Object.defineProperty(Dw,"__esModule",{value:!0});Dw.DiscrError=void 0;var qU;(function(t){t.Tag="tag",t.Mapping="mapping"})(qU||(Dw.DiscrError=qU={}))});var KU=b(AP=>{"use strict";Object.defineProperty(AP,"__esModule",{value:!0});var Nf=rt(),SP=LU(),UU=cw(),Fve=im(),kve=Dt(),Rve={message:({params:{discrError:t,tagName:e}})=>t===SP.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Nf._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},$ve={keyword:"discriminator",type:"object",schemaType:"object",error:Rve,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),c=e.const("tag",(0,Nf._)`${r}${(0,Nf.getProperty)(a)}`);e.if((0,Nf._)`typeof ${c} == "string"`,()=>l(),()=>t.error(!1,{discrError:SP.DiscrError.Tag,tag:c,tagName:a})),t.ok(u);function l(){let f=p();e.if(!1);for(let h in f)e.elseIf((0,Nf._)`${c} === ${h}`),e.assign(u,d(f[h]));e.else(),t.error(!1,{discrError:SP.DiscrError.Mapping,tag:c,tagName:a}),e.endIf()}function d(f){let h=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:f},h);return t.mergeEvaluated(m,Nf.Name),h}function p(){var f;let h={},m=_(s),g=!0;for(let E=0;E<o.length;E++){let S=o[E];if(S?.$ref&&!(0,kve.schemaHasRulesButRef)(S,i.self.RULES)){let C=S.$ref;if(S=UU.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,C),S instanceof UU.SchemaEnv&&(S=S.schema),S===void 0)throw new Fve.default(i.opts.uriResolver,i.baseId,C)}let P=(f=S?.properties)===null||f===void 0?void 0:f[a];if(typeof P!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||_(S)),D(P,E)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return h;function _({required:E}){return Array.isArray(E)&&E.includes(a)}function D(E,S){if(E.const)v(E.const,S);else if(E.enum)for(let P of E.enum)v(P,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function v(E,S){if(typeof E!="string"||E in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[E]=S}}}};AP.default=$ve});var VU=b((r$e,jve)=>{jve.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var DP=b((er,xP)=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.MissingRefError=er.ValidationError=er.CodeGen=er.Name=er.nil=er.stringify=er.str=er._=er.KeywordCxt=er.Ajv=void 0;var Nve=LL(),Mve=MU(),qve=KU(),zU=VU(),Lve=["/properties"],Cw="http://json-schema.org/draft-07/schema",Mf=class extends Nve.default{_addVocabularies(){super._addVocabularies(),Mve.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(qve.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(zU,Lve):zU;this.addMetaSchema(e,Cw,!1),this.refs["http://json-schema.org/schema"]=Cw}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Cw)?Cw:void 0)}};er.Ajv=Mf;xP.exports=er=Mf;xP.exports.Ajv=Mf;Object.defineProperty(er,"__esModule",{value:!0});er.default=Mf;var Uve=nm();Object.defineProperty(er,"KeywordCxt",{enumerable:!0,get:function(){return Uve.KeywordCxt}});var qf=rt();Object.defineProperty(er,"_",{enumerable:!0,get:function(){return qf._}});Object.defineProperty(er,"str",{enumerable:!0,get:function(){return qf.str}});Object.defineProperty(er,"stringify",{enumerable:!0,get:function(){return qf.stringify}});Object.defineProperty(er,"nil",{enumerable:!0,get:function(){return qf.nil}});Object.defineProperty(er,"Name",{enumerable:!0,get:function(){return qf.Name}});Object.defineProperty(er,"CodeGen",{enumerable:!0,get:function(){return qf.CodeGen}});var Kve=aw();Object.defineProperty(er,"ValidationError",{enumerable:!0,get:function(){return Kve.default}});var Vve=im();Object.defineProperty(er,"MissingRefError",{enumerable:!0,get:function(){return Vve.default}})});var XU=b(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});Eo.formatNames=Eo.fastFormats=Eo.fullFormats=void 0;function Lf(t,e){return{validate:t,compare:e}}Eo.fullFormats={date:Lf(WU,OP),time:Lf(GU,TP),"date-time":Lf(Wve,ZU),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:Xve,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:ibe,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:Yve,int32:{type:"number",validate:tbe},int64:{type:"number",validate:rbe},float:{type:"number",validate:HU},double:{type:"number",validate:HU},password:!0,binary:!0};Eo.fastFormats={...Eo.fullFormats,date:Lf(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,OP),time:Lf(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,TP),"date-time":Lf(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,ZU),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};Eo.formatNames=Object.keys(Eo.fullFormats);function zve(t){return t%4===0&&(t%100!==0||t%400===0)}var Jve=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Hve=[0,31,28,31,30,31,30,31,31,30,31,30,31];function WU(t){let e=Jve.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&s<=(n===2&&zve(r)?29:Hve[n])}function OP(t,e){if(t&&e)return t>e?1:t<e?-1:0}var CP=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function GU(t,e){let r=CP.exec(t);if(!r)return!1;let n=+r[1],s=+r[2],i=+r[3],o=r[5];return(n<=23&&s<=59&&i<=59||n===23&&s===59&&i===60)&&(!e||o!=="")}function TP(t,e){if(!(t&&e))return;let r=CP.exec(t),n=CP.exec(e);if(r&&n)return t=r[1]+r[2]+r[3]+(r[4]||""),e=n[1]+n[2]+n[3]+(n[4]||""),t>e?1:t<e?-1:0}var PP=/t|\s/i;function Wve(t){let e=t.split(PP);return e.length===2&&WU(e[0])&&GU(e[1],!0)}function ZU(t,e){if(!(t&&e))return;let[r,n]=t.split(PP),[s,i]=e.split(PP),o=OP(r,s);if(o!==void 0)return o||TP(n,i)}var Gve=/\/|:/,Zve=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function Xve(t){return Gve.test(t)&&Zve.test(t)}var JU=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function Yve(t){return JU.lastIndex=0,JU.test(t)}var Qve=-(2**31),ebe=2**31-1;function tbe(t){return Number.isInteger(t)&&t<=ebe&&t>=Qve}function rbe(t){return Number.isInteger(t)}function HU(){return!0}var nbe=/[^\\]\\Z/;function ibe(t){if(nbe.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var YU=b(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.formatLimitDefinition=void 0;var sbe=DP(),Cs=rt(),ju=Cs.operators,Pw={formatMaximum:{okStr:"<=",ok:ju.LTE,fail:ju.GT},formatMinimum:{okStr:">=",ok:ju.GTE,fail:ju.LT},formatExclusiveMaximum:{okStr:"<",ok:ju.LT,fail:ju.GTE},formatExclusiveMinimum:{okStr:">",ok:ju.GT,fail:ju.LTE}},obe={message:({keyword:t,schemaCode:e})=>Cs.str`should be ${Pw[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>Cs._`{comparison: ${Pw[t].okStr}, limit: ${e}}`};Uf.formatLimitDefinition={keyword:Object.keys(Pw),type:"string",schemaType:"string",$data:!0,error:obe,code(t){let{gen:e,data:r,schemaCode:n,keyword:s,it:i}=t,{opts:o,self:a}=i;if(!o.validateFormats)return;let u=new sbe.KeywordCxt(i,a.RULES.all.format.definition,"format");u.$data?c():l();function c(){let p=e.scopeValue("formats",{ref:a.formats,code:o.code.formats}),f=e.const("fmt",Cs._`${p}[${u.schemaCode}]`);t.fail$data(Cs.or(Cs._`typeof ${f} != "object"`,Cs._`${f} instanceof RegExp`,Cs._`typeof ${f}.compare != "function"`,d(f)))}function l(){let p=u.schema,f=a.formats[p];if(!f||f===!0)return;if(typeof f!="object"||f instanceof RegExp||typeof f.compare!="function")throw new Error(`"${s}": format "${p}" does not define "compare" function`);let h=e.scopeValue("formats",{key:p,ref:f,code:o.code.formats?Cs._`${o.code.formats}${Cs.getProperty(p)}`:void 0});t.fail$data(d(h))}function d(p){return Cs._`${p}.compare(${r}, ${n}) ${Pw[s].fail} 0`}},dependencies:["format"]};var abe=t=>(t.addKeyword(Uf.formatLimitDefinition),t);Uf.default=abe});var r7=b((vm,t7)=>{"use strict";Object.defineProperty(vm,"__esModule",{value:!0});var Kf=XU(),ube=YU(),BP=rt(),QU=new BP.Name("fullFormats"),cbe=new BP.Name("fastFormats"),IP=(t,e={keywords:!0})=>{if(Array.isArray(e))return e7(t,e,Kf.fullFormats,QU),t;let[r,n]=e.mode==="fast"?[Kf.fastFormats,cbe]:[Kf.fullFormats,QU],s=e.formats||Kf.formatNames;return e7(t,s,r,n),e.keywords&&ube.default(t),t};IP.get=(t,e="full")=>{let n=(e==="fast"?Kf.fastFormats:Kf.fullFormats)[t];if(!n)throw new Error(`Unknown format "${t}"`);return n};function e7(t,e,r,n){var s,i;(s=(i=t.opts.code).formats)!==null&&s!==void 0||(i.formats=BP._`require("ajv-formats/dist/formats").${n}`);for(let o of e)t.addFormat(o,r[o])}t7.exports=vm=IP;Object.defineProperty(vm,"__esModule",{value:!0});vm.default=IP});var s7=b(Vf=>{"use strict";var RP=Vf&&Vf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vf,"__esModule",{value:!0});Vf.InputDescriptorFilterEvaluationHandler=void 0;var FP=Li(),lbe=RP(DP()),dbe=RP(r7()),n7=Nr(),kP=RP(ms()),fbe=Ui(),pbe=Vi(),i7=new lbe.default({verbose:!1,code:{source:!1,lines:!0,esm:!1},allowUnionTypes:!0,allErrors:!0,strict:!1});(0,dbe.default)(i7);var Nu=class t extends pbe.AbstractEvaluationHandler{constructor(e){super(e),t.keepCacheSizeInCheck()}getName(){return"FilterEvaluation"}handle(e,r){let n=FP.JSONPath.nodes(e,"$..fields[*]");r.forEach((s,i)=>{this.createNoFieldResults(e,i,s),n.forEach(o=>{let a=[];o.value.path&&(a=fbe.JsonPathUtils.extractInputField(s.decoded,o.value.path));let u=!1;for(let c of a)if(this.evaluateFilter(c,o.value)){u=!0;let l={result:Object.assign({},a[0]),valid:!0,format:s.format};this.getResults().push(Object.assign({},this.createResultObject(FP.JSONPath.stringify(o.path.slice(0,3)),i,l)))}if(!u)if(a.length){let c={result:Object.assign({},a[0]),valid:!1,format:s.format};this.createResponse(o,i,c,kP.default.INPUT_CANDIDATE_FAILED_FILTER_EVALUATION)}else{let c={valid:!1,format:s.format};this.createResponse(o,i,c,kP.default.INPUT_CANDIDATE_DOESNT_CONTAIN_PROPERTY)}})}),this.updatePresentationSubmission(e)}createNoFieldResults(e,r,n){e.input_descriptors.map((i,o)=>({index:o,inDesc:i})).filter(i=>{var o,a,u;return((o=i.inDesc.constraints)===null||o===void 0?void 0:o.fields)===void 0||((u=(a=i.inDesc.constraints)===null||a===void 0?void 0:a.fields)===null||u===void 0?void 0:u.length)===0}).forEach(i=>{let o={result:[],valid:!0,format:n.format};this.getResults().push(Object.assign({},this.createResultObject(`$.input_descriptors[${i.index}]`,r,o)))})}createResponse(e,r,n,s){this.getResults().push(Object.assign(Object.assign({},this.createResultObject(FP.JSONPath.stringify(e.path.slice(0,3)),r,n)),{status:n7.Status.ERROR,message:s}))}createResultObject(e,r,n){return{input_descriptor_path:e,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:n7.Status.INFO,message:kP.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}}evaluateFilter(e,r){var n,s;!((n=r.filter)===null||n===void 0)&&n.format&&r.filter.format==="date"&&this.transformDateFormat(e);let i=!0;if(r.filter){let o=JSON.stringify({filter:r.filter,value:e.value}),a=Date.now();i=(s=t.FILTER_CACHE.get(o))===null||s===void 0?void 0:s.value,i===void 0&&(t.keepCacheSizeInCheck(),i=i7.validate(r.filter,e.value),t.FILTER_CACHE.set(o,{value:i,ts:a+t.DEFAULT_FILTER_CACHE_TTL}))}return i}transformDateFormat(e){let r=new Date(e.value),n=r.getUTCMonth()+1+"";n.length===1&&(n="0"+n);let s=r.getUTCDate()+"";s.length===1&&(s="0"+s),e.value=r.getUTCFullYear()+"-"+n+"-"+s,e.value=r.toISOString().substring(0,r.toISOString().indexOf("T"))}static keepCacheSizeInCheck(e){var r,n,s;let i=(r=e?.ttl)!==null&&r!==void 0?r:t.DEFAULT_FILTER_CACHE_TTL,o=(n=e?.maxCacheSize)!==null&&n!==void 0?n:t.DEFAULT_MAX_FILTER_CACHE_SIZE,a=(s=e?.resetCacheSize)!==null&&s!==void 0?s:t.DEFAULT_RESET_CACHE_SIZE,u=Date.now();for(let[l,d]of t.FILTER_CACHE)d.ts+i<u&&t.FILTER_CACHE.delete(l);let c=t.FILTER_CACHE.size;if(c>o){let l=t.FILTER_CACHE.keys();for(let d=0;d<c-a;d++)t.FILTER_CACHE.delete(l.next().value)}}};Vf.InputDescriptorFilterEvaluationHandler=Nu;Nu.FILTER_CACHE=new Map;Nu.DEFAULT_MAX_FILTER_CACHE_SIZE=100;Nu.DEFAULT_FILTER_CACHE_TTL=1e3*30;Nu.DEFAULT_RESET_CACHE_SIZE=Nu.DEFAULT_MAX_FILTER_CACHE_SIZE/2});var a7=b(o7=>{"use strict";Object.defineProperty(o7,"__esModule",{value:!0})});var c7=b(u7=>{"use strict";Object.defineProperty(u7,"__esModule",{value:!0})});var d7=b(l7=>{"use strict";Object.defineProperty(l7,"__esModule",{value:!0})});var p7=b(f7=>{"use strict";Object.defineProperty(f7,"__esModule",{value:!0})});var y7=b(h7=>{"use strict";Object.defineProperty(h7,"__esModule",{value:!0})});var g7=b(m7=>{"use strict";Object.defineProperty(m7,"__esModule",{value:!0})});var v7=b(Ow=>{"use strict";Object.defineProperty(Ow,"__esModule",{value:!0});Ow.Directives=void 0;Ow.Directives={Required:"required",Allowed:"allowed",Disallowed:"disallowed"}});var b7=b(Tw=>{"use strict";Object.defineProperty(Tw,"__esModule",{value:!0});Tw.ExchangeStatus=void 0;Tw.ExchangeStatus={Created:"CREATED",Submitted:"SUBMITTED",HolderDeclined:"HOLDER_DECLINED",Expired:"EXPIRED",Accepted:"ACCEPTED",VerifierDeclined:"VERIFIER_DECLINED"}});var _7=b(w7=>{"use strict";Object.defineProperty(w7,"__esModule",{value:!0})});var S7=b(E7=>{"use strict";Object.defineProperty(E7,"__esModule",{value:!0})});var x7=b(A7=>{"use strict";Object.defineProperty(A7,"__esModule",{value:!0})});var C7=b(D7=>{"use strict";Object.defineProperty(D7,"__esModule",{value:!0})});var O7=b(P7=>{"use strict";Object.defineProperty(P7,"__esModule",{value:!0})});var B7=b(T7=>{"use strict";Object.defineProperty(T7,"__esModule",{value:!0})});var F7=b(I7=>{"use strict";Object.defineProperty(I7,"__esModule",{value:!0})});var R7=b(k7=>{"use strict";Object.defineProperty(k7,"__esModule",{value:!0})});var j7=b($7=>{"use strict";Object.defineProperty($7,"__esModule",{value:!0})});var M7=b(N7=>{"use strict";Object.defineProperty(N7,"__esModule",{value:!0})});var L7=b(q7=>{"use strict";Object.defineProperty(q7,"__esModule",{value:!0})});var K7=b(U7=>{"use strict";Object.defineProperty(U7,"__esModule",{value:!0})});var z7=b(V7=>{"use strict";Object.defineProperty(V7,"__esModule",{value:!0})});var H7=b(J7=>{"use strict";Object.defineProperty(J7,"__esModule",{value:!0})});var G7=b(W7=>{"use strict";Object.defineProperty(W7,"__esModule",{value:!0})});var X7=b(Z7=>{"use strict";Object.defineProperty(Z7,"__esModule",{value:!0})});var Q7=b(Y7=>{"use strict";Object.defineProperty(Y7,"__esModule",{value:!0})});var eK=b(Bw=>{"use strict";Object.defineProperty(Bw,"__esModule",{value:!0});Bw.Optionality=void 0;Bw.Optionality={Required:"required",Preferred:"preferred"}});var rK=b(tK=>{"use strict";Object.defineProperty(tK,"__esModule",{value:!0})});var iK=b(nK=>{"use strict";Object.defineProperty(nK,"__esModule",{value:!0})});var oK=b(sK=>{"use strict";Object.defineProperty(sK,"__esModule",{value:!0})});var uK=b(aK=>{"use strict";Object.defineProperty(aK,"__esModule",{value:!0})});var lK=b(cK=>{"use strict";Object.defineProperty(cK,"__esModule",{value:!0})});var fK=b(dK=>{"use strict";Object.defineProperty(dK,"__esModule",{value:!0})});var hK=b(pK=>{"use strict";Object.defineProperty(pK,"__esModule",{value:!0})});var mK=b(yK=>{"use strict";Object.defineProperty(yK,"__esModule",{value:!0})});var vK=b(gK=>{"use strict";Object.defineProperty(gK,"__esModule",{value:!0})});var bK=b(Iw=>{"use strict";Object.defineProperty(Iw,"__esModule",{value:!0});Iw.Rules=void 0;Iw.Rules={All:"all",Pick:"pick"}});var _K=b(wK=>{"use strict";Object.defineProperty(wK,"__esModule",{value:!0})});var SK=b(EK=>{"use strict";Object.defineProperty(EK,"__esModule",{value:!0})});var AK=b(Fw=>{"use strict";Object.defineProperty(Fw,"__esModule",{value:!0});Fw.Status=void 0;Fw.Status={Success:"SUCCESS",Warn:"WARN",Error:"ERROR"}});var DK=b(xK=>{"use strict";Object.defineProperty(xK,"__esModule",{value:!0})});var PK=b(CK=>{"use strict";Object.defineProperty(CK,"__esModule",{value:!0})});var TK=b(OK=>{"use strict";Object.defineProperty(OK,"__esModule",{value:!0})});var IK=b(BK=>{"use strict";Object.defineProperty(BK,"__esModule",{value:!0})});var FK=b(qe=>{"use strict";var hbe=qe&&qe.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Je=qe&&qe.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&hbe(e,t,r)};Object.defineProperty(qe,"__esModule",{value:!0});Je(a7(),qe);Je(c7(),qe);Je(d7(),qe);Je(p7(),qe);Je(y7(),qe);Je(g7(),qe);Je(v7(),qe);Je(b7(),qe);Je(_7(),qe);Je(S7(),qe);Je(x7(),qe);Je(C7(),qe);Je(O7(),qe);Je(B7(),qe);Je(F7(),qe);Je(R7(),qe);Je(j7(),qe);Je(M7(),qe);Je(L7(),qe);Je(K7(),qe);Je(z7(),qe);Je(H7(),qe);Je(G7(),qe);Je(X7(),qe);Je(Q7(),qe);Je(eK(),qe);Je(rK(),qe);Je(iK(),qe);Je(oK(),qe);Je(uK(),qe);Je(lK(),qe);Je(fK(),qe);Je(hK(),qe);Je(mK(),qe);Je(vK(),qe);Je(bK(),qe);Je(_K(),qe);Je(SK(),qe);Je(AK(),qe);Je(DK(),qe);Je(PK(),qe);Je(TK(),qe);Je(IK(),qe)});var Ca=b(Dl=>{"use strict";var ybe=Dl&&Dl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),mbe=Dl&&Dl.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ybe(e,t,r)};Object.defineProperty(Dl,"__esModule",{value:!0});mbe(FK(),Dl)});var kK=b(Rw=>{"use strict";Object.defineProperty(Rw,"__esModule",{value:!0});Rw.SubjectIsHolderEvaluationHandler=void 0;var Mu=Li(),kw=Ca(),Cl=Nr(),gbe=Vi(),$P=class extends gbe.AbstractEvaluationHandler{constructor(e){super(e),this.fieldIdzInputDescriptorsSameSubjectRequired=new Map,this.fieldIdzInputDescriptorsSameSubjectPreferred=new Map,this.isHolder=[],this.fieldIds=[],this.credentialsSubjectsByPath=new Map,this.credentialsByPath=new Map,this.messages=new Map,this.messages.set(Cl.Status.INFO,"The field ids requiring the subject to be the holder"),this.messages.set(Cl.Status.WARN,"The field ids preferring the subject to be the holder"),this.messages.set(Cl.Status.ERROR,"The field id missing")}getName(){return"IsHolderEvaluation"}handle(e,r){this.findIsHolderFieldIdsToInputDescriptorsSets(e),this.findAllCredentialSubjects(r),this.confirmAllFieldSetHasSameSubject(this.fieldIdzInputDescriptorsSameSubjectRequired,Cl.Status.INFO,kw.Optionality.Required),this.confirmAllFieldSetHasSameSubject(this.fieldIdzInputDescriptorsSameSubjectPreferred,Cl.Status.WARN,kw.Optionality.Preferred),this.updatePresentationSubmission(e)}findIsHolderFieldIdsToInputDescriptorsSets(e){var r;this.fieldIds.push(...Mu.JSONPath.nodes(e,"$..fields[*].id")),this.isHolder.push(...Mu.JSONPath.nodes(e,"$..is_holder[*]"));let n=(r=this.fieldIds)===null||r===void 0?void 0:r.map(i=>i.value),s=[];s.push(...this.evaluateFields(this.fieldIdzInputDescriptorsSameSubjectPreferred,this.isHolder,n,kw.Optionality.Preferred)),s.push(...this.evaluateFields(this.fieldIdzInputDescriptorsSameSubjectRequired,this.isHolder,n,kw.Optionality.Required)),s.forEach(i=>this.getResults().push(this.createResult(i[1],i[0],["",{}],Cl.Status.ERROR,void 0)))}evaluateFields(e,r,n,s){let i=[];return r.filter(o=>o.value.directive===s).filter(o=>o.value.field_id.every(a=>n.includes(a))).forEach(o=>e.set(Mu.JSONPath.stringify(o.path.slice(0,3)),o.value.field_id)),r.filter(o=>o.value.directive===s).filter(o=>!o.value.field_id.every(a=>n.includes(a))).forEach(o=>i.push([Mu.JSONPath.stringify(o.path.slice(0,3)),o.value.field_id])),i}findAllCredentialSubjects(e){let r=Mu.JSONPath.nodes(e.map(n=>n.credential),"$..credentialSubject");for(let n=0;n<r.length;n++){let s=r[n],i=Mu.JSONPath.stringify(s.path.slice(0,2));this.credentialsSubjectsByPath.set(i,s.value),this.credentialsByPath.set(i,e[n])}}confirmAllFieldSetHasSameSubject(e,r,n){let s=Array.from(e).flatMap(u=>Array.from(this.credentialsSubjectsByPath).filter(c=>u[1].find(l=>Object.keys(c[1]).includes(l)))),i=this.mapCredentialPathsToInputDescriptors(n),o=Array.from(s).flatMap(u=>Object.keys(u[1]).filter(c=>c!=="id")),a=Array.from(e.values()).flatMap(u=>u.every(c=>o.includes(c)))[0];s.forEach(u=>{let c=i.get(u[0]);a&&u[1].id&&this.client.dids.includes(u[1].id)?this.getResults().push(this.createResult(Object.keys(u[1]).filter(l=>l!=="id"),c,u,r,this.credentialsByPath.get(u[0]))):this.getResults().push(this.createResult(Object.keys(u[1]).filter(l=>l!=="id"),c,u,Cl.Status.ERROR,this.credentialsByPath.get(u[0])))})}mapCredentialPathsToInputDescriptors(e){var r;let n=new Map;return(r=this.fieldIds)===null||r===void 0||r.forEach(s=>{let i=Mu.JSONPath.stringify(s.path.slice(0,3));this.credentialsSubjectsByPath.forEach((o,a)=>{let u=this.isHolder.find(c=>Mu.JSONPath.stringify(c.path.slice(0,3))===i);Object.keys(o).includes(s.value)&&u?.value.directive===e&&n.set(a,i)})}),n}createResult(e,r,n,s,i,o){return{input_descriptor_path:r,verifiable_credential_path:n[0],evaluator:this.getName(),status:s,payload:Object.assign({fieldIdSet:e,credentialSubject:n[1]},i?{format:i.format}:{}),message:o??this.messages.get(s)}}};Rw.SubjectIsHolderEvaluationHandler=$P});var RK=b(zf=>{"use strict";var vbe=zf&&zf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zf,"__esModule",{value:!0});zf.LimitDisclosureEvaluationHandler=void 0;var $w=Ca(),jP=ys(),jw=Nr(),NP=vbe(ms()),Nw=Ui(),bbe=Vi(),MP=class extends bbe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"LimitDisclosureEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{var i,o,a;!((i=n.constraints)===null||i===void 0)&&i.fields&&(((o=n.constraints)===null||o===void 0?void 0:o.limit_disclosure)===$w.Optionality.Required||((a=n.constraints)===null||a===void 0?void 0:a.limit_disclosure)===$w.Optionality.Preferred)&&this.evaluateLimitDisclosure(r,n.constraints,s)})}isLimitDisclosureSupported(e,r,n,s){if(e.format==="vc+sd-jwt")return!0;let i=this.client.limitDisclosureSignatureSuites,o=e.decoded.proof;if(!o||Array.isArray(o)||!o.type)return!1;let a=o.cryptosuite?`${o.type}.${o.cryptosuite}`:o.type;return i?.includes(a)?!0:(s==$w.Optionality.Required&&this.createLimitDisclosureNotSupportedResult(n,r),!1)}evaluateLimitDisclosure(e,r,n){let s=r?.fields,i=r.limit_disclosure;e.forEach((o,a)=>{i&&this.isLimitDisclosureSupported(o,a,n,i)&&this.enforceLimitDisclosure(o,s,n,a,e,i)})}enforceLimitDisclosure(e,r,n,s,i,o){if(jP.CredentialMapper.isWrappedSdJwtVerifiableCredential(e)){let a=this.createSdJwtPresentationFrame(e.credential,r,n,s);a&&((0,Nw.applySdJwtLimitDisclosure)(e.credential,a),e.decoded=e.credential.decodedPayload,e.original=jP.CredentialMapper.isSdJwtDecodedCredential(e.original)?e.credential:e.credential.compactSdJwtVc,this.createSuccessResult(n,`$[${s}]`,o))}else if(jP.CredentialMapper.isW3cCredential(e.credential)){let a=this.createVcWithRequiredFields(e.credential,r,n,s);a&&(i[s].credential=a,this.createSuccessResult(n,`$[${s}]`,o))}else throw new Error(`Unsupported format for selective disclosure ${e.format}`)}createSdJwtPresentationFrame(e,r,n,s){let i={};for(let o of r)if(o.path){let a=Nw.JsonPathUtils.extractInputField(e.decodedPayload,o.path);if(a.length>0){let u=a[0];Nw.JsonPathUtils.setValue(i,u.path,!0)}else{this.createMandatoryFieldNotFoundResult(n,s,o.path);return}}return i}createVcWithRequiredFields(e,r,n,s){let i={};i=Object.assign(i,e),i.credentialSubject={};for(let o of r)if(o.path){let a=Nw.JsonPathUtils.extractInputField(e,o.path);if(a.length>0)i=this.copyResultPathToDestinationCredential(a[0],e,i);else{this.createMandatoryFieldNotFoundResult(n,s,o.path);return}}return i}copyResultPathToDestinationCredential(e,r,n){let s=Object.assign({},r.credentialSubject);return e.path.forEach(i=>{s[i]&&(s={[i]:s[i]})}),n.credentialSubject=Object.assign(Object.assign({},n.credentialSubject),s),n}createSuccessResult(e,r,n){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`${r}`,evaluator:this.getName(),status:n===$w.Optionality.Required?jw.Status.INFO:jw.Status.WARN,message:NP.default.LIMIT_DISCLOSURE_APPLIED,payload:void 0})}createMandatoryFieldNotFoundResult(e,r,n){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:jw.Status.ERROR,message:NP.default.VERIFIABLE_CREDENTIAL_MANDATORY_FIELD_NOT_PRESENT,payload:n})}createLimitDisclosureNotSupportedResult(e,r){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:jw.Status.ERROR,message:NP.default.LIMIT_DISCLOSURE_NOT_SUPPORTED})}};zf.LimitDisclosureEvaluationHandler=MP});var jK=b(Jf=>{"use strict";var wbe=Jf&&Jf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jf,"__esModule",{value:!0});Jf.MarkForSubmissionEvaluationHandler=void 0;var _be=Li(),qP=Nr(),$K=wbe(ms()),Ebe=Vi(),LP=class extends Ebe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"MarkForSubmissionEvaluation"}handle(e,r){let n=[...this.getResults()],s=n.filter(o=>o.status===qP.Status.ERROR),i=this.retrieveNoErrorStatus(n,s);this.client.wrappedVcs=r,this.produceErrorResults(s),this.produceSuccessResults(i,e)}retrieveNoErrorStatus(e,r){return e.filter(s=>s.status!==qP.Status.ERROR).filter(s=>!r.find(i=>s.input_descriptor_path===i.input_descriptor_path&&s.verifiable_credential_path===i.verifiable_credential_path))}produceSuccessResults(e,r){this.removeDuplicate(e).forEach(n=>{let i=_be.JSONPath.nodes(r,n.input_descriptor_path)[0].value.group;this.getResults().push({input_descriptor_path:n.input_descriptor_path,verifiable_credential_path:n.verifiable_credential_path,evaluator:this.getName(),status:qP.Status.INFO,payload:{group:i},message:$K.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION})})}produceErrorResults(e){this.removeDuplicate(e).forEach(r=>{let n=Object.assign({},r.payload);n.evaluator=r.evaluator,this.getResults().push(Object.assign(Object.assign({},r),{evaluator:this.getName(),message:$K.default.INPUT_CANDIDATE_IS_NOT_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}))})}};Jf.MarkForSubmissionEvaluationHandler=LP});var NK=b(Hf=>{"use strict";var Sbe=Hf&&Hf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hf,"__esModule",{value:!0});Hf.PredicateRelatedFieldEvaluationHandler=void 0;var Abe=Ca(),xbe=Nr(),Dbe=Sbe(ms()),Cbe=Vi(),UP=class extends Cbe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"PredicateRelatedFieldEvaluation"}handle(e){e.input_descriptors.forEach((r,n)=>{r.constraints&&this.examinePredicateRelatedField(n,r.constraints)})}examinePredicateRelatedField(e,r){if(r?.fields)for(let n=0;n<r.fields.length;n++)for(let s=0;s<this.getResults().length;s++)this.examinePredicateForFilterEvaluationResult(this.getResults(),s,e,r,n)}examinePredicateForFilterEvaluationResult(e,r,n,s,i){var o;let a=this.retrieveResultInputDescriptorIdx(e[r].input_descriptor_path);if(e[r].payload&&e[r].payload.result&&e[r].payload.result.path&&e[r].evaluator==="FilterEvaluation"&&n===a&&s&&s.fields&&s.fields[i]&&s.fields[i].predicate&&s.fields[i].path&&(!((o=s.fields[i].path)===null||o===void 0)&&o.includes(this.concatenatePath(e[r].payload.result.path)))){let u=Object.assign({},e[r].payload.result),c=this.createResultObject(n,r,u,e);s.fields[i].predicate===Abe.Optionality.Required||(c.payload.value=!0),e.push(c)}}retrieveResultInputDescriptorIdx(e){let r="$.input_descriptors[",n=e.indexOf(r),s=e.substring(n+r.length),i=s.indexOf("]"),o=s.substring(0,i);return parseInt(o)}concatenatePath(e){let r="";for(let n=0;n<e.length;n++)typeof e[n]=="number"?(r=r.substring(0,r.length-1),r+="[*]."):r+=e[n]+".";return r.substring(0,r.length-1)}createResultObject(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:s[r].verifiable_credential_path,evaluator:this.getName(),status:xbe.Status.INFO,message:Dbe.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}}};Hf.PredicateRelatedFieldEvaluationHandler=UP});var qK=b(Mw=>{"use strict";Object.defineProperty(Mw,"__esModule",{value:!0});Mw.SameSubjectEvaluationHandler=void 0;var qu=Li(),MK=Ca(),Pa=Nr(),Pbe=Vi(),KP=class extends Pbe.AbstractEvaluationHandler{constructor(e){super(e),this.fieldIds=[],this.sameSubject=[],this.messages=new Map,this.messages.set(Pa.Status.INFO,"The field ids requiring the same subject to belong to same subject"),this.messages.set(Pa.Status.WARN,"The field ids preferring the same subject to belong to same subject"),this.messages.set(Pa.Status.ERROR,"The fields ids not belong to the same subject")}getName(){return"SameSubjectEvaluation"}handle(e,r){let n=this.mapSameSubjectFieldIdsToInputDescriptors(e),s=this.mapCredentialsToResultObjecs(r,n),i=this.countSameSubjectOccurrences(n,s);this.generateErrorResults(i,s),this.updatePresentationSubmission(e)}mapSameSubjectFieldIdsToInputDescriptors(e){this.fieldIds.push(...qu.JSONPath.nodes(e,"$..fields[*].id")),this.sameSubject.push(...qu.JSONPath.nodes(e,"$..same_subject[*]"));let r=[];return this.fieldIds.forEach(n=>{let s=this.sameSubject.find(i=>i.value.field_id.includes(n.value));s&&r.push([n,s])}),r}generateErrorResults(e,r){e.forEach((n,s)=>{let i=r.filter(o=>s===o.payload.fieldIdSet).map(o=>o.payload.credentialSubject.id);(i.length!==n||new Set(i).size!==1)&&r.forEach((o,a,u)=>{o.payload.fieldIdSet===s&&(o.status=Pa.Status.ERROR,o.message=this.messages.get(Pa.Status.ERROR),u[a]=o)})}),this.client.results.push(...r)}countSameSubjectOccurrences(e,r){let n=new Map;return e.forEach(s=>{r.filter(o=>s[1].value.field_id===o.payload.fieldIdSet)&&(n.has(s[1].value.field_id)&&n.get(s[1].value.field_id)?n.set(s[1].value.field_id,n.get(s[1].value.field_id)+1):n.set(s[1].value.field_id,1))}),n}mapCredentialsToResultObjecs(e,r){let n=[...qu.JSONPath.nodes(e.map(i=>i.credential),"$..credentialSubject")],s=[];return n.forEach(i=>{let o=r.find(a=>qu.JSONPath.query(i.value,`$..${a[0].value}`).length!==0);o&&o[1].value.directive===MK.Optionality.Required?s.push({input_descriptor_path:qu.JSONPath.stringify(o[0].path.slice(0,3)),status:Pa.Status.INFO,evaluator:this.getName(),payload:{fieldIdSet:o[1].value.field_id,credentialSubject:i.value},message:this.messages.get(Pa.Status.INFO),verifiable_credential_path:qu.JSONPath.stringify(i.path.slice(0,2))}):o&&o[1].value.directive===MK.Optionality.Preferred&&s.push({input_descriptor_path:qu.JSONPath.stringify(o[0].path.slice(0,3)),status:Pa.Status.WARN,evaluator:this.getName(),payload:{fieldIdSet:o[1].value.field_id,credentialSubject:i.value},message:this.messages.get(Pa.Status.WARN),verifiable_credential_path:qu.JSONPath.stringify(i.path.slice(0,2))})}),s}};Mw.SameSubjectEvaluationHandler=KP});var VK=b(Wf=>{"use strict";var Obe=Wf&&Wf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wf,"__esModule",{value:!0});Wf.SubjectIsIssuerEvaluationHandler=void 0;var Tbe=Ca(),LK=ys(),UK=Nr(),KK=Obe(ms()),VP=Ui(),Bbe=Vi(),zP=class extends Bbe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"SubjectIsIssuerEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{let i=n.constraints;i?.subject_is_issuer===Tbe.Optionality.Required?this.checkSubjectIsIssuer(n.id,r,s):this.getResults().push(...r.map((o,a)=>this.generateSuccessResult(s,`$[${a}]`,o,"not applicable")))}),this.updatePresentationSubmission(e)}checkSubjectIsIssuer(e,r,n){this.client.presentationSubmission.descriptor_map.forEach(s=>{if(s.id===e){let i=VP.JsonPathUtils.extractInputField(r.map(o=>o.credential),[s.path]);for(let o of i){let a=(0,VP.getIssuerString)(o.value);o&&o.value&&(0,VP.getSubjectIdsAsString)(o.value).every(u=>u===a)?this.getResults().push(this.generateSuccessResult(n,s.path,LK.CredentialMapper.toWrappedVerifiableCredential(o.value))):this.getResults().push(this.generateErrorResult(n,s.path,LK.CredentialMapper.toWrappedVerifiableCredential(o.value)))}}})}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:UK.Status.ERROR,message:KK.default.SUBJECT_IS_NOT_ISSUER,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:UK.Status.INFO,message:s??KK.default.SUBJECT_IS_ISSUER,verifiable_credential_path:r,payload:{format:n.format}}}};Wf.SubjectIsIssuerEvaluationHandler=zP});var zK,JK=dt(()=>{zK="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"});var GK={};Cr(GK,{customAlphabet:()=>Ibe,customRandom:()=>WK,nanoid:()=>Fbe,random:()=>HK,urlAlphabet:()=>zK});var HK,WK,Ibe,Fbe,ZK=dt(()=>{JK();HK=t=>crypto.getRandomValues(new Uint8Array(t)),WK=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,s=-~(1.6*n*e/t.length);return(i=e)=>{let o="";for(;;){let a=r(s),u=s;for(;u--;)if(o+=t[a[u]&n]||"",o.length===i)return o}}},Ibe=(t,e=21)=>WK(t,e,HK),Fbe=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"")});var XK=b(Zf=>{"use strict";var kbe=Zf&&Zf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zf,"__esModule",{value:!0});Zf.UriEvaluationHandler=void 0;var JP=Li(),Pl=ys(),Rbe=(ZK(),MT(GK)),bm=Nr(),qw=ll(),Lw=kbe(ms()),$be=Vi(),Gf=class t extends $be.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"UriEvaluation"}handle(e,r){var n,s,i;e.input_descriptors.forEach((u,c)=>{let l=e.getVersion()!==qw.PEVersion.v2?u.schema.map(d=>d.uri):[];r.forEach((d,p)=>{let f=t.buildVcContextAndSchemaUris(d.credential,e.getVersion());this.evaluateUris(d,f,l,c,p,e.getVersion())})});let o=((n=e.format)===null||n===void 0?void 0:n.di)||((s=e.format)===null||s===void 0?void 0:s.di_vc)||((i=e.format)===null||i===void 0?void 0:i.di_vp),a=this.getResults().filter(u=>u.status===bm.Status.INFO).map(u=>{var c,l,d,p;let f=(c=u.payload)===null||c===void 0?void 0:c.format;if(o&&(f==="ldp_vc"||f==="ldp")){let _=JP.JSONPath.nodes(r,u.verifiable_credential_path).map(E=>E.value).map(E=>E.type!==Pl.OriginalType.JSONLD||!E.credential.proof?[]:(Array.isArray(E.credential.proof)?E.credential.proof:[E.credential.proof]).filter(C=>C.type==="DataIntegrityProof"&&C.cryptosuite!==void 0)).reduce((E,S)=>E.filter(P=>S.includes(P))),D=JP.JSONPath.nodes(e,u.input_descriptor_path)[0].value,v=!D.format||((l=D?.format)===null||l===void 0?void 0:l.di)||((d=D?.format)===null||d===void 0?void 0:d.di_vc)||((p=D?.format)===null||p===void 0?void 0:p.di_vp);_.length>0&&v&&(f="di_vc")}return{id:JP.JSONPath.nodes(e,u.input_descriptor_path)[0].value.id,format:f,path:u.verifiable_credential_path}});this.client.generatePresentationSubmission&&(!this.presentationSubmission||Object.keys(this.presentationSubmission).length===0)&&(this.presentationSubmission={id:(0,Rbe.nanoid)(),definition_id:e.id,descriptor_map:a})}evaluateUris(e,r,n,s,i,o){let a=!1;if(o===qw.PEVersion.v1){for(let u=0;u<n.length;u++)t.containsHashlink(n[u])&&this.getResults().push(this.createWarnResultObject(s,i));for(let u=0;u<r.length;u++)n.find(c=>c===r[u])!=null&&(a=!0)}else a=!0;a?this.getResults().push(this.createSuccessResultObject(e,n,s,i)):this.getResults().push(this.createErrorResultObject(e,n,s,i))}static buildVcContextAndSchemaUris(e,r){let n=[];return Pl.CredentialMapper.isW3cCredential(e)&&(Array.isArray(e["@context"])?e["@context"].forEach(s=>n.push(s)):n.push(e["@context"]),Array.isArray(e.credentialSchema)&&e.credentialSchema.length>0?e.credentialSchema.forEach(s=>n.push(s.id)):e.credentialSchema&&n.push(e.credentialSchema.id),r===qw.PEVersion.v1&&(Array.isArray(e.type)?e.type.forEach(s=>n.push(s)):e.type&&n.push(e.type))),Pl.CredentialMapper.isSdJwtDecodedCredential(e)&&r===qw.PEVersion.v1&&n.push(e.decodedPayload.vct),n}createSuccessResultObject(e,r,n,s){let i=this.createResult(n,s);return i.status=bm.Status.INFO,i.message=Lw.default.URI_EVALUATION_PASSED,i.payload={format:e.format,vcContext:Pl.CredentialMapper.isW3cCredential(e.credential)?e.credential["@context"]:void 0,vcCredentialSchema:Pl.CredentialMapper.isW3cCredential(e.credential)?e.credential.credentialSchema:void 0,inputDescriptorsUris:r},i}createErrorResultObject(e,r,n,s){let i=this.createResult(n,s);return i.status=bm.Status.ERROR,i.message=Lw.default.URI_EVALUATION_DIDNT_PASS,i.payload={format:e.format,vcContext:Pl.CredentialMapper.isW3cCredential(e.credential)?e.credential["@context"]:void 0,vcCredentialSchema:Pl.CredentialMapper.isW3cCredential(e.credential)?e.credential.credentialSchema:void 0,inputDescriptorsUris:r},i}createWarnResultObject(e,r){let n=this.createResult(e,r);return n.status=bm.Status.WARN,n.message=Lw.default.URI_EVALUATION_DIDNT_PASS,n.payload=Lw.default.INPUT_DESCRIPTOR_CONTEXT_CONTAINS_HASHLINK_VERIFICATION_NOT_SUPPORTED,n}createResult(e,r){return{input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:bm.Status.INFO,message:void 0}}static containsHashlink(e){return!(this.matchAll(e,t.HASHLINK_QUERY_URL_REGEX).next().done&&this.matchAll(e,t.HASHLINK_URL_ENCODED_REGEX).next().done)}};Zf.UriEvaluationHandler=Gf;Gf.matchAll=JD();Gf.HASHLINK_URL_ENCODED_REGEX=/hl:[a-zA-Z0-9]+:[a-zA-Z0-9]+/g;Gf.HASHLINK_QUERY_URL_REGEX=/https*?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)(hl=[a-zA-Z0-9]+)/g});var eV=b(Xf=>{"use strict";var jbe=Xf&&Xf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xf,"__esModule",{value:!0});Xf.FormatRestrictionEvaluationHandler=void 0;var YK=Nr(),QK=jbe(ms()),Nbe=Vi(),HP=class extends Nbe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"FormatRestrictionEvaluation"}handle(e,r){let n=this.client.restrictToFormats?Object.keys(this.client.restrictToFormats):void 0;e.input_descriptors.forEach((s,i)=>{r.forEach((o,a)=>{let u="format"in s&&s.format?Object.keys(s.format):[o.format],c=n??u;"format"in s&&s.format&&n!==void 0&&(c=Object.keys(s.format).filter(l=>n.includes(l))),c.includes(o.format)?this.getResults().push(this.generateSuccessResult(i,`$[${a}]`,o,`${o.format} is allowed from ${JSON.stringify(c)}`)):this.getResults().push(this.generateErrorResult(i,`$[${a}]`,o))})}),this.updatePresentationSubmission(e)}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:YK.Status.ERROR,message:QK.default.FORMAT_RESTRICTION_DIDNT_PASS,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:YK.Status.INFO,message:s??QK.default.FORMAT_RESTRICTION_PASSED,verifiable_credential_path:r,payload:{format:n.format}}}};Xf.FormatRestrictionEvaluationHandler=HP});var iV=b(Yf=>{"use strict";var Mbe=Yf&&Yf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yf,"__esModule",{value:!0});Yf.DIDRestrictionEvaluationHandler=void 0;var tV=ys(),rV=Nr(),nV=Mbe(ms()),qbe=Ui(),Lbe=Vi(),WP=class extends Lbe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"DIDRestrictionEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{r.forEach((i,o)=>{let a=this.getIssuerIdFromWrappedVerifiableCredential(i);!this.client.hasRestrictToDIDMethods()||!a||(0,qbe.isRestrictedDID)(a,this.client.restrictToDIDMethods)||!a.toLowerCase().startsWith("did:")?this.getResults().push(this.generateSuccessResult(s,`$[${o}]`,i,`${a} is allowed`)):this.getResults().push(this.generateErrorResult(s,`$[${o}]`,i))})}),this.updatePresentationSubmission(e)}getIssuerIdFromWrappedVerifiableCredential(e){if(tV.CredentialMapper.isW3cCredential(e.credential))return typeof e.credential.issuer=="object"?e.credential.issuer.id:e.credential.issuer;if(tV.CredentialMapper.isSdJwtDecodedCredential(e.credential))return e.credential.decodedPayload.iss;throw new Error("Unsupported credential type")}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:rV.Status.ERROR,message:nV.default.FORMAT_RESTRICTION_DIDNT_PASS,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:rV.Status.INFO,message:s??nV.default.FORMAT_RESTRICTION_PASSED,verifiable_credential_path:r,payload:{format:n.format}}}};Yf.DIDRestrictionEvaluationHandler=WP});var sV=b(Gr=>{"use strict";var Ube=Gr&&Gr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Gi=Gr&&Gr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ube(e,t,r)};Object.defineProperty(Gr,"__esModule",{value:!0});Gi(Vi(),Gr);Gi(yq(),Gr);Gi(s7(),Gr);Gi(kK(),Gr);Gi(RK(),Gr);Gi(jK(),Gr);Gi(NK(),Gr);Gi(qK(),Gr);Gi(VK(),Gr);Gi(XK(),Gr);Gi(eV(),Gr);Gi(iV(),Gr)});var XP=b(Qf=>{"use strict";var Kbe=Qf&&Qf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qf,"__esModule",{value:!0});Qf.EvaluationClient=void 0;var Vbe=ys(),zbe=Nr(),Jbe=Kbe(ms()),GP=Ui(),So=sV(),oV=[Vbe.IProofType.BbsBlsSignatureProof2020,"DataIntegrityProof.anoncreds-2023"],ZP=class{constructor(){this.failed_catched={tag:"root",status:zbe.Status.ERROR,message:Jbe.default.UNKNOWN_EXCEPTION,stacktrace:""},this._results=[],this._wrappedVcs=[],this._presentationSubmission={},this._dids=[],this._limitDisclosureSignatureSuites=oV,this._restrictToDIDMethods=[],this._generatePresentationSubmission=!0}evaluate(e,r,n){this._restrictToDIDMethods=n?.restrictToDIDMethods?(0,GP.uniformDIDMethods)(n?.restrictToDIDMethods):[],this._dids=n?.holderDIDs?(0,GP.filterToRestrictedDIDs)(n.holderDIDs,this._restrictToDIDMethods):[],this._limitDisclosureSignatureSuites=n?.limitDisclosureSignatureSuites,this._restrictToFormats=n?.restrictToFormats,this._generatePresentationSubmission=n?.generatePresentationSubmission!==void 0?n.generatePresentationSubmission:!0,n?.presentationSubmission&&(this._presentationSubmission=n.presentationSubmission);let s=this.initEvaluationHandlers();for(s?.handle(e,r);s?.hasNext();){s=s.getNext();try{s?.handle(e,r)}catch(i){throw this.failed_catched.message+=i.message,this.failed_catched.stacktrace=i,this.failed_catched}}}get results(){return this._results}get dids(){return this._dids}set dids(e){this._dids=e}assertPresentationSubmission(){if(typeof this._presentationSubmission=="string"&&(console.log("Presentation submission present, but as string not object. External calls did not follow contract. Correcting"),this._presentationSubmission=JSON.parse(this._presentationSubmission)),!this.generatePresentationSubmission&&(!this.presentationSubmission||Object.keys(this.presentationSubmission).length===0))throw Error("No presentation submission present, but required option was set")}get generatePresentationSubmission(){return this._generatePresentationSubmission}set generatePresentationSubmission(e){this._generatePresentationSubmission=e}get presentationSubmission(){return this._presentationSubmission}set presentationSubmission(e){this._presentationSubmission=e}get wrappedVcs(){return this._wrappedVcs}set wrappedVcs(e){this._wrappedVcs=e}get limitDisclosureSignatureSuites(){return this._limitDisclosureSignatureSuites||oV}set limitDisclosureSignatureSuites(e){this._limitDisclosureSignatureSuites=e}get restrictToDIDMethods(){return this._restrictToDIDMethods}set restrictToDIDMethods(e){this._restrictToDIDMethods=(0,GP.uniformDIDMethods)(e)}hasRestrictToDIDMethods(){return this.restrictToDIDMethods&&this.restrictToDIDMethods.length>0}get restrictToFormats(){return this._restrictToFormats}set restrictToFormats(e){this._restrictToFormats=e}initEvaluationHandlers(){let e=new So.UriEvaluationHandler(this);return e.setNext(new So.DIDRestrictionEvaluationHandler(this)).setNext(new So.FormatRestrictionEvaluationHandler(this)).setNext(new So.InputDescriptorFilterEvaluationHandler(this)).setNext(new So.PredicateRelatedFieldEvaluationHandler(this)).setNext(new So.LimitDisclosureEvaluationHandler(this)).setNext(new So.SubjectIsIssuerEvaluationHandler(this)).setNext(new So.SubjectIsHolderEvaluationHandler(this)).setNext(new So.SameSubjectEvaluationHandler(this)).setNext(new So.MarkForSubmissionEvaluationHandler(this)),e}};Qf.EvaluationClient=ZP});var cV=b(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.KeyEncoding=ep.PresentationSubmissionLocation=void 0;var aV;(function(t){t[t.EXTERNAL=0]="EXTERNAL",t[t.PRESENTATION=1]="PRESENTATION"})(aV||(ep.PresentationSubmissionLocation=aV={}));var uV;(function(t){t.Jwk="Jwk",t.Base58="Base58",t.Hex="Hex",t.Multibase="Multibase"})(uV||(ep.KeyEncoding=uV={}))});var tp=b(Ol=>{"use strict";var Hbe=Ol&&Ol.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Wbe=Ol&&Ol.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Hbe(e,t,r)};Object.defineProperty(Ol,"__esModule",{value:!0});Wbe(cV(),Ol)});var dV=b(Kw=>{"use strict";Object.defineProperty(Kw,"__esModule",{value:!0});Kw.EvaluationClientWrapper=void 0;var Uw=Li(),rp=Ca(),Gbe=ys(),Ve=Nr(),lV=tp(),YP=Ui(),Zbe=XP(),QP=class{constructor(){this._client=new Zbe.EvaluationClient}getEvaluationClient(){return this._client}selectFrom(e,r,n){var s;let i;this._client.evaluate(e,r,n);let o=[...this.formatNotInfo(Ve.Status.WARN)],a=[...this.formatNotInfo(Ve.Status.ERROR)];if(e.submission_requirements){let u=this._client.results.filter(h=>h.evaluator==="MarkForSubmissionEvaluation"&&h.payload.group&&h.status!==Ve.Status.ERROR),c=Array.from(new Set(u)),l;try{l=this.matchSubmissionRequirements(e,e.submission_requirements,c)}catch(h){let m={status:Ve.Status.ERROR,message:JSON.stringify(h),tag:"matchSubmissionRequirements"};return{errors:a?[...a,m]:[m],warnings:o,areRequiredCredentialsPresent:Ve.Status.ERROR}}let p=this.extractMatches(l).map(h=>Uw.JSONPath.nodes(this._client.wrappedVcs.map(m=>m.original),h)[0].value),f=this.determineAreRequiredCredentialsPresent(e,l);i={errors:f===Ve.Status.INFO?[]:a,matches:[...l],areRequiredCredentialsPresent:f,verifiableCredential:p,warnings:o}}else{let u=this._client.results.filter(l=>l.evaluator==="MarkForSubmissionEvaluation"&&l.status!==Ve.Status.ERROR);if(this.checkWithoutSubmissionRequirements(u,e).length)return{errors:a,matches:[],areRequiredCredentialsPresent:Ve.Status.ERROR,verifiableCredential:r.map(l=>l.original),warnings:o};{let l=this.matchWithoutSubmissionRequirements(u,e),p=this.extractMatches(l).map(f=>Uw.JSONPath.nodes(this._client.wrappedVcs.map(h=>h.original),f)[0].value);i={errors:[],matches:[...l],areRequiredCredentialsPresent:Ve.Status.INFO,verifiableCredential:p,warnings:o}}}return this.fillSelectableCredentialsToVerifiableCredentialsMapping(i,r),i.areRequiredCredentialsPresent=this.determineAreRequiredCredentialsPresent(e,i?.matches),this.remapMatches(r.map(u=>u.original),i.matches,i?.verifiableCredential),(s=i.matches)===null||s===void 0||s.forEach(u=>{this.updateSubmissionRequirementMatchPathToAlias(u,"verifiableCredential")}),i.areRequiredCredentialsPresent===Ve.Status.INFO?i.errors=[]:(i.errors=a,i.warnings=o,i.verifiableCredential=r.map(u=>u.original)),i}remapMatches(e,r,n){r?.forEach(s=>{s.from_nested?this.remapMatches(e,s.from_nested,n):(s.vc_path.forEach((i,o,a)=>{let u=Uw.JSONPath.query(e,i)[0],c=n?.findIndex(l=>JSON.stringify(l)===JSON.stringify(u));if(c===-1)throw new Error(`The index of the VerifiableCredential in your current call can't be found in your previously submitted credentials. Are you trying to send a new Credential?
verifiableCredential: ${u}`);a[o]=`$[${c}]`}),s.name)})}extractMatches(e){let r=[];return e.forEach(n=>{r.push(...n.vc_path),n.from_nested&&r.push(...this.extractMatches(n.from_nested))}),Array.from(new Set(r))}checkWithoutSubmissionRequirements(e,r){let n=[];if(!r.input_descriptors)return[];if(!e.length)return[{input_descriptor_path:"",evaluator:"checkWithoutSubmissionRequirement",verifiable_credential_path:"",status:Ve.Status.ERROR,payload:"Not all the InputDescriptors are addressed"}];let s=r.input_descriptors,i=YP.ObjectUtils.getDistinctFieldInObject(e,"input_descriptor_path");if(i.length!==s.length){let o=i.map(a=>YP.JsonPathUtils.extractInputField(r,[a])[0].value).map(a=>a.id);for(let a=0;a<r.input_descriptors.length;a++)o.indexOf(r.input_descriptors[a].id)==-1&&n.push({input_descriptor_path:`$.input_descriptors[${a}]`,evaluator:"checkWithoutSubmissionRequirement",verifiable_credential_path:"",status:Ve.Status.ERROR,payload:"Not all the InputDescriptors are addressed"})}return n}matchSubmissionRequirements(e,r,n){let s=[];for(let i of r){let o={name:e.name||e.id,rule:i.rule,vc_path:[]};if(i.from&&(o.from=i.from),i.min&&(o.min=i.min),i.max&&(o.max=i.max),i.count&&(o.count=i.count),i.from){let a=this.mapMatchingDescriptors(e,i,n);a&&(o.vc_path.push(...a.vc_path),o.name=a.name,s.push(o))}else if(i.from_nested)try{o.from_nested=this.matchSubmissionRequirements(e,i.from_nested,n),s.push(o)}catch(a){throw new Error(`Error in handling value of from_nested: ${i.from_nested}: err: ${a}`)}else throw new Error("Invalid SubmissionRequirement object: Must contain either 'from' or 'from_nested'")}return s}matchWithoutSubmissionRequirements(e,r){let n=[],s=this.createIdToVcMap(e);for(let[i,o]of s.entries())if(!(!o||!o.length))for(let a of o){let u=YP.JsonPathUtils.extractInputField(r,[i]);u.length&&n.push({name:u[0].value.name||u[0].value.id,rule:rp.Rules.All,vc_path:[a]})}return this.removeDuplicateSubmissionRequirementMatches(n)}mapMatchingDescriptors(e,r,n){var s;let i={rule:r.rule,vc_path:[]};if(r?.from){i.from=r.from;for(let o of n){let a=Uw.JSONPath.query(e,o.input_descriptor_path)[0];a.group&&a.group.indexOf(r.from)===-1||(i.name=a.name||a.id,o.payload.group.includes(r.from)&&((s=i.vc_path)===null||s===void 0?void 0:s.indexOf(o.verifiable_credential_path))===-1&&i.vc_path.push(o.verifiable_credential_path))}}return i}evaluate(e,r,n){var s,i,o,a;this._client.evaluate(e,r,n);let u={areRequiredCredentialsPresent:Ve.Status.INFO,verifiableCredential:r.map(c=>c.original)};if(u.warnings=this.formatNotInfo(Ve.Status.WARN),u.errors=this.formatNotInfo(Ve.Status.ERROR),this._client.assertPresentationSubmission(),!((s=this._client.presentationSubmission)===null||s===void 0)&&s.descriptor_map.length){let c=(i=this._client.presentationSubmission)===null||i===void 0?void 0:i.descriptor_map.length;for(let l=0;l<c;l++)this._client.presentationSubmission.descriptor_map[l]&&this._client.presentationSubmission.descriptor_map.push(this._client.presentationSubmission.descriptor_map[l]);this._client.presentationSubmission.descriptor_map.splice(0,c),u.value=JSON.parse(JSON.stringify(this._client.presentationSubmission))}return this._client.generatePresentationSubmission&&this.updatePresentationSubmissionPathToVpPath(u.value),u.verifiableCredential=this._client.wrappedVcs.map(c=>c.original),u.areRequiredCredentialsPresent=!((a=(o=u.value)===null||o===void 0?void 0:o.descriptor_map)===null||a===void 0)&&a.length?Ve.Status.INFO:Ve.Status.ERROR,u}formatNotInfo(e){return this._client.results.filter(r=>r.status===e).map(r=>{let n=r.verifiable_credential_path.substring(1);return{tag:r.evaluator,status:r.status,message:`${r.message}: ${r.input_descriptor_path}: $.verifiableCredential${n}`}})}submissionFrom(e,r,n){if(!this._client.results.length)throw Error("You need to call evaluate() before pex.presentationFrom()");if(!this._client.generatePresentationSubmission)return this._client.presentationSubmission;if(e.submission_requirements){let o=this._client.results.filter(p=>p.evaluator==="MarkForSubmissionEvaluation"&&p.payload.group&&p.status!==Ve.Status.ERROR),[a,u]=this.matchUserSelectedVcs(o,r),c=new Map;"input_descriptors"in e&&e.input_descriptors.forEach(p=>{p.group&&p.group.forEach(f=>{c.has(f)?c.set(f,c.get(f)+1):c.set(f,1)})});let l=this.evaluateRequirements(e.submission_requirements,a,c,0),d=u.filter(p=>l[1].find(f=>f.verifiable_credential_path===p[1]));return this.updatePresentationSubmission(d),this.updatePresentationSubmissionPathToVpPath(),n?.presentationSubmissionLocation===lV.PresentationSubmissionLocation.EXTERNAL&&this.updatePresentationSubmissionToExternal(),this._client.presentationSubmission}let s=this._client.results.filter(o=>o.evaluator==="MarkForSubmissionEvaluation"&&o.status!==Ve.Status.ERROR),i=this.matchUserSelectedVcs(s,r);return this.updatePresentationSubmission(i[1]),this.updatePresentationSubmissionPathToVpPath(),n?.presentationSubmissionLocation===lV.PresentationSubmissionLocation.EXTERNAL&&this.updatePresentationSubmissionToExternal(),this._client.presentationSubmission}updatePresentationSubmission(e){this._client.generatePresentationSubmission&&(this._client.presentationSubmission.descriptor_map=this._client.presentationSubmission.descriptor_map.filter(r=>e.find(n=>n[0]===r.path)).map(r=>{let n=e.find(s=>s[0]===r.path);return n&&(r.path=n[1]),r}))}updatePresentationSubmissionToExternal(){let e=this._client.presentationSubmission.descriptor_map;this._client.presentationSubmission.descriptor_map=e.map(r=>{if(r.path_nested)return r;if(r.format==="vc+sd-jwt")return r;let n=r.format,s=Object.assign({},r);return s.path_nested=Object.assign({},r),s.path="$",n.startsWith("ldp_")?s.format="ldp_vp":n.startsWith("di_")?s.format="di_vp":n==="jwt_vc"?(s.format="jwt_vp",s.path_nested.path=s.path_nested.path.replace("$.verifiableCredential[","$.vp.verifiableCredential[")):n==="jwt_vc_json"&&(s.format="jwt_vp_json",s.path_nested.path=s.path_nested.path.replace("$.verifiableCredential[","$.vp.verifiableCredential[")),s})}matchUserSelectedVcs(e,r){let n=r.map((o,a)=>[a,JSON.stringify(o.original)]),s=this._client.wrappedVcs.map((o,a)=>[a,JSON.stringify(o.original)]),i=[];return n.forEach((o,a)=>{s.forEach((u,c)=>{u[1]===o[1]&&i.push([`$[${c}]`,`$[${a}]`])})}),e=e.filter(o=>i.find(a=>a[0]===o.verifiable_credential_path)).map(o=>{let a=i.find(u=>u[0]===o.verifiable_credential_path);return a&&(o.verifiable_credential_path=a[1]),o}),[e,i]}evaluateRequirements(e,r,n,s){let i=0,o=[];for(let a of e)if(a.from){if(a.rule===rp.Rules.All){let[u,c]=this.countMatchingInputDescriptors(a,r);if(u!==(n.get(a.from)||0))throw Error(`Not all input descriptors are members of group ${a.from}`);i++,o.push(...c)}else if(a.rule===rp.Rules.Pick){let[u,c]=this.countMatchingInputDescriptors(a,r);try{this.handleCount(a,u,s),i++}catch(l){if(s===0)throw l}o.push(...c)}}else if(a.from_nested){let[u,c]=this.evaluateRequirements(a.from_nested,r,n,++s);i+=u,o.push(...c),this.handleCount(a,u,s)}return[i,o]}countMatchingInputDescriptors(e,r){let n=0,s=[];for(let i of r)i.payload.group.includes(e.from)&&(s.push(i),n++);return[n,s]}handleCount(e,r,n){if(e.count&&r!==e.count)throw Error(`Count: expected: ${e.count} actual: ${r} at level: ${n}`);if(e.min&&r<e.min)throw Error(`Min: expected: ${e.min} actual: ${r} at level: ${n}`);if(e.max&&r>e.max)throw Error(`Max: expected: ${e.max} actual: ${r} at level: ${n}`)}removeDuplicateSubmissionRequirementMatches(e){return e.filter((r,n)=>{let s=JSON.stringify(r);return n===e.findIndex(i=>JSON.stringify(i)===s)})}fillSelectableCredentialsToVerifiableCredentialsMapping(e,r){var n;e&&((n=e.verifiableCredential)===null||n===void 0||n.forEach(s=>{var i;let o=r.findIndex(a=>Gbe.CredentialMapper.areOriginalVerifiableCredentialsEqual(a.original,s));if(o===-1)throw new Error("index is not right");(i=e.vcIndexes)===null||i===void 0||i.push(o)}))}determineAreRequiredCredentialsPresent(e,r,n){if(!r||!r.length)return Ve.Status.ERROR;let s=r.map(i=>this.determineSubmissionRequirementStatus(e,i));if(n){if(n.rule===rp.Rules.All&&s.includes(Ve.Status.ERROR))return Ve.Status.ERROR;let i=s.filter(o=>o!==Ve.Status.ERROR).length;if(n.count)return n.count>i?Ve.Status.ERROR:n.count<i?Ve.Status.WARN:Ve.Status.INFO;if(n.min&&n.min>i)return Ve.Status.ERROR;if(n.max&&n.max<i)return Ve.Status.WARN}else return s.includes(Ve.Status.ERROR)?Ve.Status.ERROR:s.includes(Ve.Status.WARN)?Ve.Status.WARN:Ve.Status.INFO;return Ve.Status.INFO}determineSubmissionRequirementStatus(e,r){if(r.from&&r.from_nested)throw new Error("Invalid submission_requirement object: MUST contain either a from or from_nested property.");if(!r.from&&!r.from_nested&&r.vc_path.length!==1)return Ve.Status.ERROR;if(r.from){let n=this.countGroupIDs(e.input_descriptors,r.from);switch(r.rule){case rp.Rules.All:return r.vc_path.length===n?Ve.Status.INFO:Ve.Status.WARN;case rp.Rules.Pick:return this.getPickRuleStatus(r);default:return Ve.Status.ERROR}}else if(r.from_nested)return this.determineAreRequiredCredentialsPresent(e,r.from_nested,r);return Ve.Status.INFO}getPickRuleStatus(e){return e.vc_path.length===0?Ve.Status.ERROR:e.count&&e.vc_path.length!==e.count?e.vc_path.length>e.count?Ve.Status.WARN:Ve.Status.ERROR:e.min&&e.vc_path.length<e.min?Ve.Status.ERROR:e.max&&e.vc_path.length>e.max?Ve.Status.WARN:Ve.Status.INFO}updateSubmissionRequirementMatchPathToAlias(e,r){let n=[];e.vc_path.forEach(s=>{n.push(s.replace("$","$."+r))}),e.vc_path=n,e.from_nested&&e.from_nested.forEach(s=>{this.updateSubmissionRequirementMatchPathToAlias(s,r)})}updatePresentationSubmissionPathToVpPath(e){let r=e?e.descriptor_map:this._client.generatePresentationSubmission?this._client.presentationSubmission.descriptor_map:void 0;r?.forEach(n=>{n.format==="vc+sd-jwt"?n.path="$":this.replacePathWithAlias(n,"verifiableCredential")})}replacePathWithAlias(e,r){e.path=e.path.replace("$[",`$.${r}[`),e.path_nested&&this.replacePathWithAlias(e.path_nested,r)}createIdToVcMap(e){let r=new Map,n=new Map;for(let s=0;s<e.length;s++){let i=e[s].input_descriptor_path;if(n.has(i)){let o=n.get(i);o&&o.push(e[s])}else n.set(i,[e[s]])}for(let[s,i]of n.entries()){let o=[];for(let a=0;a<i.length;a++)o.indexOf(i[a].verifiable_credential_path)===-1&&o.push(i[a].verifiable_credential_path);r.set(s,o)}return r}countGroupIDs(e,r){let n=0;for(let s of e)s.group&&s.group.includes(r)&&n++;return n}};Kw.EvaluationClientWrapper=QP});var wm=b(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.HandlerCheckResult=Lu.EvaluationClientWrapper=Lu.EvaluationClient=void 0;var Xbe=C6();Object.defineProperty(Lu,"HandlerCheckResult",{enumerable:!0,get:function(){return Xbe.HandlerCheckResult}});var Ybe=XP();Object.defineProperty(Lu,"EvaluationClient",{enumerable:!0,get:function(){return Ybe.EvaluationClient}});var Qbe=dV();Object.defineProperty(Lu,"EvaluationClientWrapper",{enumerable:!0,get:function(){return Qbe.EvaluationClientWrapper}})});var fV=b((hje,nO)=>{"use strict";nO.exports=rO;nO.exports.default=rO;var Ir={additionalProperties:!1,properties:{const:{$ref:"#/definitions/OneOfNumberStringBoolean"},enum:{items:{$ref:"#/definitions/OneOfNumberString"},type:"array"},exclusiveMaximum:{$ref:"#/definitions/OneOfNumberString"},exclusiveMinimum:{$ref:"#/definitions/OneOfNumberString"},format:{type:"string"},maxLength:{type:"number"},maximum:{$ref:"#/definitions/OneOfNumberString"},minLength:{type:"number"},minimum:{$ref:"#/definitions/OneOfNumberString"},not:{type:"object"},pattern:{type:"string"},type:{type:"string"}},required:["type"],type:"object"},ewe=Object.prototype.hasOwnProperty,eO={type:["number","string","boolean"]};function Vw(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"&&typeof t!="boolean"){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:eO.type},message:"must be number,string,boolean",schema:eO.type,parentSchema:eO,data:t};i===null?i=[a]:i.push(a),o++}return Vw.errors=i,o===0}var tO={type:["number","string"]};function Sn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:tO.type},message:"must be number,string",schema:tO.type,parentSchema:tO,data:t};i===null?i=[a]:i.push(a),o++}return Sn.errors=i,o===0}function zw(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:Ir.required,parentSchema:Ir,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!ewe.call(Ir.properties,a)){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Ir,data:t};i===null?i=[u]:i.push(u),o++}if(t.const!==void 0&&(Vw(t.const,{instancePath:e+"/const",parentData:t,parentDataProperty:"const",rootData:s})||(i=i===null?Vw.errors:i.concat(Vw.errors),o=i.length)),t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)Sn(a[c],{instancePath:e+"/enum/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?Sn.errors:i.concat(Sn.errors),o=i.length)}else{let u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ir.properties.enum.type,parentSchema:Ir.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0&&(Sn(t.exclusiveMaximum,{instancePath:e+"/exclusiveMaximum",parentData:t,parentDataProperty:"exclusiveMaximum",rootData:s})||(i=i===null?Sn.errors:i.concat(Sn.errors),o=i.length)),t.exclusiveMinimum!==void 0&&(Sn(t.exclusiveMinimum,{instancePath:e+"/exclusiveMinimum",parentData:t,parentDataProperty:"exclusiveMinimum",rootData:s})||(i=i===null?Sn.errors:i.concat(Sn.errors),o=i.length)),t.format!==void 0){let a=t.format;if(typeof a!="string"){let u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ir.properties.format.type,parentSchema:Ir.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(typeof a!="number"){let u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Ir.properties.maxLength.type,parentSchema:Ir.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0&&(Sn(t.maximum,{instancePath:e+"/maximum",parentData:t,parentDataProperty:"maximum",rootData:s})||(i=i===null?Sn.errors:i.concat(Sn.errors),o=i.length)),t.minLength!==void 0){let a=t.minLength;if(typeof a!="number"){let u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Ir.properties.minLength.type,parentSchema:Ir.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0&&(Sn(t.minimum,{instancePath:e+"/minimum",parentData:t,parentDataProperty:"minimum",rootData:s})||(i=i===null?Sn.errors:i.concat(Sn.errors),o=i.length)),t.not!==void 0){let a=t.not;if(!(a&&typeof a=="object"&&!Array.isArray(a))){let u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ir.properties.not.type,parentSchema:Ir.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){let u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ir.properties.pattern.type,parentSchema:Ir.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){let u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ir.properties.type.type,parentSchema:Ir.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ir.type,parentSchema:Ir,data:t};i===null?i=[a]:i.push(a),o++}return zw.errors=i,o===0}function rO(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return zw(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?zw.errors:i.concat(zw.errors),o=i.length),rO.errors=i,o===0}});var pV=b((yje,aO)=>{"use strict";aO.exports=oO;aO.exports.default=oO;var Ft={additionalProperties:!1,properties:{const:{$ref:"#/definitions/OneOfNumberStringBoolean"},contains:{$ref:"#/definitions/FilterV2"},enum:{items:{$ref:"#/definitions/OneOfNumberString"},type:"array"},exclusiveMaximum:{$ref:"#/definitions/OneOfNumberString"},exclusiveMinimum:{$ref:"#/definitions/OneOfNumberString"},format:{type:"string"},formatExclusiveMaximum:{type:"string"},formatExclusiveMinimum:{type:"string"},formatMaximum:{type:"string"},formatMinimum:{type:"string"},items:{anyOf:[{$ref:"#/definitions/FilterV2"},{items:{$ref:"#/definitions/FilterV2"},minItems:1,type:"array"}]},maxLength:{type:"number"},maximum:{$ref:"#/definitions/OneOfNumberString"},minLength:{type:"number"},minimum:{$ref:"#/definitions/OneOfNumberString"},not:{type:"object"},pattern:{type:"string"},type:{type:"string"}},type:"object"},twe=Object.prototype.hasOwnProperty,iO={type:["number","string","boolean"]};function Jw(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"&&typeof t!="boolean"){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:iO.type},message:"must be number,string,boolean",schema:iO.type,parentSchema:iO,data:t};i===null?i=[a]:i.push(a),o++}return Jw.errors=i,o===0}var sO={type:["number","string"]};function An(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:sO.type},message:"must be number,string",schema:sO.type,parentSchema:sO,data:t};i===null?i=[a]:i.push(a),o++}return An.errors=i,o===0}var Oa={validate:_m};function _m(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(let u in t)if(!twe.call(Ft.properties,u)){let c={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Ft,data:t};i===null?i=[c]:i.push(c),o++}if(t.const!==void 0&&(Jw(t.const,{instancePath:e+"/const",parentData:t,parentDataProperty:"const",rootData:s})||(i=i===null?Jw.errors:i.concat(Jw.errors),o=i.length)),t.contains!==void 0&&(Oa.validate(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?Oa.validate.errors:i.concat(Oa.validate.errors),o=i.length)),t.enum!==void 0){let u=t.enum;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)An(u[l],{instancePath:e+"/enum/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?An.errors:i.concat(An.errors),o=i.length)}else{let c={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ft.properties.enum.type,parentSchema:Ft.properties.enum,data:u};i===null?i=[c]:i.push(c),o++}}if(t.exclusiveMaximum!==void 0&&(An(t.exclusiveMaximum,{instancePath:e+"/exclusiveMaximum",parentData:t,parentDataProperty:"exclusiveMaximum",rootData:s})||(i=i===null?An.errors:i.concat(An.errors),o=i.length)),t.exclusiveMinimum!==void 0&&(An(t.exclusiveMinimum,{instancePath:e+"/exclusiveMinimum",parentData:t,parentDataProperty:"exclusiveMinimum",rootData:s})||(i=i===null?An.errors:i.concat(An.errors),o=i.length)),t.format!==void 0){let u=t.format;if(typeof u!="string"){let c={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ft.properties.format.type,parentSchema:Ft.properties.format,data:u};i===null?i=[c]:i.push(c),o++}}if(t.formatExclusiveMaximum!==void 0){let u=t.formatExclusiveMaximum;if(typeof u!="string"){let c={instancePath:e+"/formatExclusiveMaximum",schemaPath:"#/properties/formatExclusiveMaximum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ft.properties.formatExclusiveMaximum.type,parentSchema:Ft.properties.formatExclusiveMaximum,data:u};i===null?i=[c]:i.push(c),o++}}if(t.formatExclusiveMinimum!==void 0){let u=t.formatExclusiveMinimum;if(typeof u!="string"){let c={instancePath:e+"/formatExclusiveMinimum",schemaPath:"#/properties/formatExclusiveMinimum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ft.properties.formatExclusiveMinimum.type,parentSchema:Ft.properties.formatExclusiveMinimum,data:u};i===null?i=[c]:i.push(c),o++}}if(t.formatMaximum!==void 0){let u=t.formatMaximum;if(typeof u!="string"){let c={instancePath:e+"/formatMaximum",schemaPath:"#/properties/formatMaximum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ft.properties.formatMaximum.type,parentSchema:Ft.properties.formatMaximum,data:u};i===null?i=[c]:i.push(c),o++}}if(t.formatMinimum!==void 0){let u=t.formatMinimum;if(typeof u!="string"){let c={instancePath:e+"/formatMinimum",schemaPath:"#/properties/formatMinimum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ft.properties.formatMinimum.type,parentSchema:Ft.properties.formatMinimum,data:u};i===null?i=[c]:i.push(c),o++}}if(t.items!==void 0){let u=t.items,c=o,l=!1,d=o;Oa.validate(u,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?Oa.validate.errors:i.concat(Oa.validate.errors),o=i.length);var a=d===o;if(l=l||a,!l){let p=o;if(Array.isArray(u)){if(u.length<1){let m={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Ft.properties.items.anyOf[1],data:u};i===null?i=[m]:i.push(m),o++}let h=u.length;for(let m=0;m<h;m++)Oa.validate(u[m],{instancePath:e+"/items/"+m,parentData:u,parentDataProperty:m,rootData:s})||(i=i===null?Oa.validate.errors:i.concat(Oa.validate.errors),o=i.length)}else{let h={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ft.properties.items.anyOf[1].type,parentSchema:Ft.properties.items.anyOf[1],data:u};i===null?i=[h]:i.push(h),o++}var a=p===o;l=l||a}if(l)o=c,i!==null&&(c?i.length=c:i=null);else{let p={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:Ft.properties.items.anyOf,parentSchema:Ft.properties.items,data:u};i===null?i=[p]:i.push(p),o++}}if(t.maxLength!==void 0){let u=t.maxLength;if(typeof u!="number"){let c={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Ft.properties.maxLength.type,parentSchema:Ft.properties.maxLength,data:u};i===null?i=[c]:i.push(c),o++}}if(t.maximum!==void 0&&(An(t.maximum,{instancePath:e+"/maximum",parentData:t,parentDataProperty:"maximum",rootData:s})||(i=i===null?An.errors:i.concat(An.errors),o=i.length)),t.minLength!==void 0){let u=t.minLength;if(typeof u!="number"){let c={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Ft.properties.minLength.type,parentSchema:Ft.properties.minLength,data:u};i===null?i=[c]:i.push(c),o++}}if(t.minimum!==void 0&&(An(t.minimum,{instancePath:e+"/minimum",parentData:t,parentDataProperty:"minimum",rootData:s})||(i=i===null?An.errors:i.concat(An.errors),o=i.length)),t.not!==void 0){let u=t.not;if(!(u&&typeof u=="object"&&!Array.isArray(u))){let c={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ft.properties.not.type,parentSchema:Ft.properties.not,data:u};i===null?i=[c]:i.push(c),o++}}if(t.pattern!==void 0){let u=t.pattern;if(typeof u!="string"){let c={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ft.properties.pattern.type,parentSchema:Ft.properties.pattern,data:u};i===null?i=[c]:i.push(c),o++}}if(t.type!==void 0){let u=t.type;if(typeof u!="string"){let c={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ft.properties.type.type,parentSchema:Ft.properties.type,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ft.type,parentSchema:Ft,data:t};i===null?i=[u]:i.push(u),o++}return _m.errors=i,o===0}function oO(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return _m(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?_m.errors:i.concat(_m.errors),o=i.length),oO.errors=i,o===0}});var Ps=b(Hw=>{"use strict";Object.defineProperty(Hw,"__esModule",{value:!0});Hw.ValidationBundler=void 0;var hV=Nr(),uO=class{constructor(e,r){this.parentTag=e,this.myTag=r}getTag(){return this.parentTag!=null?this.parentTag+"."+this.myTag:this.myTag}toChecked(e){return new hV.Checked(this.getTag(),hV.Status.ERROR,e)}};Hw.ValidationBundler=uO});var lO=b(np=>{"use strict";var mV=np&&np.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(np,"__esModule",{value:!0});np.FieldsVB=void 0;var rwe=Li(),yV=Ca(),nwe=mV(fV()),iwe=mV(pV()),swe=Ps(),cO=class t extends swe.ValidationBundler{constructor(e){super(e,"fields"),this.mustHaveValidJsonPathsMsg='field object "path" property must contain array of valid json paths',this.pathObjMustHaveValidJsonPathMsg='field object "path" property must contain valid json paths.',this.filterMustBeValidJsonSchemaMsg='field object "filter" property must be valid json schema',this.filterIsMustInPresenceOfPredicateMsg='field object must have a "filter" property if "predicate" is present',this.filterIsNotValidJsonSchemaDescriptorMsg='could not parse "filter" object as a valid json schema descriptor.',this.purposeShouldBeANonEmptyStringMsg="purpose should be a non empty string",this.shouldBeKnownOptionMsg="Unknown predicate property"}getValidations(e){let r=[];if(e)for(let n=0;n<e.length;n++)r=[...r,...this.getValidationsFor(e[n],n)];return r}getValidationsFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:this.mustHaveValidJsonPaths(),message:this.mustHaveValidJsonPathsMsg},{tag:this.getMyTag(r),target:e,predicate:this.filterMustBeValidJsonSchema(),message:this.filterMustBeValidJsonSchemaMsg},{tag:this.getMyTag(r),target:e,predicate:this.filterIsMustInPresenceOfPredicate(),message:this.filterIsMustInPresenceOfPredicateMsg},{tag:this.getMyTag(r),target:e,predicate:n=>t.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeANonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>t.shouldBeKnownOption(n?.predicate),message:this.shouldBeKnownOptionMsg}]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}mustHaveValidJsonPaths(){return e=>e.path!=null&&e.path.length>0&&this._validateJsonPaths(e.path)}_validateJsonPaths(e){let r=[];if(e.forEach(n=>{try{rwe.JSONPath.parse(n)}catch{r.push(n)}}),r.length>0)throw this.toChecked(this.pathObjMustHaveValidJsonPathMsg+" Got: "+JSON.stringify(r));return!0}filterMustBeValidJsonSchema(){return e=>this._validateFilter(e.filter)}_validateFilter(e){if(e==null)return!0;let r=!1;try{r=(0,iwe.default)(e),r||(r=(0,nwe.default)(e))}catch{throw this.toChecked(this.filterIsNotValidJsonSchemaDescriptorMsg+" Got "+JSON.stringify(e))}return r}filterIsMustInPresenceOfPredicate(){return e=>!(e.predicate!=null&&e.filter==null)}static optionalNonEmptyString(e){return e==null||e.length>0}static shouldBeKnownOption(e){return e==null||e==yV.Optionality.Required||e==yV.Optionality.Preferred}};np.FieldsVB=cO});var Gw=b(Ww=>{"use strict";Object.defineProperty(Ww,"__esModule",{value:!0});Ww.ConstraintsVB=void 0;var Ta=Ca(),owe=lO(),awe=Ps(),dO=class t extends awe.ValidationBundler{constructor(e){super(e,"constraints"),this.disclosureLimitShouldHaveKnownValueMsg="limit_disclosure should have known value",this.statusShouldHaveKnownValueMsg="Unknown status property",this.statusDirectiveShouldHaveKnownValueMsg="status directive should have known value",this.subjectIsIssuerShouldBeKnownValueMsg="subject_is_issuer should be known value",this.fieldIdIsMandatoryMsg="field_id property is mandatory",this.fieldIdMustBeArrayOfStringsMsg="field_id property must be an array of strings",this.fieldIdMustCorrespondToFieldIdMsg="field_id must correspond to a present field object id property",this.directivePropertyIsMandatoryMsg="directive property is mandatory",this.oneOfTheKnownDirectivePropertiesMandatoryMsg="directive property must be one of [required, preferred]"}getValidations(e){let r=[];return e&&(r=[{tag:this.getTag(),target:e,predicate:n=>t.disclosureLimitShouldHaveKnownValue(n.limit_disclosure),message:this.disclosureLimitShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>t.statusShouldHaveKnownValue(n.statuses),message:this.statusShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:t.statusDirectiveShouldHaveKnownValue(),message:this.statusDirectiveShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>t.shouldBeKnownOption(n.is_holder),message:this.subjectIsIssuerShouldBeKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>this.fieldIdInSubjectMustCorrespondToFieldId(n,n.is_holder),message:this.fieldIdMustCorrespondToFieldIdMsg},{tag:this.getTag(),target:e,predicate:n=>this.fieldIdInSubjectMustCorrespondToFieldId(n,n.same_subject),message:this.fieldIdMustCorrespondToFieldIdMsg},...this.getSubjectsValidations(e?.is_holder),...this.getSubjectsValidations(e?.same_subject),...this.getFieldsValidations(e)]),r}getFieldsValidations(e){var r;return!((r=e?.fields)===null||r===void 0)&&r.length?new owe.FieldsVB(this.getTag()).getValidations(e.fields):[]}static disclosureLimitShouldHaveKnownValue(e){return!e||e===Ta.Optionality.Preferred||e===Ta.Optionality.Required}static statusShouldHaveKnownValue(e){return e==null||e.active!=null||e.revoked!=null||e.suspended!=null}static statusDirectiveShouldHaveKnownValue(){return e=>{var r,n,s;return this.pdStatusShouldBeKnown((r=e?.statuses)===null||r===void 0?void 0:r.active)&&this.pdStatusShouldBeKnown((n=e?.statuses)===null||n===void 0?void 0:n.revoked)&&this.pdStatusShouldBeKnown((s=e?.statuses)===null||s===void 0?void 0:s.suspended)}}static pdStatusShouldBeKnown(e){return!e||e.directive===Ta.Directives.Allowed||e.directive===Ta.Directives.Disallowed||e.directive===Ta.Directives.Required}static shouldBeKnownOption(e){return e?e.filter(r=>r.directive!==Ta.Optionality.Preferred&&r.directive!==Ta.Optionality.Required).length===0:!0}getSubjectsValidations(e){if(e){let r=[];for(let n=0;n<e.length;n++)r=[{tag:this.getMyTag(n),target:e[n],predicate:s=>Array.isArray(s.field_id),message:this.fieldIdMustBeArrayOfStringsMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>!!s.field_id,message:this.fieldIdIsMandatoryMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.field_id.length===s.field_id.filter(i=>typeof i=="string").length,message:this.fieldIdMustBeArrayOfStringsMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.directive!==void 0,message:this.directivePropertyIsMandatoryMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.directive===Ta.Optionality.Preferred||s.directive===Ta.Optionality.Required,message:this.oneOfTheKnownDirectivePropertiesMandatoryMsg}];return r}return[]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}fieldIdInSubjectMustCorrespondToFieldId(e,r){if(r){for(let n of r)for(let s of n.field_id)if(!t.isValidFieldId(e,s))return!1}return!0}static isValidFieldId(e,r){return e?.fields?e.fields.map(n=>n.id).includes(r):!1}};Ww.ConstraintsVB=dO});var pO=b(Zw=>{"use strict";Object.defineProperty(Zw,"__esModule",{value:!0});Zw.InputDescriptorsV1VB=void 0;var Em=Ui(),uwe=Gw(),cwe=Ps(),fO=class extends cwe.ValidationBundler{constructor(e){super(e,"input_descriptor"),this.idMustBeNonEmptyStringMsg="input descriptor id must be non-empty string",this.nameShouldBeNonEmptyStringMsg="input descriptor name should be non-empty string",this.purposeShouldBeNonEmptyStringMsg="input descriptor purpose should be non-empty string",this.shouldHaveValidSchemaURIMsg="schema should have valid URI"}getValidations(e){let r=[];return r.push({tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueIds(n),message:"input descriptor ids must be unique"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueFieldsIds(n),message:"fields id must be unique"}),e.forEach((n,s)=>{r=[...r,...this.getValidationFor(n,s),...this.constraintsValidations(n,s)]}),r}getValidationFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:n=>Em.ObjectValidationUtils.nonEmptyString(n?.id),message:this.idMustBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:this.isValidSchema(),message:this.shouldHaveValidSchemaURIMsg},{tag:this.getMyTag(r),target:e,predicate:n=>Em.ObjectValidationUtils.optionalNonEmptyString(n?.name),message:this.nameShouldBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>Em.ObjectValidationUtils.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeNonEmptyStringMsg}]}shouldHaveUniqueFieldsIds(e){let r=[],n=new Set,s=[];return e.map(i=>{var o;return(o=i.constraints)===null||o===void 0?void 0:o.fields}).forEach(i=>{i&&s.push(...i)}),s.forEach(i=>{i.id&&r.push(i.id)}),r.forEach(i=>n.add(i)),r.length===n.size}shouldHaveUniqueIds(e){let r=[],n=new Set;return e.forEach(s=>r.push(s.id)),r.forEach(s=>n.add(s)),r.length===n.size}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}isValidSchema(){return e=>e.schema.filter(r=>this.isAValidURI(r.uri)&&(r.required==null||typeof r.required=="boolean")).length>0}isAValidURI(e){if(e){if(!Em.ObjectValidationUtils.nonEmptyString(e))return!1}else return!1;if(e.startsWith("http://")||e.startsWith("https://"))try{new URL(e)}catch{return Em.ObjectValidationUtils.isValidDIDURI(e)}return!0}constraintsValidations(e,r){return e.constraints?new uwe.ConstraintsVB(this.getMyTag(r)).getValidations(e.constraints):[]}};Zw.InputDescriptorsV1VB=fO});var mO=b(Xw=>{"use strict";Object.defineProperty(Xw,"__esModule",{value:!0});Xw.InputDescriptorsV2VB=void 0;var hO=Ui(),lwe=Gw(),dwe=Ps(),yO=class extends dwe.ValidationBundler{constructor(e){super(e,"input_descriptor"),this.idMustBeNonEmptyStringMsg="input descriptor id must be non-empty string",this.nameShouldBeNonEmptyStringMsg="input descriptor name should be non-empty string",this.purposeShouldBeNonEmptyStringMsg="input descriptor purpose should be non-empty string"}getValidations(e){let r=[];return r.push({tag:this.getTag(),target:e,predicate:n=>this.shouldNotHaveSchema(n),message:"input descriptor should not have schema property"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueIds(n),message:"input descriptor ids must be unique"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueFieldsIds(n),message:"fields id must be unique"}),e.forEach((n,s)=>{r=[...r,...this.getValidationFor(n,s),...this.constraintsValidations(n,s)]}),r}getValidationFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:n=>hO.ObjectValidationUtils.nonEmptyString(n?.id),message:this.idMustBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>hO.ObjectValidationUtils.optionalNonEmptyString(n?.name),message:this.nameShouldBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>hO.ObjectValidationUtils.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeNonEmptyStringMsg}]}shouldHaveUniqueFieldsIds(e){let r=[],n=new Set,s=[];return e.map(i=>{var o;return(o=i.constraints)===null||o===void 0?void 0:o.fields}).forEach(i=>{i&&s.push(...i)}),s.forEach(i=>{i.id&&r.push(i.id)}),r.forEach(i=>n.add(i)),r.length===n.size}shouldHaveUniqueIds(e){let r=[],n=new Set;return e.forEach(s=>r.push(s.id)),r.forEach(s=>n.add(s)),r.length===n.size}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}constraintsValidations(e,r){return e.constraints?new lwe.ConstraintsVB(this.getMyTag(r)).getValidations(e.constraints):[]}shouldNotHaveSchema(e){let r=!1;return e.forEach(n=>{n.schema&&(r=!0)}),!r}};Xw.InputDescriptorsV2VB=yO});var vO=b(Yw=>{"use strict";Object.defineProperty(Yw,"__esModule",{value:!0});Yw.JwtAlgos=void 0;var gO=class{static getJwtAlgos(){return["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512","PS256","PS384","PS512","none","RSA1_5","RSA-OAEP","RSA-OAEP-256","A128KW","A192KW","A256KW","dir","ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW","A128GCMKW","A192GCMKW","A256GCMKW","PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"]}};Yw.JwtAlgos=gO});var wO=b(Qw=>{"use strict";Object.defineProperty(Qw,"__esModule",{value:!0});Qw.LdpTypes=void 0;var bO=class{static getLdpTypes(){return["Ed25519VerificationKey2018","Ed25519Signature2018","RsaSignature2018","EcdsaSecp256k1Signature2019","EcdsaSecp256k1RecoverySignature2020","JsonWebSignature2020","GpgSignature2020","JcsEd25519Signature2020","BbsBlsSignature2020","Bls12381G2Key2020","DataIntegrityProof"]}};Qw.LdpTypes=bO});var t1=b(e1=>{"use strict";Object.defineProperty(e1,"__esModule",{value:!0});e1.SubmissionRequirementVB=void 0;var fwe=Ps(),_O=class t extends fwe.ValidationBundler{constructor(e){super(e,"submission_requirements"),this.ruleIsMandatoryMsg="rule is a mandatory field",this.needsOneFromOrFromNestedMsg="needs exactly one of from or from_nested",this.fromNestedShouldBeArrayMsg="The value of the from_nested property MUST be an array",this.isCountPositiveIntMsg="count must be a practical positive number",this.isMinPositiveIntMsg="min must be a practical positive number",this.isMaxPositiveIntMsg="max must be a practical positive number",this.ruleShouldBePickOrAllMsg="rule should be either pick or all"}getValidations(e){let r=[];if(e!=null&&e.length>0)for(let n=0;n<e.length;n++)r=[...r,...this.getMyValidations(n,e),...this.getSubValidations(n,e)];return r}getMyValidations(e,r){return[{tag:this.getMyTag(e),target:r[e],predicate:t.ruleIsMandatory,message:this.ruleIsMandatoryMsg},{tag:this.getMyTag(e),target:r[e],predicate:t.needsOneFromOrFromNested,message:this.needsOneFromOrFromNestedMsg},{tag:this.getMyTag(e),target:r[e],predicate:t.fromNestedShouldBeArray,message:this.fromNestedShouldBeArrayMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isCountPositiveInt,message:this.isCountPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isMinPositiveInt,message:this.isMinPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isMaxPositiveInt,message:this.isMaxPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:t.ruleShouldBePickOrAll,message:this.ruleShouldBePickOrAllMsg}]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}getSubValidations(e,r){let n=r[e].from_nested;return n!=null?new t(this.getFromNestedTag(e)).getValidations(n):[]}getFromNestedTag(e){return this.getMyTag(e)+".from_nested"}isCountPositiveInt(e){return e.rule!=="pick"||e.count==null||0<e.count}isMinPositiveInt(e){return e.rule!=="pick"||e.min==null||0<=e.min}isMaxPositiveInt(e){return e.rule!=="pick"||e.max==null||0<e.max}static ruleIsMandatory(e){return e.rule!=null}static needsOneFromOrFromNested(e){return e.from==null!=(e.from_nested==null)}static fromNestedShouldBeArray(e){return e.from_nested==null||Array.isArray(e.from_nested)}static ruleShouldBePickOrAll(e){return e.rule==="pick"||e.rule==="all"}};e1.SubmissionRequirementVB=_O});var vV=b(ip=>{"use strict";var pwe=ip&&ip.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ip,"__esModule",{value:!0});ip.PresentationDefinitionV1VB=void 0;var hwe=vO(),ywe=wO(),mwe=pwe(o2()),gV=pO(),gwe=t1(),vwe=Ps(),EO=class t extends vwe.ValidationBundler{constructor(e){super(e,"presentation_definition")}getValidations(e){return e.submission_requirements?[...this.myValidations(e),...new gV.InputDescriptorsV1VB(this.myTag).getValidations(e.input_descriptors),...new gwe.SubmissionRequirementVB(this.myTag).getValidations(e.submission_requirements)]:[...this.myValidations(e),...new gV.InputDescriptorsV1VB(this.myTag).getValidations(e.input_descriptors)]}myValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_definition should be non null."},{tag:this.getTag(),target:e,predicate:this.shouldBeAsPerJsonSchema(),message:"presentation_definition should be as per json schema."},{tag:this.getTag(),target:e,predicate:r=>t.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>t.optionalNonEmptyString(r?.name),message:"name should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>t.optionalNonEmptyString(r?.purpose),message:"purpose should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>t.formatValuesShouldNotBeEmpty(r?.format),message:"formats values should not empty"},{tag:this.getTag(),target:e,predicate:r=>t.formatValuesShouldBeAmongKnownValues(r?.format),message:"formats should only have known identifiers for alg or proof_type"},{tag:this.getTag(),target:e,predicate:r=>t.groupShouldMatchSubmissionRequirements(r),message:"input descriptor group should match the from in submission requirements."},{tag:this.getTag(),target:e,predicate:r=>t.shouldNotHaveFrameProperty(r),message:"input descriptor should not have frame property."}]}static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static formatValuesShouldNotBeEmpty(e){var r,n,s,i,o,a,u,c,l,d,p;let f=!0;return e?.jwt!=null&&(f=f&&((r=e.jwt.alg)===null||r===void 0?void 0:r.length)>0),e?.jwt_vc!=null&&(f=f&&((n=e.jwt_vc.alg)===null||n===void 0?void 0:n.length)>0),e?.jwt_vc_json!=null&&(f=f&&((s=e.jwt_vc_json.alg)===null||s===void 0?void 0:s.length)>0),e?.jwt_vp!=null&&(f=f&&((i=e.jwt_vp.alg)===null||i===void 0?void 0:i.length)>0),e?.jwt_vp_json!=null&&(f=f&&((o=e.jwt_vp_json.alg)===null||o===void 0?void 0:o.length)>0),e?.ldp!=null&&(f=f&&((a=e.ldp.proof_type)===null||a===void 0?void 0:a.length)>0),e?.ldp_vc!=null&&(f=f&&((u=e.ldp_vc.proof_type)===null||u===void 0?void 0:u.length)>0),e?.ldp_vp!=null&&(f=f&&((c=e.ldp_vp.proof_type)===null||c===void 0?void 0:c.length)>0),e?.di!=null&&(f=f&&((l=e.di.proof_type)===null||l===void 0?void 0:l.length)>0),e?.di_vc!=null&&(f=f&&((d=e.di_vc.proof_type)===null||d===void 0?void 0:d.length)>0),e?.di_vp!=null&&(f=f&&((p=e.di_vp.proof_type)===null||p===void 0?void 0:p.length)>0),f}static formatValuesShouldBeAmongKnownValues(e){let r=[];if(e){let n=hwe.JwtAlgos.getJwtAlgos(),s=ywe.LdpTypes.getLdpTypes();r=[];for(let[i,o]of Object.entries(e))i.startsWith("jwt")?r.push(...t.isJWTAlgoKnown(o,n)):r.push(...t.isLDPProofKnown(o,s))}return r.length===0}static isJWTAlgoKnown(e,r){let n=[];if(e!=null&&e.alg!=null)for(let s of e.alg)r.includes(s)||n.push(s);return n}static isLDPProofKnown(e,r){let n=[];if(e!=null&&e.proof_type!=null)for(let s of e.proof_type)r.includes(s)||n.push(s);return n}static groupShouldMatchSubmissionRequirements(e){if(e.submission_requirements!=null&&e.submission_requirements.length>0){let r=[];e.input_descriptors.forEach(a=>{a.group&&r.push(...a.group)});let n=new Set(r),s=[];t.flatten(e.submission_requirements).forEach(a=>{a.from&&(Array.isArray(a.from)?s.push(...a.from):s.push(a.from))});let i=new Set(s);return new Set([...i].filter(a=>a!=null&&a.length>0&&!n.has(a))).size===0}return!0}static flatten(e){return e?.reduce((r,n)=>r.concat(Array.isArray(n.from_nested)?this.flatten(n.from_nested):n),[])}shouldBeAsPerJsonSchema(){return e=>(0,mwe.default)({presentation_definition:e})}static shouldNotHaveFrameProperty(e){return!e.frame}};ip.PresentationDefinitionV1VB=EO});var bV=b(r1=>{"use strict";Object.defineProperty(r1,"__esModule",{value:!0});r1.FrameVB=void 0;var Uu=Ui(),bwe=Ps(),SO=class t extends bwe.ValidationBundler{constructor(e){super(e,"frame"),this.frameIsValidMsg="frame value is not valid"}getValidations(e){let r=[];return r=[...r,...this.getMyValidations(e)],r}getMyValidations(e){return[{tag:this.getMyTag(),target:e,predicate:t.frameIsValid,message:this.frameIsValidMsg}]}getMyTag(){return this.parentTag+"."+this.myTag}static frameIsValid(e){if(!e||Array.isArray(e)||typeof e!="object")return!1;let r=e;if(r&&r["@id"]){for(let n of Uu.ObjectUtils.asArray(e["@id"]))if(!(Uu.ObjectUtils.isObject(n)||Uu.ObjectUtils.isUrlAbsolute(n))||Uu.ObjectUtils.isString(n)&&n.indexOf("_:")===0)return!1}if(r["@types"]){for(let n of Uu.ObjectUtils.asArray(e["@types"]))if(!(Uu.ObjectUtils.isObject(n)||Uu.ObjectUtils.isUrlAbsolute(n))||Uu.ObjectUtils.isString(n)&&n.indexOf("_:")===0)return!1}return!0}};r1.FrameVB=SO});var _V=b(sp=>{"use strict";var wwe=sp&&sp.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sp,"__esModule",{value:!0});sp.PresentationDefinitionV2VB=void 0;var _we=vO(),Ewe=wO(),Swe=wwe(m2()),Awe=bV(),wV=mO(),xwe=t1(),Dwe=Ps(),AO=class t extends Dwe.ValidationBundler{constructor(e){super(e,"presentation_definition")}getValidations(e){let r=[];return e.submission_requirements?r=[...this.myValidations(e),...new wV.InputDescriptorsV2VB(this.myTag).getValidations(e.input_descriptors),...new xwe.SubmissionRequirementVB(this.myTag).getValidations(e.submission_requirements)]:r=[...this.myValidations(e),...new wV.InputDescriptorsV2VB(this.myTag).getValidations(e.input_descriptors)],e.frame&&r.push(...new Awe.FrameVB(this.myTag).getValidations(e.frame)),r}myValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_definition should be non null."},{tag:this.getTag(),target:e,predicate:this.shouldBeAsPerJsonSchema(),message:"presentation_definition should be as per json schema."},{tag:this.getTag(),target:e,predicate:r=>t.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>t.optionalNonEmptyString(r?.name),message:"name should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>t.optionalNonEmptyString(r?.purpose),message:"purpose should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>t.formatValuesShouldNotBeEmpty(r?.format),message:"formats values should not empty"},{tag:this.getTag(),target:e,predicate:r=>t.formatValuesShouldBeAmongKnownValues(r?.format),message:"formats should only have known identifiers for alg or proof_type"},{tag:this.getTag(),target:e,predicate:r=>t.groupShouldMatchSubmissionRequirements(r),message:"input descriptor group should match the from in submission requirements."}]}static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static formatValuesShouldNotBeEmpty(e){var r,n,s,i,o,a,u,c,l,d,p;let f=!0;return e?.jwt!=null&&(f=f&&((r=e.jwt.alg)===null||r===void 0?void 0:r.length)>0),e?.jwt_vc!=null&&(f=f&&((n=e.jwt_vc.alg)===null||n===void 0?void 0:n.length)>0),e?.jwt_vc_json!=null&&(f=f&&((s=e.jwt_vc_json.alg)===null||s===void 0?void 0:s.length)>0),e?.jwt_vp!=null&&(f=f&&((i=e.jwt_vp.alg)===null||i===void 0?void 0:i.length)>0),e?.jwt_vp_json!=null&&(f=f&&((o=e.jwt_vp_json.alg)===null||o===void 0?void 0:o.length)>0),e?.ldp!=null&&(f=f&&((a=e.ldp.proof_type)===null||a===void 0?void 0:a.length)>0),e?.ldp_vc!=null&&(f=f&&((u=e.ldp_vc.proof_type)===null||u===void 0?void 0:u.length)>0),e?.ldp_vp!=null&&(f=f&&((c=e.ldp_vp.proof_type)===null||c===void 0?void 0:c.length)>0),e?.di!=null&&(f=f&&((l=e.di.proof_type)===null||l===void 0?void 0:l.length)>0),e?.di_vc!=null&&(f=f&&((d=e.di_vc.proof_type)===null||d===void 0?void 0:d.length)>0),e?.di_vp!=null&&(f=f&&((p=e.di_vp.proof_type)===null||p===void 0?void 0:p.length)>0),f}static formatValuesShouldBeAmongKnownValues(e){let r=[];if(e){let n=_we.JwtAlgos.getJwtAlgos(),s=Ewe.LdpTypes.getLdpTypes();r=[];for(let[i,o]of Object.entries(e))i.startsWith("jwt")?r.push(...t.isJWTAlgoKnown(o,n)):r.push(...t.isLDPProofKnown(o,s))}return r.length===0}static isJWTAlgoKnown(e,r){let n=[];if(e!=null&&e.alg!=null)for(let s of e.alg)r.includes(s)||n.push(s);return n}static isLDPProofKnown(e,r){let n=[];if(e!=null&&e.proof_type!=null)for(let s of e.proof_type)r.includes(s)||n.push(s);return n}static groupShouldMatchSubmissionRequirements(e){if(e.submission_requirements!=null&&e.submission_requirements.length>0){let r=[];e.input_descriptors.forEach(a=>{a.group&&r.push(...a.group)});let n=new Set(r),s=[];t.flatten(e.submission_requirements).forEach(a=>{a.from&&s.push(a.from)});let i=new Set(s);return new Set([...i].filter(a=>a!=null&&a.length>0&&!n.has(a))).size===0}return!0}static flatten(e){return e?.reduce((r,n)=>r.concat(Array.isArray(n.from_nested)?this.flatten(n.from_nested):n),[])}shouldBeAsPerJsonSchema(){return e=>(0,Swe.default)({presentation_definition:e})}};sp.PresentationDefinitionV2VB=AO});var SV=b(n1=>{"use strict";Object.defineProperty(n1,"__esModule",{value:!0});n1.PresentationSubmissionVB=void 0;var Cwe=Li(),EV=Nr(),Pwe=Ps(),xO=class t extends Pwe.ValidationBundler{constructor(e){super(e,"presentation_submission")}getValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_submission should be non null."},{tag:this.getTag(),target:e,predicate:r=>t.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>t.nonEmptyString(r?.definition_id),message:"presentation_definition_id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>t.descriptorMapMustBePresent(r?.descriptor_map),message:"descriptor_map should be a non-empty list"},{tag:this.getTag(),target:e,predicate:r=>t.idMustBeSameForEachLevelOfNesting(r?.descriptor_map),message:"each descriptor should have a one id in it, on all levels"},{tag:this.getTag(),target:e,predicate:r=>t.formatsShouldBeKnown(r?.descriptor_map),message:"each format should be one of the known format"},{tag:this.getTag(),target:e,predicate:r=>t.pathsShouldBeValidJsonPaths(r?.descriptor_map),message:"each path should be a valid jsonPath"}]}static nonEmptyString(e){return e!=null&&e.length>0}static descriptorMapMustBePresent(e){return e!=null&&e.length>0}static idMustBeSameForEachLevelOfNesting(e){let r=!0;if(e!=null)for(let n=0;n<e.length;n++)r=r&&t.isIdSameForEachLevelOfNesting(e[n],e[n].id);return r}static isIdSameForEachLevelOfNesting(e,r){let n=!0;return e!=null&&e.path_nested!=null&&(e.path_nested.id==r?n=n&&t.isIdSameForEachLevelOfNesting(e.path_nested,r):n=!1),n}static formatsShouldBeKnown(e){let r=!0;if(e!=null){let n=["jwt","jwt_vc","jwt_vc_json","jwt_vp","jwt_vp_json","ldp","ldp_vc","ldp_vp","di","di_vc","di_vp","vc+sd-jwt"];for(let s=0;s<e.length;s++)r=t.formatShouldBeKnown(e[s],n)}return r}static formatShouldBeKnown(e,r){let n=!0;return e!=null&&(n=r.includes(e.format)),e.path_nested!=null&&(n=n&&t.formatShouldBeKnown(e.path_nested,r)),n}static pathsShouldBeValidJsonPaths(e){let r=!0;if(e!=null)for(let n=0;n<e.length;n++)r=t.pathShouldBeValid(e[n],[]);return r}static pathShouldBeValid(e,r){if(e!=null){try{Cwe.JSONPath.parse(e.path)}catch{r.push(e.path)}e.path_nested!=null&&t.pathShouldBeValid(e.path_nested,r)}if(r.length>0)throw new EV.Checked("",EV.Status.ERROR,"These were not parsable json paths: "+JSON.stringify(r));return!0}};n1.PresentationSubmissionVB=xO});var AV=b($n=>{"use strict";var Owe=$n&&$n.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ba=$n&&$n.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Owe(e,t,r)};Object.defineProperty($n,"__esModule",{value:!0});Ba(lO(),$n);Ba(pO(),$n);Ba(mO(),$n);Ba(vV(),$n);Ba(_V(),$n);Ba(SV(),$n);Ba(t1(),$n);Ba(Ps(),$n);Ba(Gw(),$n)});var xV=b(i1=>{"use strict";Object.defineProperty(i1,"__esModule",{value:!0});i1.validate=void 0;var op=Nr(),Twe=t=>{let e=t.map(a=>s(a));function r(a){return new op.Checked(a.tag,op.Status.ERROR,a.message)}function n(a){return new op.Checked(a,op.Status.INFO,"ok")}function s(a){let u;try{a.predicate(a.target)?u=n(a.tag):u=r(a)}catch{u=r(a)}return u}let i=(a,u)=>(u.status!==op.Status.INFO&&a.push(u),a),o=e.reduce(i,[]);return(0,op.hasErrors)(o)?o:[n("root")]};i1.validate=Twe});var CV=b(DV=>{"use strict";Object.defineProperty(DV,"__esModule",{value:!0})});var PV=b(s1=>{"use strict";Object.defineProperty(s1,"__esModule",{value:!0});s1.ValidationEngine=void 0;var Bwe=CO(),DO=class{validate(e){let r=[];for(let n of e)r=r.concat(n.bundler.getValidations(n.target));return(0,Bwe.validate)(r)}};s1.ValidationEngine=DO});var CO=b(Ia=>{"use strict";var Iwe=Ia&&Ia.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),PO=Ia&&Ia.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Iwe(e,t,r)};Object.defineProperty(Ia,"__esModule",{value:!0});PO(xV(),Ia);PO(CV(),Ia);PO(PV(),Ia)});var Sm=b(Ku=>{"use strict";var Fwe=Ku&&Ku.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),OV=Ku&&Ku.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Fwe(e,t,r)};Object.defineProperty(Ku,"__esModule",{value:!0});OV(AV(),Ku);OV(CO(),Ku)});var o1=b(ap=>{"use strict";var kwe=ap&&ap.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(ap,"__esModule",{value:!0});ap.PEX=void 0;var Fa=ys(),TV=Nr(),Am=wm(),xm=tp(),Os=ll(),Dm=Ui(),Cm=Sm(),OO=class t{constructor(e){this._evaluationClientWrapper=new Am.EvaluationClientWrapper,this.options=e}evaluatePresentation(e,r,n){var s,i,o;let a=n?.generatePresentationSubmission!==void 0?n.generatePresentationSubmission:n?.presentationSubmission===void 0,u=Os.SSITypesBuilder.toInternalPresentationDefinition(e),c=JSON.parse(JSON.stringify(r)),l=Os.SSITypesBuilder.mapExternalVerifiablePresentationToWrappedVP(c,(s=this.options)===null||s===void 0?void 0:s.hasher),d=(i=n?.presentationSubmission)!==null&&i!==void 0?i:l.decoded.presentation_submission;if(!d&&!a)throw Error("Either a presentation submission as part of the VP or provided separately was expected");let p=Fa.CredentialMapper.isW3cPresentation(l.presentation)&&l.presentation.holder?[l.presentation.holder]:[],f=Object.assign(Object.assign({},n),{holderDIDs:p,presentationSubmission:d,generatePresentationSubmission:a}),h=this._evaluationClientWrapper.evaluate(u,l.vcs,f);return!((o=h.value)===null||o===void 0)&&o.descriptor_map.length&&new Am.EvaluationClientWrapper().selectFrom(u,l.vcs,f).areRequiredCredentialsPresent!==TV.Status.ERROR&&(h.errors=[]),h}evaluateCredentials(e,r,n){var s;let i=Os.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r,(s=this.options)===null||s===void 0?void 0:s.hasher);this._evaluationClientWrapper=new Am.EvaluationClientWrapper;let o=Os.SSITypesBuilder.toInternalPresentationDefinition(e),a=this._evaluationClientWrapper.evaluate(o,i,n);if(a.value&&a.value.descriptor_map.length){let c=new Am.EvaluationClientWrapper().selectFrom(o,i,n);a.areRequiredCredentialsPresent=c.areRequiredCredentialsPresent,a.errors=c.errors}else a.areRequiredCredentialsPresent=TV.Status.ERROR;return a}selectFrom(e,r,n){var s;let i=JSON.parse(JSON.stringify(r)),o=Os.SSITypesBuilder.toInternalPresentationDefinition(e);return this._evaluationClientWrapper=new Am.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(o,Os.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(i,(s=this.options)===null||s===void 0?void 0:s.hasher),n)}presentationSubmissionFrom(e,r,n){var s;let i=Os.SSITypesBuilder.toInternalPresentationDefinition(e);return this._evaluationClientWrapper.submissionFrom(i,Os.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r,(s=this.options)===null||s===void 0?void 0:s.hasher),n)}presentationFrom(e,r,n){var s,i;let o=this.presentationSubmissionFrom(e,r,n),a=r.some(l=>Fa.CredentialMapper.isSdJwtDecodedCredential(l)||Fa.CredentialMapper.isSdJwtEncoded(l));if(n?.presentationSubmissionLocation===xm.PresentationSubmissionLocation.PRESENTATION&&a)throw new Error("Presentation submission location cannot be set to presentation when creating a presentation with an SD-JWT VC");let u=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:a?xm.PresentationSubmissionLocation.EXTERNAL:xm.PresentationSubmissionLocation.PRESENTATION;return{presentation:t.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:u===xm.PresentationSubmissionLocation.PRESENTATION?o:void 0,hasher:(i=this.options)===null||i===void 0?void 0:i.hasher})),presentationSubmissionLocation:u,presentationSubmission:o}}static constructPresentation(e,r){var n,s,i,o;let a=Array.isArray(e)?e:[e];if(a.some(u=>Fa.CredentialMapper.isSdJwtDecodedCredential(u)||Fa.CredentialMapper.isSdJwtEncoded(u))){if(a.length>1)throw new Error("Only a single credential is supported when creating a presentation with an SD-JWT VC");if(r?.presentationSubmission)throw new Error("Presentation submission cannot be included in the presentation when creating a presentation with an SD-JWT VC");if(r?.basePresentationPayload)throw new Error("Base presentation payload cannot be when creating a presentation from an SD-JWT VC");let u=Fa.CredentialMapper.isSdJwtEncoded(a[0])?Fa.CredentialMapper.decodeVerifiableCredential(a[0],r?.hasher):a[0];if(!r?.hasher)throw new Error("Hasher must be provided when creating a presentation with an SD-JWT VC");let c=(n=u.signedPayload._sd_alg)!==null&&n!==void 0?n:"sha-256",l=(0,Dm.calculateSdHash)(u.compactSdJwtVc,c,r.hasher),d={header:{typ:"kb+jwt"},payload:{iat:new Date().getTime(),_sd_hash:l}};return Object.assign(Object.assign({},u),{kbJwt:d})}else{if(!e)throw Error("At least a verifiable credential needs to be passed in to create a presentation");let u=Array.isArray(e)?e:[e],c=u.map(h=>Fa.CredentialMapper.toWrappedVerifiableCredential(h)),l=Array.from(new Set(c.flatMap(h=>(0,Dm.getSubjectIdsAsString)(h.credential))));l.length!==1&&!r?.holderDID&&console.log(`We deduced ${l.length} subject from ${c.length} Verifiable Credentials, and no holder property was given. This might lead to undesired results`);let d=(s=r?.holderDID)!==null&&s!==void 0?s:l.length===1?l[0]:void 0,p=!((i=r?.basePresentationPayload)===null||i===void 0)&&i.type?Array.isArray(r.basePresentationPayload.type)?r.basePresentationPayload.type:[r.basePresentationPayload.type]:[];p.includes("VerifiablePresentation")||p.push("VerifiablePresentation");let f=!((o=r?.basePresentationPayload)===null||o===void 0)&&o["@context"]?Array.isArray(r.basePresentationPayload["@context"])?r.basePresentationPayload["@context"]:[r.basePresentationPayload["@context"]]:[];return f.includes("https://www.w3.org/2018/credentials/v1")||f.push("https://www.w3.org/2018/credentials/v1"),r?.presentationSubmission&&(p.includes("PresentationSubmission")||p.push("PresentationSubmission"),f.includes("https://identity.foundation/presentation-exchange/submission/v1")||f.push("https://identity.foundation/presentation-exchange/submission/v1")),Object.assign(Object.assign(Object.assign(Object.assign({},r?.basePresentationPayload),{"@context":f,type:p,holder:d}),!!r?.presentationSubmission&&{presentation_submission:r.presentationSubmission}),{verifiableCredential:u})}}static validateDefinition(e){let r=(0,Dm.definitionVersionDiscovery)(e);if(r.error)throw new Error(r.error);let n=[];return r.version===Os.PEVersion.v1?n.push({bundler:new Cm.PresentationDefinitionV1VB("root"),target:Os.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e)}):n.push({bundler:new Cm.PresentationDefinitionV2VB("root"),target:Os.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e)}),new Cm.ValidationEngine().validate(n)}static validateSubmission(e){return new Cm.ValidationEngine().validate([{bundler:new Cm.PresentationSubmissionVB("root"),target:e}])}verifiablePresentationFrom(e,r,n,s){return kwe(this,void 0,void 0,function*(){var i,o;let{holderDID:a,signatureOptions:u,proofOptions:c}=s;function l(){let E=[];if(c?.typeSupportsSelectiveDisclosure){if(!c?.type)throw Error("Please provide a proof type if you enable selective disclosure");E=[c.type]}return E}let d=a?[a]:[],p=l(),f=this.evaluateCredentials(e,r,{holderDIDs:d,limitDisclosureSignatureSuites:p}),h=this.presentationFrom(e,f.verifiableCredential,s),m=this.evaluatePresentation(e,h.presentation,Object.assign({limitDisclosureSignatureSuites:p},h.presentationSubmissionLocation===xm.PresentationSubmissionLocation.EXTERNAL&&{presentationSubmission:h.presentationSubmission}));if(!m.value)throw new Error("Could not get evaluation results from presentationResult");let g={type:c?.type,verificationMethod:u?.verificationMethod,created:c?.created?c.created:new Date().toISOString(),proofPurpose:c?.proofPurpose,proofValue:u?.proofValue,jws:u?.jws,challenge:c?.challenge,nonce:c?.nonce,domain:c?.domain},_=h.presentation;if(Fa.CredentialMapper.isSdJwtDecodedCredential(h.presentation)){if(!(!((i=this.options)===null||i===void 0)&&i.hasher))throw new Error("Hasher must be provided when creating a presentation with an SD-JWT VC");let E=(o=h.presentation.signedPayload._sd_alg)!==null&&o!==void 0?o:"sha-256",S=(0,Dm.calculateSdHash)(h.presentation.compactSdJwtVc,E,this.options.hasher),P={header:{typ:"kb+jwt"},payload:{iat:new Date().getTime(),nonce:c?.nonce,_sd_hash:S}};_=Object.assign(Object.assign({},_),{kbJwt:P})}let D={options:Object.assign(Object.assign({},s),{presentationSubmissionLocation:h.presentationSubmissionLocation}),presentation:_,presentationDefinition:e,selectedCredentials:r,proof:g,presentationSubmission:m.value,evaluationResults:m};return{verifiablePresentation:yield n(D),presentationSubmissionLocation:h.presentationSubmissionLocation,presentationSubmission:m.value}})}static definitionVersionDiscovery(e){return(0,Dm.definitionVersionDiscovery)(e)}};ap.PEX=OO});var FV=b(u1=>{"use strict";Object.defineProperty(u1,"__esModule",{value:!0});u1.PEXv1=void 0;var BV=ys(),TO=o1(),Rwe=wm(),a1=tp(),Tl=ll(),IV=Sm(),BO=class extends TO.PEX{evaluatePresentation(e,r,n){return Tl.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),super.evaluatePresentation(e,r,n)}evaluateCredentials(e,r,n){return Tl.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),super.evaluateCredentials(e,r,n)}selectFrom(e,r,n){let s=JSON.parse(JSON.stringify(r));return this._evaluationClientWrapper=new Rwe.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(Tl.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),Tl.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(s),n)}presentationFrom(e,r,n){var s;let i=this._evaluationClientWrapper.submissionFrom(Tl.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),Tl.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r),n),o=r.some(c=>BV.CredentialMapper.isSdJwtDecodedCredential(c)||BV.CredentialMapper.isSdJwtEncoded(c));if(n?.presentationSubmissionLocation===a1.PresentationSubmissionLocation.PRESENTATION&&o)throw new Error("Presentation submission location cannot be set to presentation when creating a presentation with an SD-JWT VC");let a=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:o?a1.PresentationSubmissionLocation.EXTERNAL:a1.PresentationSubmissionLocation.PRESENTATION;return{presentation:TO.PEX.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:a===a1.PresentationSubmissionLocation.PRESENTATION?i:void 0})),presentationSubmissionLocation:a,presentationSubmission:i}}static validateDefinition(e){let r=Tl.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e);return new IV.ValidationEngine().validate([{bundler:new IV.PresentationDefinitionV1VB("root"),target:r}])}static validateSubmission(e){return TO.PEX.validateSubmission(e)}};u1.PEXv1=BO});var $V=b(l1=>{"use strict";Object.defineProperty(l1,"__esModule",{value:!0});l1.PEXv2=void 0;var kV=ys(),IO=o1(),$we=wm(),c1=tp(),Bl=ll(),RV=Sm(),FO=class extends IO.PEX{evaluatePresentation(e,r,n){return Bl.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),super.evaluatePresentation(e,r,n)}evaluateCredentials(e,r,n){return Bl.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),super.evaluateCredentials(e,r,n)}selectFrom(e,r,n){return this._evaluationClientWrapper=new $we.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(Bl.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),Bl.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r),n)}presentationFrom(e,r,n){var s;let i=this._evaluationClientWrapper.submissionFrom(Bl.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),Bl.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r),n),o=r.some(c=>kV.CredentialMapper.isSdJwtDecodedCredential(c)||kV.CredentialMapper.isSdJwtEncoded(c));if(n?.presentationSubmissionLocation===c1.PresentationSubmissionLocation.PRESENTATION&&o)throw new Error("Presentation submission location cannot be set to presentation when creating a presentation with an SD-JWT VC");let a=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:o?c1.PresentationSubmissionLocation.EXTERNAL:c1.PresentationSubmissionLocation.PRESENTATION;return{presentation:IO.PEX.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:a===c1.PresentationSubmissionLocation.PRESENTATION?i:void 0})),presentationSubmissionLocation:a,presentationSubmission:i}}static validateDefinition(e){let r=Bl.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e);return new RV.ValidationEngine().validate([{bundler:new RV.PresentationDefinitionV2VB("root"),target:r}])}static validateSubmission(e){return IO.PEX.validateSubmission(e)}};l1.PEXv2=FO});var NV=b(dr=>{"use strict";var jwe=dr&&dr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Nwe=dr&&dr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&jwe(e,t,r)};Object.defineProperty(dr,"__esModule",{value:!0});dr.PEXv2=dr.PEXv1=dr.PEX=dr.Status=dr.Checked=dr.PEVersion=dr.ValidationEngine=dr.HandlerCheckResult=void 0;var jV=Nr();Object.defineProperty(dr,"Checked",{enumerable:!0,get:function(){return jV.Checked}});Object.defineProperty(dr,"Status",{enumerable:!0,get:function(){return jV.Status}});var Mwe=o1();Object.defineProperty(dr,"PEX",{enumerable:!0,get:function(){return Mwe.PEX}});var qwe=FV();Object.defineProperty(dr,"PEXv1",{enumerable:!0,get:function(){return qwe.PEXv1}});var Lwe=$V();Object.defineProperty(dr,"PEXv2",{enumerable:!0,get:function(){return Lwe.PEXv2}});var Uwe=wm();Object.defineProperty(dr,"HandlerCheckResult",{enumerable:!0,get:function(){return Uwe.HandlerCheckResult}});var Kwe=ll();Object.defineProperty(dr,"PEVersion",{enumerable:!0,get:function(){return Kwe.PEVersion}});var Vwe=Sm();Object.defineProperty(dr,"ValidationEngine",{enumerable:!0,get:function(){return Vwe.ValidationEngine}});Nwe(tp(),dr)});var MV=b(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.PresentationSubmissionLocation=yr.HandlerCheckResult=yr.ValidationEngine=yr.PEVersion=yr.Checked=yr.Status=yr.KeyEncoding=yr.PEXv2=yr.PEXv1=yr.PEX=void 0;var Ao=NV();Object.defineProperty(yr,"Checked",{enumerable:!0,get:function(){return Ao.Checked}});Object.defineProperty(yr,"HandlerCheckResult",{enumerable:!0,get:function(){return Ao.HandlerCheckResult}});Object.defineProperty(yr,"KeyEncoding",{enumerable:!0,get:function(){return Ao.KeyEncoding}});Object.defineProperty(yr,"PEVersion",{enumerable:!0,get:function(){return Ao.PEVersion}});Object.defineProperty(yr,"PEX",{enumerable:!0,get:function(){return Ao.PEX}});Object.defineProperty(yr,"PEXv1",{enumerable:!0,get:function(){return Ao.PEXv1}});Object.defineProperty(yr,"PEXv2",{enumerable:!0,get:function(){return Ao.PEXv2}});Object.defineProperty(yr,"PresentationSubmissionLocation",{enumerable:!0,get:function(){return Ao.PresentationSubmissionLocation}});Object.defineProperty(yr,"Status",{enumerable:!0,get:function(){return Ao.Status}});Object.defineProperty(yr,"ValidationEngine",{enumerable:!0,get:function(){return Ao.ValidationEngine}})});var aJ=b((mp,gp)=>{(function(t){var e=typeof mp=="object"&&mp&&!mp.nodeType&&mp,r=typeof gp=="object"&&gp&&!gp.nodeType&&gp,n=typeof globalThis=="object"&&globalThis;(n.global===n||n.window===n||n.self===n)&&(t=n);var s,i=2147483647,o=36,a=1,u=26,c=38,l=700,d=72,p=128,f="-",h=/^xn--/,m=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=o-a,v=Math.floor,E=String.fromCharCode,S;function P(U){throw new RangeError(_[U])}function C(U,R){for(var j=U.length,W=[];j--;)W[j]=R(U[j]);return W}function B(U,R){var j=U.split("@"),W="";j.length>1&&(W=j[0]+"@",U=j[1]),U=U.replace(g,".");var re=U.split("."),L=C(re,R).join(".");return W+L}function F(U){for(var R=[],j=0,W=U.length,re,L;j<W;)re=U.charCodeAt(j++),re>=55296&&re<=56319&&j<W?(L=U.charCodeAt(j++),(L&64512)==56320?R.push(((re&1023)<<10)+(L&1023)+65536):(R.push(re),j--)):R.push(re);return R}function I(U){return C(U,function(R){var j="";return R>65535&&(R-=65536,j+=E(R>>>10&1023|55296),R=56320|R&1023),j+=E(R),j}).join("")}function $(U){return U-48<10?U-22:U-65<26?U-65:U-97<26?U-97:o}function q(U,R){return U+22+75*(U<26)-((R!=0)<<5)}function X(U,R,j){var W=0;for(U=j?v(U/l):U>>1,U+=v(U/R);U>D*u>>1;W+=o)U=v(U/D);return v(W+(D+1)*U/(U+c))}function Q(U){var R=[],j=U.length,W,re=0,L=p,V=d,ie,ue,he,ye,xe,Oe,Le,je,Et;for(ie=U.lastIndexOf(f),ie<0&&(ie=0),ue=0;ue<ie;++ue)U.charCodeAt(ue)>=128&&P("not-basic"),R.push(U.charCodeAt(ue));for(he=ie>0?ie+1:0;he<j;){for(ye=re,xe=1,Oe=o;he>=j&&P("invalid-input"),Le=$(U.charCodeAt(he++)),(Le>=o||Le>v((i-re)/xe))&&P("overflow"),re+=Le*xe,je=Oe<=V?a:Oe>=V+u?u:Oe-V,!(Le<je);Oe+=o)Et=o-je,xe>v(i/Et)&&P("overflow"),xe*=Et;W=R.length+1,V=X(re-ye,W,ye==0),v(re/W)>i-L&&P("overflow"),L+=v(re/W),re%=W,R.splice(re++,0,L)}return I(R)}function K(U){var R,j,W,re,L,V,ie,ue,he,ye,xe,Oe=[],Le,je,Et,yt;for(U=F(U),Le=U.length,R=p,j=0,L=d,V=0;V<Le;++V)xe=U[V],xe<128&&Oe.push(E(xe));for(W=re=Oe.length,re&&Oe.push(f);W<Le;){for(ie=i,V=0;V<Le;++V)xe=U[V],xe>=R&&xe<ie&&(ie=xe);for(je=W+1,ie-R>v((i-j)/je)&&P("overflow"),j+=(ie-R)*je,R=ie,V=0;V<Le;++V)if(xe=U[V],xe<R&&++j>i&&P("overflow"),xe==R){for(ue=j,he=o;ye=he<=L?a:he>=L+u?u:he-L,!(ue<ye);he+=o)yt=ue-ye,Et=o-ye,Oe.push(E(q(ye+yt%Et,0))),ue=v(yt/Et);Oe.push(E(q(ue,0))),L=X(j,je,W==re),j=0,++W}++j,++R}return Oe.join("")}function G(U){return B(U,function(R){return h.test(R)?Q(R.slice(4).toLowerCase()):R})}function ne(U){return B(U,function(R){return m.test(R)?"xn--"+K(R):R})}if(s={version:"1.4.1",ucs2:{decode:F,encode:I},decode:Q,encode:K,toASCII:ne,toUnicode:G},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return s});else if(e&&r)if(gp.exports==e)r.exports=s;else for(S in s)s.hasOwnProperty(S)&&(e[S]=s[S]);else t.punycode=s})(mp)});var A1=b((Lje,uJ)=>{"use strict";var LEe=String.prototype.replace,UEe=/%20/g,hT={RFC1738:"RFC1738",RFC3986:"RFC3986"};uJ.exports={default:hT.RFC3986,formatters:{RFC1738:function(t){return LEe.call(t,UEe,"+")},RFC3986:function(t){return String(t)}},RFC1738:hT.RFC1738,RFC3986:hT.RFC3986}});var gT=b((Uje,lJ)=>{"use strict";var KEe=A1(),yT=Object.prototype.hasOwnProperty,Ll=Array.isArray,Oo=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),VEe=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(Ll(n)){for(var s=[],i=0;i<n.length;++i)typeof n[i]<"u"&&s.push(n[i]);r.obj[r.prop]=s}}},cJ=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},s=0;s<e.length;++s)typeof e[s]<"u"&&(n[s]=e[s]);return n},zEe=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(Ll(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!yT.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var s=e;return Ll(e)&&!Ll(r)&&(s=cJ(e,n)),Ll(e)&&Ll(r)?(r.forEach(function(i,o){if(yT.call(e,o)){var a=e[o];a&&typeof a=="object"&&i&&typeof i=="object"?e[o]=t(a,i,n):e.push(i)}else e[o]=i}),e):Object.keys(r).reduce(function(i,o){var a=r[o];return yT.call(i,o)?i[o]=t(i[o],a,n):i[o]=a,i},s)},JEe=function(e,r){return Object.keys(r).reduce(function(n,s){return n[s]=r[s],n},e)},HEe=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},mT=1024,WEe=function(e,r,n,s,i){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",u=0;u<o.length;u+=mT){for(var c=o.length>=mT?o.slice(u,u+mT):o,l=[],d=0;d<c.length;++d){var p=c.charCodeAt(d);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||i===KEe.RFC1738&&(p===40||p===41)){l[l.length]=c.charAt(d);continue}if(p<128){l[l.length]=Oo[p];continue}if(p<2048){l[l.length]=Oo[192|p>>6]+Oo[128|p&63];continue}if(p<55296||p>=57344){l[l.length]=Oo[224|p>>12]+Oo[128|p>>6&63]+Oo[128|p&63];continue}d+=1,p=65536+((p&1023)<<10|c.charCodeAt(d)&1023),l[l.length]=Oo[240|p>>18]+Oo[128|p>>12&63]+Oo[128|p>>6&63]+Oo[128|p&63]}a+=l.join("")}return a},GEe=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],s=0;s<r.length;++s)for(var i=r[s],o=i.obj[i.prop],a=Object.keys(o),u=0;u<a.length;++u){var c=a[u],l=o[c];typeof l=="object"&&l!==null&&n.indexOf(l)===-1&&(r.push({obj:o,prop:c}),n.push(l))}return VEe(r),e},ZEe=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},XEe=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},YEe=function(e,r){return[].concat(e,r)},QEe=function(e,r){if(Ll(e)){for(var n=[],s=0;s<e.length;s+=1)n.push(r(e[s]));return n}return r(e)};lJ.exports={arrayToObject:cJ,assign:JEe,combine:YEe,compact:GEe,decode:HEe,encode:WEe,isBuffer:XEe,isRegExp:ZEe,maybeMap:QEe,merge:zEe}});var mJ=b((Kje,yJ)=>{"use strict";var fJ=xD(),x1=gT(),Hm=A1(),eSe=Object.prototype.hasOwnProperty,pJ={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},To=Array.isArray,tSe=Array.prototype.push,hJ=function(t,e){tSe.apply(t,To(e)?e:[e])},rSe=Date.prototype.toISOString,dJ=Hm.default,qr={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:x1.encode,encodeValuesOnly:!1,format:dJ,formatter:Hm.formatters[dJ],indices:!1,serializeDate:function(e){return rSe.call(e)},skipNulls:!1,strictNullHandling:!1},nSe=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},vT={},iSe=function t(e,r,n,s,i,o,a,u,c,l,d,p,f,h,m,g,_,D){for(var v=e,E=D,S=0,P=!1;(E=E.get(vT))!==void 0&&!P;){var C=E.get(e);if(S+=1,typeof C<"u"){if(C===S)throw new RangeError("Cyclic object value");P=!0}typeof E.get(vT)>"u"&&(S=0)}if(typeof l=="function"?v=l(r,v):v instanceof Date?v=f(v):n==="comma"&&To(v)&&(v=x1.maybeMap(v,function(j){return j instanceof Date?f(j):j})),v===null){if(o)return c&&!g?c(r,qr.encoder,_,"key",h):r;v=""}if(nSe(v)||x1.isBuffer(v)){if(c){var B=g?r:c(r,qr.encoder,_,"key",h);return[m(B)+"="+m(c(v,qr.encoder,_,"value",h))]}return[m(r)+"="+m(String(v))]}var F=[];if(typeof v>"u")return F;var I;if(n==="comma"&&To(v))g&&c&&(v=x1.maybeMap(v,c)),I=[{value:v.length>0?v.join(",")||null:void 0}];else if(To(l))I=l;else{var $=Object.keys(v);I=d?$.sort(d):$}var q=u?r.replace(/\./g,"%2E"):r,X=s&&To(v)&&v.length===1?q+"[]":q;if(i&&To(v)&&v.length===0)return X+"[]";for(var Q=0;Q<I.length;++Q){var K=I[Q],G=typeof K=="object"&&typeof K.value<"u"?K.value:v[K];if(!(a&&G===null)){var ne=p&&u?K.replace(/\./g,"%2E"):K,U=To(v)?typeof n=="function"?n(X,ne):X:X+(p?"."+ne:"["+ne+"]");D.set(e,S);var R=fJ();R.set(vT,D),hJ(F,t(G,U,n,s,i,o,a,u,n==="comma"&&g&&To(v)?null:c,l,d,p,f,h,m,g,_,R))}}return F},sSe=function(e){if(!e)return qr;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||qr.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Hm.default;if(typeof e.format<"u"){if(!eSe.call(Hm.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var s=Hm.formatters[n],i=qr.filter;(typeof e.filter=="function"||To(e.filter))&&(i=e.filter);var o;if(e.arrayFormat in pJ?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=qr.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:qr.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:qr.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:qr.allowEmptyArrays,arrayFormat:o,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:qr.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?qr.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:qr.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:qr.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:qr.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:qr.encodeValuesOnly,filter:i,format:n,formatter:s,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:qr.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:qr.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:qr.strictNullHandling}};yJ.exports=function(t,e){var r=t,n=sSe(e),s,i;typeof n.filter=="function"?(i=n.filter,r=i("",r)):To(n.filter)&&(i=n.filter,s=i);var o=[];if(typeof r!="object"||r===null)return"";var a=pJ[n.arrayFormat],u=a==="comma"&&n.commaRoundTrip;s||(s=Object.keys(r)),n.sort&&s.sort(n.sort);for(var c=fJ(),l=0;l<s.length;++l){var d=s[l];n.skipNulls&&r[d]===null||hJ(o,iSe(r[d],d,a,u,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}var p=o.join(n.delimiter),f=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),p.length>0?f+p:""}});var bJ=b((Vje,vJ)=>{"use strict";var vp=gT(),bT=Object.prototype.hasOwnProperty,oSe=Array.isArray,mr={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:vp.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},aSe=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},gJ=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},uSe="utf8=%26%2310003%3B",cSe="utf8=%E2%9C%93",lSe=function(e,r){var n={__proto__:null},s=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;s=s.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var i=r.parameterLimit===1/0?void 0:r.parameterLimit,o=s.split(r.delimiter,i),a=-1,u,c=r.charset;if(r.charsetSentinel)for(u=0;u<o.length;++u)o[u].indexOf("utf8=")===0&&(o[u]===cSe?c="utf-8":o[u]===uSe&&(c="iso-8859-1"),a=u,u=o.length);for(u=0;u<o.length;++u)if(u!==a){var l=o[u],d=l.indexOf("]="),p=d===-1?l.indexOf("="):d+1,f,h;p===-1?(f=r.decoder(l,mr.decoder,c,"key"),h=r.strictNullHandling?null:""):(f=r.decoder(l.slice(0,p),mr.decoder,c,"key"),h=vp.maybeMap(gJ(l.slice(p+1),r),function(g){return r.decoder(g,mr.decoder,c,"value")})),h&&r.interpretNumericEntities&&c==="iso-8859-1"&&(h=aSe(h)),l.indexOf("[]=")>-1&&(h=oSe(h)?[h]:h);var m=bT.call(n,f);m&&r.duplicates==="combine"?n[f]=vp.combine(n[f],h):(!m||r.duplicates==="last")&&(n[f]=h)}return n},dSe=function(t,e,r,n){for(var s=n?e:gJ(e,r),i=t.length-1;i>=0;--i){var o,a=t[i];if(a==="[]"&&r.parseArrays)o=r.allowEmptyArrays&&(s===""||r.strictNullHandling&&s===null)?[]:[].concat(s);else{o=r.plainObjects?Object.create(null):{};var u=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=r.decodeDotInKeys?u.replace(/%2E/g,"."):u,l=parseInt(c,10);!r.parseArrays&&c===""?o={0:s}:!isNaN(l)&&a!==c&&String(l)===c&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(o=[],o[l]=s):c!=="__proto__"&&(o[c]=s)}s=o}return s},fSe=function(e,r,n,s){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,u=n.depth>0&&o.exec(i),c=u?i.slice(0,u.index):i,l=[];if(c){if(!n.plainObjects&&bT.call(Object.prototype,c)&&!n.allowPrototypes)return;l.push(c)}for(var d=0;n.depth>0&&(u=a.exec(i))!==null&&d<n.depth;){if(d+=1,!n.plainObjects&&bT.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(u[1])}if(u){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");l.push("["+i.slice(u.index)+"]")}return dSe(l,r,n,s)}},pSe=function(e){if(!e)return mr;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?mr.charset:e.charset,n=typeof e.duplicates>"u"?mr.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var s=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:mr.allowDots:!!e.allowDots;return{allowDots:s,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:mr.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:mr.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:mr.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:mr.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:mr.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:mr.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:mr.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:mr.decoder,delimiter:typeof e.delimiter=="string"||vp.isRegExp(e.delimiter)?e.delimiter:mr.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:mr.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:mr.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:mr.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:mr.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:mr.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:mr.strictNullHandling}};vJ.exports=function(t,e){var r=pSe(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?lSe(t,r):t,s=r.plainObjects?Object.create(null):{},i=Object.keys(n),o=0;o<i.length;++o){var a=i[o],u=fSe(a,n[a],r,typeof t=="string");s=vp.merge(s,u,r)}return r.allowSparse===!0?s:vp.compact(s)}});var _J=b((zje,wJ)=>{"use strict";var hSe=mJ(),ySe=bJ(),mSe=A1();wJ.exports={formats:mSe,parse:ySe,stringify:hSe}});var D1=b(wp=>{"use strict";var gSe=aJ();function Yi(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var vSe=/^([a-z0-9.+-]+:)/i,bSe=/:[0-9]*$/,wSe=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,_Se=["<",">",'"',"`"," ","\r",`
`,"	"],ESe=["{","}","|","\\","^","`"].concat(_Se),wT=["'"].concat(ESe),EJ=["%","/","?",";","#"].concat(wT),SJ=["/","?","#"],SSe=255,AJ=/^[+a-z0-9A-Z_-]{0,63}$/,ASe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,xSe={javascript:!0,"javascript:":!0},_T={javascript:!0,"javascript:":!0},bp={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},ET=_J();function Wm(t,e,r){if(t&&typeof t=="object"&&t instanceof Yi)return t;var n=new Yi;return n.parse(t,e,r),n}Yi.prototype.parse=function(t,e,r){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),s=n!==-1&&n<t.indexOf("#")?"?":"#",i=t.split(s),o=/\\/g;i[0]=i[0].replace(o,"/"),t=i.join(s);var a=t;if(a=a.trim(),!r&&t.split("#").length===1){var u=wSe.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],e?this.query=ET.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=vSe.exec(a);if(c){c=c[0];var l=c.toLowerCase();this.protocol=l,a=a.substr(c.length)}if(r||c||a.match(/^\/\/[^@/]+@[^@/]+/)){var d=a.substr(0,2)==="//";d&&!(c&&_T[c])&&(a=a.substr(2),this.slashes=!0)}if(!_T[c]&&(d||c&&!bp[c])){for(var p=-1,f=0;f<SJ.length;f++){var h=a.indexOf(SJ[f]);h!==-1&&(p===-1||h<p)&&(p=h)}var m,g;p===-1?g=a.lastIndexOf("@"):g=a.lastIndexOf("@",p),g!==-1&&(m=a.slice(0,g),a=a.slice(g+1),this.auth=decodeURIComponent(m)),p=-1;for(var f=0;f<EJ.length;f++){var h=a.indexOf(EJ[f]);h!==-1&&(p===-1||h<p)&&(p=h)}p===-1&&(p=a.length),this.host=a.slice(0,p),a=a.slice(p),this.parseHost(),this.hostname=this.hostname||"";var _=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!_)for(var D=this.hostname.split(/\./),f=0,v=D.length;f<v;f++){var E=D[f];if(E&&!E.match(AJ)){for(var S="",P=0,C=E.length;P<C;P++)E.charCodeAt(P)>127?S+="x":S+=E[P];if(!S.match(AJ)){var B=D.slice(0,f),F=D.slice(f+1),I=E.match(ASe);I&&(B.push(I[1]),F.unshift(I[2])),F.length&&(a="/"+F.join(".")+a),this.hostname=B.join(".");break}}}this.hostname.length>SSe?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=gSe.toASCII(this.hostname));var $=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+$,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!xSe[l])for(var f=0,v=wT.length;f<v;f++){var X=wT[f];if(a.indexOf(X)!==-1){var Q=encodeURIComponent(X);Q===X&&(Q=escape(X)),a=a.split(X).join(Q)}}var K=a.indexOf("#");K!==-1&&(this.hash=a.substr(K),a=a.slice(0,K));var G=a.indexOf("?");if(G!==-1?(this.search=a.substr(G),this.query=a.substr(G+1),e&&(this.query=ET.parse(this.query)),a=a.slice(0,G)):e&&(this.search="",this.query={}),a&&(this.pathname=a),bp[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var $=this.pathname||"",ne=this.search||"";this.path=$+ne}return this.href=this.format(),this};function DSe(t){return typeof t=="string"&&(t=Wm(t)),t instanceof Yi?t.format():Yi.prototype.format.call(t)}Yi.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",s=!1,i="";this.host?s=t+this.host:this.hostname&&(s=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(i=ET.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||i&&"?"+i||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||bp[e])&&s!==!1?(s="//"+(s||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):s||(s=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+s+r+o+n};function CSe(t,e){return Wm(t,!1,!0).resolve(e)}Yi.prototype.resolve=function(t){return this.resolveObject(Wm(t,!1,!0)).format()};function PSe(t,e){return t?Wm(t,!1,!0).resolveObject(e):e}Yi.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new Yi;e.parse(t,!1,!0),t=e}for(var r=new Yi,n=Object.keys(this),s=0;s<n.length;s++){var i=n[s];r[i]=this[i]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var u=o[a];u!=="protocol"&&(r[u]=t[u])}return bp[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!bp[t.protocol]){for(var c=Object.keys(t),l=0;l<c.length;l++){var d=c[l];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!_T[t.protocol]){for(var v=(t.pathname||"").split("/");v.length&&!(t.host=v.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),v[0]!==""&&v.unshift(""),v.length<2&&v.unshift(""),r.pathname=v.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var p=r.pathname||"",f=r.search||"";r.path=p+f}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var h=r.pathname&&r.pathname.charAt(0)==="/",m=t.host||t.pathname&&t.pathname.charAt(0)==="/",g=m||h||r.host&&t.pathname,_=g,D=r.pathname&&r.pathname.split("/")||[],v=t.pathname&&t.pathname.split("/")||[],E=r.protocol&&!bp[r.protocol];if(E&&(r.hostname="",r.port=null,r.host&&(D[0]===""?D[0]=r.host:D.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(v[0]===""?v[0]=t.host:v.unshift(t.host)),t.host=null),g=g&&(v[0]===""||D[0]==="")),m)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,D=v;else if(v.length)D||(D=[]),D.pop(),D=D.concat(v),r.search=t.search,r.query=t.query;else if(t.search!=null){if(E){r.host=D.shift(),r.hostname=r.host;var S=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;S&&(r.auth=S.shift(),r.hostname=S.shift(),r.host=r.hostname)}return r.search=t.search,r.query=t.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!D.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var P=D.slice(-1)[0],C=(r.host||t.host||D.length>1)&&(P==="."||P==="..")||P==="",B=0,F=D.length;F>=0;F--)P=D[F],P==="."?D.splice(F,1):P===".."?(D.splice(F,1),B++):B&&(D.splice(F,1),B--);if(!g&&!_)for(;B--;B)D.unshift("..");g&&D[0]!==""&&(!D[0]||D[0].charAt(0)!=="/")&&D.unshift(""),C&&D.join("/").substr(-1)!=="/"&&D.push("");var I=D[0]===""||D[0]&&D[0].charAt(0)==="/";if(E){r.hostname=I?"":D.length?D.shift():"",r.host=r.hostname;var S=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;S&&(r.auth=S.shift(),r.hostname=S.shift(),r.host=r.hostname)}return g=g||r.host&&D.length,g&&!I&&D.unshift(""),D.length>0?r.pathname=D.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};Yi.prototype.parseHost=function(){var t=this.host,e=bSe.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};wp.parse=Wm;wp.resolve=CSe;wp.resolveObject=PSe;wp.format=DSe;wp.Url=Yi});var Gu=b((gi,DT)=>{"use strict";var DJ=D1(),ST=gi.ValidationError=function(e,r,n,s,i,o){if(Array.isArray(s)?(this.path=s,this.property=s.reduce(function(u,c){return u+CJ(c)},"instance")):s!==void 0&&(this.property=s),e&&(this.message=e),n){var a=n.$id||n.id;this.schema=a||n}r!==void 0&&(this.instance=r),this.name=i,this.argument=o,this.stack=this.toString()};ST.prototype.toString=function(){return this.property+" "+this.message};var C1=gi.ValidatorResult=function(e,r,n,s){this.instance=e,this.schema=r,this.options=n,this.path=s.path,this.propertyPath=s.propertyPath,this.errors=[],this.throwError=n&&n.throwError,this.throwFirst=n&&n.throwFirst,this.throwAll=n&&n.throwAll,this.disableFormat=n&&n.disableFormat===!0};C1.prototype.addError=function(e){var r;if(typeof e=="string")r=new ST(e,this.instance,this.schema,this.path);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");r=new ST(e.message,this.instance,this.schema,this.path,e.name,e.argument)}if(this.errors.push(r),this.throwFirst)throw new Ul(this);if(this.throwError)throw r;return r};C1.prototype.importErrors=function(e){typeof e=="string"||e&&e.validatorType?this.addError(e):e&&e.errors&&(this.errors=this.errors.concat(e.errors))};function OSe(t,e){return e+": "+t.toString()+`
`}C1.prototype.toString=function(e){return this.errors.map(OSe).join("")};Object.defineProperty(C1.prototype,"valid",{get:function(){return!this.errors.length}});DT.exports.ValidatorResultError=Ul;function Ul(t){Error.captureStackTrace&&Error.captureStackTrace(this,Ul),this.instance=t.instance,this.schema=t.schema,this.options=t.options,this.errors=t.errors}Ul.prototype=new Error;Ul.prototype.constructor=Ul;Ul.prototype.name="Validation Error";var xJ=gi.SchemaError=function t(e,r){this.message=e,this.schema=r,Error.call(this,e),Error.captureStackTrace(this,t)};xJ.prototype=Object.create(Error.prototype,{constructor:{value:xJ,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var AT=gi.SchemaContext=function(e,r,n,s,i){this.schema=e,this.options=r,Array.isArray(n)?(this.path=n,this.propertyPath=n.reduce(function(o,a){return o+CJ(a)},"instance")):this.propertyPath=n,this.base=s,this.schemas=i};AT.prototype.resolve=function(e){return DJ.resolve(this.base,e)};AT.prototype.makeChild=function(e,r){var n=r===void 0?this.path:this.path.concat([r]),s=e.$id||e.id,i=DJ.resolve(this.base,s||""),o=new AT(e,this.options,n,i,Object.create(this.schemas));return s&&!o.schemas[i]&&(o.schemas[i]=e),o};var Ts=gi.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,duration:/P(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S)|\d+(D|M(\d+D)?|Y(\d+M(\d+D)?)?)(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S))?|\d+W)/i,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"idn-email":/^("(?:[!#-\[\]-\u{10FFFF}]|\\[\t -\u{10FFFF}])*"|[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*)@([!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*|\[[!-Z\^-\u{10FFFF}]*\])$/u,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"uri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/,iri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"iri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~-\u{10FFFF}]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~-\u{10FFFF}])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/u,uuid:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,"uri-template":/(%[0-9a-f]{2}|[!#$&(-;=?@\[\]_a-z~]|\{[!#&+,./;=?@|]?(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?(,(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?)*\})*/iu,"json-pointer":/^(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*$/iu,"relative-json-pointer":/^\d+(#|(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*)$/iu,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"utc-millisec":function(t){return typeof t=="string"&&parseFloat(t)===parseInt(t,10)&&!isNaN(t)},regex:function(t){var e=!0;try{new RegExp(t)}catch{e=!1}return e},style:/[\r\n\t ]*[^\r\n\t ][^:]*:[\r\n\t ]*[^\r\n\t ;]*[\r\n\t ]*;?/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/};Ts.regexp=Ts.regex;Ts.pattern=Ts.regex;Ts.ipv4=Ts["ip-address"];gi.isFormat=function(e,r,n){if(typeof e=="string"&&Ts[r]!==void 0){if(Ts[r]instanceof RegExp)return Ts[r].test(e);if(typeof Ts[r]=="function")return Ts[r](e)}else if(n&&n.customFormats&&typeof n.customFormats[r]=="function")return n.customFormats[r](e);return!0};var CJ=gi.makeSuffix=function(e){return e=e.toString(),!e.match(/[.\s\[\]]/)&&!e.match(/^[\d]/)?"."+e:e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]"};gi.deepCompareStrict=function t(e,r){if(typeof e!=typeof r)return!1;if(Array.isArray(e))return!Array.isArray(r)||e.length!==r.length?!1:e.every(function(i,o){return t(e[o],r[o])});if(typeof e=="object"){if(!e||!r)return e===r;var n=Object.keys(e),s=Object.keys(r);return n.length!==s.length?!1:n.every(function(i){return t(e[i],r[i])})}return e===r};function TSe(t,e,r,n){typeof r=="object"?e[n]=xT(t[n],r):t.indexOf(r)===-1&&e.push(r)}function BSe(t,e,r){e[r]=t[r]}function ISe(t,e,r,n){typeof e[n]!="object"||!e[n]?r[n]=e[n]:t[n]?r[n]=xT(t[n],e[n]):r[n]=e[n]}function xT(t,e){var r=Array.isArray(e),n=r&&[]||{};return r?(t=t||[],n=n.concat(t),e.forEach(TSe.bind(null,t,n))):(t&&typeof t=="object"&&Object.keys(t).forEach(BSe.bind(null,t,n)),Object.keys(e).forEach(ISe.bind(null,t,e,n))),n}DT.exports.deepMerge=xT;gi.objectGetPath=function(e,r){for(var n=r.split("/").slice(1),s;typeof(s=n.shift())=="string";){var i=decodeURIComponent(s.replace(/~0/,"~").replace(/~1/g,"/"));if(!(i in e))return;e=e[i]}return e};function FSe(t){return"/"+encodeURIComponent(t).replace(/~/g,"%7E")}gi.encodePath=function(e){return e.map(FSe).join("")};gi.getDecimalPlaces=function(e){var r=0;if(isNaN(e))return r;typeof e!="number"&&(e=Number(e));var n=e.toString().split("e");if(n.length===2){if(n[1][0]!=="-")return r;r=Number(n[1].slice(1))}var s=n[0].split(".");return s.length===2&&(r+=s[1].length),r};gi.isSchema=function(e){return typeof e=="object"&&e||typeof e=="boolean"}});var BJ=b((Hje,TJ)=>{"use strict";var vi=Gu(),Pt=vi.ValidatorResult,Zu=vi.SchemaError,CT={};CT.ignoreProperties={id:!0,default:!0,description:!0,title:!0,additionalItems:!0,then:!0,else:!0,$schema:!0,$ref:!0,extends:!0};var Ot=CT.validators={};Ot.type=function(e,r,n,s){if(e===void 0)return null;var i=new Pt(e,r,n,s),o=Array.isArray(r.type)?r.type:[r.type];if(!o.some(this.testType.bind(this,e,r,n,s))){var a=o.map(function(u){if(u){var c=u.$id||u.id;return c?"<"+c+">":u+""}});i.addError({name:"type",argument:a,message:"is not of a type(s) "+a})}return i};function PT(t,e,r,n,s){var i=e.throwError,o=e.throwAll;e.throwError=!1,e.throwAll=!1;var a=this.validateSchema(t,s,e,r);return e.throwError=i,e.throwAll=o,!a.valid&&n instanceof Function&&n(a),a.valid}Ot.anyOf=function(e,r,n,s){if(e===void 0)return null;var i=new Pt(e,r,n,s),o=new Pt(e,r,n,s);if(!Array.isArray(r.anyOf))throw new Zu("anyOf must be an array");if(!r.anyOf.some(PT.bind(this,e,n,s,function(u){o.importErrors(u)}))){var a=r.anyOf.map(function(u,c){var l=u.$id||u.id;return l?"<"+l+">":u.title&&JSON.stringify(u.title)||u.$ref&&"<"+u.$ref+">"||"[subschema "+c+"]"});n.nestedErrors&&i.importErrors(o),i.addError({name:"anyOf",argument:a,message:"is not any of "+a.join(",")})}return i};Ot.allOf=function(e,r,n,s){if(e===void 0)return null;if(!Array.isArray(r.allOf))throw new Zu("allOf must be an array");var i=new Pt(e,r,n,s),o=this;return r.allOf.forEach(function(a,u){var c=o.validateSchema(e,a,n,s);if(!c.valid){var l=a.$id||a.id,d=l||a.title&&JSON.stringify(a.title)||a.$ref&&"<"+a.$ref+">"||"[subschema "+u+"]";i.addError({name:"allOf",argument:{id:d,length:c.errors.length,valid:c},message:"does not match allOf schema "+d+" with "+c.errors.length+" error[s]:"}),i.importErrors(c)}}),i};Ot.oneOf=function(e,r,n,s){if(e===void 0)return null;if(!Array.isArray(r.oneOf))throw new Zu("oneOf must be an array");var i=new Pt(e,r,n,s),o=new Pt(e,r,n,s),a=r.oneOf.filter(PT.bind(this,e,n,s,function(c){o.importErrors(c)})).length,u=r.oneOf.map(function(c,l){var d=c.$id||c.id;return d||c.title&&JSON.stringify(c.title)||c.$ref&&"<"+c.$ref+">"||"[subschema "+l+"]"});return a!==1&&(n.nestedErrors&&i.importErrors(o),i.addError({name:"oneOf",argument:u,message:"is not exactly one from "+u.join(",")})),i};Ot.if=function(e,r,n,s){if(e===void 0)return null;if(!vi.isSchema(r.if))throw new Error('Expected "if" keyword to be a schema');var i=PT.call(this,e,n,s,null,r.if),o=new Pt(e,r,n,s),a;if(i){if(r.then===void 0)return;if(!vi.isSchema(r.then))throw new Error('Expected "then" keyword to be a schema');a=this.validateSchema(e,r.then,n,s.makeChild(r.then)),o.importErrors(a)}else{if(r.else===void 0)return;if(!vi.isSchema(r.else))throw new Error('Expected "else" keyword to be a schema');a=this.validateSchema(e,r.else,n,s.makeChild(r.else)),o.importErrors(a)}return o};function OT(t,e){if(Object.hasOwnProperty.call(t,e))return t[e];if(e in t){for(;t=Object.getPrototypeOf(t);)if(Object.propertyIsEnumerable.call(t,e))return t[e]}}Ot.propertyNames=function(e,r,n,s){if(this.types.object(e)){var i=new Pt(e,r,n,s),o=r.propertyNames!==void 0?r.propertyNames:{};if(!vi.isSchema(o))throw new Zu('Expected "propertyNames" to be a schema (object or boolean)');for(var a in e)if(OT(e,a)!==void 0){var u=this.validateSchema(a,o,n,s.makeChild(o));i.importErrors(u)}return i}};Ot.properties=function(e,r,n,s){if(this.types.object(e)){var i=new Pt(e,r,n,s),o=r.properties||{};for(var a in o){var u=o[a];if(u!==void 0){if(u===null)throw new Zu('Unexpected null, expected schema in "properties"');typeof n.preValidateProperty=="function"&&n.preValidateProperty(e,a,u,n,s);var c=OT(e,a),l=this.validateSchema(c,u,n,s.makeChild(u,a));l.instance!==i.instance[a]&&(i.instance[a]=l.instance),i.importErrors(l)}}return i}};function PJ(t,e,r,n,s,i){if(this.types.object(t)&&!(e.properties&&e.properties[s]!==void 0))if(e.additionalProperties===!1)i.addError({name:"additionalProperties",argument:s,message:"is not allowed to have the additional property "+JSON.stringify(s)});else{var o=e.additionalProperties||{};typeof r.preValidateProperty=="function"&&r.preValidateProperty(t,s,o,r,n);var a=this.validateSchema(t[s],o,r,n.makeChild(o,s));a.instance!==i.instance[s]&&(i.instance[s]=a.instance),i.importErrors(a)}}Ot.patternProperties=function(e,r,n,s){if(this.types.object(e)){var i=new Pt(e,r,n,s),o=r.patternProperties||{};for(var a in e){var u=!0;for(var c in o){var l=o[c];if(l!==void 0){if(l===null)throw new Zu('Unexpected null, expected schema in "patternProperties"');try{var d=new RegExp(c,"u")}catch{d=new RegExp(c)}if(d.test(a)){u=!1,typeof n.preValidateProperty=="function"&&n.preValidateProperty(e,a,l,n,s);var p=this.validateSchema(e[a],l,n,s.makeChild(l,a));p.instance!==i.instance[a]&&(i.instance[a]=p.instance),i.importErrors(p)}}}u&&PJ.call(this,e,r,n,s,a,i)}return i}};Ot.additionalProperties=function(e,r,n,s){if(this.types.object(e)){if(r.patternProperties)return null;var i=new Pt(e,r,n,s);for(var o in e)PJ.call(this,e,r,n,s,o,i);return i}};Ot.minProperties=function(e,r,n,s){if(this.types.object(e)){var i=new Pt(e,r,n,s),o=Object.keys(e);return o.length>=r.minProperties||i.addError({name:"minProperties",argument:r.minProperties,message:"does not meet minimum property length of "+r.minProperties}),i}};Ot.maxProperties=function(e,r,n,s){if(this.types.object(e)){var i=new Pt(e,r,n,s),o=Object.keys(e);return o.length<=r.maxProperties||i.addError({name:"maxProperties",argument:r.maxProperties,message:"does not meet maximum property length of "+r.maxProperties}),i}};Ot.items=function(e,r,n,s){var i=this;if(this.types.array(e)&&r.items!==void 0){var o=new Pt(e,r,n,s);return e.every(function(a,u){if(Array.isArray(r.items))var c=r.items[u]===void 0?r.additionalItems:r.items[u];else var c=r.items;if(c===void 0)return!0;if(c===!1)return o.addError({name:"items",message:"additionalItems not permitted"}),!1;var l=i.validateSchema(a,c,n,s.makeChild(c,u));return l.instance!==o.instance[u]&&(o.instance[u]=l.instance),o.importErrors(l),!0}),o}};Ot.contains=function(e,r,n,s){var i=this;if(this.types.array(e)&&r.contains!==void 0){if(!vi.isSchema(r.contains))throw new Error('Expected "contains" keyword to be a schema');var o=new Pt(e,r,n,s),a=e.some(function(u,c){var l=i.validateSchema(u,r.contains,n,s.makeChild(r.contains,c));return l.errors.length===0});return a===!1&&o.addError({name:"contains",argument:r.contains,message:"must contain an item matching given schema"}),o}};Ot.minimum=function(e,r,n,s){if(this.types.number(e)){var i=new Pt(e,r,n,s);return r.exclusiveMinimum&&r.exclusiveMinimum===!0?e>r.minimum||i.addError({name:"minimum",argument:r.minimum,message:"must be greater than "+r.minimum}):e>=r.minimum||i.addError({name:"minimum",argument:r.minimum,message:"must be greater than or equal to "+r.minimum}),i}};Ot.maximum=function(e,r,n,s){if(this.types.number(e)){var i=new Pt(e,r,n,s);return r.exclusiveMaximum&&r.exclusiveMaximum===!0?e<r.maximum||i.addError({name:"maximum",argument:r.maximum,message:"must be less than "+r.maximum}):e<=r.maximum||i.addError({name:"maximum",argument:r.maximum,message:"must be less than or equal to "+r.maximum}),i}};Ot.exclusiveMinimum=function(e,r,n,s){if(typeof r.exclusiveMinimum!="boolean"&&this.types.number(e)){var i=new Pt(e,r,n,s),o=e>r.exclusiveMinimum;return o||i.addError({name:"exclusiveMinimum",argument:r.exclusiveMinimum,message:"must be strictly greater than "+r.exclusiveMinimum}),i}};Ot.exclusiveMaximum=function(e,r,n,s){if(typeof r.exclusiveMaximum!="boolean"&&this.types.number(e)){var i=new Pt(e,r,n,s),o=e<r.exclusiveMaximum;return o||i.addError({name:"exclusiveMaximum",argument:r.exclusiveMaximum,message:"must be strictly less than "+r.exclusiveMaximum}),i}};var OJ=function(e,r,n,s,i,o){if(this.types.number(e)){var a=r[i];if(a==0)throw new Zu(i+" cannot be zero");var u=new Pt(e,r,n,s),c=vi.getDecimalPlaces(e),l=vi.getDecimalPlaces(a),d=Math.max(c,l),p=Math.pow(10,d);return Math.round(e*p)%Math.round(a*p)!==0&&u.addError({name:i,argument:a,message:o+JSON.stringify(a)}),u}};Ot.multipleOf=function(e,r,n,s){return OJ.call(this,e,r,n,s,"multipleOf","is not a multiple of (divisible by) ")};Ot.divisibleBy=function(e,r,n,s){return OJ.call(this,e,r,n,s,"divisibleBy","is not divisible by (multiple of) ")};Ot.required=function(e,r,n,s){var i=new Pt(e,r,n,s);return e===void 0&&r.required===!0?i.addError({name:"required",message:"is required"}):this.types.object(e)&&Array.isArray(r.required)&&r.required.forEach(function(o){OT(e,o)===void 0&&i.addError({name:"required",argument:o,message:"requires property "+JSON.stringify(o)})}),i};Ot.pattern=function(e,r,n,s){if(this.types.string(e)){var i=new Pt(e,r,n,s),o=r.pattern;try{var a=new RegExp(o,"u")}catch{a=new RegExp(o)}return e.match(a)||i.addError({name:"pattern",argument:r.pattern,message:"does not match pattern "+JSON.stringify(r.pattern.toString())}),i}};Ot.format=function(e,r,n,s){if(e!==void 0){var i=new Pt(e,r,n,s);return!i.disableFormat&&!vi.isFormat(e,r.format,this)&&i.addError({name:"format",argument:r.format,message:"does not conform to the "+JSON.stringify(r.format)+" format"}),i}};Ot.minLength=function(e,r,n,s){if(this.types.string(e)){var i=new Pt(e,r,n,s),o=e.match(/[\uDC00-\uDFFF]/g),a=e.length-(o?o.length:0);return a>=r.minLength||i.addError({name:"minLength",argument:r.minLength,message:"does not meet minimum length of "+r.minLength}),i}};Ot.maxLength=function(e,r,n,s){if(this.types.string(e)){var i=new Pt(e,r,n,s),o=e.match(/[\uDC00-\uDFFF]/g),a=e.length-(o?o.length:0);return a<=r.maxLength||i.addError({name:"maxLength",argument:r.maxLength,message:"does not meet maximum length of "+r.maxLength}),i}};Ot.minItems=function(e,r,n,s){if(this.types.array(e)){var i=new Pt(e,r,n,s);return e.length>=r.minItems||i.addError({name:"minItems",argument:r.minItems,message:"does not meet minimum length of "+r.minItems}),i}};Ot.maxItems=function(e,r,n,s){if(this.types.array(e)){var i=new Pt(e,r,n,s);return e.length<=r.maxItems||i.addError({name:"maxItems",argument:r.maxItems,message:"does not meet maximum length of "+r.maxItems}),i}};function kSe(t,e,r){var n,s=r.length;for(n=e+1,s;n<s;n++)if(vi.deepCompareStrict(t,r[n]))return!1;return!0}Ot.uniqueItems=function(e,r,n,s){if(r.uniqueItems===!0&&this.types.array(e)){var i=new Pt(e,r,n,s);return e.every(kSe)||i.addError({name:"uniqueItems",message:"contains duplicate item"}),i}};Ot.dependencies=function(e,r,n,s){if(this.types.object(e)){var i=new Pt(e,r,n,s);for(var o in r.dependencies)if(e[o]!==void 0){var a=r.dependencies[o],u=s.makeChild(a,o);if(typeof a=="string"&&(a=[a]),Array.isArray(a))a.forEach(function(l){e[l]===void 0&&i.addError({name:"dependencies",argument:u.propertyPath,message:"property "+l+" not found, required by "+u.propertyPath})});else{var c=this.validateSchema(e,a,n,u);i.instance!==c.instance&&(i.instance=c.instance),c&&c.errors.length&&(i.addError({name:"dependencies",argument:u.propertyPath,message:"does not meet dependency required by "+u.propertyPath}),i.importErrors(c))}}return i}};Ot.enum=function(e,r,n,s){if(e===void 0)return null;if(!Array.isArray(r.enum))throw new Zu("enum expects an array",r);var i=new Pt(e,r,n,s);return r.enum.some(vi.deepCompareStrict.bind(null,e))||i.addError({name:"enum",argument:r.enum,message:"is not one of enum values: "+r.enum.map(String).join(",")}),i};Ot.const=function(e,r,n,s){if(e===void 0)return null;var i=new Pt(e,r,n,s);return vi.deepCompareStrict(r.const,e)||i.addError({name:"const",argument:r.const,message:"does not exactly match expected constant: "+r.const}),i};Ot.not=Ot.disallow=function(e,r,n,s){var i=this;if(e===void 0)return null;var o=new Pt(e,r,n,s),a=r.not||r.disallow;return a?(Array.isArray(a)||(a=[a]),a.forEach(function(u){if(i.testType(e,r,n,s,u)){var c=u&&(u.$id||u.id),l=c||u;o.addError({name:"not",argument:l,message:"is of prohibited type "+l})}}),o):null};TJ.exports=CT});var P1=b((Wje,TT)=>{"use strict";var IJ=D1(),RSe=Gu();TT.exports.SchemaScanResult=FJ;function FJ(t,e){this.id=t,this.ref=e}TT.exports.scan=function(e,r){function n(u,c){if(!(!c||typeof c!="object")){if(c.$ref){var l=IJ.resolve(u,c.$ref);a[l]=a[l]?a[l]+1:0;return}var d=c.$id||c.id,p=d?IJ.resolve(u,d):u;if(p){if(p.indexOf("#")<0&&(p+="#"),o[p]){if(!RSe.deepCompareStrict(o[p],c))throw new Error("Schema <"+p+"> already exists with different definition");return o[p]}o[p]=c,p[p.length-1]=="#"&&(o[p.substring(0,p.length-1)]=c)}s(p+"/items",Array.isArray(c.items)?c.items:[c.items]),s(p+"/extends",Array.isArray(c.extends)?c.extends:[c.extends]),n(p+"/additionalItems",c.additionalItems),i(p+"/properties",c.properties),n(p+"/additionalProperties",c.additionalProperties),i(p+"/definitions",c.definitions),i(p+"/patternProperties",c.patternProperties),i(p+"/dependencies",c.dependencies),s(p+"/disallow",c.disallow),s(p+"/allOf",c.allOf),s(p+"/anyOf",c.anyOf),s(p+"/oneOf",c.oneOf),n(p+"/not",c.not)}}function s(u,c){if(Array.isArray(c))for(var l=0;l<c.length;l++)n(u+"/"+l,c[l])}function i(u,c){if(!(!c||typeof c!="object"))for(var l in c)n(u+"/"+l,c[l])}var o={},a={};return n(e,r),new FJ(o,a)}});var UJ=b((Gje,LJ)=>{"use strict";var kJ=D1(),RJ=BJ(),Kl=Gu(),$J=P1().scan,jJ=Kl.ValidatorResult,$Se=Kl.ValidatorResultError,Gm=Kl.SchemaError,NJ=Kl.SchemaContext,MJ="/",Xr=function t(){this.customFormats=Object.create(t.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(Bo),this.attributes=Object.create(RJ.validators)};Xr.prototype.customFormats={};Xr.prototype.schemas=null;Xr.prototype.types=null;Xr.prototype.attributes=null;Xr.prototype.unresolvedRefs=null;Xr.prototype.addSchema=function(e,r){var n=this;if(!e)return null;var s=$J(r||MJ,e),i=r||e.$id||e.id;for(var o in s.id)this.schemas[o]=s.id[o];for(var o in s.ref)this.unresolvedRefs.push(o);return this.unresolvedRefs=this.unresolvedRefs.filter(function(a){return typeof n.schemas[a]>"u"}),this.schemas[i]};Xr.prototype.addSubSchemaArray=function(e,r){if(Array.isArray(r))for(var n=0;n<r.length;n++)this.addSubSchema(e,r[n])};Xr.prototype.addSubSchemaObject=function(e,r){if(!(!r||typeof r!="object"))for(var n in r)this.addSubSchema(e,r[n])};Xr.prototype.setSchemas=function(e){this.schemas=e};Xr.prototype.getSchema=function(e){return this.schemas[e]};Xr.prototype.validate=function(e,r,n,s){if(typeof r!="boolean"&&typeof r!="object"||r===null)throw new Gm("Expected `schema` to be an object or boolean");n||(n={});var i=r.$id||r.id,o=kJ.resolve(n.base||MJ,i||"");if(!s){s=new NJ(r,n,[],o,Object.create(this.schemas)),s.schemas[o]||(s.schemas[o]=r);var a=$J(o,r);for(var u in a.id){var c=a.id[u];s.schemas[u]=c}}if(n.required&&e===void 0){var l=new jJ(e,r,n,s);return l.addError("is required, but is undefined"),l}var l=this.validateSchema(e,r,n,s);if(l){if(n.throwAll&&l.errors.length)throw new $Se(l)}else throw new Error("Result undefined");return l};function qJ(t){var e=typeof t=="string"?t:t.$ref;return typeof e=="string"?e:!1}Xr.prototype.validateSchema=function(e,r,n,s){var i=new jJ(e,r,n,s);if(typeof r=="boolean")r===!0?r={}:r===!1&&(r={type:[]});else if(!r)throw new Error("schema is undefined");if(r.extends)if(Array.isArray(r.extends)){var o={schema:r,ctx:s};r.extends.forEach(this.schemaTraverser.bind(this,o)),r=o.schema,o.schema=null,o.ctx=null,o=null}else r=Kl.deepMerge(r,this.superResolve(r.extends,s));var a=qJ(r);if(a){var u=this.resolve(r,a,s),c=new NJ(u.subschema,n,s.path,u.switchSchema,s.schemas);return this.validateSchema(e,u.subschema,n,c)}var l=n&&n.skipAttributes||[];for(var d in r)if(!RJ.ignoreProperties[d]&&l.indexOf(d)<0){var p=null,f=this.attributes[d];if(f)p=f.call(this,e,r,n,s);else if(n.allowUnknownAttributes===!1)throw new Gm("Unsupported attribute: "+d,r);p&&i.importErrors(p)}if(typeof n.rewrite=="function"){var h=n.rewrite.call(this,e,r,n,s);i.instance=h}return i};Xr.prototype.schemaTraverser=function(e,r){e.schema=Kl.deepMerge(e.schema,this.superResolve(r,e.ctx))};Xr.prototype.superResolve=function(e,r){var n=qJ(e);return n?this.resolve(e,n,r).subschema:e};Xr.prototype.resolve=function(e,r,n){if(r=n.resolve(r),n.schemas[r])return{subschema:n.schemas[r],switchSchema:r};var s=kJ.parse(r),i=s&&s.hash,o=i&&i.length&&r.substr(0,r.length-i.length);if(!o||!n.schemas[o])throw new Gm("no such schema <"+r+">",e);var a=Kl.objectGetPath(n.schemas[o],i.substr(1));if(a===void 0)throw new Gm("no such schema "+i+" located in <"+o+">",e);return{subschema:a,switchSchema:r}};Xr.prototype.testType=function(e,r,n,s,i){if(i!==void 0){if(i===null)throw new Gm('Unexpected null in "type" keyword');if(typeof this.types[i]=="function")return this.types[i].call(this,e);if(i&&typeof i=="object"){var o=this.validateSchema(e,i,n,s);return o===void 0||!(o&&o.errors.length)}return!0}};var Bo=Xr.prototype.types={};Bo.string=function(e){return typeof e=="string"};Bo.number=function(e){return typeof e=="number"&&isFinite(e)};Bo.integer=function(e){return typeof e=="number"&&e%1===0};Bo.boolean=function(e){return typeof e=="boolean"};Bo.array=function(e){return Array.isArray(e)};Bo.null=function(e){return e===null};Bo.date=function(e){return e instanceof Date};Bo.any=function(e){return!0};Bo.object=function(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!(e instanceof Date)};LJ.exports=Xr});var KJ=b((Zje,ja)=>{"use strict";var jSe=ja.exports.Validator=UJ();ja.exports.ValidatorResult=Gu().ValidatorResult;ja.exports.ValidatorResultError=Gu().ValidatorResultError;ja.exports.ValidationError=Gu().ValidationError;ja.exports.SchemaError=Gu().SchemaError;ja.exports.SchemaScanResult=P1().SchemaScanResult;ja.exports.scan=P1().scan;ja.exports.validate=function(t,e,r){var n=new jSe;return n.validate(t,e,r)}});var cH=qn(R1(),1);var YSe=new Uint8Array(0);function LT(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Xl(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function dH(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var m=0,g=0,_=0,D=h.length;_!==D&&h[_]===0;)_++,m++;for(var v=(D-_)*l+1>>>0,E=new Uint8Array(v);_!==D;){for(var S=h[_],P=0,C=v-1;(S!==0||P<g)&&C!==-1;C--,P++)S+=256*E[C]>>>0,E[C]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");g=P,_++}for(var B=v-g;B!==v&&E[B]===0;)B++;for(var F=u.repeat(m);B<v;++B)F+=t.charAt(E[B]);return F}function p(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var m=0;if(h[m]!==" "){for(var g=0,_=0;h[m]===u;)g++,m++;for(var D=(h.length-m)*c+1>>>0,v=new Uint8Array(D);h[m];){var E=r[h.charCodeAt(m)];if(E===255)return;for(var S=0,P=D-1;(E!==0||S<_)&&P!==-1;P--,S++)E+=a*v[P]>>>0,v[P]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");_=S,m++}if(h[m]!==" "){for(var C=D-_;C!==D&&v[C]===0;)C++;for(var B=new Uint8Array(g+(D-C)),F=g;C!==D;)B[F++]=v[C++];return B}}}function f(h){var m=p(h);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:p,decode:f}}var fH=dH,pH=fH,UT=pH;var $1=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},j1=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return KT(this,e)}},N1=class{decoders;constructor(e){this.decoders=e}or(e){return KT(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function KT(t,e){return new N1({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}var M1=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new $1(e,r,n),this.decoder=new j1(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function VT({name:t,prefix:e,encode:r,decode:n}){return new M1(t,e,r,n)}function q1({name:t,prefix:e,alphabet:r}){let{encode:n,decode:s}=UT(r,t);return VT({prefix:e,name:t,encode:n,decode:i=>Xl(s(i))})}function hH(t,e,r,n){let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,u=0,c=0;for(let l=0;l<i;++l){let d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o}function yH(t,e,r){let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o!==0&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i}function Dn({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return VT({prefix:e,name:t,encode(s){return yH(s,n,r)},decode(s){return hH(s,n,r,t)}})}var Pp=Dn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),iAe=Dn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sAe=Dn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),oAe=Dn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),aAe=Dn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),uAe=Dn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cAe=Dn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),lAe=Dn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),L1=Dn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ln=q1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),pAe=q1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var mAe=Dn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),gAe=Dn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Rs=Dn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),vAe=Dn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function zT(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function JT(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function i0(t){let r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var Op=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},HT=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,u){o=t[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},o)}},s0=new TextEncoder,ic=new TextDecoder,Ce=class t{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new t(e,"ArrayBuffer")}static asyncIterable(e){if(!JT(e))throw new TypeError("Input must be of type AsyncIterable.");return new t(e,"AsyncIterable")}static base32Z(e){return new t(e,"Base32Z")}static base58Btc(e){return new t(e,"Base58Btc")}static base64Url(e){return new t(e,"Base64Url")}static bufferSource(e){return new t(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new t(e,"Hex")}static multibase(e){return new t(e,"Multibase")}static object(e){return new t(e,"Object")}static string(e){return new t(e,"String")}static uint8Array(e){return new t(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return Ln.baseDecode(this.data).buffer;case"Base64Url":return Rs.baseDecode(this.data).buffer;case"BufferSource":{if(i0(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return zT(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return Op(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return L1.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return Ln.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return Ln.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return Rs.baseEncode(e)}case"BufferSource":{let e=this.toUint8Array();return Rs.baseEncode(e)}case"Object":{let e=JSON.stringify(this.data),r=s0.encode(e);return Rs.baseEncode(r)}case"String":{let e=s0.encode(this.data);return Rs.baseEncode(e)}case"Uint8Array":return Rs.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){return Op(this,void 0,void 0,function*(){var e,r,n,s;switch(this.format){case"AsyncIterable":{let u=[];try{for(var i=!0,o=HT(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;let l=s;u.push(l)}}catch(l){r={error:l}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){let e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Base64Url":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{let e=Rs.baseDecode(this.data),r=ic.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{let e=ic.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return Op(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return ic.decode(this.data);case"Base64Url":{let e=Rs.baseDecode(this.data);return ic.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return ic.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){return Op(this,void 0,void 0,function*(){var e,r,n,s;switch(this.format){case"AsyncIterable":{let u="";try{for(var i=!0,o=HT(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;let c=s;typeof c=="string"?u+=c:u+=ic.decode(c,{stream:!0})}}catch(c){r={error:c}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return u+=ic.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return L1.baseDecode(this.data);case"Base58Btc":return Ln.baseDecode(this.data);case"Base64Url":return Rs.baseDecode(this.data);case"BufferSource":{let e=i0(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{let e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){let n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{let e=JSON.stringify(this.data);return s0.encode(e)}case"String":return s0.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return Op(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var $o={};Cr($o,{decode:()=>Yl,encodeTo:()=>sc,encodingLength:()=>oc});var mH=ZT,WT=128,gH=127,vH=~gH,bH=Math.pow(2,31);function ZT(t,e,r){e=e||[],r=r||0;for(var n=r;t>=bH;)e[r++]=t&255|WT,t/=128;for(;t&vH;)e[r++]=t&255|WT,t>>>=7;return e[r]=t|0,ZT.bytes=r-n+1,e}var wH=U1,_H=128,GT=127;function U1(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw U1.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&GT)<<s:(o&GT)*Math.pow(2,s),s+=7}while(o>=_H);return U1.bytes=i-n,r}var EH=Math.pow(2,7),SH=Math.pow(2,14),AH=Math.pow(2,21),xH=Math.pow(2,28),DH=Math.pow(2,35),CH=Math.pow(2,42),PH=Math.pow(2,49),OH=Math.pow(2,56),TH=Math.pow(2,63),BH=function(t){return t<EH?1:t<SH?2:t<AH?3:t<xH?4:t<DH?5:t<CH?6:t<PH?7:t<OH?8:t<TH?9:10},IH={encode:mH,decode:wH,encodingLength:BH},FH=IH,Tp=FH;function Yl(t,e=0){return[Tp.decode(t,e),Tp.decode.bytes]}function sc(t,e,r=0){return Tp.encode(t,e,r),e}function oc(t){return Tp.encodingLength(t)}function K1(t,e){let r=e.byteLength,n=oc(t),s=n+oc(r),i=new Uint8Array(s+r);return sc(t,i,0),sc(r,i,n),i.set(e,s),new Ql(t,r,e,i)}function XT(t){let e=Xl(t),[r,n]=Yl(e),[s,i]=Yl(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new Ql(r,s,o,e)}function YT(t,e){if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&LT(t.bytes,r.bytes)}}var Ql=class{code;size;digest;bytes;constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};function QT(t,e){let{bytes:r,version:n}=t;switch(n){case 0:return RH(r,z1(t),e??Ln.encoder);default:return $H(r,z1(t),e??Pp.encoder)}}var e8=new WeakMap;function z1(t){let e=e8.get(t);if(e==null){let r=new Map;return e8.set(t,r),r}return e}var J1=class t{code;version;multihash;bytes;"/";constructor(e,r,n,s){this.code=r,this.version=e,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==Bp)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==jH)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=K1(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n!=null&&e.code===n.code&&e.version===n.version&&YT(e.multihash,n.multihash)}toString(e){return QT(this,e)}toJSON(){return{"/":QT(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:s,multihash:i,bytes:o}=r;return new t(n,s,i,o??t8(n,s,i.bytes))}else if(r[NH]===!0){let{version:n,multihash:s,code:i}=r,o=XT(s);return t.create(n,i,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Bp)throw new Error(`Version 0 CID must use dag-pb (code: ${Bp}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let s=t8(e,r,n.bytes);return new t(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,Bp,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,s=Xl(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=s.subarray(r.multihashSize-r.digestSize),o=new Ql(r.multihashCode,r.digestSize,i,s);return[r.version===0?t.createV0(o):t.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[d,p]=Yl(e.subarray(r));return r+=p,d},s=n(),i=Bp;if(s===18?(s=0,r=0):i=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);let o=r,a=n(),u=n(),c=r+u,l=c-o;return{version:s,codec:i,multihashCode:a,digestSize:u,multihashSize:l,size:c}}static parse(e,r){let[n,s]=kH(e,r),i=t.decode(s);if(i.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return z1(i).set(n,e),i}};function kH(t,e){switch(t[0]){case"Q":{let r=e??Ln;return[Ln.prefix,r.decode(`${Ln.prefix}${t}`)]}case Ln.prefix:{let r=e??Ln;return[Ln.prefix,r.decode(t)]}case Pp.prefix:{let r=e??Pp;return[Pp.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function RH(t,e,r){let{prefix:n}=r;if(n!==Ln.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let s=e.get(n);if(s==null){let i=r.encode(t).slice(1);return e.set(n,i),i}else return s}function $H(t,e,r){let{prefix:n}=r,s=e.get(n);if(s==null){let i=r.encode(t);return e.set(n,i),i}else return s}var Bp=112,jH=18;function t8(t,e,r){let n=oc(t),s=n+oc(e),i=new Uint8Array(s+r.byteLength);return sc(t,i,0),sc(e,i,n),i.set(r,s),i}var NH=Symbol.for("@ipld/js-cid/CID");var $s=class t{static addPrefix(e){var r;let{code:n,data:s,name:i}=e;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=t.codeToName.has(n)?n:t.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);let o=$o.encodingLength(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),$o.encodeTo(n,a),a}static getCodeFromData(e){let{prefixedData:r}=e,[n,s]=$o.decode(r);return n}static getCodeFromName(e){let{name:r}=e,n=t.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){let{code:r}=e,n=t.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){t.codeToName.set(e.code,e.name),t.nameToCode.set(e.name,e.code)}static removePrefix(e){let{prefixedData:r}=e,[n,s]=$o.decode(r),i=t.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};$s.codeToName=new Map;$s.nameToCode=new Map;$s.registerCodec({code:237,name:"ed25519-pub"});$s.registerCodec({code:4864,name:"ed25519-priv"});$s.registerCodec({code:236,name:"x25519-pub"});$s.registerCodec({code:4866,name:"x25519-priv"});$s.registerCodec({code:231,name:"secp256k1-pub"});$s.registerCodec({code:4865,name:"secp256k1-priv"});function H1(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&H1(t[e])})}var SG=qn(Z_(),1),Sc=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};var $0=class{constructor(){this.store=new Map}clear(){return Sc(this,void 0,void 0,function*(){this.store.clear()})}close(){return Sc(this,void 0,void 0,function*(){})}delete(e){return Sc(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return Sc(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return Sc(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return Sc(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return Sc(this,void 0,void 0,function*(){this.store.set(e,r)})}};var wee=qn(lh(),1);var _ee=qn(lh(),1);function Eee(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function uS(t,...e){if(!Eee(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function cS(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function g3(t,e){uS(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Ad=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var yg=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),as=(t,e)=>t<<32-e|t>>>e;var wDe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function See(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function lS(t){return typeof t=="string"&&(t=See(t)),uS(t),t}var hg=class{clone(){return this._cloneInto()}},_De={}.toString;function v3(t){let e=n=>t().update(lS(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function b3(t=32){if(Ad&&typeof Ad.getRandomValues=="function")return Ad.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function Aee(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,c=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+c,a,n)}var w3=(t,e,r)=>t&e^~t&r,_3=(t,e,r)=>t&e^t&r^e&r,mg=class extends hg{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=yg(this.buffer)}update(e){cS(this);let{view:r,buffer:n,blockLen:s}=this;e=lS(e);let i=e.length;for(let o=0;o<i;){let a=Math.min(s-this.pos,i-o);if(a===s){let u=yg(e);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){cS(this),g3(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:s,isLE:i}=this,{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;Aee(n,s-8,BigInt(this.length*8),i),this.process(n,0);let a=yg(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let c=u/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,l[d],i)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};var xee=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ya=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qa=new Uint32Array(64),dS=class extends mg{constructor(){super(64,32,8,!1),this.A=Ya[0]|0,this.B=Ya[1]|0,this.C=Ya[2]|0,this.D=Ya[3]|0,this.E=Ya[4]|0,this.F=Ya[5]|0,this.G=Ya[6]|0,this.H=Ya[7]|0}get(){let{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[e,r,n,s,i,o,a,u]}set(e,r,n,s,i,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let d=0;d<16;d++,r+=4)Qa[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){let p=Qa[d-15],f=Qa[d-2],h=as(p,7)^as(p,18)^p>>>3,m=as(f,17)^as(f,19)^f>>>10;Qa[d]=m+Qa[d-7]+h+Qa[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:c,H:l}=this;for(let d=0;d<64;d++){let p=as(a,6)^as(a,11)^as(a,25),f=l+p+w3(a,u,c)+xee[d]+Qa[d]|0,m=(as(n,2)^as(n,13)^as(n,22))+_3(n,s,i)|0;l=c,c=u,u=a,a=o+f|0,o=i,i=s,s=n,n=f+m|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,u,c,l)}roundClean(){Qa.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var eu=v3(()=>new dS);var Dee=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},xd=class{static digest(e){return Dee(this,arguments,void 0,function*({data:r}){return eu(r)})}};var Xs=class{};var Cee=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},gg=class extends Xs{digest(e){return Cee(this,arguments,void 0,function*({algorithm:r,data:n}){switch(r){case"SHA-256":return yield xd.digest({data:n})}})}};function E3(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Pee(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function fS(t,...e){if(!Pee(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function S3(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");E3(t.outputLen),E3(t.blockLen)}function Dd(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function A3(t,e){fS(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Cd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function x3(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var vg=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),us=(t,e)=>t<<32-e|t>>>e,Oee=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Oee)throw new Error("Non little-endian hardware is not supported");function pS(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function dh(t){if(typeof t=="string"&&(t=pS(t)),!x3(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function bg(...t){let e=0;for(let n=0;n<t.length;n++){let s=t[n];if(!x3(s))throw new Error("Uint8Array expected");e+=s.length}let r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){let i=t[n];r.set(i,s),s+=i.length}return r}var Pd=class{clone(){return this._cloneInto()}},NDe={}.toString;function wg(t){let e=n=>t().update(dh(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function $c(t=32){if(Cd&&typeof Cd.getRandomValues=="function")return Cd.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function Tee(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,c=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+c,a,n)}var Od=class extends Pd{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=vg(this.buffer)}update(e){Dd(this);let{view:r,buffer:n,blockLen:s}=this;e=dh(e);let i=e.length;for(let o=0;o<i;){let a=Math.min(s-this.pos,i-o);if(a===s){let u=vg(e);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Dd(this),A3(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:s,isLE:i}=this,{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;Tee(n,s-8,BigInt(this.length*8),i),this.process(n,0);let a=vg(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let c=u/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,l[d],i)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};var Bee=(t,e,r)=>t&e^~t&r,Iee=(t,e,r)=>t&e^t&r^e&r,Fee=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ru=new Uint32Array(64),hS=class extends Od{constructor(){super(64,32,8,!1),this.A=tu[0]|0,this.B=tu[1]|0,this.C=tu[2]|0,this.D=tu[3]|0,this.E=tu[4]|0,this.F=tu[5]|0,this.G=tu[6]|0,this.H=tu[7]|0}get(){let{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[e,r,n,s,i,o,a,u]}set(e,r,n,s,i,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let d=0;d<16;d++,r+=4)ru[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){let p=ru[d-15],f=ru[d-2],h=us(p,7)^us(p,18)^p>>>3,m=us(f,17)^us(f,19)^f>>>10;ru[d]=m+ru[d-7]+h+ru[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:c,H:l}=this;for(let d=0;d<64;d++){let p=us(a,6)^us(a,11)^us(a,25),f=l+p+Bee(a,u,c)+Fee[d]+ru[d]|0,m=(us(n,2)^us(n,13)^us(n,22))+Iee(n,s,i)|0;l=c,c=u,u=a,a=o+f|0,o=i,i=s,s=n,n=f+m|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,u,c,l)}roundClean(){ru.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Ci=wg(()=>new hS);var Eg={};Cr(Eg,{bitGet:()=>qee,bitLen:()=>Mee,bitMask:()=>fh,bitSet:()=>Lee,bytesToHex:()=>Yo,bytesToNumberBE:()=>Qo,bytesToNumberLE:()=>ls,concatBytes:()=>ta,createHmacDrbg:()=>gS,ensureBytes:()=>Gt,equalBytes:()=>jee,hexToBytes:()=>jc,hexToNumber:()=>mS,isBytes:()=>cs,numberToBytesBE:()=>Or,numberToBytesLE:()=>ea,numberToHexUnpadded:()=>O3,numberToVarBytesBE:()=>$ee,utf8ToBytes:()=>Nee,validateObject:()=>Pi});var P3=BigInt(0),_g=BigInt(1),kee=BigInt(2);function cs(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var Ree=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Yo(t){if(!cs(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Ree[t[r]];return e}function O3(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function mS(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var Xo={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function D3(t){if(t>=Xo._0&&t<=Xo._9)return t-Xo._0;if(t>=Xo._A&&t<=Xo._F)return t-(Xo._A-10);if(t>=Xo._a&&t<=Xo._f)return t-(Xo._a-10)}function jc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){let o=D3(t.charCodeAt(i)),a=D3(t.charCodeAt(i+1));if(o===void 0||a===void 0){let u=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}n[s]=o*16+a}return n}function Qo(t){return mS(Yo(t))}function ls(t){if(!cs(t))throw new Error("Uint8Array expected");return mS(Yo(Uint8Array.from(t).reverse()))}function Or(t,e){return jc(t.toString(16).padStart(e*2,"0"))}function ea(t,e){return Or(t,e).reverse()}function $ee(t){return jc(O3(t))}function Gt(t,e,r){let n;if(typeof e=="string")try{n=jc(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(cs(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${t} expected ${r} bytes, got ${s}`);return n}function ta(...t){let e=0;for(let s=0;s<t.length;s++){let i=t[s];if(!cs(i))throw new Error("Uint8Array expected");e+=i.length}let r=new Uint8Array(e),n=0;for(let s=0;s<t.length;s++){let i=t[s];r.set(i,n),n+=i.length}return r}function jee(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function Nee(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Mee(t){let e;for(e=0;t>P3;t>>=_g,e+=1);return e}function qee(t,e){return t>>BigInt(e)&_g}var Lee=(t,e,r)=>t|(r?_g:P3)<<BigInt(e),fh=t=>(kee<<BigInt(t-1))-_g,yS=t=>new Uint8Array(t),C3=t=>Uint8Array.from(t);function gS(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=yS(t),s=yS(t),i=0,o=()=>{n.fill(1),s.fill(0),i=0},a=(...d)=>r(s,n,...d),u=(d=yS())=>{s=a(C3([0]),d),n=a(),d.length!==0&&(s=a(C3([1]),d),n=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0,p=[];for(;d<e;){n=a();let f=n.slice();p.push(f),d+=n.length}return ta(...p)};return(d,p)=>{o(),u(d);let f;for(;!(f=p(c()));)u();return o(),f}}var Uee={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||cs(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Pi(t,e,r={}){let n=(s,i,o)=>{let a=Uee[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let u=t[s];if(!(o&&u===void 0)&&!a(u,t))throw new Error(`Invalid param ${String(s)}=${u} (${typeof u}), expected ${i}`)};for(let[s,i]of Object.entries(e))n(s,i,!1);for(let[s,i]of Object.entries(r))n(s,i,!0);return t}var kr=BigInt(0),rr=BigInt(1),Nc=BigInt(2),Kee=BigInt(3),vS=BigInt(4),T3=BigInt(5),B3=BigInt(8),Vee=BigInt(9),zee=BigInt(16);function Bt(t,e){let r=t%e;return r>=kr?r:e+r}function bS(t,e,r){if(r<=kr||e<kr)throw new Error("Expected power/modulo > 0");if(r===rr)return kr;let n=rr;for(;e>kr;)e&rr&&(n=n*t%r),t=t*t%r,e>>=rr;return n}function Zt(t,e,r){let n=t;for(;e-- >kr;)n*=n,n%=r;return n}function Sg(t,e){if(t===kr||e<=kr)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Bt(t,e),n=e,s=kr,i=rr,o=rr,a=kr;for(;r!==kr;){let c=n/r,l=n%r,d=s-o*c,p=i-a*c;n=r,r=l,s=o,i=a,o=d,a=p}if(n!==rr)throw new Error("invert: does not exist");return Bt(s,e)}function Jee(t){let e=(t-rr)/Nc,r,n,s;for(r=t-rr,n=0;r%Nc===kr;r/=Nc,n++);for(s=Nc;s<t&&bS(s,e,t)!==t-rr;s++);if(n===1){let o=(t+rr)/vS;return function(u,c){let l=u.pow(c,o);if(!u.eql(u.sqr(l),c))throw new Error("Cannot find square root");return l}}let i=(r+rr)/Nc;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=n,l=a.pow(a.mul(a.ONE,s),r),d=a.pow(u,i),p=a.pow(u,r);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let f=1;for(let m=a.sqr(p);f<c&&!a.eql(m,a.ONE);f++)m=a.sqr(m);let h=a.pow(l,rr<<BigInt(c-f-1));l=a.sqr(h),d=a.mul(d,h),p=a.mul(p,l),c=f}return d}}function Hee(t){if(t%vS===Kee){let e=(t+rr)/vS;return function(n,s){let i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%B3===T3){let e=(t-T3)/B3;return function(n,s){let i=n.mul(s,Nc),o=n.pow(i,e),a=n.mul(s,o),u=n.mul(n.mul(a,Nc),o),c=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(c),s))throw new Error("Cannot find square root");return c}}return t%zee,Jee(t)}var I3=(t,e)=>(Bt(t,e)&rr)===rr,Wee=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function wS(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Wee.reduce((n,s)=>(n[s]="function",n),e);return Pi(t,r)}function Gee(t,e,r){if(r<kr)throw new Error("Expected power > 0");if(r===kr)return t.ONE;if(r===rr)return e;let n=t.ONE,s=e;for(;r>kr;)r&rr&&(n=t.mul(n,s)),s=t.sqr(s),r>>=rr;return n}function Zee(t,e){let r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function _S(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Td(t,e,r=!1,n={}){if(t<=kr)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:s,nByteLength:i}=_S(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=Hee(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:fh(s),ZERO:kr,ONE:rr,create:u=>Bt(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return kr<=u&&u<t},is0:u=>u===kr,isOdd:u=>(u&rr)===rr,neg:u=>Bt(-u,t),eql:(u,c)=>u===c,sqr:u=>Bt(u*u,t),add:(u,c)=>Bt(u+c,t),sub:(u,c)=>Bt(u-c,t),mul:(u,c)=>Bt(u*c,t),pow:(u,c)=>Gee(a,u,c),div:(u,c)=>Bt(u*Sg(c,t),t),sqrN:u=>u*u,addN:(u,c)=>u+c,subN:(u,c)=>u-c,mulN:(u,c)=>u*c,inv:u=>Sg(u,t),sqrt:n.sqrt||(u=>o(a,u)),invertBatch:u=>Zee(a,u),cmov:(u,c,l)=>l?c:u,toBytes:u=>r?ea(u,i):Or(u,i),fromBytes:u=>{if(u.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${u.length}`);return r?ls(u):Qo(u)}});return Object.freeze(a)}function F3(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function k3(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function ES(t){let e=k3(t);return e+Math.ceil(e/2)}function R3(t,e,r=!1){let n=t.length,s=k3(e),i=ES(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);let o=r?Qo(t):ls(t),a=Bt(o,e-rr)+rr;return r?ea(a,s):Or(a,s)}var Yee=BigInt(0),SS=BigInt(1);function Ag(t,e){let r=(s,i)=>{let o=i.negate();return s?o:i},n=s=>{let i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:r,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>Yee;)i&SS&&(o=o.add(a)),a=a.double(),i>>=SS;return o},precomputeWindow(s,i){let{windows:o,windowSize:a}=n(i),u=[],c=s,l=c;for(let d=0;d<o;d++){l=c,u.push(l);for(let p=1;p<a;p++)l=l.add(c),u.push(l);c=l.double()}return u},wNAF(s,i,o){let{windows:a,windowSize:u}=n(s),c=t.ZERO,l=t.BASE,d=BigInt(2**s-1),p=2**s,f=BigInt(s);for(let h=0;h<a;h++){let m=h*u,g=Number(o&d);o>>=f,g>u&&(g-=p,o+=SS);let _=m,D=m+Math.abs(g)-1,v=h%2!==0,E=g<0;g===0?l=l.add(r(v,i[_])):c=c.add(r(E,i[D]))}return{p:c,f:l}},wNAFCached(s,i,o,a){let u=s._WINDOW_SIZE||1,c=i.get(s);return c||(c=this.precomputeWindow(s,u),u!==1&&i.set(s,a(c))),this.wNAF(u,c,o)}}}function ph(t){return wS(t.Fp),Pi(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({..._S(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function Qee(t){let e=ph(t);Pi(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:ete,hexToBytes:tte}=Eg,Mc={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=Mc;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:ete(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=Mc,r=typeof t=="string"?tte(t):t;if(!cs(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:s,l:i}=Mc._parseInt(r.subarray(2)),{d:o,l:a}=Mc._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){let e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,r=c=>{let l=c.toString(16);return l.length&1?`0${l}`:l},n=e(r(t.s)),s=e(r(t.r)),i=n.length/2,o=s.length/2,a=r(i),u=r(o);return`30${r(o+i+4)}02${u}${s}02${a}${n}`}},ra=BigInt(0),Oi=BigInt(1),QDe=BigInt(2),$3=BigInt(3),e2e=BigInt(4);function rte(t){let e=Qee(t),{Fp:r}=e,n=e.toBytes||((h,m,g)=>{let _=m.toAffine();return ta(Uint8Array.from([4]),r.toBytes(_.x),r.toBytes(_.y))}),s=e.fromBytes||(h=>{let m=h.subarray(1),g=r.fromBytes(m.subarray(0,r.BYTES)),_=r.fromBytes(m.subarray(r.BYTES,2*r.BYTES));return{x:g,y:_}});function i(h){let{a:m,b:g}=e,_=r.sqr(h),D=r.mul(_,h);return r.add(r.add(D,r.mul(h,m)),g)}if(!r.eql(r.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(h){return typeof h=="bigint"&&ra<h&&h<e.n}function a(h){if(!o(h))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(h){let{allowedPrivateKeyLengths:m,nByteLength:g,wrapPrivateKey:_,n:D}=e;if(m&&typeof h!="bigint"){if(cs(h)&&(h=Yo(h)),typeof h!="string"||!m.includes(h.length))throw new Error("Invalid key");h=h.padStart(g*2,"0")}let v;try{v=typeof h=="bigint"?h:Qo(Gt("private key",h,g))}catch{throw new Error(`private key must be ${g} bytes, hex or bigint, not ${typeof h}`)}return _&&(v=Bt(v,D)),a(v),v}let c=new Map;function l(h){if(!(h instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(m,g,_){if(this.px=m,this.py=g,this.pz=_,m==null||!r.isValid(m))throw new Error("x required");if(g==null||!r.isValid(g))throw new Error("y required");if(_==null||!r.isValid(_))throw new Error("z required")}static fromAffine(m){let{x:g,y:_}=m||{};if(!m||!r.isValid(g)||!r.isValid(_))throw new Error("invalid affine point");if(m instanceof d)throw new Error("projective point not allowed");let D=v=>r.eql(v,r.ZERO);return D(g)&&D(_)?d.ZERO:new d(g,_,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){let g=r.invertBatch(m.map(_=>_.pz));return m.map((_,D)=>_.toAffine(g[D])).map(d.fromAffine)}static fromHex(m){let g=d.fromAffine(s(Gt("pointHex",m)));return g.assertValidity(),g}static fromPrivateKey(m){return d.BASE.multiply(u(m))}_setWindowSize(m){this._WINDOW_SIZE=m,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:m,y:g}=this.toAffine();if(!r.isValid(m)||!r.isValid(g))throw new Error("bad point: x or y not FE");let _=r.sqr(g),D=i(m);if(!r.eql(_,D))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:m}=this.toAffine();if(r.isOdd)return!r.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);let{px:g,py:_,pz:D}=this,{px:v,py:E,pz:S}=m,P=r.eql(r.mul(g,S),r.mul(v,D)),C=r.eql(r.mul(_,S),r.mul(E,D));return P&&C}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){let{a:m,b:g}=e,_=r.mul(g,$3),{px:D,py:v,pz:E}=this,S=r.ZERO,P=r.ZERO,C=r.ZERO,B=r.mul(D,D),F=r.mul(v,v),I=r.mul(E,E),$=r.mul(D,v);return $=r.add($,$),C=r.mul(D,E),C=r.add(C,C),S=r.mul(m,C),P=r.mul(_,I),P=r.add(S,P),S=r.sub(F,P),P=r.add(F,P),P=r.mul(S,P),S=r.mul($,S),C=r.mul(_,C),I=r.mul(m,I),$=r.sub(B,I),$=r.mul(m,$),$=r.add($,C),C=r.add(B,B),B=r.add(C,B),B=r.add(B,I),B=r.mul(B,$),P=r.add(P,B),I=r.mul(v,E),I=r.add(I,I),B=r.mul(I,$),S=r.sub(S,B),C=r.mul(I,F),C=r.add(C,C),C=r.add(C,C),new d(S,P,C)}add(m){l(m);let{px:g,py:_,pz:D}=this,{px:v,py:E,pz:S}=m,P=r.ZERO,C=r.ZERO,B=r.ZERO,F=e.a,I=r.mul(e.b,$3),$=r.mul(g,v),q=r.mul(_,E),X=r.mul(D,S),Q=r.add(g,_),K=r.add(v,E);Q=r.mul(Q,K),K=r.add($,q),Q=r.sub(Q,K),K=r.add(g,D);let G=r.add(v,S);return K=r.mul(K,G),G=r.add($,X),K=r.sub(K,G),G=r.add(_,D),P=r.add(E,S),G=r.mul(G,P),P=r.add(q,X),G=r.sub(G,P),B=r.mul(F,K),P=r.mul(I,X),B=r.add(P,B),P=r.sub(q,B),B=r.add(q,B),C=r.mul(P,B),q=r.add($,$),q=r.add(q,$),X=r.mul(F,X),K=r.mul(I,K),q=r.add(q,X),X=r.sub($,X),X=r.mul(F,X),K=r.add(K,X),$=r.mul(q,K),C=r.add(C,$),$=r.mul(G,K),P=r.mul(Q,P),P=r.sub(P,$),$=r.mul(Q,q),B=r.mul(G,B),B=r.add(B,$),new d(P,C,B)}subtract(m){return this.add(m.negate())}is0(){return this.equals(d.ZERO)}wNAF(m){return f.wNAFCached(this,c,m,g=>{let _=r.invertBatch(g.map(D=>D.pz));return g.map((D,v)=>D.toAffine(_[v])).map(d.fromAffine)})}multiplyUnsafe(m){let g=d.ZERO;if(m===ra)return g;if(a(m),m===Oi)return this;let{endo:_}=e;if(!_)return f.unsafeLadder(this,m);let{k1neg:D,k1:v,k2neg:E,k2:S}=_.splitScalar(m),P=g,C=g,B=this;for(;v>ra||S>ra;)v&Oi&&(P=P.add(B)),S&Oi&&(C=C.add(B)),B=B.double(),v>>=Oi,S>>=Oi;return D&&(P=P.negate()),E&&(C=C.negate()),C=new d(r.mul(C.px,_.beta),C.py,C.pz),P.add(C)}multiply(m){a(m);let g=m,_,D,{endo:v}=e;if(v){let{k1neg:E,k1:S,k2neg:P,k2:C}=v.splitScalar(g),{p:B,f:F}=this.wNAF(S),{p:I,f:$}=this.wNAF(C);B=f.constTimeNegate(E,B),I=f.constTimeNegate(P,I),I=new d(r.mul(I.px,v.beta),I.py,I.pz),_=B.add(I),D=F.add($)}else{let{p:E,f:S}=this.wNAF(g);_=E,D=S}return d.normalizeZ([_,D])[0]}multiplyAndAddUnsafe(m,g,_){let D=d.BASE,v=(S,P)=>P===ra||P===Oi||!S.equals(D)?S.multiplyUnsafe(P):S.multiply(P),E=v(this,g).add(v(m,_));return E.is0()?void 0:E}toAffine(m){let{px:g,py:_,pz:D}=this,v=this.is0();m==null&&(m=v?r.ONE:r.inv(D));let E=r.mul(g,m),S=r.mul(_,m),P=r.mul(D,m);if(v)return{x:r.ZERO,y:r.ZERO};if(!r.eql(P,r.ONE))throw new Error("invZ was invalid");return{x:E,y:S}}isTorsionFree(){let{h:m,isTorsionFree:g}=e;if(m===Oi)return!0;if(g)return g(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:m,clearCofactor:g}=e;return m===Oi?this:g?g(d,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return this.assertValidity(),n(d,this,m)}toHex(m=!0){return Yo(this.toRawBytes(m))}}d.BASE=new d(e.Gx,e.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);let p=e.nBitLength,f=Ag(d,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:u,weierstrassEquation:i,isWithinCurveOrder:o}}function nte(t){let e=ph(t);return Pi(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function j3(t){let e=nte(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(K){return ra<K&&K<r.ORDER}function a(K){return Bt(K,n)}function u(K){return Sg(K,n)}let{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:d,isWithinCurveOrder:p}=rte({...e,toBytes(K,G,ne){let U=G.toAffine(),R=r.toBytes(U.x),j=ta;return ne?j(Uint8Array.from([G.hasEvenY()?2:3]),R):j(Uint8Array.from([4]),R,r.toBytes(U.y))},fromBytes(K){let G=K.length,ne=K[0],U=K.subarray(1);if(G===s&&(ne===2||ne===3)){let R=Qo(U);if(!o(R))throw new Error("Point is not on curve");let j=d(R),W=r.sqrt(j),re=(W&Oi)===Oi;return(ne&1)===1!==re&&(W=r.neg(W)),{x:R,y:W}}else if(G===i&&ne===4){let R=r.fromBytes(U.subarray(0,r.BYTES)),j=r.fromBytes(U.subarray(r.BYTES,2*r.BYTES));return{x:R,y:j}}else throw new Error(`Point of length ${G} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=K=>Yo(Or(K,e.nByteLength));function h(K){let G=n>>Oi;return K>G}function m(K){return h(K)?a(-K):K}let g=(K,G,ne)=>Qo(K.slice(G,ne));class _{constructor(G,ne,U){this.r=G,this.s=ne,this.recovery=U,this.assertValidity()}static fromCompact(G){let ne=e.nByteLength;return G=Gt("compactSignature",G,ne*2),new _(g(G,0,ne),g(G,ne,2*ne))}static fromDER(G){let{r:ne,s:U}=Mc.toSig(Gt("DER",G));return new _(ne,U)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(G){return new _(this.r,this.s,G)}recoverPublicKey(G){let{r:ne,s:U,recovery:R}=this,j=C(Gt("msgHash",G));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");let W=R===2||R===3?ne+e.n:ne;if(W>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let re=R&1?"03":"02",L=c.fromHex(re+f(W)),V=u(W),ie=a(-j*V),ue=a(U*V),he=c.BASE.multiplyAndAddUnsafe(L,ie,ue);if(!he)throw new Error("point at infinify");return he.assertValidity(),he}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return jc(this.toDERHex())}toDERHex(){return Mc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return jc(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}let D={isValidPrivateKey(K){try{return l(K),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let K=ES(e.n);return R3(e.randomBytes(K),e.n)},precompute(K=8,G=c.BASE){return G._setWindowSize(K),G.multiply(BigInt(3)),G}};function v(K,G=!0){return c.fromPrivateKey(K).toRawBytes(G)}function E(K){let G=cs(K),ne=typeof K=="string",U=(G||ne)&&K.length;return G?U===s||U===i:ne?U===2*s||U===2*i:K instanceof c}function S(K,G,ne=!0){if(E(K))throw new Error("first arg must be private key");if(!E(G))throw new Error("second arg must be public key");return c.fromHex(G).multiply(l(K)).toRawBytes(ne)}let P=e.bits2int||function(K){let G=Qo(K),ne=K.length*8-e.nBitLength;return ne>0?G>>BigInt(ne):G},C=e.bits2int_modN||function(K){return a(P(K))},B=fh(e.nBitLength);function F(K){if(typeof K!="bigint")throw new Error("bigint expected");if(!(ra<=K&&K<B))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Or(K,e.nByteLength)}function I(K,G,ne=$){if(["recovered","canonical"].some(xe=>xe in ne))throw new Error("sign() legacy options not supported");let{hash:U,randomBytes:R}=e,{lowS:j,prehash:W,extraEntropy:re}=ne;j==null&&(j=!0),K=Gt("msgHash",K),W&&(K=Gt("prehashed msgHash",U(K)));let L=C(K),V=l(G),ie=[F(V),F(L)];if(re!=null){let xe=re===!0?R(r.BYTES):re;ie.push(Gt("extraEntropy",xe))}let ue=ta(...ie),he=L;function ye(xe){let Oe=P(xe);if(!p(Oe))return;let Le=u(Oe),je=c.BASE.multiply(Oe).toAffine(),Et=a(je.x);if(Et===ra)return;let yt=a(Le*a(he+Et*V));if(yt===ra)return;let pn=(je.x===Et?0:2)|Number(je.y&Oi),gr=yt;return j&&h(yt)&&(gr=m(yt),pn^=1),new _(Et,gr,pn)}return{seed:ue,k2sig:ye}}let $={lowS:e.lowS,prehash:!1},q={lowS:e.lowS,prehash:!1};function X(K,G,ne=$){let{seed:U,k2sig:R}=I(K,G,ne),j=e;return gS(j.hash.outputLen,j.nByteLength,j.hmac)(U,R)}c.BASE._setWindowSize(8);function Q(K,G,ne,U=q){let R=K;if(G=Gt("msgHash",G),ne=Gt("publicKey",ne),"strict"in U)throw new Error("options.strict was renamed to lowS");let{lowS:j,prehash:W}=U,re,L;try{if(typeof R=="string"||cs(R))try{re=_.fromDER(R)}catch(je){if(!(je instanceof Mc.Err))throw je;re=_.fromCompact(R)}else if(typeof R=="object"&&typeof R.r=="bigint"&&typeof R.s=="bigint"){let{r:je,s:Et}=R;re=new _(je,Et)}else throw new Error("PARSE");L=c.fromHex(ne)}catch(je){if(je.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(j&&re.hasHighS())return!1;W&&(G=e.hash(G));let{r:V,s:ie}=re,ue=C(G),he=u(ie),ye=a(ue*he),xe=a(V*he),Oe=c.BASE.multiplyAndAddUnsafe(L,ye,xe)?.toAffine();return Oe?a(Oe.x)===V:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:S,sign:X,verify:Q,ProjectivePoint:c,Signature:_,utils:D}}var xg=class extends Pd{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,S3(e);let n=dh(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Dd(this),this.iHash.update(e),this}digestInto(e){Dd(this),fS(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},AS=(t,e,r)=>new xg(t,e).update(r).digest();AS.create=(t,e)=>new xg(t,e);function ite(t){return{hash:t,hmac:(e,...r)=>AS(t,e,bg(...r)),randomBytes:$c}}function Dg(t,e){let r=n=>j3({...t,...ite(n)});return Object.freeze({...r(e),create:r})}var q3=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),N3=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ste=BigInt(1),xS=BigInt(2),M3=(t,e)=>(t+e/xS)/e;function ote(t){let e=q3,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),c=t*t*t%e,l=c*c*t%e,d=Zt(l,r,e)*l%e,p=Zt(d,r,e)*l%e,f=Zt(p,xS,e)*c%e,h=Zt(f,s,e)*f%e,m=Zt(h,i,e)*h%e,g=Zt(m,a,e)*m%e,_=Zt(g,u,e)*g%e,D=Zt(_,a,e)*m%e,v=Zt(D,r,e)*l%e,E=Zt(v,o,e)*h%e,S=Zt(E,n,e)*c%e,P=Zt(S,xS,e);if(!DS.eql(DS.sqr(P),t))throw new Error("Cannot find square root");return P}var DS=Td(q3,void 0,void 0,{sqrt:ote}),zt=Dg({a:BigInt(0),b:BigInt(7),Fp:DS,n:N3,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=N3,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-ste*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=M3(i*t,e),u=M3(-n*t,e),c=Bt(t-a*r-u*s,e),l=Bt(-a*n-u*i,e),d=c>o,p=l>o;if(d&&(c=e-c),p&&(l=e-l),c>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:c,k2neg:p,k2:l}}}},Ci),f2e=BigInt(0);var p2e=zt.ProjectivePoint;function L3(t){let e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){let s=Object.keys(n).sort(),i={};for(let o of s)i[o]=e(n[o]);return i}return n},r=e(t);return JSON.stringify(r)}var ate=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},CS="urn:jwk:";function Lt(t){return ate(this,arguments,void 0,function*({jwk:e}){let r=e.kty,n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);H1(n);let s=L3(n),i=Ce.string(s).toUint8Array(),o=yield xd.digest({data:i});return Ce.uint8Array(o).toBase64Url()})}function Ys(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function Bd(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function nu(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function hh(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function U3(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var Qr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},ute=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},iu=class t{static adjustSignatureToLowS(e){return Qr(this,arguments,void 0,function*({signature:r}){let n=zt.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(e){return Qr(this,arguments,void 0,function*({privateKeyBytes:r}){let n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",d:Ce.uint8Array(r).toBase64Url(),x:Ce.uint8Array(n.x).toBase64Url(),y:Ce.uint8Array(n.y).toBase64Url()};return s.kid=yield Lt({jwk:s}),s})}static bytesToPublicKey(e){return Qr(this,arguments,void 0,function*({publicKeyBytes:r}){let n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:Ce.uint8Array(n.x).toBase64Url(),y:Ce.uint8Array(n.y).toBase64Url()};return s.kid=yield Lt({jwk:s}),s})}static compressPublicKey(e){return Qr(this,arguments,void 0,function*({publicKeyBytes:r}){return zt.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(e){return Qr(this,arguments,void 0,function*({key:r}){let n=yield t.privateKeyToBytes({privateKey:r}),s=yield t.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"secp256k1",x:Ce.uint8Array(s.x).toBase64Url(),y:Ce.uint8Array(s.y).toBase64Url()};return i.kid=yield Lt({jwk:i}),i})}static convertDerToCompactSignature(e){return Qr(this,arguments,void 0,function*({derSignature:r}){return zt.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(e){return Qr(this,arguments,void 0,function*({publicKeyBytes:r}){return zt.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return Qr(this,void 0,void 0,function*(){let e=zt.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Lt({jwk:r}),r})}static getPublicKey(e){return Qr(this,arguments,void 0,function*({key:r}){var n;if(!(Ys(r)&&r.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let{d:s}=r,i=ute(r,["d"]);return(n=i.kid)!==null&&n!==void 0||(i.kid=yield Lt({jwk:i})),i})}static privateKeyToBytes(e){return Qr(this,arguments,void 0,function*({privateKey:r}){if(!Ys(r))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return Ce.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return Qr(this,arguments,void 0,function*({publicKey:r}){if(!(Bd(r)&&r.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");let n=new Uint8Array([4]),s=Ce.base64Url(r.x).toUint8Array(),i=Ce.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(e){return Qr(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let s=yield t.privateKeyToBytes({privateKey:r}),i=yield t.publicKeyToBytes({publicKey:n});return zt.getSharedSecret(s,i,!0).slice(1)})}static sign(e){return Qr(this,arguments,void 0,function*({data:r,key:n}){let s=yield t.privateKeyToBytes({privateKey:n}),i=eu(r);return zt.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(e){return Qr(this,arguments,void 0,function*({privateKeyBytes:r}){return zt.utils.isValidPrivateKey(r)})}static validatePublicKey(e){return Qr(this,arguments,void 0,function*({publicKeyBytes:r}){try{zt.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return Qr(this,arguments,void 0,function*({key:r,signature:n,data:s}){let i=yield t.publicKeyToBytes({publicKey:r}),o=eu(s);return zt.verify(n,o,i,{lowS:!1})})}static getCurvePoint(e){return Qr(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=zt.getPublicKey(r));let n=zt.ProjectivePoint.fromHex(r),s=Or(n.x,32),i=Or(n.y,32);return{x:s,y:i}})}};var K3=Td(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),cte=K3.create(BigInt("-3")),lte=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),dte=Dg({a:cte,b:lte,Fp:K3,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Ci),Wt=dte;var en=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},fte=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},su=class t{static adjustSignatureToLowS(e){return en(this,arguments,void 0,function*({signature:r}){let n=Wt.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(e){return en(this,arguments,void 0,function*({privateKeyBytes:r}){let n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",d:Ce.uint8Array(r).toBase64Url(),x:Ce.uint8Array(n.x).toBase64Url(),y:Ce.uint8Array(n.y).toBase64Url()};return s.kid=yield Lt({jwk:s}),s})}static bytesToPublicKey(e){return en(this,arguments,void 0,function*({publicKeyBytes:r}){let n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:Ce.uint8Array(n.x).toBase64Url(),y:Ce.uint8Array(n.y).toBase64Url()};return s.kid=yield Lt({jwk:s}),s})}static compressPublicKey(e){return en(this,arguments,void 0,function*({publicKeyBytes:r}){return Wt.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(e){return en(this,arguments,void 0,function*({key:r}){let n=yield t.privateKeyToBytes({privateKey:r}),s=yield t.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"P-256",x:Ce.uint8Array(s.x).toBase64Url(),y:Ce.uint8Array(s.y).toBase64Url()};return i.kid=yield Lt({jwk:i}),i})}static convertDerToCompactSignature(e){return en(this,arguments,void 0,function*({derSignature:r}){return Wt.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(e){return en(this,arguments,void 0,function*({publicKeyBytes:r}){return Wt.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return en(this,void 0,void 0,function*(){let e=Wt.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Lt({jwk:r}),r})}static getPublicKey(e){return en(this,arguments,void 0,function*({key:r}){var n;if(!(Ys(r)&&r.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let{d:s}=r,i=fte(r,["d"]);return(n=i.kid)!==null&&n!==void 0||(i.kid=yield Lt({jwk:i})),i})}static privateKeyToBytes(e){return en(this,arguments,void 0,function*({privateKey:r}){if(!Ys(r))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return Ce.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return en(this,arguments,void 0,function*({publicKey:r}){if(!(Bd(r)&&r.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");let n=new Uint8Array([4]),s=Ce.base64Url(r.x).toUint8Array(),i=Ce.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(e){return en(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let s=yield t.privateKeyToBytes({privateKey:r}),i=yield t.publicKeyToBytes({publicKey:n});return Wt.getSharedSecret(s,i,!0).slice(1)})}static sign(e){return en(this,arguments,void 0,function*({data:r,key:n}){let s=yield t.privateKeyToBytes({privateKey:n}),i=eu(r);return Wt.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(e){return en(this,arguments,void 0,function*({privateKeyBytes:r}){return Wt.utils.isValidPrivateKey(r)})}static validatePublicKey(e){return en(this,arguments,void 0,function*({publicKeyBytes:r}){try{Wt.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return en(this,arguments,void 0,function*({key:r,signature:n,data:s}){let i=yield t.publicKeyToBytes({publicKey:r}),o=eu(s);return Wt.verify(n,o,i,{lowS:!1})})}static getCurvePoint(e){return en(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=Wt.getPublicKey(r));let n=Wt.ProjectivePoint.fromHex(r),s=Or(n.x,32),i=Or(n.y,32);return{x:s,y:i}})}};var yh=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},mh=class extends Xs{computePublicKey(e){return yh(this,arguments,void 0,function*({key:r}){if(!Ys(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{let n=yield iu.computePublicKey({key:r});return n.alg="ES256K",n}case"P-256":{let n=yield su.computePublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(e){return yh(this,arguments,void 0,function*({algorithm:r}){switch(r){case"ES256K":case"secp256k1":{let n=yield iu.generateKey();return n.alg="ES256K",n}case"ES256":case"secp256r1":{let n=yield su.generateKey();return n.alg="ES256",n}}})}getPublicKey(e){return yh(this,arguments,void 0,function*({key:r}){if(!Ys(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{let n=yield iu.getPublicKey({key:r});return n.alg="ES256K",n}case"P-256":{let n=yield su.getPublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(e){return yh(this,arguments,void 0,function*({key:r,data:n}){if(!Ys(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":return yield iu.sign({key:r,data:n});case"P-256":return yield su.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(e){return yh(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!Bd(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(r.crv){case"secp256k1":return yield iu.verify({key:r,signature:n,data:s});case"P-256":return yield su.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}};var Cg=BigInt(4294967295),PS=BigInt(32);function V3(t,e=!1){return e?{h:Number(t&Cg),l:Number(t>>PS&Cg)}:{h:Number(t>>PS&Cg)|0,l:Number(t&Cg)|0}}function pte(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){let{h:i,l:o}=V3(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}var hte=(t,e)=>BigInt(t>>>0)<<PS|BigInt(e>>>0),yte=(t,e,r)=>t>>>r,mte=(t,e,r)=>t<<32-r|e>>>r,gte=(t,e,r)=>t>>>r|e<<32-r,vte=(t,e,r)=>t<<32-r|e>>>r,bte=(t,e,r)=>t<<64-r|e>>>r-32,wte=(t,e,r)=>t>>>r-32|e<<64-r,_te=(t,e)=>e,Ete=(t,e)=>t,Ste=(t,e,r)=>t<<r|e>>>32-r,Ate=(t,e,r)=>e<<r|t>>>32-r,xte=(t,e,r)=>e<<r-32|t>>>64-r,Dte=(t,e,r)=>t<<r-32|e>>>64-r;function Cte(t,e,r,n){let s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}var Pte=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Ote=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Tte=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Bte=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,Ite=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),Fte=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0;var kte={fromBig:V3,split:pte,toBig:hte,shrSH:yte,shrSL:mte,rotrSH:gte,rotrSL:vte,rotrBH:bte,rotrBL:wte,rotr32H:_te,rotr32L:Ete,rotlSH:Ste,rotlSL:Ate,rotlBH:xte,rotlBL:Dte,add:Cte,add3L:Pte,add3H:Ote,add4L:Tte,add4H:Bte,add5H:Fte,add5L:Ite},Ze=kte;var[Rte,$te]=Ze.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ou=new Uint32Array(80),au=new Uint32Array(80),OS=class extends Od{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:u,Eh:c,El:l,Fh:d,Fl:p,Gh:f,Gl:h,Hh:m,Hl:g}=this;return[e,r,n,s,i,o,a,u,c,l,d,p,f,h,m,g]}set(e,r,n,s,i,o,a,u,c,l,d,p,f,h,m,g){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=c|0,this.El=l|0,this.Fh=d|0,this.Fl=p|0,this.Gh=f|0,this.Gl=h|0,this.Hh=m|0,this.Hl=g|0}process(e,r){for(let v=0;v<16;v++,r+=4)ou[v]=e.getUint32(r),au[v]=e.getUint32(r+=4);for(let v=16;v<80;v++){let E=ou[v-15]|0,S=au[v-15]|0,P=Ze.rotrSH(E,S,1)^Ze.rotrSH(E,S,8)^Ze.shrSH(E,S,7),C=Ze.rotrSL(E,S,1)^Ze.rotrSL(E,S,8)^Ze.shrSL(E,S,7),B=ou[v-2]|0,F=au[v-2]|0,I=Ze.rotrSH(B,F,19)^Ze.rotrBH(B,F,61)^Ze.shrSH(B,F,6),$=Ze.rotrSL(B,F,19)^Ze.rotrBL(B,F,61)^Ze.shrSL(B,F,6),q=Ze.add4L(C,$,au[v-7],au[v-16]),X=Ze.add4H(q,P,I,ou[v-7],ou[v-16]);ou[v]=X|0,au[v]=q|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:u,Dh:c,Dl:l,Eh:d,El:p,Fh:f,Fl:h,Gh:m,Gl:g,Hh:_,Hl:D}=this;for(let v=0;v<80;v++){let E=Ze.rotrSH(d,p,14)^Ze.rotrSH(d,p,18)^Ze.rotrBH(d,p,41),S=Ze.rotrSL(d,p,14)^Ze.rotrSL(d,p,18)^Ze.rotrBL(d,p,41),P=d&f^~d&m,C=p&h^~p&g,B=Ze.add5L(D,S,C,$te[v],au[v]),F=Ze.add5H(B,_,E,P,Rte[v],ou[v]),I=B|0,$=Ze.rotrSH(n,s,28)^Ze.rotrBH(n,s,34)^Ze.rotrBH(n,s,39),q=Ze.rotrSL(n,s,28)^Ze.rotrBL(n,s,34)^Ze.rotrBL(n,s,39),X=n&i^n&a^i&a,Q=s&o^s&u^o&u;_=m|0,D=g|0,m=f|0,g=h|0,f=d|0,h=p|0,{h:d,l:p}=Ze.add(c|0,l|0,F|0,I|0),c=a|0,l=u|0,a=i|0,u=o|0,i=n|0,o=s|0;let K=Ze.add3L(I,q,Q);n=Ze.add3H(K,F,$,X),s=K|0}({h:n,l:s}=Ze.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Ze.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:u}=Ze.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:c,l}=Ze.add(this.Dh|0,this.Dl|0,c|0,l|0),{h:d,l:p}=Ze.add(this.Eh|0,this.El|0,d|0,p|0),{h:f,l:h}=Ze.add(this.Fh|0,this.Fl|0,f|0,h|0),{h:m,l:g}=Ze.add(this.Gh|0,this.Gl|0,m|0,g|0),{h:_,l:D}=Ze.add(this.Hh|0,this.Hl|0,_|0,D|0),this.set(n,s,i,o,a,u,c,l,d,p,f,h,m,g,_,D)}roundClean(){ou.fill(0),au.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var TS=wg(()=>new OS);var ds=BigInt(0),ai=BigInt(1),Pg=BigInt(2),jte=BigInt(8),Nte={zip215:!0};function Mte(t){let e=ph(t);return Pi(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Og(t){let e=Mte(t),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:u}=e,c=Pg<<BigInt(a*8)-ai,l=r.create,d=e.uvRatio||((U,R)=>{try{return{isValid:!0,value:r.sqrt(U*r.inv(R))}}catch{return{isValid:!1,value:ds}}}),p=e.adjustScalarBytes||(U=>U),f=e.domain||((U,R,j)=>{if(R.length||j)throw new Error("Contexts/pre-hash are not supported");return U}),h=U=>typeof U=="bigint"&&ds<U,m=(U,R)=>h(U)&&h(R)&&U<R,g=U=>U===ds||m(U,c);function _(U,R){if(m(U,R))return U;throw new Error(`Expected valid scalar < ${R}, got ${typeof U} ${U}`)}function D(U){return U===ds?U:_(U,n)}let v=new Map;function E(U){if(!(U instanceof S))throw new Error("ExtendedPoint expected")}class S{constructor(R,j,W,re){if(this.ex=R,this.ey=j,this.ez=W,this.et=re,!g(R))throw new Error("x required");if(!g(j))throw new Error("y required");if(!g(W))throw new Error("z required");if(!g(re))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof S)throw new Error("extended point not allowed");let{x:j,y:W}=R||{};if(!g(j)||!g(W))throw new Error("invalid affine point");return new S(j,W,ai,l(j*W))}static normalizeZ(R){let j=r.invertBatch(R.map(W=>W.ez));return R.map((W,re)=>W.toAffine(j[re])).map(S.fromAffine)}_setWindowSize(R){this._WINDOW_SIZE=R,v.delete(this)}assertValidity(){let{a:R,d:j}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:W,ey:re,ez:L,et:V}=this,ie=l(W*W),ue=l(re*re),he=l(L*L),ye=l(he*he),xe=l(ie*R),Oe=l(he*l(xe+ue)),Le=l(ye+l(j*l(ie*ue)));if(Oe!==Le)throw new Error("bad point: equation left != right (1)");let je=l(W*re),Et=l(L*V);if(je!==Et)throw new Error("bad point: equation left != right (2)")}equals(R){E(R);let{ex:j,ey:W,ez:re}=this,{ex:L,ey:V,ez:ie}=R,ue=l(j*ie),he=l(L*re),ye=l(W*ie),xe=l(V*re);return ue===he&&ye===xe}is0(){return this.equals(S.ZERO)}negate(){return new S(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){let{a:R}=e,{ex:j,ey:W,ez:re}=this,L=l(j*j),V=l(W*W),ie=l(Pg*l(re*re)),ue=l(R*L),he=j+W,ye=l(l(he*he)-L-V),xe=ue+V,Oe=xe-ie,Le=ue-V,je=l(ye*Oe),Et=l(xe*Le),yt=l(ye*Le),pn=l(Oe*xe);return new S(je,Et,pn,yt)}add(R){E(R);let{a:j,d:W}=e,{ex:re,ey:L,ez:V,et:ie}=this,{ex:ue,ey:he,ez:ye,et:xe}=R;if(j===BigInt(-1)){let Na=l((L-re)*(he+ue)),mt=l((L+re)*(he-ue)),ir=l(mt-Na);if(ir===ds)return this.double();let Re=l(V*Pg*xe),br=l(ie*Pg*ye),St=br+Re,Is=mt+Na,Qu=br-Re,Mn=l(St*ir),Fs=l(Is*Qu),ts=l(St*Qu),fr=l(ir*Is);return new S(Mn,Fs,fr,ts)}let Oe=l(re*ue),Le=l(L*he),je=l(ie*W*xe),Et=l(V*ye),yt=l((re+L)*(ue+he)-Oe-Le),pn=Et-je,gr=Et+je,Bs=l(Le-j*Oe),es=l(yt*pn),Io=l(gr*Bs),vr=l(yt*Bs),Nn=l(pn*gr);return new S(es,Io,Nn,vr)}subtract(R){return this.add(R.negate())}wNAF(R){return B.wNAFCached(this,v,R,S.normalizeZ)}multiply(R){let{p:j,f:W}=this.wNAF(_(R,n));return S.normalizeZ([j,W])[0]}multiplyUnsafe(R){let j=D(R);return j===ds?C:this.equals(C)||j===ai?this:this.equals(P)?this.wNAF(j).p:B.unsafeLadder(this,j)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return B.unsafeLadder(this,n).is0()}toAffine(R){let{ex:j,ey:W,ez:re}=this,L=this.is0();R==null&&(R=L?jte:r.inv(re));let V=l(j*R),ie=l(W*R),ue=l(re*R);if(L)return{x:ds,y:ai};if(ue!==ai)throw new Error("invZ was invalid");return{x:V,y:ie}}clearCofactor(){let{h:R}=e;return R===ai?this:this.multiplyUnsafe(R)}static fromHex(R,j=!1){let{d:W,a:re}=e,L=r.BYTES;R=Gt("pointHex",R,L);let V=R.slice(),ie=R[L-1];V[L-1]=ie&-129;let ue=ls(V);ue===ds||(j?_(ue,c):_(ue,r.ORDER));let he=l(ue*ue),ye=l(he-ai),xe=l(W*he-re),{isValid:Oe,value:Le}=d(ye,xe);if(!Oe)throw new Error("Point.fromHex: invalid y coordinate");let je=(Le&ai)===ai,Et=(ie&128)!==0;if(!j&&Le===ds&&Et)throw new Error("Point.fromHex: x=0 and x_0=1");return Et!==je&&(Le=l(-Le)),S.fromAffine({x:Le,y:ue})}static fromPrivateKey(R){return $(R).point}toRawBytes(){let{x:R,y:j}=this.toAffine(),W=ea(j,r.BYTES);return W[W.length-1]|=R&ai?128:0,W}toHex(){return Yo(this.toRawBytes())}}S.BASE=new S(e.Gx,e.Gy,ai,l(e.Gx*e.Gy)),S.ZERO=new S(ds,ai,ai,ds);let{BASE:P,ZERO:C}=S,B=Ag(S,a*8);function F(U){return Bt(U,n)}function I(U){return F(ls(U))}function $(U){let R=a;U=Gt("private key",U,R);let j=Gt("hashed private key",i(U),2*R),W=p(j.slice(0,R)),re=j.slice(R,2*R),L=I(W),V=P.multiply(L),ie=V.toRawBytes();return{head:W,prefix:re,scalar:L,point:V,pointBytes:ie}}function q(U){return $(U).pointBytes}function X(U=new Uint8Array,...R){let j=ta(...R);return I(i(f(j,Gt("context",U),!!s)))}function Q(U,R,j={}){U=Gt("message",U),s&&(U=s(U));let{prefix:W,scalar:re,pointBytes:L}=$(R),V=X(j.context,W,U),ie=P.multiply(V).toRawBytes(),ue=X(j.context,ie,L,U),he=F(V+ue*re);D(he);let ye=ta(ie,ea(he,r.BYTES));return Gt("result",ye,a*2)}let K=Nte;function G(U,R,j,W=K){let{context:re,zip215:L}=W,V=r.BYTES;U=Gt("signature",U,2*V),R=Gt("message",R),s&&(R=s(R));let ie=ls(U.slice(V,2*V)),ue,he,ye;try{ue=S.fromHex(j,L),he=S.fromHex(U.slice(0,V),L),ye=P.multiplyUnsafe(ie)}catch{return!1}if(!L&&ue.isSmallOrder())return!1;let xe=X(re,he.toRawBytes(),ue.toRawBytes(),R);return he.add(ue.multiplyUnsafe(xe)).subtract(ye).clearCofactor().equals(S.ZERO)}return P._setWindowSize(8),{CURVE:e,getPublicKey:q,sign:Q,verify:G,ExtendedPoint:S,utils:{getExtendedPublicKey:$,randomPrivateKey:()=>o(r.BYTES),precompute(U=8,R=S.BASE){return R._setWindowSize(U),R.multiply(BigInt(3)),R}}}}var gh=BigInt(0),BS=BigInt(1);function qte(t){return Pi(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function z3(t){let e=qte(t),{P:r}=e,n=v=>Bt(v,r),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(v=>v),u=e.powPminus2||(v=>bS(v,r-BigInt(2),r));function c(v,E,S){let P=n(v*(E-S));return E=n(E-P),S=n(S+P),[E,S]}function l(v){if(typeof v=="bigint"&&gh<=v&&v<r)return v;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}let d=(e.a-BigInt(2))/BigInt(4);function p(v,E){let S=l(v),P=l(E),C=S,B=BS,F=gh,I=S,$=BS,q=gh,X;for(let K=BigInt(s-1);K>=gh;K--){let G=P>>K&BS;q^=G,X=c(q,B,I),B=X[0],I=X[1],X=c(q,F,$),F=X[0],$=X[1],q=G;let ne=B+F,U=n(ne*ne),R=B-F,j=n(R*R),W=U-j,re=I+$,L=I-$,V=n(L*ne),ie=n(re*R),ue=V+ie,he=V-ie;I=n(ue*ue),$=n(C*n(he*he)),B=n(U*j),F=n(W*(U+n(d*W)))}X=c(q,B,I),B=X[0],I=X[1],X=c(q,F,$),F=X[0],$=X[1];let Q=u(F);return n(B*Q)}function f(v){return ea(n(v),i)}function h(v){let E=Gt("u coordinate",v,i);return o===32&&(E[31]&=127),ls(E)}function m(v){let E=Gt("scalar",v),S=E.length;if(S!==i&&S!==o)throw new Error(`Expected ${i} or ${o} bytes, got ${S}`);return ls(a(E))}function g(v,E){let S=h(E),P=m(v),C=p(S,P);if(C===gh)throw new Error("Invalid private or public key received");return f(C)}let _=f(e.Gu);function D(v){return g(v,_)}return{scalarMult:g,scalarMultBase:D,getSharedSecret:(v,E)=>g(v,E),getPublicKey:v=>D(v),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:_}}var vh=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),J3=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),iCe=BigInt(0),Lte=BigInt(1),IS=BigInt(2),Ute=BigInt(5),H3=BigInt(10),Kte=BigInt(20),Vte=BigInt(40),W3=BigInt(80);function G3(t){let e=vh,n=t*t%e*t%e,s=Zt(n,IS,e)*n%e,i=Zt(s,Lte,e)*t%e,o=Zt(i,Ute,e)*i%e,a=Zt(o,H3,e)*o%e,u=Zt(a,Kte,e)*a%e,c=Zt(u,Vte,e)*u%e,l=Zt(c,W3,e)*c%e,d=Zt(l,W3,e)*c%e,p=Zt(d,H3,e)*o%e;return{pow_p_5_8:Zt(p,IS,e)*t%e,b2:n}}function Z3(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function zte(t,e){let r=vh,n=Bt(e*e*e,r),s=Bt(n*n*e,r),i=G3(t*s).pow_p_5_8,o=Bt(t*n*i,r),a=Bt(e*o*o,r),u=o,c=Bt(o*J3,r),l=a===t,d=a===Bt(-t,r),p=a===Bt(-t*J3,r);return l&&(o=u),(d||p)&&(o=c),I3(o,r)&&(o=Bt(-o,r)),{isValid:l||d,value:o}}var Ti=Td(vh,void 0,!0),bh={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ti,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:TS,randomBytes:$c,adjustScalarBytes:Z3,uvRatio:zte},On=Og(bh);function X3(t,e,r){if(e.length>255)throw new Error("Context is too big");return bg(pS("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}var sCe=Og({...bh,domain:X3}),oCe=Og({...bh,domain:X3,prehash:TS}),na=z3({P:vh,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{let e=vh,{pow_p_5_8:r,b2:n}=G3(t);return Bt(Zt(r,BigInt(3),e)*n,e)},adjustScalarBytes:Z3,randomBytes:$c});function Tg(t){let{y:e}=On.ExtendedPoint.fromHex(t),r=BigInt(1);return Ti.toBytes(Ti.create((r+e)*Ti.inv(r-e)))}function Bg(t){let e=bh.hash(t.subarray(0,32));return bh.adjustScalarBytes(e).subarray(0,32)}var Jte=(Ti.ORDER+BigInt(3))/BigInt(8),aCe=Ti.pow(IS,Jte),uCe=Ti.sqrt(Ti.neg(Ti.ONE)),cCe=(Ti.ORDER-BigInt(5))/BigInt(8),lCe=BigInt(486662);var dCe=F3(Ti,Ti.neg(BigInt(486664)));var fCe=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),pCe=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),hCe=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),yCe=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var mCe=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Bi=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Hte=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},uu=class t{static bytesToPrivateKey(e){return Bi(this,arguments,void 0,function*({privateKeyBytes:r}){let n=On.getPublicKey(r),s={crv:"Ed25519",d:Ce.uint8Array(r).toBase64Url(),kty:"OKP",x:Ce.uint8Array(n).toBase64Url()};return s.kid=yield Lt({jwk:s}),s})}static bytesToPublicKey(e){return Bi(this,arguments,void 0,function*({publicKeyBytes:r}){let n={kty:"OKP",crv:"Ed25519",x:Ce.uint8Array(r).toBase64Url()};return n.kid=yield Lt({jwk:n}),n})}static computePublicKey(e){return Bi(this,arguments,void 0,function*({key:r}){let n=yield t.privateKeyToBytes({privateKey:r}),s=On.getPublicKey(n),i={kty:"OKP",crv:"Ed25519",x:Ce.uint8Array(s).toBase64Url()};return i.kid=yield Lt({jwk:i}),i})}static convertPrivateKeyToX25519(e){return Bi(this,arguments,void 0,function*({privateKey:r}){let n=yield t.privateKeyToBytes({privateKey:r}),s=Bg(n),i=na.getPublicKey(s),o={kty:"OKP",crv:"X25519",d:Ce.uint8Array(s).toBase64Url(),x:Ce.uint8Array(i).toBase64Url()};return o.kid=yield Lt({jwk:o}),o})}static convertPublicKeyToX25519(e){return Bi(this,arguments,void 0,function*({publicKey:r}){let n=yield t.publicKeyToBytes({publicKey:r});if(!(yield t.validatePublicKey({publicKeyBytes:n})))throw new Error("Ed25519: Invalid public key.");let i=Tg(n),o={kty:"OKP",crv:"X25519",x:Ce.uint8Array(i).toBase64Url()};return o.kid=yield Lt({jwk:o}),o})}static generateKey(){return Bi(this,void 0,void 0,function*(){let e=On.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Lt({jwk:r}),r})}static getPublicKey(e){return Bi(this,arguments,void 0,function*({key:r}){var n;if(!(nu(r)&&r.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let{d:s}=r,i=Hte(r,["d"]);return(n=i.kid)!==null&&n!==void 0||(i.kid=yield Lt({jwk:i})),i})}static privateKeyToBytes(e){return Bi(this,arguments,void 0,function*({privateKey:r}){if(!nu(r))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return Ce.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return Bi(this,arguments,void 0,function*({publicKey:r}){if(!hh(r))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return Ce.base64Url(r.x).toUint8Array()})}static sign(e){return Bi(this,arguments,void 0,function*({key:r,data:n}){let s=yield t.privateKeyToBytes({privateKey:r});return On.sign(n,s)})}static validatePublicKey(e){return Bi(this,arguments,void 0,function*({publicKeyBytes:r}){try{On.ExtendedPoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return Bi(this,arguments,void 0,function*({key:r,signature:n,data:s}){let i=yield t.publicKeyToBytes({publicKey:r});return On.verify(n,s,i)})}};var wh=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Ig=class extends Xs{computePublicKey(e){return wh(this,arguments,void 0,function*({key:r}){if(!nu(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{let n=yield uu.computePublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(e){return wh(this,arguments,void 0,function*({algorithm:r}){switch(r){case"Ed25519":{let n=yield uu.generateKey();return n.alg="EdDSA",n}}})}getPublicKey(e){return wh(this,arguments,void 0,function*({key:r}){if(!nu(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{let n=yield uu.getPublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(e){return wh(this,arguments,void 0,function*({key:r,data:n}){if(!nu(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":return yield uu.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(e){return wh(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!hh(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(r.crv){case"Ed25519":return yield uu.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}};var ia=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},FS={Ed25519:{implementation:Ig,names:["Ed25519"]},secp256k1:{implementation:mh,names:["ES256K","secp256k1"]},secp256r1:{implementation:mh,names:["ES256","secp256r1"]},"SHA-256":{implementation:gg,names:["SHA-256"]}},Fg=class{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e?.keyStore)!==null&&r!==void 0?r:new $0}digest(e){return ia(this,arguments,void 0,function*({algorithm:r,data:n}){return yield this.getAlgorithm({algorithm:r}).digest({algorithm:r,data:n})})}exportKey(e){return ia(this,arguments,void 0,function*({keyUri:r}){return yield this.getPrivateKey({keyUri:r})})}generateKey(e){return ia(this,arguments,void 0,function*({algorithm:r}){let s=yield this.getAlgorithm({algorithm:r}).generateKey({algorithm:r});if(s?.kid===void 0)throw new Error("Generated key is missing a required property: kid");let i=`${CS}${s.kid}`;return yield this._keyStore.set(i,s),i})}getKeyUri(e){return ia(this,arguments,void 0,function*({key:r}){let n=yield Lt({jwk:r});return`${CS}${n}`})}getPublicKey(e){return ia(this,arguments,void 0,function*({keyUri:r}){let n=yield this.getPrivateKey({keyUri:r}),s=this.getAlgorithmName({key:n});return yield this.getAlgorithm({algorithm:s}).getPublicKey({key:n})})}importKey(e){return ia(this,arguments,void 0,function*({key:r}){var n;if(!U3(r))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");let s=structuredClone(r);(n=s.kid)!==null&&n!==void 0||(s.kid=yield Lt({jwk:s}));let i=yield this.getKeyUri({key:s});return yield this._keyStore.set(i,s),i})}sign(e){return ia(this,arguments,void 0,function*({keyUri:r,data:n}){let s=yield this.getPrivateKey({keyUri:r}),i=this.getAlgorithmName({key:s});return this.getAlgorithm({algorithm:i}).sign({data:n,key:s})})}verify(e){return ia(this,arguments,void 0,function*({key:r,signature:n,data:s}){let i=this.getAlgorithmName({key:r});return this.getAlgorithm({algorithm:i}).verify({key:r,signature:n,data:s})})}getAlgorithm({algorithm:e}){var r;let n=(r=FS[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){let r=e.alg,n=e.crv;for(let s in FS){let i=FS[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey(e){return ia(this,arguments,void 0,function*({keyUri:r}){let n=yield this._keyStore.get(r);if(!n)throw new Error(`Key not found: ${r}`);return n})}};function Wte(t){let e={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(t.alg&&Object.values(e).includes(t.alg))return t.alg;if(t.crv&&Object.keys(e).includes(t.crv))return e[t.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${t.alg}, crv=${t.crv}. Supported 'alg' values: ${Object.values(e).join(", ")}. Supported 'crv' values: ${Object.keys(e).join(", ")}.`)}function kS(t){return b3(t)}function Gte(){return Ad.randomUUID()}function Zte({length:t}){if(3>t||t>10)throw new Error("randomPin() can securely generate a PIN between 3 to 10 digits.");let e=Math.pow(10,t)-1,r;if(t<=6){let n=Math.pow(10,t);do{let s=kS(Math.ceil(t/2));r=new DataView(s.buffer).getUint16(0,!1)%n}while(r>e)}else{let n=Math.pow(10,10);do{let s=kS(4);r=new DataView(s.buffer).getUint32(0,!1)%n}while(r>e)}return r.toString().padStart(t,"0")}var kg={randomPin:Zte,randomUuid:Gte,randomBytes:kS,getJoseSignatureAlgorithmFromPublicKey:Wte};var qc;(function(t){t.authentication="authentication",t.assertionMethod="assertionMethod",t.keyAgreement="keyAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(qc||(qc={}));var ur={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};var it=class t{constructor({method:e,id:r,path:n,query:s,fragment:i,params:o}){this.uri=`did:${e}:${r}`,this.method=e,this.id=r,this.path=n,this.query=s,this.fragment=i,this.params=o}static parse(e){if(!e)return null;let r=t.DID_URI_PATTERN.exec(e);if(!r||!r.groups)return null;let{method:n,id:s,path:i,query:o,fragment:a}=r.groups,u={uri:`did:${n}:${s}`,method:n,id:s};if(i&&(u.path=i),o&&(u.query=o.slice(1)),a&&(u.fragment=a.slice(1)),o){let c={},l=o.slice(1).split("&");for(let d of l){let[p,f]=d.split("=");c[p]=f}u.params=c}return u}};it.METHOD_PATTERN="([a-z0-9]+)";it.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";it.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${it.PCT_ENCODED_PATTERN})`;it.METHOD_ID_PATTERN=`((?:${it.ID_CHAR_PATTERN}*:)*(${it.ID_CHAR_PATTERN}+))`;it.PATH_PATTERN="(/[^#?]*)?";it.QUERY_PATTERN="([?][^#]*)?";it.FRAGMENT_PATTERN="(#.*)?";it.DID_URI_PATTERN=new RegExp(`^did:(?<method>${it.METHOD_PATTERN}):(?<id>${it.METHOD_ID_PATTERN})(?<path>${it.PATH_PATTERN})(?<query>${it.QUERY_PATTERN})(?<fragment>${it.FRAGMENT_PATTERN})$`);var Se=class t extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,t)}},be;(function(t){t.InvalidDid="invalidDid",t.MethodNotSupported="methodNotSupported",t.InternalError="internalError",t.InvalidDidDocument="invalidDidDocument",t.InvalidDidDocumentLength="invalidDidDocumentLength",t.InvalidDidUrl="invalidDidUrl",t.InvalidPreviousDidProof="invalidPreviousDidProof",t.InvalidPublicKey="invalidPublicKey",t.InvalidPublicKeyLength="invalidPublicKeyLength",t.InvalidPublicKeyType="invalidPublicKeyType",t.InvalidSignature="invalidSignature",t.NotFound="notFound",t.RepresentationNotSupported="representationNotSupported",t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(be||(be={}));var Xte=qn(R1(),1);function Yte(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var m=0,g=0,_=0,D=h.length;_!==D&&h[_]===0;)_++,m++;for(var v=(D-_)*l+1>>>0,E=new Uint8Array(v);_!==D;){for(var S=h[_],P=0,C=v-1;(S!==0||P<g)&&C!==-1;C--,P++)S+=256*E[C]>>>0,E[C]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");g=P,_++}for(var B=v-g;B!==v&&E[B]===0;)B++;for(var F=u.repeat(m);B<v;++B)F+=t.charAt(E[B]);return F}function p(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var m=0;if(h[m]!==" "){for(var g=0,_=0;h[m]===u;)g++,m++;for(var D=(h.length-m)*c+1>>>0,v=new Uint8Array(D);h[m];){var E=r[h.charCodeAt(m)];if(E===255)return;for(var S=0,P=D-1;(E!==0||S<_)&&P!==-1;P--,S++)E+=a*v[P]>>>0,v[P]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");_=S,m++}if(h[m]!==" "){for(var C=D-_;C!==D&&v[C]===0;)C++;for(var B=new Uint8Array(g+(D-C)),F=g;C!==D;)B[F++]=v[C++];return B}}}function f(h){var m=p(h);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:p,decode:f}}var Qte=Yte,ere=Qte,Y3=ere;var NPe=new Uint8Array(0);var Q3=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Id=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var $S=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},jS=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return e5(this,e)}},NS=class{constructor(e){this.decoders=e}or(e){return e5(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},e5=(t,e)=>new NS({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),MS=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new $S(e,r,n),this.decoder=new jS(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},t5=({name:t,prefix:e,encode:r,decode:n})=>new MS(t,e,r,n),qS=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:s}=Y3(r,e);return t5({prefix:t,name:e,encode:n,decode:i=>Id(s(i))})},rre=(t,e,r,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,u=0,c=0;for(let l=0;l<i;++l){let d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},nre=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Tn=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>t5({prefix:e,name:t,encode(s){return nre(s,n,r)},decode(s){return rre(s,n,r,t)}});var _h=Tn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),KPe=Tn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),VPe=Tn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),zPe=Tn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),JPe=Tn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),HPe=Tn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),WPe=Tn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),GPe=Tn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),LS=Tn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Vn=qS({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),YPe=qS({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var tOe=Tn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),rOe=Tn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Qs=Tn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),nOe=Tn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function r5(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function n5(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function Fd(t){let r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var Eh=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},i5=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,u){o=t[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},o)}},Rg=new TextEncoder,Lc=new TextDecoder,ge=class t{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new t(e,"ArrayBuffer")}static asyncIterable(e){if(!n5(e))throw new TypeError("Input must be of type AsyncIterable.");return new t(e,"AsyncIterable")}static base32Z(e){return new t(e,"Base32Z")}static base58Btc(e){return new t(e,"Base58Btc")}static base64Url(e){return new t(e,"Base64Url")}static bufferSource(e){return new t(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new t(e,"Hex")}static multibase(e){return new t(e,"Multibase")}static object(e){return new t(e,"Object")}static string(e){return new t(e,"String")}static uint8Array(e){return new t(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return Vn.baseDecode(this.data).buffer;case"Base64Url":return Qs.baseDecode(this.data).buffer;case"BufferSource":{if(Fd(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return r5(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return Eh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return LS.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return Vn.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return Vn.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return Qs.baseEncode(e)}case"BufferSource":{let e=this.toUint8Array();return Qs.baseEncode(e)}case"Object":{let e=JSON.stringify(this.data),r=Rg.encode(e);return Qs.baseEncode(r)}case"String":{let e=Rg.encode(this.data);return Qs.baseEncode(e)}case"Uint8Array":return Qs.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var e,r,n,s;return Eh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u=[];try{for(var i=!0,o=i5(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;let l=s;u.push(l)}}catch(l){r={error:l}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){let e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Base64Url":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{let e=Qs.baseDecode(this.data),r=Lc.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{let e=Lc.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return Eh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return Lc.decode(this.data);case"Base64Url":{let e=Qs.baseDecode(this.data);return Lc.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return Lc.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var e,r,n,s;return Eh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u="";try{for(var i=!0,o=i5(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;let c=s;typeof c=="string"?u+=c:u+=Lc.decode(c,{stream:!0})}}catch(c){r={error:c}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return u+=Lc.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return LS.baseDecode(this.data);case"Base58Btc":return Vn.baseDecode(this.data);case"Base64Url":return Qs.baseDecode(this.data);case"BufferSource":{let e=Fd(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{let e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){let n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{let e=JSON.stringify(this.data);return Rg.encode(e)}case"String":return Rg.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return Eh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var sa={};Cr(sa,{decode:()=>kd,encodeTo:()=>Uc,encodingLength:()=>Kc});var ire=a5,s5=128,sre=127,ore=~sre,are=Math.pow(2,31);function a5(t,e,r){e=e||[],r=r||0;for(var n=r;t>=are;)e[r++]=t&255|s5,t/=128;for(;t&ore;)e[r++]=t&255|s5,t>>>=7;return e[r]=t|0,a5.bytes=r-n+1,e}var ure=US,cre=128,o5=127;function US(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw US.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&o5)<<s:(o&o5)*Math.pow(2,s),s+=7}while(o>=cre);return US.bytes=i-n,r}var lre=Math.pow(2,7),dre=Math.pow(2,14),fre=Math.pow(2,21),pre=Math.pow(2,28),hre=Math.pow(2,35),yre=Math.pow(2,42),mre=Math.pow(2,49),gre=Math.pow(2,56),vre=Math.pow(2,63),bre=function(t){return t<lre?1:t<dre?2:t<fre?3:t<pre?4:t<hre?5:t<yre?6:t<mre?7:t<gre?8:t<vre?9:10},wre={encode:ire,decode:ure,encodingLength:bre},_re=wre,Sh=_re;var kd=(t,e=0)=>[Sh.decode(t,e),Sh.decode.bytes],Uc=(t,e,r=0)=>(Sh.encode(t,e,r),e),Kc=t=>Sh.encodingLength(t);var KS=(t,e)=>{let r=e.byteLength,n=Kc(t),s=n+Kc(r),i=new Uint8Array(s+r);return Uc(t,i,0),Uc(r,i,n),i.set(e,s),new Rd(t,r,e,i)},u5=t=>{let e=Id(t),[r,n]=kd(e),[s,i]=kd(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new Rd(r,s,o,e)},c5=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&Q3(t.bytes,r.bytes)}},Rd=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};var l5=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return Sre(r,zS(t),e||Vn.encoder);default:return Are(r,zS(t),e||_h.encoder)}};var d5=new WeakMap,zS=t=>{let e=d5.get(t);if(e==null){let r=new Map;return d5.set(t,r),r}return e},JS=class t{constructor(e,r,n,s){this.code=r,this.version=e,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==Ah)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==xre)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=KS(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&c5(e.multihash,n.multihash)}toString(e){return l5(this,e)}toJSON(){return{"/":l5(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:s,multihash:i,bytes:o}=r;return new t(n,s,i,o||f5(n,s,i.bytes))}else if(r[Dre]===!0){let{version:n,multihash:s,code:i}=r,o=u5(s);return t.create(n,i,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Ah)throw new Error(`Version 0 CID must use dag-pb (code: ${Ah}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let s=f5(e,r,n.bytes);return new t(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,Ah,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,s=Id(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=s.subarray(r.multihashSize-r.digestSize),o=new Rd(r.multihashCode,r.digestSize,i,s);return[r.version===0?t.createV0(o):t.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[d,p]=kd(e.subarray(r));return r+=p,d},s=n(),i=Ah;if(s===18?(s=0,r=0):i=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);let o=r,a=n(),u=n(),c=r+u,l=c-o;return{version:s,codec:i,multihashCode:a,digestSize:u,multihashSize:l,size:c}}static parse(e,r){let[n,s]=Ere(e,r),i=t.decode(s);if(i.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return zS(i).set(n,e),i}},Ere=(t,e)=>{switch(t[0]){case"Q":{let r=e||Vn;return[Vn.prefix,r.decode(`${Vn.prefix}${t}`)]}case Vn.prefix:{let r=e||Vn;return[Vn.prefix,r.decode(t)]}case _h.prefix:{let r=e||_h;return[_h.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Sre=(t,e,r)=>{let{prefix:n}=r;if(n!==Vn.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let s=e.get(n);if(s==null){let i=r.encode(t).slice(1);return e.set(n,i),i}else return s},Are=(t,e,r)=>{let{prefix:n}=r,s=e.get(n);if(s==null){let i=r.encode(t);return e.set(n,i),i}else return s},Ah=112,xre=18,f5=(t,e,r)=>{let n=Kc(t),s=n+Kc(e),i=new Uint8Array(s+r.byteLength);return Uc(t,i,0),Uc(e,i,n),i.set(r,s),i},Dre=Symbol.for("@ipld/js-cid/CID");var yn=class t{static addPrefix(e){var r;let{code:n,data:s,name:i}=e;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=t.codeToName.has(n)?n:t.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);let o=sa.encodingLength(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),sa.encodeTo(n,a),a}static getCodeFromData(e){let{prefixedData:r}=e,[n,s]=sa.decode(r);return n}static getCodeFromName(e){let{name:r}=e,n=t.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){let{code:r}=e,n=t.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){t.codeToName.set(e.code,e.name),t.nameToCode.set(e.name,e.code)}static removePrefix(e){let{prefixedData:r}=e,[n,s]=sa.decode(r),i=t.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};yn.codeToName=new Map;yn.nameToCode=new Map;yn.registerCodec({code:237,name:"ed25519-pub"});yn.registerCodec({code:4864,name:"ed25519-priv"});yn.registerCodec({code:236,name:"x25519-pub"});yn.registerCodec({code:4866,name:"x25519-priv"});yn.registerCodec({code:231,name:"secp256k1-pub"});yn.registerCodec({code:4865,name:"secp256k1-priv"});function HS(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&HS(t[e])})}var Pre=qn(h5(),1),Vc=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};var $g=class{constructor(){this.store=new Map}clear(){return Vc(this,void 0,void 0,function*(){this.store.clear()})}close(){return Vc(this,void 0,void 0,function*(){})}delete(e){return Vc(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return Vc(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return Vc(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return Vc(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return Vc(this,void 0,void 0,function*(){this.store.set(e,r)})}};var Ore=qn(lh(),1);var Tre=qn(lh(),1);var Bre=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},$d=class{static digest({data:e}){return Bre(this,void 0,void 0,function*(){return Ci(e)})}};var eo=class{};var Ire=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},jg=class extends eo{digest({algorithm:e,data:r}){return Ire(this,void 0,void 0,function*(){switch(e){case"SHA-256":return yield $d.digest({data:r})}})}};function y5(t){let e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){let s=Object.keys(n).sort(),i={};for(let o of s)i[o]=e(n[o]);return i}return n},r=e(t);return JSON.stringify(r)}var Fre=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},WS="urn:jwk:";function He({jwk:t}){return Fre(this,void 0,void 0,function*(){let e=t.kty,r;if(e==="EC")r={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(e==="oct")r={k:t.k,kty:t.kty};else if(e==="OKP")r={crv:t.crv,kty:t.kty,x:t.x};else if(e==="RSA")r={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${e}`);HS(r);let n=y5(r),s=ge.string(n).toUint8Array(),i=yield $d.digest({data:s});return ge.uint8Array(i).toBase64Url()})}function to(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function jd(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function ro(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function Nd(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function m5(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var tn=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},kre=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},Ur=class t{static adjustSignatureToLowS({signature:e}){return tn(this,void 0,void 0,function*(){let r=zt.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return tn(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",d:ge.uint8Array(e).toBase64Url(),x:ge.uint8Array(r.x).toBase64Url(),y:ge.uint8Array(r.y).toBase64Url()};return n.kid=yield He({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return tn(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",x:ge.uint8Array(r.x).toBase64Url(),y:ge.uint8Array(r.y).toBase64Url()};return n.kid=yield He({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return tn(this,void 0,void 0,function*(){return zt.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return tn(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:ge.uint8Array(n.x).toBase64Url(),y:ge.uint8Array(n.y).toBase64Url()};return s.kid=yield He({jwk:s}),s})}static convertDerToCompactSignature({derSignature:e}){return tn(this,void 0,void 0,function*(){return zt.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return tn(this,void 0,void 0,function*(){return zt.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return tn(this,void 0,void 0,function*(){let e=zt.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield He({jwk:r}),r})}static getPublicKey({key:e}){var r;return tn(this,void 0,void 0,function*(){if(!(to(e)&&e.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let{d:n}=e,s=kre(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield He({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return tn(this,void 0,void 0,function*(){if(!to(e))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return ge.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return tn(this,void 0,void 0,function*(){if(!(jd(e)&&e.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");let r=new Uint8Array([4]),n=ge.base64Url(e.x).toUint8Array(),s=ge.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return tn(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield t.privateKeyToBytes({privateKey:e}),s=yield t.publicKeyToBytes({publicKey:r});return zt.getSharedSecret(n,s,!0).slice(1)})}static sign({data:e,key:r}){return tn(this,void 0,void 0,function*(){let n=yield t.privateKeyToBytes({privateKey:r}),s=Ci(e);return zt.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return tn(this,void 0,void 0,function*(){return zt.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return tn(this,void 0,void 0,function*(){try{zt.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return tn(this,void 0,void 0,function*(){let s=yield t.publicKeyToBytes({publicKey:e}),i=Ci(n);return zt.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return tn(this,void 0,void 0,function*(){e.byteLength===32&&(e=zt.getPublicKey(e));let r=zt.ProjectivePoint.fromHex(e),n=Or(r.x,32),s=Or(r.y,32);return{x:n,y:s}})}};var rn=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Rre=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},nn=class t{static adjustSignatureToLowS({signature:e}){return rn(this,void 0,void 0,function*(){let r=Wt.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return rn(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",d:ge.uint8Array(e).toBase64Url(),x:ge.uint8Array(r.x).toBase64Url(),y:ge.uint8Array(r.y).toBase64Url()};return n.kid=yield He({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return rn(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",x:ge.uint8Array(r.x).toBase64Url(),y:ge.uint8Array(r.y).toBase64Url()};return n.kid=yield He({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return rn(this,void 0,void 0,function*(){return Wt.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return rn(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:ge.uint8Array(n.x).toBase64Url(),y:ge.uint8Array(n.y).toBase64Url()};return s.kid=yield He({jwk:s}),s})}static convertDerToCompactSignature({derSignature:e}){return rn(this,void 0,void 0,function*(){return Wt.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return rn(this,void 0,void 0,function*(){return Wt.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return rn(this,void 0,void 0,function*(){let e=Wt.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield He({jwk:r}),r})}static getPublicKey({key:e}){var r;return rn(this,void 0,void 0,function*(){if(!(to(e)&&e.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let{d:n}=e,s=Rre(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield He({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return rn(this,void 0,void 0,function*(){if(!to(e))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return ge.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return rn(this,void 0,void 0,function*(){if(!(jd(e)&&e.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");let r=new Uint8Array([4]),n=ge.base64Url(e.x).toUint8Array(),s=ge.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return rn(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield t.privateKeyToBytes({privateKey:e}),s=yield t.publicKeyToBytes({publicKey:r});return Wt.getSharedSecret(n,s,!0).slice(1)})}static sign({data:e,key:r}){return rn(this,void 0,void 0,function*(){let n=yield t.privateKeyToBytes({privateKey:r}),s=Ci(e);return Wt.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return rn(this,void 0,void 0,function*(){return Wt.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return rn(this,void 0,void 0,function*(){try{Wt.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return rn(this,void 0,void 0,function*(){let s=yield t.publicKeyToBytes({publicKey:e}),i=Ci(n);return Wt.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return rn(this,void 0,void 0,function*(){e.byteLength===32&&(e=Wt.getPublicKey(e));let r=Wt.ProjectivePoint.fromHex(e),n=Or(r.x,32),s=Or(r.y,32);return{x:n,y:s}})}};var xh=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Dh=class extends eo{computePublicKey({key:e}){return xh(this,void 0,void 0,function*(){if(!to(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=yield Ur.computePublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=yield nn.computePublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return xh(this,void 0,void 0,function*(){switch(e){case"ES256K":case"secp256k1":{let r=yield Ur.generateKey();return r.alg="ES256K",r}case"ES256":case"secp256r1":{let r=yield nn.generateKey();return r.alg="ES256",r}}})}getPublicKey({key:e}){return xh(this,void 0,void 0,function*(){if(!to(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=yield Ur.getPublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=yield nn.getPublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return xh(this,void 0,void 0,function*(){if(!to(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":return yield Ur.sign({key:e,data:r});case"P-256":return yield nn.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return xh(this,void 0,void 0,function*(){if(!jd(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(e.crv){case"secp256k1":return yield Ur.verify({key:e,signature:r,data:n});case"P-256":return yield nn.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var Ii=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},$re=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},Rr=class t{static bytesToPrivateKey({privateKeyBytes:e}){return Ii(this,void 0,void 0,function*(){let r=On.getPublicKey(e),n={crv:"Ed25519",d:ge.uint8Array(e).toBase64Url(),kty:"OKP",x:ge.uint8Array(r).toBase64Url()};return n.kid=yield He({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return Ii(this,void 0,void 0,function*(){let r={kty:"OKP",crv:"Ed25519",x:ge.uint8Array(e).toBase64Url()};return r.kid=yield He({jwk:r}),r})}static computePublicKey({key:e}){return Ii(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=On.getPublicKey(r),s={kty:"OKP",crv:"Ed25519",x:ge.uint8Array(n).toBase64Url()};return s.kid=yield He({jwk:s}),s})}static convertPrivateKeyToX25519({privateKey:e}){return Ii(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=Bg(r),s=na.getPublicKey(n),i={kty:"OKP",crv:"X25519",d:ge.uint8Array(n).toBase64Url(),x:ge.uint8Array(s).toBase64Url()};return i.kid=yield He({jwk:i}),i})}static convertPublicKeyToX25519({publicKey:e}){return Ii(this,void 0,void 0,function*(){let r=yield t.publicKeyToBytes({publicKey:e});if(!(yield t.validatePublicKey({publicKeyBytes:r})))throw new Error("Ed25519: Invalid public key.");let s=Tg(r),i={kty:"OKP",crv:"X25519",x:ge.uint8Array(s).toBase64Url()};return i.kid=yield He({jwk:i}),i})}static generateKey(){return Ii(this,void 0,void 0,function*(){let e=On.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield He({jwk:r}),r})}static getPublicKey({key:e}){var r;return Ii(this,void 0,void 0,function*(){if(!(ro(e)&&e.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let{d:n}=e,s=$re(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield He({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return Ii(this,void 0,void 0,function*(){if(!ro(e))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return ge.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return Ii(this,void 0,void 0,function*(){if(!Nd(e))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return ge.base64Url(e.x).toUint8Array()})}static sign({key:e,data:r}){return Ii(this,void 0,void 0,function*(){let n=yield t.privateKeyToBytes({privateKey:e});return On.sign(r,n)})}static validatePublicKey({publicKeyBytes:e}){return Ii(this,void 0,void 0,function*(){try{On.ExtendedPoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return Ii(this,void 0,void 0,function*(){let s=yield t.publicKeyToBytes({publicKey:e});return On.verify(r,n,s)})}};var Ch=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Ng=class extends eo{computePublicKey({key:e}){return Ch(this,void 0,void 0,function*(){if(!ro(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=yield Rr.computePublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return Ch(this,void 0,void 0,function*(){switch(e){case"Ed25519":{let r=yield Rr.generateKey();return r.alg="EdDSA",r}}})}getPublicKey({key:e}){return Ch(this,void 0,void 0,function*(){if(!ro(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=yield Rr.getPublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return Ch(this,void 0,void 0,function*(){if(!ro(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":return yield Rr.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return Ch(this,void 0,void 0,function*(){if(!Nd(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(e.crv){case"Ed25519":return yield Rr.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var oa=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},GS={Ed25519:{implementation:Ng,names:["Ed25519"]},secp256k1:{implementation:Dh,names:["ES256K","secp256k1"]},secp256r1:{implementation:Dh,names:["ES256","secp256r1"]},"SHA-256":{implementation:jg,names:["SHA-256"]}},mn=class{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e?.keyStore)!==null&&r!==void 0?r:new $g}digest({algorithm:e,data:r}){return oa(this,void 0,void 0,function*(){return yield this.getAlgorithm({algorithm:e}).digest({algorithm:e,data:r})})}exportKey({keyUri:e}){return oa(this,void 0,void 0,function*(){return yield this.getPrivateKey({keyUri:e})})}generateKey({algorithm:e}){return oa(this,void 0,void 0,function*(){let n=yield this.getAlgorithm({algorithm:e}).generateKey({algorithm:e});if(n?.kid===void 0)throw new Error("Generated key is missing a required property: kid");let s=`${WS}${n.kid}`;return yield this._keyStore.set(s,n),s})}getKeyUri({key:e}){return oa(this,void 0,void 0,function*(){let r=yield He({jwk:e});return`${WS}${r}`})}getPublicKey({keyUri:e}){return oa(this,void 0,void 0,function*(){let r=yield this.getPrivateKey({keyUri:e}),n=this.getAlgorithmName({key:r});return yield this.getAlgorithm({algorithm:n}).getPublicKey({key:r})})}importKey({key:e}){var r;return oa(this,void 0,void 0,function*(){if(!m5(e))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");let n=structuredClone(e);(r=n.kid)!==null&&r!==void 0||(n.kid=yield He({jwk:n}));let s=yield this.getKeyUri({key:n});return yield this._keyStore.set(s,n),s})}sign({keyUri:e,data:r}){return oa(this,void 0,void 0,function*(){let n=yield this.getPrivateKey({keyUri:e}),s=this.getAlgorithmName({key:n});return this.getAlgorithm({algorithm:s}).sign({data:r,key:n})})}verify({key:e,signature:r,data:n}){return oa(this,void 0,void 0,function*(){let s=this.getAlgorithmName({key:e});return this.getAlgorithm({algorithm:s}).verify({key:e,signature:r,data:n})})}getAlgorithm({algorithm:e}){var r;let n=(r=GS[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){let r=e.alg,n=e.crv;for(let s in GS){let i=GS[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey({keyUri:e}){return oa(this,void 0,void 0,function*(){let r=yield this._keyStore.get(e);if(!r)throw new Error(`Key not found: ${e}`);return r})}};var Mg={};Cr(Mg,{checkRequiredProperty:()=>jre,checkValidProperty:()=>Nre,getJoseSignatureAlgorithmFromPublicKey:()=>Mre,isWebCryptoSupported:()=>qre,randomBytes:()=>Lre,randomUuid:()=>Ure});function jre(t){if(!t||t.property===void 0||t.inObject===void 0)throw new TypeError("One or more required parameters missing: 'property, properties'");let{property:e,inObject:r}=t;if(!(e in r))throw new TypeError(`Required parameter missing: '${e}'`)}function Nre(t){if(!t||t.property===void 0||t.allowedProperties===void 0)throw new TypeError("One or more required parameters missing: 'property, allowedProperties'");let{property:e,allowedProperties:r}=t;if(Array.isArray(r)&&!r.includes(e)||r instanceof Set&&!r.has(e)||r instanceof Map&&!r.has(e)){let n=Array.from(r instanceof Map?r.keys():r).join(", ");throw new TypeError(`Out of range: '${e}'. Must be one of '${n}'`)}}function Mre(t){let e={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(t.alg&&Object.values(e).includes(t.alg))return t.alg;if(t.crv&&Object.keys(e).includes(t.crv))return e[t.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${t.alg}, crv=${t.crv}. Supported 'alg' values: ${Object.values(e).join(", ")}. Supported 'crv' values: ${Object.keys(e).join(", ")}.`)}function qre(){return!!(globalThis.crypto&&globalThis.crypto.subtle)}function Lre(t){return $c(t)}function Ure(){return Cd.randomUUID()}var Kre=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var aa=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));function g5(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var v5=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Vre=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Vre)throw new Error("Non little-endian hardware is not supported");function qg(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Lg(t){if(typeof t=="string")t=qg(t);else if(g5(t))t=t.slice();else throw new Error(`expected Uint8Array, got ${typeof t}`);return t}var zre=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function b5(t,e){if(e!==void 0&&(typeof e!="object"||!zre(e)))throw new Error("options must be object or undefined");return Object.assign(t,e)}function zc(t,e){if(!g5(t))throw new Error("Uint8Array expected");if(typeof e=="number"&&t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function w5(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}var ZS=(t,e)=>(Object.assign(e,t),e);function XS(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,c=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+c,a,n)}function Ph(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`wrong positive integer: ${t}`)}function YS(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function Jre(t){return t!=null&&typeof t=="object"&&(t instanceof Uint8Array||t.constructor.name==="Uint8Array")}function Md(t,...e){if(!Jre(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function QS(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function _5(t,e){Md(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var cu=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Hre=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},qd=class t{static bytesToPrivateKey({privateKeyBytes:e}){return cu(this,void 0,void 0,function*(){let r=na.getPublicKey(e),n={kty:"OKP",crv:"X25519",d:ge.uint8Array(e).toBase64Url(),x:ge.uint8Array(r).toBase64Url()};return n.kid=yield He({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return cu(this,void 0,void 0,function*(){let r={kty:"OKP",crv:"X25519",x:ge.uint8Array(e).toBase64Url()};return r.kid=yield He({jwk:r}),r})}static computePublicKey({key:e}){return cu(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=na.getPublicKey(r),s={kty:"OKP",crv:"X25519",x:ge.uint8Array(n).toBase64Url()};return s.kid=yield He({jwk:s}),s})}static generateKey(){return cu(this,void 0,void 0,function*(){let e=na.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield He({jwk:r}),r})}static getPublicKey({key:e}){var r;return cu(this,void 0,void 0,function*(){if(!(ro(e)&&e.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let{d:n}=e,s=Hre(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield He({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return cu(this,void 0,void 0,function*(){if(!ro(e))throw new Error("X25519: The provided key is not a valid OKP private key.");return ge.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return cu(this,void 0,void 0,function*(){if(!Nd(e))throw new Error("X25519: The provided key is not a valid OKP public key.");return ge.base64Url(e.x).toUint8Array()})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return cu(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield t.privateKeyToBytes({privateKey:e}),s=yield t.publicKeyToBytes({publicKey:r});return na.getSharedSecret(n,s)})}};var sn=(t,e)=>t[e++]&255|(t[e++]&255)<<8,rA=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Lg(e),zc(e,32);let r=sn(e,0),n=sn(e,2),s=sn(e,4),i=sn(e,6),o=sn(e,8),a=sn(e,10),u=sn(e,12),c=sn(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|u<<5)&8065,this.r[8]=(u>>>8|c<<8)&8191,this.r[9]=c>>>5&127;for(let l=0;l<8;l++)this.pad[l]=sn(e,16+2*l)}process(e,r,n=!1){let s=n?0:2048,{h:i,r:o}=this,a=o[0],u=o[1],c=o[2],l=o[3],d=o[4],p=o[5],f=o[6],h=o[7],m=o[8],g=o[9],_=sn(e,r+0),D=sn(e,r+2),v=sn(e,r+4),E=sn(e,r+6),S=sn(e,r+8),P=sn(e,r+10),C=sn(e,r+12),B=sn(e,r+14),F=i[0]+(_&8191),I=i[1]+((_>>>13|D<<3)&8191),$=i[2]+((D>>>10|v<<6)&8191),q=i[3]+((v>>>7|E<<9)&8191),X=i[4]+((E>>>4|S<<12)&8191),Q=i[5]+(S>>>1&8191),K=i[6]+((S>>>14|P<<2)&8191),G=i[7]+((P>>>11|C<<5)&8191),ne=i[8]+((C>>>8|B<<8)&8191),U=i[9]+(B>>>5|s),R=0,j=R+F*a+I*(5*g)+$*(5*m)+q*(5*h)+X*(5*f);R=j>>>13,j&=8191,j+=Q*(5*p)+K*(5*d)+G*(5*l)+ne*(5*c)+U*(5*u),R+=j>>>13,j&=8191;let W=R+F*u+I*a+$*(5*g)+q*(5*m)+X*(5*h);R=W>>>13,W&=8191,W+=Q*(5*f)+K*(5*p)+G*(5*d)+ne*(5*l)+U*(5*c),R+=W>>>13,W&=8191;let re=R+F*c+I*u+$*a+q*(5*g)+X*(5*m);R=re>>>13,re&=8191,re+=Q*(5*h)+K*(5*f)+G*(5*p)+ne*(5*d)+U*(5*l),R+=re>>>13,re&=8191;let L=R+F*l+I*c+$*u+q*a+X*(5*g);R=L>>>13,L&=8191,L+=Q*(5*m)+K*(5*h)+G*(5*f)+ne*(5*p)+U*(5*d),R+=L>>>13,L&=8191;let V=R+F*d+I*l+$*c+q*u+X*a;R=V>>>13,V&=8191,V+=Q*(5*g)+K*(5*m)+G*(5*h)+ne*(5*f)+U*(5*p),R+=V>>>13,V&=8191;let ie=R+F*p+I*d+$*l+q*c+X*u;R=ie>>>13,ie&=8191,ie+=Q*a+K*(5*g)+G*(5*m)+ne*(5*h)+U*(5*f),R+=ie>>>13,ie&=8191;let ue=R+F*f+I*p+$*d+q*l+X*c;R=ue>>>13,ue&=8191,ue+=Q*u+K*a+G*(5*g)+ne*(5*m)+U*(5*h),R+=ue>>>13,ue&=8191;let he=R+F*h+I*f+$*p+q*d+X*l;R=he>>>13,he&=8191,he+=Q*c+K*u+G*a+ne*(5*g)+U*(5*m),R+=he>>>13,he&=8191;let ye=R+F*m+I*h+$*f+q*p+X*d;R=ye>>>13,ye&=8191,ye+=Q*l+K*c+G*u+ne*a+U*(5*g),R+=ye>>>13,ye&=8191;let xe=R+F*g+I*m+$*h+q*f+X*p;R=xe>>>13,xe&=8191,xe+=Q*d+K*l+G*c+ne*u+U*a,R+=xe>>>13,xe&=8191,R=(R<<2)+R|0,R=R+j|0,j=R&8191,R=R>>>13,W+=R,i[0]=j,i[1]=W,i[2]=re,i[3]=L,i[4]=V,i[5]=ie,i[6]=ue,i[7]=he,i[8]=ye,i[9]=xe}finalize(){let{h:e,pad:r}=this,n=new Uint16Array(10),s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535}update(e){QS(this);let{buffer:r,blockLen:n}=this;e=Lg(e);let s=e.length;for(let i=0;i<s;){let o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){QS(this),_5(e,this),this.finished=!0;let{buffer:r,h:n}=this,{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}};function Wre(t){let e=(n,s)=>t(s).update(Lg(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}var E5=Wre(t=>new rA(t));var Gre=qg("expand 16-byte k"),Zre=qg("expand 32-byte k"),Xre=aa(Gre),Yre=aa(Zre);function ve(t,e){return t<<e|t>>>32-e}function nA(t){return t.byteOffset%4===0}var Ug=64,Qre=16,A5=2**32-1,S5=new Uint32Array;function ene(t,e,r,n,s,i,o,a){let u=s.length,c=new Uint8Array(Ug),l=aa(c),d=nA(s)&&nA(i),p=d?aa(s):S5,f=d?aa(i):S5;for(let h=0;h<u;o++){if(t(e,r,n,l,o,a),o>=A5)throw new Error("arx: counter overflow");let m=Math.min(Ug,u-h);if(d&&m===Ug){let g=h/4;if(h%4!==0)throw new Error("arx: invalid block position");for(let _=0,D;_<Qre;_++)D=g+_,f[D]=p[D]^l[_];h+=Ug;continue}for(let g=0,_;g<m;g++)_=h+g,i[_]=s[_]^c[g];h+=m}}function iA(t,e){let{allowShortKeys:r,extendNonceFn:n,counterLength:s,counterRight:i,rounds:o}=b5({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Ph(s),Ph(o),YS(i),YS(r),(a,u,c,l,d=0)=>{Md(a),Md(u),Md(c);let p=c.length;if(l||(l=new Uint8Array(p)),Md(l),Ph(d),d<0||d>=A5)throw new Error("arx: counter overflow");if(l.length<p)throw new Error(`arx: output (${l.length}) is shorter than data (${p})`);let f=[],h=a.length,m,g;if(h===32)m=a.slice(),f.push(m),g=Yre;else if(h===16&&r)m=new Uint8Array(32),m.set(a),m.set(a,16),g=Xre,f.push(m);else throw new Error(`arx: invalid 32-byte key, got length=${h}`);nA(u)||(u=u.slice(),f.push(u));let _=aa(m);if(n){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(g,_,aa(u.subarray(0,16)),_),u=u.subarray(16)}let D=16-s;if(D!==u.length)throw new Error(`arx: nonce must be ${D} or 16 bytes`);if(D!==12){let E=new Uint8Array(12);E.set(u,i?0:12-u.length),u=E,f.push(u)}let v=aa(u);for(ene(t,g,_,v,c,l,d,o);f.length>0;)f.pop().fill(0);return l}}function C5(t,e,r,n,s,i=20){let o=t[0],a=t[1],u=t[2],c=t[3],l=e[0],d=e[1],p=e[2],f=e[3],h=e[4],m=e[5],g=e[6],_=e[7],D=s,v=r[0],E=r[1],S=r[2],P=o,C=a,B=u,F=c,I=l,$=d,q=p,X=f,Q=h,K=m,G=g,ne=_,U=D,R=v,j=E,W=S;for(let L=0;L<i;L+=2)P=P+I|0,U=ve(U^P,16),Q=Q+U|0,I=ve(I^Q,12),P=P+I|0,U=ve(U^P,8),Q=Q+U|0,I=ve(I^Q,7),C=C+$|0,R=ve(R^C,16),K=K+R|0,$=ve($^K,12),C=C+$|0,R=ve(R^C,8),K=K+R|0,$=ve($^K,7),B=B+q|0,j=ve(j^B,16),G=G+j|0,q=ve(q^G,12),B=B+q|0,j=ve(j^B,8),G=G+j|0,q=ve(q^G,7),F=F+X|0,W=ve(W^F,16),ne=ne+W|0,X=ve(X^ne,12),F=F+X|0,W=ve(W^F,8),ne=ne+W|0,X=ve(X^ne,7),P=P+$|0,W=ve(W^P,16),G=G+W|0,$=ve($^G,12),P=P+$|0,W=ve(W^P,8),G=G+W|0,$=ve($^G,7),C=C+q|0,U=ve(U^C,16),ne=ne+U|0,q=ve(q^ne,12),C=C+q|0,U=ve(U^C,8),ne=ne+U|0,q=ve(q^ne,7),B=B+X|0,R=ve(R^B,16),Q=Q+R|0,X=ve(X^Q,12),B=B+X|0,R=ve(R^B,8),Q=Q+R|0,X=ve(X^Q,7),F=F+I|0,j=ve(j^F,16),K=K+j|0,I=ve(I^K,12),F=F+I|0,j=ve(j^F,8),K=K+j|0,I=ve(I^K,7);let re=0;n[re++]=o+P|0,n[re++]=a+C|0,n[re++]=u+B|0,n[re++]=c+F|0,n[re++]=l+I|0,n[re++]=d+$|0,n[re++]=p+q|0,n[re++]=f+X|0,n[re++]=h+Q|0,n[re++]=m+K|0,n[re++]=g+G|0,n[re++]=_+ne|0,n[re++]=D+U|0,n[re++]=v+R|0,n[re++]=E+j|0,n[re++]=S+W|0}function tne(t,e,r,n){let s=t[0],i=t[1],o=t[2],a=t[3],u=e[0],c=e[1],l=e[2],d=e[3],p=e[4],f=e[5],h=e[6],m=e[7],g=r[0],_=r[1],D=r[2],v=r[3];for(let S=0;S<20;S+=2)s=s+u|0,g=ve(g^s,16),p=p+g|0,u=ve(u^p,12),s=s+u|0,g=ve(g^s,8),p=p+g|0,u=ve(u^p,7),i=i+c|0,_=ve(_^i,16),f=f+_|0,c=ve(c^f,12),i=i+c|0,_=ve(_^i,8),f=f+_|0,c=ve(c^f,7),o=o+l|0,D=ve(D^o,16),h=h+D|0,l=ve(l^h,12),o=o+l|0,D=ve(D^o,8),h=h+D|0,l=ve(l^h,7),a=a+d|0,v=ve(v^a,16),m=m+v|0,d=ve(d^m,12),a=a+d|0,v=ve(v^a,8),m=m+v|0,d=ve(d^m,7),s=s+c|0,v=ve(v^s,16),h=h+v|0,c=ve(c^h,12),s=s+c|0,v=ve(v^s,8),h=h+v|0,c=ve(c^h,7),i=i+l|0,g=ve(g^i,16),m=m+g|0,l=ve(l^m,12),i=i+l|0,g=ve(g^i,8),m=m+g|0,l=ve(l^m,7),o=o+d|0,_=ve(_^o,16),p=p+_|0,d=ve(d^p,12),o=o+d|0,_=ve(_^o,8),p=p+_|0,d=ve(d^p,7),a=a+u|0,D=ve(D^a,16),f=f+D|0,u=ve(u^f,12),a=a+u|0,D=ve(D^a,8),f=f+D|0,u=ve(u^f,7);let E=0;n[E++]=s,n[E++]=i,n[E++]=o,n[E++]=a,n[E++]=g,n[E++]=_,n[E++]=D,n[E++]=v}var rne=iA(C5,{counterRight:!1,counterLength:4,allowShortKeys:!1}),P5=iA(C5,{counterRight:!1,counterLength:8,extendNonceFn:tne,allowShortKeys:!1});var nne=new Uint8Array(16),x5=(t,e)=>{t.update(e);let r=e.length%16;r&&t.update(nne.subarray(r))},ine=new Uint8Array(32);function D5(t,e,r,n,s){let i=t(e,r,ine),o=E5.create(i);s&&x5(o,s),x5(o,n);let a=new Uint8Array(16),u=v5(a);XS(u,0,BigInt(s?s.length:0),!0),XS(u,8,BigInt(n.length),!0),o.update(a);let c=o.digest();return i.fill(0),c}var O5=t=>(e,r,n)=>(zc(e,32),zc(r),{encrypt:(i,o)=>{let a=i.length,u=a+16;o?zc(o,u):o=new Uint8Array(u),t(e,r,i,o,1);let c=D5(t,e,r,o.subarray(0,-16),n);return o.set(c,a),o},decrypt:(i,o)=>{let a=i.length,u=a-16;if(a<16)throw new Error("encrypted data must be at least 16 bytes");o?zc(o,u):o=new Uint8Array(u);let c=i.subarray(0,-16),l=i.subarray(-16),d=D5(t,e,r,c,n);if(!w5(l,d))throw new Error("invalid tag");return t(e,r,c,o,1),o}}),v8e=ZS({blockSize:64,nonceLength:12,tagLength:16},O5(rne)),sne=ZS({blockSize:64,nonceLength:24,tagLength:16},O5(P5));var Jg={};Cr(Jg,{extractDidFragment:()=>zn,getServices:()=>ane,getVerificationMethodByKey:()=>une,getVerificationMethodTypes:()=>sA,getVerificationMethods:()=>Oh,getVerificationRelationshipsById:()=>oA,isDidService:()=>T5,isDidVerificationMethod:()=>Kg,isDwnDidService:()=>cne,keyBytesToMultibaseId:()=>Vg,multibaseIdToKeyBytes:()=>zg});var one=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};function zn(t){if(typeof t=="string"&&t.length!==0)return t.split("#").pop()}function ane({didDocument:t,id:e,type:r}){var n,s;return(s=(n=t?.service)===null||n===void 0?void 0:n.filter(i=>!(e&&i.id!==e||r&&i.type!==r)))!==null&&s!==void 0?s:[]}function une(t){return one(this,arguments,void 0,function*({didDocument:e,publicKeyJwk:r,publicKeyMultibase:n}){let s=Oh({didDocument:e});for(let i of s)if(r&&i.publicKeyJwk){if((yield He({jwk:r}))===(yield He({jwk:i.publicKeyJwk})))return i}else if(n&&i.publicKeyMultibase&&n===i.publicKeyMultibase)return i;return null})}function Oh({didDocument:t}){var e,r;if(!t)throw new TypeError("Required parameter missing: 'didDocument'");let n=[];return n.push(...(r=(e=t.verificationMethod)===null||e===void 0?void 0:e.filter(Kg))!==null&&r!==void 0?r:[]),Object.keys(qc).forEach(s=>{var i,o;n.push(...(o=(i=t[s])===null||i===void 0?void 0:i.filter(Kg))!==null&&o!==void 0?o:[])}),n}function sA({didDocument:t}){let r=Oh({didDocument:t}).map(n=>n.type);return[...new Set(r)]}function oA({didDocument:t,methodId:e}){let r=[];return Object.keys(qc).forEach(n=>{if(Array.isArray(t[n])){let s=t[n],i=zn(e);s.some(a=>{let u=zn(a)===i,c=Kg(a)&&zn(a.id)===i;return u||c})&&r.push(n)}}),r}function T5(t){return!t||typeof t!="object"||t===null?!1:"id"in t&&"type"in t&&"serviceEndpoint"in t}function cne(t){if(!T5(t)||t.type!=="DecentralizedWebNode"||!("enc"in t&&"sig"in t))return!1;let e=r=>typeof r=="string"||Array.isArray(r)&&r.every(n=>typeof n=="string");return e(t.enc)&&e(t.sig)}function Kg(t){return!(!t||typeof t!="object"||t===null||!("id"in t&&"type"in t&&"controller"in t)||typeof t.id!="string"||typeof t.type!="string"||typeof t.controller!="string")}function Vg({keyBytes:t,multicodecCode:e,multicodecName:r}){let n=yn.addPrefix({code:e,data:t,name:r}),s=ge.uint8Array(n).toBase58Btc();return ge.base58Btc(s).toMultibase()}function zg({multibaseKeyId:t}){try{let e=ge.multibase(t).toBase58Btc(),r=ge.base58Btc(e).toUint8Array(),{code:n,data:s,name:i}=yn.removePrefix({prefixedData:r});return{keyBytes:s,multicodecCode:n,multicodecName:i}}catch{throw new Se(be.InvalidDid,`Invalid multibase identifier: ${t}`)}}var Th=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Jn=class t{constructor({uri:e,document:r,metadata:n,keyManager:s}){this.uri=e,this.document=r,this.metadata=n,this.keyManager=s}export(){return Th(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let e={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){let r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);let s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.exportKey({keyUri:s});r.push(Object.assign({},i))}e.privateKeys=r}return e})}getSigner(e){return Th(this,void 0,void 0,function*(){var r;let n=(r=this.document.verificationMethod)===null||r===void 0?void 0:r.find(u=>{var c,l;return zn(u.id)===((c=zn(e?.methodId))!==null&&c!==void 0?c:zn((l=this.document.assertionMethod)===null||l===void 0?void 0:l[0]))});if(!(n&&n.publicKeyJwk))throw new Se(be.InternalError,"A verification method intended for signing could not be determined from the DID Document");let s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.getPublicKey({keyUri:s}),o=this.keyManager;return{algorithm:Mg.getJoseSignatureAlgorithmFromPublicKey(i),keyId:n.id,sign(u){return Th(this,arguments,void 0,function*({data:c}){return yield o.sign({data:c,keyUri:s})})},verify(u){return Th(this,arguments,void 0,function*({data:c,signature:l}){return yield o.verify({data:c,key:i,signature:l})})}}})}static import(e){return Th(this,arguments,void 0,function*({portableDid:r,keyManager:n=new mn}){var s;let i=Oh({didDocument:r.document});if(i.length===0)throw new Se(be.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let a of(s=r.privateKeys)!==null&&s!==void 0?s:[])yield n.importKey({key:a});for(let a of i){if(!a.publicKeyJwk)throw new Error(`Verification method '${a.id}' does not contain a public key in JWK format`);let u=yield n.getKeyUri({key:a.publicKeyJwk});yield n.getPublicKey({keyUri:u})}return new t({uri:r.uri,document:r.document,metadata:r.metadata,keyManager:n})})}};var aA="0123456789abcdef",I5=[],B5=[];for(let t=0;t<256;t++)I5[t]=aA[t>>4&15]+aA[t&15],t<16&&(t<10?B5[48+t]=t:B5[87+t]=t);var uA=t=>{let e=t.length,r="",n=0;for(;n<e;)r+=I5[t[n++]];return r};var F5=(t,e=0)=>{let r=t.length||0;if(!e){let o=r;for(;o--;)e+=t[o].length}let n=new Uint8Array(e),s=e,i=r;for(;i--;)s-=t[i].length,n.set(t[i],s);return n};var k5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lne=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Bh=0;Bh<k5.length;Bh++)lne[k5.charCodeAt(Bh)]=Bh;var Bh;var dne=new TextDecoder,cA=(t,e)=>e?new TextDecoder(e).decode(t):dne.decode(t),fne=new TextEncoder,Fi=t=>fne.encode(t);var R5=typeof window<"u"?window:self,$5=R5.crypto||R5.msCrypto||{},yBe=$5.subtle||$5.webkitSubtle;function Ld(t){let e=t<0?1:0;return t=Math.abs(Number(t||1)),Math.floor(Math.log10(t))+1+e}function Hg(t){return ArrayBuffer.isView(t)?"arraybufferview":Array.isArray(t)?"array":t instanceof Number?"number":t instanceof Boolean?"boolean":t instanceof Set?"set":t instanceof Map?"map":t instanceof String?"string":t instanceof ArrayBuffer?"arraybuffer":typeof t}function It(t,e,r){let n=[],s=null;return It._encode(n,t),s=F5(n),It.bytes=s.length,ArrayBuffer.isView(e)?(e.set(s,r),e):s}It.bytes=-1;It._floatConversionDetected=!1;It._encode=function(t,e){if(e!=null)switch(Hg(e)){case"object":It.dict(t,e);break;case"map":It.dictMap(t,e);break;case"array":It.list(t,e);break;case"set":It.listSet(t,e);break;case"string":It.string(t,e);break;case"number":It.number(t,e);break;case"boolean":It.number(t,e);break;case"arraybufferview":It.buffer(t,new Uint8Array(e.buffer,e.byteOffset,e.byteLength));break;case"arraybuffer":It.buffer(t,new Uint8Array(e));break}};var Wg=new Uint8Array([101]),j5=new Uint8Array([100]),N5=new Uint8Array([108]);It.buffer=function(t,e){t.push(Fi(e.length+":"),e)};It.string=function(t,e){t.push(Fi(Fi(e).byteLength+":"+e))};It.number=function(t,e){if(Number.isInteger(e))return t.push(Fi("i"+BigInt(e)+"e"));let r=2147483648,n=e/r<<0,s=e%r<<0,i=n*r+s;t.push(Fi("i"+i+"e")),i!==e&&!It._floatConversionDetected&&(It._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+e+'":','Bencoding only defines support for integers, value was converted to "'+i+'"'),console.trace())};It.dict=function(t,e){t.push(j5);let r=0,n,s=Object.keys(e).sort(),i=s.length;for(;r<i;r++)n=s[r],e[n]!=null&&(It.string(t,n),It._encode(t,e[n]));t.push(Wg)};It.dictMap=function(t,e){t.push(j5);let r=Array.from(e.keys()).sort();for(let n of r)e.get(n)!=null&&(ArrayBuffer.isView(n)?It._encode(t,n):It.string(t,String(n)),It._encode(t,e.get(n)));t.push(Wg)};It.list=function(t,e){let r=0,n=e.length;for(t.push(N5);r<n;r++)e[r]!=null&&It._encode(t,e[r]);t.push(Wg)};It.listSet=function(t,e){t.push(N5);for(let r of e)r!=null&&It._encode(t,r);t.push(Wg)};var M5=It;var pne=105,hne=58,yne=100,mne=108,lA=101;function q5(t,e,r){let n=0,s=1;for(let i=e;i<r;i++){let o=t[i];if(o<58&&o>=48){n=n*10+(o-48);continue}if(!(i===e&&o===43)){if(i===e&&o===45){s=-1;continue}if(o===46)break;throw new Error("not a number: buffer["+i+"] = "+o)}}return n*s}function Ne(t,e,r,n){return t==null||t.length===0?null:(typeof e!="number"&&n==null&&(n=e,e=void 0),typeof r!="number"&&n==null&&(n=r,r=void 0),Ne.position=0,Ne.encoding=n||null,Ne.data=ArrayBuffer.isView(t)?new Uint8Array(t.slice(e,r)):Fi(t),Ne.bytes=Ne.data.length,Ne.next())}Ne.bytes=0;Ne.position=0;Ne.data=null;Ne.encoding=null;Ne.next=function(){switch(Ne.data[Ne.position]){case yne:return Ne.dictionary();case mne:return Ne.list();case pne:return Ne.integer();default:return Ne.buffer()}};Ne.find=function(t){let e=Ne.position,r=Ne.data.length,n=Ne.data;for(;e<r;){if(n[e]===t)return e;e++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(t)+'" [0x'+t.toString(16)+"]")};Ne.dictionary=function(){Ne.position++;let t={};for(;Ne.data[Ne.position]!==lA;){let e=Ne.buffer(),r=cA(e);r.includes("\uFFFD")&&(r=uA(e)),t[r]=Ne.next()}return Ne.position++,t};Ne.list=function(){Ne.position++;let t=[];for(;Ne.data[Ne.position]!==lA;)t.push(Ne.next());return Ne.position++,t};Ne.integer=function(){let t=Ne.find(lA),e=q5(Ne.data,Ne.position+1,t);return Ne.position+=t+1-Ne.position,e};Ne.buffer=function(){let t=Ne.find(hne),e=q5(Ne.data,Ne.position,t),r=++t+e;return Ne.position=r,Ne.encoding?cA(Ne.data.slice(t,r)):Ne.data.slice(t,r)};var L5=Ne;function gne(t){let e=2;for(let r of t)e+=Gg(r);return e}function vne(t){let e=2;for(let[r,n]of t){let s=Fi(r).byteLength;e+=Ld(s)+1+s,e+=Gg(n)}return e}function bne(t){let e=2,r=Object.keys(t);for(let n=0;n<r.length;n++){let s=Fi(r[n]).byteLength;e+=Ld(s)+1+s,e+=Gg(t[r[n]])}return e}function wne(t){let e=Fi(t).byteLength;return Ld(e)+1+e}function _ne(t){let e=t.byteLength-t.byteOffset;return Ld(e)+1+e}function Gg(t){if(t==null)return 0;let r=Hg(t);switch(r){case"arraybufferview":return _ne(t);case"string":return wne(t);case"array":case"set":return gne(t);case"number":return 1+Ld(Math.floor(t))+1;case"bigint":return 1+t.toString().length+1;case"object":return bne(t);case"map":return vne(t);default:throw new TypeError(`Unsupported value of type "${r}"`)}}var dA=Gg;var Ene=dA,fA={encode:M5,decode:L5,byteLength:dA,encodingLength:Ene};var Sne=/^(\d{1,3}\.){3,3}\d{1,3}$/;var Ane=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;var fs={name:"v4",size:4,isFormat:t=>Sne.test(t),encode(t,e,r){r=~~r,e=e||new Uint8Array(r+4);let n=t.length,s=0;for(let i=0;i<n;){let o=t.charCodeAt(i++);o===46?(e[r++]=s,s=0):s=s*10+(o-48)}return e[r]=s,e},decode(t,e){return e=~~e,`${t[e++]}.${t[e++]}.${t[e++]}.${t[e]}`}},ua={name:"v6",size:16,isFormat:t=>t.length>0&&Ane.test(t),encode(t,e,r){r=~~r;let n=r+16,s=-1,i=0,o=0,a=!0,u=!1;e=e||new Uint8Array(r+16);for(let c=0;c<t.length;c++){let l=t.charCodeAt(c);l===58?(a?s!==-1?(r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2):r<n&&(s=r):(u===!0?(r<n&&(e[r]=o),r++):(r<n&&(e[r]=i>>8),r<n-1&&(e[r+1]=i&255),r+=2),i=0,o=0),a=!0,u=!1):l===46?(r<n&&(e[r]=o),r++,o=0,i=0,a=!1,u=!0):(a=!1,l>=97?l-=87:l>=65?l-=55:(l-=48,o=o*10+l),i=(i<<4)+l)}if(a===!1)u===!0?(r<n&&(e[r]=o),r++):(r<n&&(e[r]=i>>8),r<n-1&&(e[r+1]=i&255),r+=2);else if(s===0)r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2;else if(s!==-1){r+=2;for(let c=Math.min(r-1,n-1);c>=s+2;c--)e[c]=e[c-2];e[s]=0,e[s+1]=0,s=r}if(s!==r&&s!==-1)for(r>n-2&&(r=n-2);n>s;)e[--n]=r<n&&r>s?e[--r]:0;else for(;r<n;)e[r++]=0;return e},decode(t,e){e=~~e;let r="";for(let n=0;n<16;n+=2)n!==0&&(r+=":"),r+=(t[e+n]<<8|t[e+n+1]).toString(16);return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};function U5(t){if(fs.isFormat(t))return fs.size;if(ua.isFormat(t))return ua.size;throw Error(`Invalid ip address: ${t}`)}function K5(t){return U5(t)===fs.size?1:2}function V5(t,e,r){r=~~r;let n=U5(t);return typeof e=="function"&&(e=e(r+n)),n===fs.size?fs.encode(t,e,r):ua.encode(t,e,r)}function z5(t,e,r){if(e=~~e,r=r||t.length-e,r===fs.size)return fs.decode(t,e,r);if(r===ua.size)return ua.decode(t,e,r);throw Error(`Invalid buffer size needs to be ${fs.size} for v4 or ${ua.size} for v6.`)}function Ih(t){switch(t){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+t}function Ud(t){switch(t.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return t.toUpperCase().startsWith("UNKNOWN_")?parseInt(t.slice(8)):0}function J5(t){switch(t){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+t}function H5(t){switch(t){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+t}function pA(t){switch(t){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+t}function hA(t){switch(t.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}function W5(t){switch(t){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return t<0?null:`OPTION_${t}`}function yA(t){if(typeof t=="number")return t;if(!t)return-1;switch(t.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}let e=t.match(/_(\d+)$/);return e?parseInt(e[1],10):-1}function mA(t){let e=0,r=t.length;for(let n=0;n<r;n+=1){let s=t.charCodeAt(n);if(s<=127)e+=1;else if(s<=2047)e+=2;else if((s&63488)!==55296)e+=3;else{let i=n+1;i===r||s>=56320||(t.charCodeAt(i)&64512)!==56320?e+=3:(n=i,e+=4)}}return e}function Kd(t,e,r){let n=t.length;r==null&&(r=0),e===void 0&&(e=new Uint8Array(mA(t)+r));let s=r;for(let i=0;i<n;i+=1){let o=t.charCodeAt(i);if(o<=127)e[s++]=o;else if(o<=2047)e[s++]=192|(o&1984)>>6,e[s++]=128|o&63;else if((o&63488)!==55296)e[s++]=224|(o&61440)>>12,e[s++]=128|(o&4032)>>6,e[s++]=128|o&63;else{let a=i+1;if(a===n||o>=56320)e[s++]=239,e[s++]=191,e[s++]=189;else{let u=t.charCodeAt(a);(u&64512)!==56320?(e[s++]=239,e[s++]=191,e[s++]=189):(i=a,o=65536|(o&1023)<<10|u&1023,e[s++]=240|(o&1835008)>>18,e[s++]=128|(o&258048)>>12,e[s++]=128|(o&4032)>>6,e[s++]=128|o&63)}}}return Kd.bytes=s-r,e}Kd.bytes=0;function Vd(t,e,r){let n="";e==null&&(e=0),r==null&&(r=t.length);for(let s=e;s<r;){let i=t[s++],o;if(i<=128)o=i;else if(i>191&&i<224)o=(i&31)<<6|t[s++]&63;else if(i>239&&i<365){o=((i&7)<<18|(t[s++]&63)<<12|(t[s++]&63)<<6|t[s++]&63)-65536;let a=55296|o>>10&1023;n+=String.fromCharCode(a),o=56320|o&1023}else o=(i&15)<<12|(t[s++]&63)<<6|t[s++]&63;n+=String.fromCharCode(o)}return Vd.bytes=r-e,n}Vd.bytes=0;var lu=t=>t instanceof Uint8Array;function ca(t){return typeof t=="string"?mA(t):t.byteLength}function Zg(t){return t instanceof Uint8Array?t:Array.isArray(t)?new Uint8Array(t):Kd(t)}function Xg(t,e,r){if(typeof e!="string")throw new Error("unknown input type");return Kd(e,t,r),Kd.bytes}var Fh={},G5=new Array(255);for(let t=0;t<=15;t+=1){let e=t.toString(16),r=e.toUpperCase();for(let n=0;n<=15;n+=1){let s=n.toString(16),i=s.toUpperCase(),o=t<<4|n,a=`${e}${s}`;G5[o]=a,Fh[a]=o,Fh[`${r}${s}`]=o,Fh[`${e}${i}`]=o,Fh[`${r}${i}`]=o}}function Z5(t,e,r){let n="";for(let s=e;s<r;){let i=t[s++];n+=G5[i]}return n}function gA(t){return t.length>>>1}function X5(t,e,r,n){let s=0;for(;r<n;){let i=e.substr(s,2),o=Fh[i];if(o===void 0)return;t[r++]=o,s+=2}return t}var Ine=Math.pow(2,24),Fne=Math.pow(2,16),kne=Math.pow(2,8),no=(t,e)=>t[e]*Ine+t[e+1]*Fne+t[e+2]*kne+t[e+3],Xe=(t,e)=>t[e]<<8|t[e+1],io=(t,e,r)=>(e=+e,t[r+3]=e,e=e>>>8,t[r+2]=e,e=e>>>8,t[r+1]=e,e=e>>>8,t[r]=e,r+4),ke=(t,e,r)=>(t[r]=e>>8,t[r+1]=e&255,r+2);function Hn(t,e,r,n,s){return r<0&&(n-=r,r=0),n<0&&(n=0),s<0?new Uint8Array(0):r>=e.length||n>=s?0:Rne(t,e,r,n,s)}function Rne(t,e,r,n,s){s-n>e.length-r&&(s=n+e.length-r);let i=s-n,o=t.length-n;return i>o&&(i=o),(n!==0||s<t.length)&&(t=new Uint8Array(t.buffer,t.byteOffset+n,i)),e.set(t,r),i}var jne=0,Y5=32768,bA=32768,Nne=~bA,ek=32768,Mne=~ek;function Jt({bytes:t=0,encode:e,decode:r,encodingLength:n}){return e.bytes=t,r.bytes=t,{encode:e,decode:r,encodingLength:n||(()=>t)}}var _e=Jt({encode(t,e,r){e||(e=new Uint8Array(_e.encodingLength(t))),r||(r=0);let n=r,s=t.replace(/^\.|\.$/gm,"");if(s.length){let i=s.split(".");for(let o=0;o<i.length;o++){let a=Xg(e,i[o],r+1);e[r]=a,r+=a+1}}return e[r++]=0,_e.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=[],n=e,s=0,i=0,o=!1;for(;;){if(e>=t.length)throw new Error("Cannot decode name (buffer overflow)");let a=t[e++];if(i+=o?0:1,a===0)break;if(a&192)if((a&192)===192){if(e+1>t.length)throw new Error("Cannot decode name (buffer overflow)");let u=Xe(t,e-1)-49152;if(u>=n)throw new Error("Cannot decode name (bad pointer)");e=u,n=u,i+=o?0:1,o=!0}else throw new Error("Cannot decode name (bad label)");else{if(e+a>t.length)throw new Error("Cannot decode name (buffer overflow)");if(s+=a+1,s>254)throw new Error("Cannot decode name (name too long)");r.push(Vd(t,e,e+a)),e+=a,i+=o?0:a}}return _e.decode.bytes=i,r.length===0?".":r.join(".")},encodingLength(t){return t==="."||t===".."?1:ca(t.replace(/^\.|\.$/gm,""))+2}}),$r=Jt({encode(t,e,r){e||(e=new Uint8Array($r.encodingLength(t))),r||(r=0);let n=Xg(e,t,r+1);return e[r]=n,$r.encode.bytes=n+1,e},decode(t,e){e||(e=0);let r=t[e],n=Vd(t,e+1,e+1+r);return $r.decode.bytes=r+1,n},encodingLength(t){return ca(t)+1}}),zd=Jt({bytes:12,encode(t,e,r){e||(e=new Uint8Array(zd.encodingLength(t))),r||(r=0);let n=(t.flags||0)&32767,s=t.type==="response"?Y5:jne;return ke(e,t.id||0,r),ke(e,n|s,r+2),ke(e,t.questions.length,r+4),ke(e,t.answers.length,r+6),ke(e,t.authorities.length,r+8),ke(e,t.additionals.length,r+10),e},decode(t,e){if(e||(e=0),t.length<12)throw new Error("Header must be 12 bytes");let r=Xe(t,e+2);return{id:Xe(t,e),type:r&Y5?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:H5(r>>11&15),flag_aa:(r>>10&1)===1,flag_tc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:J5(r&15),questions:new Array(Xe(t,e+4)),answers:new Array(Xe(t,e+6)),authorities:new Array(Xe(t,e+8)),additionals:new Array(Xe(t,e+10))}},encodingLength(){return 12}}),Qg=Jt({encode(t,e,r){e||(e=new Uint8Array(Qg.encodingLength(t))),r||(r=0);let n=t.length;return ke(e,n,r),Hn(t,e,r+2,0,n),Qg.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=Xe(t,e),n=t.slice(e+2,e+2+r);return Qg.decode.bytes=r+2,n},encodingLength(t){return t.length+2}}),ev=Jt({encode(t,e,r){return e||(e=new Uint8Array(ev.encodingLength(t))),r||(r=0),_e.encode(t,e,r+2),ke(e,_e.encode.bytes,r),ev.encode.bytes=_e.encode.bytes+2,e},decode(t,e){e||(e=0);let r=Xe(t,e),n=_e.decode(t,e+2);return ev.decode.bytes=r+2,n},encodingLength(t){return _e.encodingLength(t)+2}}),tv=Jt({encode(t,e,r){e||(e=new Uint8Array(tv.encodingLength(t))),r||(r=0);let n=r;return r+=2,_e.encode(t.mname,e,r),r+=_e.encode.bytes,_e.encode(t.rname,e,r),r+=_e.encode.bytes,io(e,t.serial||0,r),r+=4,io(e,t.refresh||0,r),r+=4,io(e,t.retry||0,r),r+=4,io(e,t.expire||0,r),r+=4,io(e,t.minimum||0,r),r+=4,ke(e,r-n-2,n),tv.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mname=_e.decode(t,e),e+=_e.decode.bytes,n.rname=_e.decode(t,e),e+=_e.decode.bytes,n.serial=no(t,e),e+=4,n.refresh=no(t,e),e+=4,n.retry=no(t,e),e+=4,n.expire=no(t,e),e+=4,n.minimum=no(t,e),e+=4,tv.decode.bytes=e-r,n},encodingLength(t){return 22+_e.encodingLength(t.mname)+_e.encodingLength(t.rname)}}),rv=Jt({encode(t,e,r){Array.isArray(t)||(t=[t]);for(let s=0;s<t.length;s++)if(typeof t[s]=="string"&&(t[s]=Zg(t[s])),!lu(t[s]))throw new Error("Must be a Buffer");e||(e=new Uint8Array(rv.encodingLength(t))),r||(r=0);let n=r;return r+=2,t.forEach(function(s){e[r++]=s.length,Hn(s,e,r,0,s.length),r+=s.length}),ke(e,r-n-2,n),rv.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=Xe(t,e);e+=2;let s=[];for(;n>0;){let i=t[e++];if(--n,n<i)throw new Error("Buffer overflow");s.push(t.slice(e,e+i)),e+=i,n-=i}return rv.decode.bytes=e-r,s},encodingLength(t){Array.isArray(t)||(t=[t]);let e=2;return t.forEach(function(r){typeof r=="string"?e+=ca(r)+1:e+=r.length+1}),e}}),nv=Jt({encode(t,e,r){e||(e=new Uint8Array(nv.encodingLength(t))),r||(r=0),typeof t=="string"&&(t=Zg(t)),t||(t=new Uint8Array(0));let n=r;r+=2;let s=t.length;return Hn(t,e,r,0,s),r+=s,ke(e,r-n-2,n),nv.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=Xe(t,e);e+=2;let s=t.slice(e,e+n);return e+=n,nv.decode.bytes=e-r,s},encodingLength(t){return t?(lu(t)?t.length:ca(t))+2:2}}),iv=Jt({encode(t,e,r){e||(e=new Uint8Array(iv.encodingLength(t))),r||(r=0);let n=r;return r+=2,$r.encode(t.cpu,e,r),r+=$r.encode.bytes,$r.encode(t.os,e,r),r+=$r.encode.bytes,ke(e,r-n-2,n),iv.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.cpu=$r.decode(t,e),e+=$r.decode.bytes,n.os=$r.decode(t,e),e+=$r.decode.bytes,iv.decode.bytes=e-r,n},encodingLength(t){return $r.encodingLength(t.cpu)+$r.encodingLength(t.os)+2}}),Wd=Jt({encode(t,e,r){return e||(e=new Uint8Array(Wd.encodingLength(t))),r||(r=0),_e.encode(t,e,r+2),ke(e,_e.encode.bytes,r),Wd.encode.bytes=_e.encode.bytes+2,e},decode(t,e){e||(e=0);let r=_e.decode(t,e+2);return Wd.decode.bytes=_e.decode.bytes+2,r},encodingLength(t){return _e.encodingLength(t)+2}}),sv=Jt({encode(t,e,r){e||(e=new Uint8Array(sv.encodingLength(t))),r||(r=0),ke(e,t.priority||0,r+2),ke(e,t.weight||0,r+4),ke(e,t.port||0,r+6),_e.encode(t.target,e,r+8);let n=_e.encode.bytes+6;return ke(e,n,r),sv.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=Xe(t,e),n={};return n.priority=Xe(t,e+2),n.weight=Xe(t,e+4),n.port=Xe(t,e+6),n.target=_e.decode(t,e+8),sv.decode.bytes=r+2,n},encodingLength(t){return 8+_e.encodingLength(t.target)}}),du=Jt({encode(t,e,r){let n=du.encodingLength(t);return e||(e=new Uint8Array(du.encodingLength(t))),r||(r=0),t.issuerCritical&&(t.flags=du.ISSUER_CRITICAL),ke(e,n-2,r),r+=2,e[r]=t.flags||0,r+=1,$r.encode(t.tag,e,r),r+=$r.encode.bytes,Xg(e,t.value,r),r+=ca(t.value),du.encode.bytes=n,e},decode(t,e){e||(e=0);let r=Xe(t,e);e+=2;let n=e,s={};return s.flags=t[e],e+=1,s.tag=$r.decode(t,e),e+=$r.decode.bytes,s.value=Vd(t,e,n+r),s.issuerCritical=!!(s.flags&du.ISSUER_CRITICAL),du.decode.bytes=r+2,s},encodingLength(t){return $r.encodingLength(t.tag)+$r.encodingLength(t.value)+2}});du.ISSUER_CRITICAL=128;var ov=Jt({encode(t,e,r){e||(e=new Uint8Array(ov.encodingLength(t))),r||(r=0);let n=r;return r+=2,ke(e,t.preference||0,r),r+=2,_e.encode(t.exchange,e,r),r+=_e.encode.bytes,ke(e,r-n-2,n),ov.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.preference=Xe(t,e),e+=2,n.exchange=_e.decode(t,e),e+=_e.decode.bytes,ov.decode.bytes=e-r,n},encodingLength(t){return 4+_e.encodingLength(t.exchange)}}),tk=Jt({encode(t,e,r){return e||(e=new Uint8Array(tk.encodingLength(t))),r||(r=0),ke(e,4,r),r+=2,fs.encode(t,e,r),e},decode(t,e){return e||(e=0),e+=2,fs.decode(t,e)},bytes:6}),av=Jt({encode(t,e,r){return e||(e=new Uint8Array(av.encodingLength(t))),r||(r=0),ke(e,16,r),r+=2,ua.encode(t,e,r),av.encode.bytes=18,e},decode(t,e){e||(e=0),e+=2;let r=ua.decode(t,e);return av.decode.bytes=18,r},bytes:18}),Q5=t=>new Uint8Array(t),la=Jt({encode(t,e,r){e||(e=new Uint8Array(la.encodingLength(t))),r||(r=0);let n=r,s=yA(t.code);if(ke(e,s,r),r+=2,t.data)ke(e,t.data.length,r),r+=2,Hn(t.data,e,r),r+=t.data.length;else switch(s){case 8:{let i=t.sourcePrefixLength||0,o=t.family||K5(t.ip,Q5),a=V5(t.ip,Q5),u=Math.ceil(i/8);ke(e,u+4,r),r+=2,ke(e,o,r),r+=2,e[r++]=i,e[r++]=t.scopePrefixLength||0,Hn(a,e,r,0,u),r+=u}break;case 11:t.timeout?(ke(e,2,r),r+=2,ke(e,t.timeout,r),r+=2):(ke(e,0,r),r+=2);break;case 12:{let i=t.length||0;ke(e,i,r),r+=2,e.fill(0,r,r+i),r+=i}break;case 14:{let i=t.tags.length*2;ke(e,i,r),r+=2;for(let o of t.tags)ke(e,o,r),r+=2}break;default:throw new Error(`Unknown roption code: ${t.code}`)}return la.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={};r.code=Xe(t,e),r.type=W5(r.code),e+=2;let n=Xe(t,e);switch(e+=2,r.data=t.slice(e,e+n),r.code){case 8:r.family=Xe(t,e),e+=2,r.sourcePrefixLength=t[e++],r.scopePrefixLength=t[e++];{let s=new Uint8Array(r.family===1?4:16);Hn(t,s,0,e,e+n-4),r.ip=z5(s)}break;case 11:n>0&&(r.timeout=Xe(t,e),e+=2);break;case 14:r.tags=[];for(let s=0;s<n;s+=2)r.tags.push(Xe(t,e)),e+=2}return la.decode.bytes=n+4,r},encodingLength(t){if(t.data)return t.data.length+4;switch(yA(t.code)){case 8:{let r=t.sourcePrefixLength||0;return Math.ceil(r/8)+8}case 11:return typeof t.timeout=="number"?6:4;case 12:return t.length+4;case 14:return 4+t.tags.length*2}throw new Error(`Unknown roption code: ${t.code}`)}}),fu=Jt({encode(t,e,r){e||(e=new Uint8Array(fu.encodingLength(t))),r||(r=0);let n=r,s=Hd(t,la);return ke(e,s,r),r=Mh(t,la,e,r+2),fu.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=[],s=Xe(t,e);e+=2;let i=0;for(;s>0;)n[i++]=la.decode(t,e),e+=la.decode.bytes,s-=la.decode.bytes;return fu.decode.bytes=e-r,n},encodingLength(t){return 2+Hd(t||[],la)}}),so=Jt({encode(t,e,r){e||(e=new Uint8Array(so.encodingLength(t))),r||(r=0);let n=r,s=t.key;if(!lu(s))throw new Error("Key must be a Buffer");return r+=2,ke(e,t.flags,r),r+=2,e[r]=so.PROTOCOL_DNSSEC,r+=1,e[r]=t.algorithm,r+=1,Hn(s,e,r,0,s.length),r+=s.length,so.encode.bytes=r-n,ke(e,so.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=Xe(t,e);if(e+=2,n.flags=Xe(t,e),e+=2,t[e]!==so.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return e+=1,n.algorithm=t[e],e+=1,n.key=t.slice(e,r+s+2),e+=n.key.length,so.decode.bytes=e-r,n},encodingLength(t){return 6+ca(t.key)}});so.PROTOCOL_DNSSEC=3;so.ZONE_KEY=128;so.SECURE_ENTRYPOINT=32768;var kh=Jt({encode(t,e,r){e||(e=new Uint8Array(kh.encodingLength(t))),r||(r=0);let n=r,s=t.signature;if(!lu(s))throw new Error("Signature must be a Buffer");return r+=2,ke(e,Ud(t.typeCovered),r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.labels,r+=1,io(e,t.originalTTL,r),r+=4,io(e,t.expiration,r),r+=4,io(e,t.inception,r),r+=4,ke(e,t.keyTag,r),r+=2,_e.encode(t.signersName,e,r),r+=_e.encode.bytes,Hn(s,e,r,0,s.length),r+=s.length,kh.encode.bytes=r-n,ke(e,kh.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=Xe(t,e);return e+=2,n.typeCovered=Ih(Xe(t,e)),e+=2,n.algorithm=t[e],e+=1,n.labels=t[e],e+=1,n.originalTTL=no(t,e),e+=4,n.expiration=no(t,e),e+=4,n.inception=no(t,e),e+=4,n.keyTag=Xe(t,e),e+=2,n.signersName=_e.decode(t,e),e+=_e.decode.bytes,n.signature=t.slice(e,r+s+2),e+=n.signature.length,kh.decode.bytes=e-r,n},encodingLength(t){return 20+_e.encodingLength(t.signersName)+ca(t.signature)}}),Rh=Jt({encode(t,e,r){e||(e=new Uint8Array(Rh.encodingLength(t))),r||(r=0);let n=r;return r+=2,_e.encode(t.mbox||".",e,r),r+=_e.encode.bytes,_e.encode(t.txt||".",e,r),r+=_e.encode.bytes,Rh.encode.bytes=r-n,ke(e,Rh.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mbox=_e.decode(t,e)||".",e+=_e.decode.bytes,n.txt=_e.decode(t,e)||".",e+=_e.decode.bytes,Rh.decode.bytes=e-r,n},encodingLength(t){return 2+_e.encodingLength(t.mbox||".")+_e.encodingLength(t.txt||".")}}),ui=Jt({encode(t,e,r){e||(e=new Uint8Array(ui.encodingLength(t))),r||(r=0);let n=r,s=[];for(let i=0;i<t.length;i++){let o=Ud(t[i]);s[o>>8]===void 0&&(s[o>>8]=[]),s[o>>8][o>>3&31]|=1<<7-(o&7)}for(let i=0;i<s.length;i++)if(s[i]!==void 0){let o=Zg(s[i]);e[r]=i,r+=1,e[r]=o.length,r+=1,Hn(o,e,r,0,o.length),r+=o.length}return ui.encode.bytes=r-n,e},decode(t,e,r){e||(e=0);let n=e,s=[];for(;e-n<r;){let i=t[e];e+=1;let o=t[e];e+=1;for(let a=0;a<o;a++){let u=t[e+a];for(let c=0;c<8;c++)if(u&1<<7-c){let l=Ih(i<<8|a<<3|c);s.push(l)}}e+=o}return ui.decode.bytes=e-n,s},encodingLength(t){let e=[];for(let n=0;n<t.length;n++){let s=Ud(t[n]);e[s>>8]=Math.max(e[s>>8]||0,s&255)}let r=0;for(let n=0;n<e.length;n++)e[n]!==void 0&&(r+=2+Math.ceil((e[n]+1)/8));return r}}),$h=Jt({encode(t,e,r){e||(e=new Uint8Array($h.encodingLength(t))),r||(r=0);let n=r;return r+=2,_e.encode(t.nextDomain,e,r),r+=_e.encode.bytes,ui.encode(t.rrtypes,e,r),r+=ui.encode.bytes,$h.encode.bytes=r-n,ke(e,$h.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=Xe(t,e);return e+=2,n.nextDomain=_e.decode(t,e),e+=_e.decode.bytes,n.rrtypes=ui.decode(t,e,s-(e-r)),e+=ui.decode.bytes,$h.decode.bytes=e-r,n},encodingLength(t){return 2+_e.encodingLength(t.nextDomain)+ui.encodingLength(t.rrtypes)}}),jh=Jt({encode(t,e,r){e||(e=new Uint8Array(jh.encodingLength(t))),r||(r=0);let n=r,s=t.salt;if(!lu(s))throw new Error("salt must be a Buffer");let i=t.nextDomain;if(!lu(i))throw new Error("nextDomain must be a Buffer");return r+=2,e[r]=t.algorithm,r+=1,e[r]=t.flags,r+=1,ke(e,t.iterations,r),r+=2,e[r]=s.length,r+=1,Hn(s,e,r,0,s.length),r+=s.length,e[r]=i.length,r+=1,Hn(i,e,r,0,i.length),r+=i.length,ui.encode(t.rrtypes,e,r),r+=ui.encode.bytes,jh.encode.bytes=r-n,ke(e,jh.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=Xe(t,e);e+=2,n.algorithm=t[e],e+=1,n.flags=t[e],e+=1,n.iterations=Xe(t,e),e+=2;let i=t[e];e+=1,n.salt=t.slice(e,e+i),e+=i;let o=t[e];return e+=1,n.nextDomain=t.slice(e,e+o),e+=o,n.rrtypes=ui.decode(t,e,s-(e-r)),e+=ui.decode.bytes,jh.decode.bytes=e-r,n},encodingLength(t){return 8+t.salt.length+t.nextDomain.length+ui.encodingLength(t.rrtypes)}}),Nh=Jt({encode(t,e,r){e||(e=new Uint8Array(Nh.encodingLength(t))),r||(r=0);let n=r,s=t.digest;if(!lu(s))throw new Error("Digest must be a Buffer");return r+=2,ke(e,t.keyTag,r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.digestType,r+=1,Hn(s,e,r,0,s.length),r+=s.length,Nh.encode.bytes=r-n,ke(e,Nh.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=Xe(t,e);return e+=2,n.keyTag=Xe(t,e),e+=2,n.algorithm=t[e],e+=1,n.digestType=t[e],e+=1,n.digest=t.slice(e,r+s+2),e+=n.digest.length,Nh.decode.bytes=e-r,n},encodingLength(t){return 6+ca(t.digest)}}),Jd=Jt({encode(t,e,r){e||(e=new Uint8Array(Jd.encodingLength(t))),r||(r=0);let n=r;r+=2,e[r]=t.algorithm,r+=1,e[r]=t.hash,r+=1;let s=gA(t.fingerprint),i=wA(t.hash);if(s!==i)throw new Error(`Invalid length of fingerprint "${t.fingerprint}" for hashType=${t.hash}: ${s} != ${i}`);return X5(e,t.fingerprint,r,r+=s),Jd.encode.bytes=r-n,ke(e,Jd.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};e+=2,n.algorithm=t[e],e+=1,n.hash=t[e],e+=1;let s=wA(n.hash);return n.fingerprint=Z5(t,e,e+s),e+=s,Jd.decode.bytes=e-r,n},encodingLength(t){return 4+gA(t.fingerprint)}});function wA(t){if(t===1)return 20;if(t===2)return 32;throw new Error(`Invalid hashType=${t}, supported=1,2`)}Jd.getFingerprintLengthForHashType=wA;function vA(t){switch(t.toUpperCase()){case"A":return tk;case"PTR":return Wd;case"CNAME":return Wd;case"DNAME":return Wd;case"TXT":return rv;case"NULL":return nv;case"AAAA":return av;case"SRV":return sv;case"HINFO":return iv;case"CAA":return du;case"NS":return ev;case"SOA":return tv;case"MX":return ov;case"OPT":return fu;case"DNSKEY":return so;case"RRSIG":return kh;case"RP":return Rh;case"NSEC":return $h;case"NSEC3":return jh;case"SSHFP":return Jd;case"DS":return Nh}return Qg}var ki=Jt({encode(t,e,r){e||(e=new Uint8Array(ki.encodingLength(t))),r||(r=0);let n=r;if(_e.encode(t.name,e,r),r+=_e.encode.bytes,ke(e,Ud(t.type),r),t.type.toUpperCase()==="OPT"){if(t.name!==".")throw new Error("OPT name must be root.");ke(e,t.udpPayloadSize||4096,r+2),e[r+4]=t.extendedRcode||0,e[r+5]=t.ednsVersion||0,ke(e,t.flags||0,r+6),r+=8,fu.encode(t.options||[],e,r),r+=fu.encode.bytes}else{let s=hA(t.class===void 0?"IN":t.class);t.flush&&(s|=bA),ke(e,s,r+2),io(e,t.ttl||0,r+4),r+=8;let i=vA(t.type);i.encode(t.data,e,r),r+=i.encode.bytes}return ki.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={},n=e;if(r.name=_e.decode(t,e),e+=_e.decode.bytes,r.type=Ih(Xe(t,e)),r.type==="OPT")r.udpPayloadSize=Xe(t,e+2),r.extendedRcode=t[e+4],r.ednsVersion=t[e+5],r.flags=Xe(t,e+6),r.flag_do=(r.flags>>15&1)===1,r.options=fu.decode(t,e+8),e+=8+fu.decode.bytes;else{let s=Xe(t,e+2);r.ttl=no(t,e+4),r.class=pA(s&Nne),r.flush=!!(s&bA);let i=vA(r.type);r.data=i.decode(t,e+8),e+=8+i.decode.bytes}return ki.decode.bytes=e-n,r},encodingLength(t){let e=t.data!==null&&t.data!==void 0?t.data:t.options;return _e.encodingLength(t.name)+8+vA(t.type).encodingLength(e)}}),Gd=Jt({encode(t,e,r){e||(e=new Uint8Array(Gd.encodingLength(t))),r||(r=0);let n=r;return _e.encode(t.name,e,r),r+=_e.encode.bytes,ke(e,Ud(t.type),r),r+=2,ke(e,hA(t.class===void 0?"IN":t.class),r),r+=2,Gd.encode.bytes=r-n,t},decode(t,e){e||(e=0);let r=e,n={};return n.name=_e.decode(t,e),e+=_e.decode.bytes,n.type=Ih(Xe(t,e)),e+=2,n.class=pA(Xe(t,e)),e+=2,!!(n.class&ek)&&(n.class&=Mne),Gd.decode.bytes=e-r,n},encodingLength(t){return _e.encodingLength(t.name)+4}});var rk=1024;var on={encode:function(t,e,r){let n=!e;n&&(e=new Uint8Array(qne(t))),r||(r=0);let s=r;return t.questions||(t.questions=[]),t.answers||(t.answers=[]),t.authorities||(t.authorities=[]),t.additionals||(t.additionals=[]),zd.encode(t,e,r),r+=zd.encode.bytes,r=Mh(t.questions,Gd,e,r),r=Mh(t.answers,ki,e,r),r=Mh(t.authorities,ki,e,r),r=Mh(t.additionals,ki,e,r),on.encode.bytes=r-s,n&&qh.bytes!==e.length?e.slice(0,qh.bytes):e},decode:function(t,e){e||(e=0);let r=e,n=zd.decode(t,e);return e+=zd.decode.bytes,e=Yg(n.questions,Gd,t,e),e=Yg(n.answers,ki,t,e),e=Yg(n.authorities,ki,t,e),e=Yg(n.additionals,ki,t,e),on.decode.bytes=e-r,n},encodingLength:function(t){return zd.encodingLength(t)+Hd(t.questions||[],Gd)+Hd(t.answers||[],ki)+Hd(t.authorities||[],ki)+Hd(t.additionals||[],ki)}};on.encode.bytes=0;on.decode.bytes=0;function uv(t,e){if(t.questions)throw new Error("Only one .question object expected instead of a .questions array!");let r=Object.assign({type:e},t);return r.question&&(r.questions=[r.question],delete r.question),r}var cv={encode:function(t,e,r){return e=on.encode(uv(t,"query"),e,r),cv.encode.bytes=on.encode.bytes,e},decode:function(t,e){let r=on.decode(t,e);return cv.decode.bytes=on.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return on.encodingLength(uv(t,"query"))}};cv.encode.bytes=0;cv.decode.bytes=0;var lv={encode:function(t,e,r){return e=on.encode(uv(t,"response"),e,r),lv.encode.bytes=on.encode.bytes,e},decode:function(t,e){let r=on.decode(t,e);return lv.decode.bytes=on.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return on.encodingLength(uv(t,"response"))}};lv.encode.bytes=0;lv.decode.bytes=0;var qh=on.encode,dv=on.decode,qne=on.encodingLength;function nk(t){let e=qh(t),r=new Uint8Array(2+e.byteLength);return ke(r,e.byteLength),Hn(e,r,2,0,e.length),nk.bytes=r.byteLength,r}nk.bytes=0;function ik(t){let e=Xe(t,0);if(t.byteLength<e+2)return null;let r=dv(t.slice(2));return ik.bytes=dv.bytes,r}ik.bytes=0;function Hd(t,e){let r=0;for(let n=0;n<t.length;n++)r+=e.encodingLength(t[n]);return r}function Mh(t,e,r,n){for(let s=0;s<t.length;s++)e.encode(t[s],r,n),n+=e.encode.bytes;return n}function Yg(t,e,r,n){for(let s=0;s<t.length;s++)t[s]=e.decode(r,n),n+=e.decode.bytes;return n}var sk=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Ri=class{static getSigningMethod(e){return sk(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(e,r){return sk(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}};var Vr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},ok=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},ak="https://diddht.tbddev.org",Lne=0,pu=7200,fv=";",Bn=",",_A;(function(t){t[t.Discoverable=0]="Discoverable",t[t.Organization=1]="Organization",t[t.Government=2]="Government",t[t.Corporation=3]="Corporation",t[t.LocalBusiness=4]="LocalBusiness",t[t.SoftwarePackage=5]="SoftwarePackage",t[t.WebApp=6]="WebApp",t[t.FinancialInstitution=7]="FinancialInstitution"})(_A||(_A={}));var In;(function(t){t[t.Ed25519=0]="Ed25519",t[t.secp256k1=1]="secp256k1",t[t.secp256r1=2]="secp256r1",t[t.X25519=3]="X25519"})(In||(In={}));var EA;(function(t){t.authentication="auth",t.assertionMethod="asm",t.capabilityDelegation="del",t.capabilityInvocation="inv",t.keyAgreement="agm"})(EA||(EA={}));var ck={Ed25519:In.Ed25519,ES256K:In.secp256k1,ES256:In.secp256r1,"P-256":In.secp256r1,secp256k1:In.secp256k1,secp256r1:In.secp256r1,X25519:In.X25519},uk={[In.Ed25519]:"EdDSA",[In.secp256k1]:"ES256K",[In.secp256r1]:"ES256",[In.X25519]:"ECDH-ES+A256KW"},Jc=class t extends Ri{static create(){return Vr(this,arguments,void 0,function*({keyManager:e=new mn,options:r={}}={}){var n,s,i,o,a,u,c,l,d,p,f;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(S=>!(S.algorithm in ck)))throw new Error("One or more verification method algorithms are not supported");let h=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(S=>"id"in S).map(S=>S.id);if(h&&h.length!==new Set(h).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(S=>!S.id||!S.type||!S.serviceEndpoint))throw new Error("One or more services are missing required properties");let m=yield e.generateKey({algorithm:"Ed25519"}),g=yield e.getPublicKey({keyUri:m}),_=yield Kr.identityKeyToIdentifier({identityKey:g}),D=Object.assign(Object.assign({id:_},r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs}),r.controllers&&{controller:r.controllers}),v=[...(o=r.verificationMethods)!==null&&o!==void 0?o:[]];v?.some(S=>{var P;return((P=S.id)===null||P===void 0?void 0:P.split("#").pop())==="0"})||v.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(let S of v){let P=S.id&&S.id.split("#").pop()==="0"?m:yield e.generateKey({algorithm:S.algorithm}),C=yield e.getPublicKey({keyUri:P}),B=(u=(a=S.id)!==null&&a!==void 0?a:C.kid)!==null&&u!==void 0?u:yield He({jwk:C});B=`${_}#${zn(B)}`,(c=D.verificationMethod)!==null&&c!==void 0||(D.verificationMethod=[]),D.verificationMethod.push({id:B,type:"JsonWebKey",controller:(l=S.controller)!==null&&l!==void 0?l:_,publicKeyJwk:C});for(let F of(d=S.purposes)!==null&&d!==void 0?d:[])D[F]||(D[F]=[]),D[F].push(B)}(p=r.services)===null||p===void 0||p.forEach(S=>{var P;(P=D.service)!==null&&P!==void 0||(D.service=[]),S.id=`${_}#${S.id.split("#").pop()}`,D.service.push(S)});let E=new Jn({uri:_,document:D,metadata:Object.assign({published:!1},r.types&&{types:r.types}),keyManager:e});if(!((f=r.publish)!==null&&f!==void 0)||f){let S=yield t.publish({did:E,gatewayUri:r.gatewayUri});E.metadata=S.didDocumentMetadata}return E})}static import(e){return Vr(this,arguments,void 0,function*({portableDid:r,keyManager:n=new mn}){var s;let i=it.parse(r.uri);if(i?.method!==t.methodName)throw new Se(be.MethodNotSupported,"Method not supported");let o=yield Jn.import({portableDid:r,keyManager:n});if(!(!((s=o.document.verificationMethod)===null||s===void 0)&&s.some(a=>{var u;return((u=a.id)===null||u===void 0?void 0:u.split("#").pop())==="0"})))throw new Se(be.InvalidDidDocument,"DID document must contain an Identity Key");return o})}static getSigningMethod(e){return Vr(this,arguments,void 0,function*({didDocument:r,methodId:n="#0"}){var s;let i=it.parse(r.id);if(i&&i.method!==this.methodName)throw new Se(be.MethodNotSupported,`Method not supported: ${i.method}`);let o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var u,c;return zn(a.id)===((u=zn(n))!==null&&u!==void 0?u:zn((c=r.assertionMethod)===null||c===void 0?void 0:c[0]))});if(!(o&&o.publicKeyJwk))throw new Se(be.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static publish(e){return Vr(this,arguments,void 0,function*({did:r,gatewayUri:n=ak}){return yield pv.put({did:r,gatewayUri:n})})}static resolve(e){return Vr(this,arguments,void 0,function*(r,n={}){var s;let i=(s=n?.gatewayUri)!==null&&s!==void 0?s:ak;try{yield Kr.identifierToIdentityKey({didUri:r});let{didDocument:o,didDocumentMetadata:a}=yield pv.get({didUri:r,gatewayUri:i});return Object.assign(Object.assign({},ur),{didDocument:o,didDocumentMetadata:a})}catch(o){if(!(o instanceof Se))throw new Error(o);return Object.assign(Object.assign({},ur),{didResolutionMetadata:Object.assign({error:o.code},o.message&&{errorMessage:o.message})})}})}};Jc.methodName="dht";var pv=class t{static get(e){return Vr(this,arguments,void 0,function*({didUri:r,gatewayUri:n}){let s=Kr.identifierToIdentityKeyBytes({didUri:r}),i=yield t.pkarrGet({gatewayUri:n,publicKeyBytes:s}),o=yield Kr.parseBep44GetMessage({bep44Message:i}),a=yield t.fromDnsPacket({didUri:r,dnsPacket:o});return a.didDocumentMetadata.versionId=i.seq.toString(),a})}static put(e){return Vr(this,arguments,void 0,function*({did:r,gatewayUri:n}){let s=yield t.toDnsPacket({didDocument:r.document,didMetadata:r.metadata,authoritativeGatewayUris:[n]}),i=yield Kr.createBep44PutMessage({dnsPacket:s,publicKeyBytes:Kr.identifierToIdentityKeyBytes({didUri:r.uri}),signer:yield r.getSigner({methodId:"0"})}),o=yield t.pkarrPut({gatewayUri:n,bep44Message:i});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:o,versionId:i.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet(e){return Vr(this,arguments,void 0,function*({gatewayUri:r,publicKeyBytes:n}){let s=ge.uint8Array(n).toBase32Z(),i=new URL(s,r).href,o;try{if(o=yield fetch(i,{method:"GET"}),!o.ok)throw new Se(be.NotFound,`Pkarr record not found for: ${s}`)}catch(c){throw c instanceof Se?c:new Se(be.InternalError,`Failed to fetch Pkarr record: ${c.message}`)}let a=yield o.arrayBuffer();if(!a)throw new Se(be.NotFound,`Pkarr record not found for: ${s}`);if(a.byteLength<72)throw new Se(be.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${a.byteLength}`);if(a.byteLength>1072)throw new Se(be.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${a.byteLength}`);return{k:n,seq:Number(new DataView(a).getBigUint64(64)),sig:new Uint8Array(a,0,64),v:new Uint8Array(a,72)}})}static pkarrPut(e){return Vr(this,arguments,void 0,function*({gatewayUri:r,bep44Message:n}){let s=ge.uint8Array(n.k).toBase32Z(),i=new URL(s,r).href,o=new Uint8Array(n.v.length+72);o.set(n.sig,0),new DataView(o.buffer).setBigUint64(n.sig.length,BigInt(n.seq)),o.set(n.v,n.sig.length+8);let a;try{a=yield fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:o})}catch(u){throw new Se(be.InternalError,`Failed to put Pkarr record for identifier ${s}: ${u.message}`)}return a.ok})}static fromDnsPacket(e){return Vr(this,arguments,void 0,function*({didUri:r,dnsPacket:n}){var s,i,o;let a={id:r},u={published:!0},c=new Map;for(let l of(s=n?.answers)!==null&&s!==void 0?s:[]){if(l.type!=="TXT")continue;let d=l.name.split(".")[0].substring(1);switch(!0){case d.startsWith("aka"):{let p=Kr.parseTxtDataToString(l.data);a.alsoKnownAs=p.split(Bn);break}case d.startsWith("cnt"):{let p=Kr.parseTxtDataToString(l.data);a.controller=p.includes(Bn)?p.split(Bn):p;break}case d.startsWith("k"):{let{id:p,t:f,k:h,c:m,a:g}=Kr.parseTxtDataToObject(l.data),_=ge.base64Url(h).toUint8Array(),D=In[Number(f)],v=yield Kr.keyConverter(D).bytesToPublicKey({publicKeyBytes:_});v.alg=g||uk[Number(f)];let E=d==="k0"?"0":p!==void 0?p:yield He({jwk:v});(i=a.verificationMethod)!==null&&i!==void 0||(a.verificationMethod=[]);let S=`${r}#${E}`;a.verificationMethod.push({id:S,type:"JsonWebKey",controller:m??r,publicKeyJwk:v}),c.set(d,S);break}case d.startsWith("s"):{let p=Kr.parseTxtDataToObject(l.data),{id:f,t:h,se:m}=p,g=ok(p,["id","t","se"]),_=m.includes(Bn)?m.split(Bn):[m],D=Object.fromEntries(Object.entries(g).map(([v,E])=>[v,E.includes(Bn)?E.split(Bn):E]));(o=a.service)!==null&&o!==void 0||(a.service=[]),a.service.push(Object.assign(Object.assign({},D),{id:`${r}#${f}`,type:h,serviceEndpoint:_}));break}case d.startsWith("typ"):{let{id:p}=Kr.parseTxtDataToObject(l.data);u.types=p.split(Bn).map(f=>Number(f));break}case d.startsWith("did"):{let p=D=>D.split(Bn).map(v=>c.get(v)).filter(v=>typeof v=="string"),{auth:f,asm:h,del:m,inv:g,agm:_}=Kr.parseTxtDataToObject(l.data);f&&(a.authentication=p(f)),h&&(a.assertionMethod=p(h)),m&&(a.capabilityDelegation=p(m)),g&&(a.capabilityInvocation=p(g)),_&&(a.keyAgreement=p(_));break}}}return{didDocument:a,didDocumentMetadata:u,didResolutionMetadata:{}}})}static toDnsPacket(e){return Vr(this,arguments,void 0,function*({didDocument:r,didMetadata:n,authoritativeGatewayUris:s,previousDidProof:i}){var o,a,u,c,l;let d=[],p=[],f=new Map,h=[],m=[];if(i!==void 0){let{signature:D,previousDid:v}=i;yield Kr.validatePreviousDidProof({newDid:r.id,previousDidProof:i}),d.push({type:"TXT",name:"_prv._did.",ttl:pu,data:`id=${v};s=${D}`})}if(r.alsoKnownAs&&d.push({type:"TXT",name:"_aka._did.",ttl:pu,data:r.alsoKnownAs.join(Bn)}),r.controller){let D=Array.isArray(r.controller)?r.controller.join(Bn):r.controller;d.push({type:"TXT",name:"_cnt._did.",ttl:pu,data:D})}for(let[D,v]of(a=(o=r.verificationMethod)===null||o===void 0?void 0:o.entries())!==null&&a!==void 0?a:[]){let E=`k${D}`;m.push(E);let S=v.id.split("#").pop();f.set(S,E);let P=v.publicKeyJwk;if(!(P?.crv&&P.crv in ck))throw new Se(be.InvalidPublicKeyType,`Verification method '${v.id}' contains an unsupported key type: ${(u=P?.crv)!==null&&u!==void 0?u:"undefined"}`);let C=In[P.crv],B=yield Kr.keyConverter(P.crv).publicKeyToBytes({publicKey:P}),F=ge.uint8Array(B).toBase64Url(),I=[`t=${C}`,`k=${F}`];S!=="0"&&(yield He({jwk:P}))!==S&&I.unshift(`id=${S}`),P.alg!==uk[C]&&I.push(`a=${P.alg}`),v.controller!==r.id&&I.push(`c=${v.controller}`),d.push({type:"TXT",name:`_${E}._did.`,ttl:pu,data:I.join(fv)})}(c=r.service)===null||c===void 0||c.forEach((D,v)=>{let E=`s${v}`;h.push(E);let{id:S,type:P,serviceEndpoint:C}=D,B=ok(D,["id","type","serviceEndpoint"]);S=zn(S),C=Array.isArray(C)?C.join(","):C;let I=Object.entries(Object.assign({id:S,t:P,se:C},B)).map(([q,X])=>`${q}=${X}`).join(fv),$=Kr.chunkDataIfNeeded(I);d.push({type:"TXT",name:`_${E}._did.`,ttl:pu,data:$})});let g=[`v=${Lne}`];if(m.length&&g.push(`vm=${m.join(Bn)}`),Object.keys(qc).forEach(D=>{var v;let E=(v=r[D])===null||v===void 0?void 0:v.map(S=>f.get(S.split("#").pop()));if(E){let S=EA[D];g.push(`${S}=${E.join(Bn)}`)}}),h.length&&g.push(`svc=${h.join(Bn)}`),!((l=n.types)===null||l===void 0)&&l.length){let v=n.types.map(E=>typeof E=="string"?_A[E]:E);d.push({type:"TXT",name:"_typ._did.",ttl:pu,data:`id=${v.join(Bn)}`})}d.push({type:"TXT",name:"_did."+t.getUniqueDidSuffix(r.id)+".",ttl:pu,data:g.join(fv)});for(let D of s||[])p.push({type:"NS",name:"_did."+t.getUniqueDidSuffix(r.id)+".",ttl:pu,data:D+"."});return{id:0,type:"response",flags:rk,answers:[...d,...p]}})}static getUniqueDidSuffix(e){return e.split(":")[2]}},Kr=class t{static createBep44PutMessage(e){return Vr(this,arguments,void 0,function*({dnsPacket:r,publicKeyBytes:n,signer:s}){let i=Math.ceil(Date.now()/1e3),o=qh(r),a=fA.encode({seq:i,v:o}).subarray(1,-1);if(a.length>1e3)throw new Se(be.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${a.length} bytes`);let u=yield s.sign({data:a});return{k:n,seq:i,sig:u,v:o}})}static identifierToIdentityKey(e){return Vr(this,arguments,void 0,function*({didUri:r}){let n=t.identifierToIdentityKeyBytes({didUri:r});return yield Rr.bytesToPublicKey({publicKeyBytes:n})})}static identifierToIdentityKeyBytes({didUri:e}){let r=it.parse(e);if(!r)throw new Se(be.InvalidDid,`Invalid DID URI: ${e}`);if(r.method!==Jc.methodName)throw new Se(be.MethodNotSupported,`Method not supported: ${r.method}`);let n;try{n=ge.base32Z(r.id).toUint8Array()}catch{throw new Se(be.InvalidPublicKey,"Failed to decode method-specific identifier")}if(n.length!==32)throw new Se(be.InvalidPublicKeyLength,`Invalid public key length: ${n.length}`);return n}static identityKeyToIdentifier(e){return Vr(this,arguments,void 0,function*({identityKey:r}){let n=yield Rr.publicKeyToBytes({publicKey:r}),s=ge.uint8Array(n).toBase32Z();return`did:${Jc.methodName}:${s}`})}static keyConverter(e){let n={Ed25519:Rr,"P-256":{publicKeyToBytes:s=>Vr(this,[s],void 0,function*({publicKey:i}){let o=yield nn.publicKeyToBytes({publicKey:i});return yield nn.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:nn.bytesToPublicKey,privateKeyToBytes:nn.privateKeyToBytes,bytesToPrivateKey:nn.bytesToPrivateKey},secp256k1:{publicKeyToBytes:s=>Vr(this,[s],void 0,function*({publicKey:i}){let o=yield Ur.publicKeyToBytes({publicKey:i});return yield Ur.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:Ur.bytesToPublicKey,privateKeyToBytes:Ur.privateKeyToBytes,bytesToPrivateKey:Ur.bytesToPrivateKey},X25519:qd}[e];if(!n)throw new Se(be.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static parseBep44GetMessage(e){return Vr(this,arguments,void 0,function*({bep44Message:r}){let n=yield Rr.bytesToPublicKey({publicKeyBytes:r.k}),s=fA.encode({seq:r.seq,v:r.v}).subarray(1,-1);if(!(yield Rr.verify({key:n,signature:r.sig,data:s})))throw new Se(be.InvalidSignature,"Invalid signature for DHT BEP44 message");return dv(r.v)})}static parseTxtDataToObject(e){return this.parseTxtDataToString(e).split(fv).reduce((r,n)=>{let[s,i]=n.split("=");return r[s]=i,r},{})}static parseTxtDataToString(e){if(typeof e=="string")return e;if(e instanceof Uint8Array)return ge.uint8Array(e).toString();if(Array.isArray(e))return e.map(r=>this.parseTxtDataToString(r)).join("");throw new Se(be.InternalError,"Pkarr returned DNS TXT record with invalid data type")}static validatePreviousDidProof(e){return Vr(this,arguments,void 0,function*({newDid:r,previousDidProof:n}){let s=yield t.identifierToIdentityKey({didUri:n.previousDid}),i=t.identifierToIdentityKeyBytes({didUri:r}),o=ge.base64Url(n.signature).toUint8Array();if(!(yield Rr.verify({key:s,data:i,signature:o})))throw new Se(be.InvalidPreviousDidProof,"The previous DID proof is invalid.")})}static chunkDataIfNeeded(e){if(e.length<=255)return e;let r=[];for(let n=0;n<e.length;n+=255)r.push(e.slice(n,n+255));return r}};var Xt={DeltaExceedsMaximumSize:"DeltaExceedsMaximumSize",DidDocumentPublicKeyIdDuplicated:"DidDocumentPublicKeyIdDuplicated",DidDocumentPublicKeyMissingOrIncorrectType:"DidDocumentPublicKeyMissingOrIncorrectType",DidDocumentServiceIdDuplicated:"DidDocumentServiceIdDuplicated",DidSuffixIncorrectLength:"DidSuffixIncorrectLength",EncodedStringIncorrectEncoding:"EncodedStringIncorrectEncoding",IdNotUsingBase64UrlCharacterSet:"IdNotUsingBase64UrlCharacterSet",IdTooLong:"IdTooLong",JwkEs256kMissingOrInvalidCrv:"JwkEs256kMissingOrInvalidCrv",JwkEs256kMissingOrInvalidKty:"JwkEs256kMissingOrInvalidKty",JwkEs256kHasIncorrectLengthOfX:"JwkEs256kHasIncorrectLengthOfX",JwkEs256kHasIncorrectLengthOfY:"JwkEs256kHasIncorrectLengthOfY",JwkEs256kHasIncorrectLengthOfD:"JwkEs256kHasIncorrectLengthOfD",MultihashStringNotAMultihash:"MultihashStringNotAMultihash",MultihashUnsupportedHashAlgorithm:"MultihashUnsupportedHashAlgorithm",PublicKeyJwkEs256kHasUnexpectedProperty:"PublicKeyJwkEs256kHasUnexpectedProperty",PublicKeyPurposeDuplicated:"PublicKeyPurposeDuplicated",ServiceEndpointCannotBeAnArray:"ServiceEndpointCannotBeAnArray",ServiceEndpointStringNotValidUri:"ServiceEndpointStringNotValidUri",ServiceTypeTooLong:"ServiceTypeTooLong"};var Ut=class extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,Object.setPrototypeOf(this,new.target.prototype)}};var GBe=new Uint8Array(0);var SA=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var AA=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},xA=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return lk(this,e)}},DA=class{constructor(e){this.decoders=e}or(e){return lk(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},lk=(t,e)=>new DA({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),CA=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new AA(e,r,n),this.decoder=new xA(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Une=({name:t,prefix:e,encode:r,decode:n})=>new CA(t,e,r,n);var Kne=(t,e,r,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,u=0,c=0;for(let l=0;l<i;++l){let d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},Vne=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Lh=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Une({prefix:e,name:t,encode(s){return Vne(s,n,r)},decode(s){return Kne(s,n,r,t)}});var rIe=Lh({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),nIe=Lh({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Uh=Lh({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),iIe=Lh({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Wn=class t{static encode(e){return Uh.baseEncode(e)}static decodeAsBytes(e,r){if(!t.isBase64UrlString(e))throw new Ut(Xt.EncodedStringIncorrectEncoding,`Given ${r} must be base64url string.`);return Uh.baseDecode(e)}static decodeAsString(e,r){let n=t.decodeAsBytes(e,r);return t.bytesToString(n)}static isBase64UrlString(e){return/^[A-Za-z0-9_-]+$/.test(e)}static stringToBytes(e){return new TextEncoder().encode(e)}static bytesToString(e){return new TextDecoder().decode(e)}};var _k=qn(fk(),1);var PA;(function(t){t.Public="public",t.Private="private"})(PA||(PA={}));var ci=PA;var jr=class{static validateEs256kOperationKey(e,r){let n=new Set(["kty","crv","x","y"]);r===ci.Private&&n.add("d");for(let s in e)if(!n.has(s))throw new Ut(Xt.PublicKeyJwkEs256kHasUnexpectedProperty,`SECP256K1 JWK key has unexpected property '${s}'.`);if(e.crv!=="secp256k1")throw new Ut(Xt.JwkEs256kMissingOrInvalidCrv,`SECP256K1 JWK 'crv' property must be 'secp256k1' but got '${e.crv}.'`);if(e.kty!=="EC")throw new Ut(Xt.JwkEs256kMissingOrInvalidKty,`SECP256K1 JWK 'kty' property must be 'EC' but got '${e.kty}.'`);if(e.x.length!==43)throw new Ut(Xt.JwkEs256kHasIncorrectLengthOfX,"SECP256K1 JWK 'x' property must be 43 bytes.");if(e.y.length!==43)throw new Ut(Xt.JwkEs256kHasIncorrectLengthOfY,"SECP256K1 JWK 'y' property must be 43 bytes.");if(r===ci.Private&&(e.d===void 0||e.d.length!==43))throw new Ut(Xt.JwkEs256kHasIncorrectLengthOfD,"SECP256K1 JWK 'd' property must be 43 bytes.")}static validateId(e){if(e.length>50)throw new Ut(Xt.IdTooLong,`Key ID length ${e.length} exceed max allowed length of 50.`);if(!Wn.isBase64UrlString(e))throw new Ut(Xt.IdNotUsingBase64UrlCharacterSet,`Key ID '${e}' is not a Base64URL string.`)}static validatePublicKeyPurposes(e){if(e===void 0)return;let r=new Set;for(let n of e){if(r.has(n))throw new Ut(Xt.PublicKeyPurposeDuplicated,`Public key purpose '${n}' already specified.`);r.add(n)}}};var Kh=class{};Kh.hashAlgorithmInMultihashCode=18;Kh.maxCanonicalizedDeltaSizeInBytes=1e3;var Fn=Kh;var yk=qn(hk(),1);var ps=class t{static canonicalizeAsBytes(e){let r=t.removeAllUndefinedProperties(e),n=yk.default(r);return Wn.stringToBytes(n)}static removeAllUndefinedProperties(e){for(let r in e)typeof e[r]=="object"?t.removeAllUndefinedProperties(e[r]):e[r]===void 0&&delete e[r];return e}};var zne=vk,mk=128,Jne=127,Hne=~Jne,Wne=Math.pow(2,31);function vk(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Wne;)e[r++]=t&255|mk,t/=128;for(;t&Hne;)e[r++]=t&255|mk,t>>>=7;return e[r]=t|0,vk.bytes=r-n+1,e}var Gne=OA,Zne=128,gk=127;function OA(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw OA.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&gk)<<s:(o&gk)*Math.pow(2,s),s+=7}while(o>=Zne);return OA.bytes=i-n,r}var Xne=Math.pow(2,7),Yne=Math.pow(2,14),Qne=Math.pow(2,21),eie=Math.pow(2,28),tie=Math.pow(2,35),rie=Math.pow(2,42),nie=Math.pow(2,49),iie=Math.pow(2,56),sie=Math.pow(2,63),oie=function(t){return t<Xne?1:t<Yne?2:t<Qne?3:t<eie?4:t<tie?5:t<rie?6:t<nie?7:t<iie?8:t<sie?9:10},aie={encode:zne,decode:Gne,encodingLength:oie},uie=aie,Vh=uie;var TA=(t,e=0)=>[Vh.decode(t,e),Vh.decode.bytes],BA=(t,e,r=0)=>(Vh.encode(t,e,r),e),IA=t=>Vh.encodingLength(t);var FA=(t,e)=>{let r=e.byteLength,n=IA(t),s=n+IA(r),i=new Uint8Array(s+r);return BA(t,i,0),BA(r,i,n),i.set(e,s),new yv(t,r,e,i)},bk=t=>{let e=SA(t),[r,n]=TA(e),[s,i]=TA(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new yv(r,s,o,e)};var yv=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};var RA=({name:t,code:e,encode:r})=>new kA(t,e,r),kA=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?FA(this.code,r):r.then(n=>FA(this.code,n))}else throw Error("Unknown type, must be binary type")}};var wk=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),mv=RA({name:"sha2-256",code:18,encode:wk("SHA-256")}),DIe=RA({name:"sha2-512",code:19,encode:wk("SHA-512")});var zh=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},zr=class t{static hash(e,r){return zh(this,void 0,void 0,function*(){let n;switch(r){case 18:n=(yield mv.digest(e)).bytes;break;default:throw new Ut(Xt.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static hashAsNonMultihashBytes(e,r){return zh(this,void 0,void 0,function*(){let n;switch(r){case 18:n=yield mv.encode(e);break;default:throw new Ut(Xt.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static canonicalizeThenHashThenEncode(e,r){return zh(this,void 0,void 0,function*(){let n=ps.canonicalizeAsBytes(e);return yield t.hashThenEncode(n,r)})}static canonicalizeThenDoubleHashThenEncode(e,r){return zh(this,void 0,void 0,function*(){let n=ps.canonicalizeAsBytes(e),s=yield t.hashAsNonMultihashBytes(n,r);return yield t.hashThenEncode(s,r)})}static hashThenEncode(e,r){return zh(this,void 0,void 0,function*(){let n=yield t.hash(e,r);return Wn.encode(n)})}static validateEncodedHashComputedUsingSupportedHashAlgorithm(e,r){let n,s=Wn.decodeAsBytes(e,r);try{n=bk(s)}catch{throw new Ut(Xt.MultihashStringNotAMultihash,`Given ${r} string '${e}' is not a multihash after decoding.`)}let i=Fn.hashAlgorithmInMultihashCode;if(i!==n.code)throw new Ut(Xt.MultihashUnsupportedHashAlgorithm,`Given ${r} uses unsupported multihash algorithm with code ${n.code}, should use ${i} or change IonSdkConfig to desired hashing algorithm.`)}};var $A;(function(t){t.Create="create",t.Update="update",t.Deactivate="deactivate",t.Recover="recover"})($A||($A={}));var Jh=$A;var jA;(function(t){t.Replace="replace",t.AddPublicKeys="add-public-keys",t.RemovePublicKeys="remove-public-keys",t.AddServices="add-services",t.RemoveServices="remove-services"})(jA||(jA={}));var Hc=jA;var gv=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},hu=class t{static createCreateRequest(e){return gv(this,void 0,void 0,function*(){let r=e.recoveryKey,n=e.updateKey,s=e.document.publicKeys,i=e.document.services;jr.validateEs256kOperationKey(r,ci.Public),jr.validateEs256kOperationKey(n,ci.Public),t.validateDidDocumentKeys(s),t.validateServices(i);let o=Fn.hashAlgorithmInMultihashCode,a=[{action:Hc.Replace,document:e.document}],u={updateCommitment:yield zr.canonicalizeThenDoubleHashThenEncode(n,o),patches:a};t.validateDeltaSize(u);let l={deltaHash:yield zr.canonicalizeThenHashThenEncode(u,o),recoveryCommitment:yield zr.canonicalizeThenDoubleHashThenEncode(r,o)};return{type:Jh.Create,suffixData:l,delta:u}})}static createDeactivateRequest(e){return gv(this,void 0,void 0,function*(){t.validateDidSuffix(e.didSuffix),jr.validateEs256kOperationKey(e.recoveryPublicKey,ci.Public);let r=Fn.hashAlgorithmInMultihashCode,n=yield zr.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),s={didSuffix:e.didSuffix,recoveryKey:e.recoveryPublicKey},i=yield e.signer.sign({alg:"ES256K"},s);return{type:Jh.Deactivate,didSuffix:e.didSuffix,revealValue:n,signedData:i}})}static createRecoverRequest(e){return gv(this,void 0,void 0,function*(){t.validateDidSuffix(e.didSuffix),jr.validateEs256kOperationKey(e.recoveryPublicKey,ci.Public),jr.validateEs256kOperationKey(e.nextRecoveryPublicKey,ci.Public),jr.validateEs256kOperationKey(e.nextUpdatePublicKey,ci.Public),t.validateDidDocumentKeys(e.document.publicKeys),t.validateServices(e.document.services);let r=Fn.hashAlgorithmInMultihashCode,n=yield zr.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),s=[{action:Hc.Replace,document:e.document}],i=yield zr.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,r),o={patches:s,updateCommitment:i},a=yield zr.canonicalizeThenHashThenEncode(o,r),c={recoveryCommitment:yield zr.canonicalizeThenDoubleHashThenEncode(e.nextRecoveryPublicKey,r),recoveryKey:e.recoveryPublicKey,deltaHash:a},l=yield e.signer.sign({alg:"ES256K"},c);return{type:Jh.Recover,didSuffix:e.didSuffix,revealValue:n,delta:o,signedData:l}})}static createUpdateRequest(e){return gv(this,void 0,void 0,function*(){if(t.validateDidSuffix(e.didSuffix),jr.validateEs256kOperationKey(e.updatePublicKey,ci.Public),jr.validateEs256kOperationKey(e.nextUpdatePublicKey,ci.Public),t.validateServices(e.servicesToAdd),t.validateDidDocumentKeys(e.publicKeysToAdd),e.idsOfServicesToRemove!==void 0)for(let h of e.idsOfServicesToRemove)jr.validateId(h);if(e.idsOfPublicKeysToRemove!==void 0)for(let h of e.idsOfPublicKeysToRemove)jr.validateId(h);let r=[],n=e.servicesToAdd;if(n!==void 0&&n.length>0){let h={action:Hc.AddServices,services:n};r.push(h)}let s=e.idsOfServicesToRemove;if(s!==void 0&&s.length>0){let h={action:Hc.RemoveServices,ids:s};r.push(h)}let i=e.publicKeysToAdd;if(i!==void 0&&i.length>0){let h={action:Hc.AddPublicKeys,publicKeys:i};r.push(h)}let o=e.idsOfPublicKeysToRemove;if(o!==void 0&&o.length>0){let h={action:Hc.RemovePublicKeys,ids:o};r.push(h)}let a=Fn.hashAlgorithmInMultihashCode,u=yield zr.canonicalizeThenHashThenEncode(e.updatePublicKey,a),c=yield zr.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,a),l={patches:r,updateCommitment:c},d=yield zr.canonicalizeThenHashThenEncode(l,a),p={updateKey:e.updatePublicKey,deltaHash:d},f=yield e.signer.sign({alg:"ES256K"},p);return{type:Jh.Update,didSuffix:e.didSuffix,revealValue:u,delta:l,signedData:f}})}static validateDidSuffix(e){zr.validateEncodedHashComputedUsingSupportedHashAlgorithm(e,"didSuffix")}static validateDidDocumentKeys(e){if(e===void 0)return;let r=new Set;for(let n of e){if(Array.isArray(n.publicKeyJwk))throw new Ut(Xt.DidDocumentPublicKeyMissingOrIncorrectType,"DID Document key 'publicKeyJwk' property is not a non-array object.");if(jr.validateId(n.id),r.has(n.id))throw new Ut(Xt.DidDocumentPublicKeyIdDuplicated,`DID Document key with ID '${n.id}' already exists.`);r.add(n.id),jr.validatePublicKeyPurposes(n.purposes)}}static validateServices(e){if(e!==void 0&&e.length!==0){let r=new Set;for(let n of e){if(t.validateService(n),r.has(n.id))throw new Ut(Xt.DidDocumentServiceIdDuplicated,"Service id has to be unique");r.add(n.id)}}}static validateService(e){jr.validateId(e.id);let r=30;if(e.type.length>r){let n=`Service endpoint type length ${e.type.length} exceeds max allowed length of ${r}.`;throw new Ut(Xt.ServiceTypeTooLong,n)}if(Array.isArray(e.serviceEndpoint)){let n="Service endpoint value cannot be an array.";throw new Ut(Xt.ServiceEndpointCannotBeAnArray,n)}if(typeof e.serviceEndpoint=="string"&&_k.parse(e.serviceEndpoint).error!==void 0)throw new Ut(Xt.ServiceEndpointStringNotValidUri,`Service endpoint string '${e.serviceEndpoint}' is not a URI.`)}static validateDeltaSize(e){let r=ps.canonicalizeAsBytes(e);if(r.length>Fn.maxCanonicalizedDeltaSizeInBytes){let n=`Delta of ${r.length} bytes exceeded limit of ${Fn.maxCanonicalizedDeltaSizeInBytes} bytes.`;throw new Ut(Xt.DeltaExceedsMaximumSize,n)}}};var Ek=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Zd=class t{static createLongFormDid(e){return Ek(this,void 0,void 0,function*(){let r=yield hu.createCreateRequest(e),n=yield t.computeDidUniqueSuffix(r.suffixData),s;Fn.network===void 0||Fn.network==="mainnet"?s=`did:ion:${n}`:s=`did:ion:${Fn.network}:${n}`;let i={suffixData:r.suffixData,delta:r.delta},o=ps.canonicalizeAsBytes(i),a=Wn.encode(o);return`${s}:${a}`})}static computeDidUniqueSuffix(e){return Ek(this,void 0,void 0,function*(){let r=ps.canonicalizeAsBytes(e),n=yield zr.hash(r,Fn.hashAlgorithmInMultihashCode);return Wn.encode(n)})}};var Sk;(function(t){t.Mainnet="mainnet",t.Testnet="test"})(Sk||(Sk={}));var Ak;(function(t){t.Authentication="authentication",t.AssertionMethod="assertionMethod",t.CapabilityInvocation="capabilityInvocation",t.CapabilityDelegation="capabilityDelegation",t.KeyAgreement="keyAgreement"})(Ak||(Ak={}));var yu=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},oo;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(oo||(oo={}));var die={Ed25519:oo.Ed25519,ES256K:oo.secp256k1,ES256:oo.secp256r1,"P-256":oo.secp256r1,secp256k1:oo.secp256k1,secp256r1:oo.secp256r1},xk="https://ion.tbd.engineering",Hh=class t extends Ri{static create(){return yu(this,arguments,void 0,function*({keyManager:e=new mn,options:r={}}={}){var n,s,i,o,a,u,c;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(S=>!(S.algorithm in die)))throw new Error("One or more verification method algorithms are not supported");let l=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(S=>"id"in S).map(S=>S.id);if(l&&l.length!==new Set(l).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(S=>!S.id||!S.type||!S.serviceEndpoint))throw new Error("One or more services are missing required properties");let d={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},p=[];for(let S of(o=r.verificationMethods)!==null&&o!==void 0?o:[d]){let P=yield e.generateKey({algorithm:S.algorithm}),C=yield e.getPublicKey({keyUri:P});p.push({id:S.id,publicKeyJwk:C,purposes:(a=S.purposes)!==null&&a!==void 0?a:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}let f=yield e.generateKey({algorithm:oo.secp256k1}),h=yield e.getPublicKey({keyUri:f}),m=yield e.generateKey({algorithm:oo.secp256k1}),g=yield e.getPublicKey({keyUri:m}),_=yield Wc.computeLongFormDidUri({recoveryKey:h,updateKey:g,services:(u=r.services)!==null&&u!==void 0?u:[],verificationMethods:p}),{didDocument:D,didResolutionMetadata:v}=yield t.resolve(_,{gatewayUri:r.gatewayUri});if(D===null)throw new Error(`Unable to resolve DID during creation: ${v?.error}`);let E=new Jn({uri:_,document:D,metadata:{published:!1,canonicalId:_.split(":",3).join(":"),recoveryKey:h,updateKey:g},keyManager:e});if(!((c=r.publish)!==null&&c!==void 0)||c){let S=yield t.publish({did:E,gatewayUri:r.gatewayUri});E.metadata=S.didDocumentMetadata}return E})}static getSigningMethod(e){return yu(this,arguments,void 0,function*({didDocument:r,methodId:n}){var s;let i=it.parse(r.id);if(i&&i.method!==this.methodName)throw new Se(be.MethodNotSupported,`Method not supported: ${i.method}`);let o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var u;return a.id===(n??((u=r.assertionMethod)===null||u===void 0?void 0:u[0]))});if(!(o&&o.publicKeyJwk))throw new Se(be.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return yu(this,arguments,void 0,function*({portableDid:r,keyManager:n=new mn}){let s=it.parse(r.uri);if(s?.method!==t.methodName)throw new Se(be.MethodNotSupported,"Method not supported");return yield Jn.import({portableDid:r,keyManager:n})})}static publish(e){return yu(this,arguments,void 0,function*({did:r,gatewayUri:n=xk}){var s,i,o;let a=(i=(s=r.document.verificationMethod)===null||s===void 0?void 0:s.map(l=>({id:l.id,publicKeyJwk:l.publicKeyJwk,purposes:oA({didDocument:r.document,methodId:l.id})})))!==null&&i!==void 0?i:[],u=yield Wc.createIonDocument({services:(o=r.document.service)!==null&&o!==void 0?o:[],verificationMethods:a}),c=yield Wc.constructCreateRequest({ionDocument:u,recoveryKey:r.metadata.recoveryKey,updateKey:r.metadata.updateKey});try{let l=Wc.appendPathToUrl({baseUrl:n,path:"/operations"}),d=yield fetch(l,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:d.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:be.InternalError,errorMessage:`Failed to publish DID document for: ${r.uri}`}}}})}static resolve(e){return yu(this,arguments,void 0,function*(r,n={}){var s,i;let o=it.parse(r);if(!o)return Object.assign(Object.assign({},ur),{didResolutionMetadata:{error:"invalidDid"}});if(o.method!==t.methodName)return Object.assign(Object.assign({},ur),{didResolutionMetadata:{error:"methodNotSupported"}});let a=(s=n?.gatewayUri)!==null&&s!==void 0?s:xk;try{let u=Wc.appendPathToUrl({baseUrl:a,path:`/identifiers/${r}`}),c=yield fetch(u);if(!c.ok)throw new Se(be.NotFound,`Unable to find DID document for: ${r}`);let{didDocument:l,didDocumentMetadata:d}=yield c.json();return Object.assign(Object.assign(Object.assign({},ur),l&&{didDocument:l}),{didDocumentMetadata:Object.assign({published:(i=d?.method)===null||i===void 0?void 0:i.published},d)})}catch(u){if(!(u instanceof Se))throw new Error(u);return Object.assign(Object.assign({},ur),{didResolutionMetadata:Object.assign({error:u.code},u.message&&{errorMessage:u.message})})}})}};Hh.methodName="ion";var Wc=class t{static appendPathToUrl({baseUrl:e,path:r}){let n=new URL(e);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static computeLongFormDidUri(e){return yu(this,arguments,void 0,function*({recoveryKey:r,updateKey:n,services:s,verificationMethods:i}){let o=yield t.createIonDocument({services:s,verificationMethods:i}),a=t.normalizeJwk(r),u=t.normalizeJwk(n);return yield Zd.createLongFormDid({document:o,recoveryKey:a,updateKey:u})})}static constructCreateRequest(e){return yu(this,arguments,void 0,function*({ionDocument:r,recoveryKey:n,updateKey:s}){return yield hu.createCreateRequest({document:r,recoveryKey:t.normalizeJwk(n),updateKey:t.normalizeJwk(s)})})}static createIonDocument(e){return yu(this,arguments,void 0,function*({services:r,verificationMethods:n}){var s,i;let o=[];for(let c of n){let l=(i=(s=c.id)!==null&&s!==void 0?s:c.publicKeyJwk.kid)!==null&&i!==void 0?i:yield He({jwk:c.publicKeyJwk});l=`${l.split("#").pop()}`;let d={id:l,publicKeyJwk:t.normalizeJwk(c.publicKeyJwk),purposes:c.purposes,type:"JsonWebKey2020"};o.push(d)}let a=r.map(c=>Object.assign(Object.assign({},c),{id:`${c.id.split("#").pop()}`}));return{publicKeys:o,services:a}})}static normalizeJwk(e){let r=e.kty,n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);return n}};var vv=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Wh=class t extends Ri{static create(){return vv(this,arguments,void 0,function*({keyManager:e=new mn,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",u=yield e.generateKey({algorithm:a}),c=yield e.getPublicKey({keyUri:u}),l=ge.object(c).toBase64Url(),d=`did:${t.methodName}:${l}`,f=(yield t.resolve(d)).didDocument;return new Jn({uri:d,document:f,metadata:{},keyManager:e})})}static getSigningMethod(e){return vv(this,arguments,void 0,function*({didDocument:r}){var n;let s=it.parse(r.id);if(s&&s.method!==this.methodName)throw new Se(be.MethodNotSupported,`Method not supported: ${s.method}`);let[i]=(n=r.verificationMethod)!==null&&n!==void 0?n:[];if(!(i&&i.publicKeyJwk))throw new Se(be.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static import(e){return vv(this,arguments,void 0,function*({portableDid:r,keyManager:n=new mn}){let s=it.parse(r.uri);if(s?.method!==t.methodName)throw new Se(be.MethodNotSupported,"Method not supported");let i=yield Jn.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new Se(be.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(e,r){return vv(this,void 0,void 0,function*(){let n=it.parse(e),s;try{s=ge.base64Url(n.id).toObject()}catch{}if(!n||!s)return Object.assign(Object.assign({},ur),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==t.methodName)return Object.assign(Object.assign({},ur),{didResolutionMetadata:{error:"methodNotSupported"}});let i={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},o=`${i.id}#0`;switch(i.verificationMethod=[{id:o,type:"JsonWebKey",controller:i.id,publicKeyJwk:s}],i.authentication=[o],i.assertionMethod=[o],i.capabilityInvocation=[o],i.capabilityDelegation=[o],i.keyAgreement=[o],s.use){case"sig":{delete i.keyAgreement;break}case"enc":{delete i.authentication,delete i.assertionMethod,delete i.capabilityInvocation,delete i.capabilityDelegation;break}}return Object.assign(Object.assign({},ur),{didDocument:i})})}};Wh.methodName="jwk";var hs=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},da;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(da||(da={}));var NA={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},fie={Ed25519:da.Ed25519,ES256K:da.secp256k1,ES256:da.secp256r1,"P-256":da.secp256r1,secp256k1:da.secp256k1,secp256r1:da.secp256r1,X25519:da.X25519},Gh=class t extends Ri{static create(){return hs(this,arguments,void 0,function*({keyManager:e=new mn,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",u=yield e.generateKey({algorithm:a}),c=yield e.getPublicKey({keyUri:u}),l=yield Gn.publicKeyToMultibaseId({publicKey:c}),d=`did:${t.methodName}:${l}`,f=(yield t.resolve(d,r)).didDocument;return new Jn({uri:d,document:f,metadata:{},keyManager:e})})}static getSigningMethod(e){return hs(this,arguments,void 0,function*({didDocument:r}){var n;let s=it.parse(r.id);if(s&&s.method!==this.methodName)throw new Se(be.MethodNotSupported,`Method not supported: ${s.method}`);let[i]=r.assertionMethod||[],o=(n=r.verificationMethod)===null||n===void 0?void 0:n.find(a=>a.id===i);if(!(o&&o.publicKeyJwk))throw new Se(be.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return hs(this,arguments,void 0,function*({portableDid:r,keyManager:n=new mn}){let s=it.parse(r.uri);if(s?.method!==t.methodName)throw new Se(be.MethodNotSupported,"Method not supported");let i=yield Jn.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new Se(be.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(e,r){return hs(this,void 0,void 0,function*(){try{let n=yield t.createDocument({didUri:e,options:r});return Object.assign(Object.assign({},ur),{didDocument:n})}catch(n){if(!(n instanceof Se))throw new Error(n);return Object.assign(Object.assign({},ur),{didResolutionMetadata:Object.assign({error:n.code},n.message&&{errorMessage:n.message})})}})}static createDocument(e){return hs(this,arguments,void 0,function*({didUri:r,options:n={}}){let{defaultContext:s="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:i=!1,enableExperimentalPublicKeyTypes:o=!1,publicKeyFormat:a="JsonWebKey2020"}=n,u={id:""},c=it.parse(r);if(!c)throw new Se(be.InvalidDid,`Invalid DID URI: ${r}`);let l=c.id;if(c.method!==t.methodName)throw new Se(be.MethodNotSupported,`Method not supported: ${c.method}`);if(!t.validateIdentifier(c))throw new Se(be.InvalidDid,`Invalid DID URI: ${r}`);let d=yield t.createSignatureMethod({didUri:r,multibaseValue:l,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:a}});if(u.id=c.uri,u.verificationMethod=[d],u.authentication=[d.id],u.assertionMethod=[d.id],u.capabilityInvocation=[d.id],u.capabilityDelegation=[d.id],i===!0){let h=a==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",m=yield this.createEncryptionMethod({didUri:r,multibaseValue:l,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:h}});u.verificationMethod.push(m),u.keyAgreement=[m.id]}let p=[s];return sA({didDocument:u}).forEach(h=>{let m=NA[h];p.push(m)}),u["@context"]=p,u})}static createEncryptionMethod(e){return hs(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){let{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:u,multicodecCode:c}=yield t.deriveEncryptionKey({multibaseValue:n}),l=u.byteLength,d=Gn.MULTICODEC_PUBLIC_KEY_LENGTH[c];if(l!==d)throw new Se(be.InvalidPublicKeyLength,`Expected ${l} bytes. Actual: ${d}`);let p=Vg({keyBytes:u,multicodecCode:c});a.id=`${r}#${p}`;try{new URL(a.id)}catch{throw new Se(be.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in NA))throw new Se(be.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(o))throw new Se(be.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="X25519KeyAgreementKey2020"&&(a.publicKeyMultibase=p),o==="JsonWebKey2020"){let{crv:h}=yield Gn.multicodecToJwk({code:c});a.publicKeyJwk=yield Gn.keyConverter(h).bytesToPublicKey({publicKeyBytes:u})}return a})}static createSignatureMethod(e){return hs(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){let{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:u,multicodecCode:c,multicodecName:l}=zg({multibaseKeyId:n}),d=u.byteLength,p=Gn.MULTICODEC_PUBLIC_KEY_LENGTH[c];if(d!==p)throw new Se(be.InvalidPublicKeyLength,`Expected ${d} bytes. Actual: ${p}`);let f=!1;switch(l){case"secp256k1-pub":f=yield Ur.validatePublicKey({publicKeyBytes:u});break;case"ed25519-pub":f=yield Rr.validatePublicKey({publicKeyBytes:u});break;case"x25519-pub":f=!0;break}if(!f)throw new Se(be.InvalidPublicKey,"Invalid public key detected.");a.id=`${r}#${n}`;try{new URL(a.id)}catch{throw new Se(be.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in NA))throw new Se(be.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(o))throw new Se(be.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="Ed25519VerificationKey2020"&&(a.publicKeyMultibase=n),o==="JsonWebKey2020"){let{crv:m}=yield Gn.multicodecToJwk({code:c});a.publicKeyJwk=yield Gn.keyConverter(m).bytesToPublicKey({publicKeyBytes:u})}return a})}static deriveEncryptionKey(e){return hs(this,arguments,void 0,function*({multibaseValue:r}){let n={keyBytes:new Uint8Array,multicodecCode:0},{keyBytes:s,multicodecCode:i}=zg({multibaseKeyId:r});if(i===237){let o=yield Gn.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:s}),a=yield Rr.convertPublicKeyToX25519({publicKey:o});n={keyBytes:yield Gn.keyConverter("Ed25519").publicKeyToBytes({publicKey:a}),multicodecCode:236}}return n})}static validateIdentifier(e){let{method:r,id:n}=e,[s]=e.uri.split(":",1);return s==="did"&&r==="key"&&Number("1")>0&&Fd(n)==="String"&&n.startsWith("z")}};Gh.methodName="key";var Gn=class t{static jwkToMulticodec(e){return hs(this,arguments,void 0,function*({jwk:r}){let n=[];r.crv&&(n.push(r.crv),r.d?n.push("private"):n.push("public"));let s=n.join(":"),i=t.JWK_TO_MULTICODEC[s];if(i===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${s}'`);return{code:yn.getCodeFromName({name:i}),name:i}})}static keyCompressor(e){let n={"P-256":nn.compressPublicKey,secp256k1:Ur.compressPublicKey}[e];if(!n)throw new Se(be.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static keyConverter(e){let n={Ed25519:Rr,"P-256":nn,secp256k1:Ur,X25519:qd}[e];if(!n)throw new Se(be.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static multicodecToJwk(e){return hs(this,arguments,void 0,function*({code:r,name:n}){if(!(n?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");n=n===void 0?yn.getNameFromCode({code:r}):n;let s=n,i=t.MULTICODEC_TO_JWK[s];if(i===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},i)})}static publicKeyToMultibaseId(e){return hs(this,arguments,void 0,function*({publicKey:r}){var n;if(!(r?.crv&&r.crv in fie))throw new Se(be.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(n=r?.crv)!==null&&n!==void 0?n:"undefined"}`);let s=yield t.keyConverter(r.crv).publicKeyToBytes({publicKey:r});/^(secp256k1|P-256|P-384|P-521)$/.test(r.crv)&&(s=yield t.keyCompressor(r.crv)({publicKeyBytes:s}));let{name:i}=yield t.jwkToMulticodec({jwk:r});return Vg({keyBytes:s,multicodecName:i})})}};Gn.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};Gn.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};Gn.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};var pie=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Zh=class t extends Ri{static resolve(e,r){return pie(this,void 0,void 0,function*(){let n=it.parse(e);if(!n)return Object.assign(Object.assign({},ur),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==t.methodName)return Object.assign(Object.assign({},ur),{didResolutionMetadata:{error:"methodNotSupported"}});let s=`https://${n.id.replace(/:/g,"/")}`;s=decodeURIComponent(s);let i=n.id.includes(":")?`${s}/did.json`:`${s}/.well-known/did.json`;try{let o=yield fetch(i);if(!o.ok)throw new Error("HTTP error status code returned");let a=yield o.json();return Object.assign(Object.assign({},ur),{didDocument:a})}catch{return Object.assign(Object.assign({},ur),{didResolutionMetadata:{error:"notFound"}})}})}};Zh.methodName="web";var bie=qn(Ck(),1),wie=qn(Z_(),1);var Pk={get:function(t){return null},set:function(t,e){return null},delete:function(t){return null},clear:function(){return null},close:function(){return null}};var Ok=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},wv=class{constructor({cache:e,didResolvers:r}){this.didResolvers=new Map,this.cache=e||Pk;for(let n of r)this.didResolvers.set(n.methodName,n)}resolve(e,r){return Ok(this,void 0,void 0,function*(){let n=it.parse(e);if(!n)return Object.assign(Object.assign({},ur),{didResolutionMetadata:{error:be.InvalidDid,errorMessage:`Invalid DID URI: ${e}`}});let s=this.didResolvers.get(n.method);if(!s)return Object.assign(Object.assign({},ur),{didResolutionMetadata:{error:be.MethodNotSupported,errorMessage:`Method not supported: ${n.method}`}});let i=yield this.cache.get(n.uri);if(i)return i;{let o=yield s.resolve(n.uri,r);return o.didResolutionMetadata.error||(yield this.cache.set(n.uri,o)),o}})}dereference(e,r){return Ok(this,void 0,void 0,function*(){let n=it.parse(e);if(!n)return{dereferencingMetadata:{error:be.InvalidDidUrl},contentStream:null,contentMetadata:{}};let{didDocument:s,didResolutionMetadata:i,didDocumentMetadata:o}=yield this.resolve(n.uri);if(!s)return{dereferencingMetadata:{error:i.error},contentStream:null,contentMetadata:{}};if(!n.fragment||n.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:s,contentMetadata:o};let{service:a=[],verificationMethod:u=[]}=s,c=new Set([e,n.fragment,`#${n.fragment}`]),l;for(let d of u)if(c.has(d.id)){l=d;break}for(let d of a)if(c.has(d.id)){l=d;break}return l?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:l,contentMetadata:i}:{dereferencingMetadata:{error:be.NotFound},contentStream:null,contentMetadata:{}}})}};var _ie=new Fg,Xh=class Xh{static async sign(e){let{signerDid:r,payload:n}=e,s=await r.getSigner(),i=s.keyId;i.charAt(0)==="#"&&(i=`${r.uri}${i}`);let o={alg:s.algorithm,kid:i,...e.header},a=Ce.object(o).toBase64Url(),u=Ce.object(n).toBase64Url(),c=`${a}.${u}`,l=Ce.string(c).toUint8Array(),d=await s.sign({data:l}),p=Ce.uint8Array(d).toBase64Url();return`${c}.${p}`}static async verify(e){let{decoded:r,encoded:n}=Xh.parse({jwt:e.jwt});if(r.payload.exp&&Math.floor(Date.now()/1e3)>r.payload.exp)throw new Error("Verification failed: JWT is expired");let s=await Xh.didResolver.dereference(r.header.kid);if(s.dereferencingMetadata.error)throw new Error(`Failed to resolve ${r.header.kid}`);let i=s.contentStream;if(!i||!Jg.isDidVerificationMethod(i))throw new Error("Verification failed: Expected kid in JWT header to dereference a DID Document Verification Method");let o=i.publicKeyJwk;if(!o)throw new Error("Verification failed: Expected kid in JWT header to dereference to a DID Document Verification Method with publicKeyJwk");if(o.alg&&o.alg!==r.header.alg)throw new Error("Verification failed: Expected alg in JWT header to match DID Document Verification Method alg");let a=`${n.header}.${n.payload}`,u=Ce.string(a).toUint8Array(),c=Ce.base64Url(n.signature).toUint8Array();if(!await _ie.verify({key:o,signature:c,data:u}))throw new Error("Signature verification failed: Integrity mismatch");return r}static parse(e){let r=e.jwt.split(".");if(r.length!==3)throw new Error(`Verification failed: Malformed JWT. expected 3 parts. got ${r.length}`);let[n,s,i]=r,o,a;try{o=Ce.base64Url(n).toObject()}catch{throw new Error("Verification failed: Malformed JWT. Invalid base64url encoding for JWT header")}if(!o.alg||!o.kid)throw new Error("Verification failed: Expected JWT header to contain alg and kid");try{a=Ce.base64Url(s).toObject()}catch{throw new Error("Verification failed: Malformed JWT. Invalid base64url encoding for JWT payload")}return{decoded:{header:o,payload:a},encoded:{header:n,payload:s,signature:i}}}};Xh.didResolver=new wv({didResolvers:[Jc,Hh,Gh,Wh,Zh]});var ao=Xh;var Il=qn(MV(),1),kO=class{static selectCredentials({vcJwts:e,presentationDefinition:r}){this.resetPex();let n=this.pex.selectFrom(r,e);return n.errors?.length!==0?[]:Array.from(new Set(n.verifiableCredential??[]))}static satisfiesPresentationDefinition({vcJwts:e,presentationDefinition:r}){this.resetPex();let n=this.pex.evaluateCredentials(r,e);if(n.warnings?.length&&console.warn("Warnings were generated during the evaluation process: "+JSON.stringify(n.warnings)),n.areRequiredCredentialsPresent.toString()!=="info"||n.errors?.length){let s="Failed to create Verifiable Presentation JWT due to: ";throw n.areRequiredCredentialsPresent&&(s+="Required Credentials Not Present: "+JSON.stringify(n.areRequiredCredentialsPresent)),n.errors?.length&&(s+="Errors: "+JSON.stringify(n.errors)),new Error(s)}}static createPresentationFromCredentials({vcJwts:e,presentationDefinition:r}){this.resetPex();let n=Il.PEX.validateDefinition(r);qV(n);let s=this.pex.evaluateCredentials(r,e);if(s.warnings?.length&&console.warn("Warnings were generated during the evaluation process: "+JSON.stringify(s.warnings)),s.areRequiredCredentialsPresent.toString()!=="info"||s.errors?.length){let a="Failed to create Verifiable Presentation JWT due to: ";throw s.areRequiredCredentialsPresent&&(a+="Required Credentials Not Present: "+JSON.stringify(s.areRequiredCredentialsPresent)),s.errors?.length&&(a+="Errors: "+JSON.stringify(s.errors)),new Error(a)}let i=this.pex.presentationFrom(r,e),o=Il.PEX.validateSubmission(i.presentationSubmission);return qV(o),i}static validateDefinition({presentationDefinition:e}){return Il.PEX.validateDefinition(e)}static validateSubmission({presentationSubmission:e}){return Il.PEX.validateSubmission(e)}static evaluatePresentation({presentationDefinition:e,presentation:r}){return this.resetPex(),this.pex.evaluatePresentation(e,r)}static resetPex(){this.pex=new Il.PEX}};kO.pex=new Il.PEX;function qV(t){let e="Failed to pass validation check due to: ";if(Array.isArray(t)){if(!t.every(r=>r.status==="info"))throw e+="Validation Errors: "+JSON.stringify(t),new Error(e)}else if(t.status!=="info")throw e+="Validation Errors: "+JSON.stringify(t),new Error(e)}function pp(t){let e=t.length;for(;--e>=0;)t[e]=0}var zwe=0,xz=1,Jwe=2,Hwe=3,Wwe=258,iT=29,Um=256,km=Um+1+iT,lp=30,sT=19,Dz=2*km+1,Fl=15,RO=16,Gwe=7,oT=256,Cz=16,Pz=17,Oz=18,GO=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),m1=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Zwe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Tz=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xwe=512,Ra=new Array((km+2)*2);pp(Ra);var Bm=new Array(lp*2);pp(Bm);var Rm=new Array(Xwe);pp(Rm);var $m=new Array(Wwe-Hwe+1);pp($m);var aT=new Array(iT);pp(aT);var g1=new Array(lp);pp(g1);function $O(t,e,r,n,s){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=s,this.has_stree=t&&t.length}var Bz,Iz,Fz;function jO(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}var kz=t=>t<256?Rm[t]:Rm[256+(t>>>7)],jm=(t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},ti=(t,e,r)=>{t.bi_valid>RO-r?(t.bi_buf|=e<<t.bi_valid&65535,jm(t,t.bi_buf),t.bi_buf=e>>RO-t.bi_valid,t.bi_valid+=r-RO):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},Do=(t,e,r)=>{ti(t,r[e*2],r[e*2+1])},Rz=(t,e)=>{let r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1},Ywe=t=>{t.bi_valid===16?(jm(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},Qwe=(t,e)=>{let r=e.dyn_tree,n=e.max_code,s=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,u=e.stat_desc.max_length,c,l,d,p,f,h,m=0;for(p=0;p<=Fl;p++)t.bl_count[p]=0;for(r[t.heap[t.heap_max]*2+1]=0,c=t.heap_max+1;c<Dz;c++)l=t.heap[c],p=r[r[l*2+1]*2+1]+1,p>u&&(p=u,m++),r[l*2+1]=p,!(l>n)&&(t.bl_count[p]++,f=0,l>=a&&(f=o[l-a]),h=r[l*2],t.opt_len+=h*(p+f),i&&(t.static_len+=h*(s[l*2+1]+f)));if(m!==0){do{for(p=u-1;t.bl_count[p]===0;)p--;t.bl_count[p]--,t.bl_count[p+1]+=2,t.bl_count[u]--,m-=2}while(m>0);for(p=u;p!==0;p--)for(l=t.bl_count[p];l!==0;)d=t.heap[--c],!(d>n)&&(r[d*2+1]!==p&&(t.opt_len+=(p-r[d*2+1])*r[d*2],r[d*2+1]=p),l--)}},$z=(t,e,r)=>{let n=new Array(Fl+1),s=0,i,o;for(i=1;i<=Fl;i++)s=s+r[i-1]<<1,n[i]=s;for(o=0;o<=e;o++){let a=t[o*2+1];a!==0&&(t[o*2]=Rz(n[a]++,a))}},e1e=()=>{let t,e,r,n,s,i=new Array(Fl+1);for(r=0,n=0;n<iT-1;n++)for(aT[n]=r,t=0;t<1<<GO[n];t++)$m[r++]=n;for($m[r-1]=n,s=0,n=0;n<16;n++)for(g1[n]=s,t=0;t<1<<m1[n];t++)Rm[s++]=n;for(s>>=7;n<lp;n++)for(g1[n]=s<<7,t=0;t<1<<m1[n]-7;t++)Rm[256+s++]=n;for(e=0;e<=Fl;e++)i[e]=0;for(t=0;t<=143;)Ra[t*2+1]=8,t++,i[8]++;for(;t<=255;)Ra[t*2+1]=9,t++,i[9]++;for(;t<=279;)Ra[t*2+1]=7,t++,i[7]++;for(;t<=287;)Ra[t*2+1]=8,t++,i[8]++;for($z(Ra,km+1,i),t=0;t<lp;t++)Bm[t*2+1]=5,Bm[t*2]=Rz(t,5);Bz=new $O(Ra,GO,Um+1,km,Fl),Iz=new $O(Bm,m1,0,lp,Fl),Fz=new $O(new Array(0),Zwe,0,sT,Gwe)},jz=t=>{let e;for(e=0;e<km;e++)t.dyn_ltree[e*2]=0;for(e=0;e<lp;e++)t.dyn_dtree[e*2]=0;for(e=0;e<sT;e++)t.bl_tree[e*2]=0;t.dyn_ltree[oT*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},Nz=t=>{t.bi_valid>8?jm(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},LV=(t,e,r,n)=>{let s=e*2,i=r*2;return t[s]<t[i]||t[s]===t[i]&&n[e]<=n[r]},NO=(t,e,r)=>{let n=t.heap[r],s=r<<1;for(;s<=t.heap_len&&(s<t.heap_len&&LV(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!LV(e,n,t.heap[s],t.depth));)t.heap[r]=t.heap[s],r=s,s<<=1;t.heap[r]=n},UV=(t,e,r)=>{let n,s,i=0,o,a;if(t.sym_next!==0)do n=t.pending_buf[t.sym_buf+i++]&255,n+=(t.pending_buf[t.sym_buf+i++]&255)<<8,s=t.pending_buf[t.sym_buf+i++],n===0?Do(t,s,e):(o=$m[s],Do(t,o+Um+1,e),a=GO[o],a!==0&&(s-=aT[o],ti(t,s,a)),n--,o=kz(n),Do(t,o,r),a=m1[o],a!==0&&(n-=g1[o],ti(t,n,a)));while(i<t.sym_next);Do(t,oT,e)},ZO=(t,e)=>{let r=e.dyn_tree,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,i=e.stat_desc.elems,o,a,u=-1,c;for(t.heap_len=0,t.heap_max=Dz,o=0;o<i;o++)r[o*2]!==0?(t.heap[++t.heap_len]=u=o,t.depth[o]=0):r[o*2+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=u<2?++u:0,r[c*2]=1,t.depth[c]=0,t.opt_len--,s&&(t.static_len-=n[c*2+1]);for(e.max_code=u,o=t.heap_len>>1;o>=1;o--)NO(t,r,o);c=i;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],NO(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,r[c*2]=r[o*2]+r[a*2],t.depth[c]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,r[o*2+1]=r[a*2+1]=c,t.heap[1]=c++,NO(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],Qwe(t,e),$z(r,u,t.bl_count)},KV=(t,e,r)=>{let n,s=-1,i,o=e[0*2+1],a=0,u=7,c=4;for(o===0&&(u=138,c=3),e[(r+1)*2+1]=65535,n=0;n<=r;n++)i=o,o=e[(n+1)*2+1],!(++a<u&&i===o)&&(a<c?t.bl_tree[i*2]+=a:i!==0?(i!==s&&t.bl_tree[i*2]++,t.bl_tree[Cz*2]++):a<=10?t.bl_tree[Pz*2]++:t.bl_tree[Oz*2]++,a=0,s=i,o===0?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4))},VV=(t,e,r)=>{let n,s=-1,i,o=e[0*2+1],a=0,u=7,c=4;for(o===0&&(u=138,c=3),n=0;n<=r;n++)if(i=o,o=e[(n+1)*2+1],!(++a<u&&i===o)){if(a<c)do Do(t,i,t.bl_tree);while(--a!==0);else i!==0?(i!==s&&(Do(t,i,t.bl_tree),a--),Do(t,Cz,t.bl_tree),ti(t,a-3,2)):a<=10?(Do(t,Pz,t.bl_tree),ti(t,a-3,3)):(Do(t,Oz,t.bl_tree),ti(t,a-11,7));a=0,s=i,o===0?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4)}},t1e=t=>{let e;for(KV(t,t.dyn_ltree,t.l_desc.max_code),KV(t,t.dyn_dtree,t.d_desc.max_code),ZO(t,t.bl_desc),e=sT-1;e>=3&&t.bl_tree[Tz[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},r1e=(t,e,r,n)=>{let s;for(ti(t,e-257,5),ti(t,r-1,5),ti(t,n-4,4),s=0;s<n;s++)ti(t,t.bl_tree[Tz[s]*2+1],3);VV(t,t.dyn_ltree,e-1),VV(t,t.dyn_dtree,r-1)},n1e=t=>{let e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return 0;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return 1;for(r=32;r<Um;r++)if(t.dyn_ltree[r*2]!==0)return 1;return 0},zV=!1,i1e=t=>{zV||(e1e(),zV=!0),t.l_desc=new jO(t.dyn_ltree,Bz),t.d_desc=new jO(t.dyn_dtree,Iz),t.bl_desc=new jO(t.bl_tree,Fz),t.bi_buf=0,t.bi_valid=0,jz(t)},Mz=(t,e,r,n)=>{ti(t,(zwe<<1)+(n?1:0),3),Nz(t),jm(t,r),jm(t,~r),r&&t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r},s1e=t=>{ti(t,xz<<1,3),Do(t,oT,Ra),Ywe(t)},o1e=(t,e,r,n)=>{let s,i,o=0;t.level>0?(t.strm.data_type===2&&(t.strm.data_type=n1e(t)),ZO(t,t.l_desc),ZO(t,t.d_desc),o=t1e(t),s=t.opt_len+3+7>>>3,i=t.static_len+3+7>>>3,i<=s&&(s=i)):s=i=r+5,r+4<=s&&e!==-1?Mz(t,e,r,n):t.strategy===4||i===s?(ti(t,(xz<<1)+(n?1:0),3),UV(t,Ra,Bm)):(ti(t,(Jwe<<1)+(n?1:0),3),r1e(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),UV(t,t.dyn_ltree,t.dyn_dtree)),jz(t),n&&Nz(t)},a1e=(t,e,r)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[($m[r]+Um+1)*2]++,t.dyn_dtree[kz(e)*2]++),t.sym_next===t.sym_end),u1e=i1e,c1e=Mz,l1e=o1e,d1e=a1e,f1e=s1e,p1e={_tr_init:u1e,_tr_stored_block:c1e,_tr_flush_block:l1e,_tr_tally:d1e,_tr_align:f1e},h1e=(t,e,r,n)=>{let s=t&65535|0,i=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do s=s+e[n++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0},Nm=h1e,y1e=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},m1e=new Uint32Array(y1e()),g1e=(t,e,r,n)=>{let s=m1e,i=n+r;t^=-1;for(let o=n;o<i;o++)t=t>>>8^s[(t^e[o])&255];return t^-1},Zr=g1e,$l={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ml={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:v1e,_tr_stored_block:XO,_tr_flush_block:b1e,_tr_tally:Ju,_tr_align:w1e}=p1e,{Z_NO_FLUSH:Hu,Z_PARTIAL_FLUSH:_1e,Z_FULL_FLUSH:E1e,Z_FINISH:Zi,Z_BLOCK:JV,Z_OK:fn,Z_STREAM_END:HV,Z_STREAM_ERROR:Co,Z_DATA_ERROR:S1e,Z_BUF_ERROR:MO,Z_DEFAULT_COMPRESSION:A1e,Z_FILTERED:x1e,Z_HUFFMAN_ONLY:d1,Z_RLE:D1e,Z_FIXED:C1e,Z_DEFAULT_STRATEGY:P1e,Z_UNKNOWN:O1e,Z_DEFLATED:w1}=Ml,T1e=9,B1e=15,I1e=8,F1e=29,k1e=256,YO=k1e+1+F1e,R1e=30,$1e=19,j1e=2*YO+1,N1e=15,bt=3,zu=258,Po=zu+bt+1,M1e=32,dp=42,uT=57,QO=69,eT=73,tT=91,rT=103,kl=113,Om=666,jn=1,hp=2,jl=3,yp=4,q1e=3,Rl=(t,e)=>(t.msg=$l[e],e),WV=t=>t*2-(t>4?9:0),Vu=t=>{let e=t.length;for(;--e>=0;)t[e]=0},L1e=t=>{let e,r,n,s=t.w_size;e=t.hash_size,n=e;do r=t.head[--n],t.head[n]=r>=s?r-s:0;while(--e);e=s,n=e;do r=t.prev[--n],t.prev[n]=r>=s?r-s:0;while(--e)},U1e=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask,Wu=U1e,yi=t=>{let e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))},mi=(t,e)=>{b1e(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,yi(t.strm)},kt=(t,e)=>{t.pending_buf[t.pending++]=e},Pm=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},nT=(t,e,r,n)=>{let s=t.avail_in;return s>n&&(s=n),s===0?0:(t.avail_in-=s,e.set(t.input.subarray(t.next_in,t.next_in+s),r),t.state.wrap===1?t.adler=Nm(t.adler,e,s,r):t.state.wrap===2&&(t.adler=Zr(t.adler,e,s,r)),t.next_in+=s,t.total_in+=s,s)},qz=(t,e)=>{let r=t.max_chain_length,n=t.strstart,s,i,o=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-Po?t.strstart-(t.w_size-Po):0,c=t.window,l=t.w_mask,d=t.prev,p=t.strstart+zu,f=c[n+o-1],h=c[n+o];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do if(s=e,!(c[s+o]!==h||c[s+o-1]!==f||c[s]!==c[n]||c[++s]!==c[n+1])){n+=2,s++;do;while(c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&n<p);if(i=zu-(p-n),n=p-zu,i>o){if(t.match_start=e,o=i,i>=a)break;f=c[n+o-1],h=c[n+o]}}while((e=d[e&l])>u&&--r!==0);return o<=t.lookahead?o:t.lookahead},fp=t=>{let e=t.w_size,r,n,s;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Po)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),L1e(t),n+=e),t.strm.avail_in===0)break;if(r=nT(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=r,t.lookahead+t.insert>=bt)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=Wu(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=Wu(t,t.ins_h,t.window[s+bt-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<bt)););}while(t.lookahead<Po&&t.strm.avail_in!==0)},Lz=(t,e)=>{let r=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,n,s,i,o=0,a=t.strm.avail_in;do{if(n=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i||(i=t.strm.avail_out-i,s=t.strstart-t.block_start,n>s+t.strm.avail_in&&(n=s+t.strm.avail_in),n>i&&(n=i),n<r&&(n===0&&e!==Zi||e===Hu||n!==s+t.strm.avail_in)))break;o=e===Zi&&n===s+t.strm.avail_in?1:0,XO(t,0,0,o),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,yi(t.strm),s&&(s>n&&(s=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+s),t.strm.next_out),t.strm.next_out+=s,t.strm.avail_out-=s,t.strm.total_out+=s,t.block_start+=s,n-=s),n&&(nT(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(o===0);return a-=t.strm.avail_in,a&&(a>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=a&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-a,t.strm.next_in),t.strstart),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?yp:e!==Hu&&e!==Zi&&t.strm.avail_in===0&&t.strstart===t.block_start?hp:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(nT(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,r=i>t.w_size?t.w_size:i,s=t.strstart-t.block_start,(s>=r||(s||e===Zi)&&e!==Hu&&t.strm.avail_in===0&&s<=i)&&(n=s>i?i:s,o=e===Zi&&t.strm.avail_in===0&&n===s?1:0,XO(t,t.block_start,n,o),t.block_start+=n,yi(t.strm)),o?jl:jn)},qO=(t,e)=>{let r,n;for(;;){if(t.lookahead<Po){if(fp(t),t.lookahead<Po&&e===Hu)return jn;if(t.lookahead===0)break}if(r=0,t.lookahead>=bt&&(t.ins_h=Wu(t,t.ins_h,t.window[t.strstart+bt-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-Po&&(t.match_length=qz(t,r)),t.match_length>=bt)if(n=Ju(t,t.strstart-t.match_start,t.match_length-bt),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=bt){t.match_length--;do t.strstart++,t.ins_h=Wu(t,t.ins_h,t.window[t.strstart+bt-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Wu(t,t.ins_h,t.window[t.strstart+1]);else n=Ju(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(mi(t,!1),t.strm.avail_out===0))return jn}return t.insert=t.strstart<bt-1?t.strstart:bt-1,e===Zi?(mi(t,!0),t.strm.avail_out===0?jl:yp):t.sym_next&&(mi(t,!1),t.strm.avail_out===0)?jn:hp},up=(t,e)=>{let r,n,s;for(;;){if(t.lookahead<Po){if(fp(t),t.lookahead<Po&&e===Hu)return jn;if(t.lookahead===0)break}if(r=0,t.lookahead>=bt&&(t.ins_h=Wu(t,t.ins_h,t.window[t.strstart+bt-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=bt-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-Po&&(t.match_length=qz(t,r),t.match_length<=5&&(t.strategy===x1e||t.match_length===bt&&t.strstart-t.match_start>4096)&&(t.match_length=bt-1)),t.prev_length>=bt&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-bt,n=Ju(t,t.strstart-1-t.prev_match,t.prev_length-bt),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=s&&(t.ins_h=Wu(t,t.ins_h,t.window[t.strstart+bt-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=bt-1,t.strstart++,n&&(mi(t,!1),t.strm.avail_out===0))return jn}else if(t.match_available){if(n=Ju(t,0,t.window[t.strstart-1]),n&&mi(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return jn}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Ju(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<bt-1?t.strstart:bt-1,e===Zi?(mi(t,!0),t.strm.avail_out===0?jl:yp):t.sym_next&&(mi(t,!1),t.strm.avail_out===0)?jn:hp},K1e=(t,e)=>{let r,n,s,i,o=t.window;for(;;){if(t.lookahead<=zu){if(fp(t),t.lookahead<=zu&&e===Hu)return jn;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=bt&&t.strstart>0&&(s=t.strstart-1,n=o[s],n===o[++s]&&n===o[++s]&&n===o[++s])){i=t.strstart+zu;do;while(n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&s<i);t.match_length=zu-(i-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=bt?(r=Ju(t,1,t.match_length-bt),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=Ju(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(mi(t,!1),t.strm.avail_out===0))return jn}return t.insert=0,e===Zi?(mi(t,!0),t.strm.avail_out===0?jl:yp):t.sym_next&&(mi(t,!1),t.strm.avail_out===0)?jn:hp},V1e=(t,e)=>{let r;for(;;){if(t.lookahead===0&&(fp(t),t.lookahead===0)){if(e===Hu)return jn;break}if(t.match_length=0,r=Ju(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(mi(t,!1),t.strm.avail_out===0))return jn}return t.insert=0,e===Zi?(mi(t,!0),t.strm.avail_out===0?jl:yp):t.sym_next&&(mi(t,!1),t.strm.avail_out===0)?jn:hp};function xo(t,e,r,n,s){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=s}var Tm=[new xo(0,0,0,0,Lz),new xo(4,4,8,4,qO),new xo(4,5,16,8,qO),new xo(4,6,32,32,qO),new xo(4,4,16,16,up),new xo(8,16,32,32,up),new xo(8,16,128,128,up),new xo(8,32,128,256,up),new xo(32,128,258,1024,up),new xo(32,258,258,4096,up)],z1e=t=>{t.window_size=2*t.w_size,Vu(t.head),t.max_lazy_match=Tm[t.level].max_lazy,t.good_match=Tm[t.level].good_length,t.nice_match=Tm[t.level].nice_length,t.max_chain_length=Tm[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=bt-1,t.match_available=0,t.ins_h=0};function J1e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w1,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(j1e*2),this.dyn_dtree=new Uint16Array((2*R1e+1)*2),this.bl_tree=new Uint16Array((2*$1e+1)*2),Vu(this.dyn_ltree),Vu(this.dyn_dtree),Vu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(N1e+1),this.heap=new Uint16Array(2*YO+1),Vu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*YO+1),Vu(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Km=t=>{if(!t)return 1;let e=t.state;return!e||e.strm!==t||e.status!==dp&&e.status!==uT&&e.status!==QO&&e.status!==eT&&e.status!==tT&&e.status!==rT&&e.status!==kl&&e.status!==Om?1:0},Uz=t=>{if(Km(t))return Rl(t,Co);t.total_in=t.total_out=0,t.data_type=O1e;let e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?uT:e.wrap?dp:kl,t.adler=e.wrap===2?0:1,e.last_flush=-2,v1e(e),fn},Kz=t=>{let e=Uz(t);return e===fn&&z1e(t.state),e},H1e=(t,e)=>Km(t)||t.state.wrap!==2?Co:(t.state.gzhead=e,fn),Vz=(t,e,r,n,s,i)=>{if(!t)return Co;let o=1;if(e===A1e&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),s<1||s>T1e||r!==w1||n<8||n>15||e<0||e>9||i<0||i>C1e||n===8&&o!==1)return Rl(t,Co);n===8&&(n=9);let a=new J1e;return t.state=a,a.strm=t,a.status=dp,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+bt-1)/bt),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=i,a.method=r,Kz(t)},W1e=(t,e)=>Vz(t,e,w1,B1e,I1e,P1e),G1e=(t,e)=>{if(Km(t)||e>JV||e<0)return t?Rl(t,Co):Co;let r=t.state;if(!t.output||t.avail_in!==0&&!t.input||r.status===Om&&e!==Zi)return Rl(t,t.avail_out===0?MO:Co);let n=r.last_flush;if(r.last_flush=e,r.pending!==0){if(yi(t),t.avail_out===0)return r.last_flush=-1,fn}else if(t.avail_in===0&&WV(e)<=WV(n)&&e!==Zi)return Rl(t,MO);if(r.status===Om&&t.avail_in!==0)return Rl(t,MO);if(r.status===dp&&r.wrap===0&&(r.status=kl),r.status===dp){let s=w1+(r.w_bits-8<<4)<<8,i=-1;if(r.strategy>=d1||r.level<2?i=0:r.level<6?i=1:r.level===6?i=2:i=3,s|=i<<6,r.strstart!==0&&(s|=M1e),s+=31-s%31,Pm(r,s),r.strstart!==0&&(Pm(r,t.adler>>>16),Pm(r,t.adler&65535)),t.adler=1,r.status=kl,yi(t),r.pending!==0)return r.last_flush=-1,fn}if(r.status===uT){if(t.adler=0,kt(r,31),kt(r,139),kt(r,8),r.gzhead)kt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),kt(r,r.gzhead.time&255),kt(r,r.gzhead.time>>8&255),kt(r,r.gzhead.time>>16&255),kt(r,r.gzhead.time>>24&255),kt(r,r.level===9?2:r.strategy>=d1||r.level<2?4:0),kt(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(kt(r,r.gzhead.extra.length&255),kt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=Zr(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=QO;else if(kt(r,0),kt(r,0),kt(r,0),kt(r,0),kt(r,0),kt(r,r.level===9?2:r.strategy>=d1||r.level<2?4:0),kt(r,q1e),r.status=kl,yi(t),r.pending!==0)return r.last_flush=-1,fn}if(r.status===QO){if(r.gzhead.extra){let s=r.pending,i=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+i>r.pending_buf_size;){let a=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>s&&(t.adler=Zr(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex+=a,yi(t),r.pending!==0)return r.last_flush=-1,fn;s=0,i-=a}let o=new Uint8Array(r.gzhead.extra);r.pending_buf.set(o.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending+=i,r.gzhead.hcrc&&r.pending>s&&(t.adler=Zr(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex=0}r.status=eT}if(r.status===eT){if(r.gzhead.name){let s=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>s&&(t.adler=Zr(t.adler,r.pending_buf,r.pending-s,s)),yi(t),r.pending!==0)return r.last_flush=-1,fn;s=0}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,kt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>s&&(t.adler=Zr(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex=0}r.status=tT}if(r.status===tT){if(r.gzhead.comment){let s=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>s&&(t.adler=Zr(t.adler,r.pending_buf,r.pending-s,s)),yi(t),r.pending!==0)return r.last_flush=-1,fn;s=0}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,kt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>s&&(t.adler=Zr(t.adler,r.pending_buf,r.pending-s,s))}r.status=rT}if(r.status===rT){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(yi(t),r.pending!==0))return r.last_flush=-1,fn;kt(r,t.adler&255),kt(r,t.adler>>8&255),t.adler=0}if(r.status=kl,yi(t),r.pending!==0)return r.last_flush=-1,fn}if(t.avail_in!==0||r.lookahead!==0||e!==Hu&&r.status!==Om){let s=r.level===0?Lz(r,e):r.strategy===d1?V1e(r,e):r.strategy===D1e?K1e(r,e):Tm[r.level].func(r,e);if((s===jl||s===yp)&&(r.status=Om),s===jn||s===jl)return t.avail_out===0&&(r.last_flush=-1),fn;if(s===hp&&(e===_1e?w1e(r):e!==JV&&(XO(r,0,0,!1),e===E1e&&(Vu(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),yi(t),t.avail_out===0))return r.last_flush=-1,fn}return e!==Zi?fn:r.wrap<=0?HV:(r.wrap===2?(kt(r,t.adler&255),kt(r,t.adler>>8&255),kt(r,t.adler>>16&255),kt(r,t.adler>>24&255),kt(r,t.total_in&255),kt(r,t.total_in>>8&255),kt(r,t.total_in>>16&255),kt(r,t.total_in>>24&255)):(Pm(r,t.adler>>>16),Pm(r,t.adler&65535)),yi(t),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?fn:HV)},Z1e=t=>{if(Km(t))return Co;let e=t.state.status;return t.state=null,e===kl?Rl(t,S1e):fn},X1e=(t,e)=>{let r=e.length;if(Km(t))return Co;let n=t.state,s=n.wrap;if(s===2||s===1&&n.status!==dp||n.lookahead)return Co;if(s===1&&(t.adler=Nm(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){s===0&&(Vu(n.head),n.strstart=0,n.block_start=0,n.insert=0);let u=new Uint8Array(n.w_size);u.set(e.subarray(r-n.w_size,r),0),e=u,r=n.w_size}let i=t.avail_in,o=t.next_in,a=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,fp(n);n.lookahead>=bt;){let u=n.strstart,c=n.lookahead-(bt-1);do n.ins_h=Wu(n,n.ins_h,n.window[u+bt-1]),n.prev[u&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=u,u++;while(--c);n.strstart=u,n.lookahead=bt-1,fp(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=bt-1,n.match_available=0,t.next_in=o,t.input=a,t.avail_in=i,n.wrap=s,fn},Y1e=W1e,Q1e=Vz,e_e=Kz,t_e=Uz,r_e=H1e,n_e=G1e,i_e=Z1e,s_e=X1e,o_e="pako deflate (from Nodeca project)",Im={deflateInit:Y1e,deflateInit2:Q1e,deflateReset:e_e,deflateResetKeep:t_e,deflateSetHeader:r_e,deflate:n_e,deflateEnd:i_e,deflateSetDictionary:s_e,deflateInfo:o_e},a_e=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),u_e=function(t){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(let n in r)a_e(r,n)&&(t[n]=r[n])}}return t},c_e=t=>{let e=0;for(let n=0,s=t.length;n<s;n++)e+=t[n].length;let r=new Uint8Array(e);for(let n=0,s=0,i=t.length;n<i;n++){let o=t[n];r.set(o,s),s+=o.length}return r},_1={assign:u_e,flattenChunks:c_e},zz=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{zz=!1}var Mm=new Uint8Array(256);for(let t=0;t<256;t++)Mm[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Mm[254]=Mm[254]=1;var l_e=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,s,i,o=t.length,a=0;for(s=0;s<o;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<o&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(a),i=0,s=0;i<a;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<o&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?e[i++]=r:r<2048?(e[i++]=192|r>>>6,e[i++]=128|r&63):r<65536?(e[i++]=224|r>>>12,e[i++]=128|r>>>6&63,e[i++]=128|r&63):(e[i++]=240|r>>>18,e[i++]=128|r>>>12&63,e[i++]=128|r>>>6&63,e[i++]=128|r&63);return e},d_e=(t,e)=>{if(e<65534&&t.subarray&&zz)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r},f_e=(t,e)=>{let r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,s,i=new Array(r*2);for(s=0,n=0;n<r;){let o=t[n++];if(o<128){i[s++]=o;continue}let a=Mm[o];if(a>4){i[s++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<r;)o=o<<6|t[n++]&63,a--;if(a>1){i[s++]=65533;continue}o<65536?i[s++]=o:(o-=65536,i[s++]=55296|o>>10&1023,i[s++]=56320|o&1023)}return d_e(i,s)},p_e=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+Mm[t[r]]>e?r:e},qm={string2buf:l_e,buf2string:f_e,utf8border:p_e};function h_e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Jz=h_e,Hz=Object.prototype.toString,{Z_NO_FLUSH:y_e,Z_SYNC_FLUSH:m_e,Z_FULL_FLUSH:g_e,Z_FINISH:v_e,Z_OK:v1,Z_STREAM_END:b_e,Z_DEFAULT_COMPRESSION:w_e,Z_DEFAULT_STRATEGY:__e,Z_DEFLATED:E_e}=Ml;function Vm(t){this.options=_1.assign({level:w_e,method:E_e,chunkSize:16384,windowBits:15,memLevel:8,strategy:__e},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Jz,this.strm.avail_out=0;let r=Im.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==v1)throw new Error($l[r]);if(e.header&&Im.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=qm.string2buf(e.dictionary):Hz.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,r=Im.deflateSetDictionary(this.strm,n),r!==v1)throw new Error($l[r]);this._dict_set=!0}}Vm.prototype.push=function(t,e){let r=this.strm,n=this.options.chunkSize,s,i;if(this.ended)return!1;for(e===~~e?i=e:i=e===!0?v_e:y_e,typeof t=="string"?r.input=qm.string2buf(t):Hz.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(i===m_e||i===g_e)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(s=Im.deflate(r,i),s===b_e)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),s=Im.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===v1;if(r.avail_out===0){this.onData(r.output);continue}if(i>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};Vm.prototype.onData=function(t){this.chunks.push(t)};Vm.prototype.onEnd=function(t){t===v1&&(this.result=_1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function cT(t,e){let r=new Vm(e);if(r.push(t,!0),r.err)throw r.msg||$l[r.err];return r.result}function S_e(t,e){return e=e||{},e.raw=!0,cT(t,e)}function A_e(t,e){return e=e||{},e.gzip=!0,cT(t,e)}var x_e=Vm,D_e=cT,C_e=S_e,P_e=A_e,O_e=Ml,T_e={Deflate:x_e,deflate:D_e,deflateRaw:C_e,gzip:P_e,constants:O_e},f1=16209,B_e=16191,I_e=function(e,r){let n,s,i,o,a,u,c,l,d,p,f,h,m,g,_,D,v,E,S,P,C,B,F,I,$=e.state;n=e.next_in,F=e.input,s=n+(e.avail_in-5),i=e.next_out,I=e.output,o=i-(r-e.avail_out),a=i+(e.avail_out-257),u=$.dmax,c=$.wsize,l=$.whave,d=$.wnext,p=$.window,f=$.hold,h=$.bits,m=$.lencode,g=$.distcode,_=(1<<$.lenbits)-1,D=(1<<$.distbits)-1;e:do{h<15&&(f+=F[n++]<<h,h+=8,f+=F[n++]<<h,h+=8),v=m[f&_];t:for(;;){if(E=v>>>24,f>>>=E,h-=E,E=v>>>16&255,E===0)I[i++]=v&65535;else if(E&16){S=v&65535,E&=15,E&&(h<E&&(f+=F[n++]<<h,h+=8),S+=f&(1<<E)-1,f>>>=E,h-=E),h<15&&(f+=F[n++]<<h,h+=8,f+=F[n++]<<h,h+=8),v=g[f&D];r:for(;;){if(E=v>>>24,f>>>=E,h-=E,E=v>>>16&255,E&16){if(P=v&65535,E&=15,h<E&&(f+=F[n++]<<h,h+=8,h<E&&(f+=F[n++]<<h,h+=8)),P+=f&(1<<E)-1,P>u){e.msg="invalid distance too far back",$.mode=f1;break e}if(f>>>=E,h-=E,E=i-o,P>E){if(E=P-E,E>l&&$.sane){e.msg="invalid distance too far back",$.mode=f1;break e}if(C=0,B=p,d===0){if(C+=c-E,E<S){S-=E;do I[i++]=p[C++];while(--E);C=i-P,B=I}}else if(d<E){if(C+=c+d-E,E-=d,E<S){S-=E;do I[i++]=p[C++];while(--E);if(C=0,d<S){E=d,S-=E;do I[i++]=p[C++];while(--E);C=i-P,B=I}}}else if(C+=d-E,E<S){S-=E;do I[i++]=p[C++];while(--E);C=i-P,B=I}for(;S>2;)I[i++]=B[C++],I[i++]=B[C++],I[i++]=B[C++],S-=3;S&&(I[i++]=B[C++],S>1&&(I[i++]=B[C++]))}else{C=i-P;do I[i++]=I[C++],I[i++]=I[C++],I[i++]=I[C++],S-=3;while(S>2);S&&(I[i++]=I[C++],S>1&&(I[i++]=I[C++]))}}else if(E&64){e.msg="invalid distance code",$.mode=f1;break e}else{v=g[(v&65535)+(f&(1<<E)-1)];continue r}break}}else if(E&64)if(E&32){$.mode=B_e;break e}else{e.msg="invalid literal/length code",$.mode=f1;break e}else{v=m[(v&65535)+(f&(1<<E)-1)];continue t}break}}while(n<s&&i<a);S=h>>3,n-=S,h-=S<<3,f&=(1<<h)-1,e.next_in=n,e.next_out=i,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=i<a?257+(a-i):257-(i-a),$.hold=f,$.bits=h},cp=15,GV=852,ZV=592,XV=0,LO=1,YV=2,F_e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),k_e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),R_e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),$_e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),j_e=(t,e,r,n,s,i,o,a)=>{let u=a.bits,c=0,l=0,d=0,p=0,f=0,h=0,m=0,g=0,_=0,D=0,v,E,S,P,C,B=null,F,I=new Uint16Array(cp+1),$=new Uint16Array(cp+1),q=null,X,Q,K;for(c=0;c<=cp;c++)I[c]=0;for(l=0;l<n;l++)I[e[r+l]]++;for(f=u,p=cp;p>=1&&I[p]===0;p--);if(f>p&&(f=p),p===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<p&&I[d]===0;d++);for(f<d&&(f=d),g=1,c=1;c<=cp;c++)if(g<<=1,g-=I[c],g<0)return-1;if(g>0&&(t===XV||p!==1))return-1;for($[1]=0,c=1;c<cp;c++)$[c+1]=$[c]+I[c];for(l=0;l<n;l++)e[r+l]!==0&&(o[$[e[r+l]]++]=l);if(t===XV?(B=q=o,F=20):t===LO?(B=F_e,q=k_e,F=257):(B=R_e,q=$_e,F=0),D=0,l=0,c=d,C=i,h=f,m=0,S=-1,_=1<<f,P=_-1,t===LO&&_>GV||t===YV&&_>ZV)return 1;for(;;){X=c-m,o[l]+1<F?(Q=0,K=o[l]):o[l]>=F?(Q=q[o[l]-F],K=B[o[l]-F]):(Q=96,K=0),v=1<<c-m,E=1<<h,d=E;do E-=v,s[C+(D>>m)+E]=X<<24|Q<<16|K|0;while(E!==0);for(v=1<<c-1;D&v;)v>>=1;if(v!==0?(D&=v-1,D+=v):D=0,l++,--I[c]===0){if(c===p)break;c=e[r+o[l]]}if(c>f&&(D&P)!==S){for(m===0&&(m=f),C+=d,h=c-m,g=1<<h;h+m<p&&(g-=I[h+m],!(g<=0));)h++,g<<=1;if(_+=1<<h,t===LO&&_>GV||t===YV&&_>ZV)return 1;S=D&P,s[S]=f<<24|h<<16|C-i|0}}return D!==0&&(s[C+D]=c-m<<24|64<<16|0),a.bits=f,0},Fm=j_e,N_e=0,Wz=1,Gz=2,{Z_FINISH:QV,Z_BLOCK:M_e,Z_TREES:p1,Z_OK:Nl,Z_STREAM_END:q_e,Z_NEED_DICT:L_e,Z_STREAM_ERROR:Xi,Z_DATA_ERROR:Zz,Z_MEM_ERROR:Xz,Z_BUF_ERROR:U_e,Z_DEFLATED:ez}=Ml,E1=16180,tz=16181,rz=16182,nz=16183,iz=16184,sz=16185,oz=16186,az=16187,uz=16188,cz=16189,b1=16190,ka=16191,UO=16192,lz=16193,KO=16194,dz=16195,fz=16196,pz=16197,hz=16198,h1=16199,y1=16200,yz=16201,mz=16202,gz=16203,vz=16204,bz=16205,VO=16206,wz=16207,_z=16208,nr=16209,Yz=16210,Qz=16211,K_e=852,V_e=592,z_e=15,J_e=z_e,Ez=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function H_e(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var ql=t=>{if(!t)return 1;let e=t.state;return!e||e.strm!==t||e.mode<E1||e.mode>Qz?1:0},eJ=t=>{if(ql(t))return Xi;let e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=E1,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(K_e),e.distcode=e.distdyn=new Int32Array(V_e),e.sane=1,e.back=-1,Nl},tJ=t=>{if(ql(t))return Xi;let e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,eJ(t)},rJ=(t,e)=>{let r;if(ql(t))return Xi;let n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Xi:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,tJ(t))},nJ=(t,e)=>{if(!t)return Xi;let r=new H_e;t.state=r,r.strm=t,r.window=null,r.mode=E1;let n=rJ(t,e);return n!==Nl&&(t.state=null),n},W_e=t=>nJ(t,J_e),Sz=!0,zO,JO,G_e=t=>{if(Sz){zO=new Int32Array(512),JO=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Fm(Wz,t.lens,0,288,zO,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Fm(Gz,t.lens,0,32,JO,0,t.work,{bits:5}),Sz=!1}t.lencode=zO,t.lenbits=9,t.distcode=JO,t.distbits=5},iJ=(t,e,r,n)=>{let s,i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>n&&(s=n),i.window.set(e.subarray(r-n,r-n+s),i.wnext),n-=s,n?(i.window.set(e.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},Z_e=(t,e)=>{let r,n,s,i,o,a,u,c,l,d,p,f,h,m,g=0,_,D,v,E,S,P,C,B,F=new Uint8Array(4),I,$,q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ql(t)||!t.output||!t.input&&t.avail_in!==0)return Xi;r=t.state,r.mode===ka&&(r.mode=UO),o=t.next_out,s=t.output,u=t.avail_out,i=t.next_in,n=t.input,a=t.avail_in,c=r.hold,l=r.bits,d=a,p=u,B=Nl;e:for(;;)switch(r.mode){case E1:if(r.wrap===0){r.mode=UO;break}for(;l<16;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(r.wrap&2&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,F[0]=c&255,F[1]=c>>>8&255,r.check=Zr(r.check,F,2,0),c=0,l=0,r.mode=tz;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=nr;break}if((c&15)!==ez){t.msg="unknown compression method",r.mode=nr;break}if(c>>>=4,l-=4,C=(c&15)+8,r.wbits===0&&(r.wbits=C),C>15||C>r.wbits){t.msg="invalid window size",r.mode=nr;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=c&512?cz:ka,c=0,l=0;break;case tz:for(;l<16;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(r.flags=c,(r.flags&255)!==ez){t.msg="unknown compression method",r.mode=nr;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=nr;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&r.wrap&4&&(F[0]=c&255,F[1]=c>>>8&255,r.check=Zr(r.check,F,2,0)),c=0,l=0,r.mode=rz;case rz:for(;l<32;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}r.head&&(r.head.time=c),r.flags&512&&r.wrap&4&&(F[0]=c&255,F[1]=c>>>8&255,F[2]=c>>>16&255,F[3]=c>>>24&255,r.check=Zr(r.check,F,4,0)),c=0,l=0,r.mode=nz;case nz:for(;l<16;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&r.wrap&4&&(F[0]=c&255,F[1]=c>>>8&255,r.check=Zr(r.check,F,2,0)),c=0,l=0,r.mode=iz;case iz:if(r.flags&1024){for(;l<16;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&r.wrap&4&&(F[0]=c&255,F[1]=c>>>8&255,r.check=Zr(r.check,F,2,0)),c=0,l=0}else r.head&&(r.head.extra=null);r.mode=sz;case sz:if(r.flags&1024&&(f=r.length,f>a&&(f=a),f&&(r.head&&(C=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+f),C)),r.flags&512&&r.wrap&4&&(r.check=Zr(r.check,n,f,i)),a-=f,i+=f,r.length-=f),r.length))break e;r.length=0,r.mode=oz;case oz:if(r.flags&2048){if(a===0)break e;f=0;do C=n[i+f++],r.head&&C&&r.length<65536&&(r.head.name+=String.fromCharCode(C));while(C&&f<a);if(r.flags&512&&r.wrap&4&&(r.check=Zr(r.check,n,f,i)),a-=f,i+=f,C)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=az;case az:if(r.flags&4096){if(a===0)break e;f=0;do C=n[i+f++],r.head&&C&&r.length<65536&&(r.head.comment+=String.fromCharCode(C));while(C&&f<a);if(r.flags&512&&r.wrap&4&&(r.check=Zr(r.check,n,f,i)),a-=f,i+=f,C)break e}else r.head&&(r.head.comment=null);r.mode=uz;case uz:if(r.flags&512){for(;l<16;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(r.wrap&4&&c!==(r.check&65535)){t.msg="header crc mismatch",r.mode=nr;break}c=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=ka;break;case cz:for(;l<32;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}t.adler=r.check=Ez(c),c=0,l=0,r.mode=b1;case b1:if(r.havedict===0)return t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=a,r.hold=c,r.bits=l,L_e;t.adler=r.check=1,r.mode=ka;case ka:if(e===M_e||e===p1)break e;case UO:if(r.last){c>>>=l&7,l-=l&7,r.mode=VO;break}for(;l<3;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}switch(r.last=c&1,c>>>=1,l-=1,c&3){case 0:r.mode=lz;break;case 1:if(G_e(r),r.mode=h1,e===p1){c>>>=2,l-=2;break e}break;case 2:r.mode=fz;break;case 3:t.msg="invalid block type",r.mode=nr}c>>>=2,l-=2;break;case lz:for(c>>>=l&7,l-=l&7;l<32;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=nr;break}if(r.length=c&65535,c=0,l=0,r.mode=KO,e===p1)break e;case KO:r.mode=dz;case dz:if(f=r.length,f){if(f>a&&(f=a),f>u&&(f=u),f===0)break e;s.set(n.subarray(i,i+f),o),a-=f,i+=f,u-=f,o+=f,r.length-=f;break}r.mode=ka;break;case fz:for(;l<14;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(r.nlen=(c&31)+257,c>>>=5,l-=5,r.ndist=(c&31)+1,c>>>=5,l-=5,r.ncode=(c&15)+4,c>>>=4,l-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=nr;break}r.have=0,r.mode=pz;case pz:for(;r.have<r.ncode;){for(;l<3;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}r.lens[q[r.have++]]=c&7,c>>>=3,l-=3}for(;r.have<19;)r.lens[q[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},B=Fm(N_e,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,B){t.msg="invalid code lengths set",r.mode=nr;break}r.have=0,r.mode=hz;case hz:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[c&(1<<r.lenbits)-1],_=g>>>24,D=g>>>16&255,v=g&65535,!(_<=l);){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(v<16)c>>>=_,l-=_,r.lens[r.have++]=v;else{if(v===16){for($=_+2;l<$;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(c>>>=_,l-=_,r.have===0){t.msg="invalid bit length repeat",r.mode=nr;break}C=r.lens[r.have-1],f=3+(c&3),c>>>=2,l-=2}else if(v===17){for($=_+3;l<$;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}c>>>=_,l-=_,C=0,f=3+(c&7),c>>>=3,l-=3}else{for($=_+7;l<$;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}c>>>=_,l-=_,C=0,f=11+(c&127),c>>>=7,l-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=nr;break}for(;f--;)r.lens[r.have++]=C}}if(r.mode===nr)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=nr;break}if(r.lenbits=9,I={bits:r.lenbits},B=Fm(Wz,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,B){t.msg="invalid literal/lengths set",r.mode=nr;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},B=Fm(Gz,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,B){t.msg="invalid distances set",r.mode=nr;break}if(r.mode=h1,e===p1)break e;case h1:r.mode=y1;case y1:if(a>=6&&u>=258){t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=a,r.hold=c,r.bits=l,I_e(t,p),o=t.next_out,s=t.output,u=t.avail_out,i=t.next_in,n=t.input,a=t.avail_in,c=r.hold,l=r.bits,r.mode===ka&&(r.back=-1);break}for(r.back=0;g=r.lencode[c&(1<<r.lenbits)-1],_=g>>>24,D=g>>>16&255,v=g&65535,!(_<=l);){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(D&&!(D&240)){for(E=_,S=D,P=v;g=r.lencode[P+((c&(1<<E+S)-1)>>E)],_=g>>>24,D=g>>>16&255,v=g&65535,!(E+_<=l);){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}c>>>=E,l-=E,r.back+=E}if(c>>>=_,l-=_,r.back+=_,r.length=v,D===0){r.mode=bz;break}if(D&32){r.back=-1,r.mode=ka;break}if(D&64){t.msg="invalid literal/length code",r.mode=nr;break}r.extra=D&15,r.mode=yz;case yz:if(r.extra){for($=r.extra;l<$;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=mz;case mz:for(;g=r.distcode[c&(1<<r.distbits)-1],_=g>>>24,D=g>>>16&255,v=g&65535,!(_<=l);){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(!(D&240)){for(E=_,S=D,P=v;g=r.distcode[P+((c&(1<<E+S)-1)>>E)],_=g>>>24,D=g>>>16&255,v=g&65535,!(E+_<=l);){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}c>>>=E,l-=E,r.back+=E}if(c>>>=_,l-=_,r.back+=_,D&64){t.msg="invalid distance code",r.mode=nr;break}r.offset=v,r.extra=D&15,r.mode=gz;case gz:if(r.extra){for($=r.extra;l<$;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=nr;break}r.mode=vz;case vz:if(u===0)break e;if(f=p-u,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=nr;break}f>r.wnext?(f-=r.wnext,h=r.wsize-f):h=r.wnext-f,f>r.length&&(f=r.length),m=r.window}else m=s,h=o-r.offset,f=r.length;f>u&&(f=u),u-=f,r.length-=f;do s[o++]=m[h++];while(--f);r.length===0&&(r.mode=y1);break;case bz:if(u===0)break e;s[o++]=r.length,u--,r.mode=y1;break;case VO:if(r.wrap){for(;l<32;){if(a===0)break e;a--,c|=n[i++]<<l,l+=8}if(p-=u,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?Zr(r.check,s,p,o-p):Nm(r.check,s,p,o-p)),p=u,r.wrap&4&&(r.flags?c:Ez(c))!==r.check){t.msg="incorrect data check",r.mode=nr;break}c=0,l=0}r.mode=wz;case wz:if(r.wrap&&r.flags){for(;l<32;){if(a===0)break e;a--,c+=n[i++]<<l,l+=8}if(r.wrap&4&&c!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=nr;break}c=0,l=0}r.mode=_z;case _z:B=q_e;break e;case nr:B=Zz;break e;case Yz:return Xz;case Qz:default:return Xi}return t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=a,r.hold=c,r.bits=l,(r.wsize||p!==t.avail_out&&r.mode<nr&&(r.mode<VO||e!==QV))&&iJ(t,t.output,t.next_out,p-t.avail_out),d-=t.avail_in,p-=t.avail_out,t.total_in+=d,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?Zr(r.check,s,p,t.next_out-p):Nm(r.check,s,p,t.next_out-p)),t.data_type=r.bits+(r.last?64:0)+(r.mode===ka?128:0)+(r.mode===h1||r.mode===KO?256:0),(d===0&&p===0||e===QV)&&B===Nl&&(B=U_e),B},X_e=t=>{if(ql(t))return Xi;let e=t.state;return e.window&&(e.window=null),t.state=null,Nl},Y_e=(t,e)=>{if(ql(t))return Xi;let r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Nl):Xi},Q_e=(t,e)=>{let r=e.length,n,s,i;return ql(t)||(n=t.state,n.wrap!==0&&n.mode!==b1)?Xi:n.mode===b1&&(s=1,s=Nm(s,e,r,0),s!==n.check)?Zz:(i=iJ(t,e,r,r),i?(n.mode=Yz,Xz):(n.havedict=1,Nl))},eEe=tJ,tEe=rJ,rEe=eJ,nEe=W_e,iEe=nJ,sEe=Z_e,oEe=X_e,aEe=Y_e,uEe=Q_e,cEe="pako inflate (from Nodeca project)",$a={inflateReset:eEe,inflateReset2:tEe,inflateResetKeep:rEe,inflateInit:nEe,inflateInit2:iEe,inflate:sEe,inflateEnd:oEe,inflateGetHeader:aEe,inflateSetDictionary:uEe,inflateInfo:cEe};function lEe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var dEe=lEe,sJ=Object.prototype.toString,{Z_NO_FLUSH:fEe,Z_FINISH:pEe,Z_OK:Lm,Z_STREAM_END:HO,Z_NEED_DICT:WO,Z_STREAM_ERROR:hEe,Z_DATA_ERROR:Az,Z_MEM_ERROR:yEe}=Ml;function zm(t){this.options=_1.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Jz,this.strm.avail_out=0;let r=$a.inflateInit2(this.strm,e.windowBits);if(r!==Lm)throw new Error($l[r]);if(this.header=new dEe,$a.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=qm.string2buf(e.dictionary):sJ.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=$a.inflateSetDictionary(this.strm,e.dictionary),r!==Lm)))throw new Error($l[r])}zm.prototype.push=function(t,e){let r=this.strm,n=this.options.chunkSize,s=this.options.dictionary,i,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?pEe:fEe,sJ.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=$a.inflate(r,o),i===WO&&s&&(i=$a.inflateSetDictionary(r,s),i===Lm?i=$a.inflate(r,o):i===Az&&(i=WO));r.avail_in>0&&i===HO&&r.state.wrap>0&&t[r.next_in]!==0;)$a.inflateReset(r),i=$a.inflate(r,o);switch(i){case hEe:case Az:case WO:case yEe:return this.onEnd(i),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(r.avail_out===0||i===HO))if(this.options.to==="string"){let u=qm.utf8border(r.output,r.next_out),c=r.next_out-u,l=qm.buf2string(r.output,u);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(u,u+c),0),this.onData(l)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===Lm&&a===0)){if(i===HO)return i=$a.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};zm.prototype.onData=function(t){this.chunks.push(t)};zm.prototype.onEnd=function(t){t===Lm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=_1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function lT(t,e){let r=new zm(e);if(r.push(t),r.err)throw r.msg||$l[r.err];return r.result}function mEe(t,e){return e=e||{},e.raw=!0,lT(t,e)}var gEe=zm,vEe=lT,bEe=mEe,wEe=lT,_Ee=Ml,EEe={Inflate:gEe,inflate:vEe,inflateRaw:bEe,ungzip:wEe,constants:_Ee},{Deflate:SEe,deflate:AEe,deflateRaw:xEe,gzip:DEe}=T_e,{Inflate:CEe,inflate:PEe,inflateRaw:OEe,ungzip:TEe}=EEe,BEe=SEe,IEe=AEe,FEe=xEe,kEe=DEe,REe=CEe,$Ee=PEe,jEe=OEe,NEe=TEe,MEe=Ml,dT={Deflate:BEe,deflate:IEe,deflateRaw:FEe,gzip:kEe,Inflate:REe,inflate:$Ee,inflateRaw:jEe,ungzip:NEe,constants:MEe};var oJ={};Cr(oJ,{getCurrentXmlSchema112Timestamp:()=>Jm,getFutureXmlSchema112Timestamp:()=>qEe,getXmlSchema112Timestamp:()=>S1,isValidRFC3339Timestamp:()=>pT,isValidXmlSchema112Timestamp:()=>fT});function Jm(){return new Date().toISOString().replace(/\.\d+Z$/,"Z")}function S1(t){return new Date(t*1e3).toISOString().replace(/\.\d{3}/,"")}function qEe(t){return new Date(Date.now()+t*1e3).toISOString().replace(/\.\d+Z$/,"Z")}function fT(t){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(t))return!1;let r=new Date(t);return!isNaN(r.getTime())}function pT(t){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[+-]\d{2}:\d{2})$/.test(t))return!1;let r=new Date(t);return!isNaN(r.getTime())}var JJ=qn(KJ(),1);var _p="VerifiablePresentation",VJ=class t{constructor(e){this.vpDataModel=e}get type(){return this.vpDataModel.type[this.vpDataModel.type.length-1]}get holder(){return this.vpDataModel.holder.toString()}get verifiableCredential(){return this.vpDataModel.verifiableCredential}async sign(e){return await ao.sign({signerDid:e.did,payload:{vp:this.vpDataModel,iss:e.did.uri,sub:e.did.uri,jti:this.vpDataModel.id,iat:Math.floor(Date.now()/1e3)}})}toString(){return JSON.stringify(this.vpDataModel)}static async create(e){let{type:r,holder:n,vcJwts:s,additionalData:i}=e;if(i&&typeof JSON.parse(JSON.stringify(i))!="object")throw new Error("Expected data to be parseable into a JSON object");if(!n)throw new Error("Holder must be defined");if(typeof n!="string")throw new Error("Holder must be of type string");let o={"@context":[Xu],type:Array.isArray(r)?[_p,...r]:r?[_p,r]:[_p],id:`urn:uuid:${kg.randomUuid()}`,holder:n,verifiableCredential:s,...i};return zJ(o),new t(o)}static async verify({vpJwt:e}){let{payload:r}=await ao.verify({jwt:e}),n=r.vp;if(!n)throw new Error("vp property missing.");zJ(n);for(let s of n.verifiableCredential)await Ep.verify({vcJwt:s});return{issuer:r.iss,subject:r.sub,vp:r.vp}}static parseJwt({vpJwt:e}){let n=ao.parse({jwt:e}).decoded.payload.vp;if(!n)throw Error("Jwt payload missing vp property");return new t(n)}};function zJ(t){Qi.validateContext(t["@context"]),Qi.validateVpType(t.type)}var NSe=new JJ.Validator,Qi=class{static validateCredentialPayload(e){this.validateContext(e.vcDataModel["@context"]),this.validateVcType(e.type),this.validateCredentialSubject(e.vcDataModel.credentialSubject),e.vcDataModel.issuanceDate&&this.validateTimestamp(e.vcDataModel.issuanceDate),e.vcDataModel.expirationDate&&this.validateTimestamp(e.vcDataModel.expirationDate)}static validateContext(e){let r=this.asArray(e);if(r.length<1||r.indexOf(Xu)===-1)throw new Error(`@context is missing default context "${Xu}"`)}static validateVcType(e){let r=this.asArray(e);if(r.length<1||r.indexOf(Yu)===-1)throw new Error(`type is missing default "${Yu}"`)}static validateVpType(e){let r=this.asArray(e);if(r.length<1||r.indexOf(_p)===-1)throw new Error(`type is missing default "${_p}"`)}static validateCredentialSubject(e){if(Object.keys(e).length===0)throw new Error("credentialSubject must not be empty")}static validateTimestamp(e){if(!fT(e)&&!pT(e))throw new Error("timestamp is not valid xml schema 112 timestamp")}static async validateCredentialSchema(e){let r=e.credentialSchema;if(!r||Array.isArray(r)&&r.length===0)throw new Error("Credential schema is missing or empty");let n=Array.isArray(r)?r[0].id:r.id,s;try{let o=await fetch(n);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);s=await o.json()}catch(o){throw new Error(`Failed to fetch schema from ${n}: ${o.message}`)}let i=NSe.validate(e,s);if(!i.valid)throw new Error(`Schema Validation Errors: ${JSON.stringify(i.errors)}`)}static asArray(e){return Array.isArray(e)?e:[e]}};var Xu="https://www.w3.org/2018/credentials/v1",Yu="VerifiableCredential",Ep=class t{constructor(e){this.vcDataModel=e}get type(){return this.vcDataModel.type[this.vcDataModel.type.length-1]}get issuer(){return this.vcDataModel.issuer.toString()}get subject(){return Array.isArray(this.vcDataModel.credentialSubject)?this.vcDataModel.credentialSubject[0].id:this.vcDataModel.credentialSubject.id}async sign(e){return await ao.sign({signerDid:e.did,payload:{vc:this.vcDataModel,nbf:Math.floor(new Date(this.vcDataModel.issuanceDate).getTime()/1e3),jti:this.vcDataModel.id,iss:e.did.uri,sub:this.subject,iat:Math.floor(Date.now()/1e3),...this.vcDataModel.expirationDate&&{exp:Math.floor(new Date(this.vcDataModel.expirationDate).getTime()/1e3)}}})}toString(){return JSON.stringify(this.vcDataModel)}static async create(e){let{type:r,issuer:n,subject:s,data:i,issuanceDate:o,expirationDate:a,credentialStatus:u,credentialSchema:c,evidence:l}=e,d=JSON.parse(JSON.stringify(i));if(typeof d!="object")throw new Error("Expected data to be parseable into a JSON object");if(!n||!s)throw new Error("Issuer and subject must be defined");if(typeof n!="string"||typeof s!="string")throw new Error("Issuer and subject must be of type string");let p={id:s,...d},f=[Xu];u!==null&&f.push(IT);let h={"@context":f,type:Array.isArray(r)?[Yu,...r]:r?[Yu,r]:[Yu],id:`urn:uuid:${kg.randomUuid()}`,issuer:n,issuanceDate:o||Jm(),credentialSubject:p,...a&&{expirationDate:a},...u&&{credentialStatus:u},...c&&{credentialSchema:c},...l&&{evidence:l}};return BT(h),new t(h)}static async verify({vcJwt:e}){let{payload:r}=await ao.verify({jwt:e}),{exp:n,iss:s,nbf:i,jti:o,sub:a,vc:u}=r;if(!u)throw new Error("vc property missing.");let c=r.vc;if(n&&c.expirationDate&&n!==Math.floor(new Date(c.expirationDate).getTime()/1e3))throw new Error("Verification failed: exp claim does not match expirationDate");if(n&&(c.expirationDate=S1(n)),!s)throw new Error("Verification failed: iss claim is required");if(s!==c.issuer)throw new Error("Verification failed: iss claim does not match expected issuer");if(i&&i>Math.floor(Date.now()/1e3))throw new Error("Verification failed: nbf claim is in the future");if(i&&c.issuanceDate&&i!==Math.floor(new Date(c.issuanceDate).getTime()/1e3))throw new Error("Verification failed: nbf claim does not match issuanceDate");if(i&&(c.issuanceDate=S1(i)),a&&!Array.isArray(c.credentialSubject)&&a!==c.credentialSubject.id)throw new Error("Verification failed: sub claim does not match credentialSubject.id");if(a&&!Array.isArray(c.credentialSubject)&&(c.credentialSubject.id=a),o&&o!==c.id)throw new Error("Verification failed: jti claim does not match id");return o&&(c.id=o),BT(c),c.credentialSchema&&await Qi.validateCredentialSchema(c),{issuer:r.iss,subject:r.sub,vc:c}}static parseJwt({vcJwt:e}){let n=ao.parse({jwt:e}).decoded.payload.vc;if(!n)throw Error("Jwt payload missing vc property");return BT(n),new t(n)}};function BT(t){Qi.validateContext(t["@context"]),Qi.validateVcType(t.type),Qi.validateCredentialSubject(t.credentialSubject),t.issuanceDate&&Qi.validateTimestamp(t.issuanceDate),t.expirationDate&&Qi.validateTimestamp(t.expirationDate)}var IT="https://w3id.org/vc/status-list/2021/v1",MSe="StatusList2021Credential",qSe=(r=>(r.revocation="revocation",r.suspension="suspension",r))(qSe||{}),HJ=16*1024*8,WJ=class{static create(e){let{statusListCredentialId:r,issuer:n,statusPurpose:s,credentialsToDisable:i}=e,o=this.validateStatusListEntryIndexesAreAllUnique(s,i),a=this.generateBitString(o),u={id:r,type:"StatusList2021",statusPurpose:s,encodedList:a},c={"@context":[Xu,IT],type:[Yu,MSe],id:r,issuer:n,issuanceDate:Jm(),credentialSubject:u};return new Ep(c)}static validateCredentialInStatusList(e,r){let n=e.vcDataModel.credentialStatus,s=r.vcDataModel.credentialSubject,i=s.statusPurpose,o=s.encodedList;if(!n.statusPurpose)throw new Error("status purpose in the credential to validate is undefined");if(!i)throw new Error("status purpose in the status list credential is undefined");if(n.statusPurpose!==i)throw new Error("status purposes do not match between the credentials");if(!o)throw new Error("compressed bitstring is null or empty");return this.getBit(o,parseInt(n.statusListIndex))}static validateStatusListEntryIndexesAreAllUnique(e,r){let n=new Set;for(let s of r){if(!s.vcDataModel.credentialStatus)throw new Error("no credential status found in credential");let i=s.vcDataModel.credentialStatus;if(i.statusPurpose!==e)throw new Error("status purpose mismatch");if(n.has(i.statusListIndex))throw new Error(`duplicate entry found with index: ${i.statusListIndex}`);if(parseInt(i.statusListIndex)<0)throw new Error("status list index cannot be negative");if(parseInt(i.statusListIndex)>=HJ)throw new Error("status list index is larger than the bitset size");n.add(i.statusListIndex)}return Array.from(n).map(s=>parseInt(s))}static generateBitString(e){let r=new Uint8Array(HJ/8);e.forEach(i=>{let o=Math.floor(i/8),a=i%8;r[o]=r[o]|1<<7-a});let n=dT.gzip(r);return Ce.uint8Array(n).toBase64Url()}static getBit(e,r){let n=Ce.base64Url(e).toUint8Array(),s=dT.inflate(n),i=Math.floor(r/8),o=r%8;return(s[i]>>7-o&1)===1}};export{IT as DEFAULT_STATUS_LIST_VC_CONTEXT,Xu as DEFAULT_VC_CONTEXT,Yu as DEFAULT_VC_TYPE,_p as DEFAULT_VP_TYPE,ao as Jwt,kO as PresentationExchange,WJ as StatusListCredential,qSe as StatusPurpose,Ep as VerifiableCredential,VJ as VerifiablePresentation,oJ as utils};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

punycode/punycode.js:
  (*! https://mths.be/punycode v1.4.1 by @mathias *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/montgomery.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ciphers/esm/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)

uint8-util/util.js:
  (* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
  *
  * @author   Jimmy Wärting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
  * @license  MIT
  *)

pako/dist/pako.esm.mjs:
  (*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) *)
*/
//# sourceMappingURL=browser.mjs.map
