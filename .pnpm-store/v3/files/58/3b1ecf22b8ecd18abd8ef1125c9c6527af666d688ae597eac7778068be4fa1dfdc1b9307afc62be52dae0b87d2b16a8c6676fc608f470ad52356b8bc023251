"use strict";var Web5Crypto=(()=>{var Ly=Object.create;var Li=Object.defineProperty;var Oy=Object.getOwnPropertyDescriptor;var Ky=Object.getOwnPropertyNames;var Ny=Object.getPrototypeOf,Dy=Object.prototype.hasOwnProperty;var D=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),gs=(t,e)=>{for(var r in e)Li(t,r,{get:e[r],enumerable:!0})},Wf=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ky(e))!Dy.call(t,i)&&i!==r&&Li(t,i,{get:()=>e[i],enumerable:!(n=Oy(e,i))||n.enumerable});return t};var Oi=(t,e,r)=>(r=t!=null?Ly(Ny(t)):{},Wf(e||!t||!t.__esModule?Li(r,"default",{value:t,enumerable:!0}):r,t)),My=t=>Wf(Li({},"__esModule",{value:!0}),t);var Yf=D((F2,zf)=>{var qy=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Ki=()=>qy.now(),jy=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),xs=t=>t===1/0||jy(t),Es=class t{constructor({max:e=1/0,ttl:r,updateAgeOnGet:n=!1,checkAgeOnGet:i=!1,noUpdateTTL:o=!1,dispose:s,noDisposeOnSet:a=!1}={}){if(this.expirations=Object.create(null),this.data=new Map,this.expirationMap=new Map,r!==void 0&&!xs(r))throw new TypeError("ttl must be positive integer or Infinity if set");if(!xs(e))throw new TypeError("max must be positive integer or Infinity");if(this.ttl=r,this.max=e,this.updateAgeOnGet=!!n,this.checkAgeOnGet=!!i,this.noUpdateTTL=!!o,this.noDisposeOnSet=!!a,s!==void 0){if(typeof s!="function")throw new TypeError("dispose must be function if set");this.dispose=s}this.timer=void 0,this.timerExpiration=void 0}setTimer(e,r){if(this.timerExpiration<e)return;this.timer&&clearTimeout(this.timer);let n=setTimeout(()=>{this.timer=void 0,this.timerExpiration=void 0,this.purgeStale();for(let i in this.expirations){this.setTimer(i,i-Ki());break}},r);n.unref&&n.unref(),this.timerExpiration=e,this.timer=n}cancelTimer(){this.timer&&(clearTimeout(this.timer),this.timerExpiration=void 0,this.timer=void 0)}cancelTimers(){return process.emitWarning('TTLCache.cancelTimers has been renamed to TTLCache.cancelTimer (no "s"), and will be removed in the next major version update'),this.cancelTimer()}clear(){let e=this.dispose!==t.prototype.dispose?[...this]:[];this.data.clear(),this.expirationMap.clear(),this.cancelTimer(),this.expirations=Object.create(null);for(let[r,n]of e)this.dispose(n,r,"delete")}setTTL(e,r=this.ttl){let n=this.expirationMap.get(e);if(n!==void 0){let i=this.expirations[n];!i||i.length<=1?delete this.expirations[n]:this.expirations[n]=i.filter(o=>o!==e)}if(r!==1/0){let i=Math.floor(Ki()+r);this.expirationMap.set(e,i),this.expirations[i]||(this.expirations[i]=[],this.setTimer(i,r)),this.expirations[i].push(e)}else this.expirationMap.set(e,1/0)}set(e,r,{ttl:n=this.ttl,noUpdateTTL:i=this.noUpdateTTL,noDisposeOnSet:o=this.noDisposeOnSet}={}){if(!xs(n))throw new TypeError("ttl must be positive integer or Infinity");if(this.expirationMap.has(e)){i||this.setTTL(e,n);let s=this.data.get(e);s!==r&&(this.data.set(e,r),o||this.dispose(s,e,"set"))}else this.setTTL(e,n),this.data.set(e,r);for(;this.size>this.max;)this.purgeToCapacity();return this}has(e){return this.data.has(e)}getRemainingTTL(e){let r=this.expirationMap.get(e);return r===1/0?r:r!==void 0?Math.max(0,Math.ceil(r-Ki())):0}get(e,{updateAgeOnGet:r=this.updateAgeOnGet,ttl:n=this.ttl,checkAgeOnGet:i=this.checkAgeOnGet}={}){let o=this.data.get(e);if(i&&this.getRemainingTTL(e)===0){this.delete(e);return}return r&&this.setTTL(e,n),o}dispose(e,r){}delete(e){let r=this.expirationMap.get(e);if(r!==void 0){let n=this.data.get(e);this.data.delete(e),this.expirationMap.delete(e);let i=this.expirations[r];return i&&(i.length<=1?delete this.expirations[r]:this.expirations[r]=i.filter(o=>o!==e)),this.dispose(n,e,"delete"),this.size===0&&this.cancelTimer(),!0}return!1}purgeToCapacity(){for(let e in this.expirations){let r=this.expirations[e];if(this.size-r.length>=this.max){delete this.expirations[e];let n=[];for(let i of r)n.push([i,this.data.get(i)]),this.data.delete(i),this.expirationMap.delete(i);for(let[i,o]of n)this.dispose(o,i,"evict")}else{let n=this.size-this.max,i=[];for(let o of r.splice(0,n))i.push([o,this.data.get(o)]),this.data.delete(o),this.expirationMap.delete(o);for(let[o,s]of i)this.dispose(s,o,"evict");return}}}get size(){return this.data.size}purgeStale(){let e=Math.ceil(Ki());for(let r in this.expirations){if(r==="Infinity"||r>e)return;let n=[...this.expirations[r]||[]],i=[];delete this.expirations[r];for(let o of n)i.push([o,this.data.get(o)]),this.data.delete(o),this.expirationMap.delete(o);for(let[o,s]of i)this.dispose(s,o,"stale")}this.size===0&&this.cancelTimer()}*entries(){for(let e in this.expirations)for(let r of this.expirations[e])yield[r,this.data.get(r)]}*keys(){for(let e in this.expirations)for(let r of this.expirations[e])yield r}*values(){for(let e in this.expirations)for(let r of this.expirations[e])yield this.data.get(r)}[Symbol.iterator](){return this.entries()}};zf.exports=Es});var hu=D(du=>{"use strict";du.supports=function(...e){let r=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})}});var Je=D((M_,pu)=>{"use strict";pu.exports=class extends Error{constructor(e,r){super(e||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var mu=D(Di=>{"use strict";Di.byteLength=x0;Di.toByteArray=_0;Di.fromByteArray=v0;var at=[],De=[],g0=typeof Uint8Array<"u"?Uint8Array:Array,Ls="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Er=0,yu=Ls.length;Er<yu;++Er)at[Er]=Ls[Er],De[Ls.charCodeAt(Er)]=Er;var Er,yu;De[45]=62;De[95]=63;function wu(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function x0(t){var e=wu(t),r=e[0],n=e[1];return(r+n)*3/4-n}function E0(t,e,r){return(e+r)*3/4-r}function _0(t){var e,r=wu(t),n=r[0],i=r[1],o=new g0(E0(t,n,i)),s=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=De[t.charCodeAt(c)]<<18|De[t.charCodeAt(c+1)]<<12|De[t.charCodeAt(c+2)]<<6|De[t.charCodeAt(c+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=De[t.charCodeAt(c)]<<2|De[t.charCodeAt(c+1)]>>4,o[s++]=e&255),i===1&&(e=De[t.charCodeAt(c)]<<10|De[t.charCodeAt(c+1)]<<4|De[t.charCodeAt(c+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function A0(t){return at[t>>18&63]+at[t>>12&63]+at[t>>6&63]+at[t&63]}function S0(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(A0(n));return i.join("")}function v0(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(S0(t,s,s+o>a?a:s+o));return n===1?(e=t[r-1],i.push(at[e>>2]+at[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(at[e>>10]+at[e>>4&63]+at[e<<2&63]+"=")),i.join("")}});var bu=D(Os=>{Os.read=function(t,e,r,n,i){var o,s,a=i*8-n-1,c=(1<<a)-1,f=c>>1,u=-7,l=r?i-1:0,p=r?-1:1,y=t[e+l];for(l+=p,o=y&(1<<-u)-1,y>>=-u,u+=a;u>0;o=o*256+t[e+l],l+=p,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=s*256+t[e+l],l+=p,u-=8);if(o===0)o=1-f;else{if(o===c)return s?NaN:(y?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-f}return(y?-1:1)*s*Math.pow(2,o-n)};Os.write=function(t,e,r,n,i,o){var s,a,c,f=o*8-i-1,u=(1<<f)-1,l=u>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:o-1,d=n?1:-1,h=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+l>=1?e+=p/c:e+=p*Math.pow(2,1-l),e*c>=2&&(s++,c/=2),s+l>=u?(a=0,s=u):s+l>=1?(a=(e*c-1)*Math.pow(2,i),s=s+l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+y]=a&255,y+=d,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;t[r+y]=s&255,y+=d,s/=256,f-=8);t[r+y-d]|=h*128}});var Me=D(dn=>{"use strict";var Ks=mu(),un=bu(),gu=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;dn.Buffer=E;dn.SlowBuffer=R0;dn.INSPECT_MAX_BYTES=50;var Mi=2147483647;dn.kMaxLength=Mi;E.TYPED_ARRAY_SUPPORT=B0();!E.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function B0(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(E.prototype,"parent",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.buffer}});Object.defineProperty(E.prototype,"offset",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.byteOffset}});function vt(t){if(t>Mi)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,E.prototype),e}function E(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return qs(t)}return Au(t,e,r)}E.poolSize=8192;function Au(t,e,r){if(typeof t=="string")return k0(t,e);if(ArrayBuffer.isView(t))return P0(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(ct(t,ArrayBuffer)||t&&ct(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ct(t,SharedArrayBuffer)||t&&ct(t.buffer,SharedArrayBuffer)))return Ds(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return E.from(n,e,r);let i=I0(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return E.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}E.from=function(t,e,r){return Au(t,e,r)};Object.setPrototypeOf(E.prototype,Uint8Array.prototype);Object.setPrototypeOf(E,Uint8Array);function Su(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function T0(t,e,r){return Su(t),t<=0?vt(t):e!==void 0?typeof r=="string"?vt(t).fill(e,r):vt(t).fill(e):vt(t)}E.alloc=function(t,e,r){return T0(t,e,r)};function qs(t){return Su(t),vt(t<0?0:js(t)|0)}E.allocUnsafe=function(t){return qs(t)};E.allocUnsafeSlow=function(t){return qs(t)};function k0(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!E.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=vu(t,e)|0,n=vt(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function Ns(t){let e=t.length<0?0:js(t.length)|0,r=vt(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function P0(t){if(ct(t,Uint8Array)){let e=new Uint8Array(t);return Ds(e.buffer,e.byteOffset,e.byteLength)}return Ns(t)}function Ds(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,E.prototype),n}function I0(t){if(E.isBuffer(t)){let e=js(t.length)|0,r=vt(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||$s(t.length)?vt(0):Ns(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Ns(t.data)}function js(t){if(t>=Mi)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Mi.toString(16)+" bytes");return t|0}function R0(t){return+t!=t&&(t=0),E.alloc(+t)}E.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==E.prototype};E.compare=function(e,r){if(ct(e,Uint8Array)&&(e=E.from(e,e.offset,e.byteLength)),ct(r,Uint8Array)&&(r=E.from(r,r.offset,r.byteLength)),!E.isBuffer(e)||!E.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0};E.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};E.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return E.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=E.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){let s=e[n];if(ct(s,Uint8Array))o+s.length>i.length?(E.isBuffer(s)||(s=E.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(E.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function vu(t,e){if(E.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||ct(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Ms(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Lu(t).length;default:if(i)return n?-1:Ms(t).length;e=(""+e).toLowerCase(),i=!0}}E.byteLength=vu;function U0(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return F0(this,e,r);case"utf8":case"utf-8":return Tu(this,e,r);case"ascii":return q0(this,e,r);case"latin1":case"binary":return j0(this,e,r);case"base64":return D0(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $0(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}E.prototype._isBuffer=!0;function _r(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}E.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)_r(this,r,r+1);return this};E.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)_r(this,r,r+3),_r(this,r+1,r+2);return this};E.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)_r(this,r,r+7),_r(this,r+1,r+6),_r(this,r+2,r+5),_r(this,r+3,r+4);return this};E.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Tu(this,0,e):U0.apply(this,arguments)};E.prototype.toLocaleString=E.prototype.toString;E.prototype.equals=function(e){if(!E.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:E.compare(this,e)===0};E.prototype.inspect=function(){let e="",r=dn.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};gu&&(E.prototype[gu]=E.prototype.inspect);E.prototype.compare=function(e,r,n,i,o){if(ct(e,Uint8Array)&&(e=E.from(e,e.offset,e.byteLength)),!E.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,a=n-r,c=Math.min(s,a),f=this.slice(i,o),u=e.slice(r,n);for(let l=0;l<c;++l)if(f[l]!==u[l]){s=f[l],a=u[l];break}return s<a?-1:a<s?1:0};function Bu(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,$s(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=E.from(e,n)),E.isBuffer(e))return e.length===0?-1:xu(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):xu(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function xu(t,e,r,n,i){let o=1,s=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,s/=2,a/=2,r/=2}function c(u,l){return o===1?u[l]:u.readUInt16BE(l*o)}let f;if(i){let u=-1;for(f=r;f<s;f++)if(c(t,f)===c(e,u===-1?0:f-u)){if(u===-1&&(u=f),f-u+1===a)return u*o}else u!==-1&&(f-=f-u),u=-1}else for(r+a>s&&(r=s-a),f=r;f>=0;f--){let u=!0;for(let l=0;l<a;l++)if(c(t,f+l)!==c(e,l)){u=!1;break}if(u)return f}return-1}E.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};E.prototype.indexOf=function(e,r,n){return Bu(this,e,r,n,!0)};E.prototype.lastIndexOf=function(e,r,n){return Bu(this,e,r,n,!1)};function C0(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let a=parseInt(e.substr(s*2,2),16);if($s(a))return s;t[r+s]=a}return s}function L0(t,e,r,n){return qi(Ms(e,t.length-r),t,r,n)}function O0(t,e,r,n){return qi(J0(e),t,r,n)}function K0(t,e,r,n){return qi(Lu(e),t,r,n)}function N0(t,e,r,n){return qi(W0(e,t.length-r),t,r,n)}E.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-r;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return C0(this,e,r,n);case"utf8":case"utf-8":return L0(this,e,r,n);case"ascii":case"latin1":case"binary":return O0(this,e,r,n);case"base64":return K0(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N0(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D0(t,e,r){return e===0&&r===t.length?Ks.fromByteArray(t):Ks.fromByteArray(t.slice(e,r))}function Tu(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){let c,f,u,l;switch(a){case 1:o<128&&(s=o);break;case 2:c=t[i+1],(c&192)===128&&(l=(o&31)<<6|c&63,l>127&&(s=l));break;case 3:c=t[i+1],f=t[i+2],(c&192)===128&&(f&192)===128&&(l=(o&15)<<12|(c&63)<<6|f&63,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:c=t[i+1],f=t[i+2],u=t[i+3],(c&192)===128&&(f&192)===128&&(u&192)===128&&(l=(o&15)<<18|(c&63)<<12|(f&63)<<6|u&63,l>65535&&l<1114112&&(s=l))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return M0(n)}var Eu=4096;function M0(t){let e=t.length;if(e<=Eu)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Eu));return r}function q0(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function j0(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function F0(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=z0[t[o]];return i}function $0(t,e,r){let n=t.slice(e,r),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}E.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,E.prototype),i};function we(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}E.prototype.readUintLE=E.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||we(e,r,this.length);let i=this[e],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[e+s]*o;return i};E.prototype.readUintBE=E.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||we(e,r,this.length);let i=this[e+--r],o=1;for(;r>0&&(o*=256);)i+=this[e+--r]*o;return i};E.prototype.readUint8=E.prototype.readUInt8=function(e,r){return e=e>>>0,r||we(e,1,this.length),this[e]};E.prototype.readUint16LE=E.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||we(e,2,this.length),this[e]|this[e+1]<<8};E.prototype.readUint16BE=E.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||we(e,2,this.length),this[e]<<8|this[e+1]};E.prototype.readUint32LE=E.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||we(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};E.prototype.readUint32BE=E.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||we(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};E.prototype.readBigUInt64LE=Zt(function(e){e=e>>>0,ln(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Vn(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});E.prototype.readBigUInt64BE=Zt(function(e){e=e>>>0,ln(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Vn(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});E.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||we(e,r,this.length);let i=this[e],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};E.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||we(e,r,this.length);let i=r,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};E.prototype.readInt8=function(e,r){return e=e>>>0,r||we(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};E.prototype.readInt16LE=function(e,r){e=e>>>0,r||we(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};E.prototype.readInt16BE=function(e,r){e=e>>>0,r||we(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};E.prototype.readInt32LE=function(e,r){return e=e>>>0,r||we(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};E.prototype.readInt32BE=function(e,r){return e=e>>>0,r||we(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};E.prototype.readBigInt64LE=Zt(function(e){e=e>>>0,ln(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Vn(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});E.prototype.readBigInt64BE=Zt(function(e){e=e>>>0,ln(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Vn(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});E.prototype.readFloatLE=function(e,r){return e=e>>>0,r||we(e,4,this.length),un.read(this,e,!0,23,4)};E.prototype.readFloatBE=function(e,r){return e=e>>>0,r||we(e,4,this.length),un.read(this,e,!1,23,4)};E.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||we(e,8,this.length),un.read(this,e,!0,52,8)};E.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||we(e,8,this.length),un.read(this,e,!1,52,8)};function ke(t,e,r,n,i,o){if(!E.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}E.prototype.writeUintLE=E.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;ke(this,e,r,n,a,0)}let o=1,s=0;for(this[r]=e&255;++s<n&&(o*=256);)this[r+s]=e/o&255;return r+n};E.prototype.writeUintBE=E.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;ke(this,e,r,n,a,0)}let o=n-1,s=1;for(this[r+o]=e&255;--o>=0&&(s*=256);)this[r+o]=e/s&255;return r+n};E.prototype.writeUint8=E.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||ke(this,e,r,1,255,0),this[r]=e&255,r+1};E.prototype.writeUint16LE=E.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||ke(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};E.prototype.writeUint16BE=E.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||ke(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};E.prototype.writeUint32LE=E.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||ke(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};E.prototype.writeUint32BE=E.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||ke(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function ku(t,e,r,n,i){Cu(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,r}function Pu(t,e,r,n,i){Cu(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o=o>>8,t[r+6]=o,o=o>>8,t[r+5]=o,o=o>>8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s=s>>8,t[r+2]=s,s=s>>8,t[r+1]=s,s=s>>8,t[r]=s,r+8}E.prototype.writeBigUInt64LE=Zt(function(e,r=0){return ku(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});E.prototype.writeBigUInt64BE=Zt(function(e,r=0){return Pu(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});E.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let c=Math.pow(2,8*n-1);ke(this,e,r,n,c-1,-c)}let o=0,s=1,a=0;for(this[r]=e&255;++o<n&&(s*=256);)e<0&&a===0&&this[r+o-1]!==0&&(a=1),this[r+o]=(e/s>>0)-a&255;return r+n};E.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let c=Math.pow(2,8*n-1);ke(this,e,r,n,c-1,-c)}let o=n-1,s=1,a=0;for(this[r+o]=e&255;--o>=0&&(s*=256);)e<0&&a===0&&this[r+o+1]!==0&&(a=1),this[r+o]=(e/s>>0)-a&255;return r+n};E.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||ke(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};E.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||ke(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};E.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||ke(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};E.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||ke(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};E.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||ke(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};E.prototype.writeBigInt64LE=Zt(function(e,r=0){return ku(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});E.prototype.writeBigInt64BE=Zt(function(e,r=0){return Pu(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Iu(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Ru(t,e,r,n,i){return e=+e,r=r>>>0,i||Iu(t,e,r,4,34028234663852886e22,-34028234663852886e22),un.write(t,e,r,n,23,4),r+4}E.prototype.writeFloatLE=function(e,r,n){return Ru(this,e,r,!0,n)};E.prototype.writeFloatBE=function(e,r,n){return Ru(this,e,r,!1,n)};function Uu(t,e,r,n,i){return e=+e,r=r>>>0,i||Iu(t,e,r,8,17976931348623157e292,-17976931348623157e292),un.write(t,e,r,n,52,8),r+8}E.prototype.writeDoubleLE=function(e,r,n){return Uu(this,e,r,!0,n)};E.prototype.writeDoubleBE=function(e,r,n){return Uu(this,e,r,!1,n)};E.prototype.copy=function(e,r,n,i){if(!E.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),o};E.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!E.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=r;o<n;++o)this[o]=e;else{let s=E.isBuffer(e)?e:E.from(e,i),a=s.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=s[o%a]}return this};var fn={};function Fs(t,e,r){fn[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Fs("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Fs("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);Fs("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=_u(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=_u(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function _u(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function V0(t,e,r){ln(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Vn(e,t.length-(r+1))}function Cu(t,e,r,n,i,o){if(t>r||t<e){let s=typeof e=="bigint"?"n":"",a;throw o>3?e===0||e===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${e}${s} and <= ${r}${s}`,new fn.ERR_OUT_OF_RANGE("value",a,t)}V0(n,i,o)}function ln(t,e){if(typeof t!="number")throw new fn.ERR_INVALID_ARG_TYPE(e,"number",t)}function Vn(t,e,r){throw Math.floor(t)!==t?(ln(t,r),new fn.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new fn.ERR_BUFFER_OUT_OF_BOUNDS:new fn.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var H0=/[^+/0-9A-Za-z-_]/g;function G0(t){if(t=t.split("=")[0],t=t.trim().replace(H0,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Ms(t,e){e=e||1/0;let r,n=t.length,i=null,o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function J0(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function W0(t,e){let r,n,i,o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function Lu(t){return Ks.toByteArray(G0(t))}function qi(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function ct(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function $s(t){return t!==t}var z0=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function Zt(t){return typeof BigInt>"u"?Y0:t}function Y0(){throw new Error("BigInt not supported")}});var Hs=D((V_,Ou)=>{"use strict";var Vs=null;Ou.exports=function(){return Vs===null&&(Vs={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),Vs}});var Ws=D(Ku=>{"use strict";var Gs=Je(),Z0=new Set(["buffer","view","utf8"]),Js=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!Z0.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new Gs(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new Gs(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new Gs(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};Ku.Encoding=Js});var Xs=D(ji=>{"use strict";var{Buffer:Ys}=Me()||{},{Encoding:Zs}=Ws(),X0=Hs(),Hn=class extends Zs{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new Gn({encode:this.encode,decode:e=>this.decode(Ys.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},Gn=class extends Zs{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new Hn({encode:e=>{let r=this.encode(e);return Ys.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},zs=class extends Zs{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new Hn({encode:e=>Ys.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:r}=X0();return new Gn({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(r.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};ji.BufferFormat=Hn;ji.ViewFormat=Gn;ji.UTF8Format=zs});var qu=D(Ar=>{"use strict";var{Buffer:_e}=Me()||{Buffer:{isBuffer:()=>!1}},{textEncoder:Du,textDecoder:Nu}=Hs()(),{BufferFormat:Jn,ViewFormat:Qs,UTF8Format:Mu}=Xs(),Fi=t=>t;Ar.utf8=new Mu({encode:function(t){return _e.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?Nu.decode(t):String(t)},decode:Fi,name:"utf8",createViewTranscoder(){return new Qs({encode:function(t){return ArrayBuffer.isView(t)?t:Du.encode(t)},decode:function(t){return Nu.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new Jn({encode:function(t){return _e.isBuffer(t)?t:ArrayBuffer.isView(t)?_e.from(t.buffer,t.byteOffset,t.byteLength):_e.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});Ar.json=new Mu({encode:JSON.stringify,decode:JSON.parse,name:"json"});Ar.buffer=new Jn({encode:function(t){return _e.isBuffer(t)?t:ArrayBuffer.isView(t)?_e.from(t.buffer,t.byteOffset,t.byteLength):_e.from(String(t),"utf8")},decode:Fi,name:"buffer",createViewTranscoder(){return new Qs({encode:function(t){return ArrayBuffer.isView(t)?t:_e.from(String(t),"utf8")},decode:function(t){return _e.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});Ar.view=new Qs({encode:function(t){return ArrayBuffer.isView(t)?t:Du.encode(t)},decode:Fi,name:"view",createBufferTranscoder(){return new Jn({encode:function(t){return _e.isBuffer(t)?t:ArrayBuffer.isView(t)?_e.from(t.buffer,t.byteOffset,t.byteLength):_e.from(String(t),"utf8")},decode:Fi,name:`${this.name}+buffer`})}});Ar.hex=new Jn({encode:function(t){return _e.isBuffer(t)?t:_e.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});Ar.base64=new Jn({encode:function(t){return _e.isBuffer(t)?t:_e.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"})});var $u=D(Fu=>{"use strict";var ju=Je(),Vi=qu(),{Encoding:Q0}=Ws(),{BufferFormat:ew,ViewFormat:tw,UTF8Format:rw}=Xs(),Wn=Symbol("formats"),$i=Symbol("encodings"),nw=new Set(["buffer","view","utf8"]),ea=class{constructor(e){if(Array.isArray(e)){if(!e.every(r=>nw.has(r)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[$i]=new Map,this[Wn]=new Set(e);for(let r in Vi)try{this.encoding(r)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[$i].values()))}encoding(e){let r=this[$i].get(e);if(r===void 0){if(typeof e=="string"&&e!==""){if(r=aw[e],!r)throw new ju(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");r=iw(e)}let{name:n,format:i}=r;if(!this[Wn].has(i))if(this[Wn].has("view"))r=r.createViewTranscoder();else if(this[Wn].has("buffer"))r=r.createBufferTranscoder();else if(this[Wn].has("utf8"))r=r.createUTF8Transcoder();else throw new ju(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,n,r.name,r.commonName])this[$i].set(o,r)}return r}};Fu.Transcoder=ea;function iw(t){if(t instanceof Q0)return t;let e="type"in t&&typeof t.type=="string"?t.type:void 0,r=t.name||e||`anonymous-${cw++}`;switch(ow(t)){case"view":return new tw({...t,name:r});case"utf8":return new rw({...t,name:r});case"buffer":return new ew({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function ow(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}var sw={binary:Vi.buffer,"utf-8":Vi.utf8},aw={...Vi,...sw},cw=0});var zn=D((z_,ta)=>{"use strict";var hn=typeof Reflect=="object"?Reflect:null,Vu=hn&&typeof hn.apply=="function"?hn.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Hi;hn&&typeof hn.ownKeys=="function"?Hi=hn.ownKeys:Object.getOwnPropertySymbols?Hi=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Hi=function(e){return Object.getOwnPropertyNames(e)};function fw(t){console&&console.warn&&console.warn(t)}var Gu=Number.isNaN||function(e){return e!==e};function re(){re.init.call(this)}ta.exports=re;ta.exports.once=hw;re.EventEmitter=re;re.prototype._events=void 0;re.prototype._eventsCount=0;re.prototype._maxListeners=void 0;var Hu=10;function Gi(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(re,"defaultMaxListeners",{enumerable:!0,get:function(){return Hu},set:function(t){if(typeof t!="number"||t<0||Gu(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Hu=t}});re.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};re.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Gu(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Ju(t){return t._maxListeners===void 0?re.defaultMaxListeners:t._maxListeners}re.prototype.getMaxListeners=function(){return Ju(this)};re.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")Vu(c,this,r);else for(var f=c.length,u=Xu(c,f),n=0;n<f;++n)Vu(u[n],this,r);return!0};function Wu(t,e,r,n){var i,o,s;if(Gi(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),s===void 0)s=o[e]=r,++t._eventsCount;else if(typeof s=="function"?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=Ju(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,fw(a)}return t}re.prototype.addListener=function(e,r){return Wu(this,e,r,!1)};re.prototype.on=re.prototype.addListener;re.prototype.prependListener=function(e,r){return Wu(this,e,r,!0)};function uw(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function zu(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=uw.bind(n);return i.listener=r,n.wrapFn=i,i}re.prototype.once=function(e,r){return Gi(r),this.on(e,zu(this,e,r)),this};re.prototype.prependOnceListener=function(e,r){return Gi(r),this.prependListener(e,zu(this,e,r)),this};re.prototype.removeListener=function(e,r){var n,i,o,s,a;if(Gi(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===r||n[s].listener===r){a=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():lw(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};re.prototype.off=re.prototype.removeListener;re.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Yu(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?dw(i):Xu(i,i.length)}re.prototype.listeners=function(e){return Yu(this,e,!0)};re.prototype.rawListeners=function(e){return Yu(this,e,!1)};re.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Zu.call(t,e)};re.prototype.listenerCount=Zu;function Zu(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}re.prototype.eventNames=function(){return this._eventsCount>0?Hi(this._events):[]};function Xu(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function lw(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function dw(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function hw(t,e){return new Promise(function(r,n){function i(s){t.removeListener(e,o),n(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Qu(t,e,o,{once:!0}),e!=="error"&&pw(t,i,{once:!0})})}function pw(t,e,r){typeof t.on=="function"&&Qu(t,"error",e,r)}function Qu(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){n.once&&t.removeEventListener(e,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var tl=D((Y_,el)=>{el.exports=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t)});var Yn=D(ra=>{"use strict";var rl=tl();ra.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(n,i){t=function(o,s){o?i(o):n(s)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};ra.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){rl(()=>e(null,r))}).catch(function(r){rl(()=>e(r))})}});var Ji=D(na=>{"use strict";na.getCallback=function(t,e){return typeof t=="function"?t:e};na.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}}});var nr=D(Zi=>{"use strict";var{fromCallback:ia}=Yn(),Ue=Je(),{getOptions:oa,getCallback:nl}=Ji(),Sr=Symbol("promise"),pn=Symbol("callback"),ft=Symbol("working"),vr=Symbol("handleOne"),Bt=Symbol("handleMany"),sa=Symbol("autoClose"),tr=Symbol("finishWork"),ut=Symbol("returnMany"),Xt=Symbol("closing"),Zn=Symbol("handleClose"),Wi=Symbol("closed"),Xn=Symbol("closeCallbacks"),er=Symbol("keyEncoding"),Br=Symbol("valueEncoding"),aa=Symbol("abortOnClose"),zi=Symbol("legacy"),ca=Symbol("keys"),fa=Symbol("values"),Qt=Symbol("limit"),qe=Symbol("count"),Yi=Object.freeze({}),yw=()=>{},il=!1,Qn=class{constructor(e,r,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof r!="object"||r===null)throw new TypeError("The second argument must be an options object");this[Wi]=!1,this[Xn]=[],this[ft]=!1,this[Xt]=!1,this[sa]=!1,this[pn]=null,this[vr]=this[vr].bind(this),this[Bt]=this[Bt].bind(this),this[Zn]=this[Zn].bind(this),this[er]=r[er],this[Br]=r[Br],this[zi]=n,this[Qt]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[qe]=0,this[aa]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[qe]}get limit(){return this[Qt]}next(e){let r;if(e===void 0)r=new Promise((n,i)=>{e=(o,s,a)=>{o?i(o):this[zi]?s===void 0&&a===void 0?n():n([s,a]):n(s)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[Xt]?this.nextTick(e,new Ue("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[ft]?this.nextTick(e,new Ue("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[ft]=!0,this[pn]=e,this[qe]>=this[Qt]?this.nextTick(this[vr],null):this._next(this[vr])),r}_next(e){this.nextTick(e)}nextv(e,r,n){return n=nl(r,n),n=ia(n,Sr),r=oa(r,Yi),Number.isInteger(e)?(this[Xt]?this.nextTick(n,new Ue("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[ft]?this.nextTick(n,new Ue("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[Qt]<1/0&&(e=Math.min(e,this[Qt]-this[qe])),this[ft]=!0,this[pn]=n,e<=0?this.nextTick(this[Bt],null,[]):this._nextv(e,r,this[Bt])),n[Sr]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[Sr])}_nextv(e,r,n){let i=[],o=(s,a,c)=>{if(s)return n(s);if(this[zi]?a===void 0&&c===void 0:a===void 0)return n(null,i);i.push(this[zi]?[a,c]:a),i.length===e?n(null,i):this._next(o)};this._next(o)}all(e,r){return r=nl(e,r),r=ia(r,Sr),e=oa(e,Yi),this[Xt]?this.nextTick(r,new Ue("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[ft]?this.nextTick(r,new Ue("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[ft]=!0,this[pn]=r,this[sa]=!0,this[qe]>=this[Qt]?this.nextTick(this[Bt],null,[]):this._all(e,this[Bt])),r[Sr]}_all(e,r){let n=this[qe],i=[],o=()=>{let a=this[Qt]<1/0?Math.min(1e3,this[Qt]-n):1e3;a<=0?this.nextTick(r,null,i):this._nextv(a,Yi,s)},s=(a,c)=>{a?r(a):c.length===0?r(null,i):(i.push.apply(i,c),n+=c.length,o())};o()}[tr](){let e=this[pn];return this[aa]&&e===null?yw:(this[ft]=!1,this[pn]=null,this[Xt]&&this._close(this[Zn]),e)}[ut](e,r,n){this[sa]?this.close(e.bind(null,r,n)):e(r,n)}seek(e,r){if(r=oa(r,Yi),!this[Xt]){if(this[ft])throw new Ue("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(r.keyEncoding||this[er]),i=n.format;r.keyEncoding!==i&&(r={...r,keyEncoding:i});let o=this.db.prefixKey(n.encode(e),i);this._seek(o,r)}}}_seek(e,r){throw new Ue("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=ia(e,Sr),this[Wi]?this.nextTick(e):this[Xt]?this[Xn].push(e):(this[Xt]=!0,this[Xn].push(e),this[ft]?this[aa]&&this[tr]()(new Ue("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Zn])),e[Sr]}_close(e){this.nextTick(e)}[Zn](){this[Wi]=!0,this.db.detachResource(this);let e=this[Xn];this[Xn]=[];for(let r of e)r()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[Wi]||await this.close()}}},yn=class extends Qn{constructor(e,r){super(e,r,!0),this[ca]=r.keys!==!1,this[fa]=r.values!==!1}[vr](e,r,n){let i=this[tr]();if(e)return i(e);try{r=this[ca]&&r!==void 0?this[er].decode(r):void 0,n=this[fa]&&n!==void 0?this[Br].decode(n):void 0}catch(o){return i(new rr("entry",o))}r===void 0&&n===void 0||this[qe]++,i(null,r,n)}[Bt](e,r){let n=this[tr]();if(e)return this[ut](n,e);try{for(let i of r){let o=i[0],s=i[1];i[0]=this[ca]&&o!==void 0?this[er].decode(o):void 0,i[1]=this[fa]&&s!==void 0?this[Br].decode(s):void 0}}catch(i){return this[ut](n,new rr("entries",i))}this[qe]+=r.length,this[ut](n,null,r)}end(e){return!il&&typeof console<"u"&&(il=!0,console.warn(new Ue("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},ua=class extends Qn{constructor(e,r){super(e,r,!1)}[vr](e,r){let n=this[tr]();if(e)return n(e);try{r=r!==void 0?this[er].decode(r):void 0}catch(i){return n(new rr("key",i))}r!==void 0&&this[qe]++,n(null,r)}[Bt](e,r){let n=this[tr]();if(e)return this[ut](n,e);try{for(let i=0;i<r.length;i++){let o=r[i];r[i]=o!==void 0?this[er].decode(o):void 0}}catch(i){return this[ut](n,new rr("keys",i))}this[qe]+=r.length,this[ut](n,null,r)}},la=class extends Qn{constructor(e,r){super(e,r,!1)}[vr](e,r){let n=this[tr]();if(e)return n(e);try{r=r!==void 0?this[Br].decode(r):void 0}catch(i){return n(new rr("value",i))}r!==void 0&&this[qe]++,n(null,r)}[Bt](e,r){let n=this[tr]();if(e)return this[ut](n,e);try{for(let i=0;i<r.length;i++){let o=r[i];r[i]=o!==void 0?this[Br].decode(o):void 0}}catch(i){return this[ut](n,new rr("values",i))}this[qe]+=r.length,this[ut](n,null,r)}},rr=class extends Ue{constructor(e,r){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:r})}};for(let t of["_ended property","_nexting property","_end method"])Object.defineProperty(yn.prototype,t.split(" ")[0],{get(){throw new Ue(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Ue(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});yn.keyEncoding=er;yn.valueEncoding=Br;Zi.AbstractIterator=yn;Zi.AbstractKeyIterator=ua;Zi.AbstractValueIterator=la});var ol=D(da=>{"use strict";var{AbstractKeyIterator:ww,AbstractValueIterator:mw}=nr(),Tr=Symbol("iterator"),ei=Symbol("callback"),wn=Symbol("handleOne"),kr=Symbol("handleMany"),ti=class extends ww{constructor(e,r){super(e,r),this[Tr]=e.iterator({...r,keys:!0,values:!1}),this[wn]=this[wn].bind(this),this[kr]=this[kr].bind(this)}},Xi=class extends mw{constructor(e,r){super(e,r),this[Tr]=e.iterator({...r,keys:!1,values:!0}),this[wn]=this[wn].bind(this),this[kr]=this[kr].bind(this)}};for(let t of[ti,Xi]){let e=t===ti,r=e?n=>n[0]:n=>n[1];t.prototype._next=function(n){this[ei]=n,this[Tr].next(this[wn])},t.prototype[wn]=function(n,i,o){let s=this[ei];n?s(n):s(null,e?i:o)},t.prototype._nextv=function(n,i,o){this[ei]=o,this[Tr].nextv(n,i,this[kr])},t.prototype._all=function(n,i){this[ei]=i,this[Tr].all(n,this[kr])},t.prototype[kr]=function(n,i){let o=this[ei];n?o(n):o(null,i.map(r))},t.prototype._seek=function(n,i){this[Tr].seek(n,i)},t.prototype._close=function(n){this[Tr].close(n)}}da.DefaultKeyIterator=ti;da.DefaultValueIterator=Xi});var sl=D(io=>{"use strict";var{AbstractIterator:bw,AbstractKeyIterator:gw,AbstractValueIterator:xw}=nr(),ha=Je(),Pe=Symbol("nut"),ro=Symbol("undefer"),no=Symbol("factory"),Qi=class extends bw{constructor(e,r){super(e,r),this[Pe]=null,this[no]=()=>e.iterator(r),this.db.defer(()=>this[ro]())}},eo=class extends gw{constructor(e,r){super(e,r),this[Pe]=null,this[no]=()=>e.keys(r),this.db.defer(()=>this[ro]())}},to=class extends xw{constructor(e,r){super(e,r),this[Pe]=null,this[no]=()=>e.values(r),this.db.defer(()=>this[ro]())}};for(let t of[Qi,eo,to])t.prototype[ro]=function(){this.db.status==="open"&&(this[Pe]=this[no]())},t.prototype._next=function(e){this[Pe]!==null?this[Pe].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new ha("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,r,n){this[Pe]!==null?this[Pe].nextv(e,r,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,r,n)):this.nextTick(n,new ha("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,r){this[Pe]!==null?this[Pe].all(r):this.db.status==="opening"?this.db.defer(()=>this._all(e,r)):this.nextTick(r,new ha("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,r){this[Pe]!==null?this[Pe]._seek(e,r):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,r))},t.prototype._close=function(e){this[Pe]!==null?this[Pe].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};io.DeferredIterator=Qi;io.DeferredKeyIterator=eo;io.DeferredValueIterator=to});var ya=D(cl=>{"use strict";var{fromCallback:al}=Yn(),oo=Je(),{getCallback:Ew,getOptions:_w}=Ji(),so=Symbol("promise"),je=Symbol("status"),mn=Symbol("operations"),ri=Symbol("finishClose"),bn=Symbol("closeCallbacks"),pa=class{constructor(e){if(typeof e!="object"||e===null){let r=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${r}`)}this[mn]=[],this[bn]=[],this[je]="open",this[ri]=this[ri].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[mn].length}put(e,r,n){if(this[je]!=="open")throw new oo("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(r);if(i)throw i;let o=n&&n.sublevel!=null?n.sublevel:this.db,s=n,a=o.keyEncoding(n&&n.keyEncoding),c=o.valueEncoding(n&&n.valueEncoding),f=a.format;n={...n,keyEncoding:f,valueEncoding:c.format},o!==this.db&&(n.sublevel=null);let u=o.prefixKey(a.encode(e),f),l=c.encode(r);return this._put(u,l,n),this[mn].push({...s,type:"put",key:e,value:r}),this}_put(e,r,n){}del(e,r){if(this[je]!=="open")throw new oo("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=r&&r.sublevel!=null?r.sublevel:this.db,o=r,s=i.keyEncoding(r&&r.keyEncoding),a=s.format;return r={...r,keyEncoding:a},i!==this.db&&(r.sublevel=null),this._del(i.prefixKey(s.encode(e),a),r),this[mn].push({...o,type:"del",key:e}),this}_del(e,r){}clear(){if(this[je]!=="open")throw new oo("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[mn]=[],this}_clear(){}write(e,r){return r=Ew(e,r),r=al(r,so),e=_w(e),this[je]!=="open"?this.nextTick(r,new oo("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(r):(this[je]="writing",this._write(e,n=>{this[je]="closing",this[bn].push(()=>r(n)),n||this.db.emit("batch",this[mn]),this._close(this[ri])})),r[so]}_write(e,r){}close(e){return e=al(e,so),this[je]==="closing"?this[bn].push(e):this[je]==="closed"?this.nextTick(e):(this[bn].push(e),this[je]!=="writing"&&(this[je]="closing",this._close(this[ri]))),e[so]}_close(e){this.nextTick(e)}[ri](){this[je]="closed",this.db.detachResource(this);let e=this[bn];this[bn]=[];for(let r of e)r()}};cl.AbstractChainedBatch=pa});var ul=D(fl=>{"use strict";var{AbstractChainedBatch:Aw}=ya(),Sw=Je(),gn=Symbol("encoded"),wa=class extends Aw{constructor(e){super(e),this[gn]=[]}_put(e,r,n){this[gn].push({...n,type:"put",key:e,value:r})}_del(e,r){this[gn].push({...r,type:"del",key:e})}_clear(){this[gn]=[]}_write(e,r){this.db.status==="opening"?this.db.defer(()=>this._write(e,r)):this.db.status==="open"?this[gn].length===0?this.nextTick(r):this.db._batch(this[gn],e,r):this.nextTick(r,new Sw("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};fl.DefaultChainedBatch=wa});var hl=D((iA,dl)=>{"use strict";var ll=Je(),vw=Object.prototype.hasOwnProperty,Bw=new Set(["lt","lte","gt","gte"]);dl.exports=function(t,e){let r={};for(let n in t)if(vw.call(t,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new ll(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new ll("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});Bw.has(n)?r[n]=e.encode(t[n]):r[n]=t[n]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r}});var ma=D((oA,yl)=>{var pl;yl.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):t=>(pl||(pl=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0))});var bl=D((sA,ml)=>{"use strict";var wl=ma();ml.exports=function(t,...e){e.length===0?wl(t):wl(()=>t(...e))}});var gl=D(ao=>{"use strict";var{AbstractIterator:Tw,AbstractKeyIterator:kw,AbstractValueIterator:Pw}=nr(),xn=Symbol("unfix"),We=Symbol("iterator"),Pr=Symbol("handleOne"),ir=Symbol("handleMany"),Tt=Symbol("callback"),ni=class extends Tw{constructor(e,r,n,i){super(e,r),this[We]=n,this[xn]=i,this[Pr]=this[Pr].bind(this),this[ir]=this[ir].bind(this),this[Tt]=null}[Pr](e,r,n){let i=this[Tt];if(e)return i(e);r!==void 0&&(r=this[xn](r)),i(e,r,n)}[ir](e,r){let n=this[Tt];if(e)return n(e);for(let i of r){let o=i[0];o!==void 0&&(i[0]=this[xn](o))}n(e,r)}},ii=class extends kw{constructor(e,r,n,i){super(e,r),this[We]=n,this[xn]=i,this[Pr]=this[Pr].bind(this),this[ir]=this[ir].bind(this),this[Tt]=null}[Pr](e,r){let n=this[Tt];if(e)return n(e);r!==void 0&&(r=this[xn](r)),n(e,r)}[ir](e,r){let n=this[Tt];if(e)return n(e);for(let i=0;i<r.length;i++){let o=r[i];o!==void 0&&(r[i]=this[xn](o))}n(e,r)}},oi=class extends Pw{constructor(e,r,n){super(e,r),this[We]=n}};for(let t of[ni,ii])t.prototype._next=function(e){this[Tt]=e,this[We].next(this[Pr])},t.prototype._nextv=function(e,r,n){this[Tt]=n,this[We].nextv(e,r,this[ir])},t.prototype._all=function(e,r){this[Tt]=r,this[We].all(e,this[ir])};for(let t of[oi])t.prototype._next=function(e){this[We].next(e)},t.prototype._nextv=function(e,r,n){this[We].nextv(e,r,n)},t.prototype._all=function(e,r){this[We].all(e,r)};for(let t of[ni,ii,oi])t.prototype._seek=function(e,r){this[We].seek(e,r)},t.prototype._close=function(e){this[We].close(e)};ao.AbstractSublevelIterator=ni;ao.AbstractSublevelKeyIterator=ii;ao.AbstractSublevelValueIterator=oi});var Al=D((cA,_l)=>{"use strict";var ba=Je(),{Buffer:Ea}=Me()||{},{AbstractSublevelIterator:Iw,AbstractSublevelKeyIterator:Rw,AbstractSublevelValueIterator:Uw}=gl(),kt=Symbol("prefix"),xl=Symbol("upperBound"),si=Symbol("prefixRange"),Ce=Symbol("parent"),ga=Symbol("unfix"),El=new TextEncoder,Cw={separator:"!"};_l.exports=function({AbstractLevel:t}){class e extends t{static defaults(n){if(typeof n=="string")throw new ba("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new ba("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?Cw:n.separator?n:{...n,separator:"!"}}constructor(n,i,o){let{separator:s,manifest:a,...c}=e.defaults(o);i=Ow(i,s);let f=s.charCodeAt(0)+1,u=n[Ce]||n;if(!El.encode(i).every(y=>y>f&&y<127))throw new ba(`Prefix must use bytes > ${f} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(Lw(u,a),c);let l=(n.prefix||"")+s+i+s,p=l.slice(0,-1)+String.fromCharCode(f);this[Ce]=u,this[kt]=new co(l),this[xl]=new co(p),this[ga]=new _a,this.nextTick=u.nextTick}prefixKey(n,i){if(i==="utf8")return this[kt].utf8+n;if(n.byteLength===0)return this[kt][i];if(i==="view"){let o=this[kt].view,s=new Uint8Array(o.byteLength+n.byteLength);return s.set(o,0),s.set(n,o.byteLength),s}else{let o=this[kt].buffer;return Ea.concat([o,n],o.byteLength+n.byteLength)}}[si](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[kt][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[xl][i]}get prefix(){return this[kt].utf8}get db(){return this[Ce]}_open(n,i){this[Ce].open({passive:!0},i)}_put(n,i,o,s){this[Ce].put(n,i,o,s)}_get(n,i,o){this[Ce].get(n,i,o)}_getMany(n,i,o){this[Ce].getMany(n,i,o)}_del(n,i,o){this[Ce].del(n,i,o)}_batch(n,i,o){this[Ce].batch(n,i,o)}_clear(n,i){this[si](n,n.keyEncoding),this[Ce].clear(n,i)}_iterator(n){this[si](n,n.keyEncoding);let i=this[Ce].iterator(n),o=this[ga].get(this[kt].utf8.length,n.keyEncoding);return new Iw(this,n,i,o)}_keys(n){this[si](n,n.keyEncoding);let i=this[Ce].keys(n),o=this[ga].get(this[kt].utf8.length,n.keyEncoding);return new Rw(this,n,i,o)}_values(n){this[si](n,n.keyEncoding);let i=this[Ce].values(n);return new Uw(this,n,i)}}return{AbstractSublevel:e}};var Lw=function(t,e){return{...t.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:xa(t,"utf8"),buffer:xa(t,"buffer"),view:xa(t,"view")}}},xa=function(t,e){return t.supports.encodings[e]?t.keyEncoding(e).name===e:!1},co=class{constructor(e){this.utf8=e,this.view=El.encode(e),this.buffer=Ea?Ea.from(this.view.buffer,0,this.view.byteLength):{}}},_a=class{constructor(){this.cache=new Map}get(e,r){let n=this.cache.get(r);return n===void 0&&(r==="view"?n=(function(i,o){return o.subarray(i)}).bind(null,e):n=(function(i,o){return o.slice(i)}).bind(null,e),this.cache.set(r,n)),n}},Ow=function(t,e){let r=0,n=t.length;for(;r<n&&t[r]===e;)r++;for(;n>r&&t[n-1]===e;)n--;return t.slice(r,n)}});var Ta=D(Ba=>{"use strict";var{supports:Kw}=hu(),{Transcoder:Nw}=$u(),{EventEmitter:Dw}=zn(),{fromCallback:or}=Yn(),ze=Je(),{AbstractIterator:Ir}=nr(),{DefaultKeyIterator:Mw,DefaultValueIterator:qw}=ol(),{DeferredIterator:jw,DeferredKeyIterator:Fw,DeferredValueIterator:$w}=sl(),{DefaultChainedBatch:Sl}=ul(),{getCallback:Rr,getOptions:sr}=Ji(),fo=hl(),W=Symbol("promise"),Pt=Symbol("landed"),Ur=Symbol("resources"),Aa=Symbol("closeResources"),ai=Symbol("operations"),ci=Symbol("undefer"),uo=Symbol("deferOpen"),vl=Symbol("options"),X=Symbol("status"),Cr=Symbol("defaultOptions"),En=Symbol("transcoder"),lo=Symbol("keyEncoding"),Sa=Symbol("valueEncoding"),Vw=()=>{},fi=class extends Dw{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");r=sr(r);let{keyEncoding:n,valueEncoding:i,passive:o,...s}=r;this[Ur]=new Set,this[ai]=[],this[uo]=!0,this[vl]=s,this[X]="opening",this.supports=Kw(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[En]=new Nw(Hw(this)),this[lo]=this[En].encoding(n||"utf8"),this[Sa]=this[En].encoding(i||"utf8");for(let a of this[En].encodings())this.supports.encodings[a.commonName]||(this.supports.encodings[a.commonName]=!0);this[Cr]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[lo].commonName,valueEncoding:this[Sa].commonName}),key:Object.freeze({keyEncoding:this[lo].commonName})},this.nextTick(()=>{this[uo]&&this.open({passive:!1},Vw)})}get status(){return this[X]}keyEncoding(e){return this[En].encoding(e??this[lo])}valueEncoding(e){return this[En].encoding(e??this[Sa])}open(e,r){r=Rr(e,r),r=or(r,W),e={...this[vl],...sr(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[X]==="closing"||this[X]==="opening"?this.once(Pt,i?()=>n(i):n):this[X]!=="open"?r(new ze("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):r()};return e.passive?this[X]==="opening"?this.once(Pt,n):this.nextTick(n):this[X]==="closed"||this[uo]?(this[uo]=!1,this[X]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[X]="closed",this[Aa](()=>{this.emit(Pt),n(i)}),this[ci]();return}this[X]="open",this[ci](),this.emit(Pt),this[X]==="open"&&this.emit("open"),this[X]==="open"&&this.emit("ready"),n()})):this[X]==="open"?this.nextTick(n):this.once(Pt,()=>this.open(e,r)),r[W]}_open(e,r){this.nextTick(r)}close(e){e=or(e,W);let r=n=>{this[X]==="opening"||this[X]==="closing"?this.once(Pt,n?r(n):r):this[X]!=="closed"?e(new ze("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[X]==="open"){this[X]="closing",this.emit("closing");let n=i=>{this[X]="open",this[ci](),this.emit(Pt),r(i)};this[Aa](()=>{this._close(i=>{if(i)return n(i);this[X]="closed",this[ci](),this.emit(Pt),this[X]==="closed"&&this.emit("closed"),r()})})}else this[X]==="closed"?this.nextTick(r):this.once(Pt,()=>this.close(e));return e[W]}[Aa](e){if(this[Ur].size===0)return this.nextTick(e);let r=this[Ur].size,n=!0,i=()=>{--r===0&&(n?this.nextTick(e):e())};for(let o of this[Ur])o.close(i);n=!1,this[Ur].clear()}_close(e){this.nextTick(e)}get(e,r,n){if(n=Rr(r,n),n=or(n,W),r=sr(r,this[Cr].entry),this[X]==="opening")return this.defer(()=>this.get(e,r,n)),n[W];if(_n(this,n))return n[W];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[W];let o=this.keyEncoding(r.keyEncoding),s=this.valueEncoding(r.valueEncoding),a=o.format,c=s.format;return(r.keyEncoding!==a||r.valueEncoding!==c)&&(r=Object.assign({},r,{keyEncoding:a,valueEncoding:c})),this._get(this.prefixKey(o.encode(e),a),r,(f,u)=>{if(f)return(f.code==="LEVEL_NOT_FOUND"||f.notFound||/NotFound/i.test(f))&&(f.code||(f.code="LEVEL_NOT_FOUND"),f.notFound||(f.notFound=!0),f.status||(f.status=404)),n(f);try{u=s.decode(u)}catch(l){return n(new ze("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:l}))}n(null,u)}),n[W]}_get(e,r,n){this.nextTick(n,new Error("NotFound"))}getMany(e,r,n){if(n=Rr(r,n),n=or(n,W),r=sr(r,this[Cr].entry),this[X]==="opening")return this.defer(()=>this.getMany(e,r,n)),n[W];if(_n(this,n))return n[W];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[W];if(e.length===0)return this.nextTick(n,null,[]),n[W];let i=this.keyEncoding(r.keyEncoding),o=this.valueEncoding(r.valueEncoding),s=i.format,a=o.format;(r.keyEncoding!==s||r.valueEncoding!==a)&&(r=Object.assign({},r,{keyEncoding:s,valueEncoding:a}));let c=new Array(e.length);for(let f=0;f<e.length;f++){let u=e[f],l=this._checkKey(u);if(l)return this.nextTick(n,l),n[W];c[f]=this.prefixKey(i.encode(u),s)}return this._getMany(c,r,(f,u)=>{if(f)return n(f);try{for(let l=0;l<u.length;l++)u[l]!==void 0&&(u[l]=o.decode(u[l]))}catch(l){return n(new ze(`Could not decode one or more of ${u.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:l}))}n(null,u)}),n[W]}_getMany(e,r,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,r,n,i){if(i=Rr(n,i),i=or(i,W),n=sr(n,this[Cr].entry),this[X]==="opening")return this.defer(()=>this.put(e,r,n,i)),i[W];if(_n(this,i))return i[W];let o=this._checkKey(e)||this._checkValue(r);if(o)return this.nextTick(i,o),i[W];let s=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),c=s.format,f=a.format;(n.keyEncoding!==c||n.valueEncoding!==f)&&(n=Object.assign({},n,{keyEncoding:c,valueEncoding:f}));let u=this.prefixKey(s.encode(e),c),l=a.encode(r);return this._put(u,l,n,p=>{if(p)return i(p);this.emit("put",e,r),i()}),i[W]}_put(e,r,n,i){this.nextTick(i)}del(e,r,n){if(n=Rr(r,n),n=or(n,W),r=sr(r,this[Cr].key),this[X]==="opening")return this.defer(()=>this.del(e,r,n)),n[W];if(_n(this,n))return n[W];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[W];let o=this.keyEncoding(r.keyEncoding),s=o.format;return r.keyEncoding!==s&&(r=Object.assign({},r,{keyEncoding:s})),this._del(this.prefixKey(o.encode(e),s),r,a=>{if(a)return n(a);this.emit("del",e),n()}),n[W]}_del(e,r,n){this.nextTick(n)}batch(e,r,n){if(!arguments.length){if(this[X]==="opening")return new Sl(this);if(this[X]!=="open")throw new ze("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=Rr(r,n),n=or(n,W),r=sr(r,this[Cr].empty),this[X]==="opening")return this.defer(()=>this.batch(e,r,n)),n[W];if(_n(this,n))return n[W];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[W];if(e.length===0)return this.nextTick(n),n[W];let i=new Array(e.length),{keyEncoding:o,valueEncoding:s,...a}=r;for(let c=0;c<e.length;c++){if(typeof e[c]!="object"||e[c]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[W];let f=Object.assign({},e[c]);if(f.type!=="put"&&f.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[W];let u=this._checkKey(f.key);if(u)return this.nextTick(n,u),n[W];let l=f.sublevel!=null?f.sublevel:this,p=l.keyEncoding(f.keyEncoding||o),y=p.format;if(f.key=l.prefixKey(p.encode(f.key),y),f.keyEncoding=y,f.type==="put"){let d=this._checkValue(f.value);if(d)return this.nextTick(n,d),n[W];let h=l.valueEncoding(f.valueEncoding||s);f.value=h.encode(f.value),f.valueEncoding=h.format}l!==this&&(f.sublevel=null),i[c]=f}return this._batch(i,a,c=>{if(c)return n(c);this.emit("batch",e),n()}),n[W]}_batch(e,r,n){this.nextTick(n)}sublevel(e,r){return this._sublevel(e,va.defaults(r))}_sublevel(e,r){return new va(this,e,r)}prefixKey(e,r){return e}clear(e,r){if(r=Rr(e,r),r=or(r,W),e=sr(e,this[Cr].empty),this[X]==="opening")return this.defer(()=>this.clear(e,r)),r[W];if(_n(this,r))return r[W];let n=e,i=this.keyEncoding(e.keyEncoding);return e=fo(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(r):this._clear(e,o=>{if(o)return r(o);this.emit("clear",n),r()}),r[W]}_clear(e,r){this.nextTick(r)}iterator(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=fo(e,r),e.keys=e.keys!==!1,e.values=e.values!==!1,e[Ir.keyEncoding]=r,e[Ir.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[X]==="opening")return new jw(this,e);if(this[X]!=="open")throw new ze("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new Ir(this,e)}keys(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=fo(e,r),e[Ir.keyEncoding]=r,e[Ir.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[X]==="opening")return new Fw(this,e);if(this[X]!=="open")throw new ze("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new Mw(this,e)}values(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=fo(e,r),e[Ir.keyEncoding]=r,e[Ir.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[X]==="opening")return new $w(this,e);if(this[X]!=="open")throw new ze("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new qw(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[ai].push(e)}[ci](){if(this[ai].length===0)return;let e=this[ai];this[ai]=[];for(let r of e)r()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[Ur].add(e)}detachResource(e){this[Ur].delete(e)}_chainedBatch(){return new Sl(this)}_checkKey(e){if(e==null)return new ze("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new ze("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};fi.prototype.nextTick=bl();var{AbstractSublevel:va}=Al()({AbstractLevel:fi});Ba.AbstractLevel=fi;Ba.AbstractSublevel=va;var _n=function(t,e){return t[X]!=="open"?(t.nextTick(e,new ze("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},Hw=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])}});var ka=D(Lr=>{"use strict";Lr.AbstractLevel=Ta().AbstractLevel;Lr.AbstractSublevel=Ta().AbstractSublevel;Lr.AbstractIterator=nr().AbstractIterator;Lr.AbstractKeyIterator=nr().AbstractKeyIterator;Lr.AbstractValueIterator=nr().AbstractValueIterator;Lr.AbstractChainedBatch=ya().AbstractChainedBatch});var Tl=D((lA,Bl)=>{Bl.exports=Jw;var Gw=ma();function Jw(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,o,s,a,c=!0,f;Array.isArray(t)?(n=[],o=i=t.length):(s=Object.keys(t),n={},o=i=s.length);function u(p){function y(){r&&r(p,n),r=null}c?Gw(y):y()}function l(p,y,d){if(n[p]=d,y&&(a=!0),--o===0||y)u(y);else if(!a&&f<i){let h;s?(h=s[f],f+=1,t[h](function(m,g){l(h,m,g)})):(h=f,f+=1,t[h](function(m,g){l(h,m,g)}))}}f=e,o?s?s.some(function(p,y){return t[p](function(d,h){l(p,d,h)}),y===e-1}):t.some(function(p,y){return p(function(d,h){l(y,d,h)}),y===e-1}):u(null),c=!1}});var Pa=D((dA,kl)=>{"use strict";kl.exports=function(e){let r=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,i,o):r!==void 0?IDBKeyRange.lowerBound(r,i):n!==void 0?IDBKeyRange.upperBound(n,o):null}});var Ia=D((hA,Pl)=>{"use strict";var Ww=new TextEncoder;Pl.exports=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):Ww.encode(t)}});var Ll=D(Cl=>{"use strict";var{AbstractIterator:zw}=ka(),Il=Pa(),ho=Ia(),lt=Symbol("cache"),It=Symbol("finished"),Le=Symbol("options"),Rt=Symbol("currentOptions"),Or=Symbol("position"),Ra=Symbol("location"),An=Symbol("first"),Rl={},Ua=class extends zw{constructor(e,r,n){super(e,n),this[lt]=[],this[It]=this.limit===0,this[Le]=n,this[Rt]={...n},this[Or]=void 0,this[Ra]=r,this[An]=!0}_nextv(e,r,n){if(this[An]=!1,this[It])return this.nextTick(n,null,[]);if(this[lt].length>0)return e=Math.min(e,this[lt].length),this.nextTick(n,null,this[lt].splice(0,e));this[Or]!==void 0&&(this[Le].reverse?(this[Rt].lt=this[Or],this[Rt].lte=void 0):(this[Rt].gt=this[Or],this[Rt].gte=void 0));let i;try{i=Il(this[Rt])}catch{return this[It]=!0,this.nextTick(n,null,[])}let o=this.db.db.transaction([this[Ra]],"readonly"),s=o.objectStore(this[Ra]),a=[];if(this[Le].reverse){let c=!this[Le].values&&s.openKeyCursor?"openKeyCursor":"openCursor";s[c](i,"prev").onsuccess=f=>{let u=f.target.result;if(u){let{key:l,value:p}=u;this[Or]=l,a.push([this[Le].keys&&l!==void 0?ho(l):void 0,this[Le].values&&p!==void 0?ho(p):void 0]),a.length<e?u.continue():Ul(o)}else this[It]=!0}}else{let c,f,u=()=>{if(c===void 0||f===void 0)return;let l=Math.max(c.length,f.length);l===0||e===1/0?this[It]=!0:this[Or]=c[l-1],a.length=l;for(let p=0;p<l;p++){let y=c[p],d=f[p];a[p]=[this[Le].keys&&y!==void 0?ho(y):void 0,this[Le].values&&d!==void 0?ho(d):void 0]}Ul(o)};this[Le].keys||e<1/0?s.getAllKeys(i,e<1/0?e:void 0).onsuccess=l=>{c=l.target.result,u()}:(c=[],this.nextTick(u)),this[Le].values?s.getAll(i,e<1/0?e:void 0).onsuccess=l=>{f=l.target.result,u()}:(f=[],this.nextTick(u))}o.onabort=()=>{n(o.error||new Error("aborted by user")),n=null},o.oncomplete=()=>{n(null,a),n=null}}_next(e){if(this[lt].length>0){let[r,n]=this[lt].shift();this.nextTick(e,null,r,n)}else if(this[It])this.nextTick(e);else{let r=Math.min(100,this.limit-this.count);this[An]&&(this[An]=!1,r=1),this._nextv(r,Rl,(n,i)=>{if(n)return e(n);this[lt]=i,this._next(e)})}}_all(e,r){this[An]=!1;let n=this[lt].splice(0,this[lt].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(r,null,n);this._nextv(i,Rl,(o,s)=>{if(o)return r(o);n.length>0&&(s=n.concat(s)),r(null,s)})}_seek(e,r){this[An]=!0,this[lt]=[],this[It]=!1,this[Or]=void 0,this[Rt]={...this[Le]};let n;try{n=Il(this[Le])}catch{this[It]=!0;return}n!==null&&!n.includes(e)?this[It]=!0:this[Le].reverse?this[Rt].lte=e:this[Rt].gte=e}};Cl.Iterator=Ua;function Ul(t){typeof t.commit=="function"&&t.commit()}});var Kl=D((yA,Ol)=>{"use strict";Ol.exports=function(e,r,n,i,o){if(i.limit===0)return e.nextTick(o);let s=e.db.transaction([r],"readwrite"),a=s.objectStore(r),c=0;s.oncomplete=function(){o()},s.onabort=function(){o(s.error||new Error("aborted by user"))};let f=a.openKeyCursor?"openKeyCursor":"openCursor",u=i.reverse?"prev":"next";a[f](n,u).onsuccess=function(l){let p=l.target.result;p&&(a.delete(p.key).onsuccess=function(){(i.limit<=0||++c<i.limit)&&p.continue()})}}});var Fl=D(jl=>{"use strict";var{AbstractLevel:Yw}=ka(),Nl=Je(),Zw=Tl(),{fromCallback:Xw}=Yn(),{Iterator:Qw}=Ll(),Dl=Ia(),em=Kl(),tm=Pa(),ql="level-js-",ui=Symbol("idb"),Ca=Symbol("namePrefix"),Ut=Symbol("location"),La=Symbol("version"),Kr=Symbol("store"),li=Symbol("onComplete"),Ml=Symbol("promise"),po=class extends Yw{constructor(e,r,n){if(typeof r=="function"||typeof n=="function")throw new Nl("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...s}=r||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},s),typeof e!="string")throw new Error("constructor requires a location string argument");this[Ut]=e,this[Ca]=i??ql,this[La]=parseInt(o||1,10),this[ui]=null}get location(){return this[Ut]}get namePrefix(){return this[Ca]}get version(){return this[La]}get db(){return this[ui]}get type(){return"browser-level"}_open(e,r){let n=indexedDB.open(this[Ca]+this[Ut],this[La]);n.onerror=function(){r(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[ui]=n.result,r()},n.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[Ut])||o.createObjectStore(this[Ut])}}[Kr](e){return this[ui].transaction([this[Ut]],e).objectStore(this[Ut])}[li](e,r){let n=e.transaction;n.onabort=function(){r(n.error||new Error("aborted by user"))},n.oncomplete=function(){r(null,e.result)}}_get(e,r,n){let i=this[Kr]("readonly"),o;try{o=i.get(e)}catch(s){return this.nextTick(n,s)}this[li](o,function(s,a){if(s)return n(s);if(a===void 0)return n(new Nl("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,Dl(a))})}_getMany(e,r,n){let i=this[Kr]("readonly"),o=e.map(s=>a=>{let c;try{c=i.get(s)}catch(f){return a(f)}c.onsuccess=()=>{let f=c.result;a(null,f===void 0?f:Dl(f))},c.onerror=f=>{f.stopPropagation(),a(c.error)}});Zw(o,16,n)}_del(e,r,n){let i=this[Kr]("readwrite"),o;try{o=i.delete(e)}catch(s){return this.nextTick(n,s)}this[li](o,n)}_put(e,r,n,i){let o=this[Kr]("readwrite"),s;try{s=o.put(r,e)}catch(a){return this.nextTick(i,a)}this[li](s,i)}_iterator(e){return new Qw(this,this[Ut],e)}_batch(e,r,n){let i=this[Kr]("readwrite"),o=i.transaction,s=0,a;o.onabort=function(){n(a||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()};function c(){let f=e[s++],u=f.key,l;try{l=f.type==="del"?i.delete(u):i.put(f.value,u)}catch(p){a=p,o.abort();return}s<e.length?l.onsuccess=c:typeof o.commit=="function"&&o.commit()}c()}_clear(e,r){let n,i;try{n=tm(e)}catch{return this.nextTick(r)}if(e.limit>=0)return em(this,this[Ut],n,e,r);try{let o=this[Kr]("readwrite");i=n?o.delete(n):o.clear()}catch(o){return this.nextTick(r,o)}this[li](i,r)}_close(e){this[ui].close(),this.nextTick(e)}};po.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=ql),r=Xw(r,Ml);let n=indexedDB.deleteDatabase(e+t);return n.onsuccess=function(){r()},n.onerror=function(i){r(i)},r[Ml]};jl.BrowserLevel=po});var Vl=D($l=>{$l.Level=Fl().BrowserLevel});var le=D((EA,Hl)=>{"use strict";Hl.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Uint8Array}});var dt=D((_A,Ka)=>{"use strict";var nm=Me(),im=Object.getPrototypeOf(async function(){}).constructor,Gl=globalThis.Blob||nm.Blob,om=typeof Gl<"u"?function(e){return e instanceof Gl}:function(e){return!1},Oa=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};Ka.exports={AggregateError:Oa,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof im},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:om};Ka.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var mo=D((AA,wo)=>{"use strict";var{AbortController:Jl,AbortSignal:sm}=typeof self<"u"?self:typeof window<"u"?window:void 0;wo.exports=Jl;wo.exports.AbortSignal=sm;wo.exports.default=Jl});var Se=D((SA,Yl)=>{"use strict";var{format:am,inspect:bo,AggregateError:cm}=dt(),fm=globalThis.AggregateError||cm,um=Symbol("kIsNodeError"),lm=["string","function","number","object","Function","Object","boolean","bigint","symbol"],dm=/^([A-Z][a-z0-9]*)+$/,hm="__node_internal_",go={};function Dr(t,e){if(!t)throw new go.ERR_INTERNAL_ASSERTION(e)}function Wl(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function pm(t,e,r){if(typeof e=="function")return Dr(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return Dr(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:am(e,...r)}function ge(t,e,r){r||(r=Error);class n extends r{constructor(...o){super(pm(t,e,o))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[um]=!0,go[t]=n}function zl(t){let e=hm+t.name;return Object.defineProperty(t,"name",{value:e}),t}function ym(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new fm([e,t],e.message);return r.code=e.code,r}return t||e}var Na=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new go.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};ge("ERR_ASSERTION","%s",Error);ge("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Dr(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],o=[],s=[];for(let c of e)Dr(typeof c=="string","All expected entries have to be of type string"),lm.includes(c)?i.push(c.toLowerCase()):dm.test(c)?o.push(c):(Dr(c!=="object",'The value "object" should be written as "Object"'),s.push(c));if(o.length>0){let c=i.indexOf("object");c!==-1&&(i.splice(i,c,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let c=i.pop();n+=`one of type ${i.join(", ")}, or ${c}`}}(o.length>0||s.length>0)&&(n+=" or ")}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let c=o.pop();n+=`an instance of ${o.join(", ")}, or ${c}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{let c=s.pop();n+=`one of ${s.join(", ")}, or ${c}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let c=bo(r,{depth:-1});n+=`. Received ${c}`}}else{let c=bo(r,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),n+=`. Received type ${typeof r} (${c})`}return n},TypeError);ge("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=bo(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);ge("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);ge("ERR_MISSING_ARGS",(...t)=>{Dr(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);ge("ERR_OUT_OF_RANGE",(t,e,r)=>{Dr(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=Wl(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=Wl(n)),n+="n"):n=bo(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);ge("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);ge("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);ge("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);ge("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);ge("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);ge("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ge("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);ge("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);ge("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);ge("ERR_STREAM_WRITE_AFTER_END","write after end",Error);ge("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);Yl.exports={AbortError:Na,aggregateTwoErrors:zl(ym),hideStackFrames:zl,codes:go}});var di=D((vA,od)=>{"use strict";var{ArrayIsArray:Ma,ArrayPrototypeIncludes:ed,ArrayPrototypeJoin:td,ArrayPrototypeMap:wm,NumberIsInteger:qa,NumberIsNaN:mm,NumberMAX_SAFE_INTEGER:bm,NumberMIN_SAFE_INTEGER:gm,NumberParseInt:xm,ObjectPrototypeHasOwnProperty:Em,RegExpPrototypeExec:rd,String:_m,StringPrototypeToUpperCase:Am,StringPrototypeTrim:Sm}=le(),{hideStackFrames:Fe,codes:{ERR_SOCKET_BAD_PORT:vm,ERR_INVALID_ARG_TYPE:ve,ERR_INVALID_ARG_VALUE:Sn,ERR_OUT_OF_RANGE:Mr,ERR_UNKNOWN_SIGNAL:Zl}}=Se(),{normalizeEncoding:Bm}=dt(),{isAsyncFunction:Tm,isArrayBufferView:km}=dt().types,Xl={};function Pm(t){return t===(t|0)}function Im(t){return t===t>>>0}var Rm=/^[0-7]+$/,Um="must be a 32-bit unsigned integer or an octal string";function Cm(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(rd(Rm,t)===null)throw new Sn(e,t,Um);t=xm(t,8)}return nd(t,e),t}var Lm=Fe((t,e,r=gm,n=bm)=>{if(typeof t!="number")throw new ve(e,"number",t);if(!qa(t))throw new Mr(e,"an integer",t);if(t<r||t>n)throw new Mr(e,`>= ${r} && <= ${n}`,t)}),Om=Fe((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new ve(e,"number",t);if(!qa(t))throw new Mr(e,"an integer",t);if(t<r||t>n)throw new Mr(e,`>= ${r} && <= ${n}`,t)}),nd=Fe((t,e,r=!1)=>{if(typeof t!="number")throw new ve(e,"number",t);if(!qa(t))throw new Mr(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new Mr(e,`>= ${n} && <= ${i}`,t)});function ja(t,e){if(typeof t!="string")throw new ve(e,"string",t)}function Km(t,e,r=void 0,n){if(typeof t!="number")throw new ve(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&mm(t))throw new Mr(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var Nm=Fe((t,e,r)=>{if(!ed(r,t)){let i="must be one of: "+td(wm(r,o=>typeof o=="string"?`'${o}'`:_m(o)),", ");throw new Sn(e,t,i)}});function id(t,e){if(typeof t!="boolean")throw new ve(e,"boolean",t)}function Da(t,e,r){return t==null||!Em(t,e)?r:t[e]}var Dm=Fe((t,e,r=null)=>{let n=Da(r,"allowArray",!1),i=Da(r,"allowFunction",!1);if(!Da(r,"nullable",!1)&&t===null||!n&&Ma(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new ve(e,"Object",t)}),Mm=Fe((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new ve(e,"a dictionary",t)}),Fa=Fe((t,e,r=0)=>{if(!Ma(t))throw new ve(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Sn(e,t,n)}});function qm(t,e){Fa(t,e);for(let r=0;r<t.length;r++)ja(t[r],`${e}[${r}]`)}function jm(t,e){Fa(t,e);for(let r=0;r<t.length;r++)id(t[r],`${e}[${r}]`)}function Fm(t,e="signal"){if(ja(t,e),Xl[t]===void 0)throw Xl[Am(t)]!==void 0?new Zl(t+" (signals must use all capital letters)"):new Zl(t)}var $m=Fe((t,e="buffer")=>{if(!km(t))throw new ve(e,["Buffer","TypedArray","DataView"],t)});function Vm(t,e){let r=Bm(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Sn("encoding",e,`is invalid for data of length ${n}`)}function Hm(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&Sm(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new vm(e,t,r);return t|0}var Gm=Fe((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ve(e,"AbortSignal",t)}),Jm=Fe((t,e)=>{if(typeof t!="function")throw new ve(e,"Function",t)}),Wm=Fe((t,e)=>{if(typeof t!="function"||Tm(t))throw new ve(e,"Function",t)}),zm=Fe((t,e)=>{if(t!==void 0)throw new ve(e,"undefined",t)});function Ym(t,e,r){if(!ed(r,t))throw new ve(e,`('${td(r,"|")}')`,t)}var Zm=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Ql(t,e){if(typeof t>"u"||!rd(Zm,t))throw new Sn(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Xm(t){if(typeof t=="string")return Ql(t,"hints"),t;if(Ma(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];Ql(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new Sn("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}od.exports={isInt32:Pm,isUint32:Im,parseFileMode:Cm,validateArray:Fa,validateStringArray:qm,validateBooleanArray:jm,validateBoolean:id,validateBuffer:$m,validateDictionary:Mm,validateEncoding:Vm,validateFunction:Jm,validateInt32:Om,validateInteger:Lm,validateNumber:Km,validateObject:Dm,validateOneOf:Nm,validatePlainFunction:Wm,validatePort:Hm,validateSignalName:Fm,validateString:ja,validateUint32:nd,validateUndefined:zm,validateUnion:Ym,validateAbortSignal:Gm,validateLinkHeaderValue:Xm}});var ar=D((BA,fd)=>{var ce=fd.exports={},ht,pt;function $a(){throw new Error("setTimeout has not been defined")}function Va(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ht=setTimeout:ht=$a}catch{ht=$a}try{typeof clearTimeout=="function"?pt=clearTimeout:pt=Va}catch{pt=Va}})();function sd(t){if(ht===setTimeout)return setTimeout(t,0);if((ht===$a||!ht)&&setTimeout)return ht=setTimeout,setTimeout(t,0);try{return ht(t,0)}catch{try{return ht.call(null,t,0)}catch{return ht.call(this,t,0)}}}function Qm(t){if(pt===clearTimeout)return clearTimeout(t);if((pt===Va||!pt)&&clearTimeout)return pt=clearTimeout,clearTimeout(t);try{return pt(t)}catch{try{return pt.call(null,t)}catch{return pt.call(this,t)}}}var Ct=[],vn=!1,qr,xo=-1;function eb(){!vn||!qr||(vn=!1,qr.length?Ct=qr.concat(Ct):xo=-1,Ct.length&&ad())}function ad(){if(!vn){var t=sd(eb);vn=!0;for(var e=Ct.length;e;){for(qr=Ct,Ct=[];++xo<e;)qr&&qr[xo].run();xo=-1,e=Ct.length}qr=null,vn=!1,Qm(t)}}ce.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Ct.push(new cd(t,e)),Ct.length===1&&!vn&&sd(ad)};function cd(t,e){this.fun=t,this.array=e}cd.prototype.run=function(){this.fun.apply(null,this.array)};ce.title="browser";ce.browser=!0;ce.env={};ce.argv=[];ce.version="";ce.versions={};function Lt(){}ce.on=Lt;ce.addListener=Lt;ce.once=Lt;ce.off=Lt;ce.removeListener=Lt;ce.removeAllListeners=Lt;ce.emit=Lt;ce.prependListener=Lt;ce.prependOnceListener=Lt;ce.listeners=function(t){return[]};ce.binding=function(t){throw new Error("process.binding is not supported")};ce.cwd=function(){return"/"};ce.chdir=function(t){throw new Error("process.chdir is not supported")};ce.umask=function(){return 0}});var wt=D((TA,vd)=>{"use strict";var{Symbol:Eo,SymbolAsyncIterator:ud,SymbolIterator:ld,SymbolFor:dd}=le(),hd=Eo("kDestroyed"),pd=Eo("kIsErrored"),Ha=Eo("kIsReadable"),yd=Eo("kIsDisturbed"),tb=dd("nodejs.webstream.isClosedPromise"),rb=dd("nodejs.webstream.controllerErrorFunction");function _o(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function Ao(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function nb(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function yt(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function wd(t){return!!(t&&!yt(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function md(t){return!!(t&&!yt(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function bd(t){return!!(t&&!yt(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function ib(t){return wd(t)||md(t)||bd(t)}function ob(t,e){return t==null?!1:e===!0?typeof t[ud]=="function":e===!1?typeof t[ld]=="function":typeof t[ud]=="function"||typeof t[ld]=="function"}function So(t){if(!yt(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[hd]||n!=null&&n.destroyed)}function gd(t){if(!Ao(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function sb(t,e){if(!Ao(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function ab(t){if(!_o(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function xd(t,e){if(!_o(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function Ed(t){return t&&t[Ha]!=null?t[Ha]:typeof t?.readable!="boolean"?null:So(t)?!1:_o(t)&&t.readable&&!xd(t)}function _d(t){return typeof t?.writable!="boolean"?null:So(t)?!1:Ao(t)&&t.writable&&!gd(t)}function cb(t,e){return yt(t)?So(t)?!0:!(e?.readable!==!1&&Ed(t)||e?.writable!==!1&&_d(t)):null}function fb(t){var e,r;return yt(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function ub(t){var e,r;return yt(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function lb(t){if(!yt(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&Ad(t)?t._closed:null}function Ad(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function Sd(t){return typeof t._sent100=="boolean"&&Ad(t)}function db(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function hb(t){if(!yt(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&Sd(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function pb(t){var e;return!!(t&&((e=t[yd])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function yb(t){var e,r,n,i,o,s,a,c,f,u;return!!(t&&((e=(r=(n=(i=(o=(s=t[pd])!==null&&s!==void 0?s:t.readableErrored)!==null&&o!==void 0?o:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(c=t._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&r!==void 0?r:(f=t._readableState)===null||f===void 0?void 0:f.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}vd.exports={kDestroyed:hd,isDisturbed:pb,kIsDisturbed:yd,isErrored:yb,kIsErrored:pd,isReadable:Ed,kIsReadable:Ha,kIsClosedPromise:tb,kControllerErrorFunction:rb,isClosed:lb,isDestroyed:So,isDuplexNodeStream:nb,isFinished:cb,isIterable:ob,isReadableNodeStream:_o,isReadableStream:wd,isReadableEnded:ab,isReadableFinished:xd,isReadableErrored:ub,isNodeStream:yt,isWebStream:ib,isWritable:_d,isWritableNodeStream:Ao,isWritableStream:md,isWritableEnded:gd,isWritableFinished:sb,isWritableErrored:fb,isServerRequest:db,isServerResponse:Sd,willEmitClose:hb,isTransformStream:bd}});var Ot=D((kA,Ya)=>{var cr=ar(),{AbortError:Ld,codes:wb}=Se(),{ERR_INVALID_ARG_TYPE:mb,ERR_STREAM_PREMATURE_CLOSE:Bd}=wb,{kEmptyObject:Ja,once:Wa}=dt(),{validateAbortSignal:bb,validateFunction:gb,validateObject:xb,validateBoolean:Eb}=di(),{Promise:_b,PromisePrototypeThen:Ab}=le(),{isClosed:Sb,isReadable:Td,isReadableNodeStream:Ga,isReadableStream:vb,isReadableFinished:kd,isReadableErrored:Pd,isWritable:Id,isWritableNodeStream:Rd,isWritableStream:Bb,isWritableFinished:Ud,isWritableErrored:Cd,isNodeStream:Tb,willEmitClose:kb,kIsClosedPromise:Pb}=wt();function Ib(t){return t.setHeader&&typeof t.abort=="function"}var za=()=>{};function Od(t,e,r){var n,i;if(arguments.length===2?(r=e,e=Ja):e==null?e=Ja:xb(e,"options"),gb(r,"callback"),bb(e.signal,"options.signal"),r=Wa(r),vb(t)||Bb(t))return Rb(t,e,r);if(!Tb(t))throw new mb("stream",["ReadableStream","WritableStream","Stream"],t);let o=(n=e.readable)!==null&&n!==void 0?n:Ga(t),s=(i=e.writable)!==null&&i!==void 0?i:Rd(t),a=t._writableState,c=t._readableState,f=()=>{t.writable||p()},u=kb(t)&&Ga(t)===o&&Rd(t)===s,l=Ud(t,!1),p=()=>{l=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||o))&&(!o||y)&&r.call(t)},y=kd(t,!1),d=()=>{y=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||s))&&(!s||l)&&r.call(t)},h=_=>{r.call(t,_)},m=Sb(t),g=()=>{m=!0;let _=Cd(t)||Pd(t);if(_&&typeof _!="boolean")return r.call(t,_);if(o&&!y&&Ga(t,!0)&&!kd(t,!1))return r.call(t,new Bd);if(s&&!l&&!Ud(t,!1))return r.call(t,new Bd);r.call(t)},x=()=>{m=!0;let _=Cd(t)||Pd(t);if(_&&typeof _!="boolean")return r.call(t,_);r.call(t)},w=()=>{t.req.on("finish",p)};Ib(t)?(t.on("complete",p),u||t.on("abort",g),t.req?w():t.on("request",w)):s&&!a&&(t.on("end",f),t.on("close",f)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",g),t.on("end",d),t.on("finish",p),e.error!==!1&&t.on("error",h),t.on("close",g),m?cr.nextTick(g):a!=null&&a.errorEmitted||c!=null&&c.errorEmitted?u||cr.nextTick(x):(!o&&(!u||Td(t))&&(l||Id(t)===!1)||!s&&(!u||Id(t))&&(y||Td(t)===!1)||c&&t.req&&t.aborted)&&cr.nextTick(x);let B=()=>{r=za,t.removeListener("aborted",g),t.removeListener("complete",p),t.removeListener("abort",g),t.removeListener("request",w),t.req&&t.req.removeListener("finish",p),t.removeListener("end",f),t.removeListener("close",f),t.removeListener("finish",p),t.removeListener("end",d),t.removeListener("error",h),t.removeListener("close",g)};if(e.signal&&!m){let _=()=>{let S=r;B(),S.call(t,new Ld(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)cr.nextTick(_);else{let S=r;r=Wa((...I)=>{e.signal.removeEventListener("abort",_),S.apply(t,I)}),e.signal.addEventListener("abort",_)}}return B}function Rb(t,e,r){let n=!1,i=za;if(e.signal)if(i=()=>{n=!0,r.call(t,new Ld(void 0,{cause:e.signal.reason}))},e.signal.aborted)cr.nextTick(i);else{let s=r;r=Wa((...a)=>{e.signal.removeEventListener("abort",i),s.apply(t,a)}),e.signal.addEventListener("abort",i)}let o=(...s)=>{n||cr.nextTick(()=>r.apply(t,s))};return Ab(t[Pb].promise,o,o),za}function Ub(t,e){var r;let n=!1;return e===null&&(e=Ja),(r=e)!==null&&r!==void 0&&r.cleanup&&(Eb(e.cleanup,"cleanup"),n=e.cleanup),new _b((i,o)=>{let s=Od(t,e,a=>{n&&s(),a?o(a):i()})})}Ya.exports=Od;Ya.exports.finished=Ub});var jr=D((PA,$d)=>{"use strict";var mt=ar(),{aggregateTwoErrors:Cb,codes:{ERR_MULTIPLE_CALLBACK:Lb},AbortError:Ob}=Se(),{Symbol:Dd}=le(),{kDestroyed:Kb,isDestroyed:Nb,isFinished:Db,isServerRequest:Mb}=wt(),Md=Dd("kDestroy"),Za=Dd("kConstruct");function qd(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function qb(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(qd(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?Kd(this,t,e):this.once(Md,function(o){Kd(this,Cb(o,t),e)}),this)}function Kd(t,e,r){let n=!1;function i(o){if(n)return;n=!0;let s=t._readableState,a=t._writableState;qd(o,a,s),a&&(a.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(o),o?mt.nextTick(jb,t,o):mt.nextTick(jd,t)}try{t._destroy(e||null,i)}catch(o){i(o)}}function jb(t,e){Xa(t,e),jd(t)}function jd(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function Xa(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function Fb(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function Qa(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?mt.nextTick(Xa,t,e):Xa(t,e))}function $b(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(Za,e),!(t.listenerCount(Za)>1)&&mt.nextTick(Vb,t)}function Vb(t){let e=!1;function r(n){if(e){Qa(t,n??new Lb);return}e=!0;let i=t._readableState,o=t._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?t.emit(Md,n):n?Qa(t,n,!0):mt.nextTick(Hb,t)}try{t._construct(n=>{mt.nextTick(r,n)})}catch(n){mt.nextTick(r,n)}}function Hb(t){t.emit(Za)}function Nd(t){return t?.setHeader&&typeof t.abort=="function"}function Fd(t){t.emit("close")}function Gb(t,e){t.emit("error",e),mt.nextTick(Fd,t)}function Jb(t,e){!t||Nb(t)||(!e&&!Db(t)&&(e=new Ob),Mb(t)?(t.socket=null,t.destroy(e)):Nd(t)?t.abort():Nd(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?mt.nextTick(Gb,t,e):mt.nextTick(Fd,t),t.destroyed||(t[Kb]=!0))}$d.exports={construct:$b,destroyer:Jb,destroy:qb,undestroy:Fb,errorOrDestroy:Qa}});var To=D((IA,Hd)=>{"use strict";var{ArrayIsArray:Wb,ObjectSetPrototypeOf:Vd}=le(),{EventEmitter:vo}=zn();function Bo(t){vo.call(this,t)}Vd(Bo.prototype,vo.prototype);Vd(Bo,vo);Bo.prototype.pipe=function(t,e){let r=this;function n(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",s),r.on("close",a));let o=!1;function s(){o||(o=!0,t.end())}function a(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function c(u){f(),vo.listenerCount(this,"error")===0&&this.emit("error",u)}ec(r,"error",c),ec(t,"error",c);function f(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",f),r.removeListener("close",f),t.removeListener("close",f)}return r.on("end",f),r.on("close",f),t.on("close",f),t.emit("pipe",r),t};function ec(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Wb(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}Hd.exports={Stream:Bo,prependListener:ec}});var hi=D((RA,ko)=>{"use strict";var{AbortError:Gd,codes:zb}=Se(),{isNodeStream:Jd,isWebStream:Yb,kControllerErrorFunction:Zb}=wt(),Xb=Ot(),{ERR_INVALID_ARG_TYPE:Wd}=zb,Qb=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new Wd(e,"AbortSignal",t)};ko.exports.addAbortSignal=function(e,r){if(Qb(e,"signal"),!Jd(r)&&!Yb(r))throw new Wd("stream",["ReadableStream","WritableStream","Stream"],r);return ko.exports.addAbortSignalNoValidate(e,r)};ko.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=Jd(e)?()=>{e.destroy(new Gd(void 0,{cause:t.reason}))}:()=>{e[Zb](new Gd(void 0,{cause:t.reason}))};return t.aborted?r():(t.addEventListener("abort",r),Xb(e,()=>t.removeEventListener("abort",r))),e}});var Zd=D((CA,Yd)=>{"use strict";var{StringPrototypeSlice:zd,SymbolIterator:eg,TypedArrayPrototypeSet:Po,Uint8Array:tg}=le(),{Buffer:tc}=Me(),{inspect:rg}=dt();Yd.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return tc.alloc(0);let r=tc.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)Po(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[eg](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let o=n.data;if(e>o.length)r+=o,e-=o.length;else{e===o.length?(r+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=zd(o,0,e),this.head=n,n.data=zd(o,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=tc.allocUnsafe(e),n=e,i=this.head,o=0;do{let s=i.data;if(e>s.length)Po(r,s,n-e),e-=s.length;else{e===s.length?(Po(r,s,n-e),++o,i.next?this.head=i.next:this.head=this.tail=null):(Po(r,new tg(s.buffer,s.byteOffset,e),n-e),this.head=i,i.data=s.slice(e));break}++o}while((i=i.next)!==null);return this.length-=o,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return rg(this,{...r,depth:0,customInspect:!1})}}});var Io=D((LA,Qd)=>{"use strict";var{MathFloor:ng,NumberIsInteger:ig}=le(),{ERR_INVALID_ARG_VALUE:og}=Se().codes;function sg(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Xd(t){return t?16:16*1024}function ag(t,e,r,n){let i=sg(e,n,r);if(i!=null){if(!ig(i)||i<0){let o=n?`options.${r}`:"options.highWaterMark";throw new og(o,i)}return ng(i)}return Xd(t.objectMode)}Qd.exports={getHighWaterMark:ag,getDefaultHighWaterMark:Xd}});var rh=D((rc,th)=>{var Ro=Me(),bt=Ro.Buffer;function eh(t,e){for(var r in t)e[r]=t[r]}bt.from&&bt.alloc&&bt.allocUnsafe&&bt.allocUnsafeSlow?th.exports=Ro:(eh(Ro,rc),rc.Buffer=Fr);function Fr(t,e,r){return bt(t,e,r)}Fr.prototype=Object.create(bt.prototype);eh(bt,Fr);Fr.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return bt(t,e,r)};Fr.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=bt(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Fr.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return bt(t)};Fr.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ro.SlowBuffer(t)}});var oh=D(ih=>{"use strict";var ic=rh().Buffer,nh=ic.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function cg(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function fg(t){var e=cg(t);if(typeof e!="string"&&(ic.isEncoding===nh||!nh(t)))throw new Error("Unknown encoding: "+t);return e||t}ih.StringDecoder=pi;function pi(t){this.encoding=fg(t);var e;switch(this.encoding){case"utf16le":this.text=yg,this.end=wg,e=4;break;case"utf8":this.fillLast=dg,e=4;break;case"base64":this.text=mg,this.end=bg,e=3;break;default:this.write=gg,this.end=xg;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=ic.allocUnsafe(e)}pi.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};pi.prototype.end=pg;pi.prototype.text=hg;pi.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function nc(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function ug(t,e,r){var n=e.length-1;if(n<r)return 0;var i=nc(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=nc(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=nc(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function lg(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function dg(t){var e=this.lastTotal-this.lastNeed,r=lg(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function hg(t,e){var r=ug(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function pg(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function yg(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function wg(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function mg(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function bg(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function gg(t){return t.toString(this.encoding)}function xg(t){return t&&t.length?this.write(t):""}});var oc=D((KA,fh)=>{"use strict";var sh=ar(),{PromisePrototypeThen:Eg,SymbolAsyncIterator:ah,SymbolIterator:ch}=le(),{Buffer:_g}=Me(),{ERR_INVALID_ARG_TYPE:Ag,ERR_STREAM_NULL_VALUES:Sg}=Se().codes;function vg(t,e,r){let n;if(typeof e=="string"||e instanceof _g)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[ah])i=!0,n=e[ah]();else if(e&&e[ch])i=!1,n=e[ch]();else throw new Ag("iterable",["Iterable"],e);let o=new t({objectMode:!0,highWaterMark:1,...r}),s=!1;o._read=function(){s||(s=!0,c())},o._destroy=function(f,u){Eg(a(f),()=>sh.nextTick(u,f),l=>sh.nextTick(u,l||f))};async function a(f){let u=f!=null,l=typeof n.throw=="function";if(u&&l){let{value:p,done:y}=await n.throw(f);if(await p,y)return}if(typeof n.return=="function"){let{value:p}=await n.return();await p}}async function c(){for(;;){try{let{value:f,done:u}=i?await n.next():n.next();if(u)o.push(null);else{let l=f&&typeof f.then=="function"?await f:f;if(l===null)throw s=!1,new Sg;if(o.push(l))continue;s=!1}}catch(f){o.destroy(f)}break}}return o}fh.exports=vg});var yi=D((NA,_h)=>{var Ye=ar(),{ArrayPrototypeIndexOf:Bg,NumberIsInteger:Tg,NumberIsNaN:kg,NumberParseInt:Pg,ObjectDefineProperties:dh,ObjectKeys:Ig,ObjectSetPrototypeOf:hh,Promise:Rg,SafeSet:Ug,SymbolAsyncIterator:Cg,Symbol:Lg}=le();_h.exports=Z;Z.ReadableState=lc;var{EventEmitter:Og}=zn(),{Stream:fr,prependListener:Kg}=To(),{Buffer:sc}=Me(),{addAbortSignal:Ng}=hi(),Dg=Ot(),Q=dt().debuglog("stream",t=>{Q=t}),Mg=Zd(),Tn=jr(),{getHighWaterMark:qg,getDefaultHighWaterMark:jg}=Io(),{aggregateTwoErrors:uh,codes:{ERR_INVALID_ARG_TYPE:Fg,ERR_METHOD_NOT_IMPLEMENTED:$g,ERR_OUT_OF_RANGE:Vg,ERR_STREAM_PUSH_AFTER_EOF:Hg,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Gg}}=Se(),{validateObject:Jg}=di(),$r=Lg("kPaused"),{StringDecoder:ph}=oh(),Wg=oc();hh(Z.prototype,fr.prototype);hh(Z,fr);var ac=()=>{},{errorOrDestroy:Bn}=Tn;function lc(t,e,r){typeof r!="boolean"&&(r=e instanceof gt()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.readableObjectMode)),this.highWaterMark=t?qg(this,t,"readableHighWaterMark",r):jg(!1),this.buffer=new Mg,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[$r]=null,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new ph(t.encoding),this.encoding=t.encoding)}function Z(t){if(!(this instanceof Z))return new Z(t);let e=this instanceof gt();this._readableState=new lc(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&Ng(t.signal,this)),fr.call(this,t),Tn.construct(this,()=>{this._readableState.needReadable&&Uo(this,this._readableState)})}Z.prototype.destroy=Tn.destroy;Z.prototype._undestroy=Tn.undestroy;Z.prototype._destroy=function(t,e){e(t)};Z.prototype[Og.captureRejectionSymbol]=function(t){this.destroy(t)};Z.prototype.push=function(t,e){return yh(this,t,e,!1)};Z.prototype.unshift=function(t,e){return yh(this,t,e,!0)};function yh(t,e,r,n){Q("readableAddChunk",e);let i=t._readableState,o;if(i.objectMode||(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=sc.from(e,r).toString(i.encoding):(e=sc.from(e,r),r=""))):e instanceof sc?r="":fr._isUint8Array(e)?(e=fr._uint8ArrayToBuffer(e),r=""):e!=null&&(o=new Fg("chunk",["string","Buffer","Uint8Array"],e))),o)Bn(t,o);else if(e===null)i.reading=!1,Zg(t,i);else if(i.objectMode||e&&e.length>0)if(n)if(i.endEmitted)Bn(t,new Gg);else{if(i.destroyed||i.errored)return!1;cc(t,i,e,!0)}else if(i.ended)Bn(t,new Hg);else{if(i.destroyed||i.errored)return!1;i.reading=!1,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?cc(t,i,e,!1):Uo(t,i)):cc(t,i,e,!1)}else n||(i.reading=!1,Uo(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function cc(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Co(t)),Uo(t,e)}Z.prototype.isPaused=function(){let t=this._readableState;return t[$r]===!0||t.flowing===!1};Z.prototype.setEncoding=function(t){let e=new ph(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var zg=1073741824;function Yg(t){if(t>zg)throw new Vg("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function lh(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:kg(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}Z.prototype.read=function(t){Q("read",t),t===void 0?t=NaN:Tg(t)||(t=Pg(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=Yg(t)),t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Q("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?fc(this):Co(this),null;if(t=lh(t,e),t===0&&e.ended)return e.length===0&&fc(this),null;let n=e.needReadable;if(Q("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Q("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,Q("reading, ended or constructing",n);else if(n){Q("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0);try{this._read(e.highWaterMark)}catch(o){Bn(this,o)}e.sync=!1,e.reading||(t=lh(r,e))}let i;return t>0?i=xh(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&fc(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function Zg(t,e){if(Q("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Co(t):(e.needReadable=!1,e.emittedReadable=!0,wh(t))}}function Co(t){let e=t._readableState;Q("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Q("emitReadable",e.flowing),e.emittedReadable=!0,Ye.nextTick(wh,t))}function wh(t){let e=t._readableState;Q("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,bh(t)}function Uo(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Ye.nextTick(Xg,t,e))}function Xg(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(Q("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Z.prototype._read=function(t){throw new $g("_read()")};Z.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new Ug(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),Q("pipe count=%d opts=%j",n.pipes.length,e);let o=(!e||e.end!==!1)&&t!==Ye.stdout&&t!==Ye.stderr?a:m;n.endEmitted?Ye.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(g,x){Q("onunpipe"),g===r&&x&&x.hasUnpiped===!1&&(x.hasUnpiped=!0,u())}function a(){Q("onend"),t.end()}let c,f=!1;function u(){Q("cleanup"),t.removeListener("close",d),t.removeListener("finish",h),c&&t.removeListener("drain",c),t.removeListener("error",y),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",p),f=!0,c&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&c()}function l(){f||(n.pipes.length===1&&n.pipes[0]===t?(Q("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(Q("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),c||(c=Qg(r,t),t.on("drain",c))}r.on("data",p);function p(g){Q("ondata");let x=t.write(g);Q("dest.write",x),x===!1&&l()}function y(g){if(Q("onerror",g),m(),t.removeListener("error",y),t.listenerCount("error")===0){let x=t._writableState||t._readableState;x&&!x.errorEmitted?Bn(t,g):t.emit("error",g)}}Kg(t,"error",y);function d(){t.removeListener("finish",h),m()}t.once("close",d);function h(){Q("onfinish"),t.removeListener("close",d),m()}t.once("finish",h);function m(){Q("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?n.flowing&&l():n.flowing||(Q("pipe resume"),r.resume()),t};function Qg(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(Q("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(Q("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}Z.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let o=0;o<i.length;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}let n=Bg(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};Z.prototype.on=function(t,e){let r=fr.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Q("on readable",n.length,n.reading),n.length?Co(this):n.reading||Ye.nextTick(ex,this)),r};Z.prototype.addListener=Z.prototype.on;Z.prototype.removeListener=function(t,e){let r=fr.prototype.removeListener.call(this,t,e);return t==="readable"&&Ye.nextTick(mh,this),r};Z.prototype.off=Z.prototype.removeListener;Z.prototype.removeAllListeners=function(t){let e=fr.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Ye.nextTick(mh,this),e};function mh(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[$r]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function ex(t){Q("readable nexttick read 0"),t.read(0)}Z.prototype.resume=function(){let t=this._readableState;return t.flowing||(Q("resume"),t.flowing=!t.readableListening,tx(this,t)),t[$r]=!1,this};function tx(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Ye.nextTick(rx,t,e))}function rx(t,e){Q("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),bh(t),e.flowing&&!e.reading&&t.read(0)}Z.prototype.pause=function(){return Q("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Q("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[$r]=!0,this};function bh(t){let e=t._readableState;for(Q("flow",e.flowing);e.flowing&&t.read()!==null;);}Z.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{Bn(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=Ig(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};Z.prototype[Cg]=function(){return gh(this)};Z.prototype.iterator=function(t){return t!==void 0&&Jg(t,"options"),gh(this,t)};function gh(t,e){typeof t.read!="function"&&(t=Z.wrap(t,{objectMode:!0}));let r=nx(t,e);return r.stream=t,r}async function*nx(t,e){let r=ac;function n(s){this===t?(r(),r=ac):r=s}t.on("readable",n);let i,o=Dg(t,{writable:!1},s=>{i=s?uh(i,s):null,r(),r=ac});try{for(;;){let s=t.destroyed?null:t.read();if(s!==null)yield s;else{if(i)throw i;if(i===null)return;await new Rg(n)}}}catch(s){throw i=uh(i,s),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?Tn.destroyer(t,null):(t.off("readable",n),o())}}dh(Z.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});dh(lc.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[$r]!==!1},set(t){this[$r]=!!t}}});Z._fromList=xh;function xh(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function fc(t){let e=t._readableState;Q("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Ye.nextTick(ix,e,t))}function ix(t,e){if(Q("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Ye.nextTick(ox,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function ox(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}Z.from=function(t,e){return Wg(Z,t,e)};var uc;function Eh(){return uc===void 0&&(uc={}),uc}Z.fromWeb=function(t,e){return Eh().newStreamReadableFromReadableStream(t,e)};Z.toWeb=function(t,e){return Eh().newReadableStreamFromStreamReadable(t,e)};Z.wrap=function(t,e){var r,n;return new Z({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,o){Tn.destroyer(t,i),o(i)}}).wrap(t)}});var bc=D((DA,Lh)=>{var Vr=ar(),{ArrayPrototypeSlice:vh,Error:sx,FunctionPrototypeSymbolHasInstance:Bh,ObjectDefineProperty:Th,ObjectDefineProperties:ax,ObjectSetPrototypeOf:kh,StringPrototypeToLowerCase:cx,Symbol:fx,SymbolHasInstance:ux}=le();Lh.exports=ae;ae.WritableState=bi;var{EventEmitter:lx}=zn(),wi=To().Stream,{Buffer:Lo}=Me(),No=jr(),{addAbortSignal:dx}=hi(),{getHighWaterMark:hx,getDefaultHighWaterMark:px}=Io(),{ERR_INVALID_ARG_TYPE:yx,ERR_METHOD_NOT_IMPLEMENTED:wx,ERR_MULTIPLE_CALLBACK:Ph,ERR_STREAM_CANNOT_PIPE:mx,ERR_STREAM_DESTROYED:mi,ERR_STREAM_ALREADY_FINISHED:bx,ERR_STREAM_NULL_VALUES:gx,ERR_STREAM_WRITE_AFTER_END:xx,ERR_UNKNOWN_ENCODING:Ih}=Se().codes,{errorOrDestroy:kn}=No;kh(ae.prototype,wi.prototype);kh(ae,wi);function pc(){}var Pn=fx("kOnFinished");function bi(t,e,r){typeof r!="boolean"&&(r=e instanceof gt()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?hx(this,t,"writableHighWaterMark",r):px(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=_x.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Ko(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Pn]=[]}function Ko(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}bi.prototype.getBuffer=function(){return vh(this.buffered,this.bufferedIndex)};Th(bi.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ae(t){let e=this instanceof gt();if(!e&&!Bh(ae,this))return new ae(t);this._writableState=new bi(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&dx(t.signal,this)),wi.call(this,t),No.construct(this,()=>{let r=this._writableState;r.writing||wc(this,r),mc(this,r)})}Th(ae,ux,{__proto__:null,value:function(t){return Bh(this,t)?!0:this!==ae?!1:t&&t._writableState instanceof bi}});ae.prototype.pipe=function(){kn(this,new mx)};function Rh(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!Lo.isEncoding(r))throw new Ih(r);typeof n!="function"&&(n=pc)}if(e===null)throw new gx;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=Lo.from(e,r),r="buffer");else if(e instanceof Lo)r="buffer";else if(wi._isUint8Array(e))e=wi._uint8ArrayToBuffer(e),r="buffer";else throw new yx("chunk",["string","Buffer","Uint8Array"],e);let o;return i.ending?o=new xx:i.destroyed&&(o=new mi("write")),o?(Vr.nextTick(n,o),kn(t,o,!0),o):(i.pendingcb++,Ex(t,i,e,r,n))}ae.prototype.write=function(t,e,r){return Rh(this,t,e,r)===!0};ae.prototype.cork=function(){this._writableState.corked++};ae.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||wc(this,t))};ae.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=cx(e)),!Lo.isEncoding(e))throw new Ih(e);return this._writableState.defaultEncoding=e,this};function Ex(t,e,r,n,i){let o=e.objectMode?1:r.length;e.length+=o;let s=e.length<e.highWaterMark;return s||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==pc&&(e.allNoop=!1)):(e.writelen=o,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),s&&!e.errored&&!e.destroyed}function Ah(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new mi("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function Sh(t,e,r,n){--e.pendingcb,n(r),yc(e),kn(t,r)}function _x(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){kn(t,new Ph);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?Vr.nextTick(Sh,t,r,e,i):Sh(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&wc(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},Vr.nextTick(Ax,r.afterWriteTickInfo)):Uh(t,r,1,i))}function Ax({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,Uh(t,e,r,n)}function Uh(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&yc(e),mc(t,e)}function yc(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:o,callback:s}=t.buffered[i],a=t.objectMode?1:o.length;t.length-=a,s((e=t.errored)!==null&&e!==void 0?e:new mi("write"))}let r=t[Pn].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new mi("end"))}Ko(t)}function wc(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,o=r.length-n;if(!o)return;let s=n;if(e.bufferProcessing=!0,o>1&&t._writev){e.pendingcb-=o-1;let a=e.allNoop?pc:f=>{for(let u=s;u<r.length;++u)r[u].callback(f)},c=e.allNoop&&s===0?r:vh(r,s);c.allBuffers=e.allBuffers,Ah(t,e,!0,e.length,c,"",a),Ko(e)}else{do{let{chunk:a,encoding:c,callback:f}=r[s];r[s++]=null;let u=i?1:a.length;Ah(t,e,!1,u,a,c,f)}while(s<r.length&&!e.writing);s===r.length?Ko(e):s>256?(r.splice(0,s),e.bufferedIndex=0):e.bufferedIndex=s}e.bufferProcessing=!1}ae.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new wx("_write()")};ae.prototype._writev=null;ae.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let o=Rh(this,t,e);o instanceof sx&&(i=o)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,mc(this,n,!0),n.ended=!0):n.finished?i=new bx("end"):n.destroyed&&(i=new mi("end"))),typeof r=="function"&&(i||n.finished?Vr.nextTick(r,i):n[Pn].push(r)),this};function Oo(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function Sx(t,e){let r=!1;function n(i){if(r){kn(t,i??Ph());return}if(r=!0,e.pendingcb--,i){let o=e[Pn].splice(0);for(let s=0;s<o.length;s++)o[s](i);kn(t,i,e.sync)}else Oo(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,Vr.nextTick(hc,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function vx(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,Sx(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function mc(t,e,r){Oo(e)&&(vx(t,e),e.pendingcb===0&&(r?(e.pendingcb++,Vr.nextTick((n,i)=>{Oo(i)?hc(n,i):i.pendingcb--},t,e)):Oo(e)&&(e.pendingcb++,hc(t,e))))}function hc(t,e){e.pendingcb--,e.finished=!0;let r=e[Pn].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}ax(ae.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Bx=No.destroy;ae.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[Pn].length)&&Vr.nextTick(yc,r),Bx.call(this,t,e),this};ae.prototype._undestroy=No.undestroy;ae.prototype._destroy=function(t,e){e(t)};ae.prototype[lx.captureRejectionSymbol]=function(t){this.destroy(t)};var dc;function Ch(){return dc===void 0&&(dc={}),dc}ae.fromWeb=function(t,e){return Ch().newStreamWritableFromWritableStream(t,e)};ae.toWeb=function(t){return Ch().newWritableStreamFromStreamWritable(t)}});var Gh=D((MA,Hh)=>{var gc=ar(),Tx=Me(),{isReadable:kx,isWritable:Px,isIterable:Oh,isNodeStream:Ix,isReadableNodeStream:Kh,isWritableNodeStream:Nh,isDuplexNodeStream:Rx}=wt(),Dh=Ot(),{AbortError:Vh,codes:{ERR_INVALID_ARG_TYPE:Ux,ERR_INVALID_RETURN_VALUE:Mh}}=Se(),{destroyer:In}=jr(),Cx=gt(),Lx=yi(),{createDeferredPromise:qh}=dt(),jh=oc(),Fh=globalThis.Blob||Tx.Blob,Ox=typeof Fh<"u"?function(e){return e instanceof Fh}:function(e){return!1},Kx=globalThis.AbortController||mo().AbortController,{FunctionPrototypeCall:$h}=le(),Hr=class extends Cx{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};Hh.exports=function t(e,r){if(Rx(e))return e;if(Kh(e))return Do({readable:e});if(Nh(e))return Do({writable:e});if(Ix(e))return Do({writable:!1,readable:!1});if(typeof e=="function"){let{value:i,write:o,final:s,destroy:a}=Nx(e);if(Oh(i))return jh(Hr,i,{objectMode:!0,write:o,final:s,destroy:a});let c=i?.then;if(typeof c=="function"){let f,u=$h(c,i,l=>{if(l!=null)throw new Mh("nully","body",l)},l=>{In(f,l)});return f=new Hr({objectMode:!0,readable:!1,write:o,final(l){s(async()=>{try{await u,gc.nextTick(l,null)}catch(p){gc.nextTick(l,p)}})},destroy:a})}throw new Mh("Iterable, AsyncIterable or AsyncFunction",r,i)}if(Ox(e))return t(e.arrayBuffer());if(Oh(e))return jh(Hr,e,{objectMode:!0,writable:!1});if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?Kh(e?.readable)?e?.readable:t(e.readable):void 0,o=e!=null&&e.writable?Nh(e?.writable)?e?.writable:t(e.writable):void 0;return Do({readable:i,writable:o})}let n=e?.then;if(typeof n=="function"){let i;return $h(n,e,o=>{o!=null&&i.push(o),i.push(null)},o=>{In(i,o)}),i=new Hr({objectMode:!0,writable:!1,read(){}})}throw new Ux(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function Nx(t){let{promise:e,resolve:r}=qh(),n=new Kx,i=n.signal;return{value:t(async function*(){for(;;){let s=e;e=null;let{chunk:a,done:c,cb:f}=await s;if(gc.nextTick(f),c)return;if(i.aborted)throw new Vh(void 0,{cause:i.reason});({promise:e,resolve:r}=qh()),yield a}}(),{signal:i}),write(s,a,c){let f=r;r=null,f({chunk:s,done:!1,cb:c})},final(s){let a=r;r=null,a({done:!0,cb:s})},destroy(s,a){n.abort(),a(s)}}}function Do(t){let e=t.readable&&typeof t.readable.read!="function"?Lx.wrap(t.readable):t.readable,r=t.writable,n=!!kx(e),i=!!Px(r),o,s,a,c,f;function u(l){let p=c;c=null,p?p(l):l&&f.destroy(l)}return f=new Hr({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(Dh(r,l=>{i=!1,l&&In(e,l),u(l)}),f._write=function(l,p,y){r.write(l,p)?y():o=y},f._final=function(l){r.end(),s=l},r.on("drain",function(){if(o){let l=o;o=null,l()}}),r.on("finish",function(){if(s){let l=s;s=null,l()}})),n&&(Dh(e,l=>{n=!1,l&&In(e,l),u(l)}),e.on("readable",function(){if(a){let l=a;a=null,l()}}),e.on("end",function(){f.push(null)}),f._read=function(){for(;;){let l=e.read();if(l===null){a=f._read;return}if(!f.push(l))return}}),f._destroy=function(l,p){!l&&c!==null&&(l=new Vh),a=null,o=null,s=null,c===null?p(l):(c=p,In(r,l),In(e,l))},f}});var gt=D((qA,zh)=>{"use strict";var{ObjectDefineProperties:Dx,ObjectGetOwnPropertyDescriptor:Kt,ObjectKeys:Mx,ObjectSetPrototypeOf:Jh}=le();zh.exports=Ze;var _c=yi(),$e=bc();Jh(Ze.prototype,_c.prototype);Jh(Ze,_c);{let t=Mx($e.prototype);for(let e=0;e<t.length;e++){let r=t[e];Ze.prototype[r]||(Ze.prototype[r]=$e.prototype[r])}}function Ze(t){if(!(this instanceof Ze))return new Ze(t);_c.call(this,t),$e.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}Dx(Ze.prototype,{writable:{__proto__:null,...Kt($e.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Kt($e.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Kt($e.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Kt($e.prototype,"writableBuffer")},writableLength:{__proto__:null,...Kt($e.prototype,"writableLength")},writableFinished:{__proto__:null,...Kt($e.prototype,"writableFinished")},writableCorked:{__proto__:null,...Kt($e.prototype,"writableCorked")},writableEnded:{__proto__:null,...Kt($e.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Kt($e.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var xc;function Wh(){return xc===void 0&&(xc={}),xc}Ze.fromWeb=function(t,e){return Wh().newStreamDuplexFromReadableWritablePair(t,e)};Ze.toWeb=function(t){return Wh().newReadableWritablePairFromDuplex(t)};var Ec;Ze.from=function(t){return Ec||(Ec=Gh()),Ec(t,"body")}});var vc=D((jA,Zh)=>{"use strict";var{ObjectSetPrototypeOf:Yh,Symbol:qx}=le();Zh.exports=Nt;var{ERR_METHOD_NOT_IMPLEMENTED:jx}=Se().codes,Sc=gt(),{getHighWaterMark:Fx}=Io();Yh(Nt.prototype,Sc.prototype);Yh(Nt,Sc);var gi=qx("kCallback");function Nt(t){if(!(this instanceof Nt))return new Nt(t);let e=t?Fx(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Sc.call(this,t),this._readableState.sync=!1,this[gi]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",$x)}function Ac(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function $x(){this._final!==Ac&&Ac.call(this)}Nt.prototype._final=Ac;Nt.prototype._transform=function(t,e,r){throw new jx("_transform()")};Nt.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,o=n.length;this._transform(t,e,(s,a)=>{if(s){r(s);return}a!=null&&this.push(a),i.ended||o===n.length||n.length<n.highWaterMark?r():this[gi]=r})};Nt.prototype._read=function(){if(this[gi]){let t=this[gi];this[gi]=null,t()}}});var Tc=D((FA,Qh)=>{"use strict";var{ObjectSetPrototypeOf:Xh}=le();Qh.exports=Rn;var Bc=vc();Xh(Rn.prototype,Bc.prototype);Xh(Rn,Bc);function Rn(t){if(!(this instanceof Rn))return new Rn(t);Bc.call(this,t)}Rn.prototype._transform=function(t,e,r){r(null,t)}});var Fo=D(($A,ip)=>{var xi=ar(),{ArrayIsArray:Vx,Promise:Hx,SymbolAsyncIterator:Gx}=le(),jo=Ot(),{once:Jx}=dt(),Wx=jr(),ep=gt(),{aggregateTwoErrors:zx,codes:{ERR_INVALID_ARG_TYPE:Oc,ERR_INVALID_RETURN_VALUE:kc,ERR_MISSING_ARGS:Yx,ERR_STREAM_DESTROYED:Zx,ERR_STREAM_PREMATURE_CLOSE:Xx},AbortError:Qx}=Se(),{validateFunction:eE,validateAbortSignal:tE}=di(),{isIterable:Gr,isReadable:Pc,isReadableNodeStream:qo,isNodeStream:tp,isTransformStream:Un,isWebStream:rE,isReadableStream:Ic,isReadableEnded:nE}=wt(),iE=globalThis.AbortController||mo().AbortController,Rc,Uc;function rp(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=jo(t,{readable:e,writable:r},o=>{n=!o});return{destroy:o=>{n||(n=!0,Wx.destroyer(t,o||new Zx("pipe")))},cleanup:i}}function oE(t){return eE(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function Cc(t){if(Gr(t))return t;if(qo(t))return sE(t);throw new Oc("val",["Readable","Iterable","AsyncIterable"],t)}async function*sE(t){Uc||(Uc=yi()),yield*Uc.prototype[Gx].call(t)}async function Mo(t,e,r,{end:n}){let i,o=null,s=f=>{if(f&&(i=f),o){let u=o;o=null,u()}},a=()=>new Hx((f,u)=>{i?u(i):o=()=>{i?u(i):f()}});e.on("drain",s);let c=jo(e,{readable:!1},s);try{e.writableNeedDrain&&await a();for await(let f of t)e.write(f)||await a();n&&e.end(),await a(),r()}catch(f){r(i!==f?zx(i,f):f)}finally{c(),e.off("drain",s)}}async function Lc(t,e,r,{end:n}){Un(e)&&(e=e.writable);let i=e.getWriter();try{for await(let o of t)await i.ready,i.write(o).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(o){try{await i.abort(o),r(o)}catch(s){r(s)}}}function aE(...t){return np(t,Jx(oE(t)))}function np(t,e,r){if(t.length===1&&Vx(t[0])&&(t=t[0]),t.length<2)throw new Yx("streams");let n=new iE,i=n.signal,o=r?.signal,s=[];tE(o,"options.signal");function a(){y(new Qx)}o?.addEventListener("abort",a);let c,f,u=[],l=0;function p(x){y(x,--l===0)}function y(x,w){if(x&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=x),!(!c&&!w)){for(;u.length;)u.shift()(c);o?.removeEventListener("abort",a),n.abort(),w&&(c||s.forEach(B=>B()),xi.nextTick(e,c,f))}}let d;for(let x=0;x<t.length;x++){let w=t[x],B=x<t.length-1,_=x>0,S=B||r?.end!==!1,I=x===t.length-1;if(tp(w)){let T=function(U){U&&U.name!=="AbortError"&&U.code!=="ERR_STREAM_PREMATURE_CLOSE"&&p(U)};var g=T;if(S){let{destroy:U,cleanup:O}=rp(w,B,_);u.push(U),Pc(w)&&I&&s.push(O)}w.on("error",T),Pc(w)&&I&&s.push(()=>{w.removeListener("error",T)})}if(x===0)if(typeof w=="function"){if(d=w({signal:i}),!Gr(d))throw new kc("Iterable, AsyncIterable or Stream","source",d)}else Gr(w)||qo(w)||Un(w)?d=w:d=ep.from(w);else if(typeof w=="function"){if(Un(d)){var h;d=Cc((h=d)===null||h===void 0?void 0:h.readable)}else d=Cc(d);if(d=w(d,{signal:i}),B){if(!Gr(d,!0))throw new kc("AsyncIterable",`transform[${x-1}]`,d)}else{var m;Rc||(Rc=Tc());let T=new Rc({objectMode:!0}),U=(m=d)===null||m===void 0?void 0:m.then;if(typeof U=="function")l++,U.call(d,M=>{f=M,M!=null&&T.write(M),S&&T.end(),xi.nextTick(p)},M=>{T.destroy(M),xi.nextTick(p,M)});else if(Gr(d,!0))l++,Mo(d,T,p,{end:S});else if(Ic(d)||Un(d)){let M=d.readable||d;l++,Mo(M,T,p,{end:S})}else throw new kc("AsyncIterable or Promise","destination",d);d=T;let{destroy:O,cleanup:C}=rp(d,!1,!0);u.push(O),I&&s.push(C)}}else if(tp(w)){if(qo(d)){l+=2;let T=cE(d,w,p,{end:S});Pc(w)&&I&&s.push(T)}else if(Un(d)||Ic(d)){let T=d.readable||d;l++,Mo(T,w,p,{end:S})}else if(Gr(d))l++,Mo(d,w,p,{end:S});else throw new Oc("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],d);d=w}else if(rE(w)){if(qo(d))l++,Lc(Cc(d),w,p,{end:S});else if(Ic(d)||Gr(d))l++,Lc(d,w,p,{end:S});else if(Un(d))l++,Lc(d.readable,w,p,{end:S});else throw new Oc("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],d);d=w}else d=ep.from(w)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&xi.nextTick(a),d}function cE(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new Xx)}),t.pipe(e,{end:!1}),n){let s=function(){i=!0,e.end()};var o=s;nE(t)?xi.nextTick(s):t.once("end",s)}else r();return jo(t,{readable:!0,writable:!1},s=>{let a=t._readableState;s&&s.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(s)}),jo(e,{readable:!1,writable:!0},r)}ip.exports={pipelineImpl:np,pipeline:aE}});var Nc=D((VA,up)=>{"use strict";var{pipeline:fE}=Fo(),$o=gt(),{destroyer:uE}=jr(),{isNodeStream:Vo,isReadable:op,isWritable:sp,isWebStream:Kc,isTransformStream:Jr,isWritableStream:ap,isReadableStream:cp}=wt(),{AbortError:lE,codes:{ERR_INVALID_ARG_VALUE:fp,ERR_MISSING_ARGS:dE}}=Se(),hE=Ot();up.exports=function(...e){if(e.length===0)throw new dE("streams");if(e.length===1)return $o.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=$o.from(e[0])),typeof e[e.length-1]=="function"){let y=e.length-1;e[y]=$o.from(e[y])}for(let y=0;y<e.length;++y)if(!(!Vo(e[y])&&!Kc(e[y]))){if(y<e.length-1&&!(op(e[y])||cp(e[y])||Jr(e[y])))throw new fp(`streams[${y}]`,r[y],"must be readable");if(y>0&&!(sp(e[y])||ap(e[y])||Jr(e[y])))throw new fp(`streams[${y}]`,r[y],"must be writable")}let n,i,o,s,a;function c(y){let d=s;s=null,d?d(y):y?a.destroy(y):!p&&!l&&a.destroy()}let f=e[0],u=fE(e,c),l=!!(sp(f)||ap(f)||Jr(f)),p=!!(op(u)||cp(u)||Jr(u));if(a=new $o({writableObjectMode:!!(f!=null&&f.writableObjectMode),readableObjectMode:!!(u!=null&&u.writableObjectMode),writable:l,readable:p}),l){if(Vo(f))a._write=function(d,h,m){f.write(d,h)?m():n=m},a._final=function(d){f.end(),i=d},f.on("drain",function(){if(n){let d=n;n=null,d()}});else if(Kc(f)){let h=(Jr(f)?f.writable:f).getWriter();a._write=async function(m,g,x){try{await h.ready,h.write(m).catch(()=>{}),x()}catch(w){x(w)}},a._final=async function(m){try{await h.ready,h.close().catch(()=>{}),i=m}catch(g){m(g)}}}let y=Jr(u)?u.readable:u;hE(y,()=>{if(i){let d=i;i=null,d()}})}if(p){if(Vo(u))u.on("readable",function(){if(o){let y=o;o=null,y()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let y=u.read();if(y===null){o=a._read;return}if(!a.push(y))return}};else if(Kc(u)){let d=(Jr(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:m}=await d.read();if(!a.push(h))return;if(m){a.push(null);return}}catch{return}}}}return a._destroy=function(y,d){!y&&s!==null&&(y=new lE),o=null,n=null,i=null,s===null?d(y):(s=d,Vo(u)&&uE(u,y))},a}});var bp=D((HA,qc)=>{"use strict";var pp=globalThis.AbortController||mo().AbortController,{codes:{ERR_INVALID_ARG_VALUE:pE,ERR_INVALID_ARG_TYPE:Ei,ERR_MISSING_ARGS:yE,ERR_OUT_OF_RANGE:wE},AbortError:xt}=Se(),{validateAbortSignal:Wr,validateInteger:mE,validateObject:zr}=di(),bE=le().Symbol("kWeak"),{finished:gE}=Ot(),xE=Nc(),{addAbortSignalNoValidate:EE}=hi(),{isWritable:_E,isNodeStream:AE}=wt(),{ArrayPrototypePush:SE,MathFloor:vE,Number:BE,NumberIsNaN:TE,Promise:lp,PromiseReject:dp,PromisePrototypeThen:kE,Symbol:yp}=le(),Ho=yp("kEmpty"),hp=yp("kEof");function PE(t,e){if(e!=null&&zr(e,"options"),e?.signal!=null&&Wr(e.signal,"options.signal"),AE(t)&&!_E(t))throw new pE("stream",t,"must be writable");let r=xE(this,t);return e!=null&&e.signal&&EE(e.signal,r),r}function Go(t,e){if(typeof t!="function")throw new Ei("fn",["Function","AsyncFunction"],t);e!=null&&zr(e,"options"),e?.signal!=null&&Wr(e.signal,"options.signal");let r=1;return e?.concurrency!=null&&(r=vE(e.concurrency)),mE(r,"concurrency",1),(async function*(){var i,o;let s=new pp,a=this,c=[],f=s.signal,u={signal:f},l=()=>s.abort();e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted&&l(),e==null||(o=e.signal)===null||o===void 0||o.addEventListener("abort",l);let p,y,d=!1;function h(){d=!0}async function m(){try{for await(let w of a){var g;if(d)return;if(f.aborted)throw new xt;try{w=t(w,u)}catch(B){w=dp(B)}w!==Ho&&(typeof((g=w)===null||g===void 0?void 0:g.catch)=="function"&&w.catch(h),c.push(w),p&&(p(),p=null),!d&&c.length&&c.length>=r&&await new lp(B=>{y=B}))}c.push(hp)}catch(w){let B=dp(w);kE(B,void 0,h),c.push(B)}finally{var x;d=!0,p&&(p(),p=null),e==null||(x=e.signal)===null||x===void 0||x.removeEventListener("abort",l)}}m();try{for(;;){for(;c.length>0;){let g=await c[0];if(g===hp)return;if(f.aborted)throw new xt;g!==Ho&&(yield g),c.shift(),y&&(y(),y=null)}await new lp(g=>{p=g})}}finally{s.abort(),d=!0,y&&(y(),y=null)}}).call(this)}function IE(t=void 0){return t!=null&&zr(t,"options"),t?.signal!=null&&Wr(t.signal,"options.signal"),(async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new xt({cause:t.signal.reason});yield[r++,i]}}).call(this)}async function wp(t,e=void 0){for await(let r of Mc.call(this,t,e))return!0;return!1}async function RE(t,e=void 0){if(typeof t!="function")throw new Ei("fn",["Function","AsyncFunction"],t);return!await wp.call(this,async(...r)=>!await t(...r),e)}async function UE(t,e){for await(let r of Mc.call(this,t,e))return r}async function CE(t,e){if(typeof t!="function")throw new Ei("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),Ho}for await(let n of Go.call(this,r,e));}function Mc(t,e){if(typeof t!="function")throw new Ei("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:Ho}return Go.call(this,r,e)}var Dc=class extends yE{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function LE(t,e,r){var n;if(typeof t!="function")throw new Ei("reducer",["Function","AsyncFunction"],t);r!=null&&zr(r,"options"),r?.signal!=null&&Wr(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let f=new xt(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await gE(this.destroy(f)),f}let o=new pp,s=o.signal;if(r!=null&&r.signal){let f={once:!0,[bE]:this};r.signal.addEventListener("abort",()=>o.abort(),f)}let a=!1;try{for await(let f of this){var c;if(a=!0,r!=null&&(c=r.signal)!==null&&c!==void 0&&c.aborted)throw new xt;i?e=await t(e,f,{signal:s}):(e=f,i=!0)}if(!a&&!i)throw new Dc}finally{o.abort()}return e}async function OE(t){t!=null&&zr(t,"options"),t?.signal!=null&&Wr(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new xt(void 0,{cause:t.signal.reason});SE(e,n)}return e}function KE(t,e){let r=Go.call(this,t,e);return(async function*(){for await(let i of r)yield*i}).call(this)}function mp(t){if(t=BE(t),TE(t))return 0;if(t<0)throw new wE("number",">= 0",t);return t}function NE(t,e=void 0){return e!=null&&zr(e,"options"),e?.signal!=null&&Wr(e.signal,"options.signal"),t=mp(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new xt;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new xt;t--<=0&&(yield o)}}).call(this)}function DE(t,e=void 0){return e!=null&&zr(e,"options"),e?.signal!=null&&Wr(e.signal,"options.signal"),t=mp(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new xt;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new xt;if(t-- >0)yield o;else return}}).call(this)}qc.exports.streamReturningOperators={asIndexedPairs:IE,drop:NE,filter:Mc,flatMap:KE,map:Go,take:DE,compose:PE};qc.exports.promiseReturningOperators={every:RE,forEach:CE,reduce:LE,toArray:OE,some:wp,find:UE}});var jc=D((GA,gp)=>{"use strict";var{ArrayPrototypePop:ME,Promise:qE}=le(),{isIterable:jE,isNodeStream:FE,isWebStream:$E}=wt(),{pipelineImpl:VE}=Fo(),{finished:HE}=Ot();Fc();function GE(...t){return new qE((e,r)=>{let n,i,o=t[t.length-1];if(o&&typeof o=="object"&&!FE(o)&&!jE(o)&&!$E(o)){let s=ME(t);n=s.signal,i=s.end}VE(t,(s,a)=>{s?r(s):e(a)},{signal:n,end:i})})}gp.exports={finished:HE,pipeline:GE}});var Fc=D((JA,kp)=>{var{Buffer:JE}=Me(),{ObjectDefineProperty:Dt,ObjectKeys:_p,ReflectApply:Ap}=le(),{promisify:{custom:Sp}}=dt(),{streamReturningOperators:xp,promiseReturningOperators:Ep}=bp(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:vp}}=Se(),WE=Nc(),{pipeline:Bp}=Fo(),{destroyer:zE}=jr(),Tp=Ot(),$c=jc(),Vc=wt(),fe=kp.exports=To().Stream;fe.isDisturbed=Vc.isDisturbed;fe.isErrored=Vc.isErrored;fe.isReadable=Vc.isReadable;fe.Readable=yi();for(let t of _p(xp)){let r=function(...n){if(new.target)throw vp();return fe.Readable.from(Ap(e,this,n))};Hc=r;let e=xp[t];Dt(r,"name",{__proto__:null,value:e.name}),Dt(r,"length",{__proto__:null,value:e.length}),Dt(fe.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var Hc;for(let t of _p(Ep)){let r=function(...i){if(new.target)throw vp();return Ap(e,this,i)};Hc=r;let e=Ep[t];Dt(r,"name",{__proto__:null,value:e.name}),Dt(r,"length",{__proto__:null,value:e.length}),Dt(fe.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var Hc;fe.Writable=bc();fe.Duplex=gt();fe.Transform=vc();fe.PassThrough=Tc();fe.pipeline=Bp;var{addAbortSignal:YE}=hi();fe.addAbortSignal=YE;fe.finished=Tp;fe.destroy=zE;fe.compose=WE;Dt(fe,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return $c}});Dt(Bp,Sp,{__proto__:null,enumerable:!0,get(){return $c.pipeline}});Dt(Tp,Sp,{__proto__:null,enumerable:!0,get(){return $c.finished}});fe.Stream=fe;fe._isUint8Array=function(e){return e instanceof Uint8Array};fe._uint8ArrayToBuffer=function(e){return JE.from(e.buffer,e.byteOffset,e.byteLength)}});var Gc=D((WA,ue)=>{"use strict";var he=Fc(),ZE=jc(),XE=he.Readable.destroy;ue.exports=he.Readable;ue.exports._uint8ArrayToBuffer=he._uint8ArrayToBuffer;ue.exports._isUint8Array=he._isUint8Array;ue.exports.isDisturbed=he.isDisturbed;ue.exports.isErrored=he.isErrored;ue.exports.isReadable=he.isReadable;ue.exports.Readable=he.Readable;ue.exports.Writable=he.Writable;ue.exports.Duplex=he.Duplex;ue.exports.Transform=he.Transform;ue.exports.PassThrough=he.PassThrough;ue.exports.addAbortSignal=he.addAbortSignal;ue.exports.finished=he.finished;ue.exports.destroy=he.destroy;ue.exports.destroy=XE;ue.exports.pipeline=he.pipeline;ue.exports.compose=he.compose;Object.defineProperty(he,"promises",{configurable:!0,enumerable:!0,get(){return ZE}});ue.exports.Stream=he.Stream;ue.exports.default=ue.exports});var q2={};gs(q2,{AES_GCM_TAG_LENGTHS:()=>Ci,AesCtr:()=>nn,AesCtrAlgorithm:()=>Af,AesGcm:()=>on,AesGcmAlgorithm:()=>If,ConcatKdf:()=>Rf,CryptoAlgorithm:()=>Oe,CryptoUtils:()=>v2,EcdsaAlgorithm:()=>Nn,Ed25519:()=>zt,EdDsaAlgorithm:()=>Ii,KEY_URI_PREFIX_JWK:()=>cs,LocalKeyManager:()=>Ef,P256:()=>Wt,POLY1305_TAG_LENGTH:()=>M2,Pbkdf2:()=>Uf,Secp256k1:()=>Jt,Secp256r1:()=>Wt,Sha256:()=>Yr,Sha2Algorithm:()=>_i,X25519:()=>Cf,XChaCha20:()=>Df,XChaCha20Poly1305:()=>Mf,canonicalize:()=>hf,computeJwkThumbprint:()=>G,isEcPrivateJwk:()=>rt,isEcPublicJwk:()=>en,isOctPrivateJwk:()=>Gt,isOkpPrivateJwk:()=>nt,isOkpPublicJwk:()=>tn,isPrivateJwk:()=>pf,isPublicJwk:()=>D1});var Fy=Oi(Yf(),1);var V2=new Uint8Array(0);function Zf(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function sn(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function Vy(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,c=t.charAt(0),f=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var h=0,m=0,g=0,x=d.length;g!==x&&d[g]===0;)g++,h++;for(var w=(x-g)*u+1>>>0,B=new Uint8Array(w);g!==x;){for(var _=d[g],S=0,I=w-1;(_!==0||S<m)&&I!==-1;I--,S++)_+=256*B[I]>>>0,B[I]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");m=S,g++}for(var T=w-m;T!==w&&B[T]===0;)T++;for(var U=c.repeat(h);T<w;++T)U+=t.charAt(B[T]);return U}function p(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var h=0;if(d[h]!==" "){for(var m=0,g=0;d[h]===c;)m++,h++;for(var x=(d.length-h)*f+1>>>0,w=new Uint8Array(x);d[h];){var B=r[d.charCodeAt(h)];if(B===255)return;for(var _=0,S=x-1;(B!==0||_<g)&&S!==-1;S--,_++)B+=a*w[S]>>>0,w[S]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");g=_,h++}if(d[h]!==" "){for(var I=x-g;I!==x&&w[I]===0;)I++;for(var T=new Uint8Array(m+(x-I)),U=m;I!==x;)T[U++]=w[I++];return T}}}function y(d){var h=p(d);if(h)return h;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:p,decode:y}}var Hy=Vy,Gy=Hy,Xf=Gy;var _s=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},As=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Qf(this,e)}},Ss=class{decoders;constructor(e){this.decoders=e}or(e){return Qf(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Qf(t,e){return new Ss({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}var vs=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new _s(e,r,n),this.decoder=new As(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function eu({name:t,prefix:e,encode:r,decode:n}){return new vs(t,e,r,n)}function Bs({name:t,prefix:e,alphabet:r}){let{encode:n,decode:i}=Xf(r,t);return eu({prefix:e,name:t,encode:n,decode:o=>sn(i(o))})}function Jy(t,e,r,n){let i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,c=0,f=0;for(let u=0;u<o;++u){let l=i[t[u]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,s[f++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s}function Wy(t,e,r){let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s!==0&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o}function Ae({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return eu({prefix:e,name:t,encode(i){return Wy(i,n,r)},decode(i){return Jy(i,n,r,t)}})}var Mn=Ae({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Y2=Ae({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Z2=Ae({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),X2=Ae({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Q2=Ae({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),e_=Ae({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),t_=Ae({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),r_=Ae({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ts=Ae({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Te=Bs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),o_=Bs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var c_=Ae({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),f_=Ae({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ot=Ae({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),u_=Ae({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function tu(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function ru(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function qn(t){let r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,i]=r;return i}var jn=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{f(n.next(u))}catch(l){s(l)}}function c(u){try{f(n.throw(u))}catch(l){s(l)}}function f(u){u.done?o(u.value):i(u.value).then(a,c)}f((n=n.apply(t,e||[])).next())})},nu=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(f){o({value:f,done:a})},s)}},Ni=new TextEncoder,br=new TextDecoder,q=class t{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new t(e,"ArrayBuffer")}static asyncIterable(e){if(!ru(e))throw new TypeError("Input must be of type AsyncIterable.");return new t(e,"AsyncIterable")}static base32Z(e){return new t(e,"Base32Z")}static base58Btc(e){return new t(e,"Base58Btc")}static base64Url(e){return new t(e,"Base64Url")}static bufferSource(e){return new t(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new t(e,"Hex")}static multibase(e){return new t(e,"Multibase")}static object(e){return new t(e,"Object")}static string(e){return new t(e,"String")}static uint8Array(e){return new t(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return Te.baseDecode(this.data).buffer;case"Base64Url":return ot.baseDecode(this.data).buffer;case"BufferSource":{if(qn(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return tu(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return jn(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return Ts.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return Te.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return Te.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return ot.baseEncode(e)}case"BufferSource":{let e=this.toUint8Array();return ot.baseEncode(e)}case"Object":{let e=JSON.stringify(this.data),r=Ni.encode(e);return ot.baseEncode(r)}case"String":{let e=Ni.encode(this.data);return ot.baseEncode(e)}case"Uint8Array":return ot.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){return jn(this,void 0,void 0,function*(){var e,r,n,i;switch(this.format){case"AsyncIterable":{let c=[];try{for(var o=!0,s=nu(this.data),a;a=yield s.next(),e=a.done,!e;o=!0){i=a.value,o=!1;let u=i;c.push(u)}}catch(u){r={error:u}}finally{try{!o&&!e&&(n=s.return)&&(yield n.call(s))}finally{if(r)throw r.error}}return new Blob(c)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){let e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Base64Url":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{let e=ot.baseDecode(this.data),r=br.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{let e=br.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return jn(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return br.decode(this.data);case"Base64Url":{let e=ot.baseDecode(this.data);return br.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return br.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){return jn(this,void 0,void 0,function*(){var e,r,n,i;switch(this.format){case"AsyncIterable":{let c="";try{for(var o=!0,s=nu(this.data),a;a=yield s.next(),e=a.done,!e;o=!0){i=a.value,o=!1;let f=i;typeof f=="string"?c+=f:c+=br.decode(f,{stream:!0})}}catch(f){r={error:f}}finally{try{!o&&!e&&(n=s.return)&&(yield n.call(s))}finally{if(r)throw r.error}}return c+=br.decode(void 0,{stream:!1}),c}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return Ts.baseDecode(this.data);case"Base58Btc":return Te.baseDecode(this.data);case"Base64Url":return ot.baseDecode(this.data);case"BufferSource":{let e=qn(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{let e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){let n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{let e=JSON.stringify(this.data);return Ni.encode(e)}case"String":return Ni.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return jn(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var St={};gs(St,{decode:()=>an,encodeTo:()=>gr,encodingLength:()=>xr});var zy=su,iu=128,Yy=127,Zy=~Yy,Xy=Math.pow(2,31);function su(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Xy;)e[r++]=t&255|iu,t/=128;for(;t&Zy;)e[r++]=t&255|iu,t>>>=7;return e[r]=t|0,su.bytes=r-n+1,e}var Qy=ks,e0=128,ou=127;function ks(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw ks.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&ou)<<i:(s&ou)*Math.pow(2,i),i+=7}while(s>=e0);return ks.bytes=o-n,r}var t0=Math.pow(2,7),r0=Math.pow(2,14),n0=Math.pow(2,21),i0=Math.pow(2,28),o0=Math.pow(2,35),s0=Math.pow(2,42),a0=Math.pow(2,49),c0=Math.pow(2,56),f0=Math.pow(2,63),u0=function(t){return t<t0?1:t<r0?2:t<n0?3:t<i0?4:t<o0?5:t<s0?6:t<a0?7:t<c0?8:t<f0?9:10},l0={encode:zy,decode:Qy,encodingLength:u0},d0=l0,Fn=d0;function an(t,e=0){return[Fn.decode(t,e),Fn.decode.bytes]}function gr(t,e,r=0){return Fn.encode(t,e,r),e}function xr(t){return Fn.encodingLength(t)}function Ps(t,e){let r=e.byteLength,n=xr(t),i=n+xr(r),o=new Uint8Array(i+r);return gr(t,o,0),gr(r,o,n),o.set(e,i),new cn(t,r,e,o)}function au(t){let e=sn(t),[r,n]=an(e),[i,o]=an(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new cn(r,i,s,e)}function cu(t,e){if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&Zf(t.bytes,r.bytes)}}var cn=class{code;size;digest;bytes;constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};function fu(t,e){let{bytes:r,version:n}=t;switch(n){case 0:return p0(r,Rs(t),e??Te.encoder);default:return y0(r,Rs(t),e??Mn.encoder)}}var uu=new WeakMap;function Rs(t){let e=uu.get(t);if(e==null){let r=new Map;return uu.set(t,r),r}return e}var Us=class t{code;version;multihash;bytes;"/";constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==$n)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==w0)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Ps(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n!=null&&e.code===n.code&&e.version===n.version&&cu(e.multihash,n.multihash)}toString(e){return fu(this,e)}toJSON(){return{"/":fu(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new t(n,i,o,s??lu(n,i,o.bytes))}else if(r[m0]===!0){let{version:n,multihash:i,code:o}=r,s=au(i);return t.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==$n)throw new Error(`Version 0 CID must use dag-pb (code: ${$n}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let i=lu(e,r,n.bytes);return new t(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,$n,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,i=sn(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new cn(r.multihashCode,r.digestSize,o,i);return[r.version===0?t.createV0(s):t.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,p]=an(e.subarray(r));return r+=p,l},i=n(),o=$n;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),c=n(),f=r+c,u=f-s;return{version:i,codec:o,multihashCode:a,digestSize:c,multihashSize:u,size:f}}static parse(e,r){let[n,i]=h0(e,r),o=t.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Rs(o).set(n,e),o}};function h0(t,e){switch(t[0]){case"Q":{let r=e??Te;return[Te.prefix,r.decode(`${Te.prefix}${t}`)]}case Te.prefix:{let r=e??Te;return[Te.prefix,r.decode(t)]}case Mn.prefix:{let r=e??Mn;return[Mn.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function p0(t,e,r){let{prefix:n}=r;if(n!==Te.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i}function y0(t,e,r){let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i}var $n=112,w0=18;function lu(t,e,r){let n=xr(t),i=n+xr(e),o=new Uint8Array(i+r.byteLength);return gr(t,o,0),gr(e,o,n),o.set(r,i),o}var m0=Symbol.for("@ipld/js-cid/CID");var st=class t{static addPrefix(e){var r;let{code:n,data:i,name:o}=e;if(!(o?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=t.codeToName.has(n)?n:t.nameToCode.get(o),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);let s=St.encodingLength(n),a=new Uint8Array(s+i.byteLength);return a.set(i,s),St.encodeTo(n,a),a}static getCodeFromData(e){let{prefixedData:r}=e,[n,i]=St.decode(r);return n}static getCodeFromName(e){let{name:r}=e,n=t.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){let{code:r}=e,n=t.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){t.codeToName.set(e.code,e.name),t.nameToCode.set(e.name,e.code)}static removePrefix(e){let{prefixedData:r}=e,[n,i]=St.decode(r),o=t.codeToName.get(n);if(o===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(i),name:o}}};st.codeToName=new Map;st.nameToCode=new Map;st.registerCodec({code:237,name:"ed25519-pub"});st.registerCodec({code:4864,name:"ed25519-priv"});st.registerCodec({code:236,name:"x25519-pub"});st.registerCodec({code:4866,name:"x25519-priv"});st.registerCodec({code:231,name:"secp256k1-pub"});st.registerCodec({code:4865,name:"secp256k1-priv"});function Cs(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&Cs(t[e])})}var rm=Oi(Vl(),1),Nr=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{f(n.next(u))}catch(l){s(l)}}function c(u){try{f(n.throw(u))}catch(l){s(l)}}function f(u){u.done?o(u.value):i(u.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};var yo=class{constructor(){this.store=new Map}clear(){return Nr(this,void 0,void 0,function*(){this.store.clear()})}close(){return Nr(this,void 0,void 0,function*(){})}delete(e){return Nr(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return Nr(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return Nr(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return Nr(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return Nr(this,void 0,void 0,function*(){this.store.set(e,r)})}};var QE=Oi(Gc(),1);var e1=Oi(Gc(),1);function t1(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Jo(t,...e){if(!t1(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function Jc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Pp(t,e){Jo(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Mt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var zo=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Xe=(t,e)=>t<<32-e|t>>>e;var dS=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function r1(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Wc(t){return typeof t=="string"&&(t=r1(t)),Jo(t),t}function zc(...t){let e=0;for(let n=0;n<t.length;n++){let i=t[n];Jo(i),e+=i.length}let r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}var Wo=class{clone(){return this._cloneInto()}},hS={}.toString;function Ip(t){let e=n=>t().update(Wc(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Rp(t=32){if(Mt&&typeof Mt.getRandomValues=="function")return Mt.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function n1(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,f=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+f,a,n)}var Up=(t,e,r)=>t&e^~t&r,Cp=(t,e,r)=>t&e^t&r^e&r,Yo=class extends Wo{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=zo(this.buffer)}update(e){Jc(this);let{view:r,buffer:n,blockLen:i}=this;e=Wc(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=zo(e);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Jc(this),Pp(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;n1(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=zo(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let f=c/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<f;l++)a.setUint32(4*l,u[l],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};var i1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ur=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lr=new Uint32Array(64),Yc=class extends Yo{constructor(){super(64,32,8,!1),this.A=ur[0]|0,this.B=ur[1]|0,this.C=ur[2]|0,this.D=ur[3]|0,this.E=ur[4]|0,this.F=ur[5]|0,this.G=ur[6]|0,this.H=ur[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[e,r,n,i,o,s,a,c]}set(e,r,n,i,o,s,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(e,r){for(let l=0;l<16;l++,r+=4)lr[l]=e.getUint32(r,!1);for(let l=16;l<64;l++){let p=lr[l-15],y=lr[l-2],d=Xe(p,7)^Xe(p,18)^p>>>3,h=Xe(y,17)^Xe(y,19)^y>>>10;lr[l]=h+lr[l-7]+d+lr[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:f,H:u}=this;for(let l=0;l<64;l++){let p=Xe(a,6)^Xe(a,11)^Xe(a,25),y=u+p+Up(a,c,f)+i1[l]+lr[l]|0,h=(Xe(n,2)^Xe(n,13)^Xe(n,22))+Cp(n,i,o)|0;u=f,f=c,c=a,a=s+y|0,s=o,o=i,i=n,n=y+h|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(n,i,o,s,a,c,f,u)}roundClean(){lr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Et=Ip(()=>new Yc);var Yr=class{static async digest({data:e}){return Et(e)}};var Oe=class{};var _i=class extends Oe{async digest({algorithm:e,data:r}){switch(e){case"SHA-256":return await Yr.digest({data:r})}}};function Lp(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function o1(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Zc(t,...e){if(!o1(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Op(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Lp(t.outputLen),Lp(t.blockLen)}function Cn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Kp(t,e){Zc(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Zo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Np(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var Xo=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Qe=(t,e)=>t<<32-e|t>>>e,s1=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!s1)throw new Error("Non little-endian hardware is not supported");function Xc(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Ai(t){if(typeof t=="string"&&(t=Xc(t)),!Np(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Qo(...t){let e=0;for(let n=0;n<t.length;n++){let i=t[n];if(!Np(i))throw new Error("Uint8Array expected");e+=i.length}let r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}var Ln=class{clone(){return this._cloneInto()}},IS={}.toString;function es(t){let e=n=>t().update(Ai(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Si(t=32){if(Zo&&typeof Zo.getRandomValues=="function")return Zo.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function a1(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,f=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+f,a,n)}var On=class extends Ln{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Xo(this.buffer)}update(e){Cn(this);let{view:r,buffer:n,blockLen:i}=this;e=Ai(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=Xo(e);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Cn(this),Kp(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;a1(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=Xo(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let f=c/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<f;l++)a.setUint32(4*l,u[l],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};var c1=(t,e,r)=>t&e^~t&r,f1=(t,e,r)=>t&e^t&r^e&r,u1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),dr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),hr=new Uint32Array(64),Qc=class extends On{constructor(){super(64,32,8,!1),this.A=dr[0]|0,this.B=dr[1]|0,this.C=dr[2]|0,this.D=dr[3]|0,this.E=dr[4]|0,this.F=dr[5]|0,this.G=dr[6]|0,this.H=dr[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[e,r,n,i,o,s,a,c]}set(e,r,n,i,o,s,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(e,r){for(let l=0;l<16;l++,r+=4)hr[l]=e.getUint32(r,!1);for(let l=16;l<64;l++){let p=hr[l-15],y=hr[l-2],d=Qe(p,7)^Qe(p,18)^p>>>3,h=Qe(y,17)^Qe(y,19)^y>>>10;hr[l]=h+hr[l-7]+d+hr[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:f,H:u}=this;for(let l=0;l<64;l++){let p=Qe(a,6)^Qe(a,11)^Qe(a,25),y=u+p+c1(a,c,f)+u1[l]+hr[l]|0,h=(Qe(n,2)^Qe(n,13)^Qe(n,22))+f1(n,i,o)|0;u=f,f=c,c=a,a=s+y|0,s=o,o=i,i=n,n=y+h|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(n,i,o,s,a,c,f,u)}roundClean(){hr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var ts=es(()=>new Qc);var ns={};gs(ns,{bitGet:()=>m1,bitLen:()=>w1,bitMask:()=>vi,bitSet:()=>b1,bytesToHex:()=>jt,bytesToNumberBE:()=>Ft,bytesToNumberLE:()=>tt,concatBytes:()=>Vt,createHmacDrbg:()=>rf,ensureBytes:()=>ie,equalBytes:()=>p1,hexToBytes:()=>Zr,hexToNumber:()=>tf,isBytes:()=>et,numberToBytesBE:()=>Ie,numberToBytesLE:()=>$t,numberToHexUnpadded:()=>jp,numberToVarBytesBE:()=>h1,utf8ToBytes:()=>y1,validateObject:()=>Ve});var qp=BigInt(0),rs=BigInt(1),l1=BigInt(2);function et(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var d1=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function jt(t){if(!et(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=d1[t[r]];return e}function jp(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function tf(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var qt={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Dp(t){if(t>=qt._0&&t<=qt._9)return t-qt._0;if(t>=qt._A&&t<=qt._F)return t-(qt._A-10);if(t>=qt._a&&t<=qt._f)return t-(qt._a-10)}function Zr(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=Dp(t.charCodeAt(o)),a=Dp(t.charCodeAt(o+1));if(s===void 0||a===void 0){let c=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}n[i]=s*16+a}return n}function Ft(t){return tf(jt(t))}function tt(t){if(!et(t))throw new Error("Uint8Array expected");return tf(jt(Uint8Array.from(t).reverse()))}function Ie(t,e){return Zr(t.toString(16).padStart(e*2,"0"))}function $t(t,e){return Ie(t,e).reverse()}function h1(t){return Zr(jp(t))}function ie(t,e,r){let n;if(typeof e=="string")try{n=Zr(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else if(et(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function Vt(...t){let e=0;for(let i=0;i<t.length;i++){let o=t[i];if(!et(o))throw new Error("Uint8Array expected");e+=o.length}let r=new Uint8Array(e),n=0;for(let i=0;i<t.length;i++){let o=t[i];r.set(o,n),n+=o.length}return r}function p1(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function y1(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function w1(t){let e;for(e=0;t>qp;t>>=rs,e+=1);return e}function m1(t,e){return t>>BigInt(e)&rs}var b1=(t,e,r)=>t|(r?rs:qp)<<BigInt(e),vi=t=>(l1<<BigInt(t-1))-rs,ef=t=>new Uint8Array(t),Mp=t=>Uint8Array.from(t);function rf(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=ef(t),i=ef(t),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...l)=>r(i,n,...l),c=(l=ef())=>{i=a(Mp([0]),l),n=a(),l.length!==0&&(i=a(Mp([1]),l),n=a())},f=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,p=[];for(;l<e;){n=a();let y=n.slice();p.push(y),l+=n.length}return Vt(...p)};return(l,p)=>{s(),c(l);let y;for(;!(y=p(f()));)c();return s(),y}}var g1={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||et(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Ve(t,e,r={}){let n=(i,o,s)=>{let a=g1[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let c=t[i];if(!(s&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(let[i,o]of Object.entries(e))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return t}var pe=BigInt(0),se=BigInt(1),Xr=BigInt(2),x1=BigInt(3),nf=BigInt(4),Fp=BigInt(5),$p=BigInt(8),E1=BigInt(9),_1=BigInt(16);function ee(t,e){let r=t%e;return r>=pe?r:e+r}function of(t,e,r){if(r<=pe||e<pe)throw new Error("Expected power/modulo > 0");if(r===se)return pe;let n=se;for(;e>pe;)e&se&&(n=n*t%r),t=t*t%r,e>>=se;return n}function oe(t,e,r){let n=t;for(;e-- >pe;)n*=n,n%=r;return n}function is(t,e){if(t===pe||e<=pe)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=ee(t,e),n=e,i=pe,o=se,s=se,a=pe;for(;r!==pe;){let f=n/r,u=n%r,l=i-s*f,p=o-a*f;n=r,r=u,i=s,o=a,s=l,a=p}if(n!==se)throw new Error("invert: does not exist");return ee(i,e)}function A1(t){let e=(t-se)/Xr,r,n,i;for(r=t-se,n=0;r%Xr===pe;r/=Xr,n++);for(i=Xr;i<t&&of(i,e,t)!==t-se;i++);if(n===1){let s=(t+se)/nf;return function(c,f){let u=c.pow(f,s);if(!c.eql(c.sqr(u),f))throw new Error("Cannot find square root");return u}}let o=(r+se)/Xr;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let f=n,u=a.pow(a.mul(a.ONE,i),r),l=a.pow(c,o),p=a.pow(c,r);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let y=1;for(let h=a.sqr(p);y<f&&!a.eql(h,a.ONE);y++)h=a.sqr(h);let d=a.pow(u,se<<BigInt(f-y-1));u=a.sqr(d),l=a.mul(l,d),p=a.mul(p,u),f=y}return l}}function S1(t){if(t%nf===x1){let e=(t+se)/nf;return function(n,i){let o=n.pow(i,e);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(t%$p===Fp){let e=(t-Fp)/$p;return function(n,i){let o=n.mul(i,Xr),s=n.pow(o,e),a=n.mul(i,s),c=n.mul(n.mul(a,Xr),s),f=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(f),i))throw new Error("Cannot find square root");return f}}return t%_1,A1(t)}var Vp=(t,e)=>(ee(t,e)&se)===se,v1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function sf(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=v1.reduce((n,i)=>(n[i]="function",n),e);return Ve(t,r)}function B1(t,e,r){if(r<pe)throw new Error("Expected power > 0");if(r===pe)return t.ONE;if(r===se)return e;let n=t.ONE,i=e;for(;r>pe;)r&se&&(n=t.mul(n,i)),i=t.sqr(i),r>>=se;return n}function T1(t,e){let r=new Array(e.length),n=e.reduce((o,s,a)=>t.is0(s)?o:(r[a]=o,t.mul(o,s)),t.ONE),i=t.inv(n);return e.reduceRight((o,s,a)=>t.is0(s)?o:(r[a]=t.mul(o,r[a]),t.mul(o,s)),i),r}function af(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Kn(t,e,r=!1,n={}){if(t<=pe)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:i,nByteLength:o}=af(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=S1(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:vi(i),ZERO:pe,ONE:se,create:c=>ee(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return pe<=c&&c<t},is0:c=>c===pe,isOdd:c=>(c&se)===se,neg:c=>ee(-c,t),eql:(c,f)=>c===f,sqr:c=>ee(c*c,t),add:(c,f)=>ee(c+f,t),sub:(c,f)=>ee(c-f,t),mul:(c,f)=>ee(c*f,t),pow:(c,f)=>B1(a,c,f),div:(c,f)=>ee(c*is(f,t),t),sqrN:c=>c*c,addN:(c,f)=>c+f,subN:(c,f)=>c-f,mulN:(c,f)=>c*f,inv:c=>is(c,t),sqrt:n.sqrt||(c=>s(a,c)),invertBatch:c=>T1(a,c),cmov:(c,f,u)=>u?f:c,toBytes:c=>r?$t(c,o):Ie(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return r?tt(c):Ft(c)}});return Object.freeze(a)}function Hp(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function Gp(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function cf(t){let e=Gp(t);return e+Math.ceil(e/2)}function Jp(t,e,r=!1){let n=t.length,i=Gp(e),o=cf(e);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?Ft(t):tt(t),a=ee(s,e-se)+se;return r?$t(a,i):Ie(a,i)}var P1=BigInt(0),ff=BigInt(1);function os(t,e){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(e/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=t.ZERO,a=i;for(;o>P1;)o&ff&&(s=s.add(a)),a=a.double(),o>>=ff;return s},precomputeWindow(i,o){let{windows:s,windowSize:a}=n(o),c=[],f=i,u=f;for(let l=0;l<s;l++){u=f,c.push(u);for(let p=1;p<a;p++)u=u.add(f),c.push(u);f=u.double()}return c},wNAF(i,o,s){let{windows:a,windowSize:c}=n(i),f=t.ZERO,u=t.BASE,l=BigInt(2**i-1),p=2**i,y=BigInt(i);for(let d=0;d<a;d++){let h=d*c,m=Number(s&l);s>>=y,m>c&&(m-=p,s+=ff);let g=h,x=h+Math.abs(m)-1,w=d%2!==0,B=m<0;m===0?u=u.add(r(w,o[g])):f=f.add(r(B,o[x]))}return{p:f,f:u}},wNAFCached(i,o,s,a){let c=i._WINDOW_SIZE||1,f=o.get(i);return f||(f=this.precomputeWindow(i,c),c!==1&&o.set(i,a(f))),this.wNAF(c,f,s)}}}function Bi(t){return sf(t.Fp),Ve(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...af(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function I1(t){let e=Bi(t);Ve(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:R1,hexToBytes:U1}=ns,Qr={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=Qr;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:R1(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=Qr,r=typeof t=="string"?U1(t):t;if(!et(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:i,l:o}=Qr._parseInt(r.subarray(2)),{d:s,l:a}=Qr._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){let e=f=>Number.parseInt(f[0],16)&8?"00"+f:f,r=f=>{let u=f.toString(16);return u.length&1?`0${u}`:u},n=e(r(t.s)),i=e(r(t.r)),o=n.length/2,s=i.length/2,a=r(o),c=r(s);return`30${r(s+o+4)}02${c}${i}02${a}${n}`}},Ht=BigInt(0),He=BigInt(1),HS=BigInt(2),Wp=BigInt(3),GS=BigInt(4);function C1(t){let e=I1(t),{Fp:r}=e,n=e.toBytes||((d,h,m)=>{let g=h.toAffine();return Vt(Uint8Array.from([4]),r.toBytes(g.x),r.toBytes(g.y))}),i=e.fromBytes||(d=>{let h=d.subarray(1),m=r.fromBytes(h.subarray(0,r.BYTES)),g=r.fromBytes(h.subarray(r.BYTES,2*r.BYTES));return{x:m,y:g}});function o(d){let{a:h,b:m}=e,g=r.sqr(d),x=r.mul(g,d);return r.add(r.add(x,r.mul(d,h)),m)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(d){return typeof d=="bigint"&&Ht<d&&d<e.n}function a(d){if(!s(d))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(d){let{allowedPrivateKeyLengths:h,nByteLength:m,wrapPrivateKey:g,n:x}=e;if(h&&typeof d!="bigint"){if(et(d)&&(d=jt(d)),typeof d!="string"||!h.includes(d.length))throw new Error("Invalid key");d=d.padStart(m*2,"0")}let w;try{w=typeof d=="bigint"?d:Ft(ie("private key",d,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof d}`)}return g&&(w=ee(w,x)),a(w),w}let f=new Map;function u(d){if(!(d instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(h,m,g){if(this.px=h,this.py=m,this.pz=g,h==null||!r.isValid(h))throw new Error("x required");if(m==null||!r.isValid(m))throw new Error("y required");if(g==null||!r.isValid(g))throw new Error("z required")}static fromAffine(h){let{x:m,y:g}=h||{};if(!h||!r.isValid(m)||!r.isValid(g))throw new Error("invalid affine point");if(h instanceof l)throw new Error("projective point not allowed");let x=w=>r.eql(w,r.ZERO);return x(m)&&x(g)?l.ZERO:new l(m,g,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(h){let m=r.invertBatch(h.map(g=>g.pz));return h.map((g,x)=>g.toAffine(m[x])).map(l.fromAffine)}static fromHex(h){let m=l.fromAffine(i(ie("pointHex",h)));return m.assertValidity(),m}static fromPrivateKey(h){return l.BASE.multiply(c(h))}_setWindowSize(h){this._WINDOW_SIZE=h,f.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:h,y:m}=this.toAffine();if(!r.isValid(h)||!r.isValid(m))throw new Error("bad point: x or y not FE");let g=r.sqr(m),x=o(h);if(!r.eql(g,x))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:h}=this.toAffine();if(r.isOdd)return!r.isOdd(h);throw new Error("Field doesn't support isOdd")}equals(h){u(h);let{px:m,py:g,pz:x}=this,{px:w,py:B,pz:_}=h,S=r.eql(r.mul(m,_),r.mul(w,x)),I=r.eql(r.mul(g,_),r.mul(B,x));return S&&I}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){let{a:h,b:m}=e,g=r.mul(m,Wp),{px:x,py:w,pz:B}=this,_=r.ZERO,S=r.ZERO,I=r.ZERO,T=r.mul(x,x),U=r.mul(w,w),O=r.mul(B,B),C=r.mul(x,w);return C=r.add(C,C),I=r.mul(x,B),I=r.add(I,I),_=r.mul(h,I),S=r.mul(g,O),S=r.add(_,S),_=r.sub(U,S),S=r.add(U,S),S=r.mul(_,S),_=r.mul(C,_),I=r.mul(g,I),O=r.mul(h,O),C=r.sub(T,O),C=r.mul(h,C),C=r.add(C,I),I=r.add(T,T),T=r.add(I,T),T=r.add(T,O),T=r.mul(T,C),S=r.add(S,T),O=r.mul(w,B),O=r.add(O,O),T=r.mul(O,C),_=r.sub(_,T),I=r.mul(O,U),I=r.add(I,I),I=r.add(I,I),new l(_,S,I)}add(h){u(h);let{px:m,py:g,pz:x}=this,{px:w,py:B,pz:_}=h,S=r.ZERO,I=r.ZERO,T=r.ZERO,U=e.a,O=r.mul(e.b,Wp),C=r.mul(m,w),M=r.mul(g,B),j=r.mul(x,_),z=r.add(m,g),A=r.add(w,B);z=r.mul(z,A),A=r.add(C,M),z=r.sub(z,A),A=r.add(m,x);let P=r.add(w,_);return A=r.mul(A,P),P=r.add(C,j),A=r.sub(A,P),P=r.add(g,x),S=r.add(B,_),P=r.mul(P,S),S=r.add(M,j),P=r.sub(P,S),T=r.mul(U,A),S=r.mul(O,j),T=r.add(S,T),S=r.sub(M,T),T=r.add(M,T),I=r.mul(S,T),M=r.add(C,C),M=r.add(M,C),j=r.mul(U,j),A=r.mul(O,A),M=r.add(M,j),j=r.sub(C,j),j=r.mul(U,j),A=r.add(A,j),C=r.mul(M,A),I=r.add(I,C),C=r.mul(P,A),S=r.mul(z,S),S=r.sub(S,C),C=r.mul(z,M),T=r.mul(P,T),T=r.add(T,C),new l(S,I,T)}subtract(h){return this.add(h.negate())}is0(){return this.equals(l.ZERO)}wNAF(h){return y.wNAFCached(this,f,h,m=>{let g=r.invertBatch(m.map(x=>x.pz));return m.map((x,w)=>x.toAffine(g[w])).map(l.fromAffine)})}multiplyUnsafe(h){let m=l.ZERO;if(h===Ht)return m;if(a(h),h===He)return this;let{endo:g}=e;if(!g)return y.unsafeLadder(this,h);let{k1neg:x,k1:w,k2neg:B,k2:_}=g.splitScalar(h),S=m,I=m,T=this;for(;w>Ht||_>Ht;)w&He&&(S=S.add(T)),_&He&&(I=I.add(T)),T=T.double(),w>>=He,_>>=He;return x&&(S=S.negate()),B&&(I=I.negate()),I=new l(r.mul(I.px,g.beta),I.py,I.pz),S.add(I)}multiply(h){a(h);let m=h,g,x,{endo:w}=e;if(w){let{k1neg:B,k1:_,k2neg:S,k2:I}=w.splitScalar(m),{p:T,f:U}=this.wNAF(_),{p:O,f:C}=this.wNAF(I);T=y.constTimeNegate(B,T),O=y.constTimeNegate(S,O),O=new l(r.mul(O.px,w.beta),O.py,O.pz),g=T.add(O),x=U.add(C)}else{let{p:B,f:_}=this.wNAF(m);g=B,x=_}return l.normalizeZ([g,x])[0]}multiplyAndAddUnsafe(h,m,g){let x=l.BASE,w=(_,S)=>S===Ht||S===He||!_.equals(x)?_.multiplyUnsafe(S):_.multiply(S),B=w(this,m).add(w(h,g));return B.is0()?void 0:B}toAffine(h){let{px:m,py:g,pz:x}=this,w=this.is0();h==null&&(h=w?r.ONE:r.inv(x));let B=r.mul(m,h),_=r.mul(g,h),S=r.mul(x,h);if(w)return{x:r.ZERO,y:r.ZERO};if(!r.eql(S,r.ONE))throw new Error("invZ was invalid");return{x:B,y:_}}isTorsionFree(){let{h,isTorsionFree:m}=e;if(h===He)return!0;if(m)return m(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h,clearCofactor:m}=e;return h===He?this:m?m(l,this):this.multiplyUnsafe(e.h)}toRawBytes(h=!0){return this.assertValidity(),n(l,this,h)}toHex(h=!0){return jt(this.toRawBytes(h))}}l.BASE=new l(e.Gx,e.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);let p=e.nBitLength,y=os(l,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function L1(t){let e=Bi(t);return Ve(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function zp(t){let e=L1(t),{Fp:r,n}=e,i=r.BYTES+1,o=2*r.BYTES+1;function s(A){return Ht<A&&A<r.ORDER}function a(A){return ee(A,n)}function c(A){return is(A,n)}let{ProjectivePoint:f,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:p}=C1({...e,toBytes(A,P,K){let v=P.toAffine(),b=r.toBytes(v.x),k=Vt;return K?k(Uint8Array.from([P.hasEvenY()?2:3]),b):k(Uint8Array.from([4]),b,r.toBytes(v.y))},fromBytes(A){let P=A.length,K=A[0],v=A.subarray(1);if(P===i&&(K===2||K===3)){let b=Ft(v);if(!s(b))throw new Error("Point is not on curve");let k=l(b),R=r.sqrt(k),L=(R&He)===He;return(K&1)===1!==L&&(R=r.neg(R)),{x:b,y:R}}else if(P===o&&K===4){let b=r.fromBytes(v.subarray(0,r.BYTES)),k=r.fromBytes(v.subarray(r.BYTES,2*r.BYTES));return{x:b,y:k}}else throw new Error(`Point of length ${P} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),y=A=>jt(Ie(A,e.nByteLength));function d(A){let P=n>>He;return A>P}function h(A){return d(A)?a(-A):A}let m=(A,P,K)=>Ft(A.slice(P,K));class g{constructor(P,K,v){this.r=P,this.s=K,this.recovery=v,this.assertValidity()}static fromCompact(P){let K=e.nByteLength;return P=ie("compactSignature",P,K*2),new g(m(P,0,K),m(P,K,2*K))}static fromDER(P){let{r:K,s:v}=Qr.toSig(ie("DER",P));return new g(K,v)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(P){return new g(this.r,this.s,P)}recoverPublicKey(P){let{r:K,s:v,recovery:b}=this,k=I(ie("msgHash",P));if(b==null||![0,1,2,3].includes(b))throw new Error("recovery id invalid");let R=b===2||b===3?K+e.n:K;if(R>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let L=b&1?"03":"02",F=f.fromHex(L+y(R)),$=c(R),Y=a(-k*$),V=a(v*$),H=f.BASE.multiplyAndAddUnsafe(F,Y,V);if(!H)throw new Error("point at infinify");return H.assertValidity(),H}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Zr(this.toDERHex())}toDERHex(){return Qr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Zr(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}let x={isValidPrivateKey(A){try{return u(A),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{let A=cf(e.n);return Jp(e.randomBytes(A),e.n)},precompute(A=8,P=f.BASE){return P._setWindowSize(A),P.multiply(BigInt(3)),P}};function w(A,P=!0){return f.fromPrivateKey(A).toRawBytes(P)}function B(A){let P=et(A),K=typeof A=="string",v=(P||K)&&A.length;return P?v===i||v===o:K?v===2*i||v===2*o:A instanceof f}function _(A,P,K=!0){if(B(A))throw new Error("first arg must be private key");if(!B(P))throw new Error("second arg must be public key");return f.fromHex(P).multiply(u(A)).toRawBytes(K)}let S=e.bits2int||function(A){let P=Ft(A),K=A.length*8-e.nBitLength;return K>0?P>>BigInt(K):P},I=e.bits2int_modN||function(A){return a(S(A))},T=vi(e.nBitLength);function U(A){if(typeof A!="bigint")throw new Error("bigint expected");if(!(Ht<=A&&A<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Ie(A,e.nByteLength)}function O(A,P,K=C){if(["recovered","canonical"].some(te=>te in K))throw new Error("sign() legacy options not supported");let{hash:v,randomBytes:b}=e,{lowS:k,prehash:R,extraEntropy:L}=K;k==null&&(k=!0),A=ie("msgHash",A),R&&(A=ie("prehashed msgHash",v(A)));let F=I(A),$=u(P),Y=[U($),U(F)];if(L!=null){let te=L===!0?b(r.BYTES):L;Y.push(ie("extraEntropy",te))}let V=Vt(...Y),H=F;function ne(te){let me=S(te);if(!p(me))return;let be=c(me),de=f.BASE.multiply(me).toAffine(),Ee=a(de.x);if(Ee===Ht)return;let At=a(be*a(H+Ee*$));if(At===Ht)return;let mr=(de.x===Ee?0:2)|Number(de.y&He),Dn=At;return k&&d(At)&&(Dn=h(At),mr^=1),new g(Ee,Dn,mr)}return{seed:V,k2sig:ne}}let C={lowS:e.lowS,prehash:!1},M={lowS:e.lowS,prehash:!1};function j(A,P,K=C){let{seed:v,k2sig:b}=O(A,P,K),k=e;return rf(k.hash.outputLen,k.nByteLength,k.hmac)(v,b)}f.BASE._setWindowSize(8);function z(A,P,K,v=M){let b=A;if(P=ie("msgHash",P),K=ie("publicKey",K),"strict"in v)throw new Error("options.strict was renamed to lowS");let{lowS:k,prehash:R}=v,L,F;try{if(typeof b=="string"||et(b))try{L=g.fromDER(b)}catch(de){if(!(de instanceof Qr.Err))throw de;L=g.fromCompact(b)}else if(typeof b=="object"&&typeof b.r=="bigint"&&typeof b.s=="bigint"){let{r:de,s:Ee}=b;L=new g(de,Ee)}else throw new Error("PARSE");F=f.fromHex(K)}catch(de){if(de.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(k&&L.hasHighS())return!1;R&&(P=e.hash(P));let{r:$,s:Y}=L,V=I(P),H=c(Y),ne=a(V*H),te=a($*H),me=f.BASE.multiplyAndAddUnsafe(F,ne,te)?.toAffine();return me?a(me.x)===$:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:_,sign:j,verify:z,ProjectivePoint:f,Signature:g,utils:x}}var ss=class extends Ln{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Op(e);let n=Ai(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return Cn(this),this.iHash.update(e),this}digestInto(e){Cn(this),Zc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},uf=(t,e,r)=>new ss(t,e).update(r).digest();uf.create=(t,e)=>new ss(t,e);function O1(t){return{hash:t,hmac:(e,...r)=>uf(t,e,Qo(...r)),randomBytes:Si}}function as(t,e){let r=n=>zp({...t,...O1(n)});return Object.freeze({...r(e),create:r})}var Xp=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Yp=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),K1=BigInt(1),lf=BigInt(2),Zp=(t,e)=>(t+e/lf)/e;function N1(t){let e=Xp,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),f=t*t*t%e,u=f*f*t%e,l=oe(u,r,e)*u%e,p=oe(l,r,e)*u%e,y=oe(p,lf,e)*f%e,d=oe(y,i,e)*y%e,h=oe(d,o,e)*d%e,m=oe(h,a,e)*h%e,g=oe(m,c,e)*m%e,x=oe(g,a,e)*h%e,w=oe(x,r,e)*u%e,B=oe(w,s,e)*d%e,_=oe(B,n,e)*f%e,S=oe(_,lf,e);if(!df.eql(df.sqr(S),t))throw new Error("Cannot find square root");return S}var df=Kn(Xp,void 0,void 0,{sqrt:N1}),Re=as({a:BigInt(0),b:BigInt(7),Fp:df,n:Yp,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=Yp,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-K1*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=Zp(o*t,e),c=Zp(-n*t,e),f=ee(t-a*r-c*i,e),u=ee(-a*n-c*o,e),l=f>s,p=u>s;if(l&&(f=e-f),p&&(u=e-u),f>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:f,k2neg:p,k2:u}}}},ts),iv=BigInt(0);var ov=Re.ProjectivePoint;function hf(t){let e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){let i=Object.keys(n).sort(),o={};for(let s of i)o[s]=e(n[s]);return o}return n},r=e(t);return JSON.stringify(r)}var cs="urn:jwk:";async function G({jwk:t}){let e=t.kty,r;if(e==="EC")r={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(e==="oct")r={k:t.k,kty:t.kty};else if(e==="OKP")r={crv:t.crv,kty:t.kty,x:t.x};else if(e==="RSA")r={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${e}`);Cs(r);let n=hf(r),i=q.string(n).toUint8Array(),o=await Yr.digest({data:i});return q.uint8Array(o).toBase64Url()}function rt(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function en(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function Gt(t){return!(!t||typeof t!="object"||!("kty"in t&&"k"in t)||t.kty!=="oct"||typeof t.k!="string")}function nt(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function tn(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function pf(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}function D1(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":return"x"in t&&!("d"in t);case"RSA":return"n"in t&&"e"in t&&!("d"in t);default:return!1}}var Jt=class t{static async adjustSignatureToLowS({signature:e}){let r=Re.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e}static async bytesToPrivateKey({privateKeyBytes:e}){let r=await t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",d:q.uint8Array(e).toBase64Url(),x:q.uint8Array(r.x).toBase64Url(),y:q.uint8Array(r.y).toBase64Url()};return n.kid=await G({jwk:n}),n}static async bytesToPublicKey({publicKeyBytes:e}){let r=await t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",x:q.uint8Array(r.x).toBase64Url(),y:q.uint8Array(r.y).toBase64Url()};return n.kid=await G({jwk:n}),n}static async compressPublicKey({publicKeyBytes:e}){return Re.ProjectivePoint.fromHex(e).toRawBytes(!0)}static async computePublicKey({key:e}){let r=await t.privateKeyToBytes({privateKey:e}),n=await t.getCurvePoint({keyBytes:r}),i={kty:"EC",crv:"secp256k1",x:q.uint8Array(n.x).toBase64Url(),y:q.uint8Array(n.y).toBase64Url()};return i.kid=await G({jwk:i}),i}static async convertDerToCompactSignature({derSignature:e}){return Re.Signature.fromDER(e).toCompactRawBytes()}static async decompressPublicKey({publicKeyBytes:e}){return Re.ProjectivePoint.fromHex(e).toRawBytes(!1)}static async generateKey(){let e=Re.utils.randomPrivateKey(),r=await t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=await G({jwk:r}),r}static async getPublicKey({key:e}){if(!(rt(e)&&e.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let{d:r,...n}=e;return n.kid??=await G({jwk:n}),n}static async privateKeyToBytes({privateKey:e}){if(!rt(e))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return q.base64Url(e.d).toUint8Array()}static async publicKeyToBytes({publicKey:e}){if(!(en(e)&&e.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");let r=new Uint8Array([4]),n=q.base64Url(e.x).toUint8Array(),i=q.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...i])}static async sharedSecret({privateKeyA:e,publicKeyB:r}){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=await t.privateKeyToBytes({privateKey:e}),i=await t.publicKeyToBytes({publicKey:r});return Re.getSharedSecret(n,i,!0).slice(1)}static async sign({data:e,key:r}){let n=await t.privateKeyToBytes({privateKey:r}),i=Et(e);return Re.sign(i,n).toCompactRawBytes()}static async validatePrivateKey({privateKeyBytes:e}){return Re.utils.isValidPrivateKey(e)}static async validatePublicKey({publicKeyBytes:e}){try{Re.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0}static async verify({key:e,signature:r,data:n}){let i=await t.publicKeyToBytes({publicKey:e}),o=Et(n);return Re.verify(r,o,i,{lowS:!1})}static async getCurvePoint({keyBytes:e}){e.byteLength===32&&(e=Re.getPublicKey(e));let r=Re.ProjectivePoint.fromHex(e),n=Ie(r.x,32),i=Ie(r.y,32);return{x:n,y:i}}};var Qp=Kn(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),M1=Qp.create(BigInt("-3")),q1=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),j1=as({a:M1,b:q1,Fp:Qp,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},ts),Ke=j1;var Wt=class t{static async adjustSignatureToLowS({signature:e}){let r=Ke.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e}static async bytesToPrivateKey({privateKeyBytes:e}){let r=await t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",d:q.uint8Array(e).toBase64Url(),x:q.uint8Array(r.x).toBase64Url(),y:q.uint8Array(r.y).toBase64Url()};return n.kid=await G({jwk:n}),n}static async bytesToPublicKey({publicKeyBytes:e}){let r=await t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",x:q.uint8Array(r.x).toBase64Url(),y:q.uint8Array(r.y).toBase64Url()};return n.kid=await G({jwk:n}),n}static async compressPublicKey({publicKeyBytes:e}){return Ke.ProjectivePoint.fromHex(e).toRawBytes(!0)}static async computePublicKey({key:e}){let r=await t.privateKeyToBytes({privateKey:e}),n=await t.getCurvePoint({keyBytes:r}),i={kty:"EC",crv:"P-256",x:q.uint8Array(n.x).toBase64Url(),y:q.uint8Array(n.y).toBase64Url()};return i.kid=await G({jwk:i}),i}static async convertDerToCompactSignature({derSignature:e}){return Ke.Signature.fromDER(e).toCompactRawBytes()}static async decompressPublicKey({publicKeyBytes:e}){return Ke.ProjectivePoint.fromHex(e).toRawBytes(!1)}static async generateKey(){let e=Ke.utils.randomPrivateKey(),r=await t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=await G({jwk:r}),r}static async getPublicKey({key:e}){if(!(rt(e)&&e.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let{d:r,...n}=e;return n.kid??=await G({jwk:n}),n}static async privateKeyToBytes({privateKey:e}){if(!rt(e))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return q.base64Url(e.d).toUint8Array()}static async publicKeyToBytes({publicKey:e}){if(!(en(e)&&e.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");let r=new Uint8Array([4]),n=q.base64Url(e.x).toUint8Array(),i=q.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...i])}static async sharedSecret({privateKeyA:e,publicKeyB:r}){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=await t.privateKeyToBytes({privateKey:e}),i=await t.publicKeyToBytes({publicKey:r});return Ke.getSharedSecret(n,i,!0).slice(1)}static async sign({data:e,key:r}){let n=await t.privateKeyToBytes({privateKey:r}),i=Et(e);return Ke.sign(i,n).toCompactRawBytes()}static async validatePrivateKey({privateKeyBytes:e}){return Ke.utils.isValidPrivateKey(e)}static async validatePublicKey({publicKeyBytes:e}){try{Ke.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0}static async verify({key:e,signature:r,data:n}){let i=await t.publicKeyToBytes({publicKey:e}),o=Et(n);return Ke.verify(r,o,i,{lowS:!1})}static async getCurvePoint({keyBytes:e}){e.byteLength===32&&(e=Ke.getPublicKey(e));let r=Ke.ProjectivePoint.fromHex(e),n=Ie(r.x,32),i=Ie(r.y,32);return{x:n,y:i}}};var Nn=class extends Oe{async computePublicKey({key:e}){if(!rt(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=await Jt.computePublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=await Wt.computePublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}}async generateKey({algorithm:e}){switch(e){case"ES256K":case"secp256k1":{let r=await Jt.generateKey();return r.alg="ES256K",r}case"ES256":case"secp256r1":{let r=await Wt.generateKey();return r.alg="ES256",r}}}async getPublicKey({key:e}){if(!rt(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=await Jt.getPublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=await Wt.getPublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}}async sign({key:e,data:r}){if(!rt(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":return await Jt.sign({key:e,data:r});case"P-256":return await Wt.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}}async verify({key:e,signature:r,data:n}){if(!en(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(e.crv){case"secp256k1":return await Jt.verify({key:e,signature:r,data:n});case"P-256":return await Wt.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}}};var fs=BigInt(4294967295),yf=BigInt(32);function ey(t,e=!1){return e?{h:Number(t&fs),l:Number(t>>yf&fs)}:{h:Number(t>>yf&fs)|0,l:Number(t&fs)|0}}function F1(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:o,l:s}=ey(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]}var $1=(t,e)=>BigInt(t>>>0)<<yf|BigInt(e>>>0),V1=(t,e,r)=>t>>>r,H1=(t,e,r)=>t<<32-r|e>>>r,G1=(t,e,r)=>t>>>r|e<<32-r,J1=(t,e,r)=>t<<32-r|e>>>r,W1=(t,e,r)=>t<<64-r|e>>>r-32,z1=(t,e,r)=>t>>>r-32|e<<64-r,Y1=(t,e)=>e,Z1=(t,e)=>t,X1=(t,e,r)=>t<<r|e>>>32-r,Q1=(t,e,r)=>e<<r|t>>>32-r,e2=(t,e,r)=>e<<r-32|t>>>64-r,t2=(t,e,r)=>t<<r-32|e>>>64-r;function r2(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}var n2=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),i2=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,o2=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),s2=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,a2=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),c2=(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0;var f2={fromBig:ey,split:F1,toBig:$1,shrSH:V1,shrSL:H1,rotrSH:G1,rotrSL:J1,rotrBH:W1,rotrBL:z1,rotr32H:Y1,rotr32L:Z1,rotlSH:X1,rotlSL:Q1,rotlBH:e2,rotlBL:t2,add:r2,add3L:n2,add3H:i2,add4L:o2,add4H:s2,add5H:c2,add5L:a2},J=f2;var[u2,l2]=J.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),pr=new Uint32Array(80),yr=new Uint32Array(80),wf=class extends On{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:f,El:u,Fh:l,Fl:p,Gh:y,Gl:d,Hh:h,Hl:m}=this;return[e,r,n,i,o,s,a,c,f,u,l,p,y,d,h,m]}set(e,r,n,i,o,s,a,c,f,u,l,p,y,d,h,m){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=f|0,this.El=u|0,this.Fh=l|0,this.Fl=p|0,this.Gh=y|0,this.Gl=d|0,this.Hh=h|0,this.Hl=m|0}process(e,r){for(let w=0;w<16;w++,r+=4)pr[w]=e.getUint32(r),yr[w]=e.getUint32(r+=4);for(let w=16;w<80;w++){let B=pr[w-15]|0,_=yr[w-15]|0,S=J.rotrSH(B,_,1)^J.rotrSH(B,_,8)^J.shrSH(B,_,7),I=J.rotrSL(B,_,1)^J.rotrSL(B,_,8)^J.shrSL(B,_,7),T=pr[w-2]|0,U=yr[w-2]|0,O=J.rotrSH(T,U,19)^J.rotrBH(T,U,61)^J.shrSH(T,U,6),C=J.rotrSL(T,U,19)^J.rotrBL(T,U,61)^J.shrSL(T,U,6),M=J.add4L(I,C,yr[w-7],yr[w-16]),j=J.add4H(M,S,O,pr[w-7],pr[w-16]);pr[w]=j|0,yr[w]=M|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:f,Dl:u,Eh:l,El:p,Fh:y,Fl:d,Gh:h,Gl:m,Hh:g,Hl:x}=this;for(let w=0;w<80;w++){let B=J.rotrSH(l,p,14)^J.rotrSH(l,p,18)^J.rotrBH(l,p,41),_=J.rotrSL(l,p,14)^J.rotrSL(l,p,18)^J.rotrBL(l,p,41),S=l&y^~l&h,I=p&d^~p&m,T=J.add5L(x,_,I,l2[w],yr[w]),U=J.add5H(T,g,B,S,u2[w],pr[w]),O=T|0,C=J.rotrSH(n,i,28)^J.rotrBH(n,i,34)^J.rotrBH(n,i,39),M=J.rotrSL(n,i,28)^J.rotrBL(n,i,34)^J.rotrBL(n,i,39),j=n&o^n&a^o&a,z=i&s^i&c^s&c;g=h|0,x=m|0,h=y|0,m=d|0,y=l|0,d=p|0,{h:l,l:p}=J.add(f|0,u|0,U|0,O|0),f=a|0,u=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let A=J.add3L(O,M,z);n=J.add3H(A,U,C,j),i=A|0}({h:n,l:i}=J.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=J.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=J.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:f,l:u}=J.add(this.Dh|0,this.Dl|0,f|0,u|0),{h:l,l:p}=J.add(this.Eh|0,this.El|0,l|0,p|0),{h:y,l:d}=J.add(this.Fh|0,this.Fl|0,y|0,d|0),{h,l:m}=J.add(this.Gh|0,this.Gl|0,h|0,m|0),{h:g,l:x}=J.add(this.Hh|0,this.Hl|0,g|0,x|0),this.set(n,i,o,s,a,c,f,u,l,p,y,d,h,m,g,x)}roundClean(){pr.fill(0),yr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var mf=es(()=>new wf);var it=BigInt(0),Ne=BigInt(1),us=BigInt(2),d2=BigInt(8),h2={zip215:!0};function p2(t){let e=Bi(t);return Ve(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function ls(t){let e=p2(t),{Fp:r,n,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:c}=e,f=us<<BigInt(a*8)-Ne,u=r.create,l=e.uvRatio||((v,b)=>{try{return{isValid:!0,value:r.sqrt(v*r.inv(b))}}catch{return{isValid:!1,value:it}}}),p=e.adjustScalarBytes||(v=>v),y=e.domain||((v,b,k)=>{if(b.length||k)throw new Error("Contexts/pre-hash are not supported");return v}),d=v=>typeof v=="bigint"&&it<v,h=(v,b)=>d(v)&&d(b)&&v<b,m=v=>v===it||h(v,f);function g(v,b){if(h(v,b))return v;throw new Error(`Expected valid scalar < ${b}, got ${typeof v} ${v}`)}function x(v){return v===it?v:g(v,n)}let w=new Map;function B(v){if(!(v instanceof _))throw new Error("ExtendedPoint expected")}class _{constructor(b,k,R,L){if(this.ex=b,this.ey=k,this.ez=R,this.et=L,!m(b))throw new Error("x required");if(!m(k))throw new Error("y required");if(!m(R))throw new Error("z required");if(!m(L))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(b){if(b instanceof _)throw new Error("extended point not allowed");let{x:k,y:R}=b||{};if(!m(k)||!m(R))throw new Error("invalid affine point");return new _(k,R,Ne,u(k*R))}static normalizeZ(b){let k=r.invertBatch(b.map(R=>R.ez));return b.map((R,L)=>R.toAffine(k[L])).map(_.fromAffine)}_setWindowSize(b){this._WINDOW_SIZE=b,w.delete(this)}assertValidity(){let{a:b,d:k}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:R,ey:L,ez:F,et:$}=this,Y=u(R*R),V=u(L*L),H=u(F*F),ne=u(H*H),te=u(Y*b),me=u(H*u(te+V)),be=u(ne+u(k*u(Y*V)));if(me!==be)throw new Error("bad point: equation left != right (1)");let de=u(R*L),Ee=u(F*$);if(de!==Ee)throw new Error("bad point: equation left != right (2)")}equals(b){B(b);let{ex:k,ey:R,ez:L}=this,{ex:F,ey:$,ez:Y}=b,V=u(k*Y),H=u(F*L),ne=u(R*Y),te=u($*L);return V===H&&ne===te}is0(){return this.equals(_.ZERO)}negate(){return new _(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){let{a:b}=e,{ex:k,ey:R,ez:L}=this,F=u(k*k),$=u(R*R),Y=u(us*u(L*L)),V=u(b*F),H=k+R,ne=u(u(H*H)-F-$),te=V+$,me=te-Y,be=V-$,de=u(ne*me),Ee=u(te*be),At=u(ne*be),mr=u(me*te);return new _(de,Ee,mr,At)}add(b){B(b);let{a:k,d:R}=e,{ex:L,ey:F,ez:$,et:Y}=this,{ex:V,ey:H,ez:ne,et:te}=b;if(k===BigInt(-1)){let jf=u((F-L)*(H+V)),Ff=u((F+L)*(H-V)),bs=u(Ff-jf);if(bs===it)return this.double();let $f=u($*us*te),Vf=u(Y*us*ne),Hf=Vf+$f,Gf=Ff+jf,Jf=Vf-$f,Iy=u(Hf*bs),Ry=u(Gf*Jf),Uy=u(Hf*Jf),Cy=u(bs*Gf);return new _(Iy,Ry,Cy,Uy)}let me=u(L*V),be=u(F*H),de=u(Y*R*te),Ee=u($*ne),At=u((L+F)*(V+H)-me-be),mr=Ee-de,Dn=Ee+de,qf=u(be-k*me),By=u(At*mr),Ty=u(Dn*qf),ky=u(At*qf),Py=u(mr*Dn);return new _(By,Ty,Py,ky)}subtract(b){return this.add(b.negate())}wNAF(b){return T.wNAFCached(this,w,b,_.normalizeZ)}multiply(b){let{p:k,f:R}=this.wNAF(g(b,n));return _.normalizeZ([k,R])[0]}multiplyUnsafe(b){let k=x(b);return k===it?I:this.equals(I)||k===Ne?this:this.equals(S)?this.wNAF(k).p:T.unsafeLadder(this,k)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return T.unsafeLadder(this,n).is0()}toAffine(b){let{ex:k,ey:R,ez:L}=this,F=this.is0();b==null&&(b=F?d2:r.inv(L));let $=u(k*b),Y=u(R*b),V=u(L*b);if(F)return{x:it,y:Ne};if(V!==Ne)throw new Error("invZ was invalid");return{x:$,y:Y}}clearCofactor(){let{h:b}=e;return b===Ne?this:this.multiplyUnsafe(b)}static fromHex(b,k=!1){let{d:R,a:L}=e,F=r.BYTES;b=ie("pointHex",b,F);let $=b.slice(),Y=b[F-1];$[F-1]=Y&-129;let V=tt($);V===it||(k?g(V,f):g(V,r.ORDER));let H=u(V*V),ne=u(H-Ne),te=u(R*H-L),{isValid:me,value:be}=l(ne,te);if(!me)throw new Error("Point.fromHex: invalid y coordinate");let de=(be&Ne)===Ne,Ee=(Y&128)!==0;if(!k&&be===it&&Ee)throw new Error("Point.fromHex: x=0 and x_0=1");return Ee!==de&&(be=u(-be)),_.fromAffine({x:be,y:V})}static fromPrivateKey(b){return C(b).point}toRawBytes(){let{x:b,y:k}=this.toAffine(),R=$t(k,r.BYTES);return R[R.length-1]|=b&Ne?128:0,R}toHex(){return jt(this.toRawBytes())}}_.BASE=new _(e.Gx,e.Gy,Ne,u(e.Gx*e.Gy)),_.ZERO=new _(it,Ne,Ne,it);let{BASE:S,ZERO:I}=_,T=os(_,a*8);function U(v){return ee(v,n)}function O(v){return U(tt(v))}function C(v){let b=a;v=ie("private key",v,b);let k=ie("hashed private key",o(v),2*b),R=p(k.slice(0,b)),L=k.slice(b,2*b),F=O(R),$=S.multiply(F),Y=$.toRawBytes();return{head:R,prefix:L,scalar:F,point:$,pointBytes:Y}}function M(v){return C(v).pointBytes}function j(v=new Uint8Array,...b){let k=Vt(...b);return O(o(y(k,ie("context",v),!!i)))}function z(v,b,k={}){v=ie("message",v),i&&(v=i(v));let{prefix:R,scalar:L,pointBytes:F}=C(b),$=j(k.context,R,v),Y=S.multiply($).toRawBytes(),V=j(k.context,Y,F,v),H=U($+V*L);x(H);let ne=Vt(Y,$t(H,r.BYTES));return ie("result",ne,a*2)}let A=h2;function P(v,b,k,R=A){let{context:L,zip215:F}=R,$=r.BYTES;v=ie("signature",v,2*$),b=ie("message",b),i&&(b=i(b));let Y=tt(v.slice($,2*$)),V,H,ne;try{V=_.fromHex(k,F),H=_.fromHex(v.slice(0,$),F),ne=S.multiplyUnsafe(Y)}catch{return!1}if(!F&&V.isSmallOrder())return!1;let te=j(L,H.toRawBytes(),V.toRawBytes(),b);return H.add(V.multiplyUnsafe(te)).subtract(ne).clearCofactor().equals(_.ZERO)}return S._setWindowSize(8),{CURVE:e,getPublicKey:M,sign:z,verify:P,ExtendedPoint:_,utils:{getExtendedPublicKey:C,randomPrivateKey:()=>s(r.BYTES),precompute(v=8,b=_.BASE){return b._setWindowSize(v),b.multiply(BigInt(3)),b}}}}var Ti=BigInt(0),bf=BigInt(1);function y2(t){return Ve(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function ty(t){let e=y2(t),{P:r}=e,n=w=>ee(w,r),i=e.montgomeryBits,o=Math.ceil(i/8),s=e.nByteLength,a=e.adjustScalarBytes||(w=>w),c=e.powPminus2||(w=>of(w,r-BigInt(2),r));function f(w,B,_){let S=n(w*(B-_));return B=n(B-S),_=n(_+S),[B,_]}function u(w){if(typeof w=="bigint"&&Ti<=w&&w<r)return w;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}let l=(e.a-BigInt(2))/BigInt(4);function p(w,B){let _=u(w),S=u(B),I=_,T=bf,U=Ti,O=_,C=bf,M=Ti,j;for(let A=BigInt(i-1);A>=Ti;A--){let P=S>>A&bf;M^=P,j=f(M,T,O),T=j[0],O=j[1],j=f(M,U,C),U=j[0],C=j[1],M=P;let K=T+U,v=n(K*K),b=T-U,k=n(b*b),R=v-k,L=O+C,F=O-C,$=n(F*K),Y=n(L*b),V=$+Y,H=$-Y;O=n(V*V),C=n(I*n(H*H)),T=n(v*k),U=n(R*(v+n(l*R)))}j=f(M,T,O),T=j[0],O=j[1],j=f(M,U,C),U=j[0],C=j[1];let z=c(U);return n(T*z)}function y(w){return $t(n(w),o)}function d(w){let B=ie("u coordinate",w,o);return s===32&&(B[31]&=127),tt(B)}function h(w){let B=ie("scalar",w),_=B.length;if(_!==o&&_!==s)throw new Error(`Expected ${o} or ${s} bytes, got ${_}`);return tt(a(B))}function m(w,B){let _=d(B),S=h(w),I=p(_,S);if(I===Ti)throw new Error("Invalid private or public key received");return y(I)}let g=y(e.Gu);function x(w){return m(w,g)}return{scalarMult:m,scalarMultBase:x,getSharedSecret:(w,B)=>m(w,B),getPublicKey:w=>x(w),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:g}}var ki=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ry=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Yv=BigInt(0),w2=BigInt(1),gf=BigInt(2),m2=BigInt(5),ny=BigInt(10),b2=BigInt(20),g2=BigInt(40),iy=BigInt(80);function oy(t){let e=ki,n=t*t%e*t%e,i=oe(n,gf,e)*n%e,o=oe(i,w2,e)*t%e,s=oe(o,m2,e)*o%e,a=oe(s,ny,e)*s%e,c=oe(a,b2,e)*a%e,f=oe(c,g2,e)*c%e,u=oe(f,iy,e)*f%e,l=oe(u,iy,e)*f%e,p=oe(l,ny,e)*s%e;return{pow_p_5_8:oe(p,gf,e)*t%e,b2:n}}function sy(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function x2(t,e){let r=ki,n=ee(e*e*e,r),i=ee(n*n*e,r),o=oy(t*i).pow_p_5_8,s=ee(t*n*o,r),a=ee(e*s*s,r),c=s,f=ee(s*ry,r),u=a===t,l=a===ee(-t,r),p=a===ee(-t*ry,r);return u&&(s=c),(l||p)&&(s=f),Vp(s,r)&&(s=ee(-s,r)),{isValid:u||l,value:s}}var Ge=Kn(ki,void 0,!0),Pi={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ge,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:mf,randomBytes:Si,adjustScalarBytes:sy,uvRatio:x2},wr=ls(Pi);function ay(t,e,r){if(e.length>255)throw new Error("Context is too big");return Qo(Xc("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}var Zv=ls({...Pi,domain:ay}),Xv=ls({...Pi,domain:ay,prehash:mf}),rn=ty({P:ki,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{let e=ki,{pow_p_5_8:r,b2:n}=oy(t);return ee(oe(r,BigInt(3),e)*n,e)},adjustScalarBytes:sy,randomBytes:Si});function cy(t){let{y:e}=wr.ExtendedPoint.fromHex(t),r=BigInt(1);return Ge.toBytes(Ge.create((r+e)*Ge.inv(r-e)))}function fy(t){let e=Pi.hash(t.subarray(0,32));return Pi.adjustScalarBytes(e).subarray(0,32)}var E2=(Ge.ORDER+BigInt(3))/BigInt(8),Qv=Ge.pow(gf,E2),e8=Ge.sqrt(Ge.neg(Ge.ONE)),t8=(Ge.ORDER-BigInt(5))/BigInt(8),r8=BigInt(486662);var n8=Hp(Ge,Ge.neg(BigInt(486664)));var i8=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),o8=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),s8=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),a8=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var c8=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var zt=class t{static async bytesToPrivateKey({privateKeyBytes:e}){let r=wr.getPublicKey(e),n={crv:"Ed25519",d:q.uint8Array(e).toBase64Url(),kty:"OKP",x:q.uint8Array(r).toBase64Url()};return n.kid=await G({jwk:n}),n}static async bytesToPublicKey({publicKeyBytes:e}){let r={kty:"OKP",crv:"Ed25519",x:q.uint8Array(e).toBase64Url()};return r.kid=await G({jwk:r}),r}static async computePublicKey({key:e}){let r=await t.privateKeyToBytes({privateKey:e}),n=wr.getPublicKey(r),i={kty:"OKP",crv:"Ed25519",x:q.uint8Array(n).toBase64Url()};return i.kid=await G({jwk:i}),i}static async convertPrivateKeyToX25519({privateKey:e}){let r=await t.privateKeyToBytes({privateKey:e}),n=fy(r),i=rn.getPublicKey(n),o={kty:"OKP",crv:"X25519",d:q.uint8Array(n).toBase64Url(),x:q.uint8Array(i).toBase64Url()};return o.kid=await G({jwk:o}),o}static async convertPublicKeyToX25519({publicKey:e}){let r=await t.publicKeyToBytes({publicKey:e});if(!await t.validatePublicKey({publicKeyBytes:r}))throw new Error("Ed25519: Invalid public key.");let i=cy(r),o={kty:"OKP",crv:"X25519",x:q.uint8Array(i).toBase64Url()};return o.kid=await G({jwk:o}),o}static async generateKey(){let e=wr.utils.randomPrivateKey(),r=await t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=await G({jwk:r}),r}static async getPublicKey({key:e}){if(!(nt(e)&&e.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let{d:r,...n}=e;return n.kid??=await G({jwk:n}),n}static async privateKeyToBytes({privateKey:e}){if(!nt(e))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return q.base64Url(e.d).toUint8Array()}static async publicKeyToBytes({publicKey:e}){if(!tn(e))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return q.base64Url(e.x).toUint8Array()}static async sign({key:e,data:r}){let n=await t.privateKeyToBytes({privateKey:e});return wr.sign(r,n)}static async validatePublicKey({publicKeyBytes:e}){try{wr.ExtendedPoint.fromHex(e).assertValidity()}catch{return!1}return!0}static async verify({key:e,signature:r,data:n}){let i=await t.publicKeyToBytes({publicKey:e});return wr.verify(r,n,i)}};var Ii=class extends Oe{async computePublicKey({key:e}){if(!nt(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=await zt.computePublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}}async generateKey({algorithm:e}){switch(e){case"Ed25519":{let r=await zt.generateKey();return r.alg="EdDSA",r}}}async getPublicKey({key:e}){if(!nt(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=await zt.getPublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}}async sign({key:e,data:r}){if(!nt(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":return await zt.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}}async verify({key:e,signature:r,data:n}){if(!tn(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(e.crv){case"Ed25519":return await zt.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}}};var xf={Ed25519:{implementation:Ii,names:["Ed25519"]},secp256k1:{implementation:Nn,names:["ES256K","secp256k1"]},secp256r1:{implementation:Nn,names:["ES256","secp256r1"]},"SHA-256":{implementation:_i,names:["SHA-256"]}},Ef=class{constructor(e){this._algorithmInstances=new Map;this._keyStore=e?.keyStore??new yo}async digest({algorithm:e,data:r}){return await this.getAlgorithm({algorithm:e}).digest({algorithm:e,data:r})}async exportKey({keyUri:e}){return await this.getPrivateKey({keyUri:e})}async generateKey({algorithm:e}){let n=await this.getAlgorithm({algorithm:e}).generateKey({algorithm:e});if(n?.kid===void 0)throw new Error("Generated key is missing a required property: kid");let i=`${cs}${n.kid}`;return await this._keyStore.set(i,n),i}async getKeyUri({key:e}){let r=await G({jwk:e});return`${cs}${r}`}async getPublicKey({keyUri:e}){let r=await this.getPrivateKey({keyUri:e}),n=this.getAlgorithmName({key:r});return await this.getAlgorithm({algorithm:n}).getPublicKey({key:r})}async importKey({key:e}){if(!pf(e))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");let r=structuredClone(e);r.kid??=await G({jwk:r});let n=await this.getKeyUri({key:r});return await this._keyStore.set(n,r),n}async sign({keyUri:e,data:r}){let n=await this.getPrivateKey({keyUri:e}),i=this.getAlgorithmName({key:n});return this.getAlgorithm({algorithm:i}).sign({data:r,key:n})}async verify({key:e,signature:r,data:n}){let i=this.getAlgorithmName({key:e});return this.getAlgorithm({algorithm:i}).verify({key:e,signature:r,data:n})}getAlgorithm({algorithm:e}){let r=xf[e]?.implementation;if(!r)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(r)||this._algorithmInstances.set(r,new r),this._algorithmInstances.get(r)}getAlgorithmName({key:e}){let r=e.alg,n=e.crv;for(let i in xf){let o=xf[i];if(r&&o.names.includes(r))return i;if(n&&o.names.includes(n))return i}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}async getPrivateKey({keyUri:e}){let r=await this._keyStore.get(e);if(!r)throw new Error(`Key not found: ${e}`);return r}};function _2(t){let e={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(t.alg&&Object.values(e).includes(t.alg))return t.alg;if(t.crv&&Object.keys(e).includes(t.crv))return e[t.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${t.alg}, crv=${t.crv}. Supported 'alg' values: ${Object.values(e).join(", ")}. Supported 'crv' values: ${Object.keys(e).join(", ")}.`)}function _f(t){return Rp(t)}function A2(){return Mt.randomUUID()}function S2({length:t}){if(3>t||t>10)throw new Error("randomPin() can securely generate a PIN between 3 to 10 digits.");let e=Math.pow(10,t)-1,r;if(t<=6){let n=Math.pow(10,t);do{let i=_f(Math.ceil(t/2));r=new DataView(i.buffer).getUint16(0,!1)%n}while(r>e)}else{let n=Math.pow(10,10);do{let i=_f(4);r=new DataView(i.buffer).getUint32(0,!1)%n}while(r>e)}return r.toString().padStart(t,"0")}var v2={randomPin:S2,randomUuid:A2,randomBytes:_f,getJoseSignatureAlgorithmFromPublicKey:_2};var ds=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Be(){if(ds&&typeof ds.subtle=="object"&&ds.subtle!=null)return ds.subtle;throw new Error("crypto.subtle must be defined")}var Ri=128,uy=[128,192,256],hs=Ri,nn=class{static async bytesToPrivateKey({privateKeyBytes:e}){let r={k:q.uint8Array(e).toBase64Url(),kty:"oct"};return r.kid=await G({jwk:r}),r}static async decrypt({key:e,data:r,counter:n,length:i}){if(n.byteLength!==Ri/8)throw new TypeError(`The counter must be ${Ri} bits in length`);if(i===0||i>hs)throw new TypeError(`The 'length' property must be in the range 1 to ${hs}`);let o=Be(),s=await o.importKey("jwk",e,{name:"AES-CTR"},!0,["decrypt"]),a=await o.decrypt({name:"AES-CTR",counter:n,length:i},s,r);return new Uint8Array(a)}static async encrypt({key:e,data:r,counter:n,length:i}){if(n.byteLength!==Ri/8)throw new TypeError(`The counter must be ${Ri} bits in length`);if(i===0||i>hs)throw new TypeError(`The 'length' property must be in the range 1 to ${hs}`);let o=Be(),s=await o.importKey("jwk",e,{name:"AES-CTR"},!0,["encrypt","decrypt"]),a=await o.encrypt({name:"AES-CTR",counter:n,length:i},s,r);return new Uint8Array(a)}static async generateKey({length:e}){if(!uy.includes(e))throw new RangeError(`The key length is invalid: Must be ${uy.join(", ")} bits`);let r=Be(),n=await r.generateKey({name:"AES-CTR",length:e},!0,["encrypt"]),{ext:i,key_ops:o,...s}=await r.exportKey("jwk",n);return s.kid=await G({jwk:s}),s}static async privateKeyToBytes({privateKey:e}){if(!Gt(e))throw new Error("AesCtr: The provided key is not a valid oct private key.");return q.base64Url(e.k).toUint8Array()}};var Af=class extends Oe{async decrypt(e){return nn.decrypt(e)}async encrypt(e){return nn.encrypt(e)}async generateKey({algorithm:e}){let r={A128CTR:128,A192CTR:192,A256CTR:256}[e],n=await nn.generateKey({length:r});return n.alg=e,n}};function Ui(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function Sf(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function vf(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function ye(t,...e){if(!vf(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function Bf(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ly(t,e){ye(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Yt=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),dy=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),B2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!B2)throw new Error("Non little-endian hardware is not supported");function T2(t){if(typeof t!="string")throw new Error(`string expected, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function ps(t){if(typeof t=="string")t=T2(t);else if(vf(t))t=t.slice();else throw new Error(`Uint8Array expected, got ${typeof t}`);return t}function hy(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function py(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}var Tf=(t,e)=>(Object.assign(e,t),e);function kf(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,f=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+f,a,n)}var yy={async encrypt(t,e,r,n){let i=Be(),o=await i.importKey("raw",t,e,!0,["encrypt"]),s=await i.encrypt(r,o,n);return new Uint8Array(s)},async decrypt(t,e,r,n){let i=Be(),o=await i.importKey("raw",t,e,!0,["decrypt"]),s=await i.decrypt(r,o,n);return new Uint8Array(s)}},_t={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function k2(t,e,r){if(t===_t.CBC)return{name:_t.CBC,iv:e};if(t===_t.CTR)return{name:_t.CTR,counter:e,length:64};if(t===_t.GCM)return r?{name:_t.GCM,iv:e,additionalData:r}:{name:_t.GCM,iv:e};throw new Error("unknown aes block mode")}function Pf(t){return(e,r,n)=>{ye(e),ye(r);let i={name:t,length:e.length*8},o=k2(t,r,n);return{encrypt(s){return ye(s),yy.encrypt(e,i,o,s)},decrypt(s){return ye(s),yy.decrypt(e,i,o,s)}}}}var F8=Pf(_t.CBC),$8=Pf(_t.CTR),V8=Pf(_t.GCM);var ys=96,wy=[128,192,256],Ci=[96,104,112,120,128],on=class{static async bytesToPrivateKey({privateKeyBytes:e}){let r={k:q.uint8Array(e).toBase64Url(),kty:"oct"};return r.kid=await G({jwk:r}),r}static async decrypt({key:e,data:r,iv:n,additionalData:i,tagLength:o}){if(n.byteLength!==ys/8)throw new TypeError(`The initialization vector must be ${ys} bits in length`);if(o&&!Ci.includes(o))throw new RangeError(`The tag length is invalid: Must be ${Ci.join(", ")} bits`);let s=Be(),a=await s.importKey("jwk",e,{name:"AES-GCM"},!0,["decrypt"]),c={name:"AES-GCM",iv:n,...o&&{tagLength:o},...i&&{additionalData:i}},f=await s.decrypt(c,a,r);return new Uint8Array(f)}static async encrypt({data:e,iv:r,key:n,additionalData:i,tagLength:o}){if(r.byteLength!==ys/8)throw new TypeError(`The initialization vector must be ${ys} bits in length`);if(o&&!Ci.includes(o))throw new RangeError(`The tag length is invalid: Must be ${Ci.join(", ")} bits`);let s=Be(),a=await s.importKey("jwk",n,{name:"AES-GCM"},!0,["encrypt"]),c={name:"AES-GCM",iv:r,...o&&{tagLength:o},...i&&{additionalData:i}},f=await s.encrypt(c,a,e);return new Uint8Array(f)}static async generateKey({length:e}){if(!wy.includes(e))throw new RangeError(`The key length is invalid: Must be ${wy.join(", ")} bits`);let r=Be(),n=await r.generateKey({name:"AES-GCM",length:e},!0,["encrypt"]),{ext:i,key_ops:o,...s}=await r.exportKey("jwk",n);return s.kid=await G({jwk:s}),s}static async privateKeyToBytes({privateKey:e}){if(!Gt(e))throw new Error("AesGcm: The provided key is not a valid oct private key.");return q.base64Url(e.k).toUint8Array()}};var If=class extends Oe{async decrypt(e){return on.decrypt(e)}async encrypt(e){return on.encrypt(e)}async generateKey({algorithm:e}){let r={A128GCM:128,A192GCM:192,A256GCM:256}[e],n=await on.generateKey({length:r});return n.alg=e,n}};var Rf=class t{static async deriveKey({keyDataLen:e,fixedInfo:r,sharedSecret:n}){let o=Math.ceil(e/256);if(o!==1)throw new Error(`Concat KDF with ${o} rounds not supported.`);let s=new Uint8Array(4);new DataView(s.buffer).setUint32(0,o);let a=t.computeFixedInfo(r);return Et(zc(s,n,a)).slice(0,e/8)}static computeFixedInfo(e){let r=t.toDataLenData({data:e.algorithmId}),n=t.toDataLenData({data:e.partyUInfo}),i=t.toDataLenData({data:e.partyVInfo}),o=t.toDataLenData({data:e.suppPubInfo,variableLength:!1}),s=t.toDataLenData({data:e.suppPrivInfo});return zc(r,n,i,o,s)}static toDataLenData({data:e,variableLength:r=!0}){let n,i=qn(e);if(i==="Undefined")return new Uint8Array(0);if(r){let o=i==="Uint8Array"?e:new q(e,i).toUint8Array(),s=o.length;n=new Uint8Array(4+s),new DataView(n.buffer).setUint32(0,s),n.set(o,4)}else{if(typeof e!="number")throw TypeError("Fixed length input must be a number.");n=new Uint8Array(4),new DataView(n.buffer).setUint32(0,e)}return n}};var Uf=class{static async deriveKey({hash:e,password:r,salt:n,iterations:i,length:o}){let s=await Mt.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveBits"]),a=await Mt.subtle.deriveBits({name:"PBKDF2",hash:e,salt:n,iterations:i},s,o);return new Uint8Array(a)}};var Cf=class t{static async bytesToPrivateKey({privateKeyBytes:e}){let r=rn.getPublicKey(e),n={kty:"OKP",crv:"X25519",d:q.uint8Array(e).toBase64Url(),x:q.uint8Array(r).toBase64Url()};return n.kid=await G({jwk:n}),n}static async bytesToPublicKey({publicKeyBytes:e}){let r={kty:"OKP",crv:"X25519",x:q.uint8Array(e).toBase64Url()};return r.kid=await G({jwk:r}),r}static async computePublicKey({key:e}){let r=await t.privateKeyToBytes({privateKey:e}),n=rn.getPublicKey(r),i={kty:"OKP",crv:"X25519",x:q.uint8Array(n).toBase64Url()};return i.kid=await G({jwk:i}),i}static async generateKey(){let e=rn.utils.randomPrivateKey(),r=await t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=await G({jwk:r}),r}static async getPublicKey({key:e}){if(!(nt(e)&&e.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let{d:r,...n}=e;return n.kid??=await G({jwk:n}),n}static async privateKeyToBytes({privateKey:e}){if(!nt(e))throw new Error("X25519: The provided key is not a valid OKP private key.");return q.base64Url(e.d).toUint8Array()}static async publicKeyToBytes({publicKey:e}){if(!tn(e))throw new Error("X25519: The provided key is not a valid OKP public key.");return q.base64Url(e.x).toUint8Array()}static async sharedSecret({privateKeyA:e,publicKeyB:r}){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=await t.privateKeyToBytes({privateKey:e}),i=await t.publicKeyToBytes({publicKey:r});return rn.getSharedSecret(n,i)}};var xe=(t,e)=>t[e++]&255|(t[e++]&255)<<8,Lf=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=ps(e),ye(e,32);let r=xe(e,0),n=xe(e,2),i=xe(e,4),o=xe(e,6),s=xe(e,8),a=xe(e,10),c=xe(e,12),f=xe(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|o<<9)&8191,this.r[4]=(o>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let u=0;u<8;u++)this.pad[u]=xe(e,16+2*u)}process(e,r,n=!1){let i=n?0:2048,{h:o,r:s}=this,a=s[0],c=s[1],f=s[2],u=s[3],l=s[4],p=s[5],y=s[6],d=s[7],h=s[8],m=s[9],g=xe(e,r+0),x=xe(e,r+2),w=xe(e,r+4),B=xe(e,r+6),_=xe(e,r+8),S=xe(e,r+10),I=xe(e,r+12),T=xe(e,r+14),U=o[0]+(g&8191),O=o[1]+((g>>>13|x<<3)&8191),C=o[2]+((x>>>10|w<<6)&8191),M=o[3]+((w>>>7|B<<9)&8191),j=o[4]+((B>>>4|_<<12)&8191),z=o[5]+(_>>>1&8191),A=o[6]+((_>>>14|S<<2)&8191),P=o[7]+((S>>>11|I<<5)&8191),K=o[8]+((I>>>8|T<<8)&8191),v=o[9]+(T>>>5|i),b=0,k=b+U*a+O*(5*m)+C*(5*h)+M*(5*d)+j*(5*y);b=k>>>13,k&=8191,k+=z*(5*p)+A*(5*l)+P*(5*u)+K*(5*f)+v*(5*c),b+=k>>>13,k&=8191;let R=b+U*c+O*a+C*(5*m)+M*(5*h)+j*(5*d);b=R>>>13,R&=8191,R+=z*(5*y)+A*(5*p)+P*(5*l)+K*(5*u)+v*(5*f),b+=R>>>13,R&=8191;let L=b+U*f+O*c+C*a+M*(5*m)+j*(5*h);b=L>>>13,L&=8191,L+=z*(5*d)+A*(5*y)+P*(5*p)+K*(5*l)+v*(5*u),b+=L>>>13,L&=8191;let F=b+U*u+O*f+C*c+M*a+j*(5*m);b=F>>>13,F&=8191,F+=z*(5*h)+A*(5*d)+P*(5*y)+K*(5*p)+v*(5*l),b+=F>>>13,F&=8191;let $=b+U*l+O*u+C*f+M*c+j*a;b=$>>>13,$&=8191,$+=z*(5*m)+A*(5*h)+P*(5*d)+K*(5*y)+v*(5*p),b+=$>>>13,$&=8191;let Y=b+U*p+O*l+C*u+M*f+j*c;b=Y>>>13,Y&=8191,Y+=z*a+A*(5*m)+P*(5*h)+K*(5*d)+v*(5*y),b+=Y>>>13,Y&=8191;let V=b+U*y+O*p+C*l+M*u+j*f;b=V>>>13,V&=8191,V+=z*c+A*a+P*(5*m)+K*(5*h)+v*(5*d),b+=V>>>13,V&=8191;let H=b+U*d+O*y+C*p+M*l+j*u;b=H>>>13,H&=8191,H+=z*f+A*c+P*a+K*(5*m)+v*(5*h),b+=H>>>13,H&=8191;let ne=b+U*h+O*d+C*y+M*p+j*l;b=ne>>>13,ne&=8191,ne+=z*u+A*f+P*c+K*a+v*(5*m),b+=ne>>>13,ne&=8191;let te=b+U*m+O*h+C*d+M*y+j*p;b=te>>>13,te&=8191,te+=z*l+A*u+P*f+K*c+v*a,b+=te>>>13,te&=8191,b=(b<<2)+b|0,b=b+k|0,k=b&8191,b=b>>>13,R+=b,o[0]=k,o[1]=R,o[2]=L,o[3]=F,o[4]=$,o[5]=Y,o[6]=V,o[7]=H,o[8]=ne,o[9]=te}finalize(){let{h:e,pad:r}=this,n=new Uint16Array(10),i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let o=(i^1)-1;for(let a=0;a<10;a++)n[a]&=o;o=~o;for(let a=0;a<10;a++)e[a]=e[a]&o|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+r[0];e[0]=s&65535;for(let a=1;a<8;a++)s=(e[a]+r[a]|0)+(s>>>16)|0,e[a]=s&65535}update(e){Bf(this);let{buffer:r,blockLen:n}=this;e=ps(e);let i=e.length;for(let o=0;o<i;){let s=Math.min(n-this.pos,i-o);if(s===n){for(;n<=i-o;o+=n)this.process(e,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){Bf(this),ly(e,this),this.finished=!0;let{buffer:r,h:n}=this,{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let o=0;for(let s=0;s<8;s++)e[o++]=n[s]>>>0,e[o++]=n[s]>>>8;return e}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}};function P2(t){let e=(n,i)=>t(i).update(ps(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}var my=P2(t=>new Lf(t));var gy=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),I2=gy("expand 16-byte k"),R2=gy("expand 32-byte k"),U2=Yt(I2),xy=Yt(R2),wB=xy.slice();function N(t,e){return t<<e|t>>>32-e}function Of(t){return t.byteOffset%4===0}var ws=64,C2=16,Ey=2**32-1,by=new Uint32Array;function L2(t,e,r,n,i,o,s,a){let c=i.length,f=new Uint8Array(ws),u=Yt(f),l=Of(i)&&Of(o),p=l?Yt(i):by,y=l?Yt(o):by;for(let d=0;d<c;s++){if(t(e,r,n,u,s,a),s>=Ey)throw new Error("arx: counter overflow");let h=Math.min(ws,c-d);if(l&&h===ws){let m=d/4;if(d%4!==0)throw new Error("arx: invalid block position");for(let g=0,x;g<C2;g++)x=m+g,y[x]=p[x]^u[g];d+=ws;continue}for(let m=0,g;m<h;m++)g=d+m,o[g]=i[g]^f[m];d+=h}}function Kf(t,e){let{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:o,rounds:s}=hy({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Ui(i),Ui(s),Sf(o),Sf(r),(a,c,f,u,l=0)=>{ye(a),ye(c),ye(f);let p=f.length;if(u||(u=new Uint8Array(p)),ye(u),Ui(l),l<0||l>=Ey)throw new Error("arx: counter overflow");if(u.length<p)throw new Error(`arx: output (${u.length}) is shorter than data (${p})`);let y=[],d=a.length,h,m;if(d===32)h=a.slice(),y.push(h),m=xy;else if(d===16&&r)h=new Uint8Array(32),h.set(a),h.set(a,16),m=U2,y.push(h);else throw new Error(`arx: invalid 32-byte key, got length=${d}`);Of(c)||(c=c.slice(),y.push(c));let g=Yt(h);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(m,g,Yt(c.subarray(0,16)),g),c=c.subarray(16)}let x=16-i;if(x!==c.length)throw new Error(`arx: nonce must be ${x} or 16 bytes`);if(x!==12){let B=new Uint8Array(12);B.set(c,o?0:12-c.length),c=B,y.push(c)}let w=Yt(c);for(L2(t,m,g,w,f,u,l,s);y.length>0;)y.pop().fill(0);return u}}function Sy(t,e,r,n,i,o=20){let s=t[0],a=t[1],c=t[2],f=t[3],u=e[0],l=e[1],p=e[2],y=e[3],d=e[4],h=e[5],m=e[6],g=e[7],x=i,w=r[0],B=r[1],_=r[2],S=s,I=a,T=c,U=f,O=u,C=l,M=p,j=y,z=d,A=h,P=m,K=g,v=x,b=w,k=B,R=_;for(let F=0;F<o;F+=2)S=S+O|0,v=N(v^S,16),z=z+v|0,O=N(O^z,12),S=S+O|0,v=N(v^S,8),z=z+v|0,O=N(O^z,7),I=I+C|0,b=N(b^I,16),A=A+b|0,C=N(C^A,12),I=I+C|0,b=N(b^I,8),A=A+b|0,C=N(C^A,7),T=T+M|0,k=N(k^T,16),P=P+k|0,M=N(M^P,12),T=T+M|0,k=N(k^T,8),P=P+k|0,M=N(M^P,7),U=U+j|0,R=N(R^U,16),K=K+R|0,j=N(j^K,12),U=U+j|0,R=N(R^U,8),K=K+R|0,j=N(j^K,7),S=S+C|0,R=N(R^S,16),P=P+R|0,C=N(C^P,12),S=S+C|0,R=N(R^S,8),P=P+R|0,C=N(C^P,7),I=I+M|0,v=N(v^I,16),K=K+v|0,M=N(M^K,12),I=I+M|0,v=N(v^I,8),K=K+v|0,M=N(M^K,7),T=T+j|0,b=N(b^T,16),z=z+b|0,j=N(j^z,12),T=T+j|0,b=N(b^T,8),z=z+b|0,j=N(j^z,7),U=U+O|0,k=N(k^U,16),A=A+k|0,O=N(O^A,12),U=U+O|0,k=N(k^U,8),A=A+k|0,O=N(O^A,7);let L=0;n[L++]=s+S|0,n[L++]=a+I|0,n[L++]=c+T|0,n[L++]=f+U|0,n[L++]=u+O|0,n[L++]=l+C|0,n[L++]=p+M|0,n[L++]=y+j|0,n[L++]=d+z|0,n[L++]=h+A|0,n[L++]=m+P|0,n[L++]=g+K|0,n[L++]=x+v|0,n[L++]=w+b|0,n[L++]=B+k|0,n[L++]=_+R|0}function O2(t,e,r,n){let i=t[0],o=t[1],s=t[2],a=t[3],c=e[0],f=e[1],u=e[2],l=e[3],p=e[4],y=e[5],d=e[6],h=e[7],m=r[0],g=r[1],x=r[2],w=r[3];for(let _=0;_<20;_+=2)i=i+c|0,m=N(m^i,16),p=p+m|0,c=N(c^p,12),i=i+c|0,m=N(m^i,8),p=p+m|0,c=N(c^p,7),o=o+f|0,g=N(g^o,16),y=y+g|0,f=N(f^y,12),o=o+f|0,g=N(g^o,8),y=y+g|0,f=N(f^y,7),s=s+u|0,x=N(x^s,16),d=d+x|0,u=N(u^d,12),s=s+u|0,x=N(x^s,8),d=d+x|0,u=N(u^d,7),a=a+l|0,w=N(w^a,16),h=h+w|0,l=N(l^h,12),a=a+l|0,w=N(w^a,8),h=h+w|0,l=N(l^h,7),i=i+f|0,w=N(w^i,16),d=d+w|0,f=N(f^d,12),i=i+f|0,w=N(w^i,8),d=d+w|0,f=N(f^d,7),o=o+u|0,m=N(m^o,16),h=h+m|0,u=N(u^h,12),o=o+u|0,m=N(m^o,8),h=h+m|0,u=N(u^h,7),s=s+l|0,g=N(g^s,16),p=p+g|0,l=N(l^p,12),s=s+l|0,g=N(g^s,8),p=p+g|0,l=N(l^p,7),a=a+c|0,x=N(x^a,16),y=y+x|0,c=N(c^y,12),a=a+c|0,x=N(x^a,8),y=y+x|0,c=N(c^y,7);let B=0;n[B++]=i,n[B++]=o,n[B++]=s,n[B++]=a,n[B++]=m,n[B++]=g,n[B++]=x,n[B++]=w}var K2=Kf(Sy,{counterRight:!1,counterLength:4,allowShortKeys:!1}),ms=Kf(Sy,{counterRight:!1,counterLength:8,extendNonceFn:O2,allowShortKeys:!1});var N2=new Uint8Array(16),_y=(t,e)=>{t.update(e);let r=e.length%16;r&&t.update(N2.subarray(r))},D2=new Uint8Array(32);function Ay(t,e,r,n,i){let o=t(e,r,D2),s=my.create(o);i&&_y(s,i),_y(s,n);let a=new Uint8Array(16),c=dy(a);kf(c,0,BigInt(i?i.length:0),!0),kf(c,8,BigInt(n.length),!0),s.update(a);let f=s.digest();return o.fill(0),f}var vy=t=>(e,r,n)=>(ye(e,32),ye(r),{encrypt:(o,s)=>{let a=o.length,c=a+16;s?ye(s,c):s=new Uint8Array(c),t(e,r,o,s,1);let f=Ay(t,e,r,s.subarray(0,-16),n);return s.set(f,a),s},decrypt:(o,s)=>{let a=o.length,c=a-16;if(a<16)throw new Error("encrypted data must be at least 16 bytes");s?ye(s,c):s=new Uint8Array(c);let f=o.subarray(0,-16),u=o.subarray(-16),l=Ay(t,e,r,f,n);if(!py(u,l))throw new Error("invalid tag");return t(e,r,f,s,1),s}}),_B=Tf({blockSize:64,nonceLength:12,tagLength:16},vy(K2)),Nf=Tf({blockSize:64,nonceLength:24,tagLength:16},vy(ms));var Df=class t{static async bytesToPrivateKey({privateKeyBytes:e}){let r={k:q.uint8Array(e).toBase64Url(),kty:"oct"};return r.kid=await G({jwk:r}),r}static async decrypt({data:e,key:r,nonce:n}){let i=await t.privateKeyToBytes({privateKey:r});return ms(i,n,e)}static async encrypt({data:e,key:r,nonce:n}){let i=await t.privateKeyToBytes({privateKey:r});return ms(i,n,e)}static async generateKey(){let e=Be(),r=await e.generateKey({name:"AES-CTR",length:256},!0,["encrypt"]),{alg:n,ext:i,key_ops:o,...s}=await e.exportKey("jwk",r);return s.kid=await G({jwk:s}),s}static async privateKeyToBytes({privateKey:e}){if(!Gt(e))throw new Error("XChaCha20: The provided key is not a valid oct private key.");return q.base64Url(e.k).toUint8Array()}};var M2=16,Mf=class t{static async bytesToPrivateKey({privateKeyBytes:e}){let r={k:q.uint8Array(e).toBase64Url(),kty:"oct"};return r.kid=await G({jwk:r}),r}static async decrypt({data:e,key:r,nonce:n,additionalData:i}){let o=await t.privateKeyToBytes({privateKey:r});return Nf(o,n,i).decrypt(e)}static async encrypt({data:e,key:r,nonce:n,additionalData:i}){let o=await t.privateKeyToBytes({privateKey:r});return Nf(o,n,i).encrypt(e)}static async generateKey(){let e=Be(),r=await e.generateKey({name:"AES-CTR",length:256},!0,["encrypt"]),{alg:n,ext:i,key_ops:o,...s}=await e.exportKey("jwk",r);return s.kid=await G({jwk:s}),s}static async privateKeyToBytes({privateKey:e}){if(!Gt(e))throw new Error("XChaCha20Poly1305: The provided key is not a valid oct private key.");return q.base64Url(e.k).toUint8Array()}};return My(q2);})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/montgomery.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ciphers/esm/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=browser.js.map
