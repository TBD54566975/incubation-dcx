var I6e=Object.create;var mk=Object.defineProperty;var k6e=Object.getOwnPropertyDescriptor;var O6e=Object.getOwnPropertyNames;var B6e=Object.getPrototypeOf,D6e=Object.prototype.hasOwnProperty;var C6e=(t,e)=>()=>(t&&(e=t(t=0)),e);var H=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),zt=(t,e)=>{for(var r in e)mk(t,r,{get:e[r],enumerable:!0})},N6e=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of O6e(e))!D6e.call(t,i)&&i!==r&&mk(t,i,{get:()=>e[i],enumerable:!(n=k6e(e,i))||n.enumerable});return t};var Zt=(t,e,r)=>(r=t!=null?I6e(B6e(t)):{},N6e(e||!t||!t.__esModule?mk(r,"default",{value:t,enumerable:!0}):r,t));var tV=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var rV=(t,e,r)=>(tV(t,e,"read from private field"),r?r.call(t):e.get(t)),nV=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},yk=(t,e,r,n)=>(tV(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var sV=H(Y6=>{"use strict";_();Y6.byteLength=q6e;Y6.toByteArray=L6e;Y6.fromByteArray=z6e;var rl=[],Gc=[],j6e=typeof Uint8Array<"u"?Uint8Array:Array,gk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Nm=0,iV=gk.length;Nm<iV;++Nm)rl[Nm]=gk[Nm],Gc[gk.charCodeAt(Nm)]=Nm;var Nm,iV;Gc["-".charCodeAt(0)]=62;Gc["_".charCodeAt(0)]=63;function oV(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function q6e(t){var e=oV(t),r=e[0],n=e[1];return(r+n)*3/4-n}function $6e(t,e,r){return(e+r)*3/4-r}function L6e(t){var e,r=oV(t),n=r[0],i=r[1],o=new j6e($6e(t,n,i)),s=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)e=Gc[t.charCodeAt(u)]<<18|Gc[t.charCodeAt(u+1)]<<12|Gc[t.charCodeAt(u+2)]<<6|Gc[t.charCodeAt(u+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Gc[t.charCodeAt(u)]<<2|Gc[t.charCodeAt(u+1)]>>4,o[s++]=e&255),i===1&&(e=Gc[t.charCodeAt(u)]<<10|Gc[t.charCodeAt(u+1)]<<4|Gc[t.charCodeAt(u+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function U6e(t){return rl[t>>18&63]+rl[t>>12&63]+rl[t>>6&63]+rl[t&63]}function F6e(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(U6e(n));return i.join("")}function z6e(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(F6e(t,s,s+o>a?a:s+o));return n===1?(e=t[r-1],i.push(rl[e>>2]+rl[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(rl[e>>10]+rl[e>>4&63]+rl[e<<2&63]+"=")),i.join("")}});var aV=H(bk=>{_();bk.read=function(t,e,r,n,i){var o,s,a=i*8-n-1,u=(1<<a)-1,m=u>>1,p=-7,b=r?i-1:0,A=r?-1:1,M=t[e+b];for(b+=A,o=M&(1<<-p)-1,M>>=-p,p+=a;p>0;o=o*256+t[e+b],b+=A,p-=8);for(s=o&(1<<-p)-1,o>>=-p,p+=n;p>0;s=s*256+t[e+b],b+=A,p-=8);if(o===0)o=1-m;else{if(o===u)return s?NaN:(M?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-m}return(M?-1:1)*s*Math.pow(2,o-n)};bk.write=function(t,e,r,n,i,o){var s,a,u,m=o*8-i-1,p=(1<<m)-1,b=p>>1,A=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,M=n?0:o-1,S=n?1:-1,P=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=p):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+b>=1?e+=A/u:e+=A*Math.pow(2,1-b),e*u>=2&&(s++,u/=2),s+b>=p?(a=0,s=p):s+b>=1?(a=(e*u-1)*Math.pow(2,i),s=s+b):(a=e*Math.pow(2,b-1)*Math.pow(2,i),s=0));i>=8;t[r+M]=a&255,M+=S,a/=256,i-=8);for(s=s<<i|a,m+=i;m>0;t[r+M]=s&255,M+=S,s/=256,m-=8);t[r+M-S]|=P*128}});var Ut=H(Xb=>{"use strict";_();var vk=sV(),Qb=aV(),cV=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Xb.Buffer=Le;Xb.SlowBuffer=Z6e;Xb.INSPECT_MAX_BYTES=50;var Q6=2147483647;Xb.kMaxLength=Q6;Le.TYPED_ARRAY_SUPPORT=K6e();!Le.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function K6e(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(Le.prototype,"parent",{enumerable:!0,get:function(){if(Le.isBuffer(this))return this.buffer}});Object.defineProperty(Le.prototype,"offset",{enumerable:!0,get:function(){if(Le.isBuffer(this))return this.byteOffset}});function $d(t){if(t>Q6)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,Le.prototype),e}function Le(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Ek(t)}return lV(t,e,r)}Le.poolSize=8192;function lV(t,e,r){if(typeof t=="string")return G6e(t,e);if(ArrayBuffer.isView(t))return V6e(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(nl(t,ArrayBuffer)||t&&nl(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(nl(t,SharedArrayBuffer)||t&&nl(t.buffer,SharedArrayBuffer)))return _k(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return Le.from(n,e,r);var i=H6e(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return Le.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}Le.from=function(t,e,r){return lV(t,e,r)};Object.setPrototypeOf(Le.prototype,Uint8Array.prototype);Object.setPrototypeOf(Le,Uint8Array);function dV(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function W6e(t,e,r){return dV(t),t<=0?$d(t):e!==void 0?typeof r=="string"?$d(t).fill(e,r):$d(t).fill(e):$d(t)}Le.alloc=function(t,e,r){return W6e(t,e,r)};function Ek(t){return dV(t),$d(t<0?0:Sk(t)|0)}Le.allocUnsafe=function(t){return Ek(t)};Le.allocUnsafeSlow=function(t){return Ek(t)};function G6e(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Le.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=hV(t,e)|0,n=$d(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function wk(t){for(var e=t.length<0?0:Sk(t.length)|0,r=$d(e),n=0;n<e;n+=1)r[n]=t[n]&255;return r}function V6e(t){if(nl(t,Uint8Array)){var e=new Uint8Array(t);return _k(e.buffer,e.byteOffset,e.byteLength)}return wk(t)}function _k(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,Le.prototype),n}function H6e(t){if(Le.isBuffer(t)){var e=Sk(t.length)|0,r=$d(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Mk(t.length)?$d(0):wk(t);if(t.type==="Buffer"&&Array.isArray(t.data))return wk(t.data)}function Sk(t){if(t>=Q6)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Q6.toString(16)+" bytes");return t|0}function Z6e(t){return+t!=t&&(t=0),Le.alloc(+t)}Le.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==Le.prototype};Le.compare=function(e,r){if(nl(e,Uint8Array)&&(e=Le.from(e,e.offset,e.byteLength)),nl(r,Uint8Array)&&(r=Le.from(r,r.offset,r.byteLength)),!Le.isBuffer(e)||!Le.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var n=e.length,i=r.length,o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0};Le.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Le.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Le.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=Le.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){var s=e[n];if(nl(s,Uint8Array))o+s.length>i.length?Le.from(s).copy(i,o):Uint8Array.prototype.set.call(i,s,o);else if(Le.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function hV(t,e){if(Le.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||nl(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return xk(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return vV(t).length;default:if(i)return n?-1:xk(t).length;e=(""+e).toLowerCase(),i=!0}}Le.byteLength=hV;function J6e(t,e,r){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return sMe(this,e,r);case"utf8":case"utf-8":return mV(this,e,r);case"ascii":return iMe(this,e,r);case"latin1":case"binary":return oMe(this,e,r);case"base64":return rMe(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return aMe(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}Le.prototype._isBuffer=!0;function jm(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}Le.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)jm(this,r,r+1);return this};Le.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)jm(this,r,r+3),jm(this,r+1,r+2);return this};Le.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)jm(this,r,r+7),jm(this,r+1,r+6),jm(this,r+2,r+5),jm(this,r+3,r+4);return this};Le.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?mV(this,0,e):J6e.apply(this,arguments)};Le.prototype.toLocaleString=Le.prototype.toString;Le.prototype.equals=function(e){if(!Le.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Le.compare(this,e)===0};Le.prototype.inspect=function(){var e="",r=Xb.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};cV&&(Le.prototype[cV]=Le.prototype.inspect);Le.prototype.compare=function(e,r,n,i,o){if(nl(e,Uint8Array)&&(e=Le.from(e,e.offset,e.byteLength)),!Le.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var s=o-i,a=n-r,u=Math.min(s,a),m=this.slice(i,o),p=e.slice(r,n),b=0;b<u;++b)if(m[b]!==p[b]){s=m[b],a=p[b];break}return s<a?-1:a<s?1:0};function pV(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Mk(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=Le.from(e,n)),Le.isBuffer(e))return e.length===0?-1:fV(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):fV(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function fV(t,e,r,n,i){var o=1,s=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,s/=2,a/=2,r/=2}function u(M,S){return o===1?M[S]:M.readUInt16BE(S*o)}var m;if(i){var p=-1;for(m=r;m<s;m++)if(u(t,m)===u(e,p===-1?0:m-p)){if(p===-1&&(p=m),m-p+1===a)return p*o}else p!==-1&&(m-=m-p),p=-1}else for(r+a>s&&(r=s-a),m=r;m>=0;m--){for(var b=!0,A=0;A<a;A++)if(u(t,m+A)!==u(e,A)){b=!1;break}if(b)return m}return-1}Le.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};Le.prototype.indexOf=function(e,r,n){return pV(this,e,r,n,!0)};Le.prototype.lastIndexOf=function(e,r,n){return pV(this,e,r,n,!1)};function Y6e(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(s*2,2),16);if(Mk(a))return s;t[r+s]=a}return s}function Q6e(t,e,r,n){return X6(xk(e,t.length-r),t,r,n)}function X6e(t,e,r,n){return X6(uMe(e),t,r,n)}function eMe(t,e,r,n){return X6(vV(e),t,r,n)}function tMe(t,e,r,n){return X6(lMe(e,t.length-r),t,r,n)}Le.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-r;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return Y6e(this,e,r,n);case"utf8":case"utf-8":return Q6e(this,e,r,n);case"ascii":case"latin1":case"binary":return X6e(this,e,r,n);case"base64":return eMe(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tMe(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};Le.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function rMe(t,e,r){return e===0&&r===t.length?vk.fromByteArray(t):vk.fromByteArray(t.slice(e,r))}function mV(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var u,m,p,b;switch(a){case 1:o<128&&(s=o);break;case 2:u=t[i+1],(u&192)===128&&(b=(o&31)<<6|u&63,b>127&&(s=b));break;case 3:u=t[i+1],m=t[i+2],(u&192)===128&&(m&192)===128&&(b=(o&15)<<12|(u&63)<<6|m&63,b>2047&&(b<55296||b>57343)&&(s=b));break;case 4:u=t[i+1],m=t[i+2],p=t[i+3],(u&192)===128&&(m&192)===128&&(p&192)===128&&(b=(o&15)<<18|(u&63)<<12|(m&63)<<6|p&63,b>65535&&b<1114112&&(s=b))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return nMe(n)}var uV=4096;function nMe(t){var e=t.length;if(e<=uV)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=uV));return r}function iMe(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function oMe(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function sMe(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=dMe[t[o]];return i}function aMe(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}Le.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i=this.subarray(e,r);return Object.setPrototypeOf(i,Le.prototype),i};function jo(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}Le.prototype.readUintLE=Le.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||jo(e,r,this.length);for(var i=this[e],o=1,s=0;++s<r&&(o*=256);)i+=this[e+s]*o;return i};Le.prototype.readUintBE=Le.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||jo(e,r,this.length);for(var i=this[e+--r],o=1;r>0&&(o*=256);)i+=this[e+--r]*o;return i};Le.prototype.readUint8=Le.prototype.readUInt8=function(e,r){return e=e>>>0,r||jo(e,1,this.length),this[e]};Le.prototype.readUint16LE=Le.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||jo(e,2,this.length),this[e]|this[e+1]<<8};Le.prototype.readUint16BE=Le.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||jo(e,2,this.length),this[e]<<8|this[e+1]};Le.prototype.readUint32LE=Le.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||jo(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Le.prototype.readUint32BE=Le.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||jo(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Le.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||jo(e,r,this.length);for(var i=this[e],o=1,s=0;++s<r&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};Le.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||jo(e,r,this.length);for(var i=r,o=1,s=this[e+--i];i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};Le.prototype.readInt8=function(e,r){return e=e>>>0,r||jo(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Le.prototype.readInt16LE=function(e,r){e=e>>>0,r||jo(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};Le.prototype.readInt16BE=function(e,r){e=e>>>0,r||jo(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};Le.prototype.readInt32LE=function(e,r){return e=e>>>0,r||jo(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Le.prototype.readInt32BE=function(e,r){return e=e>>>0,r||jo(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Le.prototype.readFloatLE=function(e,r){return e=e>>>0,r||jo(e,4,this.length),Qb.read(this,e,!0,23,4)};Le.prototype.readFloatBE=function(e,r){return e=e>>>0,r||jo(e,4,this.length),Qb.read(this,e,!1,23,4)};Le.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||jo(e,8,this.length),Qb.read(this,e,!0,52,8)};Le.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||jo(e,8,this.length),Qb.read(this,e,!1,52,8)};function Ua(t,e,r,n,i,o){if(!Le.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}Le.prototype.writeUintLE=Le.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){var o=Math.pow(2,8*n)-1;Ua(this,e,r,n,o,0)}var s=1,a=0;for(this[r]=e&255;++a<n&&(s*=256);)this[r+a]=e/s&255;return r+n};Le.prototype.writeUintBE=Le.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){var o=Math.pow(2,8*n)-1;Ua(this,e,r,n,o,0)}var s=n-1,a=1;for(this[r+s]=e&255;--s>=0&&(a*=256);)this[r+s]=e/a&255;return r+n};Le.prototype.writeUint8=Le.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||Ua(this,e,r,1,255,0),this[r]=e&255,r+1};Le.prototype.writeUint16LE=Le.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Ua(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};Le.prototype.writeUint16BE=Le.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Ua(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};Le.prototype.writeUint32LE=Le.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Ua(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};Le.prototype.writeUint32BE=Le.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Ua(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};Le.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){var o=Math.pow(2,8*n-1);Ua(this,e,r,n,o-1,-o)}var s=0,a=1,u=0;for(this[r]=e&255;++s<n&&(a*=256);)e<0&&u===0&&this[r+s-1]!==0&&(u=1),this[r+s]=(e/a>>0)-u&255;return r+n};Le.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){var o=Math.pow(2,8*n-1);Ua(this,e,r,n,o-1,-o)}var s=n-1,a=1,u=0;for(this[r+s]=e&255;--s>=0&&(a*=256);)e<0&&u===0&&this[r+s+1]!==0&&(u=1),this[r+s]=(e/a>>0)-u&255;return r+n};Le.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||Ua(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};Le.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Ua(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};Le.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Ua(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};Le.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Ua(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};Le.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Ua(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function yV(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function gV(t,e,r,n,i){return e=+e,r=r>>>0,i||yV(t,e,r,4,34028234663852886e22,-34028234663852886e22),Qb.write(t,e,r,n,23,4),r+4}Le.prototype.writeFloatLE=function(e,r,n){return gV(this,e,r,!0,n)};Le.prototype.writeFloatBE=function(e,r,n){return gV(this,e,r,!1,n)};function bV(t,e,r,n,i){return e=+e,r=r>>>0,i||yV(t,e,r,8,17976931348623157e292,-17976931348623157e292),Qb.write(t,e,r,n,52,8),r+8}Le.prototype.writeDoubleLE=function(e,r,n){return bV(this,e,r,!0,n)};Le.prototype.writeDoubleBE=function(e,r,n){return bV(this,e,r,!1,n)};Le.prototype.copy=function(e,r,n,i){if(!Le.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),o};Le.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!Le.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){var o=e.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var s;if(typeof e=="number")for(s=r;s<n;++s)this[s]=e;else{var a=Le.isBuffer(e)?e:Le.from(e,i),u=a.length;if(u===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-r;++s)this[s+r]=a[s%u]}return this};var cMe=/[^+/0-9A-Za-z-_]/g;function fMe(t){if(t=t.split("=")[0],t=t.trim().replace(cMe,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function xk(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function uMe(t){for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function lMe(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function vV(t){return vk.toByteArray(fMe(t))}function X6(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function nl(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Mk(t){return t!==t}var dMe=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=r*16,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}()});var ai=H((Evt,EV)=>{_();var Ui=EV.exports={},il,ol;function Ak(){throw new Error("setTimeout has not been defined")}function Pk(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?il=setTimeout:il=Ak}catch{il=Ak}try{typeof clearTimeout=="function"?ol=clearTimeout:ol=Pk}catch{ol=Pk}})();function wV(t){if(il===setTimeout)return setTimeout(t,0);if((il===Ak||!il)&&setTimeout)return il=setTimeout,setTimeout(t,0);try{return il(t,0)}catch{try{return il.call(null,t,0)}catch{return il.call(this,t,0)}}}function hMe(t){if(ol===clearTimeout)return clearTimeout(t);if((ol===Pk||!ol)&&clearTimeout)return ol=clearTimeout,clearTimeout(t);try{return ol(t)}catch{try{return ol.call(null,t)}catch{return ol.call(this,t)}}}var Ld=[],ev=!1,qm,eM=-1;function pMe(){!ev||!qm||(ev=!1,qm.length?Ld=qm.concat(Ld):eM=-1,Ld.length&&_V())}function _V(){if(!ev){var t=wV(pMe);ev=!0;for(var e=Ld.length;e;){for(qm=Ld,Ld=[];++eM<e;)qm&&qm[eM].run();eM=-1,e=Ld.length}qm=null,ev=!1,hMe(t)}}Ui.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Ld.push(new xV(t,e)),Ld.length===1&&!ev&&wV(_V)};function xV(t,e){this.fun=t,this.array=e}xV.prototype.run=function(){this.fun.apply(null,this.array)};Ui.title="browser";Ui.browser=!0;Ui.env={};Ui.argv=[];Ui.version="";Ui.versions={};function Ud(){}Ui.on=Ud;Ui.addListener=Ud;Ui.once=Ud;Ui.off=Ud;Ui.removeListener=Ud;Ui.removeAllListeners=Ud;Ui.emit=Ud;Ui.prependListener=Ud;Ui.prependOnceListener=Ud;Ui.listeners=function(t){return[]};Ui.binding=function(t){throw new Error("process.binding is not supported")};Ui.cwd=function(){return"/"};Ui.chdir=function(t){throw new Error("process.chdir is not supported")};Ui.umask=function(){return 0}});var N,O,Mvt,_=C6e(()=>{N=Zt(Ut()),O=Zt(ai()),Mvt=function(t){function e(){var n=this||self;return delete t.prototype.__magic__,n}if(typeof globalThis=="object")return globalThis;if(this)return e();t.defineProperty(t.prototype,"__magic__",{configurable:!0,get:e});var r=__magic__;return r}(Object)});var MV=H((Pvt,SV)=>{_();var mMe=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis;SV.exports=mMe});var PV=H((Rvt,AV)=>{_();var yMe=MV(),gMe=typeof self=="object"&&self&&self.Object===Object&&self,bMe=yMe||gMe||Function("return this")();AV.exports=bMe});var Tk=H((kvt,TV)=>{_();var vMe=PV(),wMe=vMe.Symbol;TV.exports=wMe});var OV=H((Bvt,kV)=>{_();var RV=Tk(),IV=Object.prototype,_Me=IV.hasOwnProperty,xMe=IV.toString,m_=RV?RV.toStringTag:void 0;function EMe(t){var e=_Me.call(t,m_),r=t[m_];try{t[m_]=void 0;var n=!0}catch{}var i=xMe.call(t);return n&&(e?t[m_]=r:delete t[m_]),i}kV.exports=EMe});var DV=H((Cvt,BV)=>{_();var SMe=Object.prototype,MMe=SMe.toString;function AMe(t){return MMe.call(t)}BV.exports=AMe});var qV=H((jvt,jV)=>{_();var CV=Tk(),PMe=OV(),TMe=DV(),RMe="[object Null]",IMe="[object Undefined]",NV=CV?CV.toStringTag:void 0;function kMe(t){return t==null?t===void 0?IMe:RMe:NV&&NV in Object(t)?PMe(t):TMe(t)}jV.exports=kMe});var LV=H(($vt,$V)=>{_();function OMe(t,e){return function(r){return t(e(r))}}$V.exports=OMe});var FV=H((Uvt,UV)=>{_();var BMe=LV(),DMe=BMe(Object.getPrototypeOf,Object);UV.exports=DMe});var KV=H((zvt,zV)=>{_();function CMe(t){return t!=null&&typeof t=="object"}zV.exports=CMe});var VV=H((Wvt,GV)=>{_();var NMe=qV(),jMe=FV(),qMe=KV(),$Me="[object Object]",LMe=Function.prototype,UMe=Object.prototype,WV=LMe.toString,FMe=UMe.hasOwnProperty,zMe=WV.call(Object);function KMe(t){if(!qMe(t)||NMe(t)!=$Me)return!1;var e=jMe(t);if(e===null)return!0;var r=FMe.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&WV.call(r)==zMe}GV.exports=KMe});var vc=H((VSt,gY)=>{"use strict";_();function yY(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function wPe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return yY(t,r)}catch{r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),yY(new i,r)}}gY.exports=wPe});var VY=H((v6t,GY)=>{"use strict";_();GY.exports=uTe;function uTe(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(a,u){r[n]=function(p){if(o)if(o=!1,p)u(p);else{for(var b=new Array(arguments.length-1),A=0;A<b.length;)b[A++]=arguments[A];a.apply(null,b)}};try{t.apply(e||null,r)}catch(m){o&&(o=!1,u(m))}})}});var YY=H(JY=>{"use strict";_();var $M=JY;$M.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var qv=new Array(64),ZY=new Array(123);for(Xf=0;Xf<64;)ZY[qv[Xf]=Xf<26?Xf+65:Xf<52?Xf+71:Xf<62?Xf-4:Xf-59|43]=Xf++;var Xf;$M.encode=function(e,r,n){for(var i=null,o=[],s=0,a=0,u;r<n;){var m=e[r++];switch(a){case 0:o[s++]=qv[m>>2],u=(m&3)<<4,a=1;break;case 1:o[s++]=qv[u|m>>4],u=(m&15)<<2,a=2;break;case 2:o[s++]=qv[u|m>>6],o[s++]=qv[m&63],a=0;break}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0)}return a&&(o[s++]=qv[u],o[s++]=61,a===1&&(o[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var HY="invalid encoding";$M.decode=function(e,r,n){for(var i=n,o=0,s,a=0;a<e.length;){var u=e.charCodeAt(a++);if(u===61&&o>1)break;if((u=ZY[u])===void 0)throw Error(HY);switch(o){case 0:s=u,o=1;break;case 1:r[n++]=s<<2|(u&48)>>4,s=u,o=2;break;case 2:r[n++]=(s&15)<<4|(u&60)>>2,s=u,o=3;break;case 3:r[n++]=(s&3)<<6|u,o=0;break}}if(o===1)throw Error(HY);return n-i};$M.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var XY=H((E6t,QY)=>{"use strict";_();QY.exports=LM;function LM(){this._listeners={}}LM.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};LM.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};LM.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var sQ=H((M6t,oQ)=>{"use strict";_();oQ.exports=eQ(eQ);function eQ(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function i(u,m,p){e[0]=u,m[p]=r[0],m[p+1]=r[1],m[p+2]=r[2],m[p+3]=r[3]}function o(u,m,p){e[0]=u,m[p]=r[3],m[p+1]=r[2],m[p+2]=r[1],m[p+3]=r[0]}t.writeFloatLE=n?i:o,t.writeFloatBE=n?o:i;function s(u,m){return r[0]=u[m],r[1]=u[m+1],r[2]=u[m+2],r[3]=u[m+3],e[0]}function a(u,m){return r[3]=u[m],r[2]=u[m+1],r[1]=u[m+2],r[0]=u[m+3],e[0]}t.readFloatLE=n?s:a,t.readFloatBE=n?a:s}():function(){function e(n,i,o,s){var a=i<0?1:0;if(a&&(i=-i),i===0)n(1/i>0?0:2147483648,o,s);else if(isNaN(i))n(2143289344,o,s);else if(i>34028234663852886e22)n((a<<31|2139095040)>>>0,o,s);else if(i<11754943508222875e-54)n((a<<31|Math.round(i/1401298464324817e-60))>>>0,o,s);else{var u=Math.floor(Math.log(i)/Math.LN2),m=Math.round(i*Math.pow(2,-u)*8388608)&8388607;n((a<<31|u+127<<23|m)>>>0,o,s)}}t.writeFloatLE=e.bind(null,tQ),t.writeFloatBE=e.bind(null,rQ);function r(n,i,o){var s=n(i,o),a=(s>>31)*2+1,u=s>>>23&255,m=s&8388607;return u===255?m?NaN:a*(1/0):u===0?a*1401298464324817e-60*m:a*Math.pow(2,u-150)*(m+8388608)}t.readFloatLE=r.bind(null,nQ),t.readFloatBE=r.bind(null,iQ)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function i(u,m,p){e[0]=u,m[p]=r[0],m[p+1]=r[1],m[p+2]=r[2],m[p+3]=r[3],m[p+4]=r[4],m[p+5]=r[5],m[p+6]=r[6],m[p+7]=r[7]}function o(u,m,p){e[0]=u,m[p]=r[7],m[p+1]=r[6],m[p+2]=r[5],m[p+3]=r[4],m[p+4]=r[3],m[p+5]=r[2],m[p+6]=r[1],m[p+7]=r[0]}t.writeDoubleLE=n?i:o,t.writeDoubleBE=n?o:i;function s(u,m){return r[0]=u[m],r[1]=u[m+1],r[2]=u[m+2],r[3]=u[m+3],r[4]=u[m+4],r[5]=u[m+5],r[6]=u[m+6],r[7]=u[m+7],e[0]}function a(u,m){return r[7]=u[m],r[6]=u[m+1],r[5]=u[m+2],r[4]=u[m+3],r[3]=u[m+4],r[2]=u[m+5],r[1]=u[m+6],r[0]=u[m+7],e[0]}t.readDoubleLE=n?s:a,t.readDoubleBE=n?a:s}():function(){function e(n,i,o,s,a,u){var m=s<0?1:0;if(m&&(s=-s),s===0)n(0,a,u+i),n(1/s>0?0:2147483648,a,u+o);else if(isNaN(s))n(0,a,u+i),n(2146959360,a,u+o);else if(s>17976931348623157e292)n(0,a,u+i),n((m<<31|2146435072)>>>0,a,u+o);else{var p;if(s<22250738585072014e-324)p=s/5e-324,n(p>>>0,a,u+i),n((m<<31|p/4294967296)>>>0,a,u+o);else{var b=Math.floor(Math.log(s)/Math.LN2);b===1024&&(b=1023),p=s*Math.pow(2,-b),n(p*4503599627370496>>>0,a,u+i),n((m<<31|b+1023<<20|p*1048576&1048575)>>>0,a,u+o)}}}t.writeDoubleLE=e.bind(null,tQ,0,4),t.writeDoubleBE=e.bind(null,rQ,4,0);function r(n,i,o,s,a){var u=n(s,a+i),m=n(s,a+o),p=(m>>31)*2+1,b=m>>>20&2047,A=4294967296*(m&1048575)+u;return b===2047?A?NaN:p*(1/0):b===0?p*5e-324*A:p*Math.pow(2,b-1075)*(A+4503599627370496)}t.readDoubleLE=r.bind(null,nQ,0,4),t.readDoubleBE=r.bind(null,iQ,4,0)}(),t}function tQ(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function rQ(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function nQ(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function iQ(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var aQ=H((exports,module)=>{"use strict";_();module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var fQ=H(cQ=>{"use strict";_();var v9=cQ;v9.length=function(e){for(var r=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r};v9.read=function(e,r,n){var i=n-r;if(i<1)return"";for(var o=null,s=[],a=0,u;r<n;)u=e[r++],u<128?s[a++]=u:u>191&&u<224?s[a++]=(u&31)<<6|e[r++]&63:u>239&&u<365?(u=((u&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,s[a++]=55296+(u>>10),s[a++]=56320+(u&1023)):s[a++]=(u&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};v9.write=function(e,r,n){for(var i=n,o,s,a=0;a<e.length;++a)o=e.charCodeAt(a),o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=o&63|128):(o&64512)===55296&&((s=e.charCodeAt(a+1))&64512)===56320?(o=65536+((o&1023)<<10)+(s&1023),++a,r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=o&63|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=o&63|128);return n-i}});var lQ=H((I6t,uQ)=>{"use strict";_();uQ.exports=lTe;function lTe(t,e,r){var n=r||8192,i=n>>>1,o=null,s=n;return function(u){if(u<1||u>i)return t(u);s+u>n&&(o=t(n),s=0);var m=e.call(o,s,s+=u);return s&7&&(s=(s|7)+1),m}}});var hQ=H((O6t,dQ)=>{"use strict";_();dQ.exports=Fo;var ax=ny();function Fo(t,e){this.lo=t>>>0,this.hi=e>>>0}var ry=Fo.zero=new Fo(0,0);ry.toNumber=function(){return 0};ry.zzEncode=ry.zzDecode=function(){return this};ry.length=function(){return 1};var dTe=Fo.zeroHash="\0\0\0\0\0\0\0\0";Fo.fromNumber=function(e){if(e===0)return ry;var r=e<0;r&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new Fo(n,i)};Fo.from=function(e){if(typeof e=="number")return Fo.fromNumber(e);if(ax.isString(e))if(ax.Long)e=ax.Long.fromString(e);else return Fo.fromNumber(parseInt(e,10));return e.low||e.high?new Fo(e.low>>>0,e.high>>>0):ry};Fo.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};Fo.prototype.toLong=function(e){return ax.Long?new ax.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var Fp=String.prototype.charCodeAt;Fo.fromHash=function(e){return e===dTe?ry:new Fo((Fp.call(e,0)|Fp.call(e,1)<<8|Fp.call(e,2)<<16|Fp.call(e,3)<<24)>>>0,(Fp.call(e,4)|Fp.call(e,5)<<8|Fp.call(e,6)<<16|Fp.call(e,7)<<24)>>>0)};Fo.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Fo.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};Fo.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};Fo.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var ny=H(w9=>{"use strict";_();var bt=w9;bt.asPromise=VY();bt.base64=YY();bt.EventEmitter=XY();bt.float=sQ();bt.inquire=aQ();bt.utf8=fQ();bt.pool=lQ();bt.LongBits=hQ();bt.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);bt.global=bt.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||w9;bt.emptyArray=Object.freeze?Object.freeze([]):[];bt.emptyObject=Object.freeze?Object.freeze({}):{};bt.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};bt.isString=function(e){return typeof e=="string"||e instanceof String};bt.isObject=function(e){return e&&typeof e=="object"};bt.isset=bt.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};bt.Buffer=function(){try{var t=bt.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}}();bt._Buffer_from=null;bt._Buffer_allocUnsafe=null;bt.newBuffer=function(e){return typeof e=="number"?bt.Buffer?bt._Buffer_allocUnsafe(e):new bt.Array(e):bt.Buffer?bt._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};bt.Array=typeof Uint8Array<"u"?Uint8Array:Array;bt.Long=bt.global.dcodeIO&&bt.global.dcodeIO.Long||bt.global.Long||bt.inquire("long");bt.key2Re=/^true|false|0|1$/;bt.key32Re=/^-?(?:0|[1-9][0-9]*)$/;bt.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;bt.longToHash=function(e){return e?bt.LongBits.from(e).toHash():bt.LongBits.zeroHash};bt.longFromHash=function(e,r){var n=bt.LongBits.fromHash(e);return bt.Long?bt.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))};function pQ(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)(t[n[i]]===void 0||!r)&&(t[n[i]]=e[n[i]]);return t}bt.merge=pQ;bt.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function mQ(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&pQ(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}bt.newError=mQ;bt.ProtocolError=mQ("ProtocolError");bt.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(r[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};bt.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};bt.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};bt._configure=function(){var t=bt.Buffer;if(!t){bt._Buffer_from=bt._Buffer_allocUnsafe=null;return}bt._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},bt._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var E9=H((N6t,wQ)=>{"use strict";_();wQ.exports=Ki;var eu=ny(),x9,bQ=eu.LongBits,hTe=eu.utf8;function tu(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Ki(t){this.buf=t,this.pos=0,this.len=t.length}var yQ=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Ki(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Ki(e);throw Error("illegal buffer")},vQ=function(){return eu.Buffer?function(r){return(Ki.create=function(i){return eu.Buffer.isBuffer(i)?new x9(i):yQ(i)})(r)}:yQ};Ki.create=vQ();Ki.prototype._slice=eu.Array.prototype.subarray||eu.Array.prototype.slice;Ki.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,tu(this,10);return e}}();Ki.prototype.int32=function(){return this.uint32()|0};Ki.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function _9(){var t=new bQ(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw tu(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw tu(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Ki.prototype.bool=function(){return this.uint32()!==0};function UM(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Ki.prototype.fixed32=function(){if(this.pos+4>this.len)throw tu(this,4);return UM(this.buf,this.pos+=4)};Ki.prototype.sfixed32=function(){if(this.pos+4>this.len)throw tu(this,4);return UM(this.buf,this.pos+=4)|0};function gQ(){if(this.pos+8>this.len)throw tu(this,8);return new bQ(UM(this.buf,this.pos+=4),UM(this.buf,this.pos+=4))}Ki.prototype.float=function(){if(this.pos+4>this.len)throw tu(this,4);var e=eu.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Ki.prototype.double=function(){if(this.pos+8>this.len)throw tu(this,4);var e=eu.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Ki.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw tu(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(r,n);if(r===n){var i=eu.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,r,n)};Ki.prototype.string=function(){var e=this.bytes();return hTe.read(e,0,e.length)};Ki.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw tu(this,e);this.pos+=e}else do if(this.pos>=this.len)throw tu(this);while(this.buf[this.pos++]&128);return this};Ki.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Ki._configure=function(t){x9=t,Ki.create=vQ(),x9._configure();var e=eu.Long?"toLong":"toNumber";eu.merge(Ki.prototype,{int64:function(){return _9.call(this)[e](!1)},uint64:function(){return _9.call(this)[e](!0)},sint64:function(){return _9.call(this).zzDecode()[e](!1)},fixed64:function(){return gQ.call(this)[e](!0)},sfixed64:function(){return gQ.call(this)[e](!1)}})}});var SQ=H((q6t,EQ)=>{"use strict";_();EQ.exports=iy;var xQ=E9();(iy.prototype=Object.create(xQ.prototype)).constructor=iy;var _Q=ny();function iy(t){xQ.call(this,t)}iy._configure=function(){_Q.Buffer&&(iy.prototype._slice=_Q.Buffer.prototype.slice)};iy.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};iy._configure()});var I9=H((L6t,TQ)=>{"use strict";_();TQ.exports=Qr;var Yc=ny(),S9,FM=Yc.LongBits,MQ=Yc.base64,AQ=Yc.utf8;function cx(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function A9(){}function pTe(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Qr(){this.len=0,this.head=new cx(A9,0,0),this.tail=this.head,this.states=null}var PQ=function(){return Yc.Buffer?function(){return(Qr.create=function(){return new S9})()}:function(){return new Qr}};Qr.create=PQ();Qr.alloc=function(e){return new Yc.Array(e)};Yc.Array!==Array&&(Qr.alloc=Yc.pool(Qr.alloc,Yc.Array.prototype.subarray));Qr.prototype._push=function(e,r,n){return this.tail=this.tail.next=new cx(e,r,n),this.len+=r,this};function P9(t,e,r){e[r]=t&255}function mTe(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function T9(t,e){this.len=t,this.next=void 0,this.val=e}T9.prototype=Object.create(cx.prototype);T9.prototype.fn=mTe;Qr.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new T9((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Qr.prototype.int32=function(e){return e<0?this._push(R9,10,FM.fromNumber(e)):this.uint32(e)};Qr.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function R9(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}Qr.prototype.uint64=function(e){var r=FM.from(e);return this._push(R9,r.length(),r)};Qr.prototype.int64=Qr.prototype.uint64;Qr.prototype.sint64=function(e){var r=FM.from(e).zzEncode();return this._push(R9,r.length(),r)};Qr.prototype.bool=function(e){return this._push(P9,1,e?1:0)};function M9(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}Qr.prototype.fixed32=function(e){return this._push(M9,4,e>>>0)};Qr.prototype.sfixed32=Qr.prototype.fixed32;Qr.prototype.fixed64=function(e){var r=FM.from(e);return this._push(M9,4,r.lo)._push(M9,4,r.hi)};Qr.prototype.sfixed64=Qr.prototype.fixed64;Qr.prototype.float=function(e){return this._push(Yc.float.writeFloatLE,4,e)};Qr.prototype.double=function(e){return this._push(Yc.float.writeDoubleLE,8,e)};var yTe=Yc.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var i=0;i<e.length;++i)r[n+i]=e[i]};Qr.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(P9,1,0);if(Yc.isString(e)){var n=Qr.alloc(r=MQ.length(e));MQ.decode(e,n,0),e=n}return this.uint32(r)._push(yTe,r,e)};Qr.prototype.string=function(e){var r=AQ.length(e);return r?this.uint32(r)._push(AQ.write,r,e):this._push(P9,1,0)};Qr.prototype.fork=function(){return this.states=new pTe(this),this.head=this.tail=new cx(A9,0,0),this.len=0,this};Qr.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new cx(A9,0,0),this.len=0),this};Qr.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};Qr.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};Qr._configure=function(t){S9=t,Qr.create=PQ(),S9._configure()}});var kQ=H((F6t,IQ)=>{"use strict";_();IQ.exports=pl;var RQ=I9();(pl.prototype=Object.create(RQ.prototype)).constructor=pl;var zp=ny();function pl(){RQ.call(this)}pl._configure=function(){pl.alloc=zp._Buffer_allocUnsafe,pl.writeBytesBuffer=zp.Buffer&&zp.Buffer.prototype instanceof Uint8Array&&zp.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var i=0;i<e.length;)r[n++]=e[i++]}};pl.prototype.bytes=function(e){zp.isString(e)&&(e=zp._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(pl.writeBytesBuffer,r,e),this};function gTe(t,e,r){t.length<40?zp.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}pl.prototype.string=function(e){var r=zp.Buffer.byteLength(e);return this.uint32(r),r&&this._push(gTe,r,e),this};pl._configure()});var TX=H((Sx,HM)=>{_();(function(t,e){"use strict";var r={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function n(M){if(!Array.isArray(M)&&!ArrayBuffer.isView(M))return!1;for(var S=0;S<M.length;S++)if(!Number.isInteger(M[S])||M[S]<0||M[S]>255)return!1;return!0}function i(M,S){return(M&65535)*S+(((M>>>16)*S&65535)<<16)}function o(M,S){return M<<S|M>>>32-S}function s(M){return M^=M>>>16,M=i(M,2246822507),M^=M>>>13,M=i(M,3266489909),M^=M>>>16,M}function a(M,S){M=[M[0]>>>16,M[0]&65535,M[1]>>>16,M[1]&65535],S=[S[0]>>>16,S[0]&65535,S[1]>>>16,S[1]&65535];var P=[0,0,0,0];return P[3]+=M[3]+S[3],P[2]+=P[3]>>>16,P[3]&=65535,P[2]+=M[2]+S[2],P[1]+=P[2]>>>16,P[2]&=65535,P[1]+=M[1]+S[1],P[0]+=P[1]>>>16,P[1]&=65535,P[0]+=M[0]+S[0],P[0]&=65535,[P[0]<<16|P[1],P[2]<<16|P[3]]}function u(M,S){M=[M[0]>>>16,M[0]&65535,M[1]>>>16,M[1]&65535],S=[S[0]>>>16,S[0]&65535,S[1]>>>16,S[1]&65535];var P=[0,0,0,0];return P[3]+=M[3]*S[3],P[2]+=P[3]>>>16,P[3]&=65535,P[2]+=M[2]*S[3],P[1]+=P[2]>>>16,P[2]&=65535,P[2]+=M[3]*S[2],P[1]+=P[2]>>>16,P[2]&=65535,P[1]+=M[1]*S[3],P[0]+=P[1]>>>16,P[1]&=65535,P[1]+=M[2]*S[2],P[0]+=P[1]>>>16,P[1]&=65535,P[1]+=M[3]*S[1],P[0]+=P[1]>>>16,P[1]&=65535,P[0]+=M[0]*S[3]+M[1]*S[2]+M[2]*S[1]+M[3]*S[0],P[0]&=65535,[P[0]<<16|P[1],P[2]<<16|P[3]]}function m(M,S){return S%=64,S===32?[M[1],M[0]]:S<32?[M[0]<<S|M[1]>>>32-S,M[1]<<S|M[0]>>>32-S]:(S-=32,[M[1]<<S|M[0]>>>32-S,M[0]<<S|M[1]>>>32-S])}function p(M,S){return S%=64,S===0?M:S<32?[M[0]<<S|M[1]>>>32-S,M[1]<<S]:[M[1]<<S-32,0]}function b(M,S){return[M[0]^S[0],M[1]^S[1]]}function A(M){return M=b(M,[0,M[0]>>>1]),M=u(M,[4283543511,3981806797]),M=b(M,[0,M[0]>>>1]),M=u(M,[3301882366,444984403]),M=b(M,[0,M[0]>>>1]),M}r.x86.hash32=function(M,S){if(r.inputValidation&&!n(M))return e;S=S||0;for(var P=M.length%4,k=M.length-P,R=S,B=0,I=3432918353,q=461845907,$=0;$<k;$=$+4)B=M[$]|M[$+1]<<8|M[$+2]<<16|M[$+3]<<24,B=i(B,I),B=o(B,15),B=i(B,q),R^=B,R=o(R,13),R=i(R,5)+3864292196;switch(B=0,P){case 3:B^=M[$+2]<<16;case 2:B^=M[$+1]<<8;case 1:B^=M[$],B=i(B,I),B=o(B,15),B=i(B,q),R^=B}return R^=M.length,R=s(R),R>>>0},r.x86.hash128=function(M,S){if(r.inputValidation&&!n(M))return e;S=S||0;for(var P=M.length%16,k=M.length-P,R=S,B=S,I=S,q=S,$=0,U=0,F=0,L=0,W=597399067,E=2869860233,c=951274213,l=2716044179,y=0;y<k;y=y+16)$=M[y]|M[y+1]<<8|M[y+2]<<16|M[y+3]<<24,U=M[y+4]|M[y+5]<<8|M[y+6]<<16|M[y+7]<<24,F=M[y+8]|M[y+9]<<8|M[y+10]<<16|M[y+11]<<24,L=M[y+12]|M[y+13]<<8|M[y+14]<<16|M[y+15]<<24,$=i($,W),$=o($,15),$=i($,E),R^=$,R=o(R,19),R+=B,R=i(R,5)+1444728091,U=i(U,E),U=o(U,16),U=i(U,c),B^=U,B=o(B,17),B+=I,B=i(B,5)+197830471,F=i(F,c),F=o(F,17),F=i(F,l),I^=F,I=o(I,15),I+=q,I=i(I,5)+2530024501,L=i(L,l),L=o(L,18),L=i(L,W),q^=L,q=o(q,13),q+=R,q=i(q,5)+850148119;switch($=0,U=0,F=0,L=0,P){case 15:L^=M[y+14]<<16;case 14:L^=M[y+13]<<8;case 13:L^=M[y+12],L=i(L,l),L=o(L,18),L=i(L,W),q^=L;case 12:F^=M[y+11]<<24;case 11:F^=M[y+10]<<16;case 10:F^=M[y+9]<<8;case 9:F^=M[y+8],F=i(F,c),F=o(F,17),F=i(F,l),I^=F;case 8:U^=M[y+7]<<24;case 7:U^=M[y+6]<<16;case 6:U^=M[y+5]<<8;case 5:U^=M[y+4],U=i(U,E),U=o(U,16),U=i(U,c),B^=U;case 4:$^=M[y+3]<<24;case 3:$^=M[y+2]<<16;case 2:$^=M[y+1]<<8;case 1:$^=M[y],$=i($,W),$=o($,15),$=i($,E),R^=$}return R^=M.length,B^=M.length,I^=M.length,q^=M.length,R+=B,R+=I,R+=q,B+=R,I+=R,q+=R,R=s(R),B=s(B),I=s(I),q=s(q),R+=B,R+=I,R+=q,B+=R,I+=R,q+=R,("00000000"+(R>>>0).toString(16)).slice(-8)+("00000000"+(B>>>0).toString(16)).slice(-8)+("00000000"+(I>>>0).toString(16)).slice(-8)+("00000000"+(q>>>0).toString(16)).slice(-8)},r.x64.hash128=function(M,S){if(r.inputValidation&&!n(M))return e;S=S||0;for(var P=M.length%16,k=M.length-P,R=[0,S],B=[0,S],I=[0,0],q=[0,0],$=[2277735313,289559509],U=[1291169091,658871167],F=0;F<k;F=F+16)I=[M[F+4]|M[F+5]<<8|M[F+6]<<16|M[F+7]<<24,M[F]|M[F+1]<<8|M[F+2]<<16|M[F+3]<<24],q=[M[F+12]|M[F+13]<<8|M[F+14]<<16|M[F+15]<<24,M[F+8]|M[F+9]<<8|M[F+10]<<16|M[F+11]<<24],I=u(I,$),I=m(I,31),I=u(I,U),R=b(R,I),R=m(R,27),R=a(R,B),R=a(u(R,[0,5]),[0,1390208809]),q=u(q,U),q=m(q,33),q=u(q,$),B=b(B,q),B=m(B,31),B=a(B,R),B=a(u(B,[0,5]),[0,944331445]);switch(I=[0,0],q=[0,0],P){case 15:q=b(q,p([0,M[F+14]],48));case 14:q=b(q,p([0,M[F+13]],40));case 13:q=b(q,p([0,M[F+12]],32));case 12:q=b(q,p([0,M[F+11]],24));case 11:q=b(q,p([0,M[F+10]],16));case 10:q=b(q,p([0,M[F+9]],8));case 9:q=b(q,[0,M[F+8]]),q=u(q,U),q=m(q,33),q=u(q,$),B=b(B,q);case 8:I=b(I,p([0,M[F+7]],56));case 7:I=b(I,p([0,M[F+6]],48));case 6:I=b(I,p([0,M[F+5]],40));case 5:I=b(I,p([0,M[F+4]],32));case 4:I=b(I,p([0,M[F+3]],24));case 3:I=b(I,p([0,M[F+2]],16));case 2:I=b(I,p([0,M[F+1]],8));case 1:I=b(I,[0,M[F]]),I=u(I,$),I=m(I,31),I=u(I,U),R=b(R,I)}return R=b(R,[0,M.length]),B=b(B,[0,M.length]),R=a(R,B),B=a(B,R),R=A(R),B=A(B),R=a(R,B),B=a(B,R),("00000000"+(R[0]>>>0).toString(16)).slice(-8)+("00000000"+(R[1]>>>0).toString(16)).slice(-8)+("00000000"+(B[0]>>>0).toString(16)).slice(-8)+("00000000"+(B[1]>>>0).toString(16)).slice(-8)},typeof Sx<"u"?(typeof HM<"u"&&HM.exports&&(Sx=HM.exports=r),Sx.murmurHash3=r):typeof define=="function"&&define.amd?define([],function(){return r}):(r._murmurHash3=t.murmurHash3,r.noConflict=function(){return t.murmurHash3=r._murmurHash3,r._murmurHash3=e,r.noConflict=e,r},t.murmurHash3=r)})(Sx)});var IX=H((L4t,RX)=>{_();RX.exports=TX()});var BX=H((Z4t,OX)=>{"use strict";_();OX.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,r){let n=this._internalPositionFor(e,!1);if(r===void 0)n!==-1&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let i=!1;n===-1?(n=this._data.length,this._setBit(e),this._changedData=!0):i=!0,this._setInternalPos(n,e,r,i),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();let r=this._internalPositionFor(e,!0);if(r!==-1)return this._data[r][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){let e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let r=0;for(;r<this.length;)e(this.get(r),r,this),r++}map(e){let r=0,n=new Array(this.length);for(;r<this.length;)n[r]=e(this.get(r),r,this),r++;return n}reduce(e,r){let n=0,i=r;for(;n<this.length;){let o=this.get(n);i=e(i,o,n),n++}return i}find(e){let r=0,n,i;for(;r<this.length&&!n;)i=this.get(r),n=e(i),r++;return n?i:void 0}_internalPositionFor(e,r){let n=this._bytePosFor(e,r);if(n>=this._bitArrays.length)return-1;let i=this._bitArrays[n],o=e-n*7;if(!((i&1<<o)>0))return-1;let a=this._bitArrays.slice(0,n).reduce(_Ie,0),u=~(4294967295<<o+1),m=kX(i&u);return a+m-1}_bytePosFor(e,r){let n=Math.floor(e/7),i=n+1;for(;!r&&this._bitArrays.length<i;)this._bitArrays.push(0);return n}_setBit(e){let r=this._bytePosFor(e,!1);this._bitArrays[r]|=1<<e-r*7}_unsetBit(e){let r=this._bytePosFor(e,!1);this._bitArrays[r]&=~(1<<e-r*7)}_setInternalPos(e,r,n,i){let o=this._data,s=[r,n];if(i)this._sortData(),o[e]=s;else{if(o.length)if(o[o.length-1][0]>=r)o.push(s);else if(o[0][0]<=r)o.unshift(s);else{let a=Math.round(o.length/2);this._data=o.slice(0,a).concat(s).concat(o.slice(a))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(xIe),this._changedData=!1}bitField(){let e=[],r=8,n=0,i=0,o,s=this._bitArrays.slice();for(;s.length||n;){n===0&&(o=s.shift(),n=7);let u=Math.min(n,r),m=~(255<<u),p=o&m;i|=p<<8-r,o=o>>>u,n-=u,r-=u,(!r||!n&&!s.length)&&(e.push(i),i=0,r=8)}for(var a=e.length-1;a>0&&e[a]===0;a--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(EIe)}};function _Ie(t,e){return t+kX(e)}function kX(t){let e=t;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function xIe(t,e){return t[0]-e[0]}function EIe(t){return t[1]}});var Wr=H((zO,gee)=>{_();var r8=Ut(),sh=r8.Buffer;function yee(t,e){for(var r in t)e[r]=t[r]}sh.from&&sh.alloc&&sh.allocUnsafe&&sh.allocUnsafeSlow?gee.exports=r8:(yee(r8,zO),zO.Buffer=tw);function tw(t,e,r){return sh(t,e,r)}yee(sh,tw);tw.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return sh(t,e,r)};tw.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=sh(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};tw.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return sh(t)};tw.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return r8.SlowBuffer(t)}});var fy=H((xTt,WO)=>{"use strict";_();var KO=65536,Kke=4294967295;function Wke(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var Gke=Wr().Buffer,n8=globalThis.crypto||globalThis.msCrypto;n8&&n8.getRandomValues?WO.exports=Vke:WO.exports=Wke;function Vke(t,e){if(t>Kke)throw new RangeError("requested too many random bytes");var r=Gke.allocUnsafe(t);if(t>0)if(t>KO)for(var n=0;n<t;n+=KO)n8.getRandomValues(r.slice(n,n+KO));else n8.getRandomValues(r);return typeof e=="function"?O.default.nextTick(function(){e(null,r)}):r}});var Rt=H((STt,GO)=>{_();typeof Object.create=="function"?GO.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:GO.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var wee=H((VO,vee)=>{_();var i8=Ut(),vl=i8.Buffer;function bee(t,e){for(var r in t)e[r]=t[r]}vl.from&&vl.alloc&&vl.allocUnsafe&&vl.allocUnsafeSlow?vee.exports=i8:(bee(i8,VO),VO.Buffer=uy);function uy(t,e,r){return vl(t,e,r)}uy.prototype=Object.create(vl.prototype);bee(vl,uy);uy.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return vl(t,e,r)};uy.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=vl(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};uy.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return vl(t)};uy.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return i8.SlowBuffer(t)}});var uo=H((PTt,HO)=>{"use strict";_();var rw=typeof Reflect=="object"?Reflect:null,_ee=rw&&typeof rw.apply=="function"?rw.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},o8;rw&&typeof rw.ownKeys=="function"?o8=rw.ownKeys:Object.getOwnPropertySymbols?o8=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:o8=function(e){return Object.getOwnPropertyNames(e)};function Hke(t){console&&console.warn&&console.warn(t)}var Eee=Number.isNaN||function(e){return e!==e};function vn(){vn.init.call(this)}HO.exports=vn;HO.exports.once=Qke;vn.EventEmitter=vn;vn.prototype._events=void 0;vn.prototype._eventsCount=0;vn.prototype._maxListeners=void 0;var xee=10;function s8(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(vn,"defaultMaxListeners",{enumerable:!0,get:function(){return xee},set:function(t){if(typeof t!="number"||t<0||Eee(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");xee=t}});vn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};vn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Eee(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function See(t){return t._maxListeners===void 0?vn.defaultMaxListeners:t._maxListeners}vn.prototype.getMaxListeners=function(){return See(this)};vn.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(u===void 0)return!1;if(typeof u=="function")_ee(u,this,r);else for(var m=u.length,p=Ree(u,m),n=0;n<m;++n)_ee(p[n],this,r);return!0};function Mee(t,e,r,n){var i,o,s;if(s8(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),s===void 0)s=o[e]=r,++t._eventsCount;else if(typeof s=="function"?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=See(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,Hke(a)}return t}vn.prototype.addListener=function(e,r){return Mee(this,e,r,!1)};vn.prototype.on=vn.prototype.addListener;vn.prototype.prependListener=function(e,r){return Mee(this,e,r,!0)};function Zke(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Aee(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=Zke.bind(n);return i.listener=r,n.wrapFn=i,i}vn.prototype.once=function(e,r){return s8(r),this.on(e,Aee(this,e,r)),this};vn.prototype.prependOnceListener=function(e,r){return s8(r),this.prependListener(e,Aee(this,e,r)),this};vn.prototype.removeListener=function(e,r){var n,i,o,s,a;if(s8(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===r||n[s].listener===r){a=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():Jke(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};vn.prototype.off=vn.prototype.removeListener;vn.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Pee(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Yke(i):Ree(i,i.length)}vn.prototype.listeners=function(e){return Pee(this,e,!0)};vn.prototype.rawListeners=function(e){return Pee(this,e,!1)};vn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Tee.call(t,e)};vn.prototype.listenerCount=Tee;function Tee(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}vn.prototype.eventNames=function(){return this._eventsCount>0?o8(this._events):[]};function Ree(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Jke(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Yke(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Qke(t,e){return new Promise(function(r,n){function i(s){t.removeListener(e,o),n(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Iee(t,e,o,{once:!0}),e!=="error"&&Xke(t,i,{once:!0})})}function Xke(t,e,r){typeof t.on=="function"&&Iee(t,"error",e,r)}function Iee(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){n.once&&t.removeEventListener(e,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var ZO=H((RTt,kee)=>{_();kee.exports=uo().EventEmitter});var JO=H((kTt,Oee)=>{"use strict";_();Oee.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,r);if(s.value!==i||s.enumerable!==!0)return!1}return!0}});var Ix=H((BTt,Bee)=>{"use strict";_();var e7e=JO();Bee.exports=function(){return e7e()&&!!Symbol.toStringTag}});var Nee=H((CTt,Cee)=>{"use strict";_();var Dee=typeof Symbol<"u"&&Symbol,t7e=JO();Cee.exports=function(){return typeof Dee!="function"||typeof Symbol!="function"||typeof Dee("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t7e()}});var $ee=H((jTt,qee)=>{"use strict";_();var jee={foo:{}},r7e=Object;qee.exports=function(){return{__proto__:jee}.foo===jee.foo&&!({__proto__:null}instanceof r7e)}});var Uee=H(($Tt,Lee)=>{"use strict";_();var n7e="Function.prototype.bind called on incompatible ",YO=Array.prototype.slice,i7e=Object.prototype.toString,o7e="[object Function]";Lee.exports=function(e){var r=this;if(typeof r!="function"||i7e.call(r)!==o7e)throw new TypeError(n7e+r);for(var n=YO.call(arguments,1),i,o=function(){if(this instanceof i){var p=r.apply(this,n.concat(YO.call(arguments)));return Object(p)===p?p:this}else return r.apply(e,n.concat(YO.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],u=0;u<s;u++)a.push("$"+u);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var m=function(){};m.prototype=r.prototype,i.prototype=new m,m.prototype=null}return i}});var a8=H((UTt,Fee)=>{"use strict";_();var s7e=Uee();Fee.exports=Function.prototype.bind||s7e});var Kee=H((zTt,zee)=>{"use strict";_();var a7e=a8();zee.exports=a7e.call(Function.call,Object.prototype.hasOwnProperty)});var u8=H((WTt,Zee)=>{"use strict";_();var $r,sw=SyntaxError,Hee=Function,ow=TypeError,QO=function(t){try{return Hee('"use strict"; return ('+t+").constructor;")()}catch{}},ly=Object.getOwnPropertyDescriptor;if(ly)try{ly({},"")}catch{ly=null}var XO=function(){throw new ow},c7e=ly?function(){try{return arguments.callee,XO}catch{try{return ly(arguments,"callee").get}catch{return XO}}}():XO,nw=Nee()(),f7e=$ee()(),Ko=Object.getPrototypeOf||(f7e?function(t){return t.__proto__}:null),iw={},u7e=typeof Uint8Array>"u"||!Ko?$r:Ko(Uint8Array),dy={"%AggregateError%":typeof AggregateError>"u"?$r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?$r:ArrayBuffer,"%ArrayIteratorPrototype%":nw&&Ko?Ko([][Symbol.iterator]()):$r,"%AsyncFromSyncIteratorPrototype%":$r,"%AsyncFunction%":iw,"%AsyncGenerator%":iw,"%AsyncGeneratorFunction%":iw,"%AsyncIteratorPrototype%":iw,"%Atomics%":typeof Atomics>"u"?$r:Atomics,"%BigInt%":typeof BigInt>"u"?$r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?$r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?$r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?$r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?$r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?$r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?$r:FinalizationRegistry,"%Function%":Hee,"%GeneratorFunction%":iw,"%Int8Array%":typeof Int8Array>"u"?$r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?$r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?$r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":nw&&Ko?Ko(Ko([][Symbol.iterator]())):$r,"%JSON%":typeof JSON=="object"?JSON:$r,"%Map%":typeof Map>"u"?$r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!nw||!Ko?$r:Ko(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?$r:Promise,"%Proxy%":typeof Proxy>"u"?$r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?$r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?$r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!nw||!Ko?$r:Ko(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?$r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":nw&&Ko?Ko(""[Symbol.iterator]()):$r,"%Symbol%":nw?Symbol:$r,"%SyntaxError%":sw,"%ThrowTypeError%":c7e,"%TypedArray%":u7e,"%TypeError%":ow,"%Uint8Array%":typeof Uint8Array>"u"?$r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?$r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?$r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?$r:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?$r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?$r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?$r:WeakSet};if(Ko)try{null.error}catch(t){Wee=Ko(Ko(t)),dy["%Error.prototype%"]=Wee}var Wee,l7e=function t(e){var r;if(e==="%AsyncFunction%")r=QO("async function () {}");else if(e==="%GeneratorFunction%")r=QO("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=QO("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&Ko&&(r=Ko(i.prototype))}return dy[e]=r,r},Gee={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},kx=a8(),c8=Kee(),d7e=kx.call(Function.call,Array.prototype.concat),h7e=kx.call(Function.apply,Array.prototype.splice),Vee=kx.call(Function.call,String.prototype.replace),f8=kx.call(Function.call,String.prototype.slice),p7e=kx.call(Function.call,RegExp.prototype.exec),m7e=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,y7e=/\\(\\)?/g,g7e=function(e){var r=f8(e,0,1),n=f8(e,-1);if(r==="%"&&n!=="%")throw new sw("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new sw("invalid intrinsic syntax, expected opening `%`");var i=[];return Vee(e,m7e,function(o,s,a,u){i[i.length]=a?Vee(u,y7e,"$1"):s||o}),i},b7e=function(e,r){var n=e,i;if(c8(Gee,n)&&(i=Gee[n],n="%"+i[0]+"%"),c8(dy,n)){var o=dy[n];if(o===iw&&(o=l7e(n)),typeof o>"u"&&!r)throw new ow("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new sw("intrinsic "+e+" does not exist!")};Zee.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new ow("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ow('"allowMissing" argument must be a boolean');if(p7e(/^%?[^%]*%?$/,e)===null)throw new sw("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=g7e(e),i=n.length>0?n[0]:"",o=b7e("%"+i+"%",r),s=o.name,a=o.value,u=!1,m=o.alias;m&&(i=m[0],h7e(n,d7e([0,1],m)));for(var p=1,b=!0;p<n.length;p+=1){var A=n[p],M=f8(A,0,1),S=f8(A,-1);if((M==='"'||M==="'"||M==="`"||S==='"'||S==="'"||S==="`")&&M!==S)throw new sw("property names with quotes must have matching quotes");if((A==="constructor"||!b)&&(u=!0),i+="."+A,s="%"+i+"%",c8(dy,s))a=dy[s];else if(a!=null){if(!(A in a)){if(!r)throw new ow("base intrinsic for "+e+" exists, but the property is not available.");return}if(ly&&p+1>=n.length){var P=ly(a,A);b=!!P,b&&"get"in P&&!("originalValue"in P.get)?a=P.get:a=a[A]}else b=c8(a,A),a=a[A];b&&!u&&(dy[s]=a)}}return a}});var d8=H((VTt,l8)=>{"use strict";_();var eB=a8(),aw=u8(),Qee=aw("%Function.prototype.apply%"),Xee=aw("%Function.prototype.call%"),ete=aw("%Reflect.apply%",!0)||eB.call(Xee,Qee),Jee=aw("%Object.getOwnPropertyDescriptor%",!0),hy=aw("%Object.defineProperty%",!0),v7e=aw("%Math.max%");if(hy)try{hy({},"a",{value:1})}catch{hy=null}l8.exports=function(e){var r=ete(eB,Xee,arguments);if(Jee&&hy){var n=Jee(r,"length");n.configurable&&hy(r,"length",{value:1+v7e(0,e.length-(arguments.length-1))})}return r};var Yee=function(){return ete(eB,Qee,arguments)};hy?hy(l8.exports,"apply",{value:Yee}):l8.exports.apply=Yee});var h8=H((ZTt,nte)=>{"use strict";_();var tte=u8(),rte=d8(),w7e=rte(tte("String.prototype.indexOf"));nte.exports=function(e,r){var n=tte(e,!!r);return typeof n=="function"&&w7e(e,".prototype.")>-1?rte(n):n}});var ste=H((YTt,ote)=>{"use strict";_();var _7e=Ix()(),x7e=h8(),tB=x7e("Object.prototype.toString"),p8=function(e){return _7e&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:tB(e)==="[object Arguments]"},ite=function(e){return p8(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&tB(e)!=="[object Array]"&&tB(e.callee)==="[object Function]"},E7e=function(){return p8(arguments)}();p8.isLegacyArguments=ite;ote.exports=E7e?p8:ite});var fte=H((XTt,cte)=>{"use strict";_();var S7e=Object.prototype.toString,M7e=Function.prototype.toString,A7e=/^\s*(?:function)?\*/,ate=Ix()(),rB=Object.getPrototypeOf,P7e=function(){if(!ate)return!1;try{return Function("return function*() {}")()}catch{}},nB;cte.exports=function(e){if(typeof e!="function")return!1;if(A7e.test(M7e.call(e)))return!0;if(!ate){var r=S7e.call(e);return r==="[object GeneratorFunction]"}if(!rB)return!1;if(typeof nB>"u"){var n=P7e();nB=n?rB(n):!1}return rB(e)===nB}});var hte=H((tRt,dte)=>{"use strict";_();var lte=Function.prototype.toString,cw=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,oB,m8;if(typeof cw=="function"&&typeof Object.defineProperty=="function")try{oB=Object.defineProperty({},"length",{get:function(){throw m8}}),m8={},cw(function(){throw 42},null,oB)}catch(t){t!==m8&&(cw=null)}else cw=null;var T7e=/^\s*class\b/,sB=function(e){try{var r=lte.call(e);return T7e.test(r)}catch{return!1}},iB=function(e){try{return sB(e)?!1:(lte.call(e),!0)}catch{return!1}},y8=Object.prototype.toString,R7e="[object Object]",I7e="[object Function]",k7e="[object GeneratorFunction]",O7e="[object HTMLAllCollection]",B7e="[object HTML document.all class]",D7e="[object HTMLCollection]",C7e=typeof Symbol=="function"&&!!Symbol.toStringTag,N7e=!(0 in[,]),aB=function(){return!1};typeof document=="object"&&(ute=document.all,y8.call(ute)===y8.call(document.all)&&(aB=function(e){if((N7e||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=y8.call(e);return(r===O7e||r===B7e||r===D7e||r===R7e)&&e("")==null}catch{}return!1}));var ute;dte.exports=cw?function(e){if(aB(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{cw(e,null,oB)}catch(r){if(r!==m8)return!1}return!sB(e)&&iB(e)}:function(e){if(aB(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(C7e)return iB(e);if(sB(e))return!1;var r=y8.call(e);return r!==I7e&&r!==k7e&&!/^\[object HTML/.test(r)?!1:iB(e)}});var cB=H((nRt,mte)=>{"use strict";_();var j7e=hte(),q7e=Object.prototype.toString,pte=Object.prototype.hasOwnProperty,$7e=function(e,r,n){for(var i=0,o=e.length;i<o;i++)pte.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},L7e=function(e,r,n){for(var i=0,o=e.length;i<o;i++)n==null?r(e.charAt(i),i,e):r.call(n,e.charAt(i),i,e)},U7e=function(e,r,n){for(var i in e)pte.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},F7e=function(e,r,n){if(!j7e(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),q7e.call(e)==="[object Array]"?$7e(e,r,i):typeof e=="string"?L7e(e,r,i):U7e(e,r,i)};mte.exports=F7e});var uB=H((oRt,yte)=>{"use strict";_();var fB=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],z7e=globalThis;yte.exports=function(){for(var e=[],r=0;r<fB.length;r++)typeof z7e[fB[r]]=="function"&&(e[e.length]=fB[r]);return e}});var lB=H((aRt,gte)=>{"use strict";_();var K7e=u8(),g8=K7e("%Object.getOwnPropertyDescriptor%",!0);if(g8)try{g8([],"length")}catch{g8=null}gte.exports=g8});var mB=H((fRt,_te)=>{"use strict";_();var v8=cB(),W7e=uB(),bte=d8(),pB=h8(),G7e=pB("Object.prototype.toString"),wte=Ix()(),b8=lB(),vte=globalThis,hB=W7e(),V7e=pB("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},H7e=pB("String.prototype.slice"),w8={__proto__:null},dB=Object.getPrototypeOf;wte&&b8&&dB?v8(hB,function(t){var e=new vte[t];if(Symbol.toStringTag in e){var r=dB(e),n=b8(r,Symbol.toStringTag);if(!n){var i=dB(r);n=b8(i,Symbol.toStringTag)}w8["$"+t]=bte(n.get)}}):v8(hB,function(t){var e=new vte[t];w8["$"+t]=bte(e.slice)});var Z7e=function(e){var r=!1;return v8(w8,function(n,i){if(!r)try{r="$"+n(e)===i}catch{}}),r},J7e=function(e){var r=!1;return v8(w8,function(n){if(!r)try{n(e),r=!0}catch{}}),r};_te.exports=function(e){if(!e||typeof e!="object")return!1;if(!wte){var r=H7e(G7e(e),8,-1);return V7e(hB,r)>-1?!0:r!=="Object"?!1:J7e(e)}return b8?Z7e(e):null}});var Tte=H((lRt,Pte)=>{"use strict";_();var Ete=cB(),Y7e=uB(),Q7e=d8(),Ste=h8(),yB=lB(),X7e=Ste("Object.prototype.toString"),Mte=Ix()(),xte=globalThis,e9e=Y7e(),t9e=Ste("String.prototype.slice"),Ate={__proto__:null},gB=Object.getPrototypeOf;Mte&&yB&&gB&&Ete(e9e,function(t){if(typeof xte[t]=="function"){var e=new xte[t];if(Symbol.toStringTag in e){var r=gB(e),n=yB(r,Symbol.toStringTag);if(!n){var i=gB(r);n=yB(i,Symbol.toStringTag)}Ate[t]=Q7e(n.get)}}});var r9e=function(e){var r=!1;return Ete(Ate,function(n,i){if(!r)try{var o=n(e);o===i&&(r=o)}catch{}}),r},n9e=mB();Pte.exports=function(e){return n9e(e)?!Mte||!(Symbol.toStringTag in e)?t9e(X7e(e),8,-1):r9e(e):!1}});var Fte=H(Dr=>{"use strict";_();var i9e=ste(),o9e=fte(),iu=Tte(),Rte=mB();function fw(t){return t.call.bind(t)}var Ite=typeof BigInt<"u",kte=typeof Symbol<"u",Qc=fw(Object.prototype.toString),s9e=fw(Number.prototype.valueOf),a9e=fw(String.prototype.valueOf),c9e=fw(Boolean.prototype.valueOf);Ite&&(Ote=fw(BigInt.prototype.valueOf));var Ote;kte&&(Bte=fw(Symbol.prototype.valueOf));var Bte;function Bx(t,e){if(typeof t!="object")return!1;try{return e(t),!0}catch{return!1}}Dr.isArgumentsObject=i9e;Dr.isGeneratorFunction=o9e;Dr.isTypedArray=Rte;function f9e(t){return typeof Promise<"u"&&t instanceof Promise||t!==null&&typeof t=="object"&&typeof t.then=="function"&&typeof t.catch=="function"}Dr.isPromise=f9e;function u9e(t){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(t):Rte(t)||Cte(t)}Dr.isArrayBufferView=u9e;function l9e(t){return iu(t)==="Uint8Array"}Dr.isUint8Array=l9e;function d9e(t){return iu(t)==="Uint8ClampedArray"}Dr.isUint8ClampedArray=d9e;function h9e(t){return iu(t)==="Uint16Array"}Dr.isUint16Array=h9e;function p9e(t){return iu(t)==="Uint32Array"}Dr.isUint32Array=p9e;function m9e(t){return iu(t)==="Int8Array"}Dr.isInt8Array=m9e;function y9e(t){return iu(t)==="Int16Array"}Dr.isInt16Array=y9e;function g9e(t){return iu(t)==="Int32Array"}Dr.isInt32Array=g9e;function b9e(t){return iu(t)==="Float32Array"}Dr.isFloat32Array=b9e;function v9e(t){return iu(t)==="Float64Array"}Dr.isFloat64Array=v9e;function w9e(t){return iu(t)==="BigInt64Array"}Dr.isBigInt64Array=w9e;function _9e(t){return iu(t)==="BigUint64Array"}Dr.isBigUint64Array=_9e;function _8(t){return Qc(t)==="[object Map]"}_8.working=typeof Map<"u"&&_8(new Map);function x9e(t){return typeof Map>"u"?!1:_8.working?_8(t):t instanceof Map}Dr.isMap=x9e;function x8(t){return Qc(t)==="[object Set]"}x8.working=typeof Set<"u"&&x8(new Set);function E9e(t){return typeof Set>"u"?!1:x8.working?x8(t):t instanceof Set}Dr.isSet=E9e;function E8(t){return Qc(t)==="[object WeakMap]"}E8.working=typeof WeakMap<"u"&&E8(new WeakMap);function S9e(t){return typeof WeakMap>"u"?!1:E8.working?E8(t):t instanceof WeakMap}Dr.isWeakMap=S9e;function vB(t){return Qc(t)==="[object WeakSet]"}vB.working=typeof WeakSet<"u"&&vB(new WeakSet);function M9e(t){return vB(t)}Dr.isWeakSet=M9e;function S8(t){return Qc(t)==="[object ArrayBuffer]"}S8.working=typeof ArrayBuffer<"u"&&S8(new ArrayBuffer);function Dte(t){return typeof ArrayBuffer>"u"?!1:S8.working?S8(t):t instanceof ArrayBuffer}Dr.isArrayBuffer=Dte;function M8(t){return Qc(t)==="[object DataView]"}M8.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&M8(new DataView(new ArrayBuffer(1),0,1));function Cte(t){return typeof DataView>"u"?!1:M8.working?M8(t):t instanceof DataView}Dr.isDataView=Cte;var bB=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Ox(t){return Qc(t)==="[object SharedArrayBuffer]"}function Nte(t){return typeof bB>"u"?!1:(typeof Ox.working>"u"&&(Ox.working=Ox(new bB)),Ox.working?Ox(t):t instanceof bB)}Dr.isSharedArrayBuffer=Nte;function A9e(t){return Qc(t)==="[object AsyncFunction]"}Dr.isAsyncFunction=A9e;function P9e(t){return Qc(t)==="[object Map Iterator]"}Dr.isMapIterator=P9e;function T9e(t){return Qc(t)==="[object Set Iterator]"}Dr.isSetIterator=T9e;function R9e(t){return Qc(t)==="[object Generator]"}Dr.isGeneratorObject=R9e;function I9e(t){return Qc(t)==="[object WebAssembly.Module]"}Dr.isWebAssemblyCompiledModule=I9e;function jte(t){return Bx(t,s9e)}Dr.isNumberObject=jte;function qte(t){return Bx(t,a9e)}Dr.isStringObject=qte;function $te(t){return Bx(t,c9e)}Dr.isBooleanObject=$te;function Lte(t){return Ite&&Bx(t,Ote)}Dr.isBigIntObject=Lte;function Ute(t){return kte&&Bx(t,Bte)}Dr.isSymbolObject=Ute;function k9e(t){return jte(t)||qte(t)||$te(t)||Lte(t)||Ute(t)}Dr.isBoxedPrimitive=k9e;function O9e(t){return typeof Uint8Array<"u"&&(Dte(t)||Nte(t))}Dr.isAnyArrayBuffer=O9e;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(t){Object.defineProperty(Dr,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})})});var Kte=H((mRt,zte)=>{_();zte.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}});var yy=H(Cr=>{_();var Wte=Object.getOwnPropertyDescriptors||function(e){for(var r=Object.keys(e),n={},i=0;i<r.length;i++)n[r[i]]=Object.getOwnPropertyDescriptor(e,r[i]);return n},B9e=/%[sdj%]/g;Cr.format=function(t){if(!O8(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(Vp(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,i=n.length,o=String(t).replace(B9e,function(a){if(a==="%%")return"%";if(r>=i)return a;switch(a){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}default:return a}}),s=n[r];r<i;s=n[++r])k8(s)||!uw(s)?o+=" "+s:o+=" "+Vp(s);return o};Cr.deprecate=function(t,e){if(typeof O.default<"u"&&O.default.noDeprecation===!0)return t;if(typeof O.default>"u")return function(){return Cr.deprecate(t,e).apply(this,arguments)};var r=!1;function n(){if(!r){if(O.default.throwDeprecation)throw new Error(e);O.default.traceDeprecation?console.trace(e):console.error(e),r=!0}return t.apply(this,arguments)}return n};var A8={},Gte=/^$/;O.default.env.NODE_DEBUG&&(P8=O.default.env.NODE_DEBUG,P8=P8.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),Gte=new RegExp("^"+P8+"$","i"));var P8;Cr.debuglog=function(t){if(t=t.toUpperCase(),!A8[t])if(Gte.test(t)){var e=O.default.pid;A8[t]=function(){var r=Cr.format.apply(Cr,arguments);console.error("%s %d: %s",t,e,r)}}else A8[t]=function(){};return A8[t]};function Vp(t,e){var r={seen:[],stylize:C9e};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),EB(e)?r.showHidden=e:e&&Cr._extend(r,e),my(r.showHidden)&&(r.showHidden=!1),my(r.depth)&&(r.depth=2),my(r.colors)&&(r.colors=!1),my(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=D9e),R8(r,t,r.depth)}Cr.inspect=Vp;Vp.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Vp.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function D9e(t,e){var r=Vp.styles[e];return r?"\x1B["+Vp.colors[r][0]+"m"+t+"\x1B["+Vp.colors[r][1]+"m":t}function C9e(t,e){return t}function N9e(t){var e={};return t.forEach(function(r,n){e[r]=!0}),e}function R8(t,e,r){if(t.customInspect&&e&&T8(e.inspect)&&e.inspect!==Cr.inspect&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(r,t);return O8(n)||(n=R8(t,n,r)),n}var i=j9e(t,e);if(i)return i;var o=Object.keys(e),s=N9e(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(e)),Cx(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return wB(e);if(o.length===0){if(T8(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(Dx(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(I8(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Cx(e))return wB(e)}var u="",m=!1,p=["{","}"];if(Vte(e)&&(m=!0,p=["[","]"]),T8(e)){var b=e.name?": "+e.name:"";u=" [Function"+b+"]"}if(Dx(e)&&(u=" "+RegExp.prototype.toString.call(e)),I8(e)&&(u=" "+Date.prototype.toUTCString.call(e)),Cx(e)&&(u=" "+wB(e)),o.length===0&&(!m||e.length==0))return p[0]+u+p[1];if(r<0)return Dx(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var A;return m?A=q9e(t,e,r,s,o):A=o.map(function(M){return xB(t,e,r,s,M,m)}),t.seen.pop(),$9e(A,u,p)}function j9e(t,e){if(my(e))return t.stylize("undefined","undefined");if(O8(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(Hte(e))return t.stylize(""+e,"number");if(EB(e))return t.stylize(""+e,"boolean");if(k8(e))return t.stylize("null","null")}function wB(t){return"["+Error.prototype.toString.call(t)+"]"}function q9e(t,e,r,n,i){for(var o=[],s=0,a=e.length;s<a;++s)Zte(e,String(s))?o.push(xB(t,e,r,n,String(s),!0)):o.push("");return i.forEach(function(u){u.match(/^\d+$/)||o.push(xB(t,e,r,n,u,!0))}),o}function xB(t,e,r,n,i,o){var s,a,u;if(u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},u.get?u.set?a=t.stylize("[Getter/Setter]","special"):a=t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),Zte(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(k8(r)?a=R8(t,u.value,null):a=R8(t,u.value,r-1),a.indexOf(`
`)>-1&&(o?a=a.split(`
`).map(function(m){return"  "+m}).join(`
`).substr(2):a=`
`+a.split(`
`).map(function(m){return"   "+m}).join(`
`))):a=t.stylize("[Circular]","special")),my(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function $9e(t,e,r){var n=0,i=t.reduce(function(o,s){return n++,s.indexOf(`
`)>=0&&n++,o+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}Cr.types=Fte();function Vte(t){return Array.isArray(t)}Cr.isArray=Vte;function EB(t){return typeof t=="boolean"}Cr.isBoolean=EB;function k8(t){return t===null}Cr.isNull=k8;function L9e(t){return t==null}Cr.isNullOrUndefined=L9e;function Hte(t){return typeof t=="number"}Cr.isNumber=Hte;function O8(t){return typeof t=="string"}Cr.isString=O8;function U9e(t){return typeof t=="symbol"}Cr.isSymbol=U9e;function my(t){return t===void 0}Cr.isUndefined=my;function Dx(t){return uw(t)&&SB(t)==="[object RegExp]"}Cr.isRegExp=Dx;Cr.types.isRegExp=Dx;function uw(t){return typeof t=="object"&&t!==null}Cr.isObject=uw;function I8(t){return uw(t)&&SB(t)==="[object Date]"}Cr.isDate=I8;Cr.types.isDate=I8;function Cx(t){return uw(t)&&(SB(t)==="[object Error]"||t instanceof Error)}Cr.isError=Cx;Cr.types.isNativeError=Cx;function T8(t){return typeof t=="function"}Cr.isFunction=T8;function F9e(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}Cr.isPrimitive=F9e;Cr.isBuffer=Kte();function SB(t){return Object.prototype.toString.call(t)}function _B(t){return t<10?"0"+t.toString(10):t.toString(10)}var z9e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function K9e(){var t=new Date,e=[_B(t.getHours()),_B(t.getMinutes()),_B(t.getSeconds())].join(":");return[t.getDate(),z9e[t.getMonth()],e].join(" ")}Cr.log=function(){console.log("%s - %s",K9e(),Cr.format.apply(Cr,arguments))};Cr.inherits=Rt();Cr._extend=function(t,e){if(!e||!uw(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};function Zte(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var py=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;Cr.promisify=function(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');if(py&&e[py]){var r=e[py];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,py,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var n,i,o=new Promise(function(u,m){n=u,i=m}),s=[],a=0;a<arguments.length;a++)s.push(arguments[a]);s.push(function(u,m){u?i(u):n(m)});try{e.apply(this,s)}catch(u){i(u)}return o}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),py&&Object.defineProperty(r,py,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,Wte(e))};Cr.promisify.custom=py;function W9e(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}function G9e(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,r).then(function(a){O.default.nextTick(s.bind(null,null,a))},function(a){O.default.nextTick(W9e.bind(null,a,s))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,Wte(t)),e}Cr.callbackify=G9e});var tre=H((vRt,ere)=>{"use strict";_();function Jte(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Yte(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Jte(Object(r),!0).forEach(function(n){V9e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jte(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function V9e(t,e,r){return e=Xte(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function H9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qte(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xte(n.key),n)}}function Z9e(t,e,r){return e&&Qte(t.prototype,e),r&&Qte(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xte(t){var e=J9e(t,"string");return typeof e=="symbol"?e:String(e)}function J9e(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Y9e=Ut(),B8=Y9e.Buffer,Q9e=yy(),MB=Q9e.inspect,X9e=MB&&MB.custom||"inspect";function eOe(t,e,r){B8.prototype.copy.call(t,e,r)}ere.exports=function(){function t(){H9e(this,t),this.head=null,this.tail=null,this.length=0}return Z9e(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return B8.alloc(0);for(var n=B8.allocUnsafe(r>>>0),i=this.head,o=0;i;)eOe(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,o=n.data;for(r-=o.length;n=n.next;){var s=n.data,a=r>s.length?s.length:r;if(a===s.length?o+=s:o+=s.slice(0,r),r-=a,r===0){a===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(a));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(r){var n=B8.allocUnsafe(r),i=this.head,o=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var s=i.data,a=r>s.length?s.length:r;if(s.copy(n,n.length-r,0,a),r-=a,r===0){a===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++o}return this.length-=o,n}},{key:X9e,value:function(r,n){return MB(this,Yte(Yte({},n),{},{depth:0,customInspect:!1}))}}]),t}()});var PB=H((_Rt,nre)=>{"use strict";_();function tOe(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,O.default.nextTick(AB,this,t)):O.default.nextTick(AB,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?r._writableState?r._writableState.errorEmitted?O.default.nextTick(D8,r):(r._writableState.errorEmitted=!0,O.default.nextTick(rre,r,o)):O.default.nextTick(rre,r,o):e?(O.default.nextTick(D8,r),e(o)):O.default.nextTick(D8,r)}),this)}function rre(t,e){AB(t,e),D8(t)}function D8(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function rOe(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function AB(t,e){t.emit("error",e)}function nOe(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}nre.exports={destroy:tOe,undestroy:rOe,errorOrDestroy:nOe}});var gy=H((ERt,sre)=>{"use strict";_();function iOe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var ore={};function Xc(t,e,r){r||(r=Error);function n(o,s,a){return typeof e=="string"?e:e(o,s,a)}var i=function(o){iOe(s,o);function s(a,u,m){return o.call(this,n(a,u,m))||this}return s}(r);i.prototype.name=r.name,i.prototype.code=t,ore[t]=i}function ire(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function oOe(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function sOe(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function aOe(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Xc("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Xc("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&oOe(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(sOe(t," argument"))i="The ".concat(t," ").concat(n," ").concat(ire(e,"type"));else{var o=aOe(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(n," ").concat(ire(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);Xc("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Xc("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Xc("ERR_STREAM_PREMATURE_CLOSE","Premature close");Xc("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Xc("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Xc("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Xc("ERR_STREAM_WRITE_AFTER_END","write after end");Xc("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Xc("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Xc("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");sre.exports.codes=ore});var TB=H((MRt,are)=>{"use strict";_();var cOe=gy().codes.ERR_INVALID_OPT_VALUE;function fOe(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function uOe(t,e,r,n){var i=fOe(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?r:"highWaterMark";throw new cOe(o,i)}return Math.floor(i)}return t.objectMode?16:16*1024}are.exports={getHighWaterMark:uOe}});var C8=H((PRt,cre)=>{_();cre.exports=lOe;function lOe(t,e){if(RB("noDeprecation"))return t;var r=!1;function n(){if(!r){if(RB("throwDeprecation"))throw new Error(e);RB("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function RB(t){try{if(!globalThis.localStorage)return!1}catch{return!1}var e=globalThis.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}});var OB=H((RRt,pre)=>{"use strict";_();pre.exports=ki;function ure(t){var e=this;this.next=null,this.entry=null,this.finish=function(){qOe(e,t)}}var lw;ki.WritableState=jx;var dOe={deprecate:C8()},lre=ZO(),j8=Ut().Buffer,hOe=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function pOe(t){return j8.from(t)}function mOe(t){return j8.isBuffer(t)||t instanceof hOe}var kB=PB(),yOe=TB(),gOe=yOe.getHighWaterMark,Hp=gy().codes,bOe=Hp.ERR_INVALID_ARG_TYPE,vOe=Hp.ERR_METHOD_NOT_IMPLEMENTED,wOe=Hp.ERR_MULTIPLE_CALLBACK,_Oe=Hp.ERR_STREAM_CANNOT_PIPE,xOe=Hp.ERR_STREAM_DESTROYED,EOe=Hp.ERR_STREAM_NULL_VALUES,SOe=Hp.ERR_STREAM_WRITE_AFTER_END,MOe=Hp.ERR_UNKNOWN_ENCODING,dw=kB.errorOrDestroy;Rt()(ki,lre);function AOe(){}function jx(t,e,r){lw=lw||by(),t=t||{},typeof r!="boolean"&&(r=e instanceof lw),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=gOe(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){BOe(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new ure(this)}jx.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(jx.prototype,"buffer",{get:dOe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var N8;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(N8=Function.prototype[Symbol.hasInstance],Object.defineProperty(ki,Symbol.hasInstance,{value:function(e){return N8.call(this,e)?!0:this!==ki?!1:e&&e._writableState instanceof jx}})):N8=function(e){return e instanceof this};function ki(t){lw=lw||by();var e=this instanceof lw;if(!e&&!N8.call(ki,this))return new ki(t);this._writableState=new jx(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),lre.call(this)}ki.prototype.pipe=function(){dw(this,new _Oe)};function POe(t,e){var r=new SOe;dw(t,r),O.default.nextTick(e,r)}function TOe(t,e,r,n){var i;return r===null?i=new EOe:typeof r!="string"&&!e.objectMode&&(i=new bOe("chunk",["string","Buffer"],r)),i?(dw(t,i),O.default.nextTick(n,i),!1):!0}ki.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&mOe(t);return o&&!j8.isBuffer(t)&&(t=pOe(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=AOe),n.ending?POe(this,r):(o||TOe(this,n,t,r))&&(n.pendingcb++,i=IOe(this,n,o,t,e,r)),i};ki.prototype.cork=function(){this._writableState.corked++};ki.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&dre(this,t))};ki.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new MOe(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(ki.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ROe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=j8.from(e,r)),e}Object.defineProperty(ki.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function IOe(t,e,r,n,i,o){if(!r){var s=ROe(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var m=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},m?m.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else IB(t,e,!1,a,n,i,o);return u}function IB(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new xOe("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function kOe(t,e,r,n,i){--e.pendingcb,r?(O.default.nextTick(i,n),O.default.nextTick(Nx,t,e),t._writableState.errorEmitted=!0,dw(t,n)):(i(n),t._writableState.errorEmitted=!0,dw(t,n),Nx(t,e))}function OOe(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function BOe(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new wOe;if(OOe(r),e)kOe(t,r,n,e,i);else{var o=hre(r)||t.destroyed;!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&dre(t,r),n?O.default.nextTick(fre,t,r,o,i):fre(t,r,o,i)}}function fre(t,e,r,n){r||DOe(t,e),e.pendingcb--,n(),Nx(t,e)}function DOe(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function dre(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,IB(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new ure(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,m=r.encoding,p=r.callback,b=e.objectMode?1:u.length;if(IB(t,e,!1,b,u,m,p),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}ki.prototype._write=function(t,e,r){r(new vOe("_write()"))};ki.prototype._writev=null;ki.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||jOe(this,n,r),this};Object.defineProperty(ki.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function hre(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function COe(t,e){t._final(function(r){e.pendingcb--,r&&dw(t,r),e.prefinished=!0,t.emit("prefinish"),Nx(t,e)})}function NOe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,O.default.nextTick(COe,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Nx(t,e){var r=hre(e);if(r&&(NOe(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function jOe(t,e,r){e.ending=!0,Nx(t,e),r&&(e.finished?O.default.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function qOe(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(ki.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});ki.prototype.destroy=kB.destroy;ki.prototype._undestroy=kB.undestroy;ki.prototype._destroy=function(t,e){e(t)}});var by=H((kRt,yre)=>{"use strict";_();var $Oe=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};yre.exports=wl;var mre=CB(),DB=OB();Rt()(wl,mre);for(BB=$Oe(DB.prototype),q8=0;q8<BB.length;q8++)$8=BB[q8],wl.prototype[$8]||(wl.prototype[$8]=DB.prototype[$8]);var BB,$8,q8;function wl(t){if(!(this instanceof wl))return new wl(t);mre.call(this,t),DB.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",LOe)))}Object.defineProperty(wl.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(wl.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(wl.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function LOe(){this._writableState.ended||O.default.nextTick(UOe,this)}function UOe(t){t.end()}Object.defineProperty(wl.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var vre=H((NB,bre)=>{_();var L8=Ut(),_l=L8.Buffer;function gre(t,e){for(var r in t)e[r]=t[r]}_l.from&&_l.alloc&&_l.allocUnsafe&&_l.allocUnsafeSlow?bre.exports=L8:(gre(L8,NB),NB.Buffer=vy);function vy(t,e,r){return _l(t,e,r)}vy.prototype=Object.create(_l.prototype);gre(_l,vy);vy.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return _l(t,e,r)};vy.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=_l(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};vy.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return _l(t)};vy.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return L8.SlowBuffer(t)}});var ou=H(_re=>{"use strict";_();var qB=vre().Buffer,wre=qB.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function FOe(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function zOe(t){var e=FOe(t);if(typeof e!="string"&&(qB.isEncoding===wre||!wre(t)))throw new Error("Unknown encoding: "+t);return e||t}_re.StringDecoder=qx;function qx(t){this.encoding=zOe(t);var e;switch(this.encoding){case"utf16le":this.text=ZOe,this.end=JOe,e=4;break;case"utf8":this.fillLast=GOe,e=4;break;case"base64":this.text=YOe,this.end=QOe,e=3;break;default:this.write=XOe,this.end=eBe;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=qB.allocUnsafe(e)}qx.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};qx.prototype.end=HOe;qx.prototype.text=VOe;qx.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function jB(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function KOe(t,e,r){var n=e.length-1;if(n<r)return 0;var i=jB(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=jB(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=jB(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function WOe(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function GOe(t){var e=this.lastTotal-this.lastNeed,r=WOe(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function VOe(t,e){var r=KOe(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function HOe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function ZOe(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function JOe(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function YOe(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function QOe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function XOe(t){return t.toString(this.encoding)}function eBe(t){return t&&t.length?this.write(t):""}});var U8=H((NRt,Sre)=>{"use strict";_();var xre=gy().codes.ERR_STREAM_PREMATURE_CLOSE;function tBe(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function rBe(){}function nBe(t){return t.setHeader&&typeof t.abort=="function"}function Ere(t,e,r){if(typeof e=="function")return Ere(t,null,e);e||(e={}),r=tBe(r||rBe);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,o=function(){t.writable||a()},s=t._writableState&&t._writableState.finished,a=function(){i=!1,s=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,m=function(){n=!1,u=!0,i||r.call(t)},p=function(S){r.call(t,S)},b=function(){var S;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(S=new xre),r.call(t,S);if(i&&!s)return(!t._writableState||!t._writableState.ended)&&(S=new xre),r.call(t,S)},A=function(){t.req.on("finish",a)};return nBe(t)?(t.on("complete",a),t.on("abort",b),t.req?A():t.on("request",A)):i&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",m),t.on("finish",a),e.error!==!1&&t.on("error",p),t.on("close",b),function(){t.removeListener("complete",a),t.removeListener("abort",b),t.removeListener("request",A),t.req&&t.req.removeListener("finish",a),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",a),t.removeListener("end",m),t.removeListener("error",p),t.removeListener("close",b)}}Sre.exports=Ere});var Are=H((qRt,Mre)=>{"use strict";_();var F8;function Zp(t,e,r){return e=iBe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iBe(t){var e=oBe(t,"string");return typeof e=="symbol"?e:String(e)}function oBe(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sBe=U8(),Jp=Symbol("lastResolve"),wy=Symbol("lastReject"),$x=Symbol("error"),z8=Symbol("ended"),_y=Symbol("lastPromise"),$B=Symbol("handlePromise"),xy=Symbol("stream");function Yp(t,e){return{value:t,done:e}}function aBe(t){var e=t[Jp];if(e!==null){var r=t[xy].read();r!==null&&(t[_y]=null,t[Jp]=null,t[wy]=null,e(Yp(r,!1)))}}function cBe(t){O.default.nextTick(aBe,t)}function fBe(t,e){return function(r,n){t.then(function(){if(e[z8]){r(Yp(void 0,!0));return}e[$B](r,n)},n)}}var uBe=Object.getPrototypeOf(function(){}),lBe=Object.setPrototypeOf((F8={get stream(){return this[xy]},next:function(){var e=this,r=this[$x];if(r!==null)return Promise.reject(r);if(this[z8])return Promise.resolve(Yp(void 0,!0));if(this[xy].destroyed)return new Promise(function(s,a){O.default.nextTick(function(){e[$x]?a(e[$x]):s(Yp(void 0,!0))})});var n=this[_y],i;if(n)i=new Promise(fBe(n,this));else{var o=this[xy].read();if(o!==null)return Promise.resolve(Yp(o,!1));i=new Promise(this[$B])}return this[_y]=i,i}},Zp(F8,Symbol.asyncIterator,function(){return this}),Zp(F8,"return",function(){var e=this;return new Promise(function(r,n){e[xy].destroy(null,function(i){if(i){n(i);return}r(Yp(void 0,!0))})})}),F8),uBe),dBe=function(e){var r,n=Object.create(lBe,(r={},Zp(r,xy,{value:e,writable:!0}),Zp(r,Jp,{value:null,writable:!0}),Zp(r,wy,{value:null,writable:!0}),Zp(r,$x,{value:null,writable:!0}),Zp(r,z8,{value:e._readableState.endEmitted,writable:!0}),Zp(r,$B,{value:function(o,s){var a=n[xy].read();a?(n[_y]=null,n[Jp]=null,n[wy]=null,o(Yp(a,!1))):(n[Jp]=o,n[wy]=s)},writable:!0}),r));return n[_y]=null,sBe(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[wy];o!==null&&(n[_y]=null,n[Jp]=null,n[wy]=null,o(i)),n[$x]=i;return}var s=n[Jp];s!==null&&(n[_y]=null,n[Jp]=null,n[wy]=null,s(Yp(void 0,!0))),n[z8]=!0}),e.on("readable",cBe.bind(null,n)),n};Mre.exports=dBe});var Tre=H((LRt,Pre)=>{_();Pre.exports=function(){throw new Error("Readable.from is not available in the browser")}});var CB=H((zRt,qre)=>{"use strict";_();qre.exports=Xr;var hw;Xr.ReadableState=Ore;var FRt=uo().EventEmitter,kre=function(e,r){return e.listeners(r).length},Ux=ZO(),K8=Ut().Buffer,hBe=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function pBe(t){return K8.from(t)}function mBe(t){return K8.isBuffer(t)||t instanceof hBe}var LB=yy(),Ar;LB&&LB.debuglog?Ar=LB.debuglog("stream"):Ar=function(){};var yBe=tre(),VB=PB(),gBe=TB(),bBe=gBe.getHighWaterMark,W8=gy().codes,vBe=W8.ERR_INVALID_ARG_TYPE,wBe=W8.ERR_STREAM_PUSH_AFTER_EOF,_Be=W8.ERR_METHOD_NOT_IMPLEMENTED,xBe=W8.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,pw,UB,FB;Rt()(Xr,Ux);var Lx=VB.errorOrDestroy,zB=["error","close","destroy","pause","resume"];function EBe(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function Ore(t,e,r){hw=hw||by(),t=t||{},typeof r!="boolean"&&(r=e instanceof hw),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=bBe(this,t,"readableHighWaterMark",r),this.buffer=new yBe,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(pw||(pw=ou().StringDecoder),this.decoder=new pw(t.encoding),this.encoding=t.encoding)}function Xr(t){if(hw=hw||by(),!(this instanceof Xr))return new Xr(t);var e=this instanceof hw;this._readableState=new Ore(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Ux.call(this)}Object.defineProperty(Xr.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Xr.prototype.destroy=VB.destroy;Xr.prototype._undestroy=VB.undestroy;Xr.prototype._destroy=function(t,e){e(t)};Xr.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=K8.from(t,e),e=""),n=!0),Bre(this,t,e,!1,n)};Xr.prototype.unshift=function(t){return Bre(this,t,null,!0,!1)};function Bre(t,e,r,n,i){Ar("readableAddChunk",e);var o=t._readableState;if(e===null)o.reading=!1,ABe(t,o);else{var s;if(i||(s=SBe(o,e)),s)Lx(t,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==K8.prototype&&(e=pBe(e)),n)o.endEmitted?Lx(t,new xBe):KB(t,o,e,!0);else if(o.ended)Lx(t,new wBe);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?KB(t,o,e,!1):GB(t,o)):KB(t,o,e,!1)}else n||(o.reading=!1,GB(t,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function KB(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&G8(t)),GB(t,e)}function SBe(t,e){var r;return!mBe(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new vBe("chunk",["string","Buffer","Uint8Array"],e)),r}Xr.prototype.isPaused=function(){return this._readableState.flowing===!1};Xr.prototype.setEncoding=function(t){pw||(pw=ou().StringDecoder);var e=new pw(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var Rre=1073741824;function MBe(t){return t>=Rre?t=Rre:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function Ire(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=MBe(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Xr.prototype.read=function(t){Ar("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Ar("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?WB(this):G8(this),null;if(t=Ire(t,e),t===0&&e.ended)return e.length===0&&WB(this),null;var n=e.needReadable;Ar("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Ar("length less than watermark",n)),e.ended||e.reading?(n=!1,Ar("reading or ended",n)):n&&(Ar("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Ire(r,e)));var i;return t>0?i=Nre(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&WB(this)),i!==null&&this.emit("data",i),i};function ABe(t,e){if(Ar("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?G8(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,Dre(t)))}}function G8(t){var e=t._readableState;Ar("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Ar("emitReadable",e.flowing),e.emittedReadable=!0,O.default.nextTick(Dre,t))}function Dre(t){var e=t._readableState;Ar("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,HB(t)}function GB(t,e){e.readingMore||(e.readingMore=!0,O.default.nextTick(PBe,t,e))}function PBe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(Ar("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Xr.prototype._read=function(t){Lx(this,new _Be("_read()"))};Xr.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Ar("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==O.default.stdout&&t!==O.default.stderr,o=i?a:P;n.endEmitted?O.default.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(k,R){Ar("onunpipe"),k===r&&R&&R.hasUnpiped===!1&&(R.hasUnpiped=!0,p())}function a(){Ar("onend"),t.end()}var u=TBe(r);t.on("drain",u);var m=!1;function p(){Ar("cleanup"),t.removeListener("close",M),t.removeListener("finish",S),t.removeListener("drain",u),t.removeListener("error",A),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",P),r.removeListener("data",b),m=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",b);function b(k){Ar("ondata");var R=t.write(k);Ar("dest.write",R),R===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&jre(n.pipes,t)!==-1)&&!m&&(Ar("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function A(k){Ar("onerror",k),P(),t.removeListener("error",A),kre(t,"error")===0&&Lx(t,k)}EBe(t,"error",A);function M(){t.removeListener("finish",S),P()}t.once("close",M);function S(){Ar("onfinish"),t.removeListener("close",M),P()}t.once("finish",S);function P(){Ar("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Ar("pipe resume"),r.resume()),t};function TBe(t){return function(){var r=t._readableState;Ar("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&kre(t,"data")&&(r.flowing=!0,HB(t))}}Xr.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=jre(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Xr.prototype.on=function(t,e){var r=Ux.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Ar("on readable",n.length,n.reading),n.length?G8(this):n.reading||O.default.nextTick(RBe,this)),r};Xr.prototype.addListener=Xr.prototype.on;Xr.prototype.removeListener=function(t,e){var r=Ux.prototype.removeListener.call(this,t,e);return t==="readable"&&O.default.nextTick(Cre,this),r};Xr.prototype.removeAllListeners=function(t){var e=Ux.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&O.default.nextTick(Cre,this),e};function Cre(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function RBe(t){Ar("readable nexttick read 0"),t.read(0)}Xr.prototype.resume=function(){var t=this._readableState;return t.flowing||(Ar("resume"),t.flowing=!t.readableListening,IBe(this,t)),t.paused=!1,this};function IBe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,O.default.nextTick(kBe,t,e))}function kBe(t,e){Ar("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),HB(t),e.flowing&&!e.reading&&t.read(0)}Xr.prototype.pause=function(){return Ar("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ar("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function HB(t){var e=t._readableState;for(Ar("flow",e.flowing);e.flowing&&t.read()!==null;);}Xr.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(Ar("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(Ar("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var o=0;o<zB.length;o++)t.on(zB[o],this.emit.bind(this,zB[o]));return this._read=function(s){Ar("wrapped _read",s),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(Xr.prototype[Symbol.asyncIterator]=function(){return UB===void 0&&(UB=Are()),UB(this)});Object.defineProperty(Xr.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Xr.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Xr.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Xr._fromList=Nre;Object.defineProperty(Xr.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Nre(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function WB(t){var e=t._readableState;Ar("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,O.default.nextTick(OBe,e,t))}function OBe(t,e){if(Ar("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Xr.from=function(t,e){return FB===void 0&&(FB=Tre()),FB(Xr,t,e)});function jre(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var ZB=H((WRt,Lre)=>{"use strict";_();Lre.exports=ah;var V8=gy().codes,BBe=V8.ERR_METHOD_NOT_IMPLEMENTED,DBe=V8.ERR_MULTIPLE_CALLBACK,CBe=V8.ERR_TRANSFORM_ALREADY_TRANSFORMING,NBe=V8.ERR_TRANSFORM_WITH_LENGTH_0,H8=by();Rt()(ah,H8);function jBe(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new DBe);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function ah(t){if(!(this instanceof ah))return new ah(t);H8.call(this,t),this._transformState={afterTransform:jBe.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",qBe)}function qBe(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){$re(t,e,r)}):$re(this,null,null)}ah.prototype.push=function(t,e){return this._transformState.needTransform=!1,H8.prototype.push.call(this,t,e)};ah.prototype._transform=function(t,e,r){r(new BBe("_transform()"))};ah.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};ah.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};ah.prototype._destroy=function(t,e){H8.prototype._destroy.call(this,t,function(r){e(r)})};function $re(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new NBe;if(t._transformState.transforming)throw new CBe;return t.push(null)}});var zre=H((VRt,Fre)=>{"use strict";_();Fre.exports=Fx;var Ure=ZB();Rt()(Fx,Ure);function Fx(t){if(!(this instanceof Fx))return new Fx(t);Ure.call(this,t)}Fx.prototype._transform=function(t,e,r){r(null,t)}});var Hre=H((ZRt,Vre)=>{"use strict";_();var JB;function $Be(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Gre=gy().codes,LBe=Gre.ERR_MISSING_ARGS,UBe=Gre.ERR_STREAM_DESTROYED;function Kre(t){if(t)throw t}function FBe(t){return t.setHeader&&typeof t.abort=="function"}function zBe(t,e,r,n){n=$Be(n);var i=!1;t.on("close",function(){i=!0}),JB===void 0&&(JB=U8()),JB(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,FBe(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(s||new UBe("pipe"))}}}function Wre(t){t()}function KBe(t,e){return t.pipe(e)}function WBe(t){return!t.length||typeof t[t.length-1]!="function"?Kre:t.pop()}function GBe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=WBe(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new LBe("streams");var i,o=e.map(function(s,a){var u=a<e.length-1,m=a>0;return zBe(s,u,m,function(p){i||(i=p),p&&o.forEach(Wre),!u&&(o.forEach(Wre),n(i))})});return e.reduce(KBe)}Vre.exports=GBe});var Jre=H((ef,Zre)=>{_();ef=Zre.exports=CB();ef.Stream=ef;ef.Readable=ef;ef.Writable=OB();ef.Duplex=by();ef.Transform=ZB();ef.PassThrough=zre();ef.finished=U8();ef.pipeline=Hre()});var YB=H((QRt,Qre)=>{"use strict";_();var Z8=wee().Buffer,Yre=Jre().Transform,VBe=Rt();function HBe(t,e){if(!Z8.isBuffer(t)&&typeof t!="string")throw new TypeError(e+" must be a string or a buffer")}function Qp(t){Yre.call(this),this._block=Z8.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}VBe(Qp,Yre);Qp.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(i){n=i}r(n)};Qp.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(r){e=r}t(e)};Qp.prototype.update=function(t,e){if(HBe(t,"Data"),this._finalized)throw new Error("Digest already called");Z8.isBuffer(t)||(t=Z8.from(t,e));for(var r=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)r[this._blockOffset++]=t[n++];for(var o=0,s=t.length*8;s>0;++o)this._length[o]+=s,s=this._length[o]/4294967296|0,s>0&&(this._length[o]-=4294967296*s);return this};Qp.prototype._update=function(){throw new Error("_update is not implemented")};Qp.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();t!==void 0&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e};Qp.prototype._digest=function(){throw new Error("_digest is not implemented")};Qre.exports=Qp});var Q8=H((eIt,ene)=>{"use strict";_();var ZBe=Rt(),Xre=YB(),JBe=Wr().Buffer,YBe=new Array(16);function J8(){Xre.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}ZBe(J8,Xre);J8.prototype._update=function(){for(var t=YBe,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);var r=this._a,n=this._b,i=this._c,o=this._d;r=Ks(r,n,i,o,t[0],3614090360,7),o=Ks(o,r,n,i,t[1],3905402710,12),i=Ks(i,o,r,n,t[2],606105819,17),n=Ks(n,i,o,r,t[3],3250441966,22),r=Ks(r,n,i,o,t[4],4118548399,7),o=Ks(o,r,n,i,t[5],1200080426,12),i=Ks(i,o,r,n,t[6],2821735955,17),n=Ks(n,i,o,r,t[7],4249261313,22),r=Ks(r,n,i,o,t[8],1770035416,7),o=Ks(o,r,n,i,t[9],2336552879,12),i=Ks(i,o,r,n,t[10],4294925233,17),n=Ks(n,i,o,r,t[11],2304563134,22),r=Ks(r,n,i,o,t[12],1804603682,7),o=Ks(o,r,n,i,t[13],4254626195,12),i=Ks(i,o,r,n,t[14],2792965006,17),n=Ks(n,i,o,r,t[15],1236535329,22),r=Ws(r,n,i,o,t[1],4129170786,5),o=Ws(o,r,n,i,t[6],3225465664,9),i=Ws(i,o,r,n,t[11],643717713,14),n=Ws(n,i,o,r,t[0],3921069994,20),r=Ws(r,n,i,o,t[5],3593408605,5),o=Ws(o,r,n,i,t[10],38016083,9),i=Ws(i,o,r,n,t[15],3634488961,14),n=Ws(n,i,o,r,t[4],3889429448,20),r=Ws(r,n,i,o,t[9],568446438,5),o=Ws(o,r,n,i,t[14],3275163606,9),i=Ws(i,o,r,n,t[3],4107603335,14),n=Ws(n,i,o,r,t[8],1163531501,20),r=Ws(r,n,i,o,t[13],2850285829,5),o=Ws(o,r,n,i,t[2],4243563512,9),i=Ws(i,o,r,n,t[7],1735328473,14),n=Ws(n,i,o,r,t[12],2368359562,20),r=Gs(r,n,i,o,t[5],4294588738,4),o=Gs(o,r,n,i,t[8],2272392833,11),i=Gs(i,o,r,n,t[11],1839030562,16),n=Gs(n,i,o,r,t[14],4259657740,23),r=Gs(r,n,i,o,t[1],2763975236,4),o=Gs(o,r,n,i,t[4],1272893353,11),i=Gs(i,o,r,n,t[7],4139469664,16),n=Gs(n,i,o,r,t[10],3200236656,23),r=Gs(r,n,i,o,t[13],681279174,4),o=Gs(o,r,n,i,t[0],3936430074,11),i=Gs(i,o,r,n,t[3],3572445317,16),n=Gs(n,i,o,r,t[6],76029189,23),r=Gs(r,n,i,o,t[9],3654602809,4),o=Gs(o,r,n,i,t[12],3873151461,11),i=Gs(i,o,r,n,t[15],530742520,16),n=Gs(n,i,o,r,t[2],3299628645,23),r=Vs(r,n,i,o,t[0],4096336452,6),o=Vs(o,r,n,i,t[7],1126891415,10),i=Vs(i,o,r,n,t[14],2878612391,15),n=Vs(n,i,o,r,t[5],4237533241,21),r=Vs(r,n,i,o,t[12],1700485571,6),o=Vs(o,r,n,i,t[3],2399980690,10),i=Vs(i,o,r,n,t[10],4293915773,15),n=Vs(n,i,o,r,t[1],2240044497,21),r=Vs(r,n,i,o,t[8],1873313359,6),o=Vs(o,r,n,i,t[15],4264355552,10),i=Vs(i,o,r,n,t[6],2734768916,15),n=Vs(n,i,o,r,t[13],1309151649,21),r=Vs(r,n,i,o,t[4],4149444226,6),o=Vs(o,r,n,i,t[11],3174756917,10),i=Vs(i,o,r,n,t[2],718787259,15),n=Vs(n,i,o,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0};J8.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=JBe.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};function Y8(t,e){return t<<e|t>>>32-e}function Ks(t,e,r,n,i,o,s){return Y8(t+(e&r|~e&n)+i+o|0,s)+e|0}function Ws(t,e,r,n,i,o,s){return Y8(t+(e&n|r&~n)+i+o|0,s)+e|0}function Gs(t,e,r,n,i,o,s){return Y8(t+(e^r^n)+i+o|0,s)+e|0}function Vs(t,e,r,n,i,o,s){return Y8(t+(r^(e|~n))+i+o|0,s)+e|0}ene.exports=J8});var e5=H((rIt,ane)=>{"use strict";_();var QB=Ut().Buffer,QBe=Rt(),sne=YB(),XBe=new Array(16),zx=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Kx=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Wx=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Gx=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Vx=[0,1518500249,1859775393,2400959708,2840853838],Hx=[1352829926,1548603684,1836072691,2053994217,0];function X8(){sne.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}QBe(X8,sne);X8.prototype._update=function(){for(var t=XBe,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);for(var r=this._a|0,n=this._b|0,i=this._c|0,o=this._d|0,s=this._e|0,a=this._a|0,u=this._b|0,m=this._c|0,p=this._d|0,b=this._e|0,A=0;A<80;A+=1){var M,S;A<16?(M=tne(r,n,i,o,s,t[zx[A]],Vx[0],Wx[A]),S=one(a,u,m,p,b,t[Kx[A]],Hx[0],Gx[A])):A<32?(M=rne(r,n,i,o,s,t[zx[A]],Vx[1],Wx[A]),S=ine(a,u,m,p,b,t[Kx[A]],Hx[1],Gx[A])):A<48?(M=nne(r,n,i,o,s,t[zx[A]],Vx[2],Wx[A]),S=nne(a,u,m,p,b,t[Kx[A]],Hx[2],Gx[A])):A<64?(M=ine(r,n,i,o,s,t[zx[A]],Vx[3],Wx[A]),S=rne(a,u,m,p,b,t[Kx[A]],Hx[3],Gx[A])):(M=one(r,n,i,o,s,t[zx[A]],Vx[4],Wx[A]),S=tne(a,u,m,p,b,t[Kx[A]],Hx[4],Gx[A])),r=s,s=o,o=Ey(i,10),i=n,n=M,a=b,b=p,p=Ey(m,10),m=u,u=S}var P=this._b+i+p|0;this._b=this._c+o+b|0,this._c=this._d+s+a|0,this._d=this._e+r+u|0,this._e=this._a+n+m|0,this._a=P};X8.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=QB.alloc?QB.alloc(20):new QB(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t};function Ey(t,e){return t<<e|t>>>32-e}function tne(t,e,r,n,i,o,s,a){return Ey(t+(e^r^n)+o+s|0,a)+i|0}function rne(t,e,r,n,i,o,s,a){return Ey(t+(e&r|~e&n)+o+s|0,a)+i|0}function nne(t,e,r,n,i,o,s,a){return Ey(t+((e|~r)^n)+o+s|0,a)+i|0}function ine(t,e,r,n,i,o,s,a){return Ey(t+(e&n|r&~n)+o+s|0,a)+i|0}function one(t,e,r,n,i,o,s,a){return Ey(t+(e^(r|~n))+o+s|0,a)+i|0}ane.exports=X8});var Sy=H((iIt,fne)=>{_();var cne=Wr().Buffer;function t5(t,e){this._block=cne.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}t5.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=cne.from(t,e));for(var r=this._block,n=this._blockSize,i=t.length,o=this._len,s=0;s<i;){for(var a=o%n,u=Math.min(i-s,n-a),m=0;m<u;m++)r[a+m]=t[s+m];o+=u,s+=u,o%n===0&&this._update(r)}return this._len+=i,this};t5.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o};t5.prototype._update=function(){throw new Error("_update must be implemented by subclass")};fne.exports=t5});var dne=H((sIt,lne)=>{_();var eDe=Rt(),une=Sy(),tDe=Wr().Buffer,rDe=[1518500249,1859775393,-1894007588,-899497514],nDe=new Array(80);function Zx(){this.init(),this._w=nDe,une.call(this,64,56)}eDe(Zx,une);Zx.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function iDe(t){return t<<5|t>>>27}function oDe(t){return t<<30|t>>>2}function sDe(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}Zx.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,o=this._d|0,s=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=e[a-3]^e[a-8]^e[a-14]^e[a-16];for(var u=0;u<80;++u){var m=~~(u/20),p=iDe(r)+sDe(m,n,i,o)+s+e[u]+rDe[m]|0;s=o,o=i,i=oDe(n),n=r,r=p}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0};Zx.prototype._hash=function(){var t=tDe.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};lne.exports=Zx});var mne=H((cIt,pne)=>{_();var aDe=Rt(),hne=Sy(),cDe=Wr().Buffer,fDe=[1518500249,1859775393,-1894007588,-899497514],uDe=new Array(80);function Jx(){this.init(),this._w=uDe,hne.call(this,64,56)}aDe(Jx,hne);Jx.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function lDe(t){return t<<1|t>>>31}function dDe(t){return t<<5|t>>>27}function hDe(t){return t<<30|t>>>2}function pDe(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}Jx.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,o=this._d|0,s=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=lDe(e[a-3]^e[a-8]^e[a-14]^e[a-16]);for(var u=0;u<80;++u){var m=~~(u/20),p=dDe(r)+pDe(m,n,i,o)+s+e[u]+fDe[m]|0;s=o,o=i,i=hDe(n),n=r,r=p}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0};Jx.prototype._hash=function(){var t=cDe.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};pne.exports=Jx});var XB=H((uIt,gne)=>{_();var mDe=Rt(),yne=Sy(),yDe=Wr().Buffer,gDe=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],bDe=new Array(64);function Yx(){this.init(),this._w=bDe,yne.call(this,64,56)}mDe(Yx,yne);Yx.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function vDe(t,e,r){return r^t&(e^r)}function wDe(t,e,r){return t&e|r&(t|e)}function _De(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function xDe(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function EDe(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function SDe(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}Yx.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,o=this._d|0,s=this._e|0,a=this._f|0,u=this._g|0,m=this._h|0,p=0;p<16;++p)e[p]=t.readInt32BE(p*4);for(;p<64;++p)e[p]=SDe(e[p-2])+e[p-7]+EDe(e[p-15])+e[p-16]|0;for(var b=0;b<64;++b){var A=m+xDe(s)+vDe(s,a,u)+gDe[b]+e[b]|0,M=_De(r)+wDe(r,n,i)|0;m=u,u=a,a=s,s=o+A|0,o=i,i=n,n=r,r=A+M|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0,this._f=a+this._f|0,this._g=u+this._g|0,this._h=m+this._h|0};Yx.prototype._hash=function(){var t=yDe.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};gne.exports=Yx});var vne=H((dIt,bne)=>{_();var MDe=Rt(),ADe=XB(),PDe=Sy(),TDe=Wr().Buffer,RDe=new Array(64);function r5(){this.init(),this._w=RDe,PDe.call(this,64,56)}MDe(r5,ADe);r5.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};r5.prototype._hash=function(){var t=TDe.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};bne.exports=r5});var eD=H((pIt,Ane)=>{_();var IDe=Rt(),Mne=Sy(),kDe=Wr().Buffer,wne=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],ODe=new Array(160);function Qx(){this.init(),this._w=ODe,Mne.call(this,128,112)}IDe(Qx,Mne);Qx.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function _ne(t,e,r){return r^t&(e^r)}function xne(t,e,r){return t&e|r&(t|e)}function Ene(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function Sne(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function BDe(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function DDe(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function CDe(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function NDe(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function Wo(t,e){return t>>>0<e>>>0?1:0}Qx.prototype._update=function(t){for(var e=this._w,r=this._ah|0,n=this._bh|0,i=this._ch|0,o=this._dh|0,s=this._eh|0,a=this._fh|0,u=this._gh|0,m=this._hh|0,p=this._al|0,b=this._bl|0,A=this._cl|0,M=this._dl|0,S=this._el|0,P=this._fl|0,k=this._gl|0,R=this._hl|0,B=0;B<32;B+=2)e[B]=t.readInt32BE(B*4),e[B+1]=t.readInt32BE(B*4+4);for(;B<160;B+=2){var I=e[B-30],q=e[B-15*2+1],$=BDe(I,q),U=DDe(q,I);I=e[B-2*2],q=e[B-2*2+1];var F=CDe(I,q),L=NDe(q,I),W=e[B-7*2],E=e[B-7*2+1],c=e[B-16*2],l=e[B-16*2+1],y=U+E|0,d=$+W+Wo(y,U)|0;y=y+L|0,d=d+F+Wo(y,L)|0,y=y+l|0,d=d+c+Wo(y,l)|0,e[B]=d,e[B+1]=y}for(var h=0;h<160;h+=2){d=e[h],y=e[h+1];var v=xne(r,n,i),x=xne(p,b,A),g=Ene(r,p),f=Ene(p,r),w=Sne(s,S),D=Sne(S,s),T=wne[h],C=wne[h+1],z=_ne(s,a,u),G=_ne(S,P,k),V=R+D|0,Z=m+w+Wo(V,R)|0;V=V+G|0,Z=Z+z+Wo(V,G)|0,V=V+C|0,Z=Z+T+Wo(V,C)|0,V=V+y|0,Z=Z+d+Wo(V,y)|0;var J=f+x|0,X=g+v+Wo(J,f)|0;m=u,R=k,u=a,k=P,a=s,P=S,S=M+V|0,s=o+Z+Wo(S,M)|0,o=i,M=A,i=n,A=b,n=r,b=p,p=V+J|0,r=Z+X+Wo(p,V)|0}this._al=this._al+p|0,this._bl=this._bl+b|0,this._cl=this._cl+A|0,this._dl=this._dl+M|0,this._el=this._el+S|0,this._fl=this._fl+P|0,this._gl=this._gl+k|0,this._hl=this._hl+R|0,this._ah=this._ah+r+Wo(this._al,p)|0,this._bh=this._bh+n+Wo(this._bl,b)|0,this._ch=this._ch+i+Wo(this._cl,A)|0,this._dh=this._dh+o+Wo(this._dl,M)|0,this._eh=this._eh+s+Wo(this._el,S)|0,this._fh=this._fh+a+Wo(this._fl,P)|0,this._gh=this._gh+u+Wo(this._gl,k)|0,this._hh=this._hh+m+Wo(this._hl,R)|0};Qx.prototype._hash=function(){var t=kDe.allocUnsafe(64);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};Ane.exports=Qx});var Tne=H((yIt,Pne)=>{_();var jDe=Rt(),qDe=eD(),$De=Sy(),LDe=Wr().Buffer,UDe=new Array(160);function n5(){this.init(),this._w=UDe,$De.call(this,128,112)}jDe(n5,qDe);n5.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};n5.prototype._hash=function(){var t=LDe.allocUnsafe(48);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};Pne.exports=n5});var i5=H((ch,Rne)=>{_();var ch=Rne.exports=function(e){e=e.toLowerCase();var r=ch[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};ch.sha=dne();ch.sha1=mne();ch.sha224=vne();ch.sha256=XB();ch.sha384=Tne();ch.sha512=eD()});var tD=H((vIt,Ine)=>{_();Ine.exports=uo().EventEmitter});var Nne=H((_It,Cne)=>{"use strict";_();function kne(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function One(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kne(Object(r),!0).forEach(function(n){FDe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kne(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FDe(t,e,r){return e=Dne(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dne(n.key),n)}}function KDe(t,e,r){return e&&Bne(t.prototype,e),r&&Bne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dne(t){var e=WDe(t,"string");return typeof e=="symbol"?e:String(e)}function WDe(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GDe=Ut(),o5=GDe.Buffer,VDe=yy(),rD=VDe.inspect,HDe=rD&&rD.custom||"inspect";function ZDe(t,e,r){o5.prototype.copy.call(t,e,r)}Cne.exports=function(){function t(){zDe(this,t),this.head=null,this.tail=null,this.length=0}return KDe(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return o5.alloc(0);for(var n=o5.allocUnsafe(r>>>0),i=this.head,o=0;i;)ZDe(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,o=n.data;for(r-=o.length;n=n.next;){var s=n.data,a=r>s.length?s.length:r;if(a===s.length?o+=s:o+=s.slice(0,r),r-=a,r===0){a===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(a));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(r){var n=o5.allocUnsafe(r),i=this.head,o=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var s=i.data,a=r>s.length?s.length:r;if(s.copy(n,n.length-r,0,a),r-=a,r===0){a===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++o}return this.length-=o,n}},{key:HDe,value:function(r,n){return rD(this,One(One({},n),{},{depth:0,customInspect:!1}))}}]),t}()});var iD=H((EIt,qne)=>{"use strict";_();function JDe(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,O.default.nextTick(nD,this,t)):O.default.nextTick(nD,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?r._writableState?r._writableState.errorEmitted?O.default.nextTick(s5,r):(r._writableState.errorEmitted=!0,O.default.nextTick(jne,r,o)):O.default.nextTick(jne,r,o):e?(O.default.nextTick(s5,r),e(o)):O.default.nextTick(s5,r)}),this)}function jne(t,e){nD(t,e),s5(t)}function s5(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function YDe(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function nD(t,e){t.emit("error",e)}function QDe(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}qne.exports={destroy:JDe,undestroy:YDe,errorOrDestroy:QDe}});var My=H((MIt,Une)=>{"use strict";_();function XDe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Lne={};function tf(t,e,r){r||(r=Error);function n(o,s,a){return typeof e=="string"?e:e(o,s,a)}var i=function(o){XDe(s,o);function s(a,u,m){return o.call(this,n(a,u,m))||this}return s}(r);i.prototype.name=r.name,i.prototype.code=t,Lne[t]=i}function $ne(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function eCe(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function tCe(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function rCe(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}tf("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);tf("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&eCe(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(tCe(t," argument"))i="The ".concat(t," ").concat(n," ").concat($ne(e,"type"));else{var o=rCe(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(n," ").concat($ne(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);tf("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");tf("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});tf("ERR_STREAM_PREMATURE_CLOSE","Premature close");tf("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});tf("ERR_MULTIPLE_CALLBACK","Callback called multiple times");tf("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");tf("ERR_STREAM_WRITE_AFTER_END","write after end");tf("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);tf("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);tf("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Une.exports.codes=Lne});var oD=H((PIt,Fne)=>{"use strict";_();var nCe=My().codes.ERR_INVALID_OPT_VALUE;function iCe(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function oCe(t,e,r,n){var i=iCe(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?r:"highWaterMark";throw new nCe(o,i)}return Math.floor(i)}return t.objectMode?16:16*1024}Fne.exports={getHighWaterMark:oCe}});var cD=H((RIt,Hne)=>{"use strict";_();Hne.exports=Oi;function Kne(t){var e=this;this.next=null,this.entry=null,this.finish=function(){OCe(e,t)}}var mw;Oi.WritableState=eE;var sCe={deprecate:C8()},Wne=tD(),c5=Ut().Buffer,aCe=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function cCe(t){return c5.from(t)}function fCe(t){return c5.isBuffer(t)||t instanceof aCe}var aD=iD(),uCe=oD(),lCe=uCe.getHighWaterMark,Xp=My().codes,dCe=Xp.ERR_INVALID_ARG_TYPE,hCe=Xp.ERR_METHOD_NOT_IMPLEMENTED,pCe=Xp.ERR_MULTIPLE_CALLBACK,mCe=Xp.ERR_STREAM_CANNOT_PIPE,yCe=Xp.ERR_STREAM_DESTROYED,gCe=Xp.ERR_STREAM_NULL_VALUES,bCe=Xp.ERR_STREAM_WRITE_AFTER_END,vCe=Xp.ERR_UNKNOWN_ENCODING,yw=aD.errorOrDestroy;Rt()(Oi,Wne);function wCe(){}function eE(t,e,r){mw=mw||Ay(),t=t||{},typeof r!="boolean"&&(r=e instanceof mw),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=lCe(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){PCe(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Kne(this)}eE.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(eE.prototype,"buffer",{get:sCe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var a5;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(a5=Function.prototype[Symbol.hasInstance],Object.defineProperty(Oi,Symbol.hasInstance,{value:function(e){return a5.call(this,e)?!0:this!==Oi?!1:e&&e._writableState instanceof eE}})):a5=function(e){return e instanceof this};function Oi(t){mw=mw||Ay();var e=this instanceof mw;if(!e&&!a5.call(Oi,this))return new Oi(t);this._writableState=new eE(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),Wne.call(this)}Oi.prototype.pipe=function(){yw(this,new mCe)};function _Ce(t,e){var r=new bCe;yw(t,r),O.default.nextTick(e,r)}function xCe(t,e,r,n){var i;return r===null?i=new gCe:typeof r!="string"&&!e.objectMode&&(i=new dCe("chunk",["string","Buffer"],r)),i?(yw(t,i),O.default.nextTick(n,i),!1):!0}Oi.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&fCe(t);return o&&!c5.isBuffer(t)&&(t=cCe(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=wCe),n.ending?_Ce(this,r):(o||xCe(this,n,t,r))&&(n.pendingcb++,i=SCe(this,n,o,t,e,r)),i};Oi.prototype.cork=function(){this._writableState.corked++};Oi.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Gne(this,t))};Oi.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new vCe(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(Oi.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ECe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=c5.from(e,r)),e}Object.defineProperty(Oi.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function SCe(t,e,r,n,i,o){if(!r){var s=ECe(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var m=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},m?m.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else sD(t,e,!1,a,n,i,o);return u}function sD(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new yCe("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function MCe(t,e,r,n,i){--e.pendingcb,r?(O.default.nextTick(i,n),O.default.nextTick(Xx,t,e),t._writableState.errorEmitted=!0,yw(t,n)):(i(n),t._writableState.errorEmitted=!0,yw(t,n),Xx(t,e))}function ACe(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function PCe(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new pCe;if(ACe(r),e)MCe(t,r,n,e,i);else{var o=Vne(r)||t.destroyed;!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Gne(t,r),n?O.default.nextTick(zne,t,r,o,i):zne(t,r,o,i)}}function zne(t,e,r,n){r||TCe(t,e),e.pendingcb--,n(),Xx(t,e)}function TCe(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function Gne(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,sD(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new Kne(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,m=r.encoding,p=r.callback,b=e.objectMode?1:u.length;if(sD(t,e,!1,b,u,m,p),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Oi.prototype._write=function(t,e,r){r(new hCe("_write()"))};Oi.prototype._writev=null;Oi.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||kCe(this,n,r),this};Object.defineProperty(Oi.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Vne(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function RCe(t,e){t._final(function(r){e.pendingcb--,r&&yw(t,r),e.prefinished=!0,t.emit("prefinish"),Xx(t,e)})}function ICe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,O.default.nextTick(RCe,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Xx(t,e){var r=Vne(e);if(r&&(ICe(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function kCe(t,e,r){e.ending=!0,Xx(t,e),r&&(e.finished?O.default.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function OCe(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(Oi.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});Oi.prototype.destroy=aD.destroy;Oi.prototype._undestroy=aD.undestroy;Oi.prototype._destroy=function(t,e){e(t)}});var Ay=H((kIt,Jne)=>{"use strict";_();var BCe=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};Jne.exports=xl;var Zne=lD(),uD=cD();Rt()(xl,Zne);for(fD=BCe(uD.prototype),f5=0;f5<fD.length;f5++)u5=fD[f5],xl.prototype[u5]||(xl.prototype[u5]=uD.prototype[u5]);var fD,u5,f5;function xl(t){if(!(this instanceof xl))return new xl(t);Zne.call(this,t),uD.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",DCe)))}Object.defineProperty(xl.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(xl.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(xl.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function DCe(){this._writableState.ended||O.default.nextTick(CCe,this)}function CCe(t){t.end()}Object.defineProperty(xl.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var l5=H((BIt,Xne)=>{"use strict";_();var Yne=My().codes.ERR_STREAM_PREMATURE_CLOSE;function NCe(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function jCe(){}function qCe(t){return t.setHeader&&typeof t.abort=="function"}function Qne(t,e,r){if(typeof e=="function")return Qne(t,null,e);e||(e={}),r=NCe(r||jCe);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,o=function(){t.writable||a()},s=t._writableState&&t._writableState.finished,a=function(){i=!1,s=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,m=function(){n=!1,u=!0,i||r.call(t)},p=function(S){r.call(t,S)},b=function(){var S;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(S=new Yne),r.call(t,S);if(i&&!s)return(!t._writableState||!t._writableState.ended)&&(S=new Yne),r.call(t,S)},A=function(){t.req.on("finish",a)};return qCe(t)?(t.on("complete",a),t.on("abort",b),t.req?A():t.on("request",A)):i&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",m),t.on("finish",a),e.error!==!1&&t.on("error",p),t.on("close",b),function(){t.removeListener("complete",a),t.removeListener("abort",b),t.removeListener("request",A),t.req&&t.req.removeListener("finish",a),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",a),t.removeListener("end",m),t.removeListener("error",p),t.removeListener("close",b)}}Xne.exports=Qne});var tie=H((CIt,eie)=>{"use strict";_();var d5;function e0(t,e,r){return e=$Ce(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Ce(t){var e=LCe(t,"string");return typeof e=="symbol"?e:String(e)}function LCe(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var UCe=l5(),t0=Symbol("lastResolve"),Py=Symbol("lastReject"),tE=Symbol("error"),h5=Symbol("ended"),Ty=Symbol("lastPromise"),dD=Symbol("handlePromise"),Ry=Symbol("stream");function r0(t,e){return{value:t,done:e}}function FCe(t){var e=t[t0];if(e!==null){var r=t[Ry].read();r!==null&&(t[Ty]=null,t[t0]=null,t[Py]=null,e(r0(r,!1)))}}function zCe(t){O.default.nextTick(FCe,t)}function KCe(t,e){return function(r,n){t.then(function(){if(e[h5]){r(r0(void 0,!0));return}e[dD](r,n)},n)}}var WCe=Object.getPrototypeOf(function(){}),GCe=Object.setPrototypeOf((d5={get stream(){return this[Ry]},next:function(){var e=this,r=this[tE];if(r!==null)return Promise.reject(r);if(this[h5])return Promise.resolve(r0(void 0,!0));if(this[Ry].destroyed)return new Promise(function(s,a){O.default.nextTick(function(){e[tE]?a(e[tE]):s(r0(void 0,!0))})});var n=this[Ty],i;if(n)i=new Promise(KCe(n,this));else{var o=this[Ry].read();if(o!==null)return Promise.resolve(r0(o,!1));i=new Promise(this[dD])}return this[Ty]=i,i}},e0(d5,Symbol.asyncIterator,function(){return this}),e0(d5,"return",function(){var e=this;return new Promise(function(r,n){e[Ry].destroy(null,function(i){if(i){n(i);return}r(r0(void 0,!0))})})}),d5),WCe),VCe=function(e){var r,n=Object.create(GCe,(r={},e0(r,Ry,{value:e,writable:!0}),e0(r,t0,{value:null,writable:!0}),e0(r,Py,{value:null,writable:!0}),e0(r,tE,{value:null,writable:!0}),e0(r,h5,{value:e._readableState.endEmitted,writable:!0}),e0(r,dD,{value:function(o,s){var a=n[Ry].read();a?(n[Ty]=null,n[t0]=null,n[Py]=null,o(r0(a,!1))):(n[t0]=o,n[Py]=s)},writable:!0}),r));return n[Ty]=null,UCe(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[Py];o!==null&&(n[Ty]=null,n[t0]=null,n[Py]=null,o(i)),n[tE]=i;return}var s=n[t0];s!==null&&(n[Ty]=null,n[t0]=null,n[Py]=null,s(r0(void 0,!0))),n[h5]=!0}),e.on("readable",zCe.bind(null,n)),n};eie.exports=VCe});var nie=H((jIt,rie)=>{_();rie.exports=function(){throw new Error("Readable.from is not available in the browser")}});var lD=H((LIt,hie)=>{"use strict";_();hie.exports=en;var gw;en.ReadableState=aie;var $It=uo().EventEmitter,sie=function(e,r){return e.listeners(r).length},nE=tD(),p5=Ut().Buffer,HCe=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function ZCe(t){return p5.from(t)}function JCe(t){return p5.isBuffer(t)||t instanceof HCe}var hD=yy(),Pr;hD&&hD.debuglog?Pr=hD.debuglog("stream"):Pr=function(){};var YCe=Nne(),wD=iD(),QCe=oD(),XCe=QCe.getHighWaterMark,m5=My().codes,eNe=m5.ERR_INVALID_ARG_TYPE,tNe=m5.ERR_STREAM_PUSH_AFTER_EOF,rNe=m5.ERR_METHOD_NOT_IMPLEMENTED,nNe=m5.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,bw,pD,mD;Rt()(en,nE);var rE=wD.errorOrDestroy,yD=["error","close","destroy","pause","resume"];function iNe(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function aie(t,e,r){gw=gw||Ay(),t=t||{},typeof r!="boolean"&&(r=e instanceof gw),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=XCe(this,t,"readableHighWaterMark",r),this.buffer=new YCe,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(bw||(bw=ou().StringDecoder),this.decoder=new bw(t.encoding),this.encoding=t.encoding)}function en(t){if(gw=gw||Ay(),!(this instanceof en))return new en(t);var e=this instanceof gw;this._readableState=new aie(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),nE.call(this)}Object.defineProperty(en.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});en.prototype.destroy=wD.destroy;en.prototype._undestroy=wD.undestroy;en.prototype._destroy=function(t,e){e(t)};en.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=p5.from(t,e),e=""),n=!0),cie(this,t,e,!1,n)};en.prototype.unshift=function(t){return cie(this,t,null,!0,!1)};function cie(t,e,r,n,i){Pr("readableAddChunk",e);var o=t._readableState;if(e===null)o.reading=!1,aNe(t,o);else{var s;if(i||(s=oNe(o,e)),s)rE(t,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==p5.prototype&&(e=ZCe(e)),n)o.endEmitted?rE(t,new nNe):gD(t,o,e,!0);else if(o.ended)rE(t,new tNe);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?gD(t,o,e,!1):vD(t,o)):gD(t,o,e,!1)}else n||(o.reading=!1,vD(t,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function gD(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&y5(t)),vD(t,e)}function oNe(t,e){var r;return!JCe(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new eNe("chunk",["string","Buffer","Uint8Array"],e)),r}en.prototype.isPaused=function(){return this._readableState.flowing===!1};en.prototype.setEncoding=function(t){bw||(bw=ou().StringDecoder);var e=new bw(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var iie=1073741824;function sNe(t){return t>=iie?t=iie:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function oie(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=sNe(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}en.prototype.read=function(t){Pr("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Pr("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?bD(this):y5(this),null;if(t=oie(t,e),t===0&&e.ended)return e.length===0&&bD(this),null;var n=e.needReadable;Pr("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Pr("length less than watermark",n)),e.ended||e.reading?(n=!1,Pr("reading or ended",n)):n&&(Pr("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=oie(r,e)));var i;return t>0?i=lie(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&bD(this)),i!==null&&this.emit("data",i),i};function aNe(t,e){if(Pr("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?y5(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,fie(t)))}}function y5(t){var e=t._readableState;Pr("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Pr("emitReadable",e.flowing),e.emittedReadable=!0,O.default.nextTick(fie,t))}function fie(t){var e=t._readableState;Pr("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,_D(t)}function vD(t,e){e.readingMore||(e.readingMore=!0,O.default.nextTick(cNe,t,e))}function cNe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(Pr("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}en.prototype._read=function(t){rE(this,new rNe("_read()"))};en.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Pr("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==O.default.stdout&&t!==O.default.stderr,o=i?a:P;n.endEmitted?O.default.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(k,R){Pr("onunpipe"),k===r&&R&&R.hasUnpiped===!1&&(R.hasUnpiped=!0,p())}function a(){Pr("onend"),t.end()}var u=fNe(r);t.on("drain",u);var m=!1;function p(){Pr("cleanup"),t.removeListener("close",M),t.removeListener("finish",S),t.removeListener("drain",u),t.removeListener("error",A),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",P),r.removeListener("data",b),m=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",b);function b(k){Pr("ondata");var R=t.write(k);Pr("dest.write",R),R===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&die(n.pipes,t)!==-1)&&!m&&(Pr("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function A(k){Pr("onerror",k),P(),t.removeListener("error",A),sie(t,"error")===0&&rE(t,k)}iNe(t,"error",A);function M(){t.removeListener("finish",S),P()}t.once("close",M);function S(){Pr("onfinish"),t.removeListener("close",M),P()}t.once("finish",S);function P(){Pr("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Pr("pipe resume"),r.resume()),t};function fNe(t){return function(){var r=t._readableState;Pr("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&sie(t,"data")&&(r.flowing=!0,_D(t))}}en.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=die(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};en.prototype.on=function(t,e){var r=nE.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Pr("on readable",n.length,n.reading),n.length?y5(this):n.reading||O.default.nextTick(uNe,this)),r};en.prototype.addListener=en.prototype.on;en.prototype.removeListener=function(t,e){var r=nE.prototype.removeListener.call(this,t,e);return t==="readable"&&O.default.nextTick(uie,this),r};en.prototype.removeAllListeners=function(t){var e=nE.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&O.default.nextTick(uie,this),e};function uie(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function uNe(t){Pr("readable nexttick read 0"),t.read(0)}en.prototype.resume=function(){var t=this._readableState;return t.flowing||(Pr("resume"),t.flowing=!t.readableListening,lNe(this,t)),t.paused=!1,this};function lNe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,O.default.nextTick(dNe,t,e))}function dNe(t,e){Pr("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),_D(t),e.flowing&&!e.reading&&t.read(0)}en.prototype.pause=function(){return Pr("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Pr("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function _D(t){var e=t._readableState;for(Pr("flow",e.flowing);e.flowing&&t.read()!==null;);}en.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(Pr("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(Pr("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var o=0;o<yD.length;o++)t.on(yD[o],this.emit.bind(this,yD[o]));return this._read=function(s){Pr("wrapped _read",s),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(en.prototype[Symbol.asyncIterator]=function(){return pD===void 0&&(pD=tie()),pD(this)});Object.defineProperty(en.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(en.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(en.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});en._fromList=lie;Object.defineProperty(en.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function lie(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function bD(t){var e=t._readableState;Pr("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,O.default.nextTick(hNe,e,t))}function hNe(t,e){if(Pr("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(en.from=function(t,e){return mD===void 0&&(mD=nie()),mD(en,t,e)});function die(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var xD=H((FIt,mie)=>{"use strict";_();mie.exports=fh;var g5=My().codes,pNe=g5.ERR_METHOD_NOT_IMPLEMENTED,mNe=g5.ERR_MULTIPLE_CALLBACK,yNe=g5.ERR_TRANSFORM_ALREADY_TRANSFORMING,gNe=g5.ERR_TRANSFORM_WITH_LENGTH_0,b5=Ay();Rt()(fh,b5);function bNe(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new mNe);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function fh(t){if(!(this instanceof fh))return new fh(t);b5.call(this,t),this._transformState={afterTransform:bNe.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",vNe)}function vNe(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){pie(t,e,r)}):pie(this,null,null)}fh.prototype.push=function(t,e){return this._transformState.needTransform=!1,b5.prototype.push.call(this,t,e)};fh.prototype._transform=function(t,e,r){r(new pNe("_transform()"))};fh.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};fh.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};fh.prototype._destroy=function(t,e){b5.prototype._destroy.call(this,t,function(r){e(r)})};function pie(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new gNe;if(t._transformState.transforming)throw new yNe;return t.push(null)}});var bie=H((KIt,gie)=>{"use strict";_();gie.exports=iE;var yie=xD();Rt()(iE,yie);function iE(t){if(!(this instanceof iE))return new iE(t);yie.call(this,t)}iE.prototype._transform=function(t,e,r){r(null,t)}});var Eie=H((GIt,xie)=>{"use strict";_();var ED;function wNe(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var _ie=My().codes,_Ne=_ie.ERR_MISSING_ARGS,xNe=_ie.ERR_STREAM_DESTROYED;function vie(t){if(t)throw t}function ENe(t){return t.setHeader&&typeof t.abort=="function"}function SNe(t,e,r,n){n=wNe(n);var i=!1;t.on("close",function(){i=!0}),ED===void 0&&(ED=l5()),ED(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,ENe(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(s||new xNe("pipe"))}}}function wie(t){t()}function MNe(t,e){return t.pipe(e)}function ANe(t){return!t.length||typeof t[t.length-1]!="function"?vie:t.pop()}function PNe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=ANe(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new _Ne("streams");var i,o=e.map(function(s,a){var u=a<e.length-1,m=a>0;return SNe(s,u,m,function(p){i||(i=p),p&&o.forEach(wie),!u&&(o.forEach(wie),n(i))})});return e.reduce(MNe)}xie.exports=PNe});var Mie=H((HIt,Sie)=>{_();Sie.exports=rf;var SD=uo().EventEmitter,TNe=Rt();TNe(rf,SD);rf.Readable=lD();rf.Writable=cD();rf.Duplex=Ay();rf.Transform=xD();rf.PassThrough=bie();rf.finished=l5();rf.pipeline=Eie();rf.Stream=rf;function rf(){SD.call(this)}rf.prototype.pipe=function(t,e){var r=this;function n(p){t.writable&&t.write(p)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",s),r.on("close",a));var o=!1;function s(){o||(o=!0,t.end())}function a(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function u(p){if(m(),SD.listenerCount(this,"error")===0)throw p}r.on("error",u),t.on("error",u);function m(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",m),r.removeListener("close",m),t.removeListener("close",m)}return r.on("end",m),r.on("close",m),t.on("close",m),t.emit("pipe",r),t}});var uh=H((JIt,Tie)=>{_();var Aie=Wr().Buffer,Pie=Mie().Transform,RNe=ou().StringDecoder,INe=Rt();function su(t){Pie.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}INe(su,Pie);su.prototype.update=function(t,e,r){typeof t=="string"&&(t=Aie.from(t,e));var n=this._update(t);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)};su.prototype.setAutoPadding=function(){};su.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};su.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};su.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};su.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(i){n=i}finally{r(n)}};su.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(r){e=r}t(e)};su.prototype._finalOrDigest=function(t){var e=this.__final()||Aie.alloc(0);return t&&(e=this._toString(e,t,!0)),e};su.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new RNe(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n};Tie.exports=su});var vw=H((QIt,Iie)=>{"use strict";_();var kNe=Rt(),ONe=Q8(),BNe=e5(),DNe=i5(),Rie=uh();function v5(t){Rie.call(this,"digest"),this._hash=t}kNe(v5,Rie);v5.prototype._update=function(t){this._hash.update(t)};v5.prototype._final=function(){return this._hash.digest()};Iie.exports=function(e){return e=e.toLowerCase(),e==="md5"?new ONe:e==="rmd160"||e==="ripemd160"?new BNe:new v5(DNe(e))}});var Bie=H((ekt,Oie)=>{"use strict";_();var CNe=Rt(),Iy=Wr().Buffer,kie=uh(),NNe=Iy.alloc(128),ww=64;function w5(t,e){kie.call(this,"digest"),typeof e=="string"&&(e=Iy.from(e)),this._alg=t,this._key=e,e.length>ww?e=t(e):e.length<ww&&(e=Iy.concat([e,NNe],ww));for(var r=this._ipad=Iy.allocUnsafe(ww),n=this._opad=Iy.allocUnsafe(ww),i=0;i<ww;i++)r[i]=e[i]^54,n[i]=e[i]^92;this._hash=[r]}CNe(w5,kie);w5.prototype._update=function(t){this._hash.push(t)};w5.prototype._final=function(){var t=this._alg(Iy.concat(this._hash));return this._alg(Iy.concat([this._opad,t]))};Oie.exports=w5});var MD=H((rkt,Die)=>{_();var jNe=Q8();Die.exports=function(t){return new jNe().update(t).digest()}});var TD=H((ikt,Nie)=>{"use strict";_();var qNe=Rt(),$Ne=Bie(),Cie=uh(),oE=Wr().Buffer,LNe=MD(),AD=e5(),PD=i5(),UNe=oE.alloc(128);function sE(t,e){Cie.call(this,"digest"),typeof e=="string"&&(e=oE.from(e));var r=t==="sha512"||t==="sha384"?128:64;if(this._alg=t,this._key=e,e.length>r){var n=t==="rmd160"?new AD:PD(t);e=n.update(e).digest()}else e.length<r&&(e=oE.concat([e,UNe],r));for(var i=this._ipad=oE.allocUnsafe(r),o=this._opad=oE.allocUnsafe(r),s=0;s<r;s++)i[s]=e[s]^54,o[s]=e[s]^92;this._hash=t==="rmd160"?new AD:PD(t),this._hash.update(i)}qNe(sE,Cie);sE.prototype._update=function(t){this._hash.update(t)};sE.prototype._final=function(){var t=this._hash.digest(),e=this._alg==="rmd160"?new AD:PD(this._alg);return e.update(this._opad).update(t).digest()};Nie.exports=function(e,r){return e=e.toLowerCase(),e==="rmd160"||e==="ripemd160"?new sE("rmd160",r):e==="md5"?new $Ne(LNe,r):new sE(e,r)}});var RD=H((skt,FNe)=>{FNe.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}});var qie=H((akt,jie)=>{"use strict";_();jie.exports=RD()});var ID=H((fkt,$ie)=>{_();var zNe=Math.pow(2,30)-1;$ie.exports=function(t,e){if(typeof t!="number")throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if(typeof e!="number")throw new TypeError("Key length not a number");if(e<0||e>zNe||e!==e)throw new TypeError("Bad key length")}});var kD=H((lkt,Uie)=>{_();var _5;globalThis.process&&globalThis.process.browser?_5="utf-8":globalThis.process&&globalThis.process.version?(Lie=parseInt(O.default.version.split(".")[0].slice(1),10),_5=Lie>=6?"utf-8":"binary"):_5="utf-8";var Lie;Uie.exports=_5});var BD=H((hkt,Fie)=>{_();var OD=Wr().Buffer;Fie.exports=function(t,e,r){if(OD.isBuffer(t))return t;if(typeof t=="string")return OD.from(t,e);if(ArrayBuffer.isView(t))return OD.from(t.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}});var DD=H((mkt,Gie)=>{_();var KNe=MD(),WNe=e5(),GNe=i5(),ky=Wr().Buffer,VNe=ID(),zie=kD(),Kie=BD(),HNe=ky.alloc(128),x5={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function Wie(t,e,r){var n=ZNe(t),i=t==="sha512"||t==="sha384"?128:64;e.length>i?e=n(e):e.length<i&&(e=ky.concat([e,HNe],i));for(var o=ky.allocUnsafe(i+x5[t]),s=ky.allocUnsafe(i+x5[t]),a=0;a<i;a++)o[a]=e[a]^54,s[a]=e[a]^92;var u=ky.allocUnsafe(i+r+4);o.copy(u,0,0,i),this.ipad1=u,this.ipad2=o,this.opad=s,this.alg=t,this.blocksize=i,this.hash=n,this.size=x5[t]}Wie.prototype.run=function(t,e){t.copy(e,this.blocksize);var r=this.hash(e);return r.copy(this.opad,this.blocksize),this.hash(this.opad)};function ZNe(t){function e(n){return GNe(t).update(n).digest()}function r(n){return new WNe().update(n).digest()}return t==="rmd160"||t==="ripemd160"?r:t==="md5"?KNe:e}function JNe(t,e,r,n,i){VNe(r,n),t=Kie(t,zie,"Password"),e=Kie(e,zie,"Salt"),i=i||"sha1";var o=new Wie(i,t,e.length),s=ky.allocUnsafe(n),a=ky.allocUnsafe(e.length+4);e.copy(a,0,0,e.length);for(var u=0,m=x5[i],p=Math.ceil(n/m),b=1;b<=p;b++){a.writeUInt32BE(b,e.length);for(var A=o.run(a,o.ipad1),M=A,S=1;S<r;S++){M=o.run(M,o.ipad2);for(var P=0;P<m;P++)A[P]^=M[P]}A.copy(s,u),u+=m}return s}Gie.exports=JNe});var Xie=H((gkt,Qie)=>{_();var Jie=Wr().Buffer,YNe=ID(),Vie=kD(),Hie=DD(),Zie=BD(),E5,aE=globalThis.crypto&&globalThis.crypto.subtle,QNe={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},CD=[];function XNe(t){if(globalThis.process&&!globalThis.process.browser||!aE||!aE.importKey||!aE.deriveBits)return Promise.resolve(!1);if(CD[t]!==void 0)return CD[t];E5=E5||Jie.alloc(8);var e=Yie(E5,E5,10,128,t).then(function(){return!0}).catch(function(){return!1});return CD[t]=e,e}var Oy;function ND(){return Oy||(globalThis.process&&globalThis.process.nextTick?Oy=globalThis.process.nextTick:globalThis.queueMicrotask?Oy=globalThis.queueMicrotask:globalThis.setImmediate?Oy=globalThis.setImmediate:Oy=globalThis.setTimeout,Oy)}function Yie(t,e,r,n,i){return aE.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(o){return aE.deriveBits({name:"PBKDF2",salt:e,iterations:r,hash:{name:i}},o,n<<3)}).then(function(o){return Jie.from(o)})}function eje(t,e){t.then(function(r){ND()(function(){e(null,r)})},function(r){ND()(function(){e(r)})})}Qie.exports=function(t,e,r,n,i,o){typeof i=="function"&&(o=i,i=void 0),i=i||"sha1";var s=QNe[i.toLowerCase()];if(!s||typeof globalThis.Promise!="function"){ND()(function(){var a;try{a=Hie(t,e,r,n,i)}catch(u){return o(u)}o(null,a)});return}if(YNe(r,n),t=Zie(t,Vie,"Password"),e=Zie(e,Vie,"Salt"),typeof o!="function")throw new Error("No callback provided to pbkdf2");eje(XNe(s).then(function(a){return a?Yie(t,e,r,n,s):Hie(t,e,r,n,i)}),o)}});var qD=H(jD=>{_();jD.pbkdf2=Xie();jD.pbkdf2Sync=DD()});var $D=H(nf=>{"use strict";_();nf.readUInt32BE=function(e,r){var n=e[0+r]<<24|e[1+r]<<16|e[2+r]<<8|e[3+r];return n>>>0};nf.writeUInt32BE=function(e,r,n){e[0+n]=r>>>24,e[1+n]=r>>>16&255,e[2+n]=r>>>8&255,e[3+n]=r&255};nf.ip=function(e,r,n,i){for(var o=0,s=0,a=6;a>=0;a-=2){for(var u=0;u<=24;u+=8)o<<=1,o|=r>>>u+a&1;for(var u=0;u<=24;u+=8)o<<=1,o|=e>>>u+a&1}for(var a=6;a>=0;a-=2){for(var u=1;u<=25;u+=8)s<<=1,s|=r>>>u+a&1;for(var u=1;u<=25;u+=8)s<<=1,s|=e>>>u+a&1}n[i+0]=o>>>0,n[i+1]=s>>>0};nf.rip=function(e,r,n,i){for(var o=0,s=0,a=0;a<4;a++)for(var u=24;u>=0;u-=8)o<<=1,o|=r>>>u+a&1,o<<=1,o|=e>>>u+a&1;for(var a=4;a<8;a++)for(var u=24;u>=0;u-=8)s<<=1,s|=r>>>u+a&1,s<<=1,s|=e>>>u+a&1;n[i+0]=o>>>0,n[i+1]=s>>>0};nf.pc1=function(e,r,n,i){for(var o=0,s=0,a=7;a>=5;a--){for(var u=0;u<=24;u+=8)o<<=1,o|=r>>u+a&1;for(var u=0;u<=24;u+=8)o<<=1,o|=e>>u+a&1}for(var u=0;u<=24;u+=8)o<<=1,o|=r>>u+a&1;for(var a=1;a<=3;a++){for(var u=0;u<=24;u+=8)s<<=1,s|=r>>u+a&1;for(var u=0;u<=24;u+=8)s<<=1,s|=e>>u+a&1}for(var u=0;u<=24;u+=8)s<<=1,s|=e>>u+a&1;n[i+0]=o>>>0,n[i+1]=s>>>0};nf.r28shl=function(e,r){return e<<r&268435455|e>>>28-r};var S5=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];nf.pc2=function(e,r,n,i){for(var o=0,s=0,a=S5.length>>>1,u=0;u<a;u++)o<<=1,o|=e>>>S5[u]&1;for(var u=a;u<S5.length;u++)s<<=1,s|=r>>>S5[u]&1;n[i+0]=o>>>0,n[i+1]=s>>>0};nf.expand=function(e,r,n){var i=0,o=0;i=(e&1)<<5|e>>>27;for(var s=23;s>=15;s-=4)i<<=6,i|=e>>>s&63;for(var s=11;s>=3;s-=4)o|=e>>>s&63,o<<=6;o|=(e&31)<<1|e>>>31,r[n+0]=i>>>0,r[n+1]=o>>>0};var eoe=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];nf.substitute=function(e,r){for(var n=0,i=0;i<4;i++){var o=e>>>18-i*6&63,s=eoe[i*64+o];n<<=4,n|=s}for(var i=0;i<4;i++){var o=r>>>18-i*6&63,s=eoe[4*64+i*64+o];n<<=4,n|=s}return n>>>0};var toe=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];nf.permute=function(e){for(var r=0,n=0;n<toe.length;n++)r<<=1,r|=e>>>toe[n]&1;return r>>>0};nf.padSplit=function(e,r,n){for(var i=e.toString(2);i.length<r;)i="0"+i;for(var o=[],s=0;s<r;s+=n)o.push(i.slice(s,s+n));return o.join(" ")}});var xc=H((Ekt,noe)=>{_();noe.exports=roe;function roe(t,e){if(!t)throw new Error(e||"Assertion failed")}roe.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)}});var M5=H((Mkt,ioe)=>{"use strict";_();var tje=xc();function of(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=t.padding!==!1}ioe.exports=of;of.prototype._init=function(){};of.prototype.update=function(e){return e.length===0?[]:this.type==="decrypt"?this._updateDecrypt(e):this._updateEncrypt(e)};of.prototype._buffer=function(e,r){for(var n=Math.min(this.buffer.length-this.bufferOff,e.length-r),i=0;i<n;i++)this.buffer[this.bufferOff+i]=e[r+i];return this.bufferOff+=n,n};of.prototype._flushBuffer=function(e,r){return this._update(this.buffer,0,e,r),this.bufferOff=0,this.blockSize};of.prototype._updateEncrypt=function(e){var r=0,n=0,i=(this.bufferOff+e.length)/this.blockSize|0,o=new Array(i*this.blockSize);this.bufferOff!==0&&(r+=this._buffer(e,r),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(o,n)));for(var s=e.length-(e.length-r)%this.blockSize;r<s;r+=this.blockSize)this._update(e,r,o,n),n+=this.blockSize;for(;r<e.length;r++,this.bufferOff++)this.buffer[this.bufferOff]=e[r];return o};of.prototype._updateDecrypt=function(e){for(var r=0,n=0,i=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,o=new Array(i*this.blockSize);i>0;i--)r+=this._buffer(e,r),n+=this._flushBuffer(o,n);return r+=this._buffer(e,r),o};of.prototype.final=function(e){var r;e&&(r=this.update(e));var n;return this.type==="encrypt"?n=this._finalEncrypt():n=this._finalDecrypt(),r?r.concat(n):n};of.prototype._pad=function(e,r){if(r===0)return!1;for(;r<e.length;)e[r++]=0;return!0};of.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e};of.prototype._unpad=function(e){return e};of.prototype._finalDecrypt=function(){tje.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}});var LD=H((Pkt,aoe)=>{"use strict";_();var ooe=xc(),rje=Rt(),Eo=$D(),soe=M5();function nje(){this.tmp=new Array(2),this.keys=null}function El(t){soe.call(this,t);var e=new nje;this._desState=e,this.deriveKeys(e,t.key)}rje(El,soe);aoe.exports=El;El.create=function(e){return new El(e)};var ije=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];El.prototype.deriveKeys=function(e,r){e.keys=new Array(16*2),ooe.equal(r.length,this.blockSize,"Invalid key length");var n=Eo.readUInt32BE(r,0),i=Eo.readUInt32BE(r,4);Eo.pc1(n,i,e.tmp,0),n=e.tmp[0],i=e.tmp[1];for(var o=0;o<e.keys.length;o+=2){var s=ije[o>>>1];n=Eo.r28shl(n,s),i=Eo.r28shl(i,s),Eo.pc2(n,i,e.keys,o)}};El.prototype._update=function(e,r,n,i){var o=this._desState,s=Eo.readUInt32BE(e,r),a=Eo.readUInt32BE(e,r+4);Eo.ip(s,a,o.tmp,0),s=o.tmp[0],a=o.tmp[1],this.type==="encrypt"?this._encrypt(o,s,a,o.tmp,0):this._decrypt(o,s,a,o.tmp,0),s=o.tmp[0],a=o.tmp[1],Eo.writeUInt32BE(n,s,i),Eo.writeUInt32BE(n,a,i+4)};El.prototype._pad=function(e,r){if(this.padding===!1)return!1;for(var n=e.length-r,i=r;i<e.length;i++)e[i]=n;return!0};El.prototype._unpad=function(e){if(this.padding===!1)return e;for(var r=e[e.length-1],n=e.length-r;n<e.length;n++)ooe.equal(e[n],r);return e.slice(0,e.length-r)};El.prototype._encrypt=function(e,r,n,i,o){for(var s=r,a=n,u=0;u<e.keys.length;u+=2){var m=e.keys[u],p=e.keys[u+1];Eo.expand(a,e.tmp,0),m^=e.tmp[0],p^=e.tmp[1];var b=Eo.substitute(m,p),A=Eo.permute(b),M=a;a=(s^A)>>>0,s=M}Eo.rip(a,s,i,o)};El.prototype._decrypt=function(e,r,n,i,o){for(var s=n,a=r,u=e.keys.length-2;u>=0;u-=2){var m=e.keys[u],p=e.keys[u+1];Eo.expand(s,e.tmp,0),m^=e.tmp[0],p^=e.tmp[1];var b=Eo.substitute(m,p),A=Eo.permute(b),M=s;s=(a^A)>>>0,a=M}Eo.rip(s,a,i,o)}});var foe=H(coe=>{"use strict";_();var oje=xc(),sje=Rt(),A5={};function aje(t){oje.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}function cje(t){function e(o){t.call(this,o),this._cbcInit()}sje(e,t);for(var r=Object.keys(A5),n=0;n<r.length;n++){var i=r[n];e.prototype[i]=A5[i]}return e.create=function(s){return new e(s)},e}coe.instantiate=cje;A5._cbcInit=function(){var e=new aje(this.options.iv);this._cbcState=e};A5._update=function(e,r,n,i){var o=this._cbcState,s=this.constructor.super_.prototype,a=o.iv;if(this.type==="encrypt"){for(var u=0;u<this.blockSize;u++)a[u]^=e[r+u];s._update.call(this,a,0,n,i);for(var u=0;u<this.blockSize;u++)a[u]=n[i+u]}else{s._update.call(this,e,r,n,i);for(var u=0;u<this.blockSize;u++)n[i+u]^=a[u];for(var u=0;u<this.blockSize;u++)a[u]=e[r+u]}}});var doe=H((kkt,loe)=>{"use strict";_();var fje=xc(),uje=Rt(),uoe=M5(),n0=LD();function lje(t,e){fje.equal(e.length,24,"Invalid key length");var r=e.slice(0,8),n=e.slice(8,16),i=e.slice(16,24);t==="encrypt"?this.ciphers=[n0.create({type:"encrypt",key:r}),n0.create({type:"decrypt",key:n}),n0.create({type:"encrypt",key:i})]:this.ciphers=[n0.create({type:"decrypt",key:i}),n0.create({type:"encrypt",key:n}),n0.create({type:"decrypt",key:r})]}function By(t){uoe.call(this,t);var e=new lje(this.type,this.options.key);this._edeState=e}uje(By,uoe);loe.exports=By;By.create=function(e){return new By(e)};By.prototype._update=function(e,r,n,i){var o=this._edeState;o.ciphers[0]._update(e,r,n,i),o.ciphers[1]._update(n,i,n,i),o.ciphers[2]._update(n,i,n,i)};By.prototype._pad=n0.prototype._pad;By.prototype._unpad=n0.prototype._unpad});var hoe=H(_w=>{"use strict";_();_w.utils=$D();_w.Cipher=M5();_w.DES=LD();_w.CBC=foe();_w.EDE=doe()});var yoe=H((Ckt,moe)=>{_();var poe=uh(),lh=hoe(),dje=Rt(),Dy=Wr().Buffer,cE={"des-ede3-cbc":lh.CBC.instantiate(lh.EDE),"des-ede3":lh.EDE,"des-ede-cbc":lh.CBC.instantiate(lh.EDE),"des-ede":lh.EDE,"des-cbc":lh.CBC.instantiate(lh.DES),"des-ecb":lh.DES};cE.des=cE["des-cbc"];cE.des3=cE["des-ede3-cbc"];moe.exports=P5;dje(P5,poe);function P5(t){poe.call(this);var e=t.mode.toLowerCase(),r=cE[e],n;t.decrypt?n="decrypt":n="encrypt";var i=t.key;Dy.isBuffer(i)||(i=Dy.from(i)),(e==="des-ede"||e==="des-ede-cbc")&&(i=Dy.concat([i,i.slice(0,8)]));var o=t.iv;Dy.isBuffer(o)||(o=Dy.from(o)),this._des=r.create({key:i,iv:o,type:n})}P5.prototype._update=function(t){return Dy.from(this._des.update(t))};P5.prototype._final=function(){return Dy.from(this._des.final())}});var goe=H(UD=>{_();UD.encrypt=function(t,e){return t._cipher.encryptBlock(e)};UD.decrypt=function(t,e){return t._cipher.decryptBlock(e)}});var xw=H(($kt,boe)=>{_();boe.exports=function(e,r){for(var n=Math.min(e.length,r.length),i=new N.Buffer(n),o=0;o<n;++o)i[o]=e[o]^r[o];return i}});var woe=H(FD=>{_();var voe=xw();FD.encrypt=function(t,e){var r=voe(e,t._prev);return t._prev=t._cipher.encryptBlock(r),t._prev};FD.decrypt=function(t,e){var r=t._prev;t._prev=e;var n=t._cipher.decryptBlock(e);return voe(n,r)}});var Eoe=H(xoe=>{_();var fE=Wr().Buffer,hje=xw();function _oe(t,e,r){var n=e.length,i=hje(e,t._cache);return t._cache=t._cache.slice(n),t._prev=fE.concat([t._prev,r?e:i]),i}xoe.encrypt=function(t,e,r){for(var n=fE.allocUnsafe(0),i;e.length;)if(t._cache.length===0&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=fE.allocUnsafe(0)),t._cache.length<=e.length)i=t._cache.length,n=fE.concat([n,_oe(t,e.slice(0,i),r)]),e=e.slice(i);else{n=fE.concat([n,_oe(t,e,r)]);break}return n}});var Moe=H(Soe=>{_();var zD=Wr().Buffer;function pje(t,e,r){var n=t._cipher.encryptBlock(t._prev),i=n[0]^e;return t._prev=zD.concat([t._prev.slice(1),zD.from([r?e:i])]),i}Soe.encrypt=function(t,e,r){for(var n=e.length,i=zD.allocUnsafe(n),o=-1;++o<n;)i[o]=pje(t,e[o],r);return i}});var Poe=H(Aoe=>{_();var T5=Wr().Buffer;function mje(t,e,r){for(var n,i=-1,o=8,s=0,a,u;++i<o;)n=t._cipher.encryptBlock(t._prev),a=e&1<<7-i?128:0,u=n[0]^a,s+=(u&128)>>i%8,t._prev=yje(t._prev,r?a:u);return s}function yje(t,e){var r=t.length,n=-1,i=T5.allocUnsafe(t.length);for(t=T5.concat([t,T5.from([e])]);++n<r;)i[n]=t[n]<<1|t[n+1]>>7;return i}Aoe.encrypt=function(t,e,r){for(var n=e.length,i=T5.allocUnsafe(n),o=-1;++o<n;)i[o]=mje(t,e[o],r);return i}});var Roe=H(Toe=>{_();var gje=xw();function bje(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}Toe.encrypt=function(t,e){for(;t._cache.length<e.length;)t._cache=N.Buffer.concat([t._cache,bje(t)]);var r=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),gje(e,r)}});var KD=H((Ykt,Ioe)=>{_();function vje(t){for(var e=t.length,r;e--;)if(r=t.readUInt8(e),r===255)t.writeUInt8(0,e);else{r++,t.writeUInt8(r,e);break}}Ioe.exports=vje});var GD=H(Ooe=>{_();var wje=xw(),koe=Wr().Buffer,_je=KD();function xje(t){var e=t._cipher.encryptBlockRaw(t._prev);return _je(t._prev),e}var WD=16;Ooe.encrypt=function(t,e){var r=Math.ceil(e.length/WD),n=t._cache.length;t._cache=koe.concat([t._cache,koe.allocUnsafe(r*WD)]);for(var i=0;i<r;i++){var o=xje(t),s=n+i*WD;t._cache.writeUInt32BE(o[0],s+0),t._cache.writeUInt32BE(o[1],s+4),t._cache.writeUInt32BE(o[2],s+8),t._cache.writeUInt32BE(o[3],s+12)}var a=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),wje(e,a)}});var VD=H((t7t,Eje)=>{Eje.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}});var I5=H((r7t,Boe)=>{_();var Sje={ECB:goe(),CBC:woe(),CFB:Eoe(),CFB8:Moe(),CFB1:Poe(),OFB:Roe(),CTR:GD(),GCM:GD()},R5=VD();for(HD in R5)R5[HD].module=Sje[R5[HD].mode];var HD;Boe.exports=R5});var uE=H((i7t,Coe)=>{_();var k5=Wr().Buffer;function JD(t){k5.isBuffer(t)||(t=k5.from(t));for(var e=t.length/4|0,r=new Array(e),n=0;n<e;n++)r[n]=t.readUInt32BE(n*4);return r}function ZD(t){for(var e=0;e<t.length;t++)t[e]=0}function Doe(t,e,r,n,i){for(var o=r[0],s=r[1],a=r[2],u=r[3],m=t[0]^e[0],p=t[1]^e[1],b=t[2]^e[2],A=t[3]^e[3],M,S,P,k,R=4,B=1;B<i;B++)M=o[m>>>24]^s[p>>>16&255]^a[b>>>8&255]^u[A&255]^e[R++],S=o[p>>>24]^s[b>>>16&255]^a[A>>>8&255]^u[m&255]^e[R++],P=o[b>>>24]^s[A>>>16&255]^a[m>>>8&255]^u[p&255]^e[R++],k=o[A>>>24]^s[m>>>16&255]^a[p>>>8&255]^u[b&255]^e[R++],m=M,p=S,b=P,A=k;return M=(n[m>>>24]<<24|n[p>>>16&255]<<16|n[b>>>8&255]<<8|n[A&255])^e[R++],S=(n[p>>>24]<<24|n[b>>>16&255]<<16|n[A>>>8&255]<<8|n[m&255])^e[R++],P=(n[b>>>24]<<24|n[A>>>16&255]<<16|n[m>>>8&255]<<8|n[p&255])^e[R++],k=(n[A>>>24]<<24|n[m>>>16&255]<<16|n[p>>>8&255]<<8|n[b&255])^e[R++],M=M>>>0,S=S>>>0,P=P>>>0,k=k>>>0,[M,S,P,k]}var Mje=[0,1,2,4,8,16,32,64,128,27,54],lo=function(){for(var t=new Array(256),e=0;e<256;e++)e<128?t[e]=e<<1:t[e]=e<<1^283;for(var r=[],n=[],i=[[],[],[],[]],o=[[],[],[],[]],s=0,a=0,u=0;u<256;++u){var m=a^a<<1^a<<2^a<<3^a<<4;m=m>>>8^m&255^99,r[s]=m,n[m]=s;var p=t[s],b=t[p],A=t[b],M=t[m]*257^m*16843008;i[0][s]=M<<24|M>>>8,i[1][s]=M<<16|M>>>16,i[2][s]=M<<8|M>>>24,i[3][s]=M,M=A*16843009^b*65537^p*257^s*16843008,o[0][m]=M<<24|M>>>8,o[1][m]=M<<16|M>>>16,o[2][m]=M<<8|M>>>24,o[3][m]=M,s===0?s=a=1:(s=p^t[t[t[A^p]]],a^=t[t[a]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:i,INV_SUB_MIX:o}}();function sf(t){this._key=JD(t),this._reset()}sf.blockSize=4*4;sf.keySize=256/8;sf.prototype.blockSize=sf.blockSize;sf.prototype.keySize=sf.keySize;sf.prototype._reset=function(){for(var t=this._key,e=t.length,r=e+6,n=(r+1)*4,i=[],o=0;o<e;o++)i[o]=t[o];for(o=e;o<n;o++){var s=i[o-1];o%e===0?(s=s<<8|s>>>24,s=lo.SBOX[s>>>24]<<24|lo.SBOX[s>>>16&255]<<16|lo.SBOX[s>>>8&255]<<8|lo.SBOX[s&255],s^=Mje[o/e|0]<<24):e>6&&o%e===4&&(s=lo.SBOX[s>>>24]<<24|lo.SBOX[s>>>16&255]<<16|lo.SBOX[s>>>8&255]<<8|lo.SBOX[s&255]),i[o]=i[o-e]^s}for(var a=[],u=0;u<n;u++){var m=n-u,p=i[m-(u%4?0:4)];u<4||m<=4?a[u]=p:a[u]=lo.INV_SUB_MIX[0][lo.SBOX[p>>>24]]^lo.INV_SUB_MIX[1][lo.SBOX[p>>>16&255]]^lo.INV_SUB_MIX[2][lo.SBOX[p>>>8&255]]^lo.INV_SUB_MIX[3][lo.SBOX[p&255]]}this._nRounds=r,this._keySchedule=i,this._invKeySchedule=a};sf.prototype.encryptBlockRaw=function(t){return t=JD(t),Doe(t,this._keySchedule,lo.SUB_MIX,lo.SBOX,this._nRounds)};sf.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),r=k5.allocUnsafe(16);return r.writeUInt32BE(e[0],0),r.writeUInt32BE(e[1],4),r.writeUInt32BE(e[2],8),r.writeUInt32BE(e[3],12),r};sf.prototype.decryptBlock=function(t){t=JD(t);var e=t[1];t[1]=t[3],t[3]=e;var r=Doe(t,this._invKeySchedule,lo.INV_SUB_MIX,lo.INV_SBOX,this._nRounds),n=k5.allocUnsafe(16);return n.writeUInt32BE(r[0],0),n.writeUInt32BE(r[3],4),n.writeUInt32BE(r[2],8),n.writeUInt32BE(r[1],12),n};sf.prototype.scrub=function(){ZD(this._keySchedule),ZD(this._invKeySchedule),ZD(this._key)};Coe.exports.AES=sf});var qoe=H((s7t,joe)=>{_();var Ew=Wr().Buffer,Aje=Ew.alloc(16,0);function Pje(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}function Noe(t){var e=Ew.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function lE(t){this.h=t,this.state=Ew.alloc(16,0),this.cache=Ew.allocUnsafe(0)}lE.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()};lE.prototype._multiply=function(){for(var t=Pje(this.h),e=[0,0,0,0],r,n,i,o=-1;++o<128;){for(n=(this.state[~~(o/8)]&1<<7-o%8)!==0,n&&(e[0]^=t[0],e[1]^=t[1],e[2]^=t[2],e[3]^=t[3]),i=(t[3]&1)!==0,r=3;r>0;r--)t[r]=t[r]>>>1|(t[r-1]&1)<<31;t[0]=t[0]>>>1,i&&(t[0]=t[0]^225<<24)}this.state=Noe(e)};lE.prototype.update=function(t){this.cache=Ew.concat([this.cache,t]);for(var e;this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)};lE.prototype.final=function(t,e){return this.cache.length&&this.ghash(Ew.concat([this.cache,Aje],16)),this.ghash(Noe([0,t,0,e])),this.state};joe.exports=lE});var YD=H((c7t,Uoe)=>{_();var Tje=uE(),Ka=Wr().Buffer,$oe=uh(),Rje=Rt(),Loe=qoe(),Ije=xw(),kje=KD();function Oje(t,e){var r=0;t.length!==e.length&&r++;for(var n=Math.min(t.length,e.length),i=0;i<n;++i)r+=t[i]^e[i];return r}function Bje(t,e,r){if(e.length===12)return t._finID=Ka.concat([e,Ka.from([0,0,0,1])]),Ka.concat([e,Ka.from([0,0,0,2])]);var n=new Loe(r),i=e.length,o=i%16;n.update(e),o&&(o=16-o,n.update(Ka.alloc(o,0))),n.update(Ka.alloc(8,0));var s=i*8,a=Ka.alloc(8);a.writeUIntBE(s,0,8),n.update(a),t._finID=n.state;var u=Ka.from(t._finID);return kje(u),u}function Cy(t,e,r,n){$oe.call(this);var i=Ka.alloc(4,0);this._cipher=new Tje.AES(e);var o=this._cipher.encryptBlock(i);this._ghash=new Loe(o),r=Bje(this,r,o),this._prev=Ka.from(r),this._cache=Ka.allocUnsafe(0),this._secCache=Ka.allocUnsafe(0),this._decrypt=n,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}Rje(Cy,$oe);Cy.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=Ka.alloc(e,0),this._ghash.update(e))}this._called=!0;var r=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(r),this._len+=t.length,r};Cy.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=Ije(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&Oje(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()};Cy.prototype.getAuthTag=function(){if(this._decrypt||!Ka.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag};Cy.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e};Cy.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length};Uoe.exports=Cy});var XD=H((u7t,zoe)=>{_();var Dje=uE(),QD=Wr().Buffer,Foe=uh(),Cje=Rt();function O5(t,e,r,n){Foe.call(this),this._cipher=new Dje.AES(e),this._prev=QD.from(r),this._cache=QD.allocUnsafe(0),this._secCache=QD.allocUnsafe(0),this._decrypt=n,this._mode=t}Cje(O5,Foe);O5.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)};O5.prototype._final=function(){this._cipher.scrub()};zoe.exports=O5});var dE=H((d7t,Koe)=>{_();var Ny=Wr().Buffer,Nje=Q8();function jje(t,e,r,n){if(Ny.isBuffer(t)||(t=Ny.from(t,"binary")),e&&(Ny.isBuffer(e)||(e=Ny.from(e,"binary")),e.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var i=r/8,o=Ny.alloc(i),s=Ny.alloc(n||0),a=Ny.alloc(0);i>0||n>0;){var u=new Nje;u.update(a),u.update(t),e&&u.update(e),a=u.digest();var m=0;if(i>0){var p=o.length-i;m=Math.min(i,a.length),a.copy(o,p,0,m),i-=m}if(m<a.length&&n>0){var b=s.length-n,A=Math.min(n,a.length-m);a.copy(s,b,m,m+A),n-=A}}return a.fill(0),{key:o,iv:s}}Koe.exports=jje});var Hoe=H(eC=>{_();var Woe=I5(),qje=YD(),dh=Wr().Buffer,$je=XD(),Goe=uh(),Lje=uE(),Uje=dE(),Fje=Rt();function hE(t,e,r){Goe.call(this),this._cache=new B5,this._cipher=new Lje.AES(e),this._prev=dh.from(r),this._mode=t,this._autopadding=!0}Fje(hE,Goe);hE.prototype._update=function(t){this._cache.add(t);for(var e,r,n=[];e=this._cache.get();)r=this._mode.encrypt(this,e),n.push(r);return dh.concat(n)};var zje=dh.alloc(16,16);hE.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(zje))throw this._cipher.scrub(),new Error("data not multiple of block length")};hE.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this};function B5(){this.cache=dh.allocUnsafe(0)}B5.prototype.add=function(t){this.cache=dh.concat([this.cache,t])};B5.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null};B5.prototype.flush=function(){for(var t=16-this.cache.length,e=dh.allocUnsafe(t),r=-1;++r<t;)e.writeUInt8(t,r);return dh.concat([this.cache,e])};function Voe(t,e,r){var n=Woe[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");if(typeof e=="string"&&(e=dh.from(e)),e.length!==n.key/8)throw new TypeError("invalid key length "+e.length);if(typeof r=="string"&&(r=dh.from(r)),n.mode!=="GCM"&&r.length!==n.iv)throw new TypeError("invalid iv length "+r.length);return n.type==="stream"?new $je(n.module,e,r):n.type==="auth"?new qje(n.module,e,r):new hE(n.module,e,r)}function Kje(t,e){var r=Woe[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=Uje(e,!1,r.key,r.iv);return Voe(t,n.key,n.iv)}eC.createCipheriv=Voe;eC.createCipher=Kje});var Qoe=H(tC=>{_();var Wje=YD(),Sw=Wr().Buffer,Zoe=I5(),Gje=XD(),Joe=uh(),Vje=uE(),Hje=dE(),Zje=Rt();function pE(t,e,r){Joe.call(this),this._cache=new D5,this._last=void 0,this._cipher=new Vje.AES(e),this._prev=Sw.from(r),this._mode=t,this._autopadding=!0}Zje(pE,Joe);pE.prototype._update=function(t){this._cache.add(t);for(var e,r,n=[];e=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,e),n.push(r);return Sw.concat(n)};pE.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return Jje(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")};pE.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this};function D5(){this.cache=Sw.allocUnsafe(0)}D5.prototype.add=function(t){this.cache=Sw.concat([this.cache,t])};D5.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null};D5.prototype.flush=function(){if(this.cache.length)return this.cache};function Jje(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");for(var r=-1;++r<e;)if(t[r+(16-e)]!==e)throw new Error("unable to decrypt data");if(e!==16)return t.slice(0,16-e)}function Yoe(t,e,r){var n=Zoe[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");if(typeof r=="string"&&(r=Sw.from(r)),n.mode!=="GCM"&&r.length!==n.iv)throw new TypeError("invalid iv length "+r.length);if(typeof e=="string"&&(e=Sw.from(e)),e.length!==n.key/8)throw new TypeError("invalid key length "+e.length);return n.type==="stream"?new Gje(n.module,e,r,!0):n.type==="auth"?new Wje(n.module,e,r,!0):new pE(n.module,e,r)}function Yje(t,e){var r=Zoe[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=Hje(e,!1,r.key,r.iv);return Yoe(t,n.key,n.iv)}tC.createDecipher=Yje;tC.createDecipheriv=Yoe});var C5=H(au=>{_();var Xoe=Hoe(),ese=Qoe(),Qje=VD();function Xje(){return Object.keys(Qje)}au.createCipher=au.Cipher=Xoe.createCipher;au.createCipheriv=au.Cipheriv=Xoe.createCipheriv;au.createDecipher=au.Decipher=ese.createDecipher;au.createDecipheriv=au.Decipheriv=ese.createDecipheriv;au.listCiphers=au.getCiphers=Xje});var tse=H(hh=>{_();hh["des-ecb"]={key:8,iv:0};hh["des-cbc"]=hh.des={key:8,iv:8};hh["des-ede3-cbc"]=hh.des3={key:24,iv:8};hh["des-ede3"]={key:24,iv:0};hh["des-ede-cbc"]={key:16,iv:8};hh["des-ede"]={key:16,iv:0}});var sse=H(cu=>{_();var rse=yoe(),rC=C5(),i0=I5(),ph=tse(),nse=dE();function eqe(t,e){t=t.toLowerCase();var r,n;if(i0[t])r=i0[t].key,n=i0[t].iv;else if(ph[t])r=ph[t].key*8,n=ph[t].iv;else throw new TypeError("invalid suite type");var i=nse(e,!1,r,n);return ise(t,i.key,i.iv)}function tqe(t,e){t=t.toLowerCase();var r,n;if(i0[t])r=i0[t].key,n=i0[t].iv;else if(ph[t])r=ph[t].key*8,n=ph[t].iv;else throw new TypeError("invalid suite type");var i=nse(e,!1,r,n);return ose(t,i.key,i.iv)}function ise(t,e,r){if(t=t.toLowerCase(),i0[t])return rC.createCipheriv(t,e,r);if(ph[t])return new rse({key:e,iv:r,mode:t});throw new TypeError("invalid suite type")}function ose(t,e,r){if(t=t.toLowerCase(),i0[t])return rC.createDecipheriv(t,e,r);if(ph[t])return new rse({key:e,iv:r,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}function rqe(){return Object.keys(ph).concat(rC.getCiphers())}cu.createCipher=cu.Cipher=eqe;cu.createCipheriv=cu.Cipheriv=ise;cu.createDecipher=cu.Decipher=tqe;cu.createDecipheriv=cu.Decipheriv=ose;cu.listCiphers=cu.getCiphers=rqe});var iC=H((ase,nC)=>{_();(function(t,e){"use strict";function r(E,c){if(!E)throw new Error(c||"Assertion failed")}function n(E,c){E.super_=c;var l=function(){};l.prototype=c.prototype,E.prototype=new l,E.prototype.constructor=E}function i(E,c,l){if(i.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((c==="le"||c==="be")&&(l=c,c=10),this._init(E||0,c||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ut().Buffer}catch{}i.isBN=function(c){return c instanceof i?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===i.wordSize&&Array.isArray(c.words)},i.max=function(c,l){return c.cmp(l)>0?c:l},i.min=function(c,l){return c.cmp(l)<0?c:l},i.prototype._init=function(c,l,y){if(typeof c=="number")return this._initNumber(c,l,y);if(typeof c=="object")return this._initArray(c,l,y);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),c=c.toString().replace(/\s+/g,"");var d=0;c[0]==="-"&&(d++,this.negative=1),d<c.length&&(l===16?this._parseHex(c,d,y):(this._parseBase(c,l,d),y==="le"&&this._initArray(this.toArray(),l,y)))},i.prototype._initNumber=function(c,l,y){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(r(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),l,y)},i.prototype._initArray=function(c,l,y){if(r(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var h,v,x=0;if(y==="be")for(d=c.length-1,h=0;d>=0;d-=3)v=c[d]|c[d-1]<<8|c[d-2]<<16,this.words[h]|=v<<x&67108863,this.words[h+1]=v>>>26-x&67108863,x+=24,x>=26&&(x-=26,h++);else if(y==="le")for(d=0,h=0;d<c.length;d+=3)v=c[d]|c[d+1]<<8|c[d+2]<<16,this.words[h]|=v<<x&67108863,this.words[h+1]=v>>>26-x&67108863,x+=24,x>=26&&(x-=26,h++);return this.strip()};function s(E,c){var l=E.charCodeAt(c);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function a(E,c,l){var y=s(E,l);return l-1>=c&&(y|=s(E,l-1)<<4),y}i.prototype._parseHex=function(c,l,y){this.length=Math.ceil((c.length-l)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var h=0,v=0,x;if(y==="be")for(d=c.length-1;d>=l;d-=2)x=a(c,l,d)<<h,this.words[v]|=x&67108863,h>=18?(h-=18,v+=1,this.words[v]|=x>>>26):h+=8;else{var g=c.length-l;for(d=g%2===0?l+1:l;d<c.length;d+=2)x=a(c,l,d)<<h,this.words[v]|=x&67108863,h>=18?(h-=18,v+=1,this.words[v]|=x>>>26):h+=8}this.strip()};function u(E,c,l,y){for(var d=0,h=Math.min(E.length,l),v=c;v<h;v++){var x=E.charCodeAt(v)-48;d*=y,x>=49?d+=x-49+10:x>=17?d+=x-17+10:d+=x}return d}i.prototype._parseBase=function(c,l,y){this.words=[0],this.length=1;for(var d=0,h=1;h<=67108863;h*=l)d++;d--,h=h/l|0;for(var v=c.length-y,x=v%d,g=Math.min(v,v-x)+y,f=0,w=y;w<g;w+=d)f=u(c,w,w+d,l),this.imuln(h),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(x!==0){var D=1;for(f=u(c,w,c.length,l),w=0;w<x;w++)D*=l;this.imuln(D),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this.strip()},i.prototype.copy=function(c){c.words=new Array(this.length);for(var l=0;l<this.length;l++)c.words[l]=this.words[l];c.length=this.length,c.negative=this.negative,c.red=this.red},i.prototype.clone=function(){var c=new i(null);return this.copy(c),c},i.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(c,l){c=c||10,l=l|0||1;var y;if(c===16||c==="hex"){y="";for(var d=0,h=0,v=0;v<this.length;v++){var x=this.words[v],g=((x<<d|h)&16777215).toString(16);h=x>>>24-d&16777215,h!==0||v!==this.length-1?y=m[6-g.length]+g+y:y=g+y,d+=2,d>=26&&(d-=26,v--)}for(h!==0&&(y=h.toString(16)+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(c===(c|0)&&c>=2&&c<=36){var f=p[c],w=b[c];y="";var D=this.clone();for(D.negative=0;!D.isZero();){var T=D.modn(w).toString(c);D=D.idivn(w),D.isZero()?y=T+y:y=m[f-T.length]+T+y}for(this.isZero()&&(y="0"+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(c,l){return r(typeof o<"u"),this.toArrayLike(o,c,l)},i.prototype.toArray=function(c,l){return this.toArrayLike(Array,c,l)},i.prototype.toArrayLike=function(c,l,y){var d=this.byteLength(),h=y||Math.max(1,d);r(d<=h,"byte array longer than desired length"),r(h>0,"Requested array length <= 0"),this.strip();var v=l==="le",x=new c(h),g,f,w=this.clone();if(v){for(f=0;!w.isZero();f++)g=w.andln(255),w.iushrn(8),x[f]=g;for(;f<h;f++)x[f]=0}else{for(f=0;f<h-d;f++)x[f]=0;for(f=0;!w.isZero();f++)g=w.andln(255),w.iushrn(8),x[h-f-1]=g}return x},Math.clz32?i.prototype._countBits=function(c){return 32-Math.clz32(c)}:i.prototype._countBits=function(c){var l=c,y=0;return l>=4096&&(y+=13,l>>>=13),l>=64&&(y+=7,l>>>=7),l>=8&&(y+=4,l>>>=4),l>=2&&(y+=2,l>>>=2),y+l},i.prototype._zeroBits=function(c){if(c===0)return 26;var l=c,y=0;return l&8191||(y+=13,l>>>=13),l&127||(y+=7,l>>>=7),l&15||(y+=4,l>>>=4),l&3||(y+=2,l>>>=2),l&1||y++,y},i.prototype.bitLength=function(){var c=this.words[this.length-1],l=this._countBits(c);return(this.length-1)*26+l};function A(E){for(var c=new Array(E.bitLength()),l=0;l<c.length;l++){var y=l/26|0,d=l%26;c[l]=(E.words[y]&1<<d)>>>d}return c}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,l=0;l<this.length;l++){var y=this._zeroBits(this.words[l]);if(c+=y,y!==26)break}return c},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},i.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var l=0;l<c.length;l++)this.words[l]=this.words[l]|c.words[l];return this.strip()},i.prototype.ior=function(c){return r((this.negative|c.negative)===0),this.iuor(c)},i.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},i.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},i.prototype.iuand=function(c){var l;this.length>c.length?l=c:l=this;for(var y=0;y<l.length;y++)this.words[y]=this.words[y]&c.words[y];return this.length=l.length,this.strip()},i.prototype.iand=function(c){return r((this.negative|c.negative)===0),this.iuand(c)},i.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},i.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},i.prototype.iuxor=function(c){var l,y;this.length>c.length?(l=this,y=c):(l=c,y=this);for(var d=0;d<y.length;d++)this.words[d]=l.words[d]^y.words[d];if(this!==l)for(;d<l.length;d++)this.words[d]=l.words[d];return this.length=l.length,this.strip()},i.prototype.ixor=function(c){return r((this.negative|c.negative)===0),this.iuxor(c)},i.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},i.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},i.prototype.inotn=function(c){r(typeof c=="number"&&c>=0);var l=Math.ceil(c/26)|0,y=c%26;this._expand(l),y>0&&l--;for(var d=0;d<l;d++)this.words[d]=~this.words[d]&67108863;return y>0&&(this.words[d]=~this.words[d]&67108863>>26-y),this.strip()},i.prototype.notn=function(c){return this.clone().inotn(c)},i.prototype.setn=function(c,l){r(typeof c=="number"&&c>=0);var y=c/26|0,d=c%26;return this._expand(y+1),l?this.words[y]=this.words[y]|1<<d:this.words[y]=this.words[y]&~(1<<d),this.strip()},i.prototype.iadd=function(c){var l;if(this.negative!==0&&c.negative===0)return this.negative=0,l=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,l=this.isub(c),c.negative=1,l._normSign();var y,d;this.length>c.length?(y=this,d=c):(y=c,d=this);for(var h=0,v=0;v<d.length;v++)l=(y.words[v]|0)+(d.words[v]|0)+h,this.words[v]=l&67108863,h=l>>>26;for(;h!==0&&v<y.length;v++)l=(y.words[v]|0)+h,this.words[v]=l&67108863,h=l>>>26;if(this.length=y.length,h!==0)this.words[this.length]=h,this.length++;else if(y!==this)for(;v<y.length;v++)this.words[v]=y.words[v];return this},i.prototype.add=function(c){var l;return c.negative!==0&&this.negative===0?(c.negative=0,l=this.sub(c),c.negative^=1,l):c.negative===0&&this.negative!==0?(this.negative=0,l=c.sub(this),this.negative=1,l):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},i.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var l=this.iadd(c);return c.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var y=this.cmp(c);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var d,h;y>0?(d=this,h=c):(d=c,h=this);for(var v=0,x=0;x<h.length;x++)l=(d.words[x]|0)-(h.words[x]|0)+v,v=l>>26,this.words[x]=l&67108863;for(;v!==0&&x<d.length;x++)l=(d.words[x]|0)+v,v=l>>26,this.words[x]=l&67108863;if(v===0&&x<d.length&&d!==this)for(;x<d.length;x++)this.words[x]=d.words[x];return this.length=Math.max(this.length,x),d!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(c){return this.clone().isub(c)};function M(E,c,l){l.negative=c.negative^E.negative;var y=E.length+c.length|0;l.length=y,y=y-1|0;var d=E.words[0]|0,h=c.words[0]|0,v=d*h,x=v&67108863,g=v/67108864|0;l.words[0]=x;for(var f=1;f<y;f++){for(var w=g>>>26,D=g&67108863,T=Math.min(f,c.length-1),C=Math.max(0,f-E.length+1);C<=T;C++){var z=f-C|0;d=E.words[z]|0,h=c.words[C]|0,v=d*h+D,w+=v/67108864|0,D=v&67108863}l.words[f]=D|0,g=w|0}return g!==0?l.words[f]=g|0:l.length--,l.strip()}var S=function(c,l,y){var d=c.words,h=l.words,v=y.words,x=0,g,f,w,D=d[0]|0,T=D&8191,C=D>>>13,z=d[1]|0,G=z&8191,V=z>>>13,Z=d[2]|0,J=Z&8191,X=Z>>>13,se=d[3]|0,Q=se&8191,te=se>>>13,de=d[4]|0,ie=de&8191,ae=de>>>13,fe=d[5]|0,oe=fe&8191,ce=fe>>>13,Ke=d[6]|0,pe=Ke&8191,Me=Ke>>>13,it=d[7]|0,we=it&8191,Ae=it>>>13,er=d[8]|0,me=er&8191,he=er>>>13,mt=d[9]|0,ye=mt&8191,le=mt>>>13,kt=h[0]|0,_e=kt&8191,Ee=kt>>>13,Ht=h[1]|0,Pe=Ht&8191,Se=Ht>>>13,Pn=h[2]|0,Te=Pn&8191,Ie=Pn>>>13,_i=h[3]|0,Re=_i&8191,Ce=_i>>>13,Tn=h[4]|0,Ne=Tn&8191,Oe=Tn>>>13,xi=h[5]|0,ke=xi&8191,Be=xi>>>13,Ei=h[6]|0,De=Ei&8191,je=Ei>>>13,si=h[7]|0,ee=si&8191,Y=si>>>13,ue=h[8]|0,re=ue&8191,ne=ue>>>13,ze=h[9]|0,ge=ze&8191,ve=ze>>>13;y.negative=c.negative^l.negative,y.length=19,g=Math.imul(T,_e),f=Math.imul(T,Ee),f=f+Math.imul(C,_e)|0,w=Math.imul(C,Ee);var gt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(gt>>>26)|0,gt&=67108863,g=Math.imul(G,_e),f=Math.imul(G,Ee),f=f+Math.imul(V,_e)|0,w=Math.imul(V,Ee),g=g+Math.imul(T,Pe)|0,f=f+Math.imul(T,Se)|0,f=f+Math.imul(C,Pe)|0,w=w+Math.imul(C,Se)|0;var ot=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ot>>>26)|0,ot&=67108863,g=Math.imul(J,_e),f=Math.imul(J,Ee),f=f+Math.imul(X,_e)|0,w=Math.imul(X,Ee),g=g+Math.imul(G,Pe)|0,f=f+Math.imul(G,Se)|0,f=f+Math.imul(V,Pe)|0,w=w+Math.imul(V,Se)|0,g=g+Math.imul(T,Te)|0,f=f+Math.imul(T,Ie)|0,f=f+Math.imul(C,Te)|0,w=w+Math.imul(C,Ie)|0;var Ge=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,g=Math.imul(Q,_e),f=Math.imul(Q,Ee),f=f+Math.imul(te,_e)|0,w=Math.imul(te,Ee),g=g+Math.imul(J,Pe)|0,f=f+Math.imul(J,Se)|0,f=f+Math.imul(X,Pe)|0,w=w+Math.imul(X,Se)|0,g=g+Math.imul(G,Te)|0,f=f+Math.imul(G,Ie)|0,f=f+Math.imul(V,Te)|0,w=w+Math.imul(V,Ie)|0,g=g+Math.imul(T,Re)|0,f=f+Math.imul(T,Ce)|0,f=f+Math.imul(C,Re)|0,w=w+Math.imul(C,Ce)|0;var Pt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,g=Math.imul(ie,_e),f=Math.imul(ie,Ee),f=f+Math.imul(ae,_e)|0,w=Math.imul(ae,Ee),g=g+Math.imul(Q,Pe)|0,f=f+Math.imul(Q,Se)|0,f=f+Math.imul(te,Pe)|0,w=w+Math.imul(te,Se)|0,g=g+Math.imul(J,Te)|0,f=f+Math.imul(J,Ie)|0,f=f+Math.imul(X,Te)|0,w=w+Math.imul(X,Ie)|0,g=g+Math.imul(G,Re)|0,f=f+Math.imul(G,Ce)|0,f=f+Math.imul(V,Re)|0,w=w+Math.imul(V,Ce)|0,g=g+Math.imul(T,Ne)|0,f=f+Math.imul(T,Oe)|0,f=f+Math.imul(C,Ne)|0,w=w+Math.imul(C,Oe)|0;var Lt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,g=Math.imul(oe,_e),f=Math.imul(oe,Ee),f=f+Math.imul(ce,_e)|0,w=Math.imul(ce,Ee),g=g+Math.imul(ie,Pe)|0,f=f+Math.imul(ie,Se)|0,f=f+Math.imul(ae,Pe)|0,w=w+Math.imul(ae,Se)|0,g=g+Math.imul(Q,Te)|0,f=f+Math.imul(Q,Ie)|0,f=f+Math.imul(te,Te)|0,w=w+Math.imul(te,Ie)|0,g=g+Math.imul(J,Re)|0,f=f+Math.imul(J,Ce)|0,f=f+Math.imul(X,Re)|0,w=w+Math.imul(X,Ce)|0,g=g+Math.imul(G,Ne)|0,f=f+Math.imul(G,Oe)|0,f=f+Math.imul(V,Ne)|0,w=w+Math.imul(V,Oe)|0,g=g+Math.imul(T,ke)|0,f=f+Math.imul(T,Be)|0,f=f+Math.imul(C,ke)|0,w=w+Math.imul(C,Be)|0;var St=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(St>>>26)|0,St&=67108863,g=Math.imul(pe,_e),f=Math.imul(pe,Ee),f=f+Math.imul(Me,_e)|0,w=Math.imul(Me,Ee),g=g+Math.imul(oe,Pe)|0,f=f+Math.imul(oe,Se)|0,f=f+Math.imul(ce,Pe)|0,w=w+Math.imul(ce,Se)|0,g=g+Math.imul(ie,Te)|0,f=f+Math.imul(ie,Ie)|0,f=f+Math.imul(ae,Te)|0,w=w+Math.imul(ae,Ie)|0,g=g+Math.imul(Q,Re)|0,f=f+Math.imul(Q,Ce)|0,f=f+Math.imul(te,Re)|0,w=w+Math.imul(te,Ce)|0,g=g+Math.imul(J,Ne)|0,f=f+Math.imul(J,Oe)|0,f=f+Math.imul(X,Ne)|0,w=w+Math.imul(X,Oe)|0,g=g+Math.imul(G,ke)|0,f=f+Math.imul(G,Be)|0,f=f+Math.imul(V,ke)|0,w=w+Math.imul(V,Be)|0,g=g+Math.imul(T,De)|0,f=f+Math.imul(T,je)|0,f=f+Math.imul(C,De)|0,w=w+Math.imul(C,je)|0;var pt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(pt>>>26)|0,pt&=67108863,g=Math.imul(we,_e),f=Math.imul(we,Ee),f=f+Math.imul(Ae,_e)|0,w=Math.imul(Ae,Ee),g=g+Math.imul(pe,Pe)|0,f=f+Math.imul(pe,Se)|0,f=f+Math.imul(Me,Pe)|0,w=w+Math.imul(Me,Se)|0,g=g+Math.imul(oe,Te)|0,f=f+Math.imul(oe,Ie)|0,f=f+Math.imul(ce,Te)|0,w=w+Math.imul(ce,Ie)|0,g=g+Math.imul(ie,Re)|0,f=f+Math.imul(ie,Ce)|0,f=f+Math.imul(ae,Re)|0,w=w+Math.imul(ae,Ce)|0,g=g+Math.imul(Q,Ne)|0,f=f+Math.imul(Q,Oe)|0,f=f+Math.imul(te,Ne)|0,w=w+Math.imul(te,Oe)|0,g=g+Math.imul(J,ke)|0,f=f+Math.imul(J,Be)|0,f=f+Math.imul(X,ke)|0,w=w+Math.imul(X,Be)|0,g=g+Math.imul(G,De)|0,f=f+Math.imul(G,je)|0,f=f+Math.imul(V,De)|0,w=w+Math.imul(V,je)|0,g=g+Math.imul(T,ee)|0,f=f+Math.imul(T,Y)|0,f=f+Math.imul(C,ee)|0,w=w+Math.imul(C,Y)|0;var Tt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,g=Math.imul(me,_e),f=Math.imul(me,Ee),f=f+Math.imul(he,_e)|0,w=Math.imul(he,Ee),g=g+Math.imul(we,Pe)|0,f=f+Math.imul(we,Se)|0,f=f+Math.imul(Ae,Pe)|0,w=w+Math.imul(Ae,Se)|0,g=g+Math.imul(pe,Te)|0,f=f+Math.imul(pe,Ie)|0,f=f+Math.imul(Me,Te)|0,w=w+Math.imul(Me,Ie)|0,g=g+Math.imul(oe,Re)|0,f=f+Math.imul(oe,Ce)|0,f=f+Math.imul(ce,Re)|0,w=w+Math.imul(ce,Ce)|0,g=g+Math.imul(ie,Ne)|0,f=f+Math.imul(ie,Oe)|0,f=f+Math.imul(ae,Ne)|0,w=w+Math.imul(ae,Oe)|0,g=g+Math.imul(Q,ke)|0,f=f+Math.imul(Q,Be)|0,f=f+Math.imul(te,ke)|0,w=w+Math.imul(te,Be)|0,g=g+Math.imul(J,De)|0,f=f+Math.imul(J,je)|0,f=f+Math.imul(X,De)|0,w=w+Math.imul(X,je)|0,g=g+Math.imul(G,ee)|0,f=f+Math.imul(G,Y)|0,f=f+Math.imul(V,ee)|0,w=w+Math.imul(V,Y)|0,g=g+Math.imul(T,re)|0,f=f+Math.imul(T,ne)|0,f=f+Math.imul(C,re)|0,w=w+Math.imul(C,ne)|0;var vt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(vt>>>26)|0,vt&=67108863,g=Math.imul(ye,_e),f=Math.imul(ye,Ee),f=f+Math.imul(le,_e)|0,w=Math.imul(le,Ee),g=g+Math.imul(me,Pe)|0,f=f+Math.imul(me,Se)|0,f=f+Math.imul(he,Pe)|0,w=w+Math.imul(he,Se)|0,g=g+Math.imul(we,Te)|0,f=f+Math.imul(we,Ie)|0,f=f+Math.imul(Ae,Te)|0,w=w+Math.imul(Ae,Ie)|0,g=g+Math.imul(pe,Re)|0,f=f+Math.imul(pe,Ce)|0,f=f+Math.imul(Me,Re)|0,w=w+Math.imul(Me,Ce)|0,g=g+Math.imul(oe,Ne)|0,f=f+Math.imul(oe,Oe)|0,f=f+Math.imul(ce,Ne)|0,w=w+Math.imul(ce,Oe)|0,g=g+Math.imul(ie,ke)|0,f=f+Math.imul(ie,Be)|0,f=f+Math.imul(ae,ke)|0,w=w+Math.imul(ae,Be)|0,g=g+Math.imul(Q,De)|0,f=f+Math.imul(Q,je)|0,f=f+Math.imul(te,De)|0,w=w+Math.imul(te,je)|0,g=g+Math.imul(J,ee)|0,f=f+Math.imul(J,Y)|0,f=f+Math.imul(X,ee)|0,w=w+Math.imul(X,Y)|0,g=g+Math.imul(G,re)|0,f=f+Math.imul(G,ne)|0,f=f+Math.imul(V,re)|0,w=w+Math.imul(V,ne)|0,g=g+Math.imul(T,ge)|0,f=f+Math.imul(T,ve)|0,f=f+Math.imul(C,ge)|0,w=w+Math.imul(C,ve)|0;var zr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(zr>>>26)|0,zr&=67108863,g=Math.imul(ye,Pe),f=Math.imul(ye,Se),f=f+Math.imul(le,Pe)|0,w=Math.imul(le,Se),g=g+Math.imul(me,Te)|0,f=f+Math.imul(me,Ie)|0,f=f+Math.imul(he,Te)|0,w=w+Math.imul(he,Ie)|0,g=g+Math.imul(we,Re)|0,f=f+Math.imul(we,Ce)|0,f=f+Math.imul(Ae,Re)|0,w=w+Math.imul(Ae,Ce)|0,g=g+Math.imul(pe,Ne)|0,f=f+Math.imul(pe,Oe)|0,f=f+Math.imul(Me,Ne)|0,w=w+Math.imul(Me,Oe)|0,g=g+Math.imul(oe,ke)|0,f=f+Math.imul(oe,Be)|0,f=f+Math.imul(ce,ke)|0,w=w+Math.imul(ce,Be)|0,g=g+Math.imul(ie,De)|0,f=f+Math.imul(ie,je)|0,f=f+Math.imul(ae,De)|0,w=w+Math.imul(ae,je)|0,g=g+Math.imul(Q,ee)|0,f=f+Math.imul(Q,Y)|0,f=f+Math.imul(te,ee)|0,w=w+Math.imul(te,Y)|0,g=g+Math.imul(J,re)|0,f=f+Math.imul(J,ne)|0,f=f+Math.imul(X,re)|0,w=w+Math.imul(X,ne)|0,g=g+Math.imul(G,ge)|0,f=f+Math.imul(G,ve)|0,f=f+Math.imul(V,ge)|0,w=w+Math.imul(V,ve)|0;var ir=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ir>>>26)|0,ir&=67108863,g=Math.imul(ye,Te),f=Math.imul(ye,Ie),f=f+Math.imul(le,Te)|0,w=Math.imul(le,Ie),g=g+Math.imul(me,Re)|0,f=f+Math.imul(me,Ce)|0,f=f+Math.imul(he,Re)|0,w=w+Math.imul(he,Ce)|0,g=g+Math.imul(we,Ne)|0,f=f+Math.imul(we,Oe)|0,f=f+Math.imul(Ae,Ne)|0,w=w+Math.imul(Ae,Oe)|0,g=g+Math.imul(pe,ke)|0,f=f+Math.imul(pe,Be)|0,f=f+Math.imul(Me,ke)|0,w=w+Math.imul(Me,Be)|0,g=g+Math.imul(oe,De)|0,f=f+Math.imul(oe,je)|0,f=f+Math.imul(ce,De)|0,w=w+Math.imul(ce,je)|0,g=g+Math.imul(ie,ee)|0,f=f+Math.imul(ie,Y)|0,f=f+Math.imul(ae,ee)|0,w=w+Math.imul(ae,Y)|0,g=g+Math.imul(Q,re)|0,f=f+Math.imul(Q,ne)|0,f=f+Math.imul(te,re)|0,w=w+Math.imul(te,ne)|0,g=g+Math.imul(J,ge)|0,f=f+Math.imul(J,ve)|0,f=f+Math.imul(X,ge)|0,w=w+Math.imul(X,ve)|0;var ur=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ur>>>26)|0,ur&=67108863,g=Math.imul(ye,Re),f=Math.imul(ye,Ce),f=f+Math.imul(le,Re)|0,w=Math.imul(le,Ce),g=g+Math.imul(me,Ne)|0,f=f+Math.imul(me,Oe)|0,f=f+Math.imul(he,Ne)|0,w=w+Math.imul(he,Oe)|0,g=g+Math.imul(we,ke)|0,f=f+Math.imul(we,Be)|0,f=f+Math.imul(Ae,ke)|0,w=w+Math.imul(Ae,Be)|0,g=g+Math.imul(pe,De)|0,f=f+Math.imul(pe,je)|0,f=f+Math.imul(Me,De)|0,w=w+Math.imul(Me,je)|0,g=g+Math.imul(oe,ee)|0,f=f+Math.imul(oe,Y)|0,f=f+Math.imul(ce,ee)|0,w=w+Math.imul(ce,Y)|0,g=g+Math.imul(ie,re)|0,f=f+Math.imul(ie,ne)|0,f=f+Math.imul(ae,re)|0,w=w+Math.imul(ae,ne)|0,g=g+Math.imul(Q,ge)|0,f=f+Math.imul(Q,ve)|0,f=f+Math.imul(te,ge)|0,w=w+Math.imul(te,ve)|0;var wt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(wt>>>26)|0,wt&=67108863,g=Math.imul(ye,Ne),f=Math.imul(ye,Oe),f=f+Math.imul(le,Ne)|0,w=Math.imul(le,Oe),g=g+Math.imul(me,ke)|0,f=f+Math.imul(me,Be)|0,f=f+Math.imul(he,ke)|0,w=w+Math.imul(he,Be)|0,g=g+Math.imul(we,De)|0,f=f+Math.imul(we,je)|0,f=f+Math.imul(Ae,De)|0,w=w+Math.imul(Ae,je)|0,g=g+Math.imul(pe,ee)|0,f=f+Math.imul(pe,Y)|0,f=f+Math.imul(Me,ee)|0,w=w+Math.imul(Me,Y)|0,g=g+Math.imul(oe,re)|0,f=f+Math.imul(oe,ne)|0,f=f+Math.imul(ce,re)|0,w=w+Math.imul(ce,ne)|0,g=g+Math.imul(ie,ge)|0,f=f+Math.imul(ie,ve)|0,f=f+Math.imul(ae,ge)|0,w=w+Math.imul(ae,ve)|0;var or=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(or>>>26)|0,or&=67108863,g=Math.imul(ye,ke),f=Math.imul(ye,Be),f=f+Math.imul(le,ke)|0,w=Math.imul(le,Be),g=g+Math.imul(me,De)|0,f=f+Math.imul(me,je)|0,f=f+Math.imul(he,De)|0,w=w+Math.imul(he,je)|0,g=g+Math.imul(we,ee)|0,f=f+Math.imul(we,Y)|0,f=f+Math.imul(Ae,ee)|0,w=w+Math.imul(Ae,Y)|0,g=g+Math.imul(pe,re)|0,f=f+Math.imul(pe,ne)|0,f=f+Math.imul(Me,re)|0,w=w+Math.imul(Me,ne)|0,g=g+Math.imul(oe,ge)|0,f=f+Math.imul(oe,ve)|0,f=f+Math.imul(ce,ge)|0,w=w+Math.imul(ce,ve)|0;var lr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(lr>>>26)|0,lr&=67108863,g=Math.imul(ye,De),f=Math.imul(ye,je),f=f+Math.imul(le,De)|0,w=Math.imul(le,je),g=g+Math.imul(me,ee)|0,f=f+Math.imul(me,Y)|0,f=f+Math.imul(he,ee)|0,w=w+Math.imul(he,Y)|0,g=g+Math.imul(we,re)|0,f=f+Math.imul(we,ne)|0,f=f+Math.imul(Ae,re)|0,w=w+Math.imul(Ae,ne)|0,g=g+Math.imul(pe,ge)|0,f=f+Math.imul(pe,ve)|0,f=f+Math.imul(Me,ge)|0,w=w+Math.imul(Me,ve)|0;var Mr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,g=Math.imul(ye,ee),f=Math.imul(ye,Y),f=f+Math.imul(le,ee)|0,w=Math.imul(le,Y),g=g+Math.imul(me,re)|0,f=f+Math.imul(me,ne)|0,f=f+Math.imul(he,re)|0,w=w+Math.imul(he,ne)|0,g=g+Math.imul(we,ge)|0,f=f+Math.imul(we,ve)|0,f=f+Math.imul(Ae,ge)|0,w=w+Math.imul(Ae,ve)|0;var Kr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,g=Math.imul(ye,re),f=Math.imul(ye,ne),f=f+Math.imul(le,re)|0,w=Math.imul(le,ne),g=g+Math.imul(me,ge)|0,f=f+Math.imul(me,ve)|0,f=f+Math.imul(he,ge)|0,w=w+Math.imul(he,ve)|0;var kr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(kr>>>26)|0,kr&=67108863,g=Math.imul(ye,ge),f=Math.imul(ye,ve),f=f+Math.imul(le,ge)|0,w=Math.imul(le,ve);var Yr=(x+g|0)+((f&8191)<<13)|0;return x=(w+(f>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,v[0]=gt,v[1]=ot,v[2]=Ge,v[3]=Pt,v[4]=Lt,v[5]=St,v[6]=pt,v[7]=Tt,v[8]=vt,v[9]=zr,v[10]=ir,v[11]=ur,v[12]=wt,v[13]=or,v[14]=lr,v[15]=Mr,v[16]=Kr,v[17]=kr,v[18]=Yr,x!==0&&(v[19]=x,y.length++),y};Math.imul||(S=M);function P(E,c,l){l.negative=c.negative^E.negative,l.length=E.length+c.length;for(var y=0,d=0,h=0;h<l.length-1;h++){var v=d;d=0;for(var x=y&67108863,g=Math.min(h,c.length-1),f=Math.max(0,h-E.length+1);f<=g;f++){var w=h-f,D=E.words[w]|0,T=c.words[f]|0,C=D*T,z=C&67108863;v=v+(C/67108864|0)|0,z=z+x|0,x=z&67108863,v=v+(z>>>26)|0,d+=v>>>26,v&=67108863}l.words[h]=x,y=v,v=d}return y!==0?l.words[h]=y:l.length--,l.strip()}function k(E,c,l){var y=new R;return y.mulp(E,c,l)}i.prototype.mulTo=function(c,l){var y,d=this.length+c.length;return this.length===10&&c.length===10?y=S(this,c,l):d<63?y=M(this,c,l):d<1024?y=P(this,c,l):y=k(this,c,l),y};function R(E,c){this.x=E,this.y=c}R.prototype.makeRBT=function(c){for(var l=new Array(c),y=i.prototype._countBits(c)-1,d=0;d<c;d++)l[d]=this.revBin(d,y,c);return l},R.prototype.revBin=function(c,l,y){if(c===0||c===y-1)return c;for(var d=0,h=0;h<l;h++)d|=(c&1)<<l-h-1,c>>=1;return d},R.prototype.permute=function(c,l,y,d,h,v){for(var x=0;x<v;x++)d[x]=l[c[x]],h[x]=y[c[x]]},R.prototype.transform=function(c,l,y,d,h,v){this.permute(v,c,l,y,d,h);for(var x=1;x<h;x<<=1)for(var g=x<<1,f=Math.cos(2*Math.PI/g),w=Math.sin(2*Math.PI/g),D=0;D<h;D+=g)for(var T=f,C=w,z=0;z<x;z++){var G=y[D+z],V=d[D+z],Z=y[D+z+x],J=d[D+z+x],X=T*Z-C*J;J=T*J+C*Z,Z=X,y[D+z]=G+Z,d[D+z]=V+J,y[D+z+x]=G-Z,d[D+z+x]=V-J,z!==g&&(X=f*T-w*C,C=f*C+w*T,T=X)}},R.prototype.guessLen13b=function(c,l){var y=Math.max(l,c)|1,d=y&1,h=0;for(y=y/2|0;y;y=y>>>1)h++;return 1<<h+1+d},R.prototype.conjugate=function(c,l,y){if(!(y<=1))for(var d=0;d<y/2;d++){var h=c[d];c[d]=c[y-d-1],c[y-d-1]=h,h=l[d],l[d]=-l[y-d-1],l[y-d-1]=-h}},R.prototype.normalize13b=function(c,l){for(var y=0,d=0;d<l/2;d++){var h=Math.round(c[2*d+1]/l)*8192+Math.round(c[2*d]/l)+y;c[d]=h&67108863,h<67108864?y=0:y=h/67108864|0}return c},R.prototype.convert13b=function(c,l,y,d){for(var h=0,v=0;v<l;v++)h=h+(c[v]|0),y[2*v]=h&8191,h=h>>>13,y[2*v+1]=h&8191,h=h>>>13;for(v=2*l;v<d;++v)y[v]=0;r(h===0),r((h&-8192)===0)},R.prototype.stub=function(c){for(var l=new Array(c),y=0;y<c;y++)l[y]=0;return l},R.prototype.mulp=function(c,l,y){var d=2*this.guessLen13b(c.length,l.length),h=this.makeRBT(d),v=this.stub(d),x=new Array(d),g=new Array(d),f=new Array(d),w=new Array(d),D=new Array(d),T=new Array(d),C=y.words;C.length=d,this.convert13b(c.words,c.length,x,d),this.convert13b(l.words,l.length,w,d),this.transform(x,v,g,f,d,h),this.transform(w,v,D,T,d,h);for(var z=0;z<d;z++){var G=g[z]*D[z]-f[z]*T[z];f[z]=g[z]*T[z]+f[z]*D[z],g[z]=G}return this.conjugate(g,f,d),this.transform(g,f,C,v,d,h),this.conjugate(C,v,d),this.normalize13b(C,d),y.negative=c.negative^l.negative,y.length=c.length+l.length,y.strip()},i.prototype.mul=function(c){var l=new i(null);return l.words=new Array(this.length+c.length),this.mulTo(c,l)},i.prototype.mulf=function(c){var l=new i(null);return l.words=new Array(this.length+c.length),k(this,c,l)},i.prototype.imul=function(c){return this.clone().mulTo(c,this)},i.prototype.imuln=function(c){r(typeof c=="number"),r(c<67108864);for(var l=0,y=0;y<this.length;y++){var d=(this.words[y]|0)*c,h=(d&67108863)+(l&67108863);l>>=26,l+=d/67108864|0,l+=h>>>26,this.words[y]=h&67108863}return l!==0&&(this.words[y]=l,this.length++),this},i.prototype.muln=function(c){return this.clone().imuln(c)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(c){var l=A(c);if(l.length===0)return new i(1);for(var y=this,d=0;d<l.length&&l[d]===0;d++,y=y.sqr());if(++d<l.length)for(var h=y.sqr();d<l.length;d++,h=h.sqr())l[d]!==0&&(y=y.mul(h));return y},i.prototype.iushln=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26,d=67108863>>>26-l<<26-l,h;if(l!==0){var v=0;for(h=0;h<this.length;h++){var x=this.words[h]&d,g=(this.words[h]|0)-x<<l;this.words[h]=g|v,v=x>>>26-l}v&&(this.words[h]=v,this.length++)}if(y!==0){for(h=this.length-1;h>=0;h--)this.words[h+y]=this.words[h];for(h=0;h<y;h++)this.words[h]=0;this.length+=y}return this.strip()},i.prototype.ishln=function(c){return r(this.negative===0),this.iushln(c)},i.prototype.iushrn=function(c,l,y){r(typeof c=="number"&&c>=0);var d;l?d=(l-l%26)/26:d=0;var h=c%26,v=Math.min((c-h)/26,this.length),x=67108863^67108863>>>h<<h,g=y;if(d-=v,d=Math.max(0,d),g){for(var f=0;f<v;f++)g.words[f]=this.words[f];g.length=v}if(v!==0)if(this.length>v)for(this.length-=v,f=0;f<this.length;f++)this.words[f]=this.words[f+v];else this.words[0]=0,this.length=1;var w=0;for(f=this.length-1;f>=0&&(w!==0||f>=d);f--){var D=this.words[f]|0;this.words[f]=w<<26-h|D>>>h,w=D&x}return g&&w!==0&&(g.words[g.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(c,l,y){return r(this.negative===0),this.iushrn(c,l,y)},i.prototype.shln=function(c){return this.clone().ishln(c)},i.prototype.ushln=function(c){return this.clone().iushln(c)},i.prototype.shrn=function(c){return this.clone().ishrn(c)},i.prototype.ushrn=function(c){return this.clone().iushrn(c)},i.prototype.testn=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26,d=1<<l;if(this.length<=y)return!1;var h=this.words[y];return!!(h&d)},i.prototype.imaskn=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(l!==0&&y++,this.length=Math.min(y,this.length),l!==0){var d=67108863^67108863>>>l<<l;this.words[this.length-1]&=d}return this.strip()},i.prototype.maskn=function(c){return this.clone().imaskn(c)},i.prototype.iaddn=function(c){return r(typeof c=="number"),r(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},i.prototype._iaddn=function(c){this.words[0]+=c;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(c){if(r(typeof c=="number"),r(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(c){return this.clone().iaddn(c)},i.prototype.subn=function(c){return this.clone().isubn(c)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(c,l,y){var d=c.length+y,h;this._expand(d);var v,x=0;for(h=0;h<c.length;h++){v=(this.words[h+y]|0)+x;var g=(c.words[h]|0)*l;v-=g&67108863,x=(v>>26)-(g/67108864|0),this.words[h+y]=v&67108863}for(;h<this.length-y;h++)v=(this.words[h+y]|0)+x,x=v>>26,this.words[h+y]=v&67108863;if(x===0)return this.strip();for(r(x===-1),x=0,h=0;h<this.length;h++)v=-(this.words[h]|0)+x,x=v>>26,this.words[h]=v&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(c,l){var y=this.length-c.length,d=this.clone(),h=c,v=h.words[h.length-1]|0,x=this._countBits(v);y=26-x,y!==0&&(h=h.ushln(y),d.iushln(y),v=h.words[h.length-1]|0);var g=d.length-h.length,f;if(l!=="mod"){f=new i(null),f.length=g+1,f.words=new Array(f.length);for(var w=0;w<f.length;w++)f.words[w]=0}var D=d.clone()._ishlnsubmul(h,1,g);D.negative===0&&(d=D,f&&(f.words[g]=1));for(var T=g-1;T>=0;T--){var C=(d.words[h.length+T]|0)*67108864+(d.words[h.length+T-1]|0);for(C=Math.min(C/v|0,67108863),d._ishlnsubmul(h,C,T);d.negative!==0;)C--,d.negative=0,d._ishlnsubmul(h,1,T),d.isZero()||(d.negative^=1);f&&(f.words[T]=C)}return f&&f.strip(),d.strip(),l!=="div"&&y!==0&&d.iushrn(y),{div:f||null,mod:d}},i.prototype.divmod=function(c,l,y){if(r(!c.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var d,h,v;return this.negative!==0&&c.negative===0?(v=this.neg().divmod(c,l),l!=="mod"&&(d=v.div.neg()),l!=="div"&&(h=v.mod.neg(),y&&h.negative!==0&&h.iadd(c)),{div:d,mod:h}):this.negative===0&&c.negative!==0?(v=this.divmod(c.neg(),l),l!=="mod"&&(d=v.div.neg()),{div:d,mod:v.mod}):this.negative&c.negative?(v=this.neg().divmod(c.neg(),l),l!=="div"&&(h=v.mod.neg(),y&&h.negative!==0&&h.isub(c)),{div:v.div,mod:h}):c.length>this.length||this.cmp(c)<0?{div:new i(0),mod:this}:c.length===1?l==="div"?{div:this.divn(c.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new i(this.modn(c.words[0]))}:this._wordDiv(c,l)},i.prototype.div=function(c){return this.divmod(c,"div",!1).div},i.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},i.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},i.prototype.divRound=function(c){var l=this.divmod(c);if(l.mod.isZero())return l.div;var y=l.div.negative!==0?l.mod.isub(c):l.mod,d=c.ushrn(1),h=c.andln(1),v=y.cmp(d);return v<0||h===1&&v===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(c){r(c<=67108863);for(var l=(1<<26)%c,y=0,d=this.length-1;d>=0;d--)y=(l*y+(this.words[d]|0))%c;return y},i.prototype.idivn=function(c){r(c<=67108863);for(var l=0,y=this.length-1;y>=0;y--){var d=(this.words[y]|0)+l*67108864;this.words[y]=d/c|0,l=d%c}return this.strip()},i.prototype.divn=function(c){return this.clone().idivn(c)},i.prototype.egcd=function(c){r(c.negative===0),r(!c.isZero());var l=this,y=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var d=new i(1),h=new i(0),v=new i(0),x=new i(1),g=0;l.isEven()&&y.isEven();)l.iushrn(1),y.iushrn(1),++g;for(var f=y.clone(),w=l.clone();!l.isZero();){for(var D=0,T=1;!(l.words[0]&T)&&D<26;++D,T<<=1);if(D>0)for(l.iushrn(D);D-- >0;)(d.isOdd()||h.isOdd())&&(d.iadd(f),h.isub(w)),d.iushrn(1),h.iushrn(1);for(var C=0,z=1;!(y.words[0]&z)&&C<26;++C,z<<=1);if(C>0)for(y.iushrn(C);C-- >0;)(v.isOdd()||x.isOdd())&&(v.iadd(f),x.isub(w)),v.iushrn(1),x.iushrn(1);l.cmp(y)>=0?(l.isub(y),d.isub(v),h.isub(x)):(y.isub(l),v.isub(d),x.isub(h))}return{a:v,b:x,gcd:y.iushln(g)}},i.prototype._invmp=function(c){r(c.negative===0),r(!c.isZero());var l=this,y=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var d=new i(1),h=new i(0),v=y.clone();l.cmpn(1)>0&&y.cmpn(1)>0;){for(var x=0,g=1;!(l.words[0]&g)&&x<26;++x,g<<=1);if(x>0)for(l.iushrn(x);x-- >0;)d.isOdd()&&d.iadd(v),d.iushrn(1);for(var f=0,w=1;!(y.words[0]&w)&&f<26;++f,w<<=1);if(f>0)for(y.iushrn(f);f-- >0;)h.isOdd()&&h.iadd(v),h.iushrn(1);l.cmp(y)>=0?(l.isub(y),d.isub(h)):(y.isub(l),h.isub(d))}var D;return l.cmpn(1)===0?D=d:D=h,D.cmpn(0)<0&&D.iadd(c),D},i.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var l=this.clone(),y=c.clone();l.negative=0,y.negative=0;for(var d=0;l.isEven()&&y.isEven();d++)l.iushrn(1),y.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;y.isEven();)y.iushrn(1);var h=l.cmp(y);if(h<0){var v=l;l=y,y=v}else if(h===0||y.cmpn(1)===0)break;l.isub(y)}while(!0);return y.iushln(d)},i.prototype.invm=function(c){return this.egcd(c).a.umod(c)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(c){return this.words[0]&c},i.prototype.bincn=function(c){r(typeof c=="number");var l=c%26,y=(c-l)/26,d=1<<l;if(this.length<=y)return this._expand(y+1),this.words[y]|=d,this;for(var h=d,v=y;h!==0&&v<this.length;v++){var x=this.words[v]|0;x+=h,h=x>>>26,x&=67108863,this.words[v]=x}return h!==0&&(this.words[v]=h,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(c){var l=c<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var y;if(this.length>1)y=1;else{l&&(c=-c),r(c<=67108863,"Number is too big");var d=this.words[0]|0;y=d===c?0:d<c?-1:1}return this.negative!==0?-y|0:y},i.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var l=this.ucmp(c);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var l=0,y=this.length-1;y>=0;y--){var d=this.words[y]|0,h=c.words[y]|0;if(d!==h){d<h?l=-1:d>h&&(l=1);break}}return l},i.prototype.gtn=function(c){return this.cmpn(c)===1},i.prototype.gt=function(c){return this.cmp(c)===1},i.prototype.gten=function(c){return this.cmpn(c)>=0},i.prototype.gte=function(c){return this.cmp(c)>=0},i.prototype.ltn=function(c){return this.cmpn(c)===-1},i.prototype.lt=function(c){return this.cmp(c)===-1},i.prototype.lten=function(c){return this.cmpn(c)<=0},i.prototype.lte=function(c){return this.cmp(c)<=0},i.prototype.eqn=function(c){return this.cmpn(c)===0},i.prototype.eq=function(c){return this.cmp(c)===0},i.red=function(c){return new L(c)},i.prototype.toRed=function(c){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(c){return this.red=c,this},i.prototype.forceRed=function(c){return r(!this.red,"Already a number in reduction context"),this._forceRed(c)},i.prototype.redAdd=function(c){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},i.prototype.redIAdd=function(c){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},i.prototype.redSub=function(c){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},i.prototype.redISub=function(c){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},i.prototype.redShl=function(c){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},i.prototype.redMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},i.prototype.redIMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(c){return r(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var B={k256:null,p224:null,p192:null,p25519:null};function I(E,c){this.name=E,this.p=new i(c,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}I.prototype._tmp=function(){var c=new i(null);return c.words=new Array(Math.ceil(this.n/13)),c},I.prototype.ireduce=function(c){var l=c,y;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),y=l.bitLength();while(y>this.n);var d=y<this.n?-1:l.ucmp(this.p);return d===0?(l.words[0]=0,l.length=1):d>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},I.prototype.split=function(c,l){c.iushrn(this.n,0,l)},I.prototype.imulK=function(c){return c.imul(this.k)};function q(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(q,I),q.prototype.split=function(c,l){for(var y=4194303,d=Math.min(c.length,9),h=0;h<d;h++)l.words[h]=c.words[h];if(l.length=d,c.length<=9){c.words[0]=0,c.length=1;return}var v=c.words[9];for(l.words[l.length++]=v&y,h=10;h<c.length;h++){var x=c.words[h]|0;c.words[h-10]=(x&y)<<4|v>>>22,v=x}v>>>=22,c.words[h-10]=v,v===0&&c.length>10?c.length-=10:c.length-=9},q.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var l=0,y=0;y<c.length;y++){var d=c.words[y]|0;l+=d*977,c.words[y]=l&67108863,l=d*64+(l/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function $(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n($,I);function U(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(U,I);function F(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(F,I),F.prototype.imulK=function(c){for(var l=0,y=0;y<c.length;y++){var d=(c.words[y]|0)*19+l,h=d&67108863;d>>>=26,c.words[y]=h,l=d}return l!==0&&(c.words[c.length++]=l),c},i._prime=function(c){if(B[c])return B[c];var l;if(c==="k256")l=new q;else if(c==="p224")l=new $;else if(c==="p192")l=new U;else if(c==="p25519")l=new F;else throw new Error("Unknown prime "+c);return B[c]=l,l};function L(E){if(typeof E=="string"){var c=i._prime(E);this.m=c.p,this.prime=c}else r(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}L.prototype._verify1=function(c){r(c.negative===0,"red works only with positives"),r(c.red,"red works only with red numbers")},L.prototype._verify2=function(c,l){r((c.negative|l.negative)===0,"red works only with positives"),r(c.red&&c.red===l.red,"red works only with red numbers")},L.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):c.umod(this.m)._forceRed(this)},L.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},L.prototype.add=function(c,l){this._verify2(c,l);var y=c.add(l);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},L.prototype.iadd=function(c,l){this._verify2(c,l);var y=c.iadd(l);return y.cmp(this.m)>=0&&y.isub(this.m),y},L.prototype.sub=function(c,l){this._verify2(c,l);var y=c.sub(l);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},L.prototype.isub=function(c,l){this._verify2(c,l);var y=c.isub(l);return y.cmpn(0)<0&&y.iadd(this.m),y},L.prototype.shl=function(c,l){return this._verify1(c),this.imod(c.ushln(l))},L.prototype.imul=function(c,l){return this._verify2(c,l),this.imod(c.imul(l))},L.prototype.mul=function(c,l){return this._verify2(c,l),this.imod(c.mul(l))},L.prototype.isqr=function(c){return this.imul(c,c.clone())},L.prototype.sqr=function(c){return this.mul(c,c)},L.prototype.sqrt=function(c){if(c.isZero())return c.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var y=this.m.add(new i(1)).iushrn(2);return this.pow(c,y)}for(var d=this.m.subn(1),h=0;!d.isZero()&&d.andln(1)===0;)h++,d.iushrn(1);r(!d.isZero());var v=new i(1).toRed(this),x=v.redNeg(),g=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,g).cmp(x)!==0;)f.redIAdd(x);for(var w=this.pow(f,d),D=this.pow(c,d.addn(1).iushrn(1)),T=this.pow(c,d),C=h;T.cmp(v)!==0;){for(var z=T,G=0;z.cmp(v)!==0;G++)z=z.redSqr();r(G<C);var V=this.pow(w,new i(1).iushln(C-G-1));D=D.redMul(V),w=V.redSqr(),T=T.redMul(w),C=G}return D},L.prototype.invm=function(c){var l=c._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},L.prototype.pow=function(c,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return c.clone();var y=4,d=new Array(1<<y);d[0]=new i(1).toRed(this),d[1]=c;for(var h=2;h<d.length;h++)d[h]=this.mul(d[h-1],c);var v=d[0],x=0,g=0,f=l.bitLength()%26;for(f===0&&(f=26),h=l.length-1;h>=0;h--){for(var w=l.words[h],D=f-1;D>=0;D--){var T=w>>D&1;if(v!==d[0]&&(v=this.sqr(v)),T===0&&x===0){g=0;continue}x<<=1,x|=T,g++,!(g!==y&&(h!==0||D!==0))&&(v=this.mul(v,d[x]),g=0,x=0)}f=26}return v},L.prototype.convertTo=function(c){var l=c.umod(this.m);return l===c?l.clone():l},L.prototype.convertFrom=function(c){var l=c.clone();return l.red=null,l},i.mont=function(c){return new W(c)};function W(E){L.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(W,L),W.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},W.prototype.convertFrom=function(c){var l=this.imod(c.mul(this.rinv));return l.red=null,l},W.prototype.imul=function(c,l){if(c.isZero()||l.isZero())return c.words[0]=0,c.length=1,c;var y=c.imul(l),d=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=y.isub(d).iushrn(this.shift),v=h;return h.cmp(this.m)>=0?v=h.isub(this.m):h.cmpn(0)<0&&(v=h.iadd(this.m)),v._forceRed(this)},W.prototype.mul=function(c,l){if(c.isZero()||l.isZero())return new i(0)._forceRed(this);var y=c.mul(l),d=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=y.isub(d).iushrn(this.shift),v=h;return h.cmp(this.m)>=0?v=h.isub(this.m):h.cmpn(0)<0&&(v=h.iadd(this.m)),v._forceRed(this)},W.prototype.invm=function(c){var l=this.imod(c._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(typeof nC>"u"||nC,ase)});var fse=H((cse,oC)=>{_();(function(t,e){"use strict";function r(E,c){if(!E)throw new Error(c||"Assertion failed")}function n(E,c){E.super_=c;var l=function(){};l.prototype=c.prototype,E.prototype=new l,E.prototype.constructor=E}function i(E,c,l){if(i.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((c==="le"||c==="be")&&(l=c,c=10),this._init(E||0,c||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ut().Buffer}catch{}i.isBN=function(c){return c instanceof i?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===i.wordSize&&Array.isArray(c.words)},i.max=function(c,l){return c.cmp(l)>0?c:l},i.min=function(c,l){return c.cmp(l)<0?c:l},i.prototype._init=function(c,l,y){if(typeof c=="number")return this._initNumber(c,l,y);if(typeof c=="object")return this._initArray(c,l,y);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),c=c.toString().replace(/\s+/g,"");var d=0;c[0]==="-"&&(d++,this.negative=1),d<c.length&&(l===16?this._parseHex(c,d,y):(this._parseBase(c,l,d),y==="le"&&this._initArray(this.toArray(),l,y)))},i.prototype._initNumber=function(c,l,y){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(r(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),l,y)},i.prototype._initArray=function(c,l,y){if(r(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var h,v,x=0;if(y==="be")for(d=c.length-1,h=0;d>=0;d-=3)v=c[d]|c[d-1]<<8|c[d-2]<<16,this.words[h]|=v<<x&67108863,this.words[h+1]=v>>>26-x&67108863,x+=24,x>=26&&(x-=26,h++);else if(y==="le")for(d=0,h=0;d<c.length;d+=3)v=c[d]|c[d+1]<<8|c[d+2]<<16,this.words[h]|=v<<x&67108863,this.words[h+1]=v>>>26-x&67108863,x+=24,x>=26&&(x-=26,h++);return this.strip()};function s(E,c){var l=E.charCodeAt(c);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function a(E,c,l){var y=s(E,l);return l-1>=c&&(y|=s(E,l-1)<<4),y}i.prototype._parseHex=function(c,l,y){this.length=Math.ceil((c.length-l)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var h=0,v=0,x;if(y==="be")for(d=c.length-1;d>=l;d-=2)x=a(c,l,d)<<h,this.words[v]|=x&67108863,h>=18?(h-=18,v+=1,this.words[v]|=x>>>26):h+=8;else{var g=c.length-l;for(d=g%2===0?l+1:l;d<c.length;d+=2)x=a(c,l,d)<<h,this.words[v]|=x&67108863,h>=18?(h-=18,v+=1,this.words[v]|=x>>>26):h+=8}this.strip()};function u(E,c,l,y){for(var d=0,h=Math.min(E.length,l),v=c;v<h;v++){var x=E.charCodeAt(v)-48;d*=y,x>=49?d+=x-49+10:x>=17?d+=x-17+10:d+=x}return d}i.prototype._parseBase=function(c,l,y){this.words=[0],this.length=1;for(var d=0,h=1;h<=67108863;h*=l)d++;d--,h=h/l|0;for(var v=c.length-y,x=v%d,g=Math.min(v,v-x)+y,f=0,w=y;w<g;w+=d)f=u(c,w,w+d,l),this.imuln(h),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(x!==0){var D=1;for(f=u(c,w,c.length,l),w=0;w<x;w++)D*=l;this.imuln(D),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this.strip()},i.prototype.copy=function(c){c.words=new Array(this.length);for(var l=0;l<this.length;l++)c.words[l]=this.words[l];c.length=this.length,c.negative=this.negative,c.red=this.red},i.prototype.clone=function(){var c=new i(null);return this.copy(c),c},i.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(c,l){c=c||10,l=l|0||1;var y;if(c===16||c==="hex"){y="";for(var d=0,h=0,v=0;v<this.length;v++){var x=this.words[v],g=((x<<d|h)&16777215).toString(16);h=x>>>24-d&16777215,h!==0||v!==this.length-1?y=m[6-g.length]+g+y:y=g+y,d+=2,d>=26&&(d-=26,v--)}for(h!==0&&(y=h.toString(16)+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(c===(c|0)&&c>=2&&c<=36){var f=p[c],w=b[c];y="";var D=this.clone();for(D.negative=0;!D.isZero();){var T=D.modn(w).toString(c);D=D.idivn(w),D.isZero()?y=T+y:y=m[f-T.length]+T+y}for(this.isZero()&&(y="0"+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(c,l){return r(typeof o<"u"),this.toArrayLike(o,c,l)},i.prototype.toArray=function(c,l){return this.toArrayLike(Array,c,l)},i.prototype.toArrayLike=function(c,l,y){var d=this.byteLength(),h=y||Math.max(1,d);r(d<=h,"byte array longer than desired length"),r(h>0,"Requested array length <= 0"),this.strip();var v=l==="le",x=new c(h),g,f,w=this.clone();if(v){for(f=0;!w.isZero();f++)g=w.andln(255),w.iushrn(8),x[f]=g;for(;f<h;f++)x[f]=0}else{for(f=0;f<h-d;f++)x[f]=0;for(f=0;!w.isZero();f++)g=w.andln(255),w.iushrn(8),x[h-f-1]=g}return x},Math.clz32?i.prototype._countBits=function(c){return 32-Math.clz32(c)}:i.prototype._countBits=function(c){var l=c,y=0;return l>=4096&&(y+=13,l>>>=13),l>=64&&(y+=7,l>>>=7),l>=8&&(y+=4,l>>>=4),l>=2&&(y+=2,l>>>=2),y+l},i.prototype._zeroBits=function(c){if(c===0)return 26;var l=c,y=0;return l&8191||(y+=13,l>>>=13),l&127||(y+=7,l>>>=7),l&15||(y+=4,l>>>=4),l&3||(y+=2,l>>>=2),l&1||y++,y},i.prototype.bitLength=function(){var c=this.words[this.length-1],l=this._countBits(c);return(this.length-1)*26+l};function A(E){for(var c=new Array(E.bitLength()),l=0;l<c.length;l++){var y=l/26|0,d=l%26;c[l]=(E.words[y]&1<<d)>>>d}return c}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,l=0;l<this.length;l++){var y=this._zeroBits(this.words[l]);if(c+=y,y!==26)break}return c},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},i.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var l=0;l<c.length;l++)this.words[l]=this.words[l]|c.words[l];return this.strip()},i.prototype.ior=function(c){return r((this.negative|c.negative)===0),this.iuor(c)},i.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},i.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},i.prototype.iuand=function(c){var l;this.length>c.length?l=c:l=this;for(var y=0;y<l.length;y++)this.words[y]=this.words[y]&c.words[y];return this.length=l.length,this.strip()},i.prototype.iand=function(c){return r((this.negative|c.negative)===0),this.iuand(c)},i.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},i.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},i.prototype.iuxor=function(c){var l,y;this.length>c.length?(l=this,y=c):(l=c,y=this);for(var d=0;d<y.length;d++)this.words[d]=l.words[d]^y.words[d];if(this!==l)for(;d<l.length;d++)this.words[d]=l.words[d];return this.length=l.length,this.strip()},i.prototype.ixor=function(c){return r((this.negative|c.negative)===0),this.iuxor(c)},i.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},i.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},i.prototype.inotn=function(c){r(typeof c=="number"&&c>=0);var l=Math.ceil(c/26)|0,y=c%26;this._expand(l),y>0&&l--;for(var d=0;d<l;d++)this.words[d]=~this.words[d]&67108863;return y>0&&(this.words[d]=~this.words[d]&67108863>>26-y),this.strip()},i.prototype.notn=function(c){return this.clone().inotn(c)},i.prototype.setn=function(c,l){r(typeof c=="number"&&c>=0);var y=c/26|0,d=c%26;return this._expand(y+1),l?this.words[y]=this.words[y]|1<<d:this.words[y]=this.words[y]&~(1<<d),this.strip()},i.prototype.iadd=function(c){var l;if(this.negative!==0&&c.negative===0)return this.negative=0,l=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,l=this.isub(c),c.negative=1,l._normSign();var y,d;this.length>c.length?(y=this,d=c):(y=c,d=this);for(var h=0,v=0;v<d.length;v++)l=(y.words[v]|0)+(d.words[v]|0)+h,this.words[v]=l&67108863,h=l>>>26;for(;h!==0&&v<y.length;v++)l=(y.words[v]|0)+h,this.words[v]=l&67108863,h=l>>>26;if(this.length=y.length,h!==0)this.words[this.length]=h,this.length++;else if(y!==this)for(;v<y.length;v++)this.words[v]=y.words[v];return this},i.prototype.add=function(c){var l;return c.negative!==0&&this.negative===0?(c.negative=0,l=this.sub(c),c.negative^=1,l):c.negative===0&&this.negative!==0?(this.negative=0,l=c.sub(this),this.negative=1,l):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},i.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var l=this.iadd(c);return c.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var y=this.cmp(c);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var d,h;y>0?(d=this,h=c):(d=c,h=this);for(var v=0,x=0;x<h.length;x++)l=(d.words[x]|0)-(h.words[x]|0)+v,v=l>>26,this.words[x]=l&67108863;for(;v!==0&&x<d.length;x++)l=(d.words[x]|0)+v,v=l>>26,this.words[x]=l&67108863;if(v===0&&x<d.length&&d!==this)for(;x<d.length;x++)this.words[x]=d.words[x];return this.length=Math.max(this.length,x),d!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(c){return this.clone().isub(c)};function M(E,c,l){l.negative=c.negative^E.negative;var y=E.length+c.length|0;l.length=y,y=y-1|0;var d=E.words[0]|0,h=c.words[0]|0,v=d*h,x=v&67108863,g=v/67108864|0;l.words[0]=x;for(var f=1;f<y;f++){for(var w=g>>>26,D=g&67108863,T=Math.min(f,c.length-1),C=Math.max(0,f-E.length+1);C<=T;C++){var z=f-C|0;d=E.words[z]|0,h=c.words[C]|0,v=d*h+D,w+=v/67108864|0,D=v&67108863}l.words[f]=D|0,g=w|0}return g!==0?l.words[f]=g|0:l.length--,l.strip()}var S=function(c,l,y){var d=c.words,h=l.words,v=y.words,x=0,g,f,w,D=d[0]|0,T=D&8191,C=D>>>13,z=d[1]|0,G=z&8191,V=z>>>13,Z=d[2]|0,J=Z&8191,X=Z>>>13,se=d[3]|0,Q=se&8191,te=se>>>13,de=d[4]|0,ie=de&8191,ae=de>>>13,fe=d[5]|0,oe=fe&8191,ce=fe>>>13,Ke=d[6]|0,pe=Ke&8191,Me=Ke>>>13,it=d[7]|0,we=it&8191,Ae=it>>>13,er=d[8]|0,me=er&8191,he=er>>>13,mt=d[9]|0,ye=mt&8191,le=mt>>>13,kt=h[0]|0,_e=kt&8191,Ee=kt>>>13,Ht=h[1]|0,Pe=Ht&8191,Se=Ht>>>13,Pn=h[2]|0,Te=Pn&8191,Ie=Pn>>>13,_i=h[3]|0,Re=_i&8191,Ce=_i>>>13,Tn=h[4]|0,Ne=Tn&8191,Oe=Tn>>>13,xi=h[5]|0,ke=xi&8191,Be=xi>>>13,Ei=h[6]|0,De=Ei&8191,je=Ei>>>13,si=h[7]|0,ee=si&8191,Y=si>>>13,ue=h[8]|0,re=ue&8191,ne=ue>>>13,ze=h[9]|0,ge=ze&8191,ve=ze>>>13;y.negative=c.negative^l.negative,y.length=19,g=Math.imul(T,_e),f=Math.imul(T,Ee),f=f+Math.imul(C,_e)|0,w=Math.imul(C,Ee);var gt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(gt>>>26)|0,gt&=67108863,g=Math.imul(G,_e),f=Math.imul(G,Ee),f=f+Math.imul(V,_e)|0,w=Math.imul(V,Ee),g=g+Math.imul(T,Pe)|0,f=f+Math.imul(T,Se)|0,f=f+Math.imul(C,Pe)|0,w=w+Math.imul(C,Se)|0;var ot=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ot>>>26)|0,ot&=67108863,g=Math.imul(J,_e),f=Math.imul(J,Ee),f=f+Math.imul(X,_e)|0,w=Math.imul(X,Ee),g=g+Math.imul(G,Pe)|0,f=f+Math.imul(G,Se)|0,f=f+Math.imul(V,Pe)|0,w=w+Math.imul(V,Se)|0,g=g+Math.imul(T,Te)|0,f=f+Math.imul(T,Ie)|0,f=f+Math.imul(C,Te)|0,w=w+Math.imul(C,Ie)|0;var Ge=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,g=Math.imul(Q,_e),f=Math.imul(Q,Ee),f=f+Math.imul(te,_e)|0,w=Math.imul(te,Ee),g=g+Math.imul(J,Pe)|0,f=f+Math.imul(J,Se)|0,f=f+Math.imul(X,Pe)|0,w=w+Math.imul(X,Se)|0,g=g+Math.imul(G,Te)|0,f=f+Math.imul(G,Ie)|0,f=f+Math.imul(V,Te)|0,w=w+Math.imul(V,Ie)|0,g=g+Math.imul(T,Re)|0,f=f+Math.imul(T,Ce)|0,f=f+Math.imul(C,Re)|0,w=w+Math.imul(C,Ce)|0;var Pt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,g=Math.imul(ie,_e),f=Math.imul(ie,Ee),f=f+Math.imul(ae,_e)|0,w=Math.imul(ae,Ee),g=g+Math.imul(Q,Pe)|0,f=f+Math.imul(Q,Se)|0,f=f+Math.imul(te,Pe)|0,w=w+Math.imul(te,Se)|0,g=g+Math.imul(J,Te)|0,f=f+Math.imul(J,Ie)|0,f=f+Math.imul(X,Te)|0,w=w+Math.imul(X,Ie)|0,g=g+Math.imul(G,Re)|0,f=f+Math.imul(G,Ce)|0,f=f+Math.imul(V,Re)|0,w=w+Math.imul(V,Ce)|0,g=g+Math.imul(T,Ne)|0,f=f+Math.imul(T,Oe)|0,f=f+Math.imul(C,Ne)|0,w=w+Math.imul(C,Oe)|0;var Lt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,g=Math.imul(oe,_e),f=Math.imul(oe,Ee),f=f+Math.imul(ce,_e)|0,w=Math.imul(ce,Ee),g=g+Math.imul(ie,Pe)|0,f=f+Math.imul(ie,Se)|0,f=f+Math.imul(ae,Pe)|0,w=w+Math.imul(ae,Se)|0,g=g+Math.imul(Q,Te)|0,f=f+Math.imul(Q,Ie)|0,f=f+Math.imul(te,Te)|0,w=w+Math.imul(te,Ie)|0,g=g+Math.imul(J,Re)|0,f=f+Math.imul(J,Ce)|0,f=f+Math.imul(X,Re)|0,w=w+Math.imul(X,Ce)|0,g=g+Math.imul(G,Ne)|0,f=f+Math.imul(G,Oe)|0,f=f+Math.imul(V,Ne)|0,w=w+Math.imul(V,Oe)|0,g=g+Math.imul(T,ke)|0,f=f+Math.imul(T,Be)|0,f=f+Math.imul(C,ke)|0,w=w+Math.imul(C,Be)|0;var St=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(St>>>26)|0,St&=67108863,g=Math.imul(pe,_e),f=Math.imul(pe,Ee),f=f+Math.imul(Me,_e)|0,w=Math.imul(Me,Ee),g=g+Math.imul(oe,Pe)|0,f=f+Math.imul(oe,Se)|0,f=f+Math.imul(ce,Pe)|0,w=w+Math.imul(ce,Se)|0,g=g+Math.imul(ie,Te)|0,f=f+Math.imul(ie,Ie)|0,f=f+Math.imul(ae,Te)|0,w=w+Math.imul(ae,Ie)|0,g=g+Math.imul(Q,Re)|0,f=f+Math.imul(Q,Ce)|0,f=f+Math.imul(te,Re)|0,w=w+Math.imul(te,Ce)|0,g=g+Math.imul(J,Ne)|0,f=f+Math.imul(J,Oe)|0,f=f+Math.imul(X,Ne)|0,w=w+Math.imul(X,Oe)|0,g=g+Math.imul(G,ke)|0,f=f+Math.imul(G,Be)|0,f=f+Math.imul(V,ke)|0,w=w+Math.imul(V,Be)|0,g=g+Math.imul(T,De)|0,f=f+Math.imul(T,je)|0,f=f+Math.imul(C,De)|0,w=w+Math.imul(C,je)|0;var pt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(pt>>>26)|0,pt&=67108863,g=Math.imul(we,_e),f=Math.imul(we,Ee),f=f+Math.imul(Ae,_e)|0,w=Math.imul(Ae,Ee),g=g+Math.imul(pe,Pe)|0,f=f+Math.imul(pe,Se)|0,f=f+Math.imul(Me,Pe)|0,w=w+Math.imul(Me,Se)|0,g=g+Math.imul(oe,Te)|0,f=f+Math.imul(oe,Ie)|0,f=f+Math.imul(ce,Te)|0,w=w+Math.imul(ce,Ie)|0,g=g+Math.imul(ie,Re)|0,f=f+Math.imul(ie,Ce)|0,f=f+Math.imul(ae,Re)|0,w=w+Math.imul(ae,Ce)|0,g=g+Math.imul(Q,Ne)|0,f=f+Math.imul(Q,Oe)|0,f=f+Math.imul(te,Ne)|0,w=w+Math.imul(te,Oe)|0,g=g+Math.imul(J,ke)|0,f=f+Math.imul(J,Be)|0,f=f+Math.imul(X,ke)|0,w=w+Math.imul(X,Be)|0,g=g+Math.imul(G,De)|0,f=f+Math.imul(G,je)|0,f=f+Math.imul(V,De)|0,w=w+Math.imul(V,je)|0,g=g+Math.imul(T,ee)|0,f=f+Math.imul(T,Y)|0,f=f+Math.imul(C,ee)|0,w=w+Math.imul(C,Y)|0;var Tt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,g=Math.imul(me,_e),f=Math.imul(me,Ee),f=f+Math.imul(he,_e)|0,w=Math.imul(he,Ee),g=g+Math.imul(we,Pe)|0,f=f+Math.imul(we,Se)|0,f=f+Math.imul(Ae,Pe)|0,w=w+Math.imul(Ae,Se)|0,g=g+Math.imul(pe,Te)|0,f=f+Math.imul(pe,Ie)|0,f=f+Math.imul(Me,Te)|0,w=w+Math.imul(Me,Ie)|0,g=g+Math.imul(oe,Re)|0,f=f+Math.imul(oe,Ce)|0,f=f+Math.imul(ce,Re)|0,w=w+Math.imul(ce,Ce)|0,g=g+Math.imul(ie,Ne)|0,f=f+Math.imul(ie,Oe)|0,f=f+Math.imul(ae,Ne)|0,w=w+Math.imul(ae,Oe)|0,g=g+Math.imul(Q,ke)|0,f=f+Math.imul(Q,Be)|0,f=f+Math.imul(te,ke)|0,w=w+Math.imul(te,Be)|0,g=g+Math.imul(J,De)|0,f=f+Math.imul(J,je)|0,f=f+Math.imul(X,De)|0,w=w+Math.imul(X,je)|0,g=g+Math.imul(G,ee)|0,f=f+Math.imul(G,Y)|0,f=f+Math.imul(V,ee)|0,w=w+Math.imul(V,Y)|0,g=g+Math.imul(T,re)|0,f=f+Math.imul(T,ne)|0,f=f+Math.imul(C,re)|0,w=w+Math.imul(C,ne)|0;var vt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(vt>>>26)|0,vt&=67108863,g=Math.imul(ye,_e),f=Math.imul(ye,Ee),f=f+Math.imul(le,_e)|0,w=Math.imul(le,Ee),g=g+Math.imul(me,Pe)|0,f=f+Math.imul(me,Se)|0,f=f+Math.imul(he,Pe)|0,w=w+Math.imul(he,Se)|0,g=g+Math.imul(we,Te)|0,f=f+Math.imul(we,Ie)|0,f=f+Math.imul(Ae,Te)|0,w=w+Math.imul(Ae,Ie)|0,g=g+Math.imul(pe,Re)|0,f=f+Math.imul(pe,Ce)|0,f=f+Math.imul(Me,Re)|0,w=w+Math.imul(Me,Ce)|0,g=g+Math.imul(oe,Ne)|0,f=f+Math.imul(oe,Oe)|0,f=f+Math.imul(ce,Ne)|0,w=w+Math.imul(ce,Oe)|0,g=g+Math.imul(ie,ke)|0,f=f+Math.imul(ie,Be)|0,f=f+Math.imul(ae,ke)|0,w=w+Math.imul(ae,Be)|0,g=g+Math.imul(Q,De)|0,f=f+Math.imul(Q,je)|0,f=f+Math.imul(te,De)|0,w=w+Math.imul(te,je)|0,g=g+Math.imul(J,ee)|0,f=f+Math.imul(J,Y)|0,f=f+Math.imul(X,ee)|0,w=w+Math.imul(X,Y)|0,g=g+Math.imul(G,re)|0,f=f+Math.imul(G,ne)|0,f=f+Math.imul(V,re)|0,w=w+Math.imul(V,ne)|0,g=g+Math.imul(T,ge)|0,f=f+Math.imul(T,ve)|0,f=f+Math.imul(C,ge)|0,w=w+Math.imul(C,ve)|0;var zr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(zr>>>26)|0,zr&=67108863,g=Math.imul(ye,Pe),f=Math.imul(ye,Se),f=f+Math.imul(le,Pe)|0,w=Math.imul(le,Se),g=g+Math.imul(me,Te)|0,f=f+Math.imul(me,Ie)|0,f=f+Math.imul(he,Te)|0,w=w+Math.imul(he,Ie)|0,g=g+Math.imul(we,Re)|0,f=f+Math.imul(we,Ce)|0,f=f+Math.imul(Ae,Re)|0,w=w+Math.imul(Ae,Ce)|0,g=g+Math.imul(pe,Ne)|0,f=f+Math.imul(pe,Oe)|0,f=f+Math.imul(Me,Ne)|0,w=w+Math.imul(Me,Oe)|0,g=g+Math.imul(oe,ke)|0,f=f+Math.imul(oe,Be)|0,f=f+Math.imul(ce,ke)|0,w=w+Math.imul(ce,Be)|0,g=g+Math.imul(ie,De)|0,f=f+Math.imul(ie,je)|0,f=f+Math.imul(ae,De)|0,w=w+Math.imul(ae,je)|0,g=g+Math.imul(Q,ee)|0,f=f+Math.imul(Q,Y)|0,f=f+Math.imul(te,ee)|0,w=w+Math.imul(te,Y)|0,g=g+Math.imul(J,re)|0,f=f+Math.imul(J,ne)|0,f=f+Math.imul(X,re)|0,w=w+Math.imul(X,ne)|0,g=g+Math.imul(G,ge)|0,f=f+Math.imul(G,ve)|0,f=f+Math.imul(V,ge)|0,w=w+Math.imul(V,ve)|0;var ir=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ir>>>26)|0,ir&=67108863,g=Math.imul(ye,Te),f=Math.imul(ye,Ie),f=f+Math.imul(le,Te)|0,w=Math.imul(le,Ie),g=g+Math.imul(me,Re)|0,f=f+Math.imul(me,Ce)|0,f=f+Math.imul(he,Re)|0,w=w+Math.imul(he,Ce)|0,g=g+Math.imul(we,Ne)|0,f=f+Math.imul(we,Oe)|0,f=f+Math.imul(Ae,Ne)|0,w=w+Math.imul(Ae,Oe)|0,g=g+Math.imul(pe,ke)|0,f=f+Math.imul(pe,Be)|0,f=f+Math.imul(Me,ke)|0,w=w+Math.imul(Me,Be)|0,g=g+Math.imul(oe,De)|0,f=f+Math.imul(oe,je)|0,f=f+Math.imul(ce,De)|0,w=w+Math.imul(ce,je)|0,g=g+Math.imul(ie,ee)|0,f=f+Math.imul(ie,Y)|0,f=f+Math.imul(ae,ee)|0,w=w+Math.imul(ae,Y)|0,g=g+Math.imul(Q,re)|0,f=f+Math.imul(Q,ne)|0,f=f+Math.imul(te,re)|0,w=w+Math.imul(te,ne)|0,g=g+Math.imul(J,ge)|0,f=f+Math.imul(J,ve)|0,f=f+Math.imul(X,ge)|0,w=w+Math.imul(X,ve)|0;var ur=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ur>>>26)|0,ur&=67108863,g=Math.imul(ye,Re),f=Math.imul(ye,Ce),f=f+Math.imul(le,Re)|0,w=Math.imul(le,Ce),g=g+Math.imul(me,Ne)|0,f=f+Math.imul(me,Oe)|0,f=f+Math.imul(he,Ne)|0,w=w+Math.imul(he,Oe)|0,g=g+Math.imul(we,ke)|0,f=f+Math.imul(we,Be)|0,f=f+Math.imul(Ae,ke)|0,w=w+Math.imul(Ae,Be)|0,g=g+Math.imul(pe,De)|0,f=f+Math.imul(pe,je)|0,f=f+Math.imul(Me,De)|0,w=w+Math.imul(Me,je)|0,g=g+Math.imul(oe,ee)|0,f=f+Math.imul(oe,Y)|0,f=f+Math.imul(ce,ee)|0,w=w+Math.imul(ce,Y)|0,g=g+Math.imul(ie,re)|0,f=f+Math.imul(ie,ne)|0,f=f+Math.imul(ae,re)|0,w=w+Math.imul(ae,ne)|0,g=g+Math.imul(Q,ge)|0,f=f+Math.imul(Q,ve)|0,f=f+Math.imul(te,ge)|0,w=w+Math.imul(te,ve)|0;var wt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(wt>>>26)|0,wt&=67108863,g=Math.imul(ye,Ne),f=Math.imul(ye,Oe),f=f+Math.imul(le,Ne)|0,w=Math.imul(le,Oe),g=g+Math.imul(me,ke)|0,f=f+Math.imul(me,Be)|0,f=f+Math.imul(he,ke)|0,w=w+Math.imul(he,Be)|0,g=g+Math.imul(we,De)|0,f=f+Math.imul(we,je)|0,f=f+Math.imul(Ae,De)|0,w=w+Math.imul(Ae,je)|0,g=g+Math.imul(pe,ee)|0,f=f+Math.imul(pe,Y)|0,f=f+Math.imul(Me,ee)|0,w=w+Math.imul(Me,Y)|0,g=g+Math.imul(oe,re)|0,f=f+Math.imul(oe,ne)|0,f=f+Math.imul(ce,re)|0,w=w+Math.imul(ce,ne)|0,g=g+Math.imul(ie,ge)|0,f=f+Math.imul(ie,ve)|0,f=f+Math.imul(ae,ge)|0,w=w+Math.imul(ae,ve)|0;var or=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(or>>>26)|0,or&=67108863,g=Math.imul(ye,ke),f=Math.imul(ye,Be),f=f+Math.imul(le,ke)|0,w=Math.imul(le,Be),g=g+Math.imul(me,De)|0,f=f+Math.imul(me,je)|0,f=f+Math.imul(he,De)|0,w=w+Math.imul(he,je)|0,g=g+Math.imul(we,ee)|0,f=f+Math.imul(we,Y)|0,f=f+Math.imul(Ae,ee)|0,w=w+Math.imul(Ae,Y)|0,g=g+Math.imul(pe,re)|0,f=f+Math.imul(pe,ne)|0,f=f+Math.imul(Me,re)|0,w=w+Math.imul(Me,ne)|0,g=g+Math.imul(oe,ge)|0,f=f+Math.imul(oe,ve)|0,f=f+Math.imul(ce,ge)|0,w=w+Math.imul(ce,ve)|0;var lr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(lr>>>26)|0,lr&=67108863,g=Math.imul(ye,De),f=Math.imul(ye,je),f=f+Math.imul(le,De)|0,w=Math.imul(le,je),g=g+Math.imul(me,ee)|0,f=f+Math.imul(me,Y)|0,f=f+Math.imul(he,ee)|0,w=w+Math.imul(he,Y)|0,g=g+Math.imul(we,re)|0,f=f+Math.imul(we,ne)|0,f=f+Math.imul(Ae,re)|0,w=w+Math.imul(Ae,ne)|0,g=g+Math.imul(pe,ge)|0,f=f+Math.imul(pe,ve)|0,f=f+Math.imul(Me,ge)|0,w=w+Math.imul(Me,ve)|0;var Mr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,g=Math.imul(ye,ee),f=Math.imul(ye,Y),f=f+Math.imul(le,ee)|0,w=Math.imul(le,Y),g=g+Math.imul(me,re)|0,f=f+Math.imul(me,ne)|0,f=f+Math.imul(he,re)|0,w=w+Math.imul(he,ne)|0,g=g+Math.imul(we,ge)|0,f=f+Math.imul(we,ve)|0,f=f+Math.imul(Ae,ge)|0,w=w+Math.imul(Ae,ve)|0;var Kr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,g=Math.imul(ye,re),f=Math.imul(ye,ne),f=f+Math.imul(le,re)|0,w=Math.imul(le,ne),g=g+Math.imul(me,ge)|0,f=f+Math.imul(me,ve)|0,f=f+Math.imul(he,ge)|0,w=w+Math.imul(he,ve)|0;var kr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(kr>>>26)|0,kr&=67108863,g=Math.imul(ye,ge),f=Math.imul(ye,ve),f=f+Math.imul(le,ge)|0,w=Math.imul(le,ve);var Yr=(x+g|0)+((f&8191)<<13)|0;return x=(w+(f>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,v[0]=gt,v[1]=ot,v[2]=Ge,v[3]=Pt,v[4]=Lt,v[5]=St,v[6]=pt,v[7]=Tt,v[8]=vt,v[9]=zr,v[10]=ir,v[11]=ur,v[12]=wt,v[13]=or,v[14]=lr,v[15]=Mr,v[16]=Kr,v[17]=kr,v[18]=Yr,x!==0&&(v[19]=x,y.length++),y};Math.imul||(S=M);function P(E,c,l){l.negative=c.negative^E.negative,l.length=E.length+c.length;for(var y=0,d=0,h=0;h<l.length-1;h++){var v=d;d=0;for(var x=y&67108863,g=Math.min(h,c.length-1),f=Math.max(0,h-E.length+1);f<=g;f++){var w=h-f,D=E.words[w]|0,T=c.words[f]|0,C=D*T,z=C&67108863;v=v+(C/67108864|0)|0,z=z+x|0,x=z&67108863,v=v+(z>>>26)|0,d+=v>>>26,v&=67108863}l.words[h]=x,y=v,v=d}return y!==0?l.words[h]=y:l.length--,l.strip()}function k(E,c,l){var y=new R;return y.mulp(E,c,l)}i.prototype.mulTo=function(c,l){var y,d=this.length+c.length;return this.length===10&&c.length===10?y=S(this,c,l):d<63?y=M(this,c,l):d<1024?y=P(this,c,l):y=k(this,c,l),y};function R(E,c){this.x=E,this.y=c}R.prototype.makeRBT=function(c){for(var l=new Array(c),y=i.prototype._countBits(c)-1,d=0;d<c;d++)l[d]=this.revBin(d,y,c);return l},R.prototype.revBin=function(c,l,y){if(c===0||c===y-1)return c;for(var d=0,h=0;h<l;h++)d|=(c&1)<<l-h-1,c>>=1;return d},R.prototype.permute=function(c,l,y,d,h,v){for(var x=0;x<v;x++)d[x]=l[c[x]],h[x]=y[c[x]]},R.prototype.transform=function(c,l,y,d,h,v){this.permute(v,c,l,y,d,h);for(var x=1;x<h;x<<=1)for(var g=x<<1,f=Math.cos(2*Math.PI/g),w=Math.sin(2*Math.PI/g),D=0;D<h;D+=g)for(var T=f,C=w,z=0;z<x;z++){var G=y[D+z],V=d[D+z],Z=y[D+z+x],J=d[D+z+x],X=T*Z-C*J;J=T*J+C*Z,Z=X,y[D+z]=G+Z,d[D+z]=V+J,y[D+z+x]=G-Z,d[D+z+x]=V-J,z!==g&&(X=f*T-w*C,C=f*C+w*T,T=X)}},R.prototype.guessLen13b=function(c,l){var y=Math.max(l,c)|1,d=y&1,h=0;for(y=y/2|0;y;y=y>>>1)h++;return 1<<h+1+d},R.prototype.conjugate=function(c,l,y){if(!(y<=1))for(var d=0;d<y/2;d++){var h=c[d];c[d]=c[y-d-1],c[y-d-1]=h,h=l[d],l[d]=-l[y-d-1],l[y-d-1]=-h}},R.prototype.normalize13b=function(c,l){for(var y=0,d=0;d<l/2;d++){var h=Math.round(c[2*d+1]/l)*8192+Math.round(c[2*d]/l)+y;c[d]=h&67108863,h<67108864?y=0:y=h/67108864|0}return c},R.prototype.convert13b=function(c,l,y,d){for(var h=0,v=0;v<l;v++)h=h+(c[v]|0),y[2*v]=h&8191,h=h>>>13,y[2*v+1]=h&8191,h=h>>>13;for(v=2*l;v<d;++v)y[v]=0;r(h===0),r((h&-8192)===0)},R.prototype.stub=function(c){for(var l=new Array(c),y=0;y<c;y++)l[y]=0;return l},R.prototype.mulp=function(c,l,y){var d=2*this.guessLen13b(c.length,l.length),h=this.makeRBT(d),v=this.stub(d),x=new Array(d),g=new Array(d),f=new Array(d),w=new Array(d),D=new Array(d),T=new Array(d),C=y.words;C.length=d,this.convert13b(c.words,c.length,x,d),this.convert13b(l.words,l.length,w,d),this.transform(x,v,g,f,d,h),this.transform(w,v,D,T,d,h);for(var z=0;z<d;z++){var G=g[z]*D[z]-f[z]*T[z];f[z]=g[z]*T[z]+f[z]*D[z],g[z]=G}return this.conjugate(g,f,d),this.transform(g,f,C,v,d,h),this.conjugate(C,v,d),this.normalize13b(C,d),y.negative=c.negative^l.negative,y.length=c.length+l.length,y.strip()},i.prototype.mul=function(c){var l=new i(null);return l.words=new Array(this.length+c.length),this.mulTo(c,l)},i.prototype.mulf=function(c){var l=new i(null);return l.words=new Array(this.length+c.length),k(this,c,l)},i.prototype.imul=function(c){return this.clone().mulTo(c,this)},i.prototype.imuln=function(c){r(typeof c=="number"),r(c<67108864);for(var l=0,y=0;y<this.length;y++){var d=(this.words[y]|0)*c,h=(d&67108863)+(l&67108863);l>>=26,l+=d/67108864|0,l+=h>>>26,this.words[y]=h&67108863}return l!==0&&(this.words[y]=l,this.length++),this},i.prototype.muln=function(c){return this.clone().imuln(c)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(c){var l=A(c);if(l.length===0)return new i(1);for(var y=this,d=0;d<l.length&&l[d]===0;d++,y=y.sqr());if(++d<l.length)for(var h=y.sqr();d<l.length;d++,h=h.sqr())l[d]!==0&&(y=y.mul(h));return y},i.prototype.iushln=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26,d=67108863>>>26-l<<26-l,h;if(l!==0){var v=0;for(h=0;h<this.length;h++){var x=this.words[h]&d,g=(this.words[h]|0)-x<<l;this.words[h]=g|v,v=x>>>26-l}v&&(this.words[h]=v,this.length++)}if(y!==0){for(h=this.length-1;h>=0;h--)this.words[h+y]=this.words[h];for(h=0;h<y;h++)this.words[h]=0;this.length+=y}return this.strip()},i.prototype.ishln=function(c){return r(this.negative===0),this.iushln(c)},i.prototype.iushrn=function(c,l,y){r(typeof c=="number"&&c>=0);var d;l?d=(l-l%26)/26:d=0;var h=c%26,v=Math.min((c-h)/26,this.length),x=67108863^67108863>>>h<<h,g=y;if(d-=v,d=Math.max(0,d),g){for(var f=0;f<v;f++)g.words[f]=this.words[f];g.length=v}if(v!==0)if(this.length>v)for(this.length-=v,f=0;f<this.length;f++)this.words[f]=this.words[f+v];else this.words[0]=0,this.length=1;var w=0;for(f=this.length-1;f>=0&&(w!==0||f>=d);f--){var D=this.words[f]|0;this.words[f]=w<<26-h|D>>>h,w=D&x}return g&&w!==0&&(g.words[g.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(c,l,y){return r(this.negative===0),this.iushrn(c,l,y)},i.prototype.shln=function(c){return this.clone().ishln(c)},i.prototype.ushln=function(c){return this.clone().iushln(c)},i.prototype.shrn=function(c){return this.clone().ishrn(c)},i.prototype.ushrn=function(c){return this.clone().iushrn(c)},i.prototype.testn=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26,d=1<<l;if(this.length<=y)return!1;var h=this.words[y];return!!(h&d)},i.prototype.imaskn=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(l!==0&&y++,this.length=Math.min(y,this.length),l!==0){var d=67108863^67108863>>>l<<l;this.words[this.length-1]&=d}return this.strip()},i.prototype.maskn=function(c){return this.clone().imaskn(c)},i.prototype.iaddn=function(c){return r(typeof c=="number"),r(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},i.prototype._iaddn=function(c){this.words[0]+=c;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(c){if(r(typeof c=="number"),r(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(c){return this.clone().iaddn(c)},i.prototype.subn=function(c){return this.clone().isubn(c)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(c,l,y){var d=c.length+y,h;this._expand(d);var v,x=0;for(h=0;h<c.length;h++){v=(this.words[h+y]|0)+x;var g=(c.words[h]|0)*l;v-=g&67108863,x=(v>>26)-(g/67108864|0),this.words[h+y]=v&67108863}for(;h<this.length-y;h++)v=(this.words[h+y]|0)+x,x=v>>26,this.words[h+y]=v&67108863;if(x===0)return this.strip();for(r(x===-1),x=0,h=0;h<this.length;h++)v=-(this.words[h]|0)+x,x=v>>26,this.words[h]=v&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(c,l){var y=this.length-c.length,d=this.clone(),h=c,v=h.words[h.length-1]|0,x=this._countBits(v);y=26-x,y!==0&&(h=h.ushln(y),d.iushln(y),v=h.words[h.length-1]|0);var g=d.length-h.length,f;if(l!=="mod"){f=new i(null),f.length=g+1,f.words=new Array(f.length);for(var w=0;w<f.length;w++)f.words[w]=0}var D=d.clone()._ishlnsubmul(h,1,g);D.negative===0&&(d=D,f&&(f.words[g]=1));for(var T=g-1;T>=0;T--){var C=(d.words[h.length+T]|0)*67108864+(d.words[h.length+T-1]|0);for(C=Math.min(C/v|0,67108863),d._ishlnsubmul(h,C,T);d.negative!==0;)C--,d.negative=0,d._ishlnsubmul(h,1,T),d.isZero()||(d.negative^=1);f&&(f.words[T]=C)}return f&&f.strip(),d.strip(),l!=="div"&&y!==0&&d.iushrn(y),{div:f||null,mod:d}},i.prototype.divmod=function(c,l,y){if(r(!c.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var d,h,v;return this.negative!==0&&c.negative===0?(v=this.neg().divmod(c,l),l!=="mod"&&(d=v.div.neg()),l!=="div"&&(h=v.mod.neg(),y&&h.negative!==0&&h.iadd(c)),{div:d,mod:h}):this.negative===0&&c.negative!==0?(v=this.divmod(c.neg(),l),l!=="mod"&&(d=v.div.neg()),{div:d,mod:v.mod}):this.negative&c.negative?(v=this.neg().divmod(c.neg(),l),l!=="div"&&(h=v.mod.neg(),y&&h.negative!==0&&h.isub(c)),{div:v.div,mod:h}):c.length>this.length||this.cmp(c)<0?{div:new i(0),mod:this}:c.length===1?l==="div"?{div:this.divn(c.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new i(this.modn(c.words[0]))}:this._wordDiv(c,l)},i.prototype.div=function(c){return this.divmod(c,"div",!1).div},i.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},i.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},i.prototype.divRound=function(c){var l=this.divmod(c);if(l.mod.isZero())return l.div;var y=l.div.negative!==0?l.mod.isub(c):l.mod,d=c.ushrn(1),h=c.andln(1),v=y.cmp(d);return v<0||h===1&&v===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(c){r(c<=67108863);for(var l=(1<<26)%c,y=0,d=this.length-1;d>=0;d--)y=(l*y+(this.words[d]|0))%c;return y},i.prototype.idivn=function(c){r(c<=67108863);for(var l=0,y=this.length-1;y>=0;y--){var d=(this.words[y]|0)+l*67108864;this.words[y]=d/c|0,l=d%c}return this.strip()},i.prototype.divn=function(c){return this.clone().idivn(c)},i.prototype.egcd=function(c){r(c.negative===0),r(!c.isZero());var l=this,y=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var d=new i(1),h=new i(0),v=new i(0),x=new i(1),g=0;l.isEven()&&y.isEven();)l.iushrn(1),y.iushrn(1),++g;for(var f=y.clone(),w=l.clone();!l.isZero();){for(var D=0,T=1;!(l.words[0]&T)&&D<26;++D,T<<=1);if(D>0)for(l.iushrn(D);D-- >0;)(d.isOdd()||h.isOdd())&&(d.iadd(f),h.isub(w)),d.iushrn(1),h.iushrn(1);for(var C=0,z=1;!(y.words[0]&z)&&C<26;++C,z<<=1);if(C>0)for(y.iushrn(C);C-- >0;)(v.isOdd()||x.isOdd())&&(v.iadd(f),x.isub(w)),v.iushrn(1),x.iushrn(1);l.cmp(y)>=0?(l.isub(y),d.isub(v),h.isub(x)):(y.isub(l),v.isub(d),x.isub(h))}return{a:v,b:x,gcd:y.iushln(g)}},i.prototype._invmp=function(c){r(c.negative===0),r(!c.isZero());var l=this,y=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var d=new i(1),h=new i(0),v=y.clone();l.cmpn(1)>0&&y.cmpn(1)>0;){for(var x=0,g=1;!(l.words[0]&g)&&x<26;++x,g<<=1);if(x>0)for(l.iushrn(x);x-- >0;)d.isOdd()&&d.iadd(v),d.iushrn(1);for(var f=0,w=1;!(y.words[0]&w)&&f<26;++f,w<<=1);if(f>0)for(y.iushrn(f);f-- >0;)h.isOdd()&&h.iadd(v),h.iushrn(1);l.cmp(y)>=0?(l.isub(y),d.isub(h)):(y.isub(l),h.isub(d))}var D;return l.cmpn(1)===0?D=d:D=h,D.cmpn(0)<0&&D.iadd(c),D},i.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var l=this.clone(),y=c.clone();l.negative=0,y.negative=0;for(var d=0;l.isEven()&&y.isEven();d++)l.iushrn(1),y.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;y.isEven();)y.iushrn(1);var h=l.cmp(y);if(h<0){var v=l;l=y,y=v}else if(h===0||y.cmpn(1)===0)break;l.isub(y)}while(!0);return y.iushln(d)},i.prototype.invm=function(c){return this.egcd(c).a.umod(c)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(c){return this.words[0]&c},i.prototype.bincn=function(c){r(typeof c=="number");var l=c%26,y=(c-l)/26,d=1<<l;if(this.length<=y)return this._expand(y+1),this.words[y]|=d,this;for(var h=d,v=y;h!==0&&v<this.length;v++){var x=this.words[v]|0;x+=h,h=x>>>26,x&=67108863,this.words[v]=x}return h!==0&&(this.words[v]=h,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(c){var l=c<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var y;if(this.length>1)y=1;else{l&&(c=-c),r(c<=67108863,"Number is too big");var d=this.words[0]|0;y=d===c?0:d<c?-1:1}return this.negative!==0?-y|0:y},i.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var l=this.ucmp(c);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var l=0,y=this.length-1;y>=0;y--){var d=this.words[y]|0,h=c.words[y]|0;if(d!==h){d<h?l=-1:d>h&&(l=1);break}}return l},i.prototype.gtn=function(c){return this.cmpn(c)===1},i.prototype.gt=function(c){return this.cmp(c)===1},i.prototype.gten=function(c){return this.cmpn(c)>=0},i.prototype.gte=function(c){return this.cmp(c)>=0},i.prototype.ltn=function(c){return this.cmpn(c)===-1},i.prototype.lt=function(c){return this.cmp(c)===-1},i.prototype.lten=function(c){return this.cmpn(c)<=0},i.prototype.lte=function(c){return this.cmp(c)<=0},i.prototype.eqn=function(c){return this.cmpn(c)===0},i.prototype.eq=function(c){return this.cmp(c)===0},i.red=function(c){return new L(c)},i.prototype.toRed=function(c){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(c){return this.red=c,this},i.prototype.forceRed=function(c){return r(!this.red,"Already a number in reduction context"),this._forceRed(c)},i.prototype.redAdd=function(c){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},i.prototype.redIAdd=function(c){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},i.prototype.redSub=function(c){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},i.prototype.redISub=function(c){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},i.prototype.redShl=function(c){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},i.prototype.redMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},i.prototype.redIMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(c){return r(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var B={k256:null,p224:null,p192:null,p25519:null};function I(E,c){this.name=E,this.p=new i(c,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}I.prototype._tmp=function(){var c=new i(null);return c.words=new Array(Math.ceil(this.n/13)),c},I.prototype.ireduce=function(c){var l=c,y;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),y=l.bitLength();while(y>this.n);var d=y<this.n?-1:l.ucmp(this.p);return d===0?(l.words[0]=0,l.length=1):d>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},I.prototype.split=function(c,l){c.iushrn(this.n,0,l)},I.prototype.imulK=function(c){return c.imul(this.k)};function q(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(q,I),q.prototype.split=function(c,l){for(var y=4194303,d=Math.min(c.length,9),h=0;h<d;h++)l.words[h]=c.words[h];if(l.length=d,c.length<=9){c.words[0]=0,c.length=1;return}var v=c.words[9];for(l.words[l.length++]=v&y,h=10;h<c.length;h++){var x=c.words[h]|0;c.words[h-10]=(x&y)<<4|v>>>22,v=x}v>>>=22,c.words[h-10]=v,v===0&&c.length>10?c.length-=10:c.length-=9},q.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var l=0,y=0;y<c.length;y++){var d=c.words[y]|0;l+=d*977,c.words[y]=l&67108863,l=d*64+(l/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function $(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n($,I);function U(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(U,I);function F(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(F,I),F.prototype.imulK=function(c){for(var l=0,y=0;y<c.length;y++){var d=(c.words[y]|0)*19+l,h=d&67108863;d>>>=26,c.words[y]=h,l=d}return l!==0&&(c.words[c.length++]=l),c},i._prime=function(c){if(B[c])return B[c];var l;if(c==="k256")l=new q;else if(c==="p224")l=new $;else if(c==="p192")l=new U;else if(c==="p25519")l=new F;else throw new Error("Unknown prime "+c);return B[c]=l,l};function L(E){if(typeof E=="string"){var c=i._prime(E);this.m=c.p,this.prime=c}else r(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}L.prototype._verify1=function(c){r(c.negative===0,"red works only with positives"),r(c.red,"red works only with red numbers")},L.prototype._verify2=function(c,l){r((c.negative|l.negative)===0,"red works only with positives"),r(c.red&&c.red===l.red,"red works only with red numbers")},L.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):c.umod(this.m)._forceRed(this)},L.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},L.prototype.add=function(c,l){this._verify2(c,l);var y=c.add(l);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},L.prototype.iadd=function(c,l){this._verify2(c,l);var y=c.iadd(l);return y.cmp(this.m)>=0&&y.isub(this.m),y},L.prototype.sub=function(c,l){this._verify2(c,l);var y=c.sub(l);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},L.prototype.isub=function(c,l){this._verify2(c,l);var y=c.isub(l);return y.cmpn(0)<0&&y.iadd(this.m),y},L.prototype.shl=function(c,l){return this._verify1(c),this.imod(c.ushln(l))},L.prototype.imul=function(c,l){return this._verify2(c,l),this.imod(c.imul(l))},L.prototype.mul=function(c,l){return this._verify2(c,l),this.imod(c.mul(l))},L.prototype.isqr=function(c){return this.imul(c,c.clone())},L.prototype.sqr=function(c){return this.mul(c,c)},L.prototype.sqrt=function(c){if(c.isZero())return c.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var y=this.m.add(new i(1)).iushrn(2);return this.pow(c,y)}for(var d=this.m.subn(1),h=0;!d.isZero()&&d.andln(1)===0;)h++,d.iushrn(1);r(!d.isZero());var v=new i(1).toRed(this),x=v.redNeg(),g=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,g).cmp(x)!==0;)f.redIAdd(x);for(var w=this.pow(f,d),D=this.pow(c,d.addn(1).iushrn(1)),T=this.pow(c,d),C=h;T.cmp(v)!==0;){for(var z=T,G=0;z.cmp(v)!==0;G++)z=z.redSqr();r(G<C);var V=this.pow(w,new i(1).iushln(C-G-1));D=D.redMul(V),w=V.redSqr(),T=T.redMul(w),C=G}return D},L.prototype.invm=function(c){var l=c._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},L.prototype.pow=function(c,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return c.clone();var y=4,d=new Array(1<<y);d[0]=new i(1).toRed(this),d[1]=c;for(var h=2;h<d.length;h++)d[h]=this.mul(d[h-1],c);var v=d[0],x=0,g=0,f=l.bitLength()%26;for(f===0&&(f=26),h=l.length-1;h>=0;h--){for(var w=l.words[h],D=f-1;D>=0;D--){var T=w>>D&1;if(v!==d[0]&&(v=this.sqr(v)),T===0&&x===0){g=0;continue}x<<=1,x|=T,g++,!(g!==y&&(h!==0||D!==0))&&(v=this.mul(v,d[x]),g=0,x=0)}f=26}return v},L.prototype.convertTo=function(c){var l=c.umod(this.m);return l===c?l.clone():l},L.prototype.convertFrom=function(c){var l=c.clone();return l.red=null,l},i.mont=function(c){return new W(c)};function W(E){L.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(W,L),W.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},W.prototype.convertFrom=function(c){var l=this.imod(c.mul(this.rinv));return l.red=null,l},W.prototype.imul=function(c,l){if(c.isZero()||l.isZero())return c.words[0]=0,c.length=1,c;var y=c.imul(l),d=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=y.isub(d).iushrn(this.shift),v=h;return h.cmp(this.m)>=0?v=h.isub(this.m):h.cmpn(0)<0&&(v=h.iadd(this.m)),v._forceRed(this)},W.prototype.mul=function(c,l){if(c.isZero()||l.isZero())return new i(0)._forceRed(this);var y=c.mul(l),d=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=y.isub(d).iushrn(this.shift),v=h;return h.cmp(this.m)>=0?v=h.isub(this.m):h.cmpn(0)<0&&(v=h.iadd(this.m)),v._forceRed(this)},W.prototype.invm=function(c){var l=this.imod(c._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(typeof oC>"u"||oC,cse)});var N5=H((A7t,cC)=>{_();var sC;cC.exports=function(e){return sC||(sC=new o0(null)),sC.generate(e)};function o0(t){this.rand=t}cC.exports.Rand=o0;o0.prototype.generate=function(e){return this._rand(e)};o0.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?o0.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?o0.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(o0.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(aC=j5(),typeof aC.randomBytes!="function")throw new Error("Not supported");o0.prototype._rand=function(e){return aC.randomBytes(e)}}catch{}var aC});var fC=H((T7t,use)=>{_();var jy=fse(),nqe=N5();function qy(t){this.rand=t||new nqe.Rand}use.exports=qy;qy.create=function(e){return new qy(e)};qy.prototype._randbelow=function(e){var r=e.bitLength(),n=Math.ceil(r/8);do var i=new jy(this.rand.generate(n));while(i.cmp(e)>=0);return i};qy.prototype._randrange=function(e,r){var n=r.sub(e);return e.add(this._randbelow(n))};qy.prototype.test=function(e,r,n){var i=e.bitLength(),o=jy.mont(e),s=new jy(1).toRed(o);r||(r=Math.max(1,i/48|0));for(var a=e.subn(1),u=0;!a.testn(u);u++);for(var m=e.shrn(u),p=a.toRed(o),b=!0;r>0;r--){var A=this._randrange(new jy(2),a);n&&n(A);var M=A.toRed(o).redPow(m);if(!(M.cmp(s)===0||M.cmp(p)===0)){for(var S=1;S<u;S++){if(M=M.redSqr(),M.cmp(s)===0)return!1;if(M.cmp(p)===0)break}if(S===u)return!1}}return b};qy.prototype.getDivisor=function(e,r){var n=e.bitLength(),i=jy.mont(e),o=new jy(1).toRed(i);r||(r=Math.max(1,n/48|0));for(var s=e.subn(1),a=0;!s.testn(a);a++);for(var u=e.shrn(a),m=s.toRed(i);r>0;r--){var p=this._randrange(new jy(2),s),b=e.gcd(p);if(b.cmpn(1)!==0)return b;var A=p.toRed(i).redPow(u);if(!(A.cmp(o)===0||A.cmp(m)===0)){for(var M=1;M<a;M++){if(A=A.redSqr(),A.cmp(o)===0)return A.fromRed().subn(1).gcd(e);if(A.cmp(m)===0)break}if(M===a)return A=A.redSqr(),A.fromRed().subn(1).gcd(e)}}return!1}});var mC=H((D7t,hse)=>{_();var iqe=fy();hse.exports=pC;pC.simpleSieve=dC;pC.fermatTest=hC;var us=iC(),oqe=new us(24),sqe=fC(),lse=new sqe,aqe=new us(1),lC=new us(2),cqe=new us(5),I7t=new us(16),k7t=new us(8),fqe=new us(10),uqe=new us(3),O7t=new us(7),lqe=new us(11),dse=new us(4),B7t=new us(12),uC=null;function dqe(){if(uC!==null)return uC;var t=1048576,e=[];e[0]=2;for(var r=1,n=3;n<t;n+=2){for(var i=Math.ceil(Math.sqrt(n)),o=0;o<r&&e[o]<=i&&n%e[o]!==0;o++);r!==o&&e[o]<=i||(e[r++]=n)}return uC=e,e}function dC(t){for(var e=dqe(),r=0;r<e.length;r++)if(t.modn(e[r])===0)return t.cmpn(e[r])===0;return!0}function hC(t){var e=us.mont(t);return lC.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)===0}function pC(t,e){if(t<16)return e===2||e===5?new us([140,123]):new us([140,39]);e=new us(e);for(var r,n;;){for(r=new us(iqe(Math.ceil(t/8)));r.bitLength()>t;)r.ishrn(1);if(r.isEven()&&r.iadd(aqe),r.testn(1)||r.iadd(lC),e.cmp(lC)){if(!e.cmp(cqe))for(;r.mod(fqe).cmp(uqe);)r.iadd(dse)}else for(;r.mod(oqe).cmp(lqe);)r.iadd(dse);if(n=r.shrn(1),dC(n)&&dC(r)&&hC(n)&&hC(r)&&lse.test(n)&&lse.test(r))return r}}});var pse=H((N7t,hqe)=>{hqe.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}});var bse=H((j7t,gse)=>{_();var af=iC(),pqe=fC(),mse=new pqe,mqe=new af(24),yqe=new af(11),gqe=new af(10),bqe=new af(3),vqe=new af(7),yse=mC(),wqe=fy();gse.exports=mh;function _qe(t,e){return e=e||"utf8",N.Buffer.isBuffer(t)||(t=new N.Buffer(t,e)),this._pub=new af(t),this}function xqe(t,e){return e=e||"utf8",N.Buffer.isBuffer(t)||(t=new N.Buffer(t,e)),this._priv=new af(t),this}var q5={};function Eqe(t,e){var r=e.toString("hex"),n=[r,t.toString(16)].join("_");if(n in q5)return q5[n];var i=0;if(t.isEven()||!yse.simpleSieve||!yse.fermatTest(t)||!mse.test(t))return i+=1,r==="02"||r==="05"?i+=8:i+=4,q5[n]=i,i;mse.test(t.shrn(1))||(i+=2);var o;switch(r){case"02":t.mod(mqe).cmp(yqe)&&(i+=8);break;case"05":o=t.mod(gqe),o.cmp(bqe)&&o.cmp(vqe)&&(i+=8);break;default:i+=4}return q5[n]=i,i}function mh(t,e,r){this.setGenerator(e),this.__prime=new af(t),this._prime=af.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=_qe,this.setPrivateKey=xqe):this._primeCode=8}Object.defineProperty(mh.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=Eqe(this.__prime,this.__gen)),this._primeCode}});mh.prototype.generateKeys=function(){return this._priv||(this._priv=new af(wqe(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()};mh.prototype.computeSecret=function(t){t=new af(t),t=t.toRed(this._prime);var e=t.redPow(this._priv).fromRed(),r=new N.Buffer(e.toArray()),n=this.getPrime();if(r.length<n.length){var i=new N.Buffer(n.length-r.length);i.fill(0),r=N.Buffer.concat([i,r])}return r};mh.prototype.getPublicKey=function(e){return $5(this._pub,e)};mh.prototype.getPrivateKey=function(e){return $5(this._priv,e)};mh.prototype.getPrime=function(t){return $5(this.__prime,t)};mh.prototype.getGenerator=function(t){return $5(this._gen,t)};mh.prototype.setGenerator=function(t,e){return e=e||"utf8",N.Buffer.isBuffer(t)||(t=new N.Buffer(t,e)),this.__gen=t,this._gen=new af(t),this};function $5(t,e){var r=new N.Buffer(t.toArray());return e?r.toString(e):r}});var _se=H(Mw=>{_();var Sqe=mC(),vse=pse(),yC=bse();function Mqe(t){var e=new N.Buffer(vse[t].prime,"hex"),r=new N.Buffer(vse[t].gen,"hex");return new yC(e,r)}var Aqe={binary:!0,hex:!0,base64:!0};function wse(t,e,r,n){return N.Buffer.isBuffer(e)||Aqe[e]===void 0?wse(t,"binary",e,r):(e=e||"binary",n=n||"binary",r=r||new N.Buffer([2]),N.Buffer.isBuffer(r)||(r=new N.Buffer(r,n)),typeof t=="number"?new yC(Sqe(t,r),r,!0):(N.Buffer.isBuffer(t)||(t=new N.Buffer(t,e)),new yC(t,r,!0)))}Mw.DiffieHellmanGroup=Mw.createDiffieHellmanGroup=Mw.getDiffieHellman=Mqe;Mw.createDiffieHellman=Mw.DiffieHellman=wse});var U5=H((gC,Ese)=>{_();var L5=Ut(),Sl=L5.Buffer;function xse(t,e){for(var r in t)e[r]=t[r]}Sl.from&&Sl.alloc&&Sl.allocUnsafe&&Sl.allocUnsafeSlow?Ese.exports=L5:(xse(L5,gC),gC.Buffer=$y);function $y(t,e,r){return Sl(t,e,r)}$y.prototype=Object.create(Sl.prototype);xse(Sl,$y);$y.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Sl(t,e,r)};$y.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Sl(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};$y.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Sl(t)};$y.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return L5.SlowBuffer(t)}});var bC=H((F7t,Sse)=>{_();Sse.exports=uo().EventEmitter});var Ise=H((K7t,Rse)=>{"use strict";_();function Mse(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ase(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Mse(Object(r),!0).forEach(function(n){Pqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mse(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pqe(t,e,r){return e=Tse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pse(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tse(n.key),n)}}function Rqe(t,e,r){return e&&Pse(t.prototype,e),r&&Pse(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tse(t){var e=Iqe(t,"string");return typeof e=="symbol"?e:String(e)}function Iqe(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kqe=Ut(),F5=kqe.Buffer,Oqe=yy(),vC=Oqe.inspect,Bqe=vC&&vC.custom||"inspect";function Dqe(t,e,r){F5.prototype.copy.call(t,e,r)}Rse.exports=function(){function t(){Tqe(this,t),this.head=null,this.tail=null,this.length=0}return Rqe(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return F5.alloc(0);for(var n=F5.allocUnsafe(r>>>0),i=this.head,o=0;i;)Dqe(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,o=n.data;for(r-=o.length;n=n.next;){var s=n.data,a=r>s.length?s.length:r;if(a===s.length?o+=s:o+=s.slice(0,r),r-=a,r===0){a===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(a));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(r){var n=F5.allocUnsafe(r),i=this.head,o=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var s=i.data,a=r>s.length?s.length:r;if(s.copy(n,n.length-r,0,a),r-=a,r===0){a===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++o}return this.length-=o,n}},{key:Bqe,value:function(r,n){return vC(this,Ase(Ase({},n),{},{depth:0,customInspect:!1}))}}]),t}()});var _C=H((G7t,Ose)=>{"use strict";_();function Cqe(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,O.default.nextTick(wC,this,t)):O.default.nextTick(wC,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?r._writableState?r._writableState.errorEmitted?O.default.nextTick(z5,r):(r._writableState.errorEmitted=!0,O.default.nextTick(kse,r,o)):O.default.nextTick(kse,r,o):e?(O.default.nextTick(z5,r),e(o)):O.default.nextTick(z5,r)}),this)}function kse(t,e){wC(t,e),z5(t)}function z5(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Nqe(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function wC(t,e){t.emit("error",e)}function jqe(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}Ose.exports={destroy:Cqe,undestroy:Nqe,errorOrDestroy:jqe}});var Ly=H((H7t,Cse)=>{"use strict";_();function qqe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Dse={};function cf(t,e,r){r||(r=Error);function n(o,s,a){return typeof e=="string"?e:e(o,s,a)}var i=function(o){qqe(s,o);function s(a,u,m){return o.call(this,n(a,u,m))||this}return s}(r);i.prototype.name=r.name,i.prototype.code=t,Dse[t]=i}function Bse(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function $qe(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Lqe(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Uqe(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}cf("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);cf("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&$qe(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(Lqe(t," argument"))i="The ".concat(t," ").concat(n," ").concat(Bse(e,"type"));else{var o=Uqe(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(n," ").concat(Bse(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);cf("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");cf("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});cf("ERR_STREAM_PREMATURE_CLOSE","Premature close");cf("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});cf("ERR_MULTIPLE_CALLBACK","Callback called multiple times");cf("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");cf("ERR_STREAM_WRITE_AFTER_END","write after end");cf("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);cf("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);cf("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Cse.exports.codes=Dse});var xC=H((J7t,Nse)=>{"use strict";_();var Fqe=Ly().codes.ERR_INVALID_OPT_VALUE;function zqe(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Kqe(t,e,r,n){var i=zqe(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?r:"highWaterMark";throw new Fqe(o,i)}return Math.floor(i)}return t.objectMode?16:16*1024}Nse.exports={getHighWaterMark:Kqe}});var MC=H((Q7t,Fse)=>{"use strict";_();Fse.exports=Bi;function qse(t){var e=this;this.next=null,this.entry=null,this.finish=function(){g$e(e,t)}}var Aw;Bi.WritableState=yE;var Wqe={deprecate:C8()},$se=bC(),W5=Ut().Buffer,Gqe=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Vqe(t){return W5.from(t)}function Hqe(t){return W5.isBuffer(t)||t instanceof Gqe}var SC=_C(),Zqe=xC(),Jqe=Zqe.getHighWaterMark,s0=Ly().codes,Yqe=s0.ERR_INVALID_ARG_TYPE,Qqe=s0.ERR_METHOD_NOT_IMPLEMENTED,Xqe=s0.ERR_MULTIPLE_CALLBACK,e$e=s0.ERR_STREAM_CANNOT_PIPE,t$e=s0.ERR_STREAM_DESTROYED,r$e=s0.ERR_STREAM_NULL_VALUES,n$e=s0.ERR_STREAM_WRITE_AFTER_END,i$e=s0.ERR_UNKNOWN_ENCODING,Pw=SC.errorOrDestroy;Rt()(Bi,$se);function o$e(){}function yE(t,e,r){Aw=Aw||Uy(),t=t||{},typeof r!="boolean"&&(r=e instanceof Aw),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=Jqe(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){d$e(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new qse(this)}yE.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(yE.prototype,"buffer",{get:Wqe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var K5;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(K5=Function.prototype[Symbol.hasInstance],Object.defineProperty(Bi,Symbol.hasInstance,{value:function(e){return K5.call(this,e)?!0:this!==Bi?!1:e&&e._writableState instanceof yE}})):K5=function(e){return e instanceof this};function Bi(t){Aw=Aw||Uy();var e=this instanceof Aw;if(!e&&!K5.call(Bi,this))return new Bi(t);this._writableState=new yE(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),$se.call(this)}Bi.prototype.pipe=function(){Pw(this,new e$e)};function s$e(t,e){var r=new n$e;Pw(t,r),O.default.nextTick(e,r)}function a$e(t,e,r,n){var i;return r===null?i=new r$e:typeof r!="string"&&!e.objectMode&&(i=new Yqe("chunk",["string","Buffer"],r)),i?(Pw(t,i),O.default.nextTick(n,i),!1):!0}Bi.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&Hqe(t);return o&&!W5.isBuffer(t)&&(t=Vqe(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=o$e),n.ending?s$e(this,r):(o||a$e(this,n,t,r))&&(n.pendingcb++,i=f$e(this,n,o,t,e,r)),i};Bi.prototype.cork=function(){this._writableState.corked++};Bi.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Lse(this,t))};Bi.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new i$e(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(Bi.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function c$e(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=W5.from(e,r)),e}Object.defineProperty(Bi.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function f$e(t,e,r,n,i,o){if(!r){var s=c$e(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var m=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},m?m.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else EC(t,e,!1,a,n,i,o);return u}function EC(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new t$e("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function u$e(t,e,r,n,i){--e.pendingcb,r?(O.default.nextTick(i,n),O.default.nextTick(mE,t,e),t._writableState.errorEmitted=!0,Pw(t,n)):(i(n),t._writableState.errorEmitted=!0,Pw(t,n),mE(t,e))}function l$e(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function d$e(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new Xqe;if(l$e(r),e)u$e(t,r,n,e,i);else{var o=Use(r)||t.destroyed;!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Lse(t,r),n?O.default.nextTick(jse,t,r,o,i):jse(t,r,o,i)}}function jse(t,e,r,n){r||h$e(t,e),e.pendingcb--,n(),mE(t,e)}function h$e(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function Lse(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,EC(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new qse(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,m=r.encoding,p=r.callback,b=e.objectMode?1:u.length;if(EC(t,e,!1,b,u,m,p),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Bi.prototype._write=function(t,e,r){r(new Qqe("_write()"))};Bi.prototype._writev=null;Bi.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||y$e(this,n,r),this};Object.defineProperty(Bi.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Use(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function p$e(t,e){t._final(function(r){e.pendingcb--,r&&Pw(t,r),e.prefinished=!0,t.emit("prefinish"),mE(t,e)})}function m$e(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,O.default.nextTick(p$e,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function mE(t,e){var r=Use(e);if(r&&(m$e(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function y$e(t,e,r){e.ending=!0,mE(t,e),r&&(e.finished?O.default.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function g$e(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(Bi.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});Bi.prototype.destroy=SC.destroy;Bi.prototype._undestroy=SC.undestroy;Bi.prototype._destroy=function(t,e){e(t)}});var Uy=H((e9t,Kse)=>{"use strict";_();var b$e=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};Kse.exports=Ml;var zse=TC(),PC=MC();Rt()(Ml,zse);for(AC=b$e(PC.prototype),G5=0;G5<AC.length;G5++)V5=AC[G5],Ml.prototype[V5]||(Ml.prototype[V5]=PC.prototype[V5]);var AC,V5,G5;function Ml(t){if(!(this instanceof Ml))return new Ml(t);zse.call(this,t),PC.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",v$e)))}Object.defineProperty(Ml.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Ml.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Ml.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function v$e(){this._writableState.ended||O.default.nextTick(w$e,this)}function w$e(t){t.end()}Object.defineProperty(Ml.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var H5=H((r9t,Vse)=>{"use strict";_();var Wse=Ly().codes.ERR_STREAM_PREMATURE_CLOSE;function _$e(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function x$e(){}function E$e(t){return t.setHeader&&typeof t.abort=="function"}function Gse(t,e,r){if(typeof e=="function")return Gse(t,null,e);e||(e={}),r=_$e(r||x$e);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,o=function(){t.writable||a()},s=t._writableState&&t._writableState.finished,a=function(){i=!1,s=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,m=function(){n=!1,u=!0,i||r.call(t)},p=function(S){r.call(t,S)},b=function(){var S;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(S=new Wse),r.call(t,S);if(i&&!s)return(!t._writableState||!t._writableState.ended)&&(S=new Wse),r.call(t,S)},A=function(){t.req.on("finish",a)};return E$e(t)?(t.on("complete",a),t.on("abort",b),t.req?A():t.on("request",A)):i&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",m),t.on("finish",a),e.error!==!1&&t.on("error",p),t.on("close",b),function(){t.removeListener("complete",a),t.removeListener("abort",b),t.removeListener("request",A),t.req&&t.req.removeListener("finish",a),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",a),t.removeListener("end",m),t.removeListener("error",p),t.removeListener("close",b)}}Vse.exports=Gse});var Zse=H((i9t,Hse)=>{"use strict";_();var Z5;function a0(t,e,r){return e=S$e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S$e(t){var e=M$e(t,"string");return typeof e=="symbol"?e:String(e)}function M$e(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var A$e=H5(),c0=Symbol("lastResolve"),Fy=Symbol("lastReject"),gE=Symbol("error"),J5=Symbol("ended"),zy=Symbol("lastPromise"),RC=Symbol("handlePromise"),Ky=Symbol("stream");function f0(t,e){return{value:t,done:e}}function P$e(t){var e=t[c0];if(e!==null){var r=t[Ky].read();r!==null&&(t[zy]=null,t[c0]=null,t[Fy]=null,e(f0(r,!1)))}}function T$e(t){O.default.nextTick(P$e,t)}function R$e(t,e){return function(r,n){t.then(function(){if(e[J5]){r(f0(void 0,!0));return}e[RC](r,n)},n)}}var I$e=Object.getPrototypeOf(function(){}),k$e=Object.setPrototypeOf((Z5={get stream(){return this[Ky]},next:function(){var e=this,r=this[gE];if(r!==null)return Promise.reject(r);if(this[J5])return Promise.resolve(f0(void 0,!0));if(this[Ky].destroyed)return new Promise(function(s,a){O.default.nextTick(function(){e[gE]?a(e[gE]):s(f0(void 0,!0))})});var n=this[zy],i;if(n)i=new Promise(R$e(n,this));else{var o=this[Ky].read();if(o!==null)return Promise.resolve(f0(o,!1));i=new Promise(this[RC])}return this[zy]=i,i}},a0(Z5,Symbol.asyncIterator,function(){return this}),a0(Z5,"return",function(){var e=this;return new Promise(function(r,n){e[Ky].destroy(null,function(i){if(i){n(i);return}r(f0(void 0,!0))})})}),Z5),I$e),O$e=function(e){var r,n=Object.create(k$e,(r={},a0(r,Ky,{value:e,writable:!0}),a0(r,c0,{value:null,writable:!0}),a0(r,Fy,{value:null,writable:!0}),a0(r,gE,{value:null,writable:!0}),a0(r,J5,{value:e._readableState.endEmitted,writable:!0}),a0(r,RC,{value:function(o,s){var a=n[Ky].read();a?(n[zy]=null,n[c0]=null,n[Fy]=null,o(f0(a,!1))):(n[c0]=o,n[Fy]=s)},writable:!0}),r));return n[zy]=null,A$e(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[Fy];o!==null&&(n[zy]=null,n[c0]=null,n[Fy]=null,o(i)),n[gE]=i;return}var s=n[c0];s!==null&&(n[zy]=null,n[c0]=null,n[Fy]=null,s(f0(void 0,!0))),n[J5]=!0}),e.on("readable",T$e.bind(null,n)),n};Hse.exports=O$e});var Yse=H((s9t,Jse)=>{_();Jse.exports=function(){throw new Error("Readable.from is not available in the browser")}});var TC=H((f9t,aae)=>{"use strict";_();aae.exports=tn;var Tw;tn.ReadableState=tae;var c9t=uo().EventEmitter,eae=function(e,r){return e.listeners(r).length},vE=bC(),Y5=Ut().Buffer,B$e=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function D$e(t){return Y5.from(t)}function C$e(t){return Y5.isBuffer(t)||t instanceof B$e}var IC=yy(),Tr;IC&&IC.debuglog?Tr=IC.debuglog("stream"):Tr=function(){};var N$e=Ise(),jC=_C(),j$e=xC(),q$e=j$e.getHighWaterMark,Q5=Ly().codes,$$e=Q5.ERR_INVALID_ARG_TYPE,L$e=Q5.ERR_STREAM_PUSH_AFTER_EOF,U$e=Q5.ERR_METHOD_NOT_IMPLEMENTED,F$e=Q5.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Rw,kC,OC;Rt()(tn,vE);var bE=jC.errorOrDestroy,BC=["error","close","destroy","pause","resume"];function z$e(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function tae(t,e,r){Tw=Tw||Uy(),t=t||{},typeof r!="boolean"&&(r=e instanceof Tw),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=q$e(this,t,"readableHighWaterMark",r),this.buffer=new N$e,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Rw||(Rw=ou().StringDecoder),this.decoder=new Rw(t.encoding),this.encoding=t.encoding)}function tn(t){if(Tw=Tw||Uy(),!(this instanceof tn))return new tn(t);var e=this instanceof Tw;this._readableState=new tae(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),vE.call(this)}Object.defineProperty(tn.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});tn.prototype.destroy=jC.destroy;tn.prototype._undestroy=jC.undestroy;tn.prototype._destroy=function(t,e){e(t)};tn.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Y5.from(t,e),e=""),n=!0),rae(this,t,e,!1,n)};tn.prototype.unshift=function(t){return rae(this,t,null,!0,!1)};function rae(t,e,r,n,i){Tr("readableAddChunk",e);var o=t._readableState;if(e===null)o.reading=!1,G$e(t,o);else{var s;if(i||(s=K$e(o,e)),s)bE(t,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==Y5.prototype&&(e=D$e(e)),n)o.endEmitted?bE(t,new F$e):DC(t,o,e,!0);else if(o.ended)bE(t,new L$e);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?DC(t,o,e,!1):NC(t,o)):DC(t,o,e,!1)}else n||(o.reading=!1,NC(t,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function DC(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&X5(t)),NC(t,e)}function K$e(t,e){var r;return!C$e(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new $$e("chunk",["string","Buffer","Uint8Array"],e)),r}tn.prototype.isPaused=function(){return this._readableState.flowing===!1};tn.prototype.setEncoding=function(t){Rw||(Rw=ou().StringDecoder);var e=new Rw(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var Qse=1073741824;function W$e(t){return t>=Qse?t=Qse:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function Xse(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=W$e(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}tn.prototype.read=function(t){Tr("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Tr("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?CC(this):X5(this),null;if(t=Xse(t,e),t===0&&e.ended)return e.length===0&&CC(this),null;var n=e.needReadable;Tr("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Tr("length less than watermark",n)),e.ended||e.reading?(n=!1,Tr("reading or ended",n)):n&&(Tr("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Xse(r,e)));var i;return t>0?i=oae(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&CC(this)),i!==null&&this.emit("data",i),i};function G$e(t,e){if(Tr("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?X5(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,nae(t)))}}function X5(t){var e=t._readableState;Tr("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Tr("emitReadable",e.flowing),e.emittedReadable=!0,O.default.nextTick(nae,t))}function nae(t){var e=t._readableState;Tr("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,qC(t)}function NC(t,e){e.readingMore||(e.readingMore=!0,O.default.nextTick(V$e,t,e))}function V$e(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(Tr("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}tn.prototype._read=function(t){bE(this,new U$e("_read()"))};tn.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Tr("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==O.default.stdout&&t!==O.default.stderr,o=i?a:P;n.endEmitted?O.default.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(k,R){Tr("onunpipe"),k===r&&R&&R.hasUnpiped===!1&&(R.hasUnpiped=!0,p())}function a(){Tr("onend"),t.end()}var u=H$e(r);t.on("drain",u);var m=!1;function p(){Tr("cleanup"),t.removeListener("close",M),t.removeListener("finish",S),t.removeListener("drain",u),t.removeListener("error",A),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",P),r.removeListener("data",b),m=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",b);function b(k){Tr("ondata");var R=t.write(k);Tr("dest.write",R),R===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&sae(n.pipes,t)!==-1)&&!m&&(Tr("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function A(k){Tr("onerror",k),P(),t.removeListener("error",A),eae(t,"error")===0&&bE(t,k)}z$e(t,"error",A);function M(){t.removeListener("finish",S),P()}t.once("close",M);function S(){Tr("onfinish"),t.removeListener("close",M),P()}t.once("finish",S);function P(){Tr("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Tr("pipe resume"),r.resume()),t};function H$e(t){return function(){var r=t._readableState;Tr("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&eae(t,"data")&&(r.flowing=!0,qC(t))}}tn.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=sae(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};tn.prototype.on=function(t,e){var r=vE.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Tr("on readable",n.length,n.reading),n.length?X5(this):n.reading||O.default.nextTick(Z$e,this)),r};tn.prototype.addListener=tn.prototype.on;tn.prototype.removeListener=function(t,e){var r=vE.prototype.removeListener.call(this,t,e);return t==="readable"&&O.default.nextTick(iae,this),r};tn.prototype.removeAllListeners=function(t){var e=vE.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&O.default.nextTick(iae,this),e};function iae(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function Z$e(t){Tr("readable nexttick read 0"),t.read(0)}tn.prototype.resume=function(){var t=this._readableState;return t.flowing||(Tr("resume"),t.flowing=!t.readableListening,J$e(this,t)),t.paused=!1,this};function J$e(t,e){e.resumeScheduled||(e.resumeScheduled=!0,O.default.nextTick(Y$e,t,e))}function Y$e(t,e){Tr("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),qC(t),e.flowing&&!e.reading&&t.read(0)}tn.prototype.pause=function(){return Tr("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Tr("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function qC(t){var e=t._readableState;for(Tr("flow",e.flowing);e.flowing&&t.read()!==null;);}tn.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(Tr("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(Tr("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var o=0;o<BC.length;o++)t.on(BC[o],this.emit.bind(this,BC[o]));return this._read=function(s){Tr("wrapped _read",s),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(tn.prototype[Symbol.asyncIterator]=function(){return kC===void 0&&(kC=Zse()),kC(this)});Object.defineProperty(tn.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(tn.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(tn.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});tn._fromList=oae;Object.defineProperty(tn.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function oae(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function CC(t){var e=t._readableState;Tr("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,O.default.nextTick(Q$e,e,t))}function Q$e(t,e){if(Tr("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(tn.from=function(t,e){return OC===void 0&&(OC=Yse()),OC(tn,t,e)});function sae(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var $C=H((l9t,fae)=>{"use strict";_();fae.exports=yh;var e4=Ly().codes,X$e=e4.ERR_METHOD_NOT_IMPLEMENTED,eLe=e4.ERR_MULTIPLE_CALLBACK,tLe=e4.ERR_TRANSFORM_ALREADY_TRANSFORMING,rLe=e4.ERR_TRANSFORM_WITH_LENGTH_0,t4=Uy();Rt()(yh,t4);function nLe(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new eLe);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function yh(t){if(!(this instanceof yh))return new yh(t);t4.call(this,t),this._transformState={afterTransform:nLe.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",iLe)}function iLe(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){cae(t,e,r)}):cae(this,null,null)}yh.prototype.push=function(t,e){return this._transformState.needTransform=!1,t4.prototype.push.call(this,t,e)};yh.prototype._transform=function(t,e,r){r(new X$e("_transform()"))};yh.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};yh.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};yh.prototype._destroy=function(t,e){t4.prototype._destroy.call(this,t,function(r){e(r)})};function cae(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new rLe;if(t._transformState.transforming)throw new tLe;return t.push(null)}});var dae=H((h9t,lae)=>{"use strict";_();lae.exports=wE;var uae=$C();Rt()(wE,uae);function wE(t){if(!(this instanceof wE))return new wE(t);uae.call(this,t)}wE.prototype._transform=function(t,e,r){r(null,t)}});var gae=H((m9t,yae)=>{"use strict";_();var LC;function oLe(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var mae=Ly().codes,sLe=mae.ERR_MISSING_ARGS,aLe=mae.ERR_STREAM_DESTROYED;function hae(t){if(t)throw t}function cLe(t){return t.setHeader&&typeof t.abort=="function"}function fLe(t,e,r,n){n=oLe(n);var i=!1;t.on("close",function(){i=!0}),LC===void 0&&(LC=H5()),LC(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,cLe(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(s||new aLe("pipe"))}}}function pae(t){t()}function uLe(t,e){return t.pipe(e)}function lLe(t){return!t.length||typeof t[t.length-1]!="function"?hae:t.pop()}function dLe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=lLe(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new sLe("streams");var i,o=e.map(function(s,a){var u=a<e.length-1,m=a>0;return fLe(s,u,m,function(p){i||(i=p),p&&o.forEach(pae),!u&&(o.forEach(pae),n(i))})});return e.reduce(uLe)}yae.exports=dLe});var vae=H((ff,bae)=>{_();ff=bae.exports=TC();ff.Stream=ff;ff.Readable=ff;ff.Writable=MC();ff.Duplex=Uy();ff.Transform=$C();ff.PassThrough=dae();ff.finished=H5();ff.pipeline=gae()});var r4=H((wae,UC)=>{_();(function(t,e){"use strict";function r(y,d){if(!y)throw new Error(d||"Assertion failed")}function n(y,d){y.super_=d;var h=function(){};h.prototype=d.prototype,y.prototype=new h,y.prototype.constructor=y}function i(y,d,h){if(i.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,y!==null&&((d==="le"||d==="be")&&(h=d,d=10),this._init(y||0,d||10,h||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ut().Buffer}catch{}i.isBN=function(d){return d instanceof i?!0:d!==null&&typeof d=="object"&&d.constructor.wordSize===i.wordSize&&Array.isArray(d.words)},i.max=function(d,h){return d.cmp(h)>0?d:h},i.min=function(d,h){return d.cmp(h)<0?d:h},i.prototype._init=function(d,h,v){if(typeof d=="number")return this._initNumber(d,h,v);if(typeof d=="object")return this._initArray(d,h,v);h==="hex"&&(h=16),r(h===(h|0)&&h>=2&&h<=36),d=d.toString().replace(/\s+/g,"");var x=0;d[0]==="-"&&(x++,this.negative=1),x<d.length&&(h===16?this._parseHex(d,x,v):(this._parseBase(d,h,x),v==="le"&&this._initArray(this.toArray(),h,v)))},i.prototype._initNumber=function(d,h,v){d<0&&(this.negative=1,d=-d),d<67108864?(this.words=[d&67108863],this.length=1):d<4503599627370496?(this.words=[d&67108863,d/67108864&67108863],this.length=2):(r(d<9007199254740992),this.words=[d&67108863,d/67108864&67108863,1],this.length=3),v==="le"&&this._initArray(this.toArray(),h,v)},i.prototype._initArray=function(d,h,v){if(r(typeof d.length=="number"),d.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(d.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var g,f,w=0;if(v==="be")for(x=d.length-1,g=0;x>=0;x-=3)f=d[x]|d[x-1]<<8|d[x-2]<<16,this.words[g]|=f<<w&67108863,this.words[g+1]=f>>>26-w&67108863,w+=24,w>=26&&(w-=26,g++);else if(v==="le")for(x=0,g=0;x<d.length;x+=3)f=d[x]|d[x+1]<<8|d[x+2]<<16,this.words[g]|=f<<w&67108863,this.words[g+1]=f>>>26-w&67108863,w+=24,w>=26&&(w-=26,g++);return this._strip()};function s(y,d){var h=y.charCodeAt(d);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;r(!1,"Invalid character in "+y)}function a(y,d,h){var v=s(y,h);return h-1>=d&&(v|=s(y,h-1)<<4),v}i.prototype._parseHex=function(d,h,v){this.length=Math.ceil((d.length-h)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var g=0,f=0,w;if(v==="be")for(x=d.length-1;x>=h;x-=2)w=a(d,h,x)<<g,this.words[f]|=w&67108863,g>=18?(g-=18,f+=1,this.words[f]|=w>>>26):g+=8;else{var D=d.length-h;for(x=D%2===0?h+1:h;x<d.length;x+=2)w=a(d,h,x)<<g,this.words[f]|=w&67108863,g>=18?(g-=18,f+=1,this.words[f]|=w>>>26):g+=8}this._strip()};function u(y,d,h,v){for(var x=0,g=0,f=Math.min(y.length,h),w=d;w<f;w++){var D=y.charCodeAt(w)-48;x*=v,D>=49?g=D-49+10:D>=17?g=D-17+10:g=D,r(D>=0&&g<v,"Invalid character"),x+=g}return x}i.prototype._parseBase=function(d,h,v){this.words=[0],this.length=1;for(var x=0,g=1;g<=67108863;g*=h)x++;x--,g=g/h|0;for(var f=d.length-v,w=f%x,D=Math.min(f,f-w)+v,T=0,C=v;C<D;C+=x)T=u(d,C,C+x,h),this.imuln(g),this.words[0]+T<67108864?this.words[0]+=T:this._iaddn(T);if(w!==0){var z=1;for(T=u(d,C,d.length,h),C=0;C<w;C++)z*=h;this.imuln(z),this.words[0]+T<67108864?this.words[0]+=T:this._iaddn(T)}this._strip()},i.prototype.copy=function(d){d.words=new Array(this.length);for(var h=0;h<this.length;h++)d.words[h]=this.words[h];d.length=this.length,d.negative=this.negative,d.red=this.red};function m(y,d){y.words=d.words,y.length=d.length,y.negative=d.negative,y.red=d.red}if(i.prototype._move=function(d){m(d,this)},i.prototype.clone=function(){var d=new i(null);return this.copy(d),d},i.prototype._expand=function(d){for(;this.length<d;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=p}catch{i.prototype.inspect=p}else i.prototype.inspect=p;function p(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(d,h){d=d||10,h=h|0||1;var v;if(d===16||d==="hex"){v="";for(var x=0,g=0,f=0;f<this.length;f++){var w=this.words[f],D=((w<<x|g)&16777215).toString(16);g=w>>>24-x&16777215,x+=2,x>=26&&(x-=26,f--),g!==0||f!==this.length-1?v=b[6-D.length]+D+v:v=D+v}for(g!==0&&(v=g.toString(16)+v);v.length%h!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}if(d===(d|0)&&d>=2&&d<=36){var T=A[d],C=M[d];v="";var z=this.clone();for(z.negative=0;!z.isZero();){var G=z.modrn(C).toString(d);z=z.idivn(C),z.isZero()?v=G+v:v=b[T-G.length]+G+v}for(this.isZero()&&(v="0"+v);v.length%h!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var d=this.words[0];return this.length===2?d+=this.words[1]*67108864:this.length===3&&this.words[2]===1?d+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-d:d},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(d,h){return this.toArrayLike(o,d,h)}),i.prototype.toArray=function(d,h){return this.toArrayLike(Array,d,h)};var S=function(d,h){return d.allocUnsafe?d.allocUnsafe(h):new d(h)};i.prototype.toArrayLike=function(d,h,v){this._strip();var x=this.byteLength(),g=v||Math.max(1,x);r(x<=g,"byte array longer than desired length"),r(g>0,"Requested array length <= 0");var f=S(d,g),w=h==="le"?"LE":"BE";return this["_toArrayLike"+w](f,x),f},i.prototype._toArrayLikeLE=function(d,h){for(var v=0,x=0,g=0,f=0;g<this.length;g++){var w=this.words[g]<<f|x;d[v++]=w&255,v<d.length&&(d[v++]=w>>8&255),v<d.length&&(d[v++]=w>>16&255),f===6?(v<d.length&&(d[v++]=w>>24&255),x=0,f=0):(x=w>>>24,f+=2)}if(v<d.length)for(d[v++]=x;v<d.length;)d[v++]=0},i.prototype._toArrayLikeBE=function(d,h){for(var v=d.length-1,x=0,g=0,f=0;g<this.length;g++){var w=this.words[g]<<f|x;d[v--]=w&255,v>=0&&(d[v--]=w>>8&255),v>=0&&(d[v--]=w>>16&255),f===6?(v>=0&&(d[v--]=w>>24&255),x=0,f=0):(x=w>>>24,f+=2)}if(v>=0)for(d[v--]=x;v>=0;)d[v--]=0},Math.clz32?i.prototype._countBits=function(d){return 32-Math.clz32(d)}:i.prototype._countBits=function(d){var h=d,v=0;return h>=4096&&(v+=13,h>>>=13),h>=64&&(v+=7,h>>>=7),h>=8&&(v+=4,h>>>=4),h>=2&&(v+=2,h>>>=2),v+h},i.prototype._zeroBits=function(d){if(d===0)return 26;var h=d,v=0;return h&8191||(v+=13,h>>>=13),h&127||(v+=7,h>>>=7),h&15||(v+=4,h>>>=4),h&3||(v+=2,h>>>=2),h&1||v++,v},i.prototype.bitLength=function(){var d=this.words[this.length-1],h=this._countBits(d);return(this.length-1)*26+h};function P(y){for(var d=new Array(y.bitLength()),h=0;h<d.length;h++){var v=h/26|0,x=h%26;d[h]=y.words[v]>>>x&1}return d}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var d=0,h=0;h<this.length;h++){var v=this._zeroBits(this.words[h]);if(d+=v,v!==26)break}return d},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(d){return this.negative!==0?this.abs().inotn(d).iaddn(1):this.clone()},i.prototype.fromTwos=function(d){return this.testn(d-1)?this.notn(d).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(d){for(;this.length<d.length;)this.words[this.length++]=0;for(var h=0;h<d.length;h++)this.words[h]=this.words[h]|d.words[h];return this._strip()},i.prototype.ior=function(d){return r((this.negative|d.negative)===0),this.iuor(d)},i.prototype.or=function(d){return this.length>d.length?this.clone().ior(d):d.clone().ior(this)},i.prototype.uor=function(d){return this.length>d.length?this.clone().iuor(d):d.clone().iuor(this)},i.prototype.iuand=function(d){var h;this.length>d.length?h=d:h=this;for(var v=0;v<h.length;v++)this.words[v]=this.words[v]&d.words[v];return this.length=h.length,this._strip()},i.prototype.iand=function(d){return r((this.negative|d.negative)===0),this.iuand(d)},i.prototype.and=function(d){return this.length>d.length?this.clone().iand(d):d.clone().iand(this)},i.prototype.uand=function(d){return this.length>d.length?this.clone().iuand(d):d.clone().iuand(this)},i.prototype.iuxor=function(d){var h,v;this.length>d.length?(h=this,v=d):(h=d,v=this);for(var x=0;x<v.length;x++)this.words[x]=h.words[x]^v.words[x];if(this!==h)for(;x<h.length;x++)this.words[x]=h.words[x];return this.length=h.length,this._strip()},i.prototype.ixor=function(d){return r((this.negative|d.negative)===0),this.iuxor(d)},i.prototype.xor=function(d){return this.length>d.length?this.clone().ixor(d):d.clone().ixor(this)},i.prototype.uxor=function(d){return this.length>d.length?this.clone().iuxor(d):d.clone().iuxor(this)},i.prototype.inotn=function(d){r(typeof d=="number"&&d>=0);var h=Math.ceil(d/26)|0,v=d%26;this._expand(h),v>0&&h--;for(var x=0;x<h;x++)this.words[x]=~this.words[x]&67108863;return v>0&&(this.words[x]=~this.words[x]&67108863>>26-v),this._strip()},i.prototype.notn=function(d){return this.clone().inotn(d)},i.prototype.setn=function(d,h){r(typeof d=="number"&&d>=0);var v=d/26|0,x=d%26;return this._expand(v+1),h?this.words[v]=this.words[v]|1<<x:this.words[v]=this.words[v]&~(1<<x),this._strip()},i.prototype.iadd=function(d){var h;if(this.negative!==0&&d.negative===0)return this.negative=0,h=this.isub(d),this.negative^=1,this._normSign();if(this.negative===0&&d.negative!==0)return d.negative=0,h=this.isub(d),d.negative=1,h._normSign();var v,x;this.length>d.length?(v=this,x=d):(v=d,x=this);for(var g=0,f=0;f<x.length;f++)h=(v.words[f]|0)+(x.words[f]|0)+g,this.words[f]=h&67108863,g=h>>>26;for(;g!==0&&f<v.length;f++)h=(v.words[f]|0)+g,this.words[f]=h&67108863,g=h>>>26;if(this.length=v.length,g!==0)this.words[this.length]=g,this.length++;else if(v!==this)for(;f<v.length;f++)this.words[f]=v.words[f];return this},i.prototype.add=function(d){var h;return d.negative!==0&&this.negative===0?(d.negative=0,h=this.sub(d),d.negative^=1,h):d.negative===0&&this.negative!==0?(this.negative=0,h=d.sub(this),this.negative=1,h):this.length>d.length?this.clone().iadd(d):d.clone().iadd(this)},i.prototype.isub=function(d){if(d.negative!==0){d.negative=0;var h=this.iadd(d);return d.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(d),this.negative=1,this._normSign();var v=this.cmp(d);if(v===0)return this.negative=0,this.length=1,this.words[0]=0,this;var x,g;v>0?(x=this,g=d):(x=d,g=this);for(var f=0,w=0;w<g.length;w++)h=(x.words[w]|0)-(g.words[w]|0)+f,f=h>>26,this.words[w]=h&67108863;for(;f!==0&&w<x.length;w++)h=(x.words[w]|0)+f,f=h>>26,this.words[w]=h&67108863;if(f===0&&w<x.length&&x!==this)for(;w<x.length;w++)this.words[w]=x.words[w];return this.length=Math.max(this.length,w),x!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(d){return this.clone().isub(d)};function k(y,d,h){h.negative=d.negative^y.negative;var v=y.length+d.length|0;h.length=v,v=v-1|0;var x=y.words[0]|0,g=d.words[0]|0,f=x*g,w=f&67108863,D=f/67108864|0;h.words[0]=w;for(var T=1;T<v;T++){for(var C=D>>>26,z=D&67108863,G=Math.min(T,d.length-1),V=Math.max(0,T-y.length+1);V<=G;V++){var Z=T-V|0;x=y.words[Z]|0,g=d.words[V]|0,f=x*g+z,C+=f/67108864|0,z=f&67108863}h.words[T]=z|0,D=C|0}return D!==0?h.words[T]=D|0:h.length--,h._strip()}var R=function(d,h,v){var x=d.words,g=h.words,f=v.words,w=0,D,T,C,z=x[0]|0,G=z&8191,V=z>>>13,Z=x[1]|0,J=Z&8191,X=Z>>>13,se=x[2]|0,Q=se&8191,te=se>>>13,de=x[3]|0,ie=de&8191,ae=de>>>13,fe=x[4]|0,oe=fe&8191,ce=fe>>>13,Ke=x[5]|0,pe=Ke&8191,Me=Ke>>>13,it=x[6]|0,we=it&8191,Ae=it>>>13,er=x[7]|0,me=er&8191,he=er>>>13,mt=x[8]|0,ye=mt&8191,le=mt>>>13,kt=x[9]|0,_e=kt&8191,Ee=kt>>>13,Ht=g[0]|0,Pe=Ht&8191,Se=Ht>>>13,Pn=g[1]|0,Te=Pn&8191,Ie=Pn>>>13,_i=g[2]|0,Re=_i&8191,Ce=_i>>>13,Tn=g[3]|0,Ne=Tn&8191,Oe=Tn>>>13,xi=g[4]|0,ke=xi&8191,Be=xi>>>13,Ei=g[5]|0,De=Ei&8191,je=Ei>>>13,si=g[6]|0,ee=si&8191,Y=si>>>13,ue=g[7]|0,re=ue&8191,ne=ue>>>13,ze=g[8]|0,ge=ze&8191,ve=ze>>>13,gt=g[9]|0,ot=gt&8191,Ge=gt>>>13;v.negative=d.negative^h.negative,v.length=19,D=Math.imul(G,Pe),T=Math.imul(G,Se),T=T+Math.imul(V,Pe)|0,C=Math.imul(V,Se);var Pt=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,D=Math.imul(J,Pe),T=Math.imul(J,Se),T=T+Math.imul(X,Pe)|0,C=Math.imul(X,Se),D=D+Math.imul(G,Te)|0,T=T+Math.imul(G,Ie)|0,T=T+Math.imul(V,Te)|0,C=C+Math.imul(V,Ie)|0;var Lt=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,D=Math.imul(Q,Pe),T=Math.imul(Q,Se),T=T+Math.imul(te,Pe)|0,C=Math.imul(te,Se),D=D+Math.imul(J,Te)|0,T=T+Math.imul(J,Ie)|0,T=T+Math.imul(X,Te)|0,C=C+Math.imul(X,Ie)|0,D=D+Math.imul(G,Re)|0,T=T+Math.imul(G,Ce)|0,T=T+Math.imul(V,Re)|0,C=C+Math.imul(V,Ce)|0;var St=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(St>>>26)|0,St&=67108863,D=Math.imul(ie,Pe),T=Math.imul(ie,Se),T=T+Math.imul(ae,Pe)|0,C=Math.imul(ae,Se),D=D+Math.imul(Q,Te)|0,T=T+Math.imul(Q,Ie)|0,T=T+Math.imul(te,Te)|0,C=C+Math.imul(te,Ie)|0,D=D+Math.imul(J,Re)|0,T=T+Math.imul(J,Ce)|0,T=T+Math.imul(X,Re)|0,C=C+Math.imul(X,Ce)|0,D=D+Math.imul(G,Ne)|0,T=T+Math.imul(G,Oe)|0,T=T+Math.imul(V,Ne)|0,C=C+Math.imul(V,Oe)|0;var pt=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(pt>>>26)|0,pt&=67108863,D=Math.imul(oe,Pe),T=Math.imul(oe,Se),T=T+Math.imul(ce,Pe)|0,C=Math.imul(ce,Se),D=D+Math.imul(ie,Te)|0,T=T+Math.imul(ie,Ie)|0,T=T+Math.imul(ae,Te)|0,C=C+Math.imul(ae,Ie)|0,D=D+Math.imul(Q,Re)|0,T=T+Math.imul(Q,Ce)|0,T=T+Math.imul(te,Re)|0,C=C+Math.imul(te,Ce)|0,D=D+Math.imul(J,Ne)|0,T=T+Math.imul(J,Oe)|0,T=T+Math.imul(X,Ne)|0,C=C+Math.imul(X,Oe)|0,D=D+Math.imul(G,ke)|0,T=T+Math.imul(G,Be)|0,T=T+Math.imul(V,ke)|0,C=C+Math.imul(V,Be)|0;var Tt=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,D=Math.imul(pe,Pe),T=Math.imul(pe,Se),T=T+Math.imul(Me,Pe)|0,C=Math.imul(Me,Se),D=D+Math.imul(oe,Te)|0,T=T+Math.imul(oe,Ie)|0,T=T+Math.imul(ce,Te)|0,C=C+Math.imul(ce,Ie)|0,D=D+Math.imul(ie,Re)|0,T=T+Math.imul(ie,Ce)|0,T=T+Math.imul(ae,Re)|0,C=C+Math.imul(ae,Ce)|0,D=D+Math.imul(Q,Ne)|0,T=T+Math.imul(Q,Oe)|0,T=T+Math.imul(te,Ne)|0,C=C+Math.imul(te,Oe)|0,D=D+Math.imul(J,ke)|0,T=T+Math.imul(J,Be)|0,T=T+Math.imul(X,ke)|0,C=C+Math.imul(X,Be)|0,D=D+Math.imul(G,De)|0,T=T+Math.imul(G,je)|0,T=T+Math.imul(V,De)|0,C=C+Math.imul(V,je)|0;var vt=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(vt>>>26)|0,vt&=67108863,D=Math.imul(we,Pe),T=Math.imul(we,Se),T=T+Math.imul(Ae,Pe)|0,C=Math.imul(Ae,Se),D=D+Math.imul(pe,Te)|0,T=T+Math.imul(pe,Ie)|0,T=T+Math.imul(Me,Te)|0,C=C+Math.imul(Me,Ie)|0,D=D+Math.imul(oe,Re)|0,T=T+Math.imul(oe,Ce)|0,T=T+Math.imul(ce,Re)|0,C=C+Math.imul(ce,Ce)|0,D=D+Math.imul(ie,Ne)|0,T=T+Math.imul(ie,Oe)|0,T=T+Math.imul(ae,Ne)|0,C=C+Math.imul(ae,Oe)|0,D=D+Math.imul(Q,ke)|0,T=T+Math.imul(Q,Be)|0,T=T+Math.imul(te,ke)|0,C=C+Math.imul(te,Be)|0,D=D+Math.imul(J,De)|0,T=T+Math.imul(J,je)|0,T=T+Math.imul(X,De)|0,C=C+Math.imul(X,je)|0,D=D+Math.imul(G,ee)|0,T=T+Math.imul(G,Y)|0,T=T+Math.imul(V,ee)|0,C=C+Math.imul(V,Y)|0;var zr=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(zr>>>26)|0,zr&=67108863,D=Math.imul(me,Pe),T=Math.imul(me,Se),T=T+Math.imul(he,Pe)|0,C=Math.imul(he,Se),D=D+Math.imul(we,Te)|0,T=T+Math.imul(we,Ie)|0,T=T+Math.imul(Ae,Te)|0,C=C+Math.imul(Ae,Ie)|0,D=D+Math.imul(pe,Re)|0,T=T+Math.imul(pe,Ce)|0,T=T+Math.imul(Me,Re)|0,C=C+Math.imul(Me,Ce)|0,D=D+Math.imul(oe,Ne)|0,T=T+Math.imul(oe,Oe)|0,T=T+Math.imul(ce,Ne)|0,C=C+Math.imul(ce,Oe)|0,D=D+Math.imul(ie,ke)|0,T=T+Math.imul(ie,Be)|0,T=T+Math.imul(ae,ke)|0,C=C+Math.imul(ae,Be)|0,D=D+Math.imul(Q,De)|0,T=T+Math.imul(Q,je)|0,T=T+Math.imul(te,De)|0,C=C+Math.imul(te,je)|0,D=D+Math.imul(J,ee)|0,T=T+Math.imul(J,Y)|0,T=T+Math.imul(X,ee)|0,C=C+Math.imul(X,Y)|0,D=D+Math.imul(G,re)|0,T=T+Math.imul(G,ne)|0,T=T+Math.imul(V,re)|0,C=C+Math.imul(V,ne)|0;var ir=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(ir>>>26)|0,ir&=67108863,D=Math.imul(ye,Pe),T=Math.imul(ye,Se),T=T+Math.imul(le,Pe)|0,C=Math.imul(le,Se),D=D+Math.imul(me,Te)|0,T=T+Math.imul(me,Ie)|0,T=T+Math.imul(he,Te)|0,C=C+Math.imul(he,Ie)|0,D=D+Math.imul(we,Re)|0,T=T+Math.imul(we,Ce)|0,T=T+Math.imul(Ae,Re)|0,C=C+Math.imul(Ae,Ce)|0,D=D+Math.imul(pe,Ne)|0,T=T+Math.imul(pe,Oe)|0,T=T+Math.imul(Me,Ne)|0,C=C+Math.imul(Me,Oe)|0,D=D+Math.imul(oe,ke)|0,T=T+Math.imul(oe,Be)|0,T=T+Math.imul(ce,ke)|0,C=C+Math.imul(ce,Be)|0,D=D+Math.imul(ie,De)|0,T=T+Math.imul(ie,je)|0,T=T+Math.imul(ae,De)|0,C=C+Math.imul(ae,je)|0,D=D+Math.imul(Q,ee)|0,T=T+Math.imul(Q,Y)|0,T=T+Math.imul(te,ee)|0,C=C+Math.imul(te,Y)|0,D=D+Math.imul(J,re)|0,T=T+Math.imul(J,ne)|0,T=T+Math.imul(X,re)|0,C=C+Math.imul(X,ne)|0,D=D+Math.imul(G,ge)|0,T=T+Math.imul(G,ve)|0,T=T+Math.imul(V,ge)|0,C=C+Math.imul(V,ve)|0;var ur=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(ur>>>26)|0,ur&=67108863,D=Math.imul(_e,Pe),T=Math.imul(_e,Se),T=T+Math.imul(Ee,Pe)|0,C=Math.imul(Ee,Se),D=D+Math.imul(ye,Te)|0,T=T+Math.imul(ye,Ie)|0,T=T+Math.imul(le,Te)|0,C=C+Math.imul(le,Ie)|0,D=D+Math.imul(me,Re)|0,T=T+Math.imul(me,Ce)|0,T=T+Math.imul(he,Re)|0,C=C+Math.imul(he,Ce)|0,D=D+Math.imul(we,Ne)|0,T=T+Math.imul(we,Oe)|0,T=T+Math.imul(Ae,Ne)|0,C=C+Math.imul(Ae,Oe)|0,D=D+Math.imul(pe,ke)|0,T=T+Math.imul(pe,Be)|0,T=T+Math.imul(Me,ke)|0,C=C+Math.imul(Me,Be)|0,D=D+Math.imul(oe,De)|0,T=T+Math.imul(oe,je)|0,T=T+Math.imul(ce,De)|0,C=C+Math.imul(ce,je)|0,D=D+Math.imul(ie,ee)|0,T=T+Math.imul(ie,Y)|0,T=T+Math.imul(ae,ee)|0,C=C+Math.imul(ae,Y)|0,D=D+Math.imul(Q,re)|0,T=T+Math.imul(Q,ne)|0,T=T+Math.imul(te,re)|0,C=C+Math.imul(te,ne)|0,D=D+Math.imul(J,ge)|0,T=T+Math.imul(J,ve)|0,T=T+Math.imul(X,ge)|0,C=C+Math.imul(X,ve)|0,D=D+Math.imul(G,ot)|0,T=T+Math.imul(G,Ge)|0,T=T+Math.imul(V,ot)|0,C=C+Math.imul(V,Ge)|0;var wt=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(wt>>>26)|0,wt&=67108863,D=Math.imul(_e,Te),T=Math.imul(_e,Ie),T=T+Math.imul(Ee,Te)|0,C=Math.imul(Ee,Ie),D=D+Math.imul(ye,Re)|0,T=T+Math.imul(ye,Ce)|0,T=T+Math.imul(le,Re)|0,C=C+Math.imul(le,Ce)|0,D=D+Math.imul(me,Ne)|0,T=T+Math.imul(me,Oe)|0,T=T+Math.imul(he,Ne)|0,C=C+Math.imul(he,Oe)|0,D=D+Math.imul(we,ke)|0,T=T+Math.imul(we,Be)|0,T=T+Math.imul(Ae,ke)|0,C=C+Math.imul(Ae,Be)|0,D=D+Math.imul(pe,De)|0,T=T+Math.imul(pe,je)|0,T=T+Math.imul(Me,De)|0,C=C+Math.imul(Me,je)|0,D=D+Math.imul(oe,ee)|0,T=T+Math.imul(oe,Y)|0,T=T+Math.imul(ce,ee)|0,C=C+Math.imul(ce,Y)|0,D=D+Math.imul(ie,re)|0,T=T+Math.imul(ie,ne)|0,T=T+Math.imul(ae,re)|0,C=C+Math.imul(ae,ne)|0,D=D+Math.imul(Q,ge)|0,T=T+Math.imul(Q,ve)|0,T=T+Math.imul(te,ge)|0,C=C+Math.imul(te,ve)|0,D=D+Math.imul(J,ot)|0,T=T+Math.imul(J,Ge)|0,T=T+Math.imul(X,ot)|0,C=C+Math.imul(X,Ge)|0;var or=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(or>>>26)|0,or&=67108863,D=Math.imul(_e,Re),T=Math.imul(_e,Ce),T=T+Math.imul(Ee,Re)|0,C=Math.imul(Ee,Ce),D=D+Math.imul(ye,Ne)|0,T=T+Math.imul(ye,Oe)|0,T=T+Math.imul(le,Ne)|0,C=C+Math.imul(le,Oe)|0,D=D+Math.imul(me,ke)|0,T=T+Math.imul(me,Be)|0,T=T+Math.imul(he,ke)|0,C=C+Math.imul(he,Be)|0,D=D+Math.imul(we,De)|0,T=T+Math.imul(we,je)|0,T=T+Math.imul(Ae,De)|0,C=C+Math.imul(Ae,je)|0,D=D+Math.imul(pe,ee)|0,T=T+Math.imul(pe,Y)|0,T=T+Math.imul(Me,ee)|0,C=C+Math.imul(Me,Y)|0,D=D+Math.imul(oe,re)|0,T=T+Math.imul(oe,ne)|0,T=T+Math.imul(ce,re)|0,C=C+Math.imul(ce,ne)|0,D=D+Math.imul(ie,ge)|0,T=T+Math.imul(ie,ve)|0,T=T+Math.imul(ae,ge)|0,C=C+Math.imul(ae,ve)|0,D=D+Math.imul(Q,ot)|0,T=T+Math.imul(Q,Ge)|0,T=T+Math.imul(te,ot)|0,C=C+Math.imul(te,Ge)|0;var lr=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(lr>>>26)|0,lr&=67108863,D=Math.imul(_e,Ne),T=Math.imul(_e,Oe),T=T+Math.imul(Ee,Ne)|0,C=Math.imul(Ee,Oe),D=D+Math.imul(ye,ke)|0,T=T+Math.imul(ye,Be)|0,T=T+Math.imul(le,ke)|0,C=C+Math.imul(le,Be)|0,D=D+Math.imul(me,De)|0,T=T+Math.imul(me,je)|0,T=T+Math.imul(he,De)|0,C=C+Math.imul(he,je)|0,D=D+Math.imul(we,ee)|0,T=T+Math.imul(we,Y)|0,T=T+Math.imul(Ae,ee)|0,C=C+Math.imul(Ae,Y)|0,D=D+Math.imul(pe,re)|0,T=T+Math.imul(pe,ne)|0,T=T+Math.imul(Me,re)|0,C=C+Math.imul(Me,ne)|0,D=D+Math.imul(oe,ge)|0,T=T+Math.imul(oe,ve)|0,T=T+Math.imul(ce,ge)|0,C=C+Math.imul(ce,ve)|0,D=D+Math.imul(ie,ot)|0,T=T+Math.imul(ie,Ge)|0,T=T+Math.imul(ae,ot)|0,C=C+Math.imul(ae,Ge)|0;var Mr=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,D=Math.imul(_e,ke),T=Math.imul(_e,Be),T=T+Math.imul(Ee,ke)|0,C=Math.imul(Ee,Be),D=D+Math.imul(ye,De)|0,T=T+Math.imul(ye,je)|0,T=T+Math.imul(le,De)|0,C=C+Math.imul(le,je)|0,D=D+Math.imul(me,ee)|0,T=T+Math.imul(me,Y)|0,T=T+Math.imul(he,ee)|0,C=C+Math.imul(he,Y)|0,D=D+Math.imul(we,re)|0,T=T+Math.imul(we,ne)|0,T=T+Math.imul(Ae,re)|0,C=C+Math.imul(Ae,ne)|0,D=D+Math.imul(pe,ge)|0,T=T+Math.imul(pe,ve)|0,T=T+Math.imul(Me,ge)|0,C=C+Math.imul(Me,ve)|0,D=D+Math.imul(oe,ot)|0,T=T+Math.imul(oe,Ge)|0,T=T+Math.imul(ce,ot)|0,C=C+Math.imul(ce,Ge)|0;var Kr=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,D=Math.imul(_e,De),T=Math.imul(_e,je),T=T+Math.imul(Ee,De)|0,C=Math.imul(Ee,je),D=D+Math.imul(ye,ee)|0,T=T+Math.imul(ye,Y)|0,T=T+Math.imul(le,ee)|0,C=C+Math.imul(le,Y)|0,D=D+Math.imul(me,re)|0,T=T+Math.imul(me,ne)|0,T=T+Math.imul(he,re)|0,C=C+Math.imul(he,ne)|0,D=D+Math.imul(we,ge)|0,T=T+Math.imul(we,ve)|0,T=T+Math.imul(Ae,ge)|0,C=C+Math.imul(Ae,ve)|0,D=D+Math.imul(pe,ot)|0,T=T+Math.imul(pe,Ge)|0,T=T+Math.imul(Me,ot)|0,C=C+Math.imul(Me,Ge)|0;var kr=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(kr>>>26)|0,kr&=67108863,D=Math.imul(_e,ee),T=Math.imul(_e,Y),T=T+Math.imul(Ee,ee)|0,C=Math.imul(Ee,Y),D=D+Math.imul(ye,re)|0,T=T+Math.imul(ye,ne)|0,T=T+Math.imul(le,re)|0,C=C+Math.imul(le,ne)|0,D=D+Math.imul(me,ge)|0,T=T+Math.imul(me,ve)|0,T=T+Math.imul(he,ge)|0,C=C+Math.imul(he,ve)|0,D=D+Math.imul(we,ot)|0,T=T+Math.imul(we,Ge)|0,T=T+Math.imul(Ae,ot)|0,C=C+Math.imul(Ae,Ge)|0;var Yr=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,D=Math.imul(_e,re),T=Math.imul(_e,ne),T=T+Math.imul(Ee,re)|0,C=Math.imul(Ee,ne),D=D+Math.imul(ye,ge)|0,T=T+Math.imul(ye,ve)|0,T=T+Math.imul(le,ge)|0,C=C+Math.imul(le,ve)|0,D=D+Math.imul(me,ot)|0,T=T+Math.imul(me,Ge)|0,T=T+Math.imul(he,ot)|0,C=C+Math.imul(he,Ge)|0;var Ep=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(Ep>>>26)|0,Ep&=67108863,D=Math.imul(_e,ge),T=Math.imul(_e,ve),T=T+Math.imul(Ee,ge)|0,C=Math.imul(Ee,ve),D=D+Math.imul(ye,ot)|0,T=T+Math.imul(ye,Ge)|0,T=T+Math.imul(le,ot)|0,C=C+Math.imul(le,Ge)|0;var Sp=(w+D|0)+((T&8191)<<13)|0;w=(C+(T>>>13)|0)+(Sp>>>26)|0,Sp&=67108863,D=Math.imul(_e,ot),T=Math.imul(_e,Ge),T=T+Math.imul(Ee,ot)|0,C=Math.imul(Ee,Ge);var tl=(w+D|0)+((T&8191)<<13)|0;return w=(C+(T>>>13)|0)+(tl>>>26)|0,tl&=67108863,f[0]=Pt,f[1]=Lt,f[2]=St,f[3]=pt,f[4]=Tt,f[5]=vt,f[6]=zr,f[7]=ir,f[8]=ur,f[9]=wt,f[10]=or,f[11]=lr,f[12]=Mr,f[13]=Kr,f[14]=kr,f[15]=Yr,f[16]=Ep,f[17]=Sp,f[18]=tl,w!==0&&(f[19]=w,v.length++),v};Math.imul||(R=k);function B(y,d,h){h.negative=d.negative^y.negative,h.length=y.length+d.length;for(var v=0,x=0,g=0;g<h.length-1;g++){var f=x;x=0;for(var w=v&67108863,D=Math.min(g,d.length-1),T=Math.max(0,g-y.length+1);T<=D;T++){var C=g-T,z=y.words[C]|0,G=d.words[T]|0,V=z*G,Z=V&67108863;f=f+(V/67108864|0)|0,Z=Z+w|0,w=Z&67108863,f=f+(Z>>>26)|0,x+=f>>>26,f&=67108863}h.words[g]=w,v=f,f=x}return v!==0?h.words[g]=v:h.length--,h._strip()}function I(y,d,h){return B(y,d,h)}i.prototype.mulTo=function(d,h){var v,x=this.length+d.length;return this.length===10&&d.length===10?v=R(this,d,h):x<63?v=k(this,d,h):x<1024?v=B(this,d,h):v=I(this,d,h),v};function q(y,d){this.x=y,this.y=d}q.prototype.makeRBT=function(d){for(var h=new Array(d),v=i.prototype._countBits(d)-1,x=0;x<d;x++)h[x]=this.revBin(x,v,d);return h},q.prototype.revBin=function(d,h,v){if(d===0||d===v-1)return d;for(var x=0,g=0;g<h;g++)x|=(d&1)<<h-g-1,d>>=1;return x},q.prototype.permute=function(d,h,v,x,g,f){for(var w=0;w<f;w++)x[w]=h[d[w]],g[w]=v[d[w]]},q.prototype.transform=function(d,h,v,x,g,f){this.permute(f,d,h,v,x,g);for(var w=1;w<g;w<<=1)for(var D=w<<1,T=Math.cos(2*Math.PI/D),C=Math.sin(2*Math.PI/D),z=0;z<g;z+=D)for(var G=T,V=C,Z=0;Z<w;Z++){var J=v[z+Z],X=x[z+Z],se=v[z+Z+w],Q=x[z+Z+w],te=G*se-V*Q;Q=G*Q+V*se,se=te,v[z+Z]=J+se,x[z+Z]=X+Q,v[z+Z+w]=J-se,x[z+Z+w]=X-Q,Z!==D&&(te=T*G-C*V,V=T*V+C*G,G=te)}},q.prototype.guessLen13b=function(d,h){var v=Math.max(h,d)|1,x=v&1,g=0;for(v=v/2|0;v;v=v>>>1)g++;return 1<<g+1+x},q.prototype.conjugate=function(d,h,v){if(!(v<=1))for(var x=0;x<v/2;x++){var g=d[x];d[x]=d[v-x-1],d[v-x-1]=g,g=h[x],h[x]=-h[v-x-1],h[v-x-1]=-g}},q.prototype.normalize13b=function(d,h){for(var v=0,x=0;x<h/2;x++){var g=Math.round(d[2*x+1]/h)*8192+Math.round(d[2*x]/h)+v;d[x]=g&67108863,g<67108864?v=0:v=g/67108864|0}return d},q.prototype.convert13b=function(d,h,v,x){for(var g=0,f=0;f<h;f++)g=g+(d[f]|0),v[2*f]=g&8191,g=g>>>13,v[2*f+1]=g&8191,g=g>>>13;for(f=2*h;f<x;++f)v[f]=0;r(g===0),r((g&-8192)===0)},q.prototype.stub=function(d){for(var h=new Array(d),v=0;v<d;v++)h[v]=0;return h},q.prototype.mulp=function(d,h,v){var x=2*this.guessLen13b(d.length,h.length),g=this.makeRBT(x),f=this.stub(x),w=new Array(x),D=new Array(x),T=new Array(x),C=new Array(x),z=new Array(x),G=new Array(x),V=v.words;V.length=x,this.convert13b(d.words,d.length,w,x),this.convert13b(h.words,h.length,C,x),this.transform(w,f,D,T,x,g),this.transform(C,f,z,G,x,g);for(var Z=0;Z<x;Z++){var J=D[Z]*z[Z]-T[Z]*G[Z];T[Z]=D[Z]*G[Z]+T[Z]*z[Z],D[Z]=J}return this.conjugate(D,T,x),this.transform(D,T,V,f,x,g),this.conjugate(V,f,x),this.normalize13b(V,x),v.negative=d.negative^h.negative,v.length=d.length+h.length,v._strip()},i.prototype.mul=function(d){var h=new i(null);return h.words=new Array(this.length+d.length),this.mulTo(d,h)},i.prototype.mulf=function(d){var h=new i(null);return h.words=new Array(this.length+d.length),I(this,d,h)},i.prototype.imul=function(d){return this.clone().mulTo(d,this)},i.prototype.imuln=function(d){var h=d<0;h&&(d=-d),r(typeof d=="number"),r(d<67108864);for(var v=0,x=0;x<this.length;x++){var g=(this.words[x]|0)*d,f=(g&67108863)+(v&67108863);v>>=26,v+=g/67108864|0,v+=f>>>26,this.words[x]=f&67108863}return v!==0&&(this.words[x]=v,this.length++),h?this.ineg():this},i.prototype.muln=function(d){return this.clone().imuln(d)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(d){var h=P(d);if(h.length===0)return new i(1);for(var v=this,x=0;x<h.length&&h[x]===0;x++,v=v.sqr());if(++x<h.length)for(var g=v.sqr();x<h.length;x++,g=g.sqr())h[x]!==0&&(v=v.mul(g));return v},i.prototype.iushln=function(d){r(typeof d=="number"&&d>=0);var h=d%26,v=(d-h)/26,x=67108863>>>26-h<<26-h,g;if(h!==0){var f=0;for(g=0;g<this.length;g++){var w=this.words[g]&x,D=(this.words[g]|0)-w<<h;this.words[g]=D|f,f=w>>>26-h}f&&(this.words[g]=f,this.length++)}if(v!==0){for(g=this.length-1;g>=0;g--)this.words[g+v]=this.words[g];for(g=0;g<v;g++)this.words[g]=0;this.length+=v}return this._strip()},i.prototype.ishln=function(d){return r(this.negative===0),this.iushln(d)},i.prototype.iushrn=function(d,h,v){r(typeof d=="number"&&d>=0);var x;h?x=(h-h%26)/26:x=0;var g=d%26,f=Math.min((d-g)/26,this.length),w=67108863^67108863>>>g<<g,D=v;if(x-=f,x=Math.max(0,x),D){for(var T=0;T<f;T++)D.words[T]=this.words[T];D.length=f}if(f!==0)if(this.length>f)for(this.length-=f,T=0;T<this.length;T++)this.words[T]=this.words[T+f];else this.words[0]=0,this.length=1;var C=0;for(T=this.length-1;T>=0&&(C!==0||T>=x);T--){var z=this.words[T]|0;this.words[T]=C<<26-g|z>>>g,C=z&w}return D&&C!==0&&(D.words[D.length++]=C),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(d,h,v){return r(this.negative===0),this.iushrn(d,h,v)},i.prototype.shln=function(d){return this.clone().ishln(d)},i.prototype.ushln=function(d){return this.clone().iushln(d)},i.prototype.shrn=function(d){return this.clone().ishrn(d)},i.prototype.ushrn=function(d){return this.clone().iushrn(d)},i.prototype.testn=function(d){r(typeof d=="number"&&d>=0);var h=d%26,v=(d-h)/26,x=1<<h;if(this.length<=v)return!1;var g=this.words[v];return!!(g&x)},i.prototype.imaskn=function(d){r(typeof d=="number"&&d>=0);var h=d%26,v=(d-h)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=v)return this;if(h!==0&&v++,this.length=Math.min(v,this.length),h!==0){var x=67108863^67108863>>>h<<h;this.words[this.length-1]&=x}return this._strip()},i.prototype.maskn=function(d){return this.clone().imaskn(d)},i.prototype.iaddn=function(d){return r(typeof d=="number"),r(d<67108864),d<0?this.isubn(-d):this.negative!==0?this.length===1&&(this.words[0]|0)<=d?(this.words[0]=d-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(d),this.negative=1,this):this._iaddn(d)},i.prototype._iaddn=function(d){this.words[0]+=d;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(d){if(r(typeof d=="number"),r(d<67108864),d<0)return this.iaddn(-d);if(this.negative!==0)return this.negative=0,this.iaddn(d),this.negative=1,this;if(this.words[0]-=d,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(d){return this.clone().iaddn(d)},i.prototype.subn=function(d){return this.clone().isubn(d)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(d,h,v){var x=d.length+v,g;this._expand(x);var f,w=0;for(g=0;g<d.length;g++){f=(this.words[g+v]|0)+w;var D=(d.words[g]|0)*h;f-=D&67108863,w=(f>>26)-(D/67108864|0),this.words[g+v]=f&67108863}for(;g<this.length-v;g++)f=(this.words[g+v]|0)+w,w=f>>26,this.words[g+v]=f&67108863;if(w===0)return this._strip();for(r(w===-1),w=0,g=0;g<this.length;g++)f=-(this.words[g]|0)+w,w=f>>26,this.words[g]=f&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(d,h){var v=this.length-d.length,x=this.clone(),g=d,f=g.words[g.length-1]|0,w=this._countBits(f);v=26-w,v!==0&&(g=g.ushln(v),x.iushln(v),f=g.words[g.length-1]|0);var D=x.length-g.length,T;if(h!=="mod"){T=new i(null),T.length=D+1,T.words=new Array(T.length);for(var C=0;C<T.length;C++)T.words[C]=0}var z=x.clone()._ishlnsubmul(g,1,D);z.negative===0&&(x=z,T&&(T.words[D]=1));for(var G=D-1;G>=0;G--){var V=(x.words[g.length+G]|0)*67108864+(x.words[g.length+G-1]|0);for(V=Math.min(V/f|0,67108863),x._ishlnsubmul(g,V,G);x.negative!==0;)V--,x.negative=0,x._ishlnsubmul(g,1,G),x.isZero()||(x.negative^=1);T&&(T.words[G]=V)}return T&&T._strip(),x._strip(),h!=="div"&&v!==0&&x.iushrn(v),{div:T||null,mod:x}},i.prototype.divmod=function(d,h,v){if(r(!d.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var x,g,f;return this.negative!==0&&d.negative===0?(f=this.neg().divmod(d,h),h!=="mod"&&(x=f.div.neg()),h!=="div"&&(g=f.mod.neg(),v&&g.negative!==0&&g.iadd(d)),{div:x,mod:g}):this.negative===0&&d.negative!==0?(f=this.divmod(d.neg(),h),h!=="mod"&&(x=f.div.neg()),{div:x,mod:f.mod}):this.negative&d.negative?(f=this.neg().divmod(d.neg(),h),h!=="div"&&(g=f.mod.neg(),v&&g.negative!==0&&g.isub(d)),{div:f.div,mod:g}):d.length>this.length||this.cmp(d)<0?{div:new i(0),mod:this}:d.length===1?h==="div"?{div:this.divn(d.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(d.words[0]))}:{div:this.divn(d.words[0]),mod:new i(this.modrn(d.words[0]))}:this._wordDiv(d,h)},i.prototype.div=function(d){return this.divmod(d,"div",!1).div},i.prototype.mod=function(d){return this.divmod(d,"mod",!1).mod},i.prototype.umod=function(d){return this.divmod(d,"mod",!0).mod},i.prototype.divRound=function(d){var h=this.divmod(d);if(h.mod.isZero())return h.div;var v=h.div.negative!==0?h.mod.isub(d):h.mod,x=d.ushrn(1),g=d.andln(1),f=v.cmp(x);return f<0||g===1&&f===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(d){var h=d<0;h&&(d=-d),r(d<=67108863);for(var v=(1<<26)%d,x=0,g=this.length-1;g>=0;g--)x=(v*x+(this.words[g]|0))%d;return h?-x:x},i.prototype.modn=function(d){return this.modrn(d)},i.prototype.idivn=function(d){var h=d<0;h&&(d=-d),r(d<=67108863);for(var v=0,x=this.length-1;x>=0;x--){var g=(this.words[x]|0)+v*67108864;this.words[x]=g/d|0,v=g%d}return this._strip(),h?this.ineg():this},i.prototype.divn=function(d){return this.clone().idivn(d)},i.prototype.egcd=function(d){r(d.negative===0),r(!d.isZero());var h=this,v=d.clone();h.negative!==0?h=h.umod(d):h=h.clone();for(var x=new i(1),g=new i(0),f=new i(0),w=new i(1),D=0;h.isEven()&&v.isEven();)h.iushrn(1),v.iushrn(1),++D;for(var T=v.clone(),C=h.clone();!h.isZero();){for(var z=0,G=1;!(h.words[0]&G)&&z<26;++z,G<<=1);if(z>0)for(h.iushrn(z);z-- >0;)(x.isOdd()||g.isOdd())&&(x.iadd(T),g.isub(C)),x.iushrn(1),g.iushrn(1);for(var V=0,Z=1;!(v.words[0]&Z)&&V<26;++V,Z<<=1);if(V>0)for(v.iushrn(V);V-- >0;)(f.isOdd()||w.isOdd())&&(f.iadd(T),w.isub(C)),f.iushrn(1),w.iushrn(1);h.cmp(v)>=0?(h.isub(v),x.isub(f),g.isub(w)):(v.isub(h),f.isub(x),w.isub(g))}return{a:f,b:w,gcd:v.iushln(D)}},i.prototype._invmp=function(d){r(d.negative===0),r(!d.isZero());var h=this,v=d.clone();h.negative!==0?h=h.umod(d):h=h.clone();for(var x=new i(1),g=new i(0),f=v.clone();h.cmpn(1)>0&&v.cmpn(1)>0;){for(var w=0,D=1;!(h.words[0]&D)&&w<26;++w,D<<=1);if(w>0)for(h.iushrn(w);w-- >0;)x.isOdd()&&x.iadd(f),x.iushrn(1);for(var T=0,C=1;!(v.words[0]&C)&&T<26;++T,C<<=1);if(T>0)for(v.iushrn(T);T-- >0;)g.isOdd()&&g.iadd(f),g.iushrn(1);h.cmp(v)>=0?(h.isub(v),x.isub(g)):(v.isub(h),g.isub(x))}var z;return h.cmpn(1)===0?z=x:z=g,z.cmpn(0)<0&&z.iadd(d),z},i.prototype.gcd=function(d){if(this.isZero())return d.abs();if(d.isZero())return this.abs();var h=this.clone(),v=d.clone();h.negative=0,v.negative=0;for(var x=0;h.isEven()&&v.isEven();x++)h.iushrn(1),v.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;v.isEven();)v.iushrn(1);var g=h.cmp(v);if(g<0){var f=h;h=v,v=f}else if(g===0||v.cmpn(1)===0)break;h.isub(v)}while(!0);return v.iushln(x)},i.prototype.invm=function(d){return this.egcd(d).a.umod(d)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(d){return this.words[0]&d},i.prototype.bincn=function(d){r(typeof d=="number");var h=d%26,v=(d-h)/26,x=1<<h;if(this.length<=v)return this._expand(v+1),this.words[v]|=x,this;for(var g=x,f=v;g!==0&&f<this.length;f++){var w=this.words[f]|0;w+=g,g=w>>>26,w&=67108863,this.words[f]=w}return g!==0&&(this.words[f]=g,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(d){var h=d<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var v;if(this.length>1)v=1;else{h&&(d=-d),r(d<=67108863,"Number is too big");var x=this.words[0]|0;v=x===d?0:x<d?-1:1}return this.negative!==0?-v|0:v},i.prototype.cmp=function(d){if(this.negative!==0&&d.negative===0)return-1;if(this.negative===0&&d.negative!==0)return 1;var h=this.ucmp(d);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(d){if(this.length>d.length)return 1;if(this.length<d.length)return-1;for(var h=0,v=this.length-1;v>=0;v--){var x=this.words[v]|0,g=d.words[v]|0;if(x!==g){x<g?h=-1:x>g&&(h=1);break}}return h},i.prototype.gtn=function(d){return this.cmpn(d)===1},i.prototype.gt=function(d){return this.cmp(d)===1},i.prototype.gten=function(d){return this.cmpn(d)>=0},i.prototype.gte=function(d){return this.cmp(d)>=0},i.prototype.ltn=function(d){return this.cmpn(d)===-1},i.prototype.lt=function(d){return this.cmp(d)===-1},i.prototype.lten=function(d){return this.cmpn(d)<=0},i.prototype.lte=function(d){return this.cmp(d)<=0},i.prototype.eqn=function(d){return this.cmpn(d)===0},i.prototype.eq=function(d){return this.cmp(d)===0},i.red=function(d){return new c(d)},i.prototype.toRed=function(d){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),d.convertTo(this)._forceRed(d)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(d){return this.red=d,this},i.prototype.forceRed=function(d){return r(!this.red,"Already a number in reduction context"),this._forceRed(d)},i.prototype.redAdd=function(d){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,d)},i.prototype.redIAdd=function(d){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,d)},i.prototype.redSub=function(d){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,d)},i.prototype.redISub=function(d){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,d)},i.prototype.redShl=function(d){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,d)},i.prototype.redMul=function(d){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.mul(this,d)},i.prototype.redIMul=function(d){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.imul(this,d)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(d){return r(this.red&&!d.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,d)};var $={k256:null,p224:null,p192:null,p25519:null};function U(y,d){this.name=y,this.p=new i(d,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var d=new i(null);return d.words=new Array(Math.ceil(this.n/13)),d},U.prototype.ireduce=function(d){var h=d,v;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),v=h.bitLength();while(v>this.n);var x=v<this.n?-1:h.ucmp(this.p);return x===0?(h.words[0]=0,h.length=1):x>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},U.prototype.split=function(d,h){d.iushrn(this.n,0,h)},U.prototype.imulK=function(d){return d.imul(this.k)};function F(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(F,U),F.prototype.split=function(d,h){for(var v=4194303,x=Math.min(d.length,9),g=0;g<x;g++)h.words[g]=d.words[g];if(h.length=x,d.length<=9){d.words[0]=0,d.length=1;return}var f=d.words[9];for(h.words[h.length++]=f&v,g=10;g<d.length;g++){var w=d.words[g]|0;d.words[g-10]=(w&v)<<4|f>>>22,f=w}f>>>=22,d.words[g-10]=f,f===0&&d.length>10?d.length-=10:d.length-=9},F.prototype.imulK=function(d){d.words[d.length]=0,d.words[d.length+1]=0,d.length+=2;for(var h=0,v=0;v<d.length;v++){var x=d.words[v]|0;h+=x*977,d.words[v]=h&67108863,h=x*64+(h/67108864|0)}return d.words[d.length-1]===0&&(d.length--,d.words[d.length-1]===0&&d.length--),d};function L(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(L,U);function W(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(W,U);function E(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(E,U),E.prototype.imulK=function(d){for(var h=0,v=0;v<d.length;v++){var x=(d.words[v]|0)*19+h,g=x&67108863;x>>>=26,d.words[v]=g,h=x}return h!==0&&(d.words[d.length++]=h),d},i._prime=function(d){if($[d])return $[d];var h;if(d==="k256")h=new F;else if(d==="p224")h=new L;else if(d==="p192")h=new W;else if(d==="p25519")h=new E;else throw new Error("Unknown prime "+d);return $[d]=h,h};function c(y){if(typeof y=="string"){var d=i._prime(y);this.m=d.p,this.prime=d}else r(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}c.prototype._verify1=function(d){r(d.negative===0,"red works only with positives"),r(d.red,"red works only with red numbers")},c.prototype._verify2=function(d,h){r((d.negative|h.negative)===0,"red works only with positives"),r(d.red&&d.red===h.red,"red works only with red numbers")},c.prototype.imod=function(d){return this.prime?this.prime.ireduce(d)._forceRed(this):(m(d,d.umod(this.m)._forceRed(this)),d)},c.prototype.neg=function(d){return d.isZero()?d.clone():this.m.sub(d)._forceRed(this)},c.prototype.add=function(d,h){this._verify2(d,h);var v=d.add(h);return v.cmp(this.m)>=0&&v.isub(this.m),v._forceRed(this)},c.prototype.iadd=function(d,h){this._verify2(d,h);var v=d.iadd(h);return v.cmp(this.m)>=0&&v.isub(this.m),v},c.prototype.sub=function(d,h){this._verify2(d,h);var v=d.sub(h);return v.cmpn(0)<0&&v.iadd(this.m),v._forceRed(this)},c.prototype.isub=function(d,h){this._verify2(d,h);var v=d.isub(h);return v.cmpn(0)<0&&v.iadd(this.m),v},c.prototype.shl=function(d,h){return this._verify1(d),this.imod(d.ushln(h))},c.prototype.imul=function(d,h){return this._verify2(d,h),this.imod(d.imul(h))},c.prototype.mul=function(d,h){return this._verify2(d,h),this.imod(d.mul(h))},c.prototype.isqr=function(d){return this.imul(d,d.clone())},c.prototype.sqr=function(d){return this.mul(d,d)},c.prototype.sqrt=function(d){if(d.isZero())return d.clone();var h=this.m.andln(3);if(r(h%2===1),h===3){var v=this.m.add(new i(1)).iushrn(2);return this.pow(d,v)}for(var x=this.m.subn(1),g=0;!x.isZero()&&x.andln(1)===0;)g++,x.iushrn(1);r(!x.isZero());var f=new i(1).toRed(this),w=f.redNeg(),D=this.m.subn(1).iushrn(1),T=this.m.bitLength();for(T=new i(2*T*T).toRed(this);this.pow(T,D).cmp(w)!==0;)T.redIAdd(w);for(var C=this.pow(T,x),z=this.pow(d,x.addn(1).iushrn(1)),G=this.pow(d,x),V=g;G.cmp(f)!==0;){for(var Z=G,J=0;Z.cmp(f)!==0;J++)Z=Z.redSqr();r(J<V);var X=this.pow(C,new i(1).iushln(V-J-1));z=z.redMul(X),C=X.redSqr(),G=G.redMul(C),V=J}return z},c.prototype.invm=function(d){var h=d._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},c.prototype.pow=function(d,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return d.clone();var v=4,x=new Array(1<<v);x[0]=new i(1).toRed(this),x[1]=d;for(var g=2;g<x.length;g++)x[g]=this.mul(x[g-1],d);var f=x[0],w=0,D=0,T=h.bitLength()%26;for(T===0&&(T=26),g=h.length-1;g>=0;g--){for(var C=h.words[g],z=T-1;z>=0;z--){var G=C>>z&1;if(f!==x[0]&&(f=this.sqr(f)),G===0&&w===0){D=0;continue}w<<=1,w|=G,D++,!(D!==v&&(g!==0||z!==0))&&(f=this.mul(f,x[w]),D=0,w=0)}T=26}return f},c.prototype.convertTo=function(d){var h=d.umod(this.m);return h===d?h.clone():h},c.prototype.convertFrom=function(d){var h=d.clone();return h.red=null,h},i.mont=function(d){return new l(d)};function l(y){c.call(this,y),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(l,c),l.prototype.convertTo=function(d){return this.imod(d.ushln(this.shift))},l.prototype.convertFrom=function(d){var h=this.imod(d.mul(this.rinv));return h.red=null,h},l.prototype.imul=function(d,h){if(d.isZero()||h.isZero())return d.words[0]=0,d.length=1,d;var v=d.imul(h),x=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=v.isub(x).iushrn(this.shift),f=g;return g.cmp(this.m)>=0?f=g.isub(this.m):g.cmpn(0)<0&&(f=g.iadd(this.m)),f._forceRed(this)},l.prototype.mul=function(d,h){if(d.isZero()||h.isZero())return new i(0)._forceRed(this);var v=d.mul(h),x=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=v.isub(x).iushrn(this.shift),f=g;return g.cmp(this.m)>=0?f=g.isub(this.m):g.cmpn(0)<0&&(f=g.iadd(this.m)),f._forceRed(this)},l.prototype.invm=function(d){var h=this.imod(d._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(typeof UC>"u"||UC,wae)});var n4=H((v9t,Eae)=>{_();var Iw=r4(),hLe=fy();function pLe(t){var e=_ae(t),r=e.toRed(Iw.mont(t.modulus)).redPow(new Iw(t.publicExponent)).fromRed();return{blinder:r,unblinder:e.invm(t.modulus)}}function _ae(t){var e=t.modulus.byteLength(),r;do r=new Iw(hLe(e));while(r.cmp(t.modulus)>=0||!r.umod(t.prime1)||!r.umod(t.prime2));return r}function xae(t,e){var r=pLe(e),n=e.modulus.byteLength(),i=new Iw(t).mul(r.blinder).umod(e.modulus),o=i.toRed(Iw.mont(e.prime1)),s=i.toRed(Iw.mont(e.prime2)),a=e.coefficient,u=e.prime1,m=e.prime2,p=o.redPow(e.exponent1).fromRed(),b=s.redPow(e.exponent2).fromRed(),A=p.isub(b).imul(a).umod(u).imul(m);return b.iadd(A).imul(r.unblinder).umod(e.modulus).toArrayLike(N.Buffer,"be",n)}xae.getr=_ae;Eae.exports=xae});var Sae=H((_9t,mLe)=>{mLe.exports={name:"elliptic",version:"6.5.7",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var Al=H((Mae,FC)=>{_();(function(t,e){"use strict";function r(E,c){if(!E)throw new Error(c||"Assertion failed")}function n(E,c){E.super_=c;var l=function(){};l.prototype=c.prototype,E.prototype=new l,E.prototype.constructor=E}function i(E,c,l){if(i.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((c==="le"||c==="be")&&(l=c,c=10),this._init(E||0,c||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ut().Buffer}catch{}i.isBN=function(c){return c instanceof i?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===i.wordSize&&Array.isArray(c.words)},i.max=function(c,l){return c.cmp(l)>0?c:l},i.min=function(c,l){return c.cmp(l)<0?c:l},i.prototype._init=function(c,l,y){if(typeof c=="number")return this._initNumber(c,l,y);if(typeof c=="object")return this._initArray(c,l,y);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),c=c.toString().replace(/\s+/g,"");var d=0;c[0]==="-"&&(d++,this.negative=1),d<c.length&&(l===16?this._parseHex(c,d,y):(this._parseBase(c,l,d),y==="le"&&this._initArray(this.toArray(),l,y)))},i.prototype._initNumber=function(c,l,y){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(r(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),l,y)},i.prototype._initArray=function(c,l,y){if(r(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var h,v,x=0;if(y==="be")for(d=c.length-1,h=0;d>=0;d-=3)v=c[d]|c[d-1]<<8|c[d-2]<<16,this.words[h]|=v<<x&67108863,this.words[h+1]=v>>>26-x&67108863,x+=24,x>=26&&(x-=26,h++);else if(y==="le")for(d=0,h=0;d<c.length;d+=3)v=c[d]|c[d+1]<<8|c[d+2]<<16,this.words[h]|=v<<x&67108863,this.words[h+1]=v>>>26-x&67108863,x+=24,x>=26&&(x-=26,h++);return this.strip()};function s(E,c){var l=E.charCodeAt(c);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function a(E,c,l){var y=s(E,l);return l-1>=c&&(y|=s(E,l-1)<<4),y}i.prototype._parseHex=function(c,l,y){this.length=Math.ceil((c.length-l)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var h=0,v=0,x;if(y==="be")for(d=c.length-1;d>=l;d-=2)x=a(c,l,d)<<h,this.words[v]|=x&67108863,h>=18?(h-=18,v+=1,this.words[v]|=x>>>26):h+=8;else{var g=c.length-l;for(d=g%2===0?l+1:l;d<c.length;d+=2)x=a(c,l,d)<<h,this.words[v]|=x&67108863,h>=18?(h-=18,v+=1,this.words[v]|=x>>>26):h+=8}this.strip()};function u(E,c,l,y){for(var d=0,h=Math.min(E.length,l),v=c;v<h;v++){var x=E.charCodeAt(v)-48;d*=y,x>=49?d+=x-49+10:x>=17?d+=x-17+10:d+=x}return d}i.prototype._parseBase=function(c,l,y){this.words=[0],this.length=1;for(var d=0,h=1;h<=67108863;h*=l)d++;d--,h=h/l|0;for(var v=c.length-y,x=v%d,g=Math.min(v,v-x)+y,f=0,w=y;w<g;w+=d)f=u(c,w,w+d,l),this.imuln(h),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(x!==0){var D=1;for(f=u(c,w,c.length,l),w=0;w<x;w++)D*=l;this.imuln(D),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this.strip()},i.prototype.copy=function(c){c.words=new Array(this.length);for(var l=0;l<this.length;l++)c.words[l]=this.words[l];c.length=this.length,c.negative=this.negative,c.red=this.red},i.prototype.clone=function(){var c=new i(null);return this.copy(c),c},i.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(c,l){c=c||10,l=l|0||1;var y;if(c===16||c==="hex"){y="";for(var d=0,h=0,v=0;v<this.length;v++){var x=this.words[v],g=((x<<d|h)&16777215).toString(16);h=x>>>24-d&16777215,h!==0||v!==this.length-1?y=m[6-g.length]+g+y:y=g+y,d+=2,d>=26&&(d-=26,v--)}for(h!==0&&(y=h.toString(16)+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(c===(c|0)&&c>=2&&c<=36){var f=p[c],w=b[c];y="";var D=this.clone();for(D.negative=0;!D.isZero();){var T=D.modn(w).toString(c);D=D.idivn(w),D.isZero()?y=T+y:y=m[f-T.length]+T+y}for(this.isZero()&&(y="0"+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(c,l){return r(typeof o<"u"),this.toArrayLike(o,c,l)},i.prototype.toArray=function(c,l){return this.toArrayLike(Array,c,l)},i.prototype.toArrayLike=function(c,l,y){var d=this.byteLength(),h=y||Math.max(1,d);r(d<=h,"byte array longer than desired length"),r(h>0,"Requested array length <= 0"),this.strip();var v=l==="le",x=new c(h),g,f,w=this.clone();if(v){for(f=0;!w.isZero();f++)g=w.andln(255),w.iushrn(8),x[f]=g;for(;f<h;f++)x[f]=0}else{for(f=0;f<h-d;f++)x[f]=0;for(f=0;!w.isZero();f++)g=w.andln(255),w.iushrn(8),x[h-f-1]=g}return x},Math.clz32?i.prototype._countBits=function(c){return 32-Math.clz32(c)}:i.prototype._countBits=function(c){var l=c,y=0;return l>=4096&&(y+=13,l>>>=13),l>=64&&(y+=7,l>>>=7),l>=8&&(y+=4,l>>>=4),l>=2&&(y+=2,l>>>=2),y+l},i.prototype._zeroBits=function(c){if(c===0)return 26;var l=c,y=0;return l&8191||(y+=13,l>>>=13),l&127||(y+=7,l>>>=7),l&15||(y+=4,l>>>=4),l&3||(y+=2,l>>>=2),l&1||y++,y},i.prototype.bitLength=function(){var c=this.words[this.length-1],l=this._countBits(c);return(this.length-1)*26+l};function A(E){for(var c=new Array(E.bitLength()),l=0;l<c.length;l++){var y=l/26|0,d=l%26;c[l]=(E.words[y]&1<<d)>>>d}return c}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,l=0;l<this.length;l++){var y=this._zeroBits(this.words[l]);if(c+=y,y!==26)break}return c},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},i.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var l=0;l<c.length;l++)this.words[l]=this.words[l]|c.words[l];return this.strip()},i.prototype.ior=function(c){return r((this.negative|c.negative)===0),this.iuor(c)},i.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},i.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},i.prototype.iuand=function(c){var l;this.length>c.length?l=c:l=this;for(var y=0;y<l.length;y++)this.words[y]=this.words[y]&c.words[y];return this.length=l.length,this.strip()},i.prototype.iand=function(c){return r((this.negative|c.negative)===0),this.iuand(c)},i.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},i.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},i.prototype.iuxor=function(c){var l,y;this.length>c.length?(l=this,y=c):(l=c,y=this);for(var d=0;d<y.length;d++)this.words[d]=l.words[d]^y.words[d];if(this!==l)for(;d<l.length;d++)this.words[d]=l.words[d];return this.length=l.length,this.strip()},i.prototype.ixor=function(c){return r((this.negative|c.negative)===0),this.iuxor(c)},i.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},i.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},i.prototype.inotn=function(c){r(typeof c=="number"&&c>=0);var l=Math.ceil(c/26)|0,y=c%26;this._expand(l),y>0&&l--;for(var d=0;d<l;d++)this.words[d]=~this.words[d]&67108863;return y>0&&(this.words[d]=~this.words[d]&67108863>>26-y),this.strip()},i.prototype.notn=function(c){return this.clone().inotn(c)},i.prototype.setn=function(c,l){r(typeof c=="number"&&c>=0);var y=c/26|0,d=c%26;return this._expand(y+1),l?this.words[y]=this.words[y]|1<<d:this.words[y]=this.words[y]&~(1<<d),this.strip()},i.prototype.iadd=function(c){var l;if(this.negative!==0&&c.negative===0)return this.negative=0,l=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,l=this.isub(c),c.negative=1,l._normSign();var y,d;this.length>c.length?(y=this,d=c):(y=c,d=this);for(var h=0,v=0;v<d.length;v++)l=(y.words[v]|0)+(d.words[v]|0)+h,this.words[v]=l&67108863,h=l>>>26;for(;h!==0&&v<y.length;v++)l=(y.words[v]|0)+h,this.words[v]=l&67108863,h=l>>>26;if(this.length=y.length,h!==0)this.words[this.length]=h,this.length++;else if(y!==this)for(;v<y.length;v++)this.words[v]=y.words[v];return this},i.prototype.add=function(c){var l;return c.negative!==0&&this.negative===0?(c.negative=0,l=this.sub(c),c.negative^=1,l):c.negative===0&&this.negative!==0?(this.negative=0,l=c.sub(this),this.negative=1,l):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},i.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var l=this.iadd(c);return c.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var y=this.cmp(c);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var d,h;y>0?(d=this,h=c):(d=c,h=this);for(var v=0,x=0;x<h.length;x++)l=(d.words[x]|0)-(h.words[x]|0)+v,v=l>>26,this.words[x]=l&67108863;for(;v!==0&&x<d.length;x++)l=(d.words[x]|0)+v,v=l>>26,this.words[x]=l&67108863;if(v===0&&x<d.length&&d!==this)for(;x<d.length;x++)this.words[x]=d.words[x];return this.length=Math.max(this.length,x),d!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(c){return this.clone().isub(c)};function M(E,c,l){l.negative=c.negative^E.negative;var y=E.length+c.length|0;l.length=y,y=y-1|0;var d=E.words[0]|0,h=c.words[0]|0,v=d*h,x=v&67108863,g=v/67108864|0;l.words[0]=x;for(var f=1;f<y;f++){for(var w=g>>>26,D=g&67108863,T=Math.min(f,c.length-1),C=Math.max(0,f-E.length+1);C<=T;C++){var z=f-C|0;d=E.words[z]|0,h=c.words[C]|0,v=d*h+D,w+=v/67108864|0,D=v&67108863}l.words[f]=D|0,g=w|0}return g!==0?l.words[f]=g|0:l.length--,l.strip()}var S=function(c,l,y){var d=c.words,h=l.words,v=y.words,x=0,g,f,w,D=d[0]|0,T=D&8191,C=D>>>13,z=d[1]|0,G=z&8191,V=z>>>13,Z=d[2]|0,J=Z&8191,X=Z>>>13,se=d[3]|0,Q=se&8191,te=se>>>13,de=d[4]|0,ie=de&8191,ae=de>>>13,fe=d[5]|0,oe=fe&8191,ce=fe>>>13,Ke=d[6]|0,pe=Ke&8191,Me=Ke>>>13,it=d[7]|0,we=it&8191,Ae=it>>>13,er=d[8]|0,me=er&8191,he=er>>>13,mt=d[9]|0,ye=mt&8191,le=mt>>>13,kt=h[0]|0,_e=kt&8191,Ee=kt>>>13,Ht=h[1]|0,Pe=Ht&8191,Se=Ht>>>13,Pn=h[2]|0,Te=Pn&8191,Ie=Pn>>>13,_i=h[3]|0,Re=_i&8191,Ce=_i>>>13,Tn=h[4]|0,Ne=Tn&8191,Oe=Tn>>>13,xi=h[5]|0,ke=xi&8191,Be=xi>>>13,Ei=h[6]|0,De=Ei&8191,je=Ei>>>13,si=h[7]|0,ee=si&8191,Y=si>>>13,ue=h[8]|0,re=ue&8191,ne=ue>>>13,ze=h[9]|0,ge=ze&8191,ve=ze>>>13;y.negative=c.negative^l.negative,y.length=19,g=Math.imul(T,_e),f=Math.imul(T,Ee),f=f+Math.imul(C,_e)|0,w=Math.imul(C,Ee);var gt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(gt>>>26)|0,gt&=67108863,g=Math.imul(G,_e),f=Math.imul(G,Ee),f=f+Math.imul(V,_e)|0,w=Math.imul(V,Ee),g=g+Math.imul(T,Pe)|0,f=f+Math.imul(T,Se)|0,f=f+Math.imul(C,Pe)|0,w=w+Math.imul(C,Se)|0;var ot=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ot>>>26)|0,ot&=67108863,g=Math.imul(J,_e),f=Math.imul(J,Ee),f=f+Math.imul(X,_e)|0,w=Math.imul(X,Ee),g=g+Math.imul(G,Pe)|0,f=f+Math.imul(G,Se)|0,f=f+Math.imul(V,Pe)|0,w=w+Math.imul(V,Se)|0,g=g+Math.imul(T,Te)|0,f=f+Math.imul(T,Ie)|0,f=f+Math.imul(C,Te)|0,w=w+Math.imul(C,Ie)|0;var Ge=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,g=Math.imul(Q,_e),f=Math.imul(Q,Ee),f=f+Math.imul(te,_e)|0,w=Math.imul(te,Ee),g=g+Math.imul(J,Pe)|0,f=f+Math.imul(J,Se)|0,f=f+Math.imul(X,Pe)|0,w=w+Math.imul(X,Se)|0,g=g+Math.imul(G,Te)|0,f=f+Math.imul(G,Ie)|0,f=f+Math.imul(V,Te)|0,w=w+Math.imul(V,Ie)|0,g=g+Math.imul(T,Re)|0,f=f+Math.imul(T,Ce)|0,f=f+Math.imul(C,Re)|0,w=w+Math.imul(C,Ce)|0;var Pt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,g=Math.imul(ie,_e),f=Math.imul(ie,Ee),f=f+Math.imul(ae,_e)|0,w=Math.imul(ae,Ee),g=g+Math.imul(Q,Pe)|0,f=f+Math.imul(Q,Se)|0,f=f+Math.imul(te,Pe)|0,w=w+Math.imul(te,Se)|0,g=g+Math.imul(J,Te)|0,f=f+Math.imul(J,Ie)|0,f=f+Math.imul(X,Te)|0,w=w+Math.imul(X,Ie)|0,g=g+Math.imul(G,Re)|0,f=f+Math.imul(G,Ce)|0,f=f+Math.imul(V,Re)|0,w=w+Math.imul(V,Ce)|0,g=g+Math.imul(T,Ne)|0,f=f+Math.imul(T,Oe)|0,f=f+Math.imul(C,Ne)|0,w=w+Math.imul(C,Oe)|0;var Lt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,g=Math.imul(oe,_e),f=Math.imul(oe,Ee),f=f+Math.imul(ce,_e)|0,w=Math.imul(ce,Ee),g=g+Math.imul(ie,Pe)|0,f=f+Math.imul(ie,Se)|0,f=f+Math.imul(ae,Pe)|0,w=w+Math.imul(ae,Se)|0,g=g+Math.imul(Q,Te)|0,f=f+Math.imul(Q,Ie)|0,f=f+Math.imul(te,Te)|0,w=w+Math.imul(te,Ie)|0,g=g+Math.imul(J,Re)|0,f=f+Math.imul(J,Ce)|0,f=f+Math.imul(X,Re)|0,w=w+Math.imul(X,Ce)|0,g=g+Math.imul(G,Ne)|0,f=f+Math.imul(G,Oe)|0,f=f+Math.imul(V,Ne)|0,w=w+Math.imul(V,Oe)|0,g=g+Math.imul(T,ke)|0,f=f+Math.imul(T,Be)|0,f=f+Math.imul(C,ke)|0,w=w+Math.imul(C,Be)|0;var St=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(St>>>26)|0,St&=67108863,g=Math.imul(pe,_e),f=Math.imul(pe,Ee),f=f+Math.imul(Me,_e)|0,w=Math.imul(Me,Ee),g=g+Math.imul(oe,Pe)|0,f=f+Math.imul(oe,Se)|0,f=f+Math.imul(ce,Pe)|0,w=w+Math.imul(ce,Se)|0,g=g+Math.imul(ie,Te)|0,f=f+Math.imul(ie,Ie)|0,f=f+Math.imul(ae,Te)|0,w=w+Math.imul(ae,Ie)|0,g=g+Math.imul(Q,Re)|0,f=f+Math.imul(Q,Ce)|0,f=f+Math.imul(te,Re)|0,w=w+Math.imul(te,Ce)|0,g=g+Math.imul(J,Ne)|0,f=f+Math.imul(J,Oe)|0,f=f+Math.imul(X,Ne)|0,w=w+Math.imul(X,Oe)|0,g=g+Math.imul(G,ke)|0,f=f+Math.imul(G,Be)|0,f=f+Math.imul(V,ke)|0,w=w+Math.imul(V,Be)|0,g=g+Math.imul(T,De)|0,f=f+Math.imul(T,je)|0,f=f+Math.imul(C,De)|0,w=w+Math.imul(C,je)|0;var pt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(pt>>>26)|0,pt&=67108863,g=Math.imul(we,_e),f=Math.imul(we,Ee),f=f+Math.imul(Ae,_e)|0,w=Math.imul(Ae,Ee),g=g+Math.imul(pe,Pe)|0,f=f+Math.imul(pe,Se)|0,f=f+Math.imul(Me,Pe)|0,w=w+Math.imul(Me,Se)|0,g=g+Math.imul(oe,Te)|0,f=f+Math.imul(oe,Ie)|0,f=f+Math.imul(ce,Te)|0,w=w+Math.imul(ce,Ie)|0,g=g+Math.imul(ie,Re)|0,f=f+Math.imul(ie,Ce)|0,f=f+Math.imul(ae,Re)|0,w=w+Math.imul(ae,Ce)|0,g=g+Math.imul(Q,Ne)|0,f=f+Math.imul(Q,Oe)|0,f=f+Math.imul(te,Ne)|0,w=w+Math.imul(te,Oe)|0,g=g+Math.imul(J,ke)|0,f=f+Math.imul(J,Be)|0,f=f+Math.imul(X,ke)|0,w=w+Math.imul(X,Be)|0,g=g+Math.imul(G,De)|0,f=f+Math.imul(G,je)|0,f=f+Math.imul(V,De)|0,w=w+Math.imul(V,je)|0,g=g+Math.imul(T,ee)|0,f=f+Math.imul(T,Y)|0,f=f+Math.imul(C,ee)|0,w=w+Math.imul(C,Y)|0;var Tt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,g=Math.imul(me,_e),f=Math.imul(me,Ee),f=f+Math.imul(he,_e)|0,w=Math.imul(he,Ee),g=g+Math.imul(we,Pe)|0,f=f+Math.imul(we,Se)|0,f=f+Math.imul(Ae,Pe)|0,w=w+Math.imul(Ae,Se)|0,g=g+Math.imul(pe,Te)|0,f=f+Math.imul(pe,Ie)|0,f=f+Math.imul(Me,Te)|0,w=w+Math.imul(Me,Ie)|0,g=g+Math.imul(oe,Re)|0,f=f+Math.imul(oe,Ce)|0,f=f+Math.imul(ce,Re)|0,w=w+Math.imul(ce,Ce)|0,g=g+Math.imul(ie,Ne)|0,f=f+Math.imul(ie,Oe)|0,f=f+Math.imul(ae,Ne)|0,w=w+Math.imul(ae,Oe)|0,g=g+Math.imul(Q,ke)|0,f=f+Math.imul(Q,Be)|0,f=f+Math.imul(te,ke)|0,w=w+Math.imul(te,Be)|0,g=g+Math.imul(J,De)|0,f=f+Math.imul(J,je)|0,f=f+Math.imul(X,De)|0,w=w+Math.imul(X,je)|0,g=g+Math.imul(G,ee)|0,f=f+Math.imul(G,Y)|0,f=f+Math.imul(V,ee)|0,w=w+Math.imul(V,Y)|0,g=g+Math.imul(T,re)|0,f=f+Math.imul(T,ne)|0,f=f+Math.imul(C,re)|0,w=w+Math.imul(C,ne)|0;var vt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(vt>>>26)|0,vt&=67108863,g=Math.imul(ye,_e),f=Math.imul(ye,Ee),f=f+Math.imul(le,_e)|0,w=Math.imul(le,Ee),g=g+Math.imul(me,Pe)|0,f=f+Math.imul(me,Se)|0,f=f+Math.imul(he,Pe)|0,w=w+Math.imul(he,Se)|0,g=g+Math.imul(we,Te)|0,f=f+Math.imul(we,Ie)|0,f=f+Math.imul(Ae,Te)|0,w=w+Math.imul(Ae,Ie)|0,g=g+Math.imul(pe,Re)|0,f=f+Math.imul(pe,Ce)|0,f=f+Math.imul(Me,Re)|0,w=w+Math.imul(Me,Ce)|0,g=g+Math.imul(oe,Ne)|0,f=f+Math.imul(oe,Oe)|0,f=f+Math.imul(ce,Ne)|0,w=w+Math.imul(ce,Oe)|0,g=g+Math.imul(ie,ke)|0,f=f+Math.imul(ie,Be)|0,f=f+Math.imul(ae,ke)|0,w=w+Math.imul(ae,Be)|0,g=g+Math.imul(Q,De)|0,f=f+Math.imul(Q,je)|0,f=f+Math.imul(te,De)|0,w=w+Math.imul(te,je)|0,g=g+Math.imul(J,ee)|0,f=f+Math.imul(J,Y)|0,f=f+Math.imul(X,ee)|0,w=w+Math.imul(X,Y)|0,g=g+Math.imul(G,re)|0,f=f+Math.imul(G,ne)|0,f=f+Math.imul(V,re)|0,w=w+Math.imul(V,ne)|0,g=g+Math.imul(T,ge)|0,f=f+Math.imul(T,ve)|0,f=f+Math.imul(C,ge)|0,w=w+Math.imul(C,ve)|0;var zr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(zr>>>26)|0,zr&=67108863,g=Math.imul(ye,Pe),f=Math.imul(ye,Se),f=f+Math.imul(le,Pe)|0,w=Math.imul(le,Se),g=g+Math.imul(me,Te)|0,f=f+Math.imul(me,Ie)|0,f=f+Math.imul(he,Te)|0,w=w+Math.imul(he,Ie)|0,g=g+Math.imul(we,Re)|0,f=f+Math.imul(we,Ce)|0,f=f+Math.imul(Ae,Re)|0,w=w+Math.imul(Ae,Ce)|0,g=g+Math.imul(pe,Ne)|0,f=f+Math.imul(pe,Oe)|0,f=f+Math.imul(Me,Ne)|0,w=w+Math.imul(Me,Oe)|0,g=g+Math.imul(oe,ke)|0,f=f+Math.imul(oe,Be)|0,f=f+Math.imul(ce,ke)|0,w=w+Math.imul(ce,Be)|0,g=g+Math.imul(ie,De)|0,f=f+Math.imul(ie,je)|0,f=f+Math.imul(ae,De)|0,w=w+Math.imul(ae,je)|0,g=g+Math.imul(Q,ee)|0,f=f+Math.imul(Q,Y)|0,f=f+Math.imul(te,ee)|0,w=w+Math.imul(te,Y)|0,g=g+Math.imul(J,re)|0,f=f+Math.imul(J,ne)|0,f=f+Math.imul(X,re)|0,w=w+Math.imul(X,ne)|0,g=g+Math.imul(G,ge)|0,f=f+Math.imul(G,ve)|0,f=f+Math.imul(V,ge)|0,w=w+Math.imul(V,ve)|0;var ir=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ir>>>26)|0,ir&=67108863,g=Math.imul(ye,Te),f=Math.imul(ye,Ie),f=f+Math.imul(le,Te)|0,w=Math.imul(le,Ie),g=g+Math.imul(me,Re)|0,f=f+Math.imul(me,Ce)|0,f=f+Math.imul(he,Re)|0,w=w+Math.imul(he,Ce)|0,g=g+Math.imul(we,Ne)|0,f=f+Math.imul(we,Oe)|0,f=f+Math.imul(Ae,Ne)|0,w=w+Math.imul(Ae,Oe)|0,g=g+Math.imul(pe,ke)|0,f=f+Math.imul(pe,Be)|0,f=f+Math.imul(Me,ke)|0,w=w+Math.imul(Me,Be)|0,g=g+Math.imul(oe,De)|0,f=f+Math.imul(oe,je)|0,f=f+Math.imul(ce,De)|0,w=w+Math.imul(ce,je)|0,g=g+Math.imul(ie,ee)|0,f=f+Math.imul(ie,Y)|0,f=f+Math.imul(ae,ee)|0,w=w+Math.imul(ae,Y)|0,g=g+Math.imul(Q,re)|0,f=f+Math.imul(Q,ne)|0,f=f+Math.imul(te,re)|0,w=w+Math.imul(te,ne)|0,g=g+Math.imul(J,ge)|0,f=f+Math.imul(J,ve)|0,f=f+Math.imul(X,ge)|0,w=w+Math.imul(X,ve)|0;var ur=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ur>>>26)|0,ur&=67108863,g=Math.imul(ye,Re),f=Math.imul(ye,Ce),f=f+Math.imul(le,Re)|0,w=Math.imul(le,Ce),g=g+Math.imul(me,Ne)|0,f=f+Math.imul(me,Oe)|0,f=f+Math.imul(he,Ne)|0,w=w+Math.imul(he,Oe)|0,g=g+Math.imul(we,ke)|0,f=f+Math.imul(we,Be)|0,f=f+Math.imul(Ae,ke)|0,w=w+Math.imul(Ae,Be)|0,g=g+Math.imul(pe,De)|0,f=f+Math.imul(pe,je)|0,f=f+Math.imul(Me,De)|0,w=w+Math.imul(Me,je)|0,g=g+Math.imul(oe,ee)|0,f=f+Math.imul(oe,Y)|0,f=f+Math.imul(ce,ee)|0,w=w+Math.imul(ce,Y)|0,g=g+Math.imul(ie,re)|0,f=f+Math.imul(ie,ne)|0,f=f+Math.imul(ae,re)|0,w=w+Math.imul(ae,ne)|0,g=g+Math.imul(Q,ge)|0,f=f+Math.imul(Q,ve)|0,f=f+Math.imul(te,ge)|0,w=w+Math.imul(te,ve)|0;var wt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(wt>>>26)|0,wt&=67108863,g=Math.imul(ye,Ne),f=Math.imul(ye,Oe),f=f+Math.imul(le,Ne)|0,w=Math.imul(le,Oe),g=g+Math.imul(me,ke)|0,f=f+Math.imul(me,Be)|0,f=f+Math.imul(he,ke)|0,w=w+Math.imul(he,Be)|0,g=g+Math.imul(we,De)|0,f=f+Math.imul(we,je)|0,f=f+Math.imul(Ae,De)|0,w=w+Math.imul(Ae,je)|0,g=g+Math.imul(pe,ee)|0,f=f+Math.imul(pe,Y)|0,f=f+Math.imul(Me,ee)|0,w=w+Math.imul(Me,Y)|0,g=g+Math.imul(oe,re)|0,f=f+Math.imul(oe,ne)|0,f=f+Math.imul(ce,re)|0,w=w+Math.imul(ce,ne)|0,g=g+Math.imul(ie,ge)|0,f=f+Math.imul(ie,ve)|0,f=f+Math.imul(ae,ge)|0,w=w+Math.imul(ae,ve)|0;var or=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(or>>>26)|0,or&=67108863,g=Math.imul(ye,ke),f=Math.imul(ye,Be),f=f+Math.imul(le,ke)|0,w=Math.imul(le,Be),g=g+Math.imul(me,De)|0,f=f+Math.imul(me,je)|0,f=f+Math.imul(he,De)|0,w=w+Math.imul(he,je)|0,g=g+Math.imul(we,ee)|0,f=f+Math.imul(we,Y)|0,f=f+Math.imul(Ae,ee)|0,w=w+Math.imul(Ae,Y)|0,g=g+Math.imul(pe,re)|0,f=f+Math.imul(pe,ne)|0,f=f+Math.imul(Me,re)|0,w=w+Math.imul(Me,ne)|0,g=g+Math.imul(oe,ge)|0,f=f+Math.imul(oe,ve)|0,f=f+Math.imul(ce,ge)|0,w=w+Math.imul(ce,ve)|0;var lr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(lr>>>26)|0,lr&=67108863,g=Math.imul(ye,De),f=Math.imul(ye,je),f=f+Math.imul(le,De)|0,w=Math.imul(le,je),g=g+Math.imul(me,ee)|0,f=f+Math.imul(me,Y)|0,f=f+Math.imul(he,ee)|0,w=w+Math.imul(he,Y)|0,g=g+Math.imul(we,re)|0,f=f+Math.imul(we,ne)|0,f=f+Math.imul(Ae,re)|0,w=w+Math.imul(Ae,ne)|0,g=g+Math.imul(pe,ge)|0,f=f+Math.imul(pe,ve)|0,f=f+Math.imul(Me,ge)|0,w=w+Math.imul(Me,ve)|0;var Mr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,g=Math.imul(ye,ee),f=Math.imul(ye,Y),f=f+Math.imul(le,ee)|0,w=Math.imul(le,Y),g=g+Math.imul(me,re)|0,f=f+Math.imul(me,ne)|0,f=f+Math.imul(he,re)|0,w=w+Math.imul(he,ne)|0,g=g+Math.imul(we,ge)|0,f=f+Math.imul(we,ve)|0,f=f+Math.imul(Ae,ge)|0,w=w+Math.imul(Ae,ve)|0;var Kr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,g=Math.imul(ye,re),f=Math.imul(ye,ne),f=f+Math.imul(le,re)|0,w=Math.imul(le,ne),g=g+Math.imul(me,ge)|0,f=f+Math.imul(me,ve)|0,f=f+Math.imul(he,ge)|0,w=w+Math.imul(he,ve)|0;var kr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(kr>>>26)|0,kr&=67108863,g=Math.imul(ye,ge),f=Math.imul(ye,ve),f=f+Math.imul(le,ge)|0,w=Math.imul(le,ve);var Yr=(x+g|0)+((f&8191)<<13)|0;return x=(w+(f>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,v[0]=gt,v[1]=ot,v[2]=Ge,v[3]=Pt,v[4]=Lt,v[5]=St,v[6]=pt,v[7]=Tt,v[8]=vt,v[9]=zr,v[10]=ir,v[11]=ur,v[12]=wt,v[13]=or,v[14]=lr,v[15]=Mr,v[16]=Kr,v[17]=kr,v[18]=Yr,x!==0&&(v[19]=x,y.length++),y};Math.imul||(S=M);function P(E,c,l){l.negative=c.negative^E.negative,l.length=E.length+c.length;for(var y=0,d=0,h=0;h<l.length-1;h++){var v=d;d=0;for(var x=y&67108863,g=Math.min(h,c.length-1),f=Math.max(0,h-E.length+1);f<=g;f++){var w=h-f,D=E.words[w]|0,T=c.words[f]|0,C=D*T,z=C&67108863;v=v+(C/67108864|0)|0,z=z+x|0,x=z&67108863,v=v+(z>>>26)|0,d+=v>>>26,v&=67108863}l.words[h]=x,y=v,v=d}return y!==0?l.words[h]=y:l.length--,l.strip()}function k(E,c,l){var y=new R;return y.mulp(E,c,l)}i.prototype.mulTo=function(c,l){var y,d=this.length+c.length;return this.length===10&&c.length===10?y=S(this,c,l):d<63?y=M(this,c,l):d<1024?y=P(this,c,l):y=k(this,c,l),y};function R(E,c){this.x=E,this.y=c}R.prototype.makeRBT=function(c){for(var l=new Array(c),y=i.prototype._countBits(c)-1,d=0;d<c;d++)l[d]=this.revBin(d,y,c);return l},R.prototype.revBin=function(c,l,y){if(c===0||c===y-1)return c;for(var d=0,h=0;h<l;h++)d|=(c&1)<<l-h-1,c>>=1;return d},R.prototype.permute=function(c,l,y,d,h,v){for(var x=0;x<v;x++)d[x]=l[c[x]],h[x]=y[c[x]]},R.prototype.transform=function(c,l,y,d,h,v){this.permute(v,c,l,y,d,h);for(var x=1;x<h;x<<=1)for(var g=x<<1,f=Math.cos(2*Math.PI/g),w=Math.sin(2*Math.PI/g),D=0;D<h;D+=g)for(var T=f,C=w,z=0;z<x;z++){var G=y[D+z],V=d[D+z],Z=y[D+z+x],J=d[D+z+x],X=T*Z-C*J;J=T*J+C*Z,Z=X,y[D+z]=G+Z,d[D+z]=V+J,y[D+z+x]=G-Z,d[D+z+x]=V-J,z!==g&&(X=f*T-w*C,C=f*C+w*T,T=X)}},R.prototype.guessLen13b=function(c,l){var y=Math.max(l,c)|1,d=y&1,h=0;for(y=y/2|0;y;y=y>>>1)h++;return 1<<h+1+d},R.prototype.conjugate=function(c,l,y){if(!(y<=1))for(var d=0;d<y/2;d++){var h=c[d];c[d]=c[y-d-1],c[y-d-1]=h,h=l[d],l[d]=-l[y-d-1],l[y-d-1]=-h}},R.prototype.normalize13b=function(c,l){for(var y=0,d=0;d<l/2;d++){var h=Math.round(c[2*d+1]/l)*8192+Math.round(c[2*d]/l)+y;c[d]=h&67108863,h<67108864?y=0:y=h/67108864|0}return c},R.prototype.convert13b=function(c,l,y,d){for(var h=0,v=0;v<l;v++)h=h+(c[v]|0),y[2*v]=h&8191,h=h>>>13,y[2*v+1]=h&8191,h=h>>>13;for(v=2*l;v<d;++v)y[v]=0;r(h===0),r((h&-8192)===0)},R.prototype.stub=function(c){for(var l=new Array(c),y=0;y<c;y++)l[y]=0;return l},R.prototype.mulp=function(c,l,y){var d=2*this.guessLen13b(c.length,l.length),h=this.makeRBT(d),v=this.stub(d),x=new Array(d),g=new Array(d),f=new Array(d),w=new Array(d),D=new Array(d),T=new Array(d),C=y.words;C.length=d,this.convert13b(c.words,c.length,x,d),this.convert13b(l.words,l.length,w,d),this.transform(x,v,g,f,d,h),this.transform(w,v,D,T,d,h);for(var z=0;z<d;z++){var G=g[z]*D[z]-f[z]*T[z];f[z]=g[z]*T[z]+f[z]*D[z],g[z]=G}return this.conjugate(g,f,d),this.transform(g,f,C,v,d,h),this.conjugate(C,v,d),this.normalize13b(C,d),y.negative=c.negative^l.negative,y.length=c.length+l.length,y.strip()},i.prototype.mul=function(c){var l=new i(null);return l.words=new Array(this.length+c.length),this.mulTo(c,l)},i.prototype.mulf=function(c){var l=new i(null);return l.words=new Array(this.length+c.length),k(this,c,l)},i.prototype.imul=function(c){return this.clone().mulTo(c,this)},i.prototype.imuln=function(c){r(typeof c=="number"),r(c<67108864);for(var l=0,y=0;y<this.length;y++){var d=(this.words[y]|0)*c,h=(d&67108863)+(l&67108863);l>>=26,l+=d/67108864|0,l+=h>>>26,this.words[y]=h&67108863}return l!==0&&(this.words[y]=l,this.length++),this},i.prototype.muln=function(c){return this.clone().imuln(c)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(c){var l=A(c);if(l.length===0)return new i(1);for(var y=this,d=0;d<l.length&&l[d]===0;d++,y=y.sqr());if(++d<l.length)for(var h=y.sqr();d<l.length;d++,h=h.sqr())l[d]!==0&&(y=y.mul(h));return y},i.prototype.iushln=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26,d=67108863>>>26-l<<26-l,h;if(l!==0){var v=0;for(h=0;h<this.length;h++){var x=this.words[h]&d,g=(this.words[h]|0)-x<<l;this.words[h]=g|v,v=x>>>26-l}v&&(this.words[h]=v,this.length++)}if(y!==0){for(h=this.length-1;h>=0;h--)this.words[h+y]=this.words[h];for(h=0;h<y;h++)this.words[h]=0;this.length+=y}return this.strip()},i.prototype.ishln=function(c){return r(this.negative===0),this.iushln(c)},i.prototype.iushrn=function(c,l,y){r(typeof c=="number"&&c>=0);var d;l?d=(l-l%26)/26:d=0;var h=c%26,v=Math.min((c-h)/26,this.length),x=67108863^67108863>>>h<<h,g=y;if(d-=v,d=Math.max(0,d),g){for(var f=0;f<v;f++)g.words[f]=this.words[f];g.length=v}if(v!==0)if(this.length>v)for(this.length-=v,f=0;f<this.length;f++)this.words[f]=this.words[f+v];else this.words[0]=0,this.length=1;var w=0;for(f=this.length-1;f>=0&&(w!==0||f>=d);f--){var D=this.words[f]|0;this.words[f]=w<<26-h|D>>>h,w=D&x}return g&&w!==0&&(g.words[g.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(c,l,y){return r(this.negative===0),this.iushrn(c,l,y)},i.prototype.shln=function(c){return this.clone().ishln(c)},i.prototype.ushln=function(c){return this.clone().iushln(c)},i.prototype.shrn=function(c){return this.clone().ishrn(c)},i.prototype.ushrn=function(c){return this.clone().iushrn(c)},i.prototype.testn=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26,d=1<<l;if(this.length<=y)return!1;var h=this.words[y];return!!(h&d)},i.prototype.imaskn=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(l!==0&&y++,this.length=Math.min(y,this.length),l!==0){var d=67108863^67108863>>>l<<l;this.words[this.length-1]&=d}return this.strip()},i.prototype.maskn=function(c){return this.clone().imaskn(c)},i.prototype.iaddn=function(c){return r(typeof c=="number"),r(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},i.prototype._iaddn=function(c){this.words[0]+=c;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(c){if(r(typeof c=="number"),r(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(c){return this.clone().iaddn(c)},i.prototype.subn=function(c){return this.clone().isubn(c)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(c,l,y){var d=c.length+y,h;this._expand(d);var v,x=0;for(h=0;h<c.length;h++){v=(this.words[h+y]|0)+x;var g=(c.words[h]|0)*l;v-=g&67108863,x=(v>>26)-(g/67108864|0),this.words[h+y]=v&67108863}for(;h<this.length-y;h++)v=(this.words[h+y]|0)+x,x=v>>26,this.words[h+y]=v&67108863;if(x===0)return this.strip();for(r(x===-1),x=0,h=0;h<this.length;h++)v=-(this.words[h]|0)+x,x=v>>26,this.words[h]=v&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(c,l){var y=this.length-c.length,d=this.clone(),h=c,v=h.words[h.length-1]|0,x=this._countBits(v);y=26-x,y!==0&&(h=h.ushln(y),d.iushln(y),v=h.words[h.length-1]|0);var g=d.length-h.length,f;if(l!=="mod"){f=new i(null),f.length=g+1,f.words=new Array(f.length);for(var w=0;w<f.length;w++)f.words[w]=0}var D=d.clone()._ishlnsubmul(h,1,g);D.negative===0&&(d=D,f&&(f.words[g]=1));for(var T=g-1;T>=0;T--){var C=(d.words[h.length+T]|0)*67108864+(d.words[h.length+T-1]|0);for(C=Math.min(C/v|0,67108863),d._ishlnsubmul(h,C,T);d.negative!==0;)C--,d.negative=0,d._ishlnsubmul(h,1,T),d.isZero()||(d.negative^=1);f&&(f.words[T]=C)}return f&&f.strip(),d.strip(),l!=="div"&&y!==0&&d.iushrn(y),{div:f||null,mod:d}},i.prototype.divmod=function(c,l,y){if(r(!c.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var d,h,v;return this.negative!==0&&c.negative===0?(v=this.neg().divmod(c,l),l!=="mod"&&(d=v.div.neg()),l!=="div"&&(h=v.mod.neg(),y&&h.negative!==0&&h.iadd(c)),{div:d,mod:h}):this.negative===0&&c.negative!==0?(v=this.divmod(c.neg(),l),l!=="mod"&&(d=v.div.neg()),{div:d,mod:v.mod}):this.negative&c.negative?(v=this.neg().divmod(c.neg(),l),l!=="div"&&(h=v.mod.neg(),y&&h.negative!==0&&h.isub(c)),{div:v.div,mod:h}):c.length>this.length||this.cmp(c)<0?{div:new i(0),mod:this}:c.length===1?l==="div"?{div:this.divn(c.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new i(this.modn(c.words[0]))}:this._wordDiv(c,l)},i.prototype.div=function(c){return this.divmod(c,"div",!1).div},i.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},i.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},i.prototype.divRound=function(c){var l=this.divmod(c);if(l.mod.isZero())return l.div;var y=l.div.negative!==0?l.mod.isub(c):l.mod,d=c.ushrn(1),h=c.andln(1),v=y.cmp(d);return v<0||h===1&&v===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(c){r(c<=67108863);for(var l=(1<<26)%c,y=0,d=this.length-1;d>=0;d--)y=(l*y+(this.words[d]|0))%c;return y},i.prototype.idivn=function(c){r(c<=67108863);for(var l=0,y=this.length-1;y>=0;y--){var d=(this.words[y]|0)+l*67108864;this.words[y]=d/c|0,l=d%c}return this.strip()},i.prototype.divn=function(c){return this.clone().idivn(c)},i.prototype.egcd=function(c){r(c.negative===0),r(!c.isZero());var l=this,y=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var d=new i(1),h=new i(0),v=new i(0),x=new i(1),g=0;l.isEven()&&y.isEven();)l.iushrn(1),y.iushrn(1),++g;for(var f=y.clone(),w=l.clone();!l.isZero();){for(var D=0,T=1;!(l.words[0]&T)&&D<26;++D,T<<=1);if(D>0)for(l.iushrn(D);D-- >0;)(d.isOdd()||h.isOdd())&&(d.iadd(f),h.isub(w)),d.iushrn(1),h.iushrn(1);for(var C=0,z=1;!(y.words[0]&z)&&C<26;++C,z<<=1);if(C>0)for(y.iushrn(C);C-- >0;)(v.isOdd()||x.isOdd())&&(v.iadd(f),x.isub(w)),v.iushrn(1),x.iushrn(1);l.cmp(y)>=0?(l.isub(y),d.isub(v),h.isub(x)):(y.isub(l),v.isub(d),x.isub(h))}return{a:v,b:x,gcd:y.iushln(g)}},i.prototype._invmp=function(c){r(c.negative===0),r(!c.isZero());var l=this,y=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var d=new i(1),h=new i(0),v=y.clone();l.cmpn(1)>0&&y.cmpn(1)>0;){for(var x=0,g=1;!(l.words[0]&g)&&x<26;++x,g<<=1);if(x>0)for(l.iushrn(x);x-- >0;)d.isOdd()&&d.iadd(v),d.iushrn(1);for(var f=0,w=1;!(y.words[0]&w)&&f<26;++f,w<<=1);if(f>0)for(y.iushrn(f);f-- >0;)h.isOdd()&&h.iadd(v),h.iushrn(1);l.cmp(y)>=0?(l.isub(y),d.isub(h)):(y.isub(l),h.isub(d))}var D;return l.cmpn(1)===0?D=d:D=h,D.cmpn(0)<0&&D.iadd(c),D},i.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var l=this.clone(),y=c.clone();l.negative=0,y.negative=0;for(var d=0;l.isEven()&&y.isEven();d++)l.iushrn(1),y.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;y.isEven();)y.iushrn(1);var h=l.cmp(y);if(h<0){var v=l;l=y,y=v}else if(h===0||y.cmpn(1)===0)break;l.isub(y)}while(!0);return y.iushln(d)},i.prototype.invm=function(c){return this.egcd(c).a.umod(c)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(c){return this.words[0]&c},i.prototype.bincn=function(c){r(typeof c=="number");var l=c%26,y=(c-l)/26,d=1<<l;if(this.length<=y)return this._expand(y+1),this.words[y]|=d,this;for(var h=d,v=y;h!==0&&v<this.length;v++){var x=this.words[v]|0;x+=h,h=x>>>26,x&=67108863,this.words[v]=x}return h!==0&&(this.words[v]=h,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(c){var l=c<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var y;if(this.length>1)y=1;else{l&&(c=-c),r(c<=67108863,"Number is too big");var d=this.words[0]|0;y=d===c?0:d<c?-1:1}return this.negative!==0?-y|0:y},i.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var l=this.ucmp(c);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var l=0,y=this.length-1;y>=0;y--){var d=this.words[y]|0,h=c.words[y]|0;if(d!==h){d<h?l=-1:d>h&&(l=1);break}}return l},i.prototype.gtn=function(c){return this.cmpn(c)===1},i.prototype.gt=function(c){return this.cmp(c)===1},i.prototype.gten=function(c){return this.cmpn(c)>=0},i.prototype.gte=function(c){return this.cmp(c)>=0},i.prototype.ltn=function(c){return this.cmpn(c)===-1},i.prototype.lt=function(c){return this.cmp(c)===-1},i.prototype.lten=function(c){return this.cmpn(c)<=0},i.prototype.lte=function(c){return this.cmp(c)<=0},i.prototype.eqn=function(c){return this.cmpn(c)===0},i.prototype.eq=function(c){return this.cmp(c)===0},i.red=function(c){return new L(c)},i.prototype.toRed=function(c){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(c){return this.red=c,this},i.prototype.forceRed=function(c){return r(!this.red,"Already a number in reduction context"),this._forceRed(c)},i.prototype.redAdd=function(c){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},i.prototype.redIAdd=function(c){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},i.prototype.redSub=function(c){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},i.prototype.redISub=function(c){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},i.prototype.redShl=function(c){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},i.prototype.redMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},i.prototype.redIMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(c){return r(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var B={k256:null,p224:null,p192:null,p25519:null};function I(E,c){this.name=E,this.p=new i(c,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}I.prototype._tmp=function(){var c=new i(null);return c.words=new Array(Math.ceil(this.n/13)),c},I.prototype.ireduce=function(c){var l=c,y;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),y=l.bitLength();while(y>this.n);var d=y<this.n?-1:l.ucmp(this.p);return d===0?(l.words[0]=0,l.length=1):d>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},I.prototype.split=function(c,l){c.iushrn(this.n,0,l)},I.prototype.imulK=function(c){return c.imul(this.k)};function q(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(q,I),q.prototype.split=function(c,l){for(var y=4194303,d=Math.min(c.length,9),h=0;h<d;h++)l.words[h]=c.words[h];if(l.length=d,c.length<=9){c.words[0]=0,c.length=1;return}var v=c.words[9];for(l.words[l.length++]=v&y,h=10;h<c.length;h++){var x=c.words[h]|0;c.words[h-10]=(x&y)<<4|v>>>22,v=x}v>>>=22,c.words[h-10]=v,v===0&&c.length>10?c.length-=10:c.length-=9},q.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var l=0,y=0;y<c.length;y++){var d=c.words[y]|0;l+=d*977,c.words[y]=l&67108863,l=d*64+(l/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function $(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n($,I);function U(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(U,I);function F(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(F,I),F.prototype.imulK=function(c){for(var l=0,y=0;y<c.length;y++){var d=(c.words[y]|0)*19+l,h=d&67108863;d>>>=26,c.words[y]=h,l=d}return l!==0&&(c.words[c.length++]=l),c},i._prime=function(c){if(B[c])return B[c];var l;if(c==="k256")l=new q;else if(c==="p224")l=new $;else if(c==="p192")l=new U;else if(c==="p25519")l=new F;else throw new Error("Unknown prime "+c);return B[c]=l,l};function L(E){if(typeof E=="string"){var c=i._prime(E);this.m=c.p,this.prime=c}else r(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}L.prototype._verify1=function(c){r(c.negative===0,"red works only with positives"),r(c.red,"red works only with red numbers")},L.prototype._verify2=function(c,l){r((c.negative|l.negative)===0,"red works only with positives"),r(c.red&&c.red===l.red,"red works only with red numbers")},L.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):c.umod(this.m)._forceRed(this)},L.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},L.prototype.add=function(c,l){this._verify2(c,l);var y=c.add(l);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},L.prototype.iadd=function(c,l){this._verify2(c,l);var y=c.iadd(l);return y.cmp(this.m)>=0&&y.isub(this.m),y},L.prototype.sub=function(c,l){this._verify2(c,l);var y=c.sub(l);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},L.prototype.isub=function(c,l){this._verify2(c,l);var y=c.isub(l);return y.cmpn(0)<0&&y.iadd(this.m),y},L.prototype.shl=function(c,l){return this._verify1(c),this.imod(c.ushln(l))},L.prototype.imul=function(c,l){return this._verify2(c,l),this.imod(c.imul(l))},L.prototype.mul=function(c,l){return this._verify2(c,l),this.imod(c.mul(l))},L.prototype.isqr=function(c){return this.imul(c,c.clone())},L.prototype.sqr=function(c){return this.mul(c,c)},L.prototype.sqrt=function(c){if(c.isZero())return c.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var y=this.m.add(new i(1)).iushrn(2);return this.pow(c,y)}for(var d=this.m.subn(1),h=0;!d.isZero()&&d.andln(1)===0;)h++,d.iushrn(1);r(!d.isZero());var v=new i(1).toRed(this),x=v.redNeg(),g=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,g).cmp(x)!==0;)f.redIAdd(x);for(var w=this.pow(f,d),D=this.pow(c,d.addn(1).iushrn(1)),T=this.pow(c,d),C=h;T.cmp(v)!==0;){for(var z=T,G=0;z.cmp(v)!==0;G++)z=z.redSqr();r(G<C);var V=this.pow(w,new i(1).iushln(C-G-1));D=D.redMul(V),w=V.redSqr(),T=T.redMul(w),C=G}return D},L.prototype.invm=function(c){var l=c._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},L.prototype.pow=function(c,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return c.clone();var y=4,d=new Array(1<<y);d[0]=new i(1).toRed(this),d[1]=c;for(var h=2;h<d.length;h++)d[h]=this.mul(d[h-1],c);var v=d[0],x=0,g=0,f=l.bitLength()%26;for(f===0&&(f=26),h=l.length-1;h>=0;h--){for(var w=l.words[h],D=f-1;D>=0;D--){var T=w>>D&1;if(v!==d[0]&&(v=this.sqr(v)),T===0&&x===0){g=0;continue}x<<=1,x|=T,g++,!(g!==y&&(h!==0||D!==0))&&(v=this.mul(v,d[x]),g=0,x=0)}f=26}return v},L.prototype.convertTo=function(c){var l=c.umod(this.m);return l===c?l.clone():l},L.prototype.convertFrom=function(c){var l=c.clone();return l.red=null,l},i.mont=function(c){return new W(c)};function W(E){L.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(W,L),W.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},W.prototype.convertFrom=function(c){var l=this.imod(c.mul(this.rinv));return l.red=null,l},W.prototype.imul=function(c,l){if(c.isZero()||l.isZero())return c.words[0]=0,c.length=1,c;var y=c.imul(l),d=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=y.isub(d).iushrn(this.shift),v=h;return h.cmp(this.m)>=0?v=h.isub(this.m):h.cmpn(0)<0&&(v=h.iadd(this.m)),v._forceRed(this)},W.prototype.mul=function(c,l){if(c.isZero()||l.isZero())return new i(0)._forceRed(this);var y=c.mul(l),d=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=y.isub(d).iushrn(this.shift),v=h;return h.cmp(this.m)>=0?v=h.isub(this.m):h.cmpn(0)<0&&(v=h.iadd(this.m)),v._forceRed(this)},W.prototype.invm=function(c){var l=this.imod(c._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(typeof FC>"u"||FC,Mae)});var zC=H(Tae=>{"use strict";_();var i4=Tae;function yLe(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t!="string"){for(var n=0;n<t.length;n++)r[n]=t[n]|0;return r}if(e==="hex"){t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t);for(var n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(var n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,s=i&255;o?r.push(o,s):r.push(s)}return r}i4.toArray=yLe;function Aae(t){return t.length===1?"0"+t:t}i4.zero2=Aae;function Pae(t){for(var e="",r=0;r<t.length;r++)e+=Aae(t[r].toString(16));return e}i4.toHex=Pae;i4.encode=function(e,r){return r==="hex"?Pae(e):e}});var Ec=H(Rae=>{"use strict";_();var fu=Rae,gLe=Al(),bLe=xc(),o4=zC();fu.assert=bLe;fu.toArray=o4.toArray;fu.zero2=o4.zero2;fu.toHex=o4.toHex;fu.encode=o4.encode;function vLe(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1),i;for(i=0;i<n.length;i+=1)n[i]=0;var o=1<<e+1,s=t.clone();for(i=0;i<n.length;i++){var a,u=s.andln(o-1);s.isOdd()?(u>(o>>1)-1?a=(o>>1)-u:a=u,s.isubn(a)):a=0,n[i]=a,s.iushrn(1)}return n}fu.getNAF=vLe;function wLe(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n=0,i=0,o;t.cmpn(-n)>0||e.cmpn(-i)>0;){var s=t.andln(3)+n&3,a=e.andln(3)+i&3;s===3&&(s=-1),a===3&&(a=-1);var u;s&1?(o=t.andln(7)+n&7,(o===3||o===5)&&a===2?u=-s:u=s):u=0,r[0].push(u);var m;a&1?(o=e.andln(7)+i&7,(o===3||o===5)&&s===2?m=-a:m=a):m=0,r[1].push(m),2*n===u+1&&(n=1-n),2*i===m+1&&(i=1-i),t.iushrn(1),e.iushrn(1)}return r}fu.getJSF=wLe;function _Le(t,e,r){var n="_"+e;t.prototype[e]=function(){return this[n]!==void 0?this[n]:this[n]=r.call(this)}}fu.cachedProperty=_Le;function xLe(t){return typeof t=="string"?fu.toArray(t,"hex"):t}fu.parseBytes=xLe;function ELe(t){return new gLe(t,"hex","le")}fu.intFromLE=ELe});var xE=H((P9t,Iae)=>{"use strict";_();var Wy=Al(),_E=Ec(),s4=_E.getNAF,SLe=_E.getJSF,a4=_E.assert;function u0(t,e){this.type=t,this.p=new Wy(e.p,16),this.red=e.prime?Wy.red(e.prime):Wy.mont(this.p),this.zero=new Wy(0).toRed(this.red),this.one=new Wy(1).toRed(this.red),this.two=new Wy(2).toRed(this.red),this.n=e.n&&new Wy(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}Iae.exports=u0;u0.prototype.point=function(){throw new Error("Not implemented")};u0.prototype.validate=function(){throw new Error("Not implemented")};u0.prototype._fixedNafMul=function(e,r){a4(e.precomputed);var n=e._getDoubles(),i=s4(r,1,this._bitLength),o=(1<<n.step+1)-(n.step%2===0?2:1);o/=3;var s=[],a,u;for(a=0;a<i.length;a+=n.step){u=0;for(var m=a+n.step-1;m>=a;m--)u=(u<<1)+i[m];s.push(u)}for(var p=this.jpoint(null,null,null),b=this.jpoint(null,null,null),A=o;A>0;A--){for(a=0;a<s.length;a++)u=s[a],u===A?b=b.mixedAdd(n.points[a]):u===-A&&(b=b.mixedAdd(n.points[a].neg()));p=p.add(b)}return p.toP()};u0.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var o=i.points,s=s4(r,n,this._bitLength),a=this.jpoint(null,null,null),u=s.length-1;u>=0;u--){for(var m=0;u>=0&&s[u]===0;u--)m++;if(u>=0&&m++,a=a.dblp(m),u<0)break;var p=s[u];a4(p!==0),e.type==="affine"?p>0?a=a.mixedAdd(o[p-1>>1]):a=a.mixedAdd(o[-p-1>>1].neg()):p>0?a=a.add(o[p-1>>1]):a=a.add(o[-p-1>>1].neg())}return e.type==="affine"?a.toP():a};u0.prototype._wnafMulAdd=function(e,r,n,i,o){var s=this._wnafT1,a=this._wnafT2,u=this._wnafT3,m=0,p,b,A;for(p=0;p<i;p++){A=r[p];var M=A._getNAFPoints(e);s[p]=M.wnd,a[p]=M.points}for(p=i-1;p>=1;p-=2){var S=p-1,P=p;if(s[S]!==1||s[P]!==1){u[S]=s4(n[S],s[S],this._bitLength),u[P]=s4(n[P],s[P],this._bitLength),m=Math.max(u[S].length,m),m=Math.max(u[P].length,m);continue}var k=[r[S],null,null,r[P]];r[S].y.cmp(r[P].y)===0?(k[1]=r[S].add(r[P]),k[2]=r[S].toJ().mixedAdd(r[P].neg())):r[S].y.cmp(r[P].y.redNeg())===0?(k[1]=r[S].toJ().mixedAdd(r[P]),k[2]=r[S].add(r[P].neg())):(k[1]=r[S].toJ().mixedAdd(r[P]),k[2]=r[S].toJ().mixedAdd(r[P].neg()));var R=[-3,-1,-5,-7,0,7,5,1,3],B=SLe(n[S],n[P]);for(m=Math.max(B[0].length,m),u[S]=new Array(m),u[P]=new Array(m),b=0;b<m;b++){var I=B[0][b]|0,q=B[1][b]|0;u[S][b]=R[(I+1)*3+(q+1)],u[P][b]=0,a[S]=k}}var $=this.jpoint(null,null,null),U=this._wnafT4;for(p=m;p>=0;p--){for(var F=0;p>=0;){var L=!0;for(b=0;b<i;b++)U[b]=u[b][p]|0,U[b]!==0&&(L=!1);if(!L)break;F++,p--}if(p>=0&&F++,$=$.dblp(F),p<0)break;for(b=0;b<i;b++){var W=U[b];W!==0&&(W>0?A=a[b][W-1>>1]:W<0&&(A=a[b][-W-1>>1].neg()),A.type==="affine"?$=$.mixedAdd(A):$=$.add(A))}}for(p=0;p<i;p++)a[p]=null;return o?$:$.toP()};function uf(t,e){this.curve=t,this.type=e,this.precomputed=null}u0.BasePoint=uf;uf.prototype.eq=function(){throw new Error("Not implemented")};uf.prototype.validate=function(){return this.curve.validate(this)};u0.prototype.decodePoint=function(e,r){e=_E.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?a4(e[e.length-1]%2===0):e[0]===7&&a4(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};uf.prototype.encodeCompressed=function(e){return this.encode(e,!0)};uf.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};uf.prototype.encode=function(e,r){return _E.encode(this._encode(r),e)};uf.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};uf.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};uf.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,o=0;o<r;o+=e){for(var s=0;s<e;s++)i=i.dbl();n.push(i)}return{step:e,points:n}};uf.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),o=1;o<n;o++)r[o]=r[o-1].add(i);return{wnd:e,points:r}};uf.prototype._getBeta=function(){return null};uf.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r}});var Oae=H((R9t,kae)=>{"use strict";_();var MLe=Ec(),Di=Al(),KC=Rt(),kw=xE(),ALe=MLe.assert;function lf(t){kw.call(this,"short",t),this.a=new Di(t.a,16).toRed(this.red),this.b=new Di(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}KC(lf,kw);kae.exports=lf;lf.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Di(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new Di(e.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(r))===0?n=o[0]:(n=o[1],ALe(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var s;return e.basis?s=e.basis.map(function(a){return{a:new Di(a.a,16),b:new Di(a.b,16)}}):s=this._getEndoBasis(n),{beta:r,lambda:n,basis:s}}};lf.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Di.mont(e),n=new Di(2).toRed(r).redInvm(),i=n.redNeg(),o=new Di(3).toRed(r).redNeg().redSqrt().redMul(n),s=i.redAdd(o).fromRed(),a=i.redSub(o).fromRed();return[s,a]};lf.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),o=new Di(1),s=new Di(0),a=new Di(0),u=new Di(1),m,p,b,A,M,S,P,k=0,R,B;n.cmpn(0)!==0;){var I=i.div(n);R=i.sub(I.mul(n)),B=a.sub(I.mul(o));var q=u.sub(I.mul(s));if(!b&&R.cmp(r)<0)m=P.neg(),p=o,b=R.neg(),A=B;else if(b&&++k===2)break;P=R,i=n,n=R,a=o,o=B,u=s,s=q}M=R.neg(),S=B;var $=b.sqr().add(A.sqr()),U=M.sqr().add(S.sqr());return U.cmp($)>=0&&(M=m,S=p),b.negative&&(b=b.neg(),A=A.neg()),M.negative&&(M=M.neg(),S=S.neg()),[{a:b,b:A},{a:M,b:S}]};lf.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],o=i.b.mul(e).divRound(this.n),s=n.b.neg().mul(e).divRound(this.n),a=o.mul(n.a),u=s.mul(i.a),m=o.mul(n.b),p=s.mul(i.b),b=e.sub(a).sub(u),A=m.add(p).neg();return{k1:b,k2:A}};lf.prototype.pointFromX=function(e,r){e=new Di(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var o=i.fromRed().isOdd();return(r&&!o||!r&&o)&&(i=i.redNeg()),this.point(e,i)};lf.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),o=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(o).cmpn(0)===0};lf.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,o=this._endoWnafT2,s=0;s<e.length;s++){var a=this._endoSplit(r[s]),u=e[s],m=u._getBeta();a.k1.negative&&(a.k1.ineg(),u=u.neg(!0)),a.k2.negative&&(a.k2.ineg(),m=m.neg(!0)),i[s*2]=u,i[s*2+1]=m,o[s*2]=a.k1,o[s*2+1]=a.k2}for(var p=this._wnafMulAdd(1,i,o,s*2,n),b=0;b<s*2;b++)i[b]=null,o[b]=null;return p};function Go(t,e,r,n){kw.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Di(e,16),this.y=new Di(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}KC(Go,kw.BasePoint);lf.prototype.point=function(e,r,n){return new Go(this,e,r,n)};lf.prototype.pointFromJSON=function(e,r){return Go.fromJSON(this,e,r)};Go.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(o){return n.point(o.x.redMul(n.endo.beta),o.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};Go.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Go.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function o(a){return e.point(a[0],a[1],n)}var s=r[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(o))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(o))}},i};Go.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Go.prototype.isInfinity=function(){return this.inf};Go.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Go.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),s=o.redSqr().redISub(this.x.redAdd(this.x)),a=o.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,a)};Go.prototype.getX=function(){return this.x.fromRed()};Go.prototype.getY=function(){return this.y.fromRed()};Go.prototype.mul=function(e){return e=new Di(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Go.prototype.mulAdd=function(e,r,n){var i=[this,r],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o):this.curve._wnafMulAdd(1,i,o,2)};Go.prototype.jmulAdd=function(e,r,n){var i=[this,r],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o,!0):this.curve._wnafMulAdd(1,i,o,2,!0)};Go.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Go.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(o){return o.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};Go.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function ls(t,e,r,n){kw.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Di(0)):(this.x=new Di(e,16),this.y=new Di(r,16),this.z=new Di(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}KC(ls,kw.BasePoint);lf.prototype.jpoint=function(e,r,n){return new ls(this,e,r,n)};ls.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};ls.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};ls.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),o=e.x.redMul(n),s=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),u=i.redSub(o),m=s.redSub(a);if(u.cmpn(0)===0)return m.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var p=u.redSqr(),b=p.redMul(u),A=i.redMul(p),M=m.redSqr().redIAdd(b).redISub(A).redISub(A),S=m.redMul(A.redISub(M)).redISub(s.redMul(b)),P=this.z.redMul(e.z).redMul(u);return this.curve.jpoint(M,S,P)};ls.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),o=this.y,s=e.y.redMul(r).redMul(this.z),a=n.redSub(i),u=o.redSub(s);if(a.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var m=a.redSqr(),p=m.redMul(a),b=n.redMul(m),A=u.redSqr().redIAdd(p).redISub(b).redISub(b),M=u.redMul(b.redISub(A)).redISub(o.redMul(p)),S=this.z.redMul(a);return this.curve.jpoint(A,M,S)};ls.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,o=this.curve.tinv,s=this.x,a=this.y,u=this.z,m=u.redSqr().redSqr(),p=a.redAdd(a);for(r=0;r<e;r++){var b=s.redSqr(),A=p.redSqr(),M=A.redSqr(),S=b.redAdd(b).redIAdd(b).redIAdd(i.redMul(m)),P=s.redMul(A),k=S.redSqr().redISub(P.redAdd(P)),R=P.redISub(k),B=S.redMul(R);B=B.redIAdd(B).redISub(M);var I=p.redMul(u);r+1<e&&(m=m.redMul(M)),s=k,u=I,p=B}return this.curve.jpoint(s,p.redMul(o),u)};ls.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};ls.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var u=i.redAdd(i).redIAdd(i),m=u.redSqr().redISub(a).redISub(a),p=s.redIAdd(s);p=p.redIAdd(p),p=p.redIAdd(p),e=m,r=u.redMul(a.redISub(m)).redISub(p),n=this.y.redAdd(this.y)}else{var b=this.x.redSqr(),A=this.y.redSqr(),M=A.redSqr(),S=this.x.redAdd(A).redSqr().redISub(b).redISub(M);S=S.redIAdd(S);var P=b.redAdd(b).redIAdd(b),k=P.redSqr(),R=M.redIAdd(M);R=R.redIAdd(R),R=R.redIAdd(R),e=k.redISub(S).redISub(S),r=P.redMul(S.redISub(e)).redISub(R),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};ls.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),m=u.redSqr().redISub(a).redISub(a);e=m;var p=s.redIAdd(s);p=p.redIAdd(p),p=p.redIAdd(p),r=u.redMul(a.redISub(m)).redISub(p),n=this.y.redAdd(this.y)}else{var b=this.z.redSqr(),A=this.y.redSqr(),M=this.x.redMul(A),S=this.x.redSub(b).redMul(this.x.redAdd(b));S=S.redAdd(S).redIAdd(S);var P=M.redIAdd(M);P=P.redIAdd(P);var k=P.redAdd(P);e=S.redSqr().redISub(k),n=this.y.redAdd(this.z).redSqr().redISub(A).redISub(b);var R=A.redSqr();R=R.redIAdd(R),R=R.redIAdd(R),R=R.redIAdd(R),r=S.redMul(P.redISub(e)).redISub(R)}return this.curve.jpoint(e,r,n)};ls.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,o=i.redSqr().redSqr(),s=r.redSqr(),a=n.redSqr(),u=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(o)),m=r.redAdd(r);m=m.redIAdd(m);var p=m.redMul(a),b=u.redSqr().redISub(p.redAdd(p)),A=p.redISub(b),M=a.redSqr();M=M.redIAdd(M),M=M.redIAdd(M),M=M.redIAdd(M);var S=u.redMul(A).redISub(M),P=n.redAdd(n).redMul(i);return this.curve.jpoint(b,S,P)};ls.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),o=e.redAdd(e).redIAdd(e),s=o.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(s);var u=a.redSqr(),m=i.redIAdd(i);m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var p=o.redIAdd(a).redSqr().redISub(s).redISub(u).redISub(m),b=r.redMul(p);b=b.redIAdd(b),b=b.redIAdd(b);var A=this.x.redMul(u).redISub(b);A=A.redIAdd(A),A=A.redIAdd(A);var M=this.y.redMul(p.redMul(m.redISub(p)).redISub(a.redMul(u)));M=M.redIAdd(M),M=M.redIAdd(M),M=M.redIAdd(M);var S=this.z.redAdd(a).redSqr().redISub(n).redISub(u);return this.curve.jpoint(A,M,S)};ls.prototype.mul=function(e,r){return e=new Di(e,r),this.curve._wnafMul(this,e)};ls.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),o=n.redMul(e.z);return this.y.redMul(o).redISub(e.y.redMul(i)).cmpn(0)===0};ls.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),o=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};ls.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};ls.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var Cae=H((k9t,Dae)=>{"use strict";_();var Ow=Al(),Bae=Rt(),c4=xE(),PLe=Ec();function Bw(t){c4.call(this,"mont",t),this.a=new Ow(t.a,16).toRed(this.red),this.b=new Ow(t.b,16).toRed(this.red),this.i4=new Ow(4).toRed(this.red).redInvm(),this.two=new Ow(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Bae(Bw,c4);Dae.exports=Bw;Bw.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),o=i.redSqrt();return o.redSqr().cmp(i)===0};function Vo(t,e,r){c4.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Ow(e,16),this.z=new Ow(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Bae(Vo,c4.BasePoint);Bw.prototype.decodePoint=function(e,r){return this.point(PLe.toArray(e,r),1)};Bw.prototype.point=function(e,r){return new Vo(this,e,r)};Bw.prototype.pointFromJSON=function(e){return Vo.fromJSON(this,e)};Vo.prototype.precompute=function(){};Vo.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Vo.fromJSON=function(e,r){return new Vo(e,r[0],r[1]||e.one)};Vo.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Vo.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Vo.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),o=r.redSub(i),s=r.redMul(i),a=o.redMul(i.redAdd(this.curve.a24.redMul(o)));return this.curve.point(s,a)};Vo.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Vo.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),o=e.x.redAdd(e.z),s=e.x.redSub(e.z),a=s.redMul(n),u=o.redMul(i),m=r.z.redMul(a.redAdd(u).redSqr()),p=r.x.redMul(a.redISub(u).redSqr());return this.curve.point(m,p)};Vo.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),o=this,s=[];r.cmpn(0)!==0;r.iushrn(1))s.push(r.andln(1));for(var a=s.length-1;a>=0;a--)s[a]===0?(n=n.diffAdd(i,o),i=i.dbl()):(i=n.diffAdd(i,o),n=n.dbl());return i};Vo.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Vo.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Vo.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Vo.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Vo.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var qae=H((B9t,jae)=>{"use strict";_();var TLe=Ec(),gh=Al(),Nae=Rt(),f4=xE(),RLe=TLe.assert;function Pl(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,f4.call(this,"edwards",t),this.a=new gh(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new gh(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new gh(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),RLe(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}Nae(Pl,f4);jae.exports=Pl;Pl.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Pl.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Pl.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)};Pl.prototype.pointFromX=function(e,r){e=new gh(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),s=i.redMul(o.redInvm()),a=s.redSqrt();if(a.redSqr().redSub(s).cmp(this.zero)!==0)throw new Error("invalid point");var u=a.fromRed().isOdd();return(r&&!u||!r&&u)&&(a=a.redNeg()),this.point(e,a)};Pl.prototype.pointFromY=function(e,r){e=new gh(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),s=i.redMul(o.redInvm());if(s.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=s.redSqrt();if(a.redSqr().redSub(s).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)};Pl.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),o=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(o)===0};function qn(t,e,r,n,i){f4.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new gh(e,16),this.y=new gh(r,16),this.z=n?new gh(n,16):this.curve.one,this.t=i&&new gh(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}Nae(qn,f4.BasePoint);Pl.prototype.pointFromJSON=function(e){return qn.fromJSON(this,e)};Pl.prototype.point=function(e,r,n,i){return new qn(this,e,r,n,i)};qn.fromJSON=function(e,r){return new qn(e,r[0],r[1],r[2])};qn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};qn.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};qn.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),o=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),s=i.redAdd(r),a=s.redSub(n),u=i.redSub(r),m=o.redMul(a),p=s.redMul(u),b=o.redMul(u),A=a.redMul(s);return this.curve.point(m,p,A,b)};qn.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,o,s,a,u,m;if(this.curve.twisted){a=this.curve._mulA(r);var p=a.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(p.redSub(this.curve.two)),o=p.redMul(a.redSub(n)),s=p.redSqr().redSub(p).redSub(p)):(u=this.z.redSqr(),m=p.redSub(u).redISub(u),i=e.redSub(r).redISub(n).redMul(m),o=p.redMul(a.redSub(n)),s=p.redMul(m))}else a=r.redAdd(n),u=this.curve._mulC(this.z).redSqr(),m=a.redSub(u).redSub(u),i=this.curve._mulC(e.redISub(a)).redMul(m),o=this.curve._mulC(a).redMul(r.redISub(n)),s=a.redMul(m);return this.curve.point(i,o,s)};qn.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};qn.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),o=this.z.redMul(e.z.redAdd(e.z)),s=n.redSub(r),a=o.redSub(i),u=o.redAdd(i),m=n.redAdd(r),p=s.redMul(a),b=u.redMul(m),A=s.redMul(m),M=a.redMul(u);return this.curve.point(p,b,M,A)};qn.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),o=this.y.redMul(e.y),s=this.curve.d.redMul(i).redMul(o),a=n.redSub(s),u=n.redAdd(s),m=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(o),p=r.redMul(a).redMul(m),b,A;return this.curve.twisted?(b=r.redMul(u).redMul(o.redSub(this.curve._mulA(i))),A=a.redMul(u)):(b=r.redMul(u).redMul(o.redSub(i)),A=this.curve._mulC(a).redMul(u)),this.curve.point(p,b,A)};qn.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};qn.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};qn.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};qn.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};qn.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};qn.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};qn.prototype.getX=function(){return this.normalize(),this.x.fromRed()};qn.prototype.getY=function(){return this.normalize(),this.y.fromRed()};qn.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};qn.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};qn.prototype.toP=qn.prototype.normalize;qn.prototype.mixedAdd=qn.prototype.add});var WC=H($ae=>{"use strict";_();var u4=$ae;u4.base=xE();u4.short=Oae();u4.mont=Cae();u4.edwards=qae()});var uu=H(Rn=>{"use strict";_();var ILe=xc(),kLe=Rt();Rn.inherits=kLe;function OLe(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function BLe(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=o&63|128):OLe(t,i)?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=o&63|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=o&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}Rn.toArray=BLe;function DLe(t){for(var e="",r=0;r<t.length;r++)e+=Uae(t[r].toString(16));return e}Rn.toHex=DLe;function Lae(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Rn.htonl=Lae;function CLe(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=Lae(i)),r+=Fae(i.toString(16))}return r}Rn.toHex32=CLe;function Uae(t){return t.length===1?"0"+t:t}Rn.zero2=Uae;function Fae(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Rn.zero8=Fae;function NLe(t,e,r,n){var i=r-e;ILe(i%4===0);for(var o=new Array(i/4),s=0,a=e;s<o.length;s++,a+=4){var u;n==="big"?u=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:u=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],o[s]=u>>>0}return o}Rn.join32=NLe;function jLe(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];e==="big"?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=o&255):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=o&255)}return r}Rn.split32=jLe;function qLe(t,e){return t>>>e|t<<32-e}Rn.rotr32=qLe;function $Le(t,e){return t<<e|t>>>32-e}Rn.rotl32=$Le;function LLe(t,e){return t+e>>>0}Rn.sum32=LLe;function ULe(t,e,r){return t+e+r>>>0}Rn.sum32_3=ULe;function FLe(t,e,r,n){return t+e+r+n>>>0}Rn.sum32_4=FLe;function zLe(t,e,r,n,i){return t+e+r+n+i>>>0}Rn.sum32_5=zLe;function KLe(t,e,r,n){var i=t[e],o=t[e+1],s=n+o>>>0,a=(s<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=s}Rn.sum64=KLe;function WLe(t,e,r,n){var i=e+n>>>0,o=(i<e?1:0)+t+r;return o>>>0}Rn.sum64_hi=WLe;function GLe(t,e,r,n){var i=e+n;return i>>>0}Rn.sum64_lo=GLe;function VLe(t,e,r,n,i,o,s,a){var u=0,m=e;m=m+n>>>0,u+=m<e?1:0,m=m+o>>>0,u+=m<o?1:0,m=m+a>>>0,u+=m<a?1:0;var p=t+r+i+s+u;return p>>>0}Rn.sum64_4_hi=VLe;function HLe(t,e,r,n,i,o,s,a){var u=e+n+o+a;return u>>>0}Rn.sum64_4_lo=HLe;function ZLe(t,e,r,n,i,o,s,a,u,m){var p=0,b=e;b=b+n>>>0,p+=b<e?1:0,b=b+o>>>0,p+=b<o?1:0,b=b+a>>>0,p+=b<a?1:0,b=b+m>>>0,p+=b<m?1:0;var A=t+r+i+s+u+p;return A>>>0}Rn.sum64_5_hi=ZLe;function JLe(t,e,r,n,i,o,s,a,u,m){var p=e+n+o+a+m;return p>>>0}Rn.sum64_5_lo=JLe;function YLe(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}Rn.rotr64_hi=YLe;function QLe(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Rn.rotr64_lo=QLe;function XLe(t,e,r){return t>>>r}Rn.shr64_hi=XLe;function eUe(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Rn.shr64_lo=eUe});var Dw=H(Kae=>{"use strict";_();var zae=uu(),tUe=xc();function l4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Kae.BlockHash=l4;l4.prototype.update=function(e,r){if(e=zae.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=zae.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};l4.prototype.digest=function(e){return this.update(this._pad()),tUe(this.pending===null),this._digest(e)};l4.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var o=1;o<n;o++)i[o]=0;if(e<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)i[o++]=0;i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=e>>>24&255,i[o++]=e>>>16&255,i[o++]=e>>>8&255,i[o++]=e&255}else for(i[o++]=e&255,i[o++]=e>>>8&255,i[o++]=e>>>16&255,i[o++]=e>>>24&255,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,s=8;s<this.padLength;s++)i[o++]=0;return i}});var GC=H(bh=>{"use strict";_();var rUe=uu(),Tl=rUe.rotr32;function nUe(t,e,r,n){if(t===0)return Wae(e,r,n);if(t===1||t===3)return Vae(e,r,n);if(t===2)return Gae(e,r,n)}bh.ft_1=nUe;function Wae(t,e,r){return t&e^~t&r}bh.ch32=Wae;function Gae(t,e,r){return t&e^t&r^e&r}bh.maj32=Gae;function Vae(t,e,r){return t^e^r}bh.p32=Vae;function iUe(t){return Tl(t,2)^Tl(t,13)^Tl(t,22)}bh.s0_256=iUe;function oUe(t){return Tl(t,6)^Tl(t,11)^Tl(t,25)}bh.s1_256=oUe;function sUe(t){return Tl(t,7)^Tl(t,18)^t>>>3}bh.g0_256=sUe;function aUe(t){return Tl(t,17)^Tl(t,19)^t>>>10}bh.g1_256=aUe});var Jae=H((z9t,Zae)=>{"use strict";_();var Cw=uu(),cUe=Dw(),fUe=GC(),VC=Cw.rotl32,EE=Cw.sum32,uUe=Cw.sum32_5,lUe=fUe.ft_1,Hae=cUe.BlockHash,dUe=[1518500249,1859775393,2400959708,3395469782];function Rl(){if(!(this instanceof Rl))return new Rl;Hae.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Cw.inherits(Rl,Hae);Zae.exports=Rl;Rl.blockSize=512;Rl.outSize=160;Rl.hmacStrength=80;Rl.padLength=64;Rl.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=VC(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var o=this.h[0],s=this.h[1],a=this.h[2],u=this.h[3],m=this.h[4];for(i=0;i<n.length;i++){var p=~~(i/20),b=uUe(VC(o,5),lUe(p,s,a,u),m,n[i],dUe[p]);m=u,u=a,a=VC(s,30),s=o,o=b}this.h[0]=EE(this.h[0],o),this.h[1]=EE(this.h[1],s),this.h[2]=EE(this.h[2],a),this.h[3]=EE(this.h[3],u),this.h[4]=EE(this.h[4],m)};Rl.prototype._digest=function(e){return e==="hex"?Cw.toHex32(this.h,"big"):Cw.split32(this.h,"big")}});var HC=H((W9t,Qae)=>{"use strict";_();var Nw=uu(),hUe=Dw(),jw=GC(),pUe=xc(),lu=Nw.sum32,mUe=Nw.sum32_4,yUe=Nw.sum32_5,gUe=jw.ch32,bUe=jw.maj32,vUe=jw.s0_256,wUe=jw.s1_256,_Ue=jw.g0_256,xUe=jw.g1_256,Yae=hUe.BlockHash,EUe=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Il(){if(!(this instanceof Il))return new Il;Yae.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=EUe,this.W=new Array(64)}Nw.inherits(Il,Yae);Qae.exports=Il;Il.blockSize=512;Il.outSize=256;Il.hmacStrength=192;Il.padLength=64;Il.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=mUe(xUe(n[i-2]),n[i-7],_Ue(n[i-15]),n[i-16]);var o=this.h[0],s=this.h[1],a=this.h[2],u=this.h[3],m=this.h[4],p=this.h[5],b=this.h[6],A=this.h[7];for(pUe(this.k.length===n.length),i=0;i<n.length;i++){var M=yUe(A,wUe(m),gUe(m,p,b),this.k[i],n[i]),S=lu(vUe(o),bUe(o,s,a));A=b,b=p,p=m,m=lu(u,M),u=a,a=s,s=o,o=lu(M,S)}this.h[0]=lu(this.h[0],o),this.h[1]=lu(this.h[1],s),this.h[2]=lu(this.h[2],a),this.h[3]=lu(this.h[3],u),this.h[4]=lu(this.h[4],m),this.h[5]=lu(this.h[5],p),this.h[6]=lu(this.h[6],b),this.h[7]=lu(this.h[7],A)};Il.prototype._digest=function(e){return e==="hex"?Nw.toHex32(this.h,"big"):Nw.split32(this.h,"big")}});var tce=H((V9t,ece)=>{"use strict";_();var ZC=uu(),Xae=HC();function vh(){if(!(this instanceof vh))return new vh;Xae.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}ZC.inherits(vh,Xae);ece.exports=vh;vh.blockSize=512;vh.outSize=224;vh.hmacStrength=192;vh.padLength=64;vh.prototype._digest=function(e){return e==="hex"?ZC.toHex32(this.h.slice(0,7),"big"):ZC.split32(this.h.slice(0,7),"big")}});var QC=H((Z9t,oce)=>{"use strict";_();var Wa=uu(),SUe=Dw(),MUe=xc(),kl=Wa.rotr64_hi,Ol=Wa.rotr64_lo,rce=Wa.shr64_hi,nce=Wa.shr64_lo,l0=Wa.sum64,JC=Wa.sum64_hi,YC=Wa.sum64_lo,AUe=Wa.sum64_4_hi,PUe=Wa.sum64_4_lo,TUe=Wa.sum64_5_hi,RUe=Wa.sum64_5_lo,ice=SUe.BlockHash,IUe=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function du(){if(!(this instanceof du))return new du;ice.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=IUe,this.W=new Array(160)}Wa.inherits(du,ice);oce.exports=du;du.blockSize=1024;du.outSize=512;du.hmacStrength=192;du.padLength=128;du.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var o=UUe(n[i-4],n[i-3]),s=FUe(n[i-4],n[i-3]),a=n[i-14],u=n[i-13],m=$Ue(n[i-30],n[i-29]),p=LUe(n[i-30],n[i-29]),b=n[i-32],A=n[i-31];n[i]=AUe(o,s,a,u,m,p,b,A),n[i+1]=PUe(o,s,a,u,m,p,b,A)}};du.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],m=this.h[5],p=this.h[6],b=this.h[7],A=this.h[8],M=this.h[9],S=this.h[10],P=this.h[11],k=this.h[12],R=this.h[13],B=this.h[14],I=this.h[15];MUe(this.k.length===n.length);for(var q=0;q<n.length;q+=2){var $=B,U=I,F=jUe(A,M),L=qUe(A,M),W=kUe(A,M,S,P,k,R),E=OUe(A,M,S,P,k,R),c=this.k[q],l=this.k[q+1],y=n[q],d=n[q+1],h=TUe($,U,F,L,W,E,c,l,y,d),v=RUe($,U,F,L,W,E,c,l,y,d);$=CUe(i,o),U=NUe(i,o),F=BUe(i,o,s,a,u,m),L=DUe(i,o,s,a,u,m);var x=JC($,U,F,L),g=YC($,U,F,L);B=k,I=R,k=S,R=P,S=A,P=M,A=JC(p,b,h,v),M=YC(b,b,h,v),p=u,b=m,u=s,m=a,s=i,a=o,i=JC(h,v,x,g),o=YC(h,v,x,g)}l0(this.h,0,i,o),l0(this.h,2,s,a),l0(this.h,4,u,m),l0(this.h,6,p,b),l0(this.h,8,A,M),l0(this.h,10,S,P),l0(this.h,12,k,R),l0(this.h,14,B,I)};du.prototype._digest=function(e){return e==="hex"?Wa.toHex32(this.h,"big"):Wa.split32(this.h,"big")};function kUe(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function OUe(t,e,r,n,i,o){var s=e&n^~e&o;return s<0&&(s+=4294967296),s}function BUe(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function DUe(t,e,r,n,i,o){var s=e&n^e&o^n&o;return s<0&&(s+=4294967296),s}function CUe(t,e){var r=kl(t,e,28),n=kl(e,t,2),i=kl(e,t,7),o=r^n^i;return o<0&&(o+=4294967296),o}function NUe(t,e){var r=Ol(t,e,28),n=Ol(e,t,2),i=Ol(e,t,7),o=r^n^i;return o<0&&(o+=4294967296),o}function jUe(t,e){var r=kl(t,e,14),n=kl(t,e,18),i=kl(e,t,9),o=r^n^i;return o<0&&(o+=4294967296),o}function qUe(t,e){var r=Ol(t,e,14),n=Ol(t,e,18),i=Ol(e,t,9),o=r^n^i;return o<0&&(o+=4294967296),o}function $Ue(t,e){var r=kl(t,e,1),n=kl(t,e,8),i=rce(t,e,7),o=r^n^i;return o<0&&(o+=4294967296),o}function LUe(t,e){var r=Ol(t,e,1),n=Ol(t,e,8),i=nce(t,e,7),o=r^n^i;return o<0&&(o+=4294967296),o}function UUe(t,e){var r=kl(t,e,19),n=kl(e,t,29),i=rce(t,e,6),o=r^n^i;return o<0&&(o+=4294967296),o}function FUe(t,e){var r=Ol(t,e,19),n=Ol(e,t,29),i=nce(t,e,6),o=r^n^i;return o<0&&(o+=4294967296),o}});var cce=H((Y9t,ace)=>{"use strict";_();var XC=uu(),sce=QC();function wh(){if(!(this instanceof wh))return new wh;sce.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}XC.inherits(wh,sce);ace.exports=wh;wh.blockSize=1024;wh.outSize=384;wh.hmacStrength=192;wh.padLength=128;wh.prototype._digest=function(e){return e==="hex"?XC.toHex32(this.h.slice(0,12),"big"):XC.split32(this.h.slice(0,12),"big")}});var fce=H(qw=>{"use strict";_();qw.sha1=Jae();qw.sha224=tce();qw.sha256=HC();qw.sha384=cce();qw.sha512=QC()});var mce=H(pce=>{"use strict";_();var Gy=uu(),zUe=Dw(),d4=Gy.rotl32,uce=Gy.sum32,SE=Gy.sum32_3,lce=Gy.sum32_4,hce=zUe.BlockHash;function Bl(){if(!(this instanceof Bl))return new Bl;hce.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Gy.inherits(Bl,hce);pce.ripemd160=Bl;Bl.blockSize=512;Bl.outSize=160;Bl.hmacStrength=192;Bl.padLength=64;Bl.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],a=this.h[4],u=n,m=i,p=o,b=s,A=a,M=0;M<80;M++){var S=uce(d4(lce(n,dce(M,i,o,s),e[GUe[M]+r],KUe(M)),HUe[M]),a);n=a,a=s,s=d4(o,10),o=i,i=S,S=uce(d4(lce(u,dce(79-M,m,p,b),e[VUe[M]+r],WUe(M)),ZUe[M]),A),u=A,A=b,b=d4(p,10),p=m,m=S}S=SE(this.h[1],o,b),this.h[1]=SE(this.h[2],s,A),this.h[2]=SE(this.h[3],a,u),this.h[3]=SE(this.h[4],n,m),this.h[4]=SE(this.h[0],i,p),this.h[0]=S};Bl.prototype._digest=function(e){return e==="hex"?Gy.toHex32(this.h,"little"):Gy.split32(this.h,"little")};function dce(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function KUe(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function WUe(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var GUe=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],VUe=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],HUe=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],ZUe=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var gce=H((nOt,yce)=>{"use strict";_();var JUe=uu(),YUe=xc();function $w(t,e,r){if(!(this instanceof $w))return new $w(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(JUe.toArray(e,r))}yce.exports=$w;$w.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),YUe(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};$w.prototype.update=function(e,r){return this.inner.update(e,r),this};$w.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var h4=H(bce=>{_();var ds=bce;ds.utils=uu();ds.common=Dw();ds.sha=fce();ds.ripemd=mce();ds.hmac=gce();ds.sha1=ds.sha.sha1;ds.sha256=ds.sha.sha256;ds.sha224=ds.sha.sha224;ds.sha384=ds.sha.sha384;ds.sha512=ds.sha.sha512;ds.ripemd160=ds.ripemd.ripemd160});var wce=H((aOt,vce)=>{_();vce.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var p4=H(Ece=>{"use strict";_();var tN=Ece,d0=h4(),eN=WC(),QUe=Ec(),_ce=QUe.assert;function xce(t){t.type==="short"?this.curve=new eN.short(t):t.type==="edwards"?this.curve=new eN.edwards(t):this.curve=new eN.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,_ce(this.g.validate(),"Invalid curve"),_ce(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}tN.PresetCurve=xce;function h0(t,e){Object.defineProperty(tN,t,{configurable:!0,enumerable:!0,get:function(){var r=new xce(e);return Object.defineProperty(tN,t,{configurable:!0,enumerable:!0,value:r}),r}})}h0("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:d0.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});h0("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:d0.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});h0("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:d0.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});h0("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:d0.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});h0("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:d0.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});h0("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:d0.sha256,gRed:!1,g:["9"]});h0("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:d0.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var rN;try{rN=wce()}catch{rN=void 0}h0("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:d0.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",rN]})});var Ace=H((lOt,Mce)=>{"use strict";_();var XUe=h4(),Vy=zC(),Sce=xc();function p0(t){if(!(this instanceof p0))return new p0(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Vy.toArray(t.entropy,t.entropyEnc||"hex"),r=Vy.toArray(t.nonce,t.nonceEnc||"hex"),n=Vy.toArray(t.pers,t.persEnc||"hex");Sce(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}Mce.exports=p0;p0.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};p0.prototype._hmac=function(){return new XUe.hmac(this.hash,this.K)};p0.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};p0.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Vy.toArray(e,r),n=Vy.toArray(n,i),Sce(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};p0.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Vy.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,e);return this._update(n),this._reseed++,Vy.encode(s,r)}});var Tce=H((hOt,Pce)=>{"use strict";_();var eFe=Al(),tFe=Ec(),nN=tFe.assert;function Hs(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}Pce.exports=Hs;Hs.fromPublic=function(e,r,n){return r instanceof Hs?r:new Hs(e,{pub:r,pubEnc:n})};Hs.fromPrivate=function(e,r,n){return r instanceof Hs?r:new Hs(e,{priv:r,privEnc:n})};Hs.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Hs.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Hs.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Hs.prototype._importPrivate=function(e,r){this.priv=new eFe(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Hs.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?nN(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&nN(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Hs.prototype.derive=function(e){return e.validate()||nN(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Hs.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Hs.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Hs.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var kce=H((mOt,Ice)=>{"use strict";_();var m4=Al(),sN=Ec(),rFe=sN.assert;function y4(t,e){if(t instanceof y4)return t;this._importDER(t,e)||(rFe(t.r&&t.s,"Signature without r or s"),this.r=new m4(t.r,16),this.s=new m4(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}Ice.exports=y4;function nFe(){this.place=0}function iN(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4||t[e.place]===0)return!1;for(var i=0,o=0,s=e.place;o<n;o++,s++)i<<=8,i|=t[s],i>>>=0;return i<=127?!1:(e.place=s,i)}function Rce(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}y4.prototype._importDER=function(e,r){e=sN.toArray(e,r);var n=new nFe;if(e[n.place++]!==48)return!1;var i=iN(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var o=iN(e,n);if(o===!1||e[n.place]&128)return!1;var s=e.slice(n.place,o+n.place);if(n.place+=o,e[n.place++]!==2)return!1;var a=iN(e,n);if(a===!1||e.length!==a+n.place||e[n.place]&128)return!1;var u=e.slice(n.place,a+n.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new m4(s),this.s=new m4(u),this.recoveryParam=null,!0};function oN(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}y4.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=Rce(r),n=Rce(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];oN(i,r.length),i=i.concat(r),i.push(2),oN(i,n.length);var o=i.concat(n),s=[48];return oN(s,o.length),s=s.concat(o),sN.encode(s,e)}});var Cce=H((gOt,Dce)=>{"use strict";_();var Hy=Al(),Oce=Ace(),iFe=Ec(),aN=p4(),oFe=N5(),Bce=iFe.assert,cN=Tce(),g4=kce();function df(t){if(!(this instanceof df))return new df(t);typeof t=="string"&&(Bce(Object.prototype.hasOwnProperty.call(aN,t),"Unknown curve "+t),t=aN[t]),t instanceof aN.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}Dce.exports=df;df.prototype.keyPair=function(e){return new cN(this,e)};df.prototype.keyFromPrivate=function(e,r){return cN.fromPrivate(this,e,r)};df.prototype.keyFromPublic=function(e,r){return cN.fromPublic(this,e,r)};df.prototype.genKeyPair=function(e){e||(e={});for(var r=new Oce({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||oFe(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Hy(2));;){var o=new Hy(r.generate(n));if(!(o.cmp(i)>0))return o.iaddn(1),this.keyFromPrivate(o)}};df.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};df.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new Hy(e,16));for(var o=this.n.byteLength(),s=r.getPrivate().toArray("be",o),a=e.toArray("be",o),u=new Oce({hash:this.hash,entropy:s,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),m=this.n.sub(new Hy(1)),p=0;;p++){var b=i.k?i.k(p):new Hy(u.generate(this.n.byteLength()));if(b=this._truncateToN(b,!0),!(b.cmpn(1)<=0||b.cmp(m)>=0)){var A=this.g.mul(b);if(!A.isInfinity()){var M=A.getX(),S=M.umod(this.n);if(S.cmpn(0)!==0){var P=b.invm(this.n).mul(S.mul(r.getPrivate()).iadd(e));if(P=P.umod(this.n),P.cmpn(0)!==0){var k=(A.getY().isOdd()?1:0)|(M.cmp(S)!==0?2:0);return i.canonical&&P.cmp(this.nh)>0&&(P=this.n.sub(P),k^=1),new g4({r:S,s:P,recoveryParam:k})}}}}}};df.prototype.verify=function(e,r,n,i){e=this._truncateToN(new Hy(e,16)),n=this.keyFromPublic(n,i),r=new g4(r,"hex");var o=r.r,s=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a=s.invm(this.n),u=a.mul(e).umod(this.n),m=a.mul(o).umod(this.n),p;return this.curve._maxwellTrick?(p=this.g.jmulAdd(u,n.getPublic(),m),p.isInfinity()?!1:p.eqXToP(o)):(p=this.g.mulAdd(u,n.getPublic(),m),p.isInfinity()?!1:p.getX().umod(this.n).cmp(o)===0)};df.prototype.recoverPubKey=function(t,e,r,n){Bce((3&r)===r,"The recovery param is more than two bits"),e=new g4(e,n);var i=this.n,o=new Hy(t),s=e.r,a=e.s,u=r&1,m=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&m)throw new Error("Unable to find sencond key candinate");m?s=this.curve.pointFromX(s.add(this.curve.n),u):s=this.curve.pointFromX(s,u);var p=e.r.invm(i),b=i.sub(o).mul(p).umod(i),A=a.mul(p).umod(i);return this.g.mulAdd(b,s,A)};df.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new g4(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch{continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")}});var $ce=H((vOt,qce)=>{"use strict";_();var ME=Ec(),jce=ME.assert,Nce=ME.parseBytes,Lw=ME.cachedProperty;function Ho(t,e){this.eddsa=t,this._secret=Nce(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=Nce(e.pub)}Ho.fromPublic=function(e,r){return r instanceof Ho?r:new Ho(e,{pub:r})};Ho.fromSecret=function(e,r){return r instanceof Ho?r:new Ho(e,{secret:r})};Ho.prototype.secret=function(){return this._secret};Lw(Ho,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Lw(Ho,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Lw(Ho,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});Lw(Ho,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Lw(Ho,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Lw(Ho,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Ho.prototype.sign=function(e){return jce(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Ho.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Ho.prototype.getSecret=function(e){return jce(this._secret,"KeyPair is public only"),ME.encode(this.secret(),e)};Ho.prototype.getPublic=function(e){return ME.encode(this.pubBytes(),e)};qce.exports=Ho});var Fce=H((_Ot,Uce)=>{"use strict";_();var sFe=Al(),b4=Ec(),Lce=b4.assert,v4=b4.cachedProperty,aFe=b4.parseBytes;function Zy(t,e){this.eddsa=t,typeof e!="object"&&(e=aFe(e)),Array.isArray(e)&&(Lce(e.length===t.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),Lce(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof sFe&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}v4(Zy,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});v4(Zy,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});v4(Zy,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});v4(Zy,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Zy.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Zy.prototype.toHex=function(){return b4.encode(this.toBytes(),"hex").toUpperCase()};Uce.exports=Zy});var Vce=H((EOt,Gce)=>{"use strict";_();var cFe=h4(),fFe=p4(),Uw=Ec(),uFe=Uw.assert,Kce=Uw.parseBytes,Wce=$ce(),zce=Fce();function Ga(t){if(uFe(t==="ed25519","only tested with ed25519 so far"),!(this instanceof Ga))return new Ga(t);t=fFe[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=cFe.sha512}Gce.exports=Ga;Ga.prototype.sign=function(e,r){e=Kce(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),o=this.g.mul(i),s=this.encodePoint(o),a=this.hashInt(s,n.pubBytes(),e).mul(n.priv()),u=i.add(a).umod(this.curve.n);return this.makeSignature({R:o,S:u,Rencoded:s})};Ga.prototype.verify=function(e,r,n){if(e=Kce(e),r=this.makeSignature(r),r.S().gte(r.eddsa.curve.n)||r.S().isNeg())return!1;var i=this.keyFromPublic(n),o=this.hashInt(r.Rencoded(),i.pubBytes(),e),s=this.g.mul(r.S()),a=r.R().add(i.pub().mul(o));return a.eq(s)};Ga.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return Uw.intFromLE(e.digest()).umod(this.curve.n)};Ga.prototype.keyFromPublic=function(e){return Wce.fromPublic(this,e)};Ga.prototype.keyFromSecret=function(e){return Wce.fromSecret(this,e)};Ga.prototype.makeSignature=function(e){return e instanceof zce?e:new zce(this,e)};Ga.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};Ga.prototype.decodePoint=function(e){e=Uw.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),i=(e[r]&128)!==0,o=Uw.intFromLE(n);return this.curve.pointFromY(o,i)};Ga.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Ga.prototype.decodeInt=function(e){return Uw.intFromLE(e)};Ga.prototype.isPoint=function(e){return e instanceof this.pointClass}});var w4=H(Hce=>{"use strict";_();var Jy=Hce;Jy.version=Sae().version;Jy.utils=Ec();Jy.rand=N5();Jy.curve=WC();Jy.curves=p4();Jy.ec=Cce();Jy.eddsa=Vce()});var uN=H((Zce,fN)=>{_();(function(t,e){"use strict";function r(E,c){if(!E)throw new Error(c||"Assertion failed")}function n(E,c){E.super_=c;var l=function(){};l.prototype=c.prototype,E.prototype=new l,E.prototype.constructor=E}function i(E,c,l){if(i.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((c==="le"||c==="be")&&(l=c,c=10),this._init(E||0,c||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ut().Buffer}catch{}i.isBN=function(c){return c instanceof i?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===i.wordSize&&Array.isArray(c.words)},i.max=function(c,l){return c.cmp(l)>0?c:l},i.min=function(c,l){return c.cmp(l)<0?c:l},i.prototype._init=function(c,l,y){if(typeof c=="number")return this._initNumber(c,l,y);if(typeof c=="object")return this._initArray(c,l,y);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),c=c.toString().replace(/\s+/g,"");var d=0;c[0]==="-"&&(d++,this.negative=1),d<c.length&&(l===16?this._parseHex(c,d,y):(this._parseBase(c,l,d),y==="le"&&this._initArray(this.toArray(),l,y)))},i.prototype._initNumber=function(c,l,y){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(r(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),l,y)},i.prototype._initArray=function(c,l,y){if(r(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var h,v,x=0;if(y==="be")for(d=c.length-1,h=0;d>=0;d-=3)v=c[d]|c[d-1]<<8|c[d-2]<<16,this.words[h]|=v<<x&67108863,this.words[h+1]=v>>>26-x&67108863,x+=24,x>=26&&(x-=26,h++);else if(y==="le")for(d=0,h=0;d<c.length;d+=3)v=c[d]|c[d+1]<<8|c[d+2]<<16,this.words[h]|=v<<x&67108863,this.words[h+1]=v>>>26-x&67108863,x+=24,x>=26&&(x-=26,h++);return this.strip()};function s(E,c){var l=E.charCodeAt(c);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function a(E,c,l){var y=s(E,l);return l-1>=c&&(y|=s(E,l-1)<<4),y}i.prototype._parseHex=function(c,l,y){this.length=Math.ceil((c.length-l)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var h=0,v=0,x;if(y==="be")for(d=c.length-1;d>=l;d-=2)x=a(c,l,d)<<h,this.words[v]|=x&67108863,h>=18?(h-=18,v+=1,this.words[v]|=x>>>26):h+=8;else{var g=c.length-l;for(d=g%2===0?l+1:l;d<c.length;d+=2)x=a(c,l,d)<<h,this.words[v]|=x&67108863,h>=18?(h-=18,v+=1,this.words[v]|=x>>>26):h+=8}this.strip()};function u(E,c,l,y){for(var d=0,h=Math.min(E.length,l),v=c;v<h;v++){var x=E.charCodeAt(v)-48;d*=y,x>=49?d+=x-49+10:x>=17?d+=x-17+10:d+=x}return d}i.prototype._parseBase=function(c,l,y){this.words=[0],this.length=1;for(var d=0,h=1;h<=67108863;h*=l)d++;d--,h=h/l|0;for(var v=c.length-y,x=v%d,g=Math.min(v,v-x)+y,f=0,w=y;w<g;w+=d)f=u(c,w,w+d,l),this.imuln(h),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(x!==0){var D=1;for(f=u(c,w,c.length,l),w=0;w<x;w++)D*=l;this.imuln(D),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this.strip()},i.prototype.copy=function(c){c.words=new Array(this.length);for(var l=0;l<this.length;l++)c.words[l]=this.words[l];c.length=this.length,c.negative=this.negative,c.red=this.red},i.prototype.clone=function(){var c=new i(null);return this.copy(c),c},i.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(c,l){c=c||10,l=l|0||1;var y;if(c===16||c==="hex"){y="";for(var d=0,h=0,v=0;v<this.length;v++){var x=this.words[v],g=((x<<d|h)&16777215).toString(16);h=x>>>24-d&16777215,h!==0||v!==this.length-1?y=m[6-g.length]+g+y:y=g+y,d+=2,d>=26&&(d-=26,v--)}for(h!==0&&(y=h.toString(16)+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(c===(c|0)&&c>=2&&c<=36){var f=p[c],w=b[c];y="";var D=this.clone();for(D.negative=0;!D.isZero();){var T=D.modn(w).toString(c);D=D.idivn(w),D.isZero()?y=T+y:y=m[f-T.length]+T+y}for(this.isZero()&&(y="0"+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(c,l){return r(typeof o<"u"),this.toArrayLike(o,c,l)},i.prototype.toArray=function(c,l){return this.toArrayLike(Array,c,l)},i.prototype.toArrayLike=function(c,l,y){var d=this.byteLength(),h=y||Math.max(1,d);r(d<=h,"byte array longer than desired length"),r(h>0,"Requested array length <= 0"),this.strip();var v=l==="le",x=new c(h),g,f,w=this.clone();if(v){for(f=0;!w.isZero();f++)g=w.andln(255),w.iushrn(8),x[f]=g;for(;f<h;f++)x[f]=0}else{for(f=0;f<h-d;f++)x[f]=0;for(f=0;!w.isZero();f++)g=w.andln(255),w.iushrn(8),x[h-f-1]=g}return x},Math.clz32?i.prototype._countBits=function(c){return 32-Math.clz32(c)}:i.prototype._countBits=function(c){var l=c,y=0;return l>=4096&&(y+=13,l>>>=13),l>=64&&(y+=7,l>>>=7),l>=8&&(y+=4,l>>>=4),l>=2&&(y+=2,l>>>=2),y+l},i.prototype._zeroBits=function(c){if(c===0)return 26;var l=c,y=0;return l&8191||(y+=13,l>>>=13),l&127||(y+=7,l>>>=7),l&15||(y+=4,l>>>=4),l&3||(y+=2,l>>>=2),l&1||y++,y},i.prototype.bitLength=function(){var c=this.words[this.length-1],l=this._countBits(c);return(this.length-1)*26+l};function A(E){for(var c=new Array(E.bitLength()),l=0;l<c.length;l++){var y=l/26|0,d=l%26;c[l]=(E.words[y]&1<<d)>>>d}return c}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,l=0;l<this.length;l++){var y=this._zeroBits(this.words[l]);if(c+=y,y!==26)break}return c},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},i.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var l=0;l<c.length;l++)this.words[l]=this.words[l]|c.words[l];return this.strip()},i.prototype.ior=function(c){return r((this.negative|c.negative)===0),this.iuor(c)},i.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},i.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},i.prototype.iuand=function(c){var l;this.length>c.length?l=c:l=this;for(var y=0;y<l.length;y++)this.words[y]=this.words[y]&c.words[y];return this.length=l.length,this.strip()},i.prototype.iand=function(c){return r((this.negative|c.negative)===0),this.iuand(c)},i.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},i.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},i.prototype.iuxor=function(c){var l,y;this.length>c.length?(l=this,y=c):(l=c,y=this);for(var d=0;d<y.length;d++)this.words[d]=l.words[d]^y.words[d];if(this!==l)for(;d<l.length;d++)this.words[d]=l.words[d];return this.length=l.length,this.strip()},i.prototype.ixor=function(c){return r((this.negative|c.negative)===0),this.iuxor(c)},i.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},i.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},i.prototype.inotn=function(c){r(typeof c=="number"&&c>=0);var l=Math.ceil(c/26)|0,y=c%26;this._expand(l),y>0&&l--;for(var d=0;d<l;d++)this.words[d]=~this.words[d]&67108863;return y>0&&(this.words[d]=~this.words[d]&67108863>>26-y),this.strip()},i.prototype.notn=function(c){return this.clone().inotn(c)},i.prototype.setn=function(c,l){r(typeof c=="number"&&c>=0);var y=c/26|0,d=c%26;return this._expand(y+1),l?this.words[y]=this.words[y]|1<<d:this.words[y]=this.words[y]&~(1<<d),this.strip()},i.prototype.iadd=function(c){var l;if(this.negative!==0&&c.negative===0)return this.negative=0,l=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,l=this.isub(c),c.negative=1,l._normSign();var y,d;this.length>c.length?(y=this,d=c):(y=c,d=this);for(var h=0,v=0;v<d.length;v++)l=(y.words[v]|0)+(d.words[v]|0)+h,this.words[v]=l&67108863,h=l>>>26;for(;h!==0&&v<y.length;v++)l=(y.words[v]|0)+h,this.words[v]=l&67108863,h=l>>>26;if(this.length=y.length,h!==0)this.words[this.length]=h,this.length++;else if(y!==this)for(;v<y.length;v++)this.words[v]=y.words[v];return this},i.prototype.add=function(c){var l;return c.negative!==0&&this.negative===0?(c.negative=0,l=this.sub(c),c.negative^=1,l):c.negative===0&&this.negative!==0?(this.negative=0,l=c.sub(this),this.negative=1,l):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},i.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var l=this.iadd(c);return c.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var y=this.cmp(c);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var d,h;y>0?(d=this,h=c):(d=c,h=this);for(var v=0,x=0;x<h.length;x++)l=(d.words[x]|0)-(h.words[x]|0)+v,v=l>>26,this.words[x]=l&67108863;for(;v!==0&&x<d.length;x++)l=(d.words[x]|0)+v,v=l>>26,this.words[x]=l&67108863;if(v===0&&x<d.length&&d!==this)for(;x<d.length;x++)this.words[x]=d.words[x];return this.length=Math.max(this.length,x),d!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(c){return this.clone().isub(c)};function M(E,c,l){l.negative=c.negative^E.negative;var y=E.length+c.length|0;l.length=y,y=y-1|0;var d=E.words[0]|0,h=c.words[0]|0,v=d*h,x=v&67108863,g=v/67108864|0;l.words[0]=x;for(var f=1;f<y;f++){for(var w=g>>>26,D=g&67108863,T=Math.min(f,c.length-1),C=Math.max(0,f-E.length+1);C<=T;C++){var z=f-C|0;d=E.words[z]|0,h=c.words[C]|0,v=d*h+D,w+=v/67108864|0,D=v&67108863}l.words[f]=D|0,g=w|0}return g!==0?l.words[f]=g|0:l.length--,l.strip()}var S=function(c,l,y){var d=c.words,h=l.words,v=y.words,x=0,g,f,w,D=d[0]|0,T=D&8191,C=D>>>13,z=d[1]|0,G=z&8191,V=z>>>13,Z=d[2]|0,J=Z&8191,X=Z>>>13,se=d[3]|0,Q=se&8191,te=se>>>13,de=d[4]|0,ie=de&8191,ae=de>>>13,fe=d[5]|0,oe=fe&8191,ce=fe>>>13,Ke=d[6]|0,pe=Ke&8191,Me=Ke>>>13,it=d[7]|0,we=it&8191,Ae=it>>>13,er=d[8]|0,me=er&8191,he=er>>>13,mt=d[9]|0,ye=mt&8191,le=mt>>>13,kt=h[0]|0,_e=kt&8191,Ee=kt>>>13,Ht=h[1]|0,Pe=Ht&8191,Se=Ht>>>13,Pn=h[2]|0,Te=Pn&8191,Ie=Pn>>>13,_i=h[3]|0,Re=_i&8191,Ce=_i>>>13,Tn=h[4]|0,Ne=Tn&8191,Oe=Tn>>>13,xi=h[5]|0,ke=xi&8191,Be=xi>>>13,Ei=h[6]|0,De=Ei&8191,je=Ei>>>13,si=h[7]|0,ee=si&8191,Y=si>>>13,ue=h[8]|0,re=ue&8191,ne=ue>>>13,ze=h[9]|0,ge=ze&8191,ve=ze>>>13;y.negative=c.negative^l.negative,y.length=19,g=Math.imul(T,_e),f=Math.imul(T,Ee),f=f+Math.imul(C,_e)|0,w=Math.imul(C,Ee);var gt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(gt>>>26)|0,gt&=67108863,g=Math.imul(G,_e),f=Math.imul(G,Ee),f=f+Math.imul(V,_e)|0,w=Math.imul(V,Ee),g=g+Math.imul(T,Pe)|0,f=f+Math.imul(T,Se)|0,f=f+Math.imul(C,Pe)|0,w=w+Math.imul(C,Se)|0;var ot=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ot>>>26)|0,ot&=67108863,g=Math.imul(J,_e),f=Math.imul(J,Ee),f=f+Math.imul(X,_e)|0,w=Math.imul(X,Ee),g=g+Math.imul(G,Pe)|0,f=f+Math.imul(G,Se)|0,f=f+Math.imul(V,Pe)|0,w=w+Math.imul(V,Se)|0,g=g+Math.imul(T,Te)|0,f=f+Math.imul(T,Ie)|0,f=f+Math.imul(C,Te)|0,w=w+Math.imul(C,Ie)|0;var Ge=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,g=Math.imul(Q,_e),f=Math.imul(Q,Ee),f=f+Math.imul(te,_e)|0,w=Math.imul(te,Ee),g=g+Math.imul(J,Pe)|0,f=f+Math.imul(J,Se)|0,f=f+Math.imul(X,Pe)|0,w=w+Math.imul(X,Se)|0,g=g+Math.imul(G,Te)|0,f=f+Math.imul(G,Ie)|0,f=f+Math.imul(V,Te)|0,w=w+Math.imul(V,Ie)|0,g=g+Math.imul(T,Re)|0,f=f+Math.imul(T,Ce)|0,f=f+Math.imul(C,Re)|0,w=w+Math.imul(C,Ce)|0;var Pt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,g=Math.imul(ie,_e),f=Math.imul(ie,Ee),f=f+Math.imul(ae,_e)|0,w=Math.imul(ae,Ee),g=g+Math.imul(Q,Pe)|0,f=f+Math.imul(Q,Se)|0,f=f+Math.imul(te,Pe)|0,w=w+Math.imul(te,Se)|0,g=g+Math.imul(J,Te)|0,f=f+Math.imul(J,Ie)|0,f=f+Math.imul(X,Te)|0,w=w+Math.imul(X,Ie)|0,g=g+Math.imul(G,Re)|0,f=f+Math.imul(G,Ce)|0,f=f+Math.imul(V,Re)|0,w=w+Math.imul(V,Ce)|0,g=g+Math.imul(T,Ne)|0,f=f+Math.imul(T,Oe)|0,f=f+Math.imul(C,Ne)|0,w=w+Math.imul(C,Oe)|0;var Lt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,g=Math.imul(oe,_e),f=Math.imul(oe,Ee),f=f+Math.imul(ce,_e)|0,w=Math.imul(ce,Ee),g=g+Math.imul(ie,Pe)|0,f=f+Math.imul(ie,Se)|0,f=f+Math.imul(ae,Pe)|0,w=w+Math.imul(ae,Se)|0,g=g+Math.imul(Q,Te)|0,f=f+Math.imul(Q,Ie)|0,f=f+Math.imul(te,Te)|0,w=w+Math.imul(te,Ie)|0,g=g+Math.imul(J,Re)|0,f=f+Math.imul(J,Ce)|0,f=f+Math.imul(X,Re)|0,w=w+Math.imul(X,Ce)|0,g=g+Math.imul(G,Ne)|0,f=f+Math.imul(G,Oe)|0,f=f+Math.imul(V,Ne)|0,w=w+Math.imul(V,Oe)|0,g=g+Math.imul(T,ke)|0,f=f+Math.imul(T,Be)|0,f=f+Math.imul(C,ke)|0,w=w+Math.imul(C,Be)|0;var St=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(St>>>26)|0,St&=67108863,g=Math.imul(pe,_e),f=Math.imul(pe,Ee),f=f+Math.imul(Me,_e)|0,w=Math.imul(Me,Ee),g=g+Math.imul(oe,Pe)|0,f=f+Math.imul(oe,Se)|0,f=f+Math.imul(ce,Pe)|0,w=w+Math.imul(ce,Se)|0,g=g+Math.imul(ie,Te)|0,f=f+Math.imul(ie,Ie)|0,f=f+Math.imul(ae,Te)|0,w=w+Math.imul(ae,Ie)|0,g=g+Math.imul(Q,Re)|0,f=f+Math.imul(Q,Ce)|0,f=f+Math.imul(te,Re)|0,w=w+Math.imul(te,Ce)|0,g=g+Math.imul(J,Ne)|0,f=f+Math.imul(J,Oe)|0,f=f+Math.imul(X,Ne)|0,w=w+Math.imul(X,Oe)|0,g=g+Math.imul(G,ke)|0,f=f+Math.imul(G,Be)|0,f=f+Math.imul(V,ke)|0,w=w+Math.imul(V,Be)|0,g=g+Math.imul(T,De)|0,f=f+Math.imul(T,je)|0,f=f+Math.imul(C,De)|0,w=w+Math.imul(C,je)|0;var pt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(pt>>>26)|0,pt&=67108863,g=Math.imul(we,_e),f=Math.imul(we,Ee),f=f+Math.imul(Ae,_e)|0,w=Math.imul(Ae,Ee),g=g+Math.imul(pe,Pe)|0,f=f+Math.imul(pe,Se)|0,f=f+Math.imul(Me,Pe)|0,w=w+Math.imul(Me,Se)|0,g=g+Math.imul(oe,Te)|0,f=f+Math.imul(oe,Ie)|0,f=f+Math.imul(ce,Te)|0,w=w+Math.imul(ce,Ie)|0,g=g+Math.imul(ie,Re)|0,f=f+Math.imul(ie,Ce)|0,f=f+Math.imul(ae,Re)|0,w=w+Math.imul(ae,Ce)|0,g=g+Math.imul(Q,Ne)|0,f=f+Math.imul(Q,Oe)|0,f=f+Math.imul(te,Ne)|0,w=w+Math.imul(te,Oe)|0,g=g+Math.imul(J,ke)|0,f=f+Math.imul(J,Be)|0,f=f+Math.imul(X,ke)|0,w=w+Math.imul(X,Be)|0,g=g+Math.imul(G,De)|0,f=f+Math.imul(G,je)|0,f=f+Math.imul(V,De)|0,w=w+Math.imul(V,je)|0,g=g+Math.imul(T,ee)|0,f=f+Math.imul(T,Y)|0,f=f+Math.imul(C,ee)|0,w=w+Math.imul(C,Y)|0;var Tt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,g=Math.imul(me,_e),f=Math.imul(me,Ee),f=f+Math.imul(he,_e)|0,w=Math.imul(he,Ee),g=g+Math.imul(we,Pe)|0,f=f+Math.imul(we,Se)|0,f=f+Math.imul(Ae,Pe)|0,w=w+Math.imul(Ae,Se)|0,g=g+Math.imul(pe,Te)|0,f=f+Math.imul(pe,Ie)|0,f=f+Math.imul(Me,Te)|0,w=w+Math.imul(Me,Ie)|0,g=g+Math.imul(oe,Re)|0,f=f+Math.imul(oe,Ce)|0,f=f+Math.imul(ce,Re)|0,w=w+Math.imul(ce,Ce)|0,g=g+Math.imul(ie,Ne)|0,f=f+Math.imul(ie,Oe)|0,f=f+Math.imul(ae,Ne)|0,w=w+Math.imul(ae,Oe)|0,g=g+Math.imul(Q,ke)|0,f=f+Math.imul(Q,Be)|0,f=f+Math.imul(te,ke)|0,w=w+Math.imul(te,Be)|0,g=g+Math.imul(J,De)|0,f=f+Math.imul(J,je)|0,f=f+Math.imul(X,De)|0,w=w+Math.imul(X,je)|0,g=g+Math.imul(G,ee)|0,f=f+Math.imul(G,Y)|0,f=f+Math.imul(V,ee)|0,w=w+Math.imul(V,Y)|0,g=g+Math.imul(T,re)|0,f=f+Math.imul(T,ne)|0,f=f+Math.imul(C,re)|0,w=w+Math.imul(C,ne)|0;var vt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(vt>>>26)|0,vt&=67108863,g=Math.imul(ye,_e),f=Math.imul(ye,Ee),f=f+Math.imul(le,_e)|0,w=Math.imul(le,Ee),g=g+Math.imul(me,Pe)|0,f=f+Math.imul(me,Se)|0,f=f+Math.imul(he,Pe)|0,w=w+Math.imul(he,Se)|0,g=g+Math.imul(we,Te)|0,f=f+Math.imul(we,Ie)|0,f=f+Math.imul(Ae,Te)|0,w=w+Math.imul(Ae,Ie)|0,g=g+Math.imul(pe,Re)|0,f=f+Math.imul(pe,Ce)|0,f=f+Math.imul(Me,Re)|0,w=w+Math.imul(Me,Ce)|0,g=g+Math.imul(oe,Ne)|0,f=f+Math.imul(oe,Oe)|0,f=f+Math.imul(ce,Ne)|0,w=w+Math.imul(ce,Oe)|0,g=g+Math.imul(ie,ke)|0,f=f+Math.imul(ie,Be)|0,f=f+Math.imul(ae,ke)|0,w=w+Math.imul(ae,Be)|0,g=g+Math.imul(Q,De)|0,f=f+Math.imul(Q,je)|0,f=f+Math.imul(te,De)|0,w=w+Math.imul(te,je)|0,g=g+Math.imul(J,ee)|0,f=f+Math.imul(J,Y)|0,f=f+Math.imul(X,ee)|0,w=w+Math.imul(X,Y)|0,g=g+Math.imul(G,re)|0,f=f+Math.imul(G,ne)|0,f=f+Math.imul(V,re)|0,w=w+Math.imul(V,ne)|0,g=g+Math.imul(T,ge)|0,f=f+Math.imul(T,ve)|0,f=f+Math.imul(C,ge)|0,w=w+Math.imul(C,ve)|0;var zr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(zr>>>26)|0,zr&=67108863,g=Math.imul(ye,Pe),f=Math.imul(ye,Se),f=f+Math.imul(le,Pe)|0,w=Math.imul(le,Se),g=g+Math.imul(me,Te)|0,f=f+Math.imul(me,Ie)|0,f=f+Math.imul(he,Te)|0,w=w+Math.imul(he,Ie)|0,g=g+Math.imul(we,Re)|0,f=f+Math.imul(we,Ce)|0,f=f+Math.imul(Ae,Re)|0,w=w+Math.imul(Ae,Ce)|0,g=g+Math.imul(pe,Ne)|0,f=f+Math.imul(pe,Oe)|0,f=f+Math.imul(Me,Ne)|0,w=w+Math.imul(Me,Oe)|0,g=g+Math.imul(oe,ke)|0,f=f+Math.imul(oe,Be)|0,f=f+Math.imul(ce,ke)|0,w=w+Math.imul(ce,Be)|0,g=g+Math.imul(ie,De)|0,f=f+Math.imul(ie,je)|0,f=f+Math.imul(ae,De)|0,w=w+Math.imul(ae,je)|0,g=g+Math.imul(Q,ee)|0,f=f+Math.imul(Q,Y)|0,f=f+Math.imul(te,ee)|0,w=w+Math.imul(te,Y)|0,g=g+Math.imul(J,re)|0,f=f+Math.imul(J,ne)|0,f=f+Math.imul(X,re)|0,w=w+Math.imul(X,ne)|0,g=g+Math.imul(G,ge)|0,f=f+Math.imul(G,ve)|0,f=f+Math.imul(V,ge)|0,w=w+Math.imul(V,ve)|0;var ir=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ir>>>26)|0,ir&=67108863,g=Math.imul(ye,Te),f=Math.imul(ye,Ie),f=f+Math.imul(le,Te)|0,w=Math.imul(le,Ie),g=g+Math.imul(me,Re)|0,f=f+Math.imul(me,Ce)|0,f=f+Math.imul(he,Re)|0,w=w+Math.imul(he,Ce)|0,g=g+Math.imul(we,Ne)|0,f=f+Math.imul(we,Oe)|0,f=f+Math.imul(Ae,Ne)|0,w=w+Math.imul(Ae,Oe)|0,g=g+Math.imul(pe,ke)|0,f=f+Math.imul(pe,Be)|0,f=f+Math.imul(Me,ke)|0,w=w+Math.imul(Me,Be)|0,g=g+Math.imul(oe,De)|0,f=f+Math.imul(oe,je)|0,f=f+Math.imul(ce,De)|0,w=w+Math.imul(ce,je)|0,g=g+Math.imul(ie,ee)|0,f=f+Math.imul(ie,Y)|0,f=f+Math.imul(ae,ee)|0,w=w+Math.imul(ae,Y)|0,g=g+Math.imul(Q,re)|0,f=f+Math.imul(Q,ne)|0,f=f+Math.imul(te,re)|0,w=w+Math.imul(te,ne)|0,g=g+Math.imul(J,ge)|0,f=f+Math.imul(J,ve)|0,f=f+Math.imul(X,ge)|0,w=w+Math.imul(X,ve)|0;var ur=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ur>>>26)|0,ur&=67108863,g=Math.imul(ye,Re),f=Math.imul(ye,Ce),f=f+Math.imul(le,Re)|0,w=Math.imul(le,Ce),g=g+Math.imul(me,Ne)|0,f=f+Math.imul(me,Oe)|0,f=f+Math.imul(he,Ne)|0,w=w+Math.imul(he,Oe)|0,g=g+Math.imul(we,ke)|0,f=f+Math.imul(we,Be)|0,f=f+Math.imul(Ae,ke)|0,w=w+Math.imul(Ae,Be)|0,g=g+Math.imul(pe,De)|0,f=f+Math.imul(pe,je)|0,f=f+Math.imul(Me,De)|0,w=w+Math.imul(Me,je)|0,g=g+Math.imul(oe,ee)|0,f=f+Math.imul(oe,Y)|0,f=f+Math.imul(ce,ee)|0,w=w+Math.imul(ce,Y)|0,g=g+Math.imul(ie,re)|0,f=f+Math.imul(ie,ne)|0,f=f+Math.imul(ae,re)|0,w=w+Math.imul(ae,ne)|0,g=g+Math.imul(Q,ge)|0,f=f+Math.imul(Q,ve)|0,f=f+Math.imul(te,ge)|0,w=w+Math.imul(te,ve)|0;var wt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(wt>>>26)|0,wt&=67108863,g=Math.imul(ye,Ne),f=Math.imul(ye,Oe),f=f+Math.imul(le,Ne)|0,w=Math.imul(le,Oe),g=g+Math.imul(me,ke)|0,f=f+Math.imul(me,Be)|0,f=f+Math.imul(he,ke)|0,w=w+Math.imul(he,Be)|0,g=g+Math.imul(we,De)|0,f=f+Math.imul(we,je)|0,f=f+Math.imul(Ae,De)|0,w=w+Math.imul(Ae,je)|0,g=g+Math.imul(pe,ee)|0,f=f+Math.imul(pe,Y)|0,f=f+Math.imul(Me,ee)|0,w=w+Math.imul(Me,Y)|0,g=g+Math.imul(oe,re)|0,f=f+Math.imul(oe,ne)|0,f=f+Math.imul(ce,re)|0,w=w+Math.imul(ce,ne)|0,g=g+Math.imul(ie,ge)|0,f=f+Math.imul(ie,ve)|0,f=f+Math.imul(ae,ge)|0,w=w+Math.imul(ae,ve)|0;var or=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(or>>>26)|0,or&=67108863,g=Math.imul(ye,ke),f=Math.imul(ye,Be),f=f+Math.imul(le,ke)|0,w=Math.imul(le,Be),g=g+Math.imul(me,De)|0,f=f+Math.imul(me,je)|0,f=f+Math.imul(he,De)|0,w=w+Math.imul(he,je)|0,g=g+Math.imul(we,ee)|0,f=f+Math.imul(we,Y)|0,f=f+Math.imul(Ae,ee)|0,w=w+Math.imul(Ae,Y)|0,g=g+Math.imul(pe,re)|0,f=f+Math.imul(pe,ne)|0,f=f+Math.imul(Me,re)|0,w=w+Math.imul(Me,ne)|0,g=g+Math.imul(oe,ge)|0,f=f+Math.imul(oe,ve)|0,f=f+Math.imul(ce,ge)|0,w=w+Math.imul(ce,ve)|0;var lr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(lr>>>26)|0,lr&=67108863,g=Math.imul(ye,De),f=Math.imul(ye,je),f=f+Math.imul(le,De)|0,w=Math.imul(le,je),g=g+Math.imul(me,ee)|0,f=f+Math.imul(me,Y)|0,f=f+Math.imul(he,ee)|0,w=w+Math.imul(he,Y)|0,g=g+Math.imul(we,re)|0,f=f+Math.imul(we,ne)|0,f=f+Math.imul(Ae,re)|0,w=w+Math.imul(Ae,ne)|0,g=g+Math.imul(pe,ge)|0,f=f+Math.imul(pe,ve)|0,f=f+Math.imul(Me,ge)|0,w=w+Math.imul(Me,ve)|0;var Mr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,g=Math.imul(ye,ee),f=Math.imul(ye,Y),f=f+Math.imul(le,ee)|0,w=Math.imul(le,Y),g=g+Math.imul(me,re)|0,f=f+Math.imul(me,ne)|0,f=f+Math.imul(he,re)|0,w=w+Math.imul(he,ne)|0,g=g+Math.imul(we,ge)|0,f=f+Math.imul(we,ve)|0,f=f+Math.imul(Ae,ge)|0,w=w+Math.imul(Ae,ve)|0;var Kr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,g=Math.imul(ye,re),f=Math.imul(ye,ne),f=f+Math.imul(le,re)|0,w=Math.imul(le,ne),g=g+Math.imul(me,ge)|0,f=f+Math.imul(me,ve)|0,f=f+Math.imul(he,ge)|0,w=w+Math.imul(he,ve)|0;var kr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(kr>>>26)|0,kr&=67108863,g=Math.imul(ye,ge),f=Math.imul(ye,ve),f=f+Math.imul(le,ge)|0,w=Math.imul(le,ve);var Yr=(x+g|0)+((f&8191)<<13)|0;return x=(w+(f>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,v[0]=gt,v[1]=ot,v[2]=Ge,v[3]=Pt,v[4]=Lt,v[5]=St,v[6]=pt,v[7]=Tt,v[8]=vt,v[9]=zr,v[10]=ir,v[11]=ur,v[12]=wt,v[13]=or,v[14]=lr,v[15]=Mr,v[16]=Kr,v[17]=kr,v[18]=Yr,x!==0&&(v[19]=x,y.length++),y};Math.imul||(S=M);function P(E,c,l){l.negative=c.negative^E.negative,l.length=E.length+c.length;for(var y=0,d=0,h=0;h<l.length-1;h++){var v=d;d=0;for(var x=y&67108863,g=Math.min(h,c.length-1),f=Math.max(0,h-E.length+1);f<=g;f++){var w=h-f,D=E.words[w]|0,T=c.words[f]|0,C=D*T,z=C&67108863;v=v+(C/67108864|0)|0,z=z+x|0,x=z&67108863,v=v+(z>>>26)|0,d+=v>>>26,v&=67108863}l.words[h]=x,y=v,v=d}return y!==0?l.words[h]=y:l.length--,l.strip()}function k(E,c,l){var y=new R;return y.mulp(E,c,l)}i.prototype.mulTo=function(c,l){var y,d=this.length+c.length;return this.length===10&&c.length===10?y=S(this,c,l):d<63?y=M(this,c,l):d<1024?y=P(this,c,l):y=k(this,c,l),y};function R(E,c){this.x=E,this.y=c}R.prototype.makeRBT=function(c){for(var l=new Array(c),y=i.prototype._countBits(c)-1,d=0;d<c;d++)l[d]=this.revBin(d,y,c);return l},R.prototype.revBin=function(c,l,y){if(c===0||c===y-1)return c;for(var d=0,h=0;h<l;h++)d|=(c&1)<<l-h-1,c>>=1;return d},R.prototype.permute=function(c,l,y,d,h,v){for(var x=0;x<v;x++)d[x]=l[c[x]],h[x]=y[c[x]]},R.prototype.transform=function(c,l,y,d,h,v){this.permute(v,c,l,y,d,h);for(var x=1;x<h;x<<=1)for(var g=x<<1,f=Math.cos(2*Math.PI/g),w=Math.sin(2*Math.PI/g),D=0;D<h;D+=g)for(var T=f,C=w,z=0;z<x;z++){var G=y[D+z],V=d[D+z],Z=y[D+z+x],J=d[D+z+x],X=T*Z-C*J;J=T*J+C*Z,Z=X,y[D+z]=G+Z,d[D+z]=V+J,y[D+z+x]=G-Z,d[D+z+x]=V-J,z!==g&&(X=f*T-w*C,C=f*C+w*T,T=X)}},R.prototype.guessLen13b=function(c,l){var y=Math.max(l,c)|1,d=y&1,h=0;for(y=y/2|0;y;y=y>>>1)h++;return 1<<h+1+d},R.prototype.conjugate=function(c,l,y){if(!(y<=1))for(var d=0;d<y/2;d++){var h=c[d];c[d]=c[y-d-1],c[y-d-1]=h,h=l[d],l[d]=-l[y-d-1],l[y-d-1]=-h}},R.prototype.normalize13b=function(c,l){for(var y=0,d=0;d<l/2;d++){var h=Math.round(c[2*d+1]/l)*8192+Math.round(c[2*d]/l)+y;c[d]=h&67108863,h<67108864?y=0:y=h/67108864|0}return c},R.prototype.convert13b=function(c,l,y,d){for(var h=0,v=0;v<l;v++)h=h+(c[v]|0),y[2*v]=h&8191,h=h>>>13,y[2*v+1]=h&8191,h=h>>>13;for(v=2*l;v<d;++v)y[v]=0;r(h===0),r((h&-8192)===0)},R.prototype.stub=function(c){for(var l=new Array(c),y=0;y<c;y++)l[y]=0;return l},R.prototype.mulp=function(c,l,y){var d=2*this.guessLen13b(c.length,l.length),h=this.makeRBT(d),v=this.stub(d),x=new Array(d),g=new Array(d),f=new Array(d),w=new Array(d),D=new Array(d),T=new Array(d),C=y.words;C.length=d,this.convert13b(c.words,c.length,x,d),this.convert13b(l.words,l.length,w,d),this.transform(x,v,g,f,d,h),this.transform(w,v,D,T,d,h);for(var z=0;z<d;z++){var G=g[z]*D[z]-f[z]*T[z];f[z]=g[z]*T[z]+f[z]*D[z],g[z]=G}return this.conjugate(g,f,d),this.transform(g,f,C,v,d,h),this.conjugate(C,v,d),this.normalize13b(C,d),y.negative=c.negative^l.negative,y.length=c.length+l.length,y.strip()},i.prototype.mul=function(c){var l=new i(null);return l.words=new Array(this.length+c.length),this.mulTo(c,l)},i.prototype.mulf=function(c){var l=new i(null);return l.words=new Array(this.length+c.length),k(this,c,l)},i.prototype.imul=function(c){return this.clone().mulTo(c,this)},i.prototype.imuln=function(c){r(typeof c=="number"),r(c<67108864);for(var l=0,y=0;y<this.length;y++){var d=(this.words[y]|0)*c,h=(d&67108863)+(l&67108863);l>>=26,l+=d/67108864|0,l+=h>>>26,this.words[y]=h&67108863}return l!==0&&(this.words[y]=l,this.length++),this},i.prototype.muln=function(c){return this.clone().imuln(c)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(c){var l=A(c);if(l.length===0)return new i(1);for(var y=this,d=0;d<l.length&&l[d]===0;d++,y=y.sqr());if(++d<l.length)for(var h=y.sqr();d<l.length;d++,h=h.sqr())l[d]!==0&&(y=y.mul(h));return y},i.prototype.iushln=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26,d=67108863>>>26-l<<26-l,h;if(l!==0){var v=0;for(h=0;h<this.length;h++){var x=this.words[h]&d,g=(this.words[h]|0)-x<<l;this.words[h]=g|v,v=x>>>26-l}v&&(this.words[h]=v,this.length++)}if(y!==0){for(h=this.length-1;h>=0;h--)this.words[h+y]=this.words[h];for(h=0;h<y;h++)this.words[h]=0;this.length+=y}return this.strip()},i.prototype.ishln=function(c){return r(this.negative===0),this.iushln(c)},i.prototype.iushrn=function(c,l,y){r(typeof c=="number"&&c>=0);var d;l?d=(l-l%26)/26:d=0;var h=c%26,v=Math.min((c-h)/26,this.length),x=67108863^67108863>>>h<<h,g=y;if(d-=v,d=Math.max(0,d),g){for(var f=0;f<v;f++)g.words[f]=this.words[f];g.length=v}if(v!==0)if(this.length>v)for(this.length-=v,f=0;f<this.length;f++)this.words[f]=this.words[f+v];else this.words[0]=0,this.length=1;var w=0;for(f=this.length-1;f>=0&&(w!==0||f>=d);f--){var D=this.words[f]|0;this.words[f]=w<<26-h|D>>>h,w=D&x}return g&&w!==0&&(g.words[g.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(c,l,y){return r(this.negative===0),this.iushrn(c,l,y)},i.prototype.shln=function(c){return this.clone().ishln(c)},i.prototype.ushln=function(c){return this.clone().iushln(c)},i.prototype.shrn=function(c){return this.clone().ishrn(c)},i.prototype.ushrn=function(c){return this.clone().iushrn(c)},i.prototype.testn=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26,d=1<<l;if(this.length<=y)return!1;var h=this.words[y];return!!(h&d)},i.prototype.imaskn=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(l!==0&&y++,this.length=Math.min(y,this.length),l!==0){var d=67108863^67108863>>>l<<l;this.words[this.length-1]&=d}return this.strip()},i.prototype.maskn=function(c){return this.clone().imaskn(c)},i.prototype.iaddn=function(c){return r(typeof c=="number"),r(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},i.prototype._iaddn=function(c){this.words[0]+=c;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(c){if(r(typeof c=="number"),r(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(c){return this.clone().iaddn(c)},i.prototype.subn=function(c){return this.clone().isubn(c)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(c,l,y){var d=c.length+y,h;this._expand(d);var v,x=0;for(h=0;h<c.length;h++){v=(this.words[h+y]|0)+x;var g=(c.words[h]|0)*l;v-=g&67108863,x=(v>>26)-(g/67108864|0),this.words[h+y]=v&67108863}for(;h<this.length-y;h++)v=(this.words[h+y]|0)+x,x=v>>26,this.words[h+y]=v&67108863;if(x===0)return this.strip();for(r(x===-1),x=0,h=0;h<this.length;h++)v=-(this.words[h]|0)+x,x=v>>26,this.words[h]=v&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(c,l){var y=this.length-c.length,d=this.clone(),h=c,v=h.words[h.length-1]|0,x=this._countBits(v);y=26-x,y!==0&&(h=h.ushln(y),d.iushln(y),v=h.words[h.length-1]|0);var g=d.length-h.length,f;if(l!=="mod"){f=new i(null),f.length=g+1,f.words=new Array(f.length);for(var w=0;w<f.length;w++)f.words[w]=0}var D=d.clone()._ishlnsubmul(h,1,g);D.negative===0&&(d=D,f&&(f.words[g]=1));for(var T=g-1;T>=0;T--){var C=(d.words[h.length+T]|0)*67108864+(d.words[h.length+T-1]|0);for(C=Math.min(C/v|0,67108863),d._ishlnsubmul(h,C,T);d.negative!==0;)C--,d.negative=0,d._ishlnsubmul(h,1,T),d.isZero()||(d.negative^=1);f&&(f.words[T]=C)}return f&&f.strip(),d.strip(),l!=="div"&&y!==0&&d.iushrn(y),{div:f||null,mod:d}},i.prototype.divmod=function(c,l,y){if(r(!c.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var d,h,v;return this.negative!==0&&c.negative===0?(v=this.neg().divmod(c,l),l!=="mod"&&(d=v.div.neg()),l!=="div"&&(h=v.mod.neg(),y&&h.negative!==0&&h.iadd(c)),{div:d,mod:h}):this.negative===0&&c.negative!==0?(v=this.divmod(c.neg(),l),l!=="mod"&&(d=v.div.neg()),{div:d,mod:v.mod}):this.negative&c.negative?(v=this.neg().divmod(c.neg(),l),l!=="div"&&(h=v.mod.neg(),y&&h.negative!==0&&h.isub(c)),{div:v.div,mod:h}):c.length>this.length||this.cmp(c)<0?{div:new i(0),mod:this}:c.length===1?l==="div"?{div:this.divn(c.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new i(this.modn(c.words[0]))}:this._wordDiv(c,l)},i.prototype.div=function(c){return this.divmod(c,"div",!1).div},i.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},i.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},i.prototype.divRound=function(c){var l=this.divmod(c);if(l.mod.isZero())return l.div;var y=l.div.negative!==0?l.mod.isub(c):l.mod,d=c.ushrn(1),h=c.andln(1),v=y.cmp(d);return v<0||h===1&&v===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(c){r(c<=67108863);for(var l=(1<<26)%c,y=0,d=this.length-1;d>=0;d--)y=(l*y+(this.words[d]|0))%c;return y},i.prototype.idivn=function(c){r(c<=67108863);for(var l=0,y=this.length-1;y>=0;y--){var d=(this.words[y]|0)+l*67108864;this.words[y]=d/c|0,l=d%c}return this.strip()},i.prototype.divn=function(c){return this.clone().idivn(c)},i.prototype.egcd=function(c){r(c.negative===0),r(!c.isZero());var l=this,y=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var d=new i(1),h=new i(0),v=new i(0),x=new i(1),g=0;l.isEven()&&y.isEven();)l.iushrn(1),y.iushrn(1),++g;for(var f=y.clone(),w=l.clone();!l.isZero();){for(var D=0,T=1;!(l.words[0]&T)&&D<26;++D,T<<=1);if(D>0)for(l.iushrn(D);D-- >0;)(d.isOdd()||h.isOdd())&&(d.iadd(f),h.isub(w)),d.iushrn(1),h.iushrn(1);for(var C=0,z=1;!(y.words[0]&z)&&C<26;++C,z<<=1);if(C>0)for(y.iushrn(C);C-- >0;)(v.isOdd()||x.isOdd())&&(v.iadd(f),x.isub(w)),v.iushrn(1),x.iushrn(1);l.cmp(y)>=0?(l.isub(y),d.isub(v),h.isub(x)):(y.isub(l),v.isub(d),x.isub(h))}return{a:v,b:x,gcd:y.iushln(g)}},i.prototype._invmp=function(c){r(c.negative===0),r(!c.isZero());var l=this,y=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var d=new i(1),h=new i(0),v=y.clone();l.cmpn(1)>0&&y.cmpn(1)>0;){for(var x=0,g=1;!(l.words[0]&g)&&x<26;++x,g<<=1);if(x>0)for(l.iushrn(x);x-- >0;)d.isOdd()&&d.iadd(v),d.iushrn(1);for(var f=0,w=1;!(y.words[0]&w)&&f<26;++f,w<<=1);if(f>0)for(y.iushrn(f);f-- >0;)h.isOdd()&&h.iadd(v),h.iushrn(1);l.cmp(y)>=0?(l.isub(y),d.isub(h)):(y.isub(l),h.isub(d))}var D;return l.cmpn(1)===0?D=d:D=h,D.cmpn(0)<0&&D.iadd(c),D},i.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var l=this.clone(),y=c.clone();l.negative=0,y.negative=0;for(var d=0;l.isEven()&&y.isEven();d++)l.iushrn(1),y.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;y.isEven();)y.iushrn(1);var h=l.cmp(y);if(h<0){var v=l;l=y,y=v}else if(h===0||y.cmpn(1)===0)break;l.isub(y)}while(!0);return y.iushln(d)},i.prototype.invm=function(c){return this.egcd(c).a.umod(c)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(c){return this.words[0]&c},i.prototype.bincn=function(c){r(typeof c=="number");var l=c%26,y=(c-l)/26,d=1<<l;if(this.length<=y)return this._expand(y+1),this.words[y]|=d,this;for(var h=d,v=y;h!==0&&v<this.length;v++){var x=this.words[v]|0;x+=h,h=x>>>26,x&=67108863,this.words[v]=x}return h!==0&&(this.words[v]=h,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(c){var l=c<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var y;if(this.length>1)y=1;else{l&&(c=-c),r(c<=67108863,"Number is too big");var d=this.words[0]|0;y=d===c?0:d<c?-1:1}return this.negative!==0?-y|0:y},i.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var l=this.ucmp(c);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var l=0,y=this.length-1;y>=0;y--){var d=this.words[y]|0,h=c.words[y]|0;if(d!==h){d<h?l=-1:d>h&&(l=1);break}}return l},i.prototype.gtn=function(c){return this.cmpn(c)===1},i.prototype.gt=function(c){return this.cmp(c)===1},i.prototype.gten=function(c){return this.cmpn(c)>=0},i.prototype.gte=function(c){return this.cmp(c)>=0},i.prototype.ltn=function(c){return this.cmpn(c)===-1},i.prototype.lt=function(c){return this.cmp(c)===-1},i.prototype.lten=function(c){return this.cmpn(c)<=0},i.prototype.lte=function(c){return this.cmp(c)<=0},i.prototype.eqn=function(c){return this.cmpn(c)===0},i.prototype.eq=function(c){return this.cmp(c)===0},i.red=function(c){return new L(c)},i.prototype.toRed=function(c){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(c){return this.red=c,this},i.prototype.forceRed=function(c){return r(!this.red,"Already a number in reduction context"),this._forceRed(c)},i.prototype.redAdd=function(c){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},i.prototype.redIAdd=function(c){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},i.prototype.redSub=function(c){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},i.prototype.redISub=function(c){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},i.prototype.redShl=function(c){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},i.prototype.redMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},i.prototype.redIMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(c){return r(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var B={k256:null,p224:null,p192:null,p25519:null};function I(E,c){this.name=E,this.p=new i(c,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}I.prototype._tmp=function(){var c=new i(null);return c.words=new Array(Math.ceil(this.n/13)),c},I.prototype.ireduce=function(c){var l=c,y;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),y=l.bitLength();while(y>this.n);var d=y<this.n?-1:l.ucmp(this.p);return d===0?(l.words[0]=0,l.length=1):d>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},I.prototype.split=function(c,l){c.iushrn(this.n,0,l)},I.prototype.imulK=function(c){return c.imul(this.k)};function q(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(q,I),q.prototype.split=function(c,l){for(var y=4194303,d=Math.min(c.length,9),h=0;h<d;h++)l.words[h]=c.words[h];if(l.length=d,c.length<=9){c.words[0]=0,c.length=1;return}var v=c.words[9];for(l.words[l.length++]=v&y,h=10;h<c.length;h++){var x=c.words[h]|0;c.words[h-10]=(x&y)<<4|v>>>22,v=x}v>>>=22,c.words[h-10]=v,v===0&&c.length>10?c.length-=10:c.length-=9},q.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var l=0,y=0;y<c.length;y++){var d=c.words[y]|0;l+=d*977,c.words[y]=l&67108863,l=d*64+(l/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function $(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n($,I);function U(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(U,I);function F(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(F,I),F.prototype.imulK=function(c){for(var l=0,y=0;y<c.length;y++){var d=(c.words[y]|0)*19+l,h=d&67108863;d>>>=26,c.words[y]=h,l=d}return l!==0&&(c.words[c.length++]=l),c},i._prime=function(c){if(B[c])return B[c];var l;if(c==="k256")l=new q;else if(c==="p224")l=new $;else if(c==="p192")l=new U;else if(c==="p25519")l=new F;else throw new Error("Unknown prime "+c);return B[c]=l,l};function L(E){if(typeof E=="string"){var c=i._prime(E);this.m=c.p,this.prime=c}else r(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}L.prototype._verify1=function(c){r(c.negative===0,"red works only with positives"),r(c.red,"red works only with red numbers")},L.prototype._verify2=function(c,l){r((c.negative|l.negative)===0,"red works only with positives"),r(c.red&&c.red===l.red,"red works only with red numbers")},L.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):c.umod(this.m)._forceRed(this)},L.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},L.prototype.add=function(c,l){this._verify2(c,l);var y=c.add(l);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},L.prototype.iadd=function(c,l){this._verify2(c,l);var y=c.iadd(l);return y.cmp(this.m)>=0&&y.isub(this.m),y},L.prototype.sub=function(c,l){this._verify2(c,l);var y=c.sub(l);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},L.prototype.isub=function(c,l){this._verify2(c,l);var y=c.isub(l);return y.cmpn(0)<0&&y.iadd(this.m),y},L.prototype.shl=function(c,l){return this._verify1(c),this.imod(c.ushln(l))},L.prototype.imul=function(c,l){return this._verify2(c,l),this.imod(c.imul(l))},L.prototype.mul=function(c,l){return this._verify2(c,l),this.imod(c.mul(l))},L.prototype.isqr=function(c){return this.imul(c,c.clone())},L.prototype.sqr=function(c){return this.mul(c,c)},L.prototype.sqrt=function(c){if(c.isZero())return c.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var y=this.m.add(new i(1)).iushrn(2);return this.pow(c,y)}for(var d=this.m.subn(1),h=0;!d.isZero()&&d.andln(1)===0;)h++,d.iushrn(1);r(!d.isZero());var v=new i(1).toRed(this),x=v.redNeg(),g=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,g).cmp(x)!==0;)f.redIAdd(x);for(var w=this.pow(f,d),D=this.pow(c,d.addn(1).iushrn(1)),T=this.pow(c,d),C=h;T.cmp(v)!==0;){for(var z=T,G=0;z.cmp(v)!==0;G++)z=z.redSqr();r(G<C);var V=this.pow(w,new i(1).iushln(C-G-1));D=D.redMul(V),w=V.redSqr(),T=T.redMul(w),C=G}return D},L.prototype.invm=function(c){var l=c._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},L.prototype.pow=function(c,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return c.clone();var y=4,d=new Array(1<<y);d[0]=new i(1).toRed(this),d[1]=c;for(var h=2;h<d.length;h++)d[h]=this.mul(d[h-1],c);var v=d[0],x=0,g=0,f=l.bitLength()%26;for(f===0&&(f=26),h=l.length-1;h>=0;h--){for(var w=l.words[h],D=f-1;D>=0;D--){var T=w>>D&1;if(v!==d[0]&&(v=this.sqr(v)),T===0&&x===0){g=0;continue}x<<=1,x|=T,g++,!(g!==y&&(h!==0||D!==0))&&(v=this.mul(v,d[x]),g=0,x=0)}f=26}return v},L.prototype.convertTo=function(c){var l=c.umod(this.m);return l===c?l.clone():l},L.prototype.convertFrom=function(c){var l=c.clone();return l.red=null,l},i.mont=function(c){return new W(c)};function W(E){L.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(W,L),W.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},W.prototype.convertFrom=function(c){var l=this.imod(c.mul(this.rinv));return l.red=null,l},W.prototype.imul=function(c,l){if(c.isZero()||l.isZero())return c.words[0]=0,c.length=1,c;var y=c.imul(l),d=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=y.isub(d).iushrn(this.shift),v=h;return h.cmp(this.m)>=0?v=h.isub(this.m):h.cmpn(0)<0&&(v=h.iadd(this.m)),v._forceRed(this)},W.prototype.mul=function(c,l){if(c.isZero()||l.isZero())return new i(0)._forceRed(this);var y=c.mul(l),d=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=y.isub(d).iushrn(this.shift),v=h;return h.cmp(this.m)>=0?v=h.isub(this.m):h.cmpn(0)<0&&(v=h.iadd(this.m)),v._forceRed(this)},W.prototype.invm=function(c){var l=this.imod(c._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(typeof fN>"u"||fN,Zce)});var x4=H((TOt,Jce)=>{"use strict";_();var _4=Ut(),Fw=_4.Buffer,hf={},pf;for(pf in _4)_4.hasOwnProperty(pf)&&(pf==="SlowBuffer"||pf==="Buffer"||(hf[pf]=_4[pf]));var zw=hf.Buffer={};for(pf in Fw)Fw.hasOwnProperty(pf)&&(pf==="allocUnsafe"||pf==="allocUnsafeSlow"||(zw[pf]=Fw[pf]));hf.Buffer.prototype=Fw.prototype;(!zw.from||zw.from===Uint8Array.from)&&(zw.from=function(t,e,r){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&typeof t.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return Fw(t,e,r)});zw.alloc||(zw.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=Fw(t);return!e||e.length===0?n.fill(0):typeof r=="string"?n.fill(e,r):n.fill(e),n});if(!hf.kStringMaxLength)try{hf.kStringMaxLength=O.default.binding("buffer").kStringMaxLength}catch{}hf.constants||(hf.constants={MAX_LENGTH:hf.kMaxLength},hf.kStringMaxLength&&(hf.constants.MAX_STRING_LENGTH=hf.kStringMaxLength));Jce.exports=hf});var E4=H(Yce=>{"use strict";_();var lFe=Rt();function mf(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}Yce.Reporter=mf;mf.prototype.isError=function(e){return e instanceof Kw};mf.prototype.save=function(){let e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};mf.prototype.restore=function(e){let r=this._reporterState;r.obj=e.obj,r.path=r.path.slice(0,e.pathLen)};mf.prototype.enterKey=function(e){return this._reporterState.path.push(e)};mf.prototype.exitKey=function(e){let r=this._reporterState;r.path=r.path.slice(0,e-1)};mf.prototype.leaveKey=function(e,r,n){let i=this._reporterState;this.exitKey(e),i.obj!==null&&(i.obj[r]=n)};mf.prototype.path=function(){return this._reporterState.path.join("/")};mf.prototype.enterObject=function(){let e=this._reporterState,r=e.obj;return e.obj={},r};mf.prototype.leaveObject=function(e){let r=this._reporterState,n=r.obj;return r.obj=e,n};mf.prototype.error=function(e){let r,n=this._reporterState,i=e instanceof Kw;if(i?r=e:r=new Kw(n.path.map(function(o){return"["+JSON.stringify(o)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw r;return i||n.errors.push(r),r};mf.prototype.wrapResult=function(e){let r=this._reporterState;return r.options.partial?{result:this.isError(e)?null:e,errors:r.errors}:e};function Kw(t,e){this.path=t,this.rethrow(e)}lFe(Kw,Error);Kw.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,Kw),!this.stack)try{throw new Error(this.message)}catch(r){this.stack=r.stack}return this}});var Vw=H(lN=>{"use strict";_();var dFe=Rt(),S4=E4().Reporter,Ww=x4().Buffer;function yf(t,e){if(S4.call(this,e),!Ww.isBuffer(t)){this.error("Input not Buffer");return}this.base=t,this.offset=0,this.length=t.length}dFe(yf,S4);lN.DecoderBuffer=yf;yf.isDecoderBuffer=function(e){return e instanceof yf?!0:typeof e=="object"&&Ww.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};yf.prototype.save=function(){return{offset:this.offset,reporter:S4.prototype.save.call(this)}};yf.prototype.restore=function(e){let r=new yf(this.base);return r.offset=e.offset,r.length=this.offset,this.offset=e.offset,S4.prototype.restore.call(this,e.reporter),r};yf.prototype.isEmpty=function(){return this.offset===this.length};yf.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};yf.prototype.skip=function(e,r){if(!(this.offset+e<=this.length))return this.error(r||"DecoderBuffer overrun");let n=new yf(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n};yf.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)};function Gw(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(r){return Gw.isEncoderBuffer(r)||(r=new Gw(r,e)),this.length+=r.length,r},this);else if(typeof t=="number"){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if(typeof t=="string")this.value=t,this.length=Ww.byteLength(t);else if(Ww.isBuffer(t))this.value=t,this.length=t.length;else return e.error("Unsupported type: "+typeof t)}lN.EncoderBuffer=Gw;Gw.isEncoderBuffer=function(e){return e instanceof Gw?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};Gw.prototype.join=function(e,r){return e||(e=Ww.alloc(this.length)),r||(r=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,r),r+=n.length}):(typeof this.value=="number"?e[r]=this.value:typeof this.value=="string"?e.write(this.value,r):Ww.isBuffer(this.value)&&this.value.copy(e,r),r+=this.length)),e}});var M4=H((DOt,Xce)=>{"use strict";_();var hFe=E4().Reporter,pFe=Vw().EncoderBuffer,mFe=Vw().DecoderBuffer,ba=xc(),Qce=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],yFe=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(Qce),gFe=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function wn(t,e,r){let n={};this._baseState=n,n.name=r,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}Xce.exports=wn;var bFe=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];wn.prototype.clone=function(){let e=this._baseState,r={};bFe.forEach(function(i){r[i]=e[i]});let n=new this.constructor(r.parent);return n._baseState=r,n};wn.prototype._wrap=function(){let e=this._baseState;yFe.forEach(function(r){this[r]=function(){let i=new this.constructor(this);return e.children.push(i),i[r].apply(i,arguments)}},this)};wn.prototype._init=function(e){let r=this._baseState;ba(r.parent===null),e.call(this),r.children=r.children.filter(function(n){return n._baseState.parent===this},this),ba.equal(r.children.length,1,"Root node can have only one child")};wn.prototype._useArgs=function(e){let r=this._baseState,n=e.filter(function(i){return i instanceof this.constructor},this);e=e.filter(function(i){return!(i instanceof this.constructor)},this),n.length!==0&&(ba(r.children===null),r.children=n,n.forEach(function(i){i._baseState.parent=this},this)),e.length!==0&&(ba(r.args===null),r.args=e,r.reverseArgs=e.map(function(i){if(typeof i!="object"||i.constructor!==Object)return i;let o={};return Object.keys(i).forEach(function(s){s==(s|0)&&(s|=0);let a=i[s];o[a]=s}),o}))};gFe.forEach(function(t){wn.prototype[t]=function(){let r=this._baseState;throw new Error(t+" not implemented for encoding: "+r.enc)}});Qce.forEach(function(t){wn.prototype[t]=function(){let r=this._baseState,n=Array.prototype.slice.call(arguments);return ba(r.tag===null),r.tag=t,this._useArgs(n),this}});wn.prototype.use=function(e){ba(e);let r=this._baseState;return ba(r.use===null),r.use=e,this};wn.prototype.optional=function(){let e=this._baseState;return e.optional=!0,this};wn.prototype.def=function(e){let r=this._baseState;return ba(r.default===null),r.default=e,r.optional=!0,this};wn.prototype.explicit=function(e){let r=this._baseState;return ba(r.explicit===null&&r.implicit===null),r.explicit=e,this};wn.prototype.implicit=function(e){let r=this._baseState;return ba(r.explicit===null&&r.implicit===null),r.implicit=e,this};wn.prototype.obj=function(){let e=this._baseState,r=Array.prototype.slice.call(arguments);return e.obj=!0,r.length!==0&&this._useArgs(r),this};wn.prototype.key=function(e){let r=this._baseState;return ba(r.key===null),r.key=e,this};wn.prototype.any=function(){let e=this._baseState;return e.any=!0,this};wn.prototype.choice=function(e){let r=this._baseState;return ba(r.choice===null),r.choice=e,this._useArgs(Object.keys(e).map(function(n){return e[n]})),this};wn.prototype.contains=function(e){let r=this._baseState;return ba(r.use===null),r.contains=e,this};wn.prototype._decode=function(e,r){let n=this._baseState;if(n.parent===null)return e.wrapResult(n.children[0]._decode(e,r));let i=n.default,o=!0,s=null;if(n.key!==null&&(s=e.enterKey(n.key)),n.optional){let u=null;if(n.explicit!==null?u=n.explicit:n.implicit!==null?u=n.implicit:n.tag!==null&&(u=n.tag),u===null&&!n.any){let m=e.save();try{n.choice===null?this._decodeGeneric(n.tag,e,r):this._decodeChoice(e,r),o=!0}catch{o=!1}e.restore(m)}else if(o=this._peekTag(e,u,n.any),e.isError(o))return o}let a;if(n.obj&&o&&(a=e.enterObject()),o){if(n.explicit!==null){let m=this._decodeTag(e,n.explicit);if(e.isError(m))return m;e=m}let u=e.offset;if(n.use===null&&n.choice===null){let m;n.any&&(m=e.save());let p=this._decodeTag(e,n.implicit!==null?n.implicit:n.tag,n.any);if(e.isError(p))return p;n.any?i=e.raw(m):e=p}if(r&&r.track&&n.tag!==null&&r.track(e.path(),u,e.length,"tagged"),r&&r.track&&n.tag!==null&&r.track(e.path(),e.offset,e.length,"content"),n.any||(n.choice===null?i=this._decodeGeneric(n.tag,e,r):i=this._decodeChoice(e,r)),e.isError(i))return i;if(!n.any&&n.choice===null&&n.children!==null&&n.children.forEach(function(p){p._decode(e,r)}),n.contains&&(n.tag==="octstr"||n.tag==="bitstr")){let m=new mFe(i);i=this._getUse(n.contains,e._reporterState.obj)._decode(m,r)}}return n.obj&&o&&(i=e.leaveObject(a)),n.key!==null&&(i!==null||o===!0)?e.leaveKey(s,n.key,i):s!==null&&e.exitKey(s),i};wn.prototype._decodeGeneric=function(e,r,n){let i=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(r,e,i.args[0],n):/str$/.test(e)?this._decodeStr(r,e,n):e==="objid"&&i.args?this._decodeObjid(r,i.args[0],i.args[1],n):e==="objid"?this._decodeObjid(r,null,null,n):e==="gentime"||e==="utctime"?this._decodeTime(r,e,n):e==="null_"?this._decodeNull(r,n):e==="bool"?this._decodeBool(r,n):e==="objDesc"?this._decodeStr(r,e,n):e==="int"||e==="enum"?this._decodeInt(r,i.args&&i.args[0],n):i.use!==null?this._getUse(i.use,r._reporterState.obj)._decode(r,n):r.error("unknown tag: "+e)};wn.prototype._getUse=function(e,r){let n=this._baseState;return n.useDecoder=this._use(e,r),ba(n.useDecoder._baseState.parent===null),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder};wn.prototype._decodeChoice=function(e,r){let n=this._baseState,i=null,o=!1;return Object.keys(n.choice).some(function(s){let a=e.save(),u=n.choice[s];try{let m=u._decode(e,r);if(e.isError(m))return!1;i={type:s,value:m},o=!0}catch{return e.restore(a),!1}return!0},this),o?i:e.error("Choice not matched")};wn.prototype._createEncoderBuffer=function(e){return new pFe(e,this.reporter)};wn.prototype._encode=function(e,r,n){let i=this._baseState;if(i.default!==null&&i.default===e)return;let o=this._encodeValue(e,r,n);if(o!==void 0&&!this._skipDefault(o,r,n))return o};wn.prototype._encodeValue=function(e,r,n){let i=this._baseState;if(i.parent===null)return i.children[0]._encode(e,r||new hFe);let o=null;if(this.reporter=r,i.optional&&e===void 0)if(i.default!==null)e=i.default;else return;let s=null,a=!1;if(i.any)o=this._createEncoderBuffer(e);else if(i.choice)o=this._encodeChoice(e,r);else if(i.contains)s=this._getUse(i.contains,n)._encode(e,r),a=!0;else if(i.children)s=i.children.map(function(u){if(u._baseState.tag==="null_")return u._encode(null,r,e);if(u._baseState.key===null)return r.error("Child should have a key");let m=r.enterKey(u._baseState.key);if(typeof e!="object")return r.error("Child expected, but input is not object");let p=u._encode(e[u._baseState.key],r,e);return r.leaveKey(m),p},this).filter(function(u){return u}),s=this._createEncoderBuffer(s);else if(i.tag==="seqof"||i.tag==="setof"){if(!(i.args&&i.args.length===1))return r.error("Too many args for : "+i.tag);if(!Array.isArray(e))return r.error("seqof/setof, but data is not Array");let u=this.clone();u._baseState.implicit=null,s=this._createEncoderBuffer(e.map(function(m){let p=this._baseState;return this._getUse(p.args[0],e)._encode(m,r)},u))}else i.use!==null?o=this._getUse(i.use,n)._encode(e,r):(s=this._encodePrimitive(i.tag,e),a=!0);if(!i.any&&i.choice===null){let u=i.implicit!==null?i.implicit:i.tag,m=i.implicit===null?"universal":"context";u===null?i.use===null&&r.error("Tag could be omitted only for .use()"):i.use===null&&(o=this._encodeComposite(u,a,m,s))}return i.explicit!==null&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o};wn.prototype._encodeChoice=function(e,r){let n=this._baseState,i=n.choice[e.type];return i||ba(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),i._encode(e.value,r)};wn.prototype._encodePrimitive=function(e,r){let n=this._baseState;if(/str$/.test(e))return this._encodeStr(r,e);if(e==="objid"&&n.args)return this._encodeObjid(r,n.reverseArgs[0],n.args[1]);if(e==="objid")return this._encodeObjid(r,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(r,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(r,n.args&&n.reverseArgs[0]);if(e==="bool")return this._encodeBool(r);if(e==="objDesc")return this._encodeStr(r,e);throw new Error("Unsupported tag: "+e)};wn.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)};wn.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}});var A4=H(Yy=>{"use strict";_();function efe(t){let e={};return Object.keys(t).forEach(function(r){(r|0)==r&&(r=r|0);let n=t[r];e[n]=r}),e}Yy.tagClass={0:"universal",1:"application",2:"context",3:"private"};Yy.tagClassByName=efe(Yy.tagClass);Yy.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"};Yy.tagByName=efe(Yy.tag)});var hN=H((qOt,nfe)=>{"use strict";_();var vFe=Rt(),_h=x4().Buffer,tfe=M4(),dN=A4();function rfe(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new hu,this.tree._init(t.body)}nfe.exports=rfe;rfe.prototype.encode=function(e,r){return this.tree._encode(e,r).join()};function hu(t){tfe.call(this,"der",t)}vFe(hu,tfe);hu.prototype._encodeComposite=function(e,r,n,i){let o=wFe(e,r,n,this.reporter);if(i.length<128){let u=_h.alloc(2);return u[0]=o,u[1]=i.length,this._createEncoderBuffer([u,i])}let s=1;for(let u=i.length;u>=256;u>>=8)s++;let a=_h.alloc(1+1+s);a[0]=o,a[1]=128|s;for(let u=1+s,m=i.length;m>0;u--,m>>=8)a[u]=m&255;return this._createEncoderBuffer([a,i])};hu.prototype._encodeStr=function(e,r){if(r==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(r==="bmpstr"){let n=_h.alloc(e.length*2);for(let i=0;i<e.length;i++)n.writeUInt16BE(e.charCodeAt(i),i*2);return this._createEncoderBuffer(n)}else return r==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):r==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(r)?this._createEncoderBuffer(e):r==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+r+" unsupported")};hu.prototype._encodeObjid=function(e,r,n){if(typeof e=="string"){if(!r)return this.reporter.error("string objid given, but no values map found");if(!r.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=r[e].split(/[\s.]+/g);for(let a=0;a<e.length;a++)e[a]|=0}else if(Array.isArray(e)){e=e.slice();for(let a=0;a<e.length;a++)e[a]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let i=0;for(let a=0;a<e.length;a++){let u=e[a];for(i++;u>=128;u>>=7)i++}let o=_h.alloc(i),s=o.length-1;for(let a=e.length-1;a>=0;a--){let u=e[a];for(o[s--]=u&127;(u>>=7)>0;)o[s--]=128|u&127}return this._createEncoderBuffer(o)};function gf(t){return t<10?"0"+t:t}hu.prototype._encodeTime=function(e,r){let n,i=new Date(e);return r==="gentime"?n=[gf(i.getUTCFullYear()),gf(i.getUTCMonth()+1),gf(i.getUTCDate()),gf(i.getUTCHours()),gf(i.getUTCMinutes()),gf(i.getUTCSeconds()),"Z"].join(""):r==="utctime"?n=[gf(i.getUTCFullYear()%100),gf(i.getUTCMonth()+1),gf(i.getUTCDate()),gf(i.getUTCHours()),gf(i.getUTCMinutes()),gf(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+r+" time is not supported yet"),this._encodeStr(n,"octstr")};hu.prototype._encodeNull=function(){return this._createEncoderBuffer("")};hu.prototype._encodeInt=function(e,r){if(typeof e=="string"){if(!r)return this.reporter.error("String int or enum given, but no values map");if(!r.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=r[e]}if(typeof e!="number"&&!_h.isBuffer(e)){let o=e.toArray();!e.sign&&o[0]&128&&o.unshift(0),e=_h.from(o)}if(_h.isBuffer(e)){let o=e.length;e.length===0&&o++;let s=_h.alloc(o);return e.copy(s),e.length===0&&(s[0]=0),this._createEncoderBuffer(s)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let o=e;o>=256;o>>=8)n++;let i=new Array(n);for(let o=i.length-1;o>=0;o--)i[o]=e&255,e>>=8;return i[0]&128&&i.unshift(0),this._createEncoderBuffer(_h.from(i))};hu.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)};hu.prototype._use=function(e,r){return typeof e=="function"&&(e=e(r)),e._getEncoder("der").tree};hu.prototype._skipDefault=function(e,r,n){let i=this._baseState,o;if(i.default===null)return!1;let s=e.join();if(i.defaultBuffer===void 0&&(i.defaultBuffer=this._encodeValue(i.default,r,n).join()),s.length!==i.defaultBuffer.length)return!1;for(o=0;o<s.length;o++)if(s[o]!==i.defaultBuffer[o])return!1;return!0};function wFe(t,e,r,n){let i;if(t==="seqof"?t="seq":t==="setof"&&(t="set"),dN.tagByName.hasOwnProperty(t))i=dN.tagByName[t];else if(typeof t=="number"&&(t|0)===t)i=t;else return n.error("Unknown tag: "+t);return i>=31?n.error("Multi-octet tag encoding unsupported"):(e||(i|=32),i|=dN.tagClassByName[r||"universal"]<<6,i)}});var ofe=H((LOt,ife)=>{"use strict";_();var _Fe=Rt(),pN=hN();function mN(t){pN.call(this,t),this.enc="pem"}_Fe(mN,pN);ife.exports=mN;mN.prototype.encode=function(e,r){let i=pN.prototype.encode.call(this,e).toString("base64"),o=["-----BEGIN "+r.label+"-----"];for(let s=0;s<i.length;s+=64)o.push(i.slice(s,s+64));return o.push("-----END "+r.label+"-----"),o.join(`
`)}});var yN=H(afe=>{"use strict";_();var sfe=afe;sfe.der=hN();sfe.pem=ofe()});var bN=H((KOt,hfe)=>{"use strict";_();var xFe=Rt(),EFe=uN(),cfe=Vw().DecoderBuffer,ufe=M4(),ffe=A4();function lfe(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new Sc,this.tree._init(t.body)}hfe.exports=lfe;lfe.prototype.decode=function(e,r){return cfe.isDecoderBuffer(e)||(e=new cfe(e,r)),this.tree._decode(e,r)};function Sc(t){ufe.call(this,"der",t)}xFe(Sc,ufe);Sc.prototype._peekTag=function(e,r,n){if(e.isEmpty())return!1;let i=e.save(),o=gN(e,'Failed to peek tag: "'+r+'"');return e.isError(o)?o:(e.restore(i),o.tag===r||o.tagStr===r||o.tagStr+"of"===r||n)};Sc.prototype._decodeTag=function(e,r,n){let i=gN(e,'Failed to decode tag of "'+r+'"');if(e.isError(i))return i;let o=dfe(e,i.primitive,'Failed to get length of "'+r+'"');if(e.isError(o))return o;if(!n&&i.tag!==r&&i.tagStr!==r&&i.tagStr+"of"!==r)return e.error('Failed to match tag: "'+r+'"');if(i.primitive||o!==null)return e.skip(o,'Failed to match body of: "'+r+'"');let s=e.save(),a=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(a)?a:(o=e.offset-s.offset,e.restore(s),e.skip(o,'Failed to match body of: "'+r+'"'))};Sc.prototype._skipUntilEnd=function(e,r){for(;;){let n=gN(e,r);if(e.isError(n))return n;let i=dfe(e,n.primitive,r);if(e.isError(i))return i;let o;if(n.primitive||i!==null?o=e.skip(i):o=this._skipUntilEnd(e,r),e.isError(o))return o;if(n.tagStr==="end")break}};Sc.prototype._decodeList=function(e,r,n,i){let o=[];for(;!e.isEmpty();){let s=this._peekTag(e,"end");if(e.isError(s))return s;let a=n.decode(e,"der",i);if(e.isError(a)&&s)break;o.push(a)}return o};Sc.prototype._decodeStr=function(e,r){if(r==="bitstr"){let n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}else if(r==="bmpstr"){let n=e.raw();if(n.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let i="";for(let o=0;o<n.length/2;o++)i+=String.fromCharCode(n.readUInt16BE(o*2));return i}else if(r==="numstr"){let n=e.raw().toString("ascii");return this._isNumstr(n)?n:e.error("Decoding of string type: numstr unsupported characters")}else{if(r==="octstr")return e.raw();if(r==="objDesc")return e.raw();if(r==="printstr"){let n=e.raw().toString("ascii");return this._isPrintstr(n)?n:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(r)?e.raw().toString():e.error("Decoding of string type: "+r+" unsupported")}};Sc.prototype._decodeObjid=function(e,r,n){let i,o=[],s=0,a=0;for(;!e.isEmpty();)a=e.readUInt8(),s<<=7,s|=a&127,a&128||(o.push(s),s=0);a&128&&o.push(s);let u=o[0]/40|0,m=o[0]%40;if(n?i=o:i=[u,m].concat(o.slice(1)),r){let p=r[i.join(" ")];p===void 0&&(p=r[i.join(".")]),p!==void 0&&(i=p)}return i};Sc.prototype._decodeTime=function(e,r){let n=e.raw().toString(),i,o,s,a,u,m;if(r==="gentime")i=n.slice(0,4)|0,o=n.slice(4,6)|0,s=n.slice(6,8)|0,a=n.slice(8,10)|0,u=n.slice(10,12)|0,m=n.slice(12,14)|0;else if(r==="utctime")i=n.slice(0,2)|0,o=n.slice(2,4)|0,s=n.slice(4,6)|0,a=n.slice(6,8)|0,u=n.slice(8,10)|0,m=n.slice(10,12)|0,i<70?i=2e3+i:i=1900+i;else return e.error("Decoding "+r+" time is not supported yet");return Date.UTC(i,o-1,s,a,u,m,0)};Sc.prototype._decodeNull=function(){return null};Sc.prototype._decodeBool=function(e){let r=e.readUInt8();return e.isError(r)?r:r!==0};Sc.prototype._decodeInt=function(e,r){let n=e.raw(),i=new EFe(n);return r&&(i=r[i.toString(10)]||i),i};Sc.prototype._use=function(e,r){return typeof e=="function"&&(e=e(r)),e._getDecoder("der").tree};function gN(t,e){let r=t.readUInt8(e);if(t.isError(r))return r;let n=ffe.tagClass[r>>6],i=(r&32)===0;if((r&31)===31){let s=r;for(r=0;(s&128)===128;){if(s=t.readUInt8(e),t.isError(s))return s;r<<=7,r|=s&127}}else r&=31;let o=ffe.tag[r];return{cls:n,primitive:i,tag:r,tagStr:o}}function dfe(t,e,r){let n=t.readUInt8(r);if(t.isError(n))return n;if(!e&&n===128)return null;if(!(n&128))return n;let i=n&127;if(i>4)return t.error("length octect is too long");n=0;for(let o=0;o<i;o++){n<<=8;let s=t.readUInt8(r);if(t.isError(s))return s;n|=s}return n}});var mfe=H((GOt,pfe)=>{"use strict";_();var SFe=Rt(),MFe=x4().Buffer,vN=bN();function wN(t){vN.call(this,t),this.enc="pem"}SFe(wN,vN);pfe.exports=wN;wN.prototype.decode=function(e,r){let n=e.toString().split(/[\r\n]+/g),i=r.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,a=-1;for(let p=0;p<n.length;p++){let b=n[p].match(o);if(b!==null&&b[2]===i)if(s===-1){if(b[1]!=="BEGIN")break;s=p}else{if(b[1]!=="END")break;a=p;break}}if(s===-1||a===-1)throw new Error("PEM section not found for: "+i);let u=n.slice(s+1,a).join("");u.replace(/[^a-z0-9+/=]+/gi,"");let m=MFe.from(u,"base64");return vN.prototype.decode.call(this,m,r)}});var _N=H(gfe=>{"use strict";_();var yfe=gfe;yfe.der=bN();yfe.pem=mfe()});var vfe=H(bfe=>{"use strict";_();var AFe=yN(),PFe=_N(),TFe=Rt(),RFe=bfe;RFe.define=function(e,r){return new Hw(e,r)};function Hw(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}Hw.prototype._createNamed=function(e){let r=this.name;function n(i){this._initNamed(i,r)}return TFe(n,e),n.prototype._initNamed=function(o,s){e.call(this,o,s)},new n(this)};Hw.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(PFe[e])),this.decoders[e]};Hw.prototype.decode=function(e,r,n){return this._getDecoder(r).decode(e,n)};Hw.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(AFe[e])),this.encoders[e]};Hw.prototype.encode=function(e,r,n){return this._getEncoder(r).encode(e,n)}});var _fe=H(wfe=>{"use strict";_();var P4=wfe;P4.Reporter=E4().Reporter;P4.DecoderBuffer=Vw().DecoderBuffer;P4.EncoderBuffer=Vw().EncoderBuffer;P4.Node=M4()});var Sfe=H(Efe=>{"use strict";_();var xfe=Efe;xfe._reverse=function(e){let r={};return Object.keys(e).forEach(function(n){(n|0)==n&&(n=n|0);let i=e[n];r[i]=n}),r};xfe.der=A4()});var xN=H(Mfe=>{"use strict";_();var Zw=Mfe;Zw.bignum=uN();Zw.define=vfe().define;Zw.base=_fe();Zw.constants=Sfe();Zw.decoders=_N();Zw.encoders=yN()});var Rfe=H((iBt,Tfe)=>{"use strict";_();var pu=xN(),Afe=pu.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),IFe=pu.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),EN=pu.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),kFe=pu.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(EN),this.key("subjectPublicKey").bitstr())}),OFe=pu.define("RelativeDistinguishedName",function(){this.setof(IFe)}),BFe=pu.define("RDNSequence",function(){this.seqof(OFe)}),Pfe=pu.define("Name",function(){this.choice({rdnSequence:this.use(BFe)})}),DFe=pu.define("Validity",function(){this.seq().obj(this.key("notBefore").use(Afe),this.key("notAfter").use(Afe))}),CFe=pu.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),NFe=pu.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(EN),this.key("issuer").use(Pfe),this.key("validity").use(DFe),this.key("subject").use(Pfe),this.key("subjectPublicKeyInfo").use(kFe),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(CFe).optional())}),jFe=pu.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(NFe),this.key("signatureAlgorithm").use(EN),this.key("signatureValue").bitstr())});Tfe.exports=jFe});var kfe=H(yu=>{"use strict";_();var mu=xN();yu.certificate=Rfe();var qFe=mu.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});yu.RSAPrivateKey=qFe;var $Fe=mu.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});yu.RSAPublicKey=$Fe;var LFe=mu.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(Ife),this.key("subjectPublicKey").bitstr())});yu.PublicKey=LFe;var Ife=mu.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),UFe=mu.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(Ife),this.key("subjectPrivateKey").octstr())});yu.PrivateKey=UFe;var FFe=mu.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});yu.EncryptedPrivateKey=FFe;var zFe=mu.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});yu.DSAPrivateKey=zFe;yu.DSAparam=mu.define("DSAparam",function(){this.int()});var KFe=mu.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(WFe),this.key("publicKey").optional().explicit(1).bitstr())});yu.ECPrivateKey=KFe;var WFe=mu.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});yu.signature=mu.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})});var Ofe=H((cBt,GFe)=>{GFe.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}});var Dfe=H((fBt,Bfe)=>{_();var VFe=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,HFe=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,ZFe=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,JFe=dE(),YFe=C5(),T4=Wr().Buffer;Bfe.exports=function(t,e){var r=t.toString(),n=r.match(VFe),i;if(n){var s="aes"+n[1],a=T4.from(n[2],"hex"),u=T4.from(n[3].replace(/[\r\n]/g,""),"base64"),m=JFe(e,a.slice(0,8),parseInt(n[1],10)).key,p=[],b=YFe.createDecipheriv(s,m,a);p.push(b.update(u)),p.push(b.final()),i=T4.concat(p)}else{var o=r.match(ZFe);i=T4.from(o[2].replace(/[\r\n]/g,""),"base64")}var A=r.match(HFe)[1];return{tag:A,data:i}}});var AE=H((lBt,Nfe)=>{_();var Va=kfe(),QFe=Ofe(),XFe=Dfe(),eze=C5(),tze=qD(),SN=Wr().Buffer;Nfe.exports=Cfe;function Cfe(t){var e;typeof t=="object"&&!SN.isBuffer(t)&&(e=t.passphrase,t=t.key),typeof t=="string"&&(t=SN.from(t));var r=XFe(t,e),n=r.tag,i=r.data,o,s;switch(n){case"CERTIFICATE":s=Va.certificate.decode(i,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(s||(s=Va.PublicKey.decode(i,"der")),o=s.algorithm.algorithm.join("."),o){case"1.2.840.113549.1.1.1":return Va.RSAPublicKey.decode(s.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return s.subjectPrivateKey=s.subjectPublicKey,{type:"ec",data:s};case"1.2.840.10040.4.1":return s.algorithm.params.pub_key=Va.DSAparam.decode(s.subjectPublicKey.data,"der"),{type:"dsa",data:s.algorithm.params};default:throw new Error("unknown key id "+o)}case"ENCRYPTED PRIVATE KEY":i=Va.EncryptedPrivateKey.decode(i,"der"),i=rze(i,e);case"PRIVATE KEY":switch(s=Va.PrivateKey.decode(i,"der"),o=s.algorithm.algorithm.join("."),o){case"1.2.840.113549.1.1.1":return Va.RSAPrivateKey.decode(s.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:s.algorithm.curve,privateKey:Va.ECPrivateKey.decode(s.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return s.algorithm.params.priv_key=Va.DSAparam.decode(s.subjectPrivateKey,"der"),{type:"dsa",params:s.algorithm.params};default:throw new Error("unknown key id "+o)}case"RSA PUBLIC KEY":return Va.RSAPublicKey.decode(i,"der");case"RSA PRIVATE KEY":return Va.RSAPrivateKey.decode(i,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:Va.DSAPrivateKey.decode(i,"der")};case"EC PRIVATE KEY":return i=Va.ECPrivateKey.decode(i,"der"),{curve:i.parameters.value,privateKey:i.privateKey};default:throw new Error("unknown key type "+n)}}Cfe.signature=Va.signature;function rze(t,e){var r=t.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),i=QFe[t.algorithm.decrypt.cipher.algo.join(".")],o=t.algorithm.decrypt.cipher.iv,s=t.subjectPrivateKey,a=parseInt(i.split("-")[1],10)/8,u=tze.pbkdf2Sync(e,r,n,a,"sha1"),m=eze.createDecipheriv(i,u,o),p=[];return p.push(m.update(s)),p.push(m.final()),SN.concat(p)}});var MN=H((hBt,nze)=>{nze.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}});var $fe=H((pBt,I4)=>{"use strict";_();var Zs=U5().Buffer,Qy=TD(),ize=n4(),oze=w4().ec,R4=r4(),sze=AE(),aze=MN(),cze=1;function fze(t,e,r,n,i){var o=sze(e);if(o.curve){if(n!=="ecdsa"&&n!=="ecdsa/rsa")throw new Error("wrong private key type");return uze(t,o)}else if(o.type==="dsa"){if(n!=="dsa")throw new Error("wrong private key type");return lze(t,o,r)}if(n!=="rsa"&&n!=="ecdsa/rsa")throw new Error("wrong private key type");if(e.padding!==void 0&&e.padding!==cze)throw new Error("illegal or unsupported padding mode");t=Zs.concat([i,t]);for(var s=o.modulus.byteLength(),a=[0,1];t.length+a.length+1<s;)a.push(255);a.push(0);for(var u=-1;++u<t.length;)a.push(t[u]);var m=ize(a,o);return m}function uze(t,e){var r=aze[e.curve.join(".")];if(!r)throw new Error("unknown curve "+e.curve.join("."));var n=new oze(r),i=n.keyFromPrivate(e.privateKey),o=i.sign(t);return Zs.from(o.toDER())}function lze(t,e,r){for(var n=e.params.priv_key,i=e.params.p,o=e.params.q,s=e.params.g,a=new R4(0),u,m=AN(t,o).mod(o),p=!1,b=jfe(n,o,t,r);p===!1;)u=qfe(o,b,r),a=pze(s,u,i,o),p=u.invm(o).imul(m.add(n.mul(a))).mod(o),p.cmpn(0)===0&&(p=!1,a=new R4(0));return dze(a,p)}function dze(t,e){t=t.toArray(),e=e.toArray(),t[0]&128&&(t=[0].concat(t)),e[0]&128&&(e=[0].concat(e));var r=t.length+e.length+4,n=[48,r,2,t.length];return n=n.concat(t,[2,e.length],e),Zs.from(n)}function jfe(t,e,r,n){if(t=Zs.from(t.toArray()),t.length<e.byteLength()){var i=Zs.alloc(e.byteLength()-t.length);t=Zs.concat([i,t])}var o=r.length,s=hze(r,e),a=Zs.alloc(o);a.fill(1);var u=Zs.alloc(o);return u=Qy(n,u).update(a).update(Zs.from([0])).update(t).update(s).digest(),a=Qy(n,u).update(a).digest(),u=Qy(n,u).update(a).update(Zs.from([1])).update(t).update(s).digest(),a=Qy(n,u).update(a).digest(),{k:u,v:a}}function AN(t,e){var r=new R4(t),n=(t.length<<3)-e.bitLength();return n>0&&r.ishrn(n),r}function hze(t,e){t=AN(t,e),t=t.mod(e);var r=Zs.from(t.toArray());if(r.length<e.byteLength()){var n=Zs.alloc(e.byteLength()-r.length);r=Zs.concat([n,r])}return r}function qfe(t,e,r){var n,i;do{for(n=Zs.alloc(0);n.length*8<t.bitLength();)e.v=Qy(r,e.k).update(e.v).digest(),n=Zs.concat([n,e.v]);i=AN(n,t),e.k=Qy(r,e.k).update(e.v).update(Zs.from([0])).digest(),e.v=Qy(r,e.k).update(e.v).digest()}while(i.cmp(t)!==-1);return i}function pze(t,e,r,n){return t.toRed(R4.mont(r)).redPow(e).fromRed().mod(n)}I4.exports=fze;I4.exports.getKey=jfe;I4.exports.makeKey=qfe});var zfe=H((yBt,Ffe)=>{"use strict";_();var PN=U5().Buffer,PE=r4(),mze=w4().ec,Ufe=AE(),yze=MN();function gze(t,e,r,n,i){var o=Ufe(r);if(o.type==="ec"){if(n!=="ecdsa"&&n!=="ecdsa/rsa")throw new Error("wrong public key type");return bze(t,e,o)}else if(o.type==="dsa"){if(n!=="dsa")throw new Error("wrong public key type");return vze(t,e,o)}if(n!=="rsa"&&n!=="ecdsa/rsa")throw new Error("wrong public key type");e=PN.concat([i,e]);for(var s=o.modulus.byteLength(),a=[1],u=0;e.length+a.length+2<s;)a.push(255),u+=1;a.push(0);for(var m=-1;++m<e.length;)a.push(e[m]);a=PN.from(a);var p=PE.mont(o.modulus);t=new PE(t).toRed(p),t=t.redPow(new PE(o.publicExponent)),t=PN.from(t.fromRed().toArray());var b=u<8?1:0;for(s=Math.min(t.length,a.length),t.length!==a.length&&(b=1),m=-1;++m<s;)b|=t[m]^a[m];return b===0}function bze(t,e,r){var n=yze[r.data.algorithm.curve.join(".")];if(!n)throw new Error("unknown curve "+r.data.algorithm.curve.join("."));var i=new mze(n),o=r.data.subjectPrivateKey.data;return i.verify(e,t,o)}function vze(t,e,r){var n=r.data.p,i=r.data.q,o=r.data.g,s=r.data.pub_key,a=Ufe.signature.decode(t,"der"),u=a.s,m=a.r;Lfe(u,i),Lfe(m,i);var p=PE.mont(n),b=u.invm(i),A=o.toRed(p).redPow(new PE(e).mul(b).mod(i)).fromRed().mul(s.toRed(p).redPow(m.mul(b).mod(i)).fromRed()).mod(n).mod(i);return A.cmp(m)===0}function Lfe(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=0)throw new Error("invalid sig")}Ffe.exports=gze});var Zfe=H((bBt,Hfe)=>{"use strict";_();var k4=U5().Buffer,Gfe=vw(),O4=vae(),Vfe=Rt(),wze=$fe(),_ze=zfe(),Xy=RD();Object.keys(Xy).forEach(function(t){Xy[t].id=k4.from(Xy[t].id,"hex"),Xy[t.toLowerCase()]=Xy[t]});function TE(t){O4.Writable.call(this);var e=Xy[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=Gfe(e.hash),this._tag=e.id,this._signType=e.sign}Vfe(TE,O4.Writable);TE.prototype._write=function(e,r,n){this._hash.update(e),n()};TE.prototype.update=function(e,r){return this._hash.update(typeof e=="string"?k4.from(e,r):e),this};TE.prototype.sign=function(e,r){this.end();var n=this._hash.digest(),i=wze(n,e,this._hashType,this._signType,this._tag);return r?i.toString(r):i};function RE(t){O4.Writable.call(this);var e=Xy[t];if(!e)throw new Error("Unknown message digest");this._hash=Gfe(e.hash),this._tag=e.id,this._signType=e.sign}Vfe(RE,O4.Writable);RE.prototype._write=function(e,r,n){this._hash.update(e),n()};RE.prototype.update=function(e,r){return this._hash.update(typeof e=="string"?k4.from(e,r):e),this};RE.prototype.verify=function(e,r,n){var i=typeof r=="string"?k4.from(r,n):r;this.end();var o=this._hash.digest();return _ze(i,o,e,this._signType,this._tag)};function Kfe(t){return new TE(t)}function Wfe(t){return new RE(t)}Hfe.exports={Sign:Kfe,Verify:Wfe,createSign:Kfe,createVerify:Wfe}});var Yfe=H((Jfe,TN)=>{_();(function(t,e){"use strict";function r(E,c){if(!E)throw new Error(c||"Assertion failed")}function n(E,c){E.super_=c;var l=function(){};l.prototype=c.prototype,E.prototype=new l,E.prototype.constructor=E}function i(E,c,l){if(i.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((c==="le"||c==="be")&&(l=c,c=10),this._init(E||0,c||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ut().Buffer}catch{}i.isBN=function(c){return c instanceof i?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===i.wordSize&&Array.isArray(c.words)},i.max=function(c,l){return c.cmp(l)>0?c:l},i.min=function(c,l){return c.cmp(l)<0?c:l},i.prototype._init=function(c,l,y){if(typeof c=="number")return this._initNumber(c,l,y);if(typeof c=="object")return this._initArray(c,l,y);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),c=c.toString().replace(/\s+/g,"");var d=0;c[0]==="-"&&(d++,this.negative=1),d<c.length&&(l===16?this._parseHex(c,d,y):(this._parseBase(c,l,d),y==="le"&&this._initArray(this.toArray(),l,y)))},i.prototype._initNumber=function(c,l,y){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(r(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),l,y)},i.prototype._initArray=function(c,l,y){if(r(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var h,v,x=0;if(y==="be")for(d=c.length-1,h=0;d>=0;d-=3)v=c[d]|c[d-1]<<8|c[d-2]<<16,this.words[h]|=v<<x&67108863,this.words[h+1]=v>>>26-x&67108863,x+=24,x>=26&&(x-=26,h++);else if(y==="le")for(d=0,h=0;d<c.length;d+=3)v=c[d]|c[d+1]<<8|c[d+2]<<16,this.words[h]|=v<<x&67108863,this.words[h+1]=v>>>26-x&67108863,x+=24,x>=26&&(x-=26,h++);return this.strip()};function s(E,c){var l=E.charCodeAt(c);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function a(E,c,l){var y=s(E,l);return l-1>=c&&(y|=s(E,l-1)<<4),y}i.prototype._parseHex=function(c,l,y){this.length=Math.ceil((c.length-l)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var h=0,v=0,x;if(y==="be")for(d=c.length-1;d>=l;d-=2)x=a(c,l,d)<<h,this.words[v]|=x&67108863,h>=18?(h-=18,v+=1,this.words[v]|=x>>>26):h+=8;else{var g=c.length-l;for(d=g%2===0?l+1:l;d<c.length;d+=2)x=a(c,l,d)<<h,this.words[v]|=x&67108863,h>=18?(h-=18,v+=1,this.words[v]|=x>>>26):h+=8}this.strip()};function u(E,c,l,y){for(var d=0,h=Math.min(E.length,l),v=c;v<h;v++){var x=E.charCodeAt(v)-48;d*=y,x>=49?d+=x-49+10:x>=17?d+=x-17+10:d+=x}return d}i.prototype._parseBase=function(c,l,y){this.words=[0],this.length=1;for(var d=0,h=1;h<=67108863;h*=l)d++;d--,h=h/l|0;for(var v=c.length-y,x=v%d,g=Math.min(v,v-x)+y,f=0,w=y;w<g;w+=d)f=u(c,w,w+d,l),this.imuln(h),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(x!==0){var D=1;for(f=u(c,w,c.length,l),w=0;w<x;w++)D*=l;this.imuln(D),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this.strip()},i.prototype.copy=function(c){c.words=new Array(this.length);for(var l=0;l<this.length;l++)c.words[l]=this.words[l];c.length=this.length,c.negative=this.negative,c.red=this.red},i.prototype.clone=function(){var c=new i(null);return this.copy(c),c},i.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(c,l){c=c||10,l=l|0||1;var y;if(c===16||c==="hex"){y="";for(var d=0,h=0,v=0;v<this.length;v++){var x=this.words[v],g=((x<<d|h)&16777215).toString(16);h=x>>>24-d&16777215,h!==0||v!==this.length-1?y=m[6-g.length]+g+y:y=g+y,d+=2,d>=26&&(d-=26,v--)}for(h!==0&&(y=h.toString(16)+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(c===(c|0)&&c>=2&&c<=36){var f=p[c],w=b[c];y="";var D=this.clone();for(D.negative=0;!D.isZero();){var T=D.modn(w).toString(c);D=D.idivn(w),D.isZero()?y=T+y:y=m[f-T.length]+T+y}for(this.isZero()&&(y="0"+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(c,l){return r(typeof o<"u"),this.toArrayLike(o,c,l)},i.prototype.toArray=function(c,l){return this.toArrayLike(Array,c,l)},i.prototype.toArrayLike=function(c,l,y){var d=this.byteLength(),h=y||Math.max(1,d);r(d<=h,"byte array longer than desired length"),r(h>0,"Requested array length <= 0"),this.strip();var v=l==="le",x=new c(h),g,f,w=this.clone();if(v){for(f=0;!w.isZero();f++)g=w.andln(255),w.iushrn(8),x[f]=g;for(;f<h;f++)x[f]=0}else{for(f=0;f<h-d;f++)x[f]=0;for(f=0;!w.isZero();f++)g=w.andln(255),w.iushrn(8),x[h-f-1]=g}return x},Math.clz32?i.prototype._countBits=function(c){return 32-Math.clz32(c)}:i.prototype._countBits=function(c){var l=c,y=0;return l>=4096&&(y+=13,l>>>=13),l>=64&&(y+=7,l>>>=7),l>=8&&(y+=4,l>>>=4),l>=2&&(y+=2,l>>>=2),y+l},i.prototype._zeroBits=function(c){if(c===0)return 26;var l=c,y=0;return l&8191||(y+=13,l>>>=13),l&127||(y+=7,l>>>=7),l&15||(y+=4,l>>>=4),l&3||(y+=2,l>>>=2),l&1||y++,y},i.prototype.bitLength=function(){var c=this.words[this.length-1],l=this._countBits(c);return(this.length-1)*26+l};function A(E){for(var c=new Array(E.bitLength()),l=0;l<c.length;l++){var y=l/26|0,d=l%26;c[l]=(E.words[y]&1<<d)>>>d}return c}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,l=0;l<this.length;l++){var y=this._zeroBits(this.words[l]);if(c+=y,y!==26)break}return c},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},i.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var l=0;l<c.length;l++)this.words[l]=this.words[l]|c.words[l];return this.strip()},i.prototype.ior=function(c){return r((this.negative|c.negative)===0),this.iuor(c)},i.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},i.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},i.prototype.iuand=function(c){var l;this.length>c.length?l=c:l=this;for(var y=0;y<l.length;y++)this.words[y]=this.words[y]&c.words[y];return this.length=l.length,this.strip()},i.prototype.iand=function(c){return r((this.negative|c.negative)===0),this.iuand(c)},i.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},i.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},i.prototype.iuxor=function(c){var l,y;this.length>c.length?(l=this,y=c):(l=c,y=this);for(var d=0;d<y.length;d++)this.words[d]=l.words[d]^y.words[d];if(this!==l)for(;d<l.length;d++)this.words[d]=l.words[d];return this.length=l.length,this.strip()},i.prototype.ixor=function(c){return r((this.negative|c.negative)===0),this.iuxor(c)},i.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},i.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},i.prototype.inotn=function(c){r(typeof c=="number"&&c>=0);var l=Math.ceil(c/26)|0,y=c%26;this._expand(l),y>0&&l--;for(var d=0;d<l;d++)this.words[d]=~this.words[d]&67108863;return y>0&&(this.words[d]=~this.words[d]&67108863>>26-y),this.strip()},i.prototype.notn=function(c){return this.clone().inotn(c)},i.prototype.setn=function(c,l){r(typeof c=="number"&&c>=0);var y=c/26|0,d=c%26;return this._expand(y+1),l?this.words[y]=this.words[y]|1<<d:this.words[y]=this.words[y]&~(1<<d),this.strip()},i.prototype.iadd=function(c){var l;if(this.negative!==0&&c.negative===0)return this.negative=0,l=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,l=this.isub(c),c.negative=1,l._normSign();var y,d;this.length>c.length?(y=this,d=c):(y=c,d=this);for(var h=0,v=0;v<d.length;v++)l=(y.words[v]|0)+(d.words[v]|0)+h,this.words[v]=l&67108863,h=l>>>26;for(;h!==0&&v<y.length;v++)l=(y.words[v]|0)+h,this.words[v]=l&67108863,h=l>>>26;if(this.length=y.length,h!==0)this.words[this.length]=h,this.length++;else if(y!==this)for(;v<y.length;v++)this.words[v]=y.words[v];return this},i.prototype.add=function(c){var l;return c.negative!==0&&this.negative===0?(c.negative=0,l=this.sub(c),c.negative^=1,l):c.negative===0&&this.negative!==0?(this.negative=0,l=c.sub(this),this.negative=1,l):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},i.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var l=this.iadd(c);return c.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var y=this.cmp(c);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var d,h;y>0?(d=this,h=c):(d=c,h=this);for(var v=0,x=0;x<h.length;x++)l=(d.words[x]|0)-(h.words[x]|0)+v,v=l>>26,this.words[x]=l&67108863;for(;v!==0&&x<d.length;x++)l=(d.words[x]|0)+v,v=l>>26,this.words[x]=l&67108863;if(v===0&&x<d.length&&d!==this)for(;x<d.length;x++)this.words[x]=d.words[x];return this.length=Math.max(this.length,x),d!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(c){return this.clone().isub(c)};function M(E,c,l){l.negative=c.negative^E.negative;var y=E.length+c.length|0;l.length=y,y=y-1|0;var d=E.words[0]|0,h=c.words[0]|0,v=d*h,x=v&67108863,g=v/67108864|0;l.words[0]=x;for(var f=1;f<y;f++){for(var w=g>>>26,D=g&67108863,T=Math.min(f,c.length-1),C=Math.max(0,f-E.length+1);C<=T;C++){var z=f-C|0;d=E.words[z]|0,h=c.words[C]|0,v=d*h+D,w+=v/67108864|0,D=v&67108863}l.words[f]=D|0,g=w|0}return g!==0?l.words[f]=g|0:l.length--,l.strip()}var S=function(c,l,y){var d=c.words,h=l.words,v=y.words,x=0,g,f,w,D=d[0]|0,T=D&8191,C=D>>>13,z=d[1]|0,G=z&8191,V=z>>>13,Z=d[2]|0,J=Z&8191,X=Z>>>13,se=d[3]|0,Q=se&8191,te=se>>>13,de=d[4]|0,ie=de&8191,ae=de>>>13,fe=d[5]|0,oe=fe&8191,ce=fe>>>13,Ke=d[6]|0,pe=Ke&8191,Me=Ke>>>13,it=d[7]|0,we=it&8191,Ae=it>>>13,er=d[8]|0,me=er&8191,he=er>>>13,mt=d[9]|0,ye=mt&8191,le=mt>>>13,kt=h[0]|0,_e=kt&8191,Ee=kt>>>13,Ht=h[1]|0,Pe=Ht&8191,Se=Ht>>>13,Pn=h[2]|0,Te=Pn&8191,Ie=Pn>>>13,_i=h[3]|0,Re=_i&8191,Ce=_i>>>13,Tn=h[4]|0,Ne=Tn&8191,Oe=Tn>>>13,xi=h[5]|0,ke=xi&8191,Be=xi>>>13,Ei=h[6]|0,De=Ei&8191,je=Ei>>>13,si=h[7]|0,ee=si&8191,Y=si>>>13,ue=h[8]|0,re=ue&8191,ne=ue>>>13,ze=h[9]|0,ge=ze&8191,ve=ze>>>13;y.negative=c.negative^l.negative,y.length=19,g=Math.imul(T,_e),f=Math.imul(T,Ee),f=f+Math.imul(C,_e)|0,w=Math.imul(C,Ee);var gt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(gt>>>26)|0,gt&=67108863,g=Math.imul(G,_e),f=Math.imul(G,Ee),f=f+Math.imul(V,_e)|0,w=Math.imul(V,Ee),g=g+Math.imul(T,Pe)|0,f=f+Math.imul(T,Se)|0,f=f+Math.imul(C,Pe)|0,w=w+Math.imul(C,Se)|0;var ot=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ot>>>26)|0,ot&=67108863,g=Math.imul(J,_e),f=Math.imul(J,Ee),f=f+Math.imul(X,_e)|0,w=Math.imul(X,Ee),g=g+Math.imul(G,Pe)|0,f=f+Math.imul(G,Se)|0,f=f+Math.imul(V,Pe)|0,w=w+Math.imul(V,Se)|0,g=g+Math.imul(T,Te)|0,f=f+Math.imul(T,Ie)|0,f=f+Math.imul(C,Te)|0,w=w+Math.imul(C,Ie)|0;var Ge=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,g=Math.imul(Q,_e),f=Math.imul(Q,Ee),f=f+Math.imul(te,_e)|0,w=Math.imul(te,Ee),g=g+Math.imul(J,Pe)|0,f=f+Math.imul(J,Se)|0,f=f+Math.imul(X,Pe)|0,w=w+Math.imul(X,Se)|0,g=g+Math.imul(G,Te)|0,f=f+Math.imul(G,Ie)|0,f=f+Math.imul(V,Te)|0,w=w+Math.imul(V,Ie)|0,g=g+Math.imul(T,Re)|0,f=f+Math.imul(T,Ce)|0,f=f+Math.imul(C,Re)|0,w=w+Math.imul(C,Ce)|0;var Pt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,g=Math.imul(ie,_e),f=Math.imul(ie,Ee),f=f+Math.imul(ae,_e)|0,w=Math.imul(ae,Ee),g=g+Math.imul(Q,Pe)|0,f=f+Math.imul(Q,Se)|0,f=f+Math.imul(te,Pe)|0,w=w+Math.imul(te,Se)|0,g=g+Math.imul(J,Te)|0,f=f+Math.imul(J,Ie)|0,f=f+Math.imul(X,Te)|0,w=w+Math.imul(X,Ie)|0,g=g+Math.imul(G,Re)|0,f=f+Math.imul(G,Ce)|0,f=f+Math.imul(V,Re)|0,w=w+Math.imul(V,Ce)|0,g=g+Math.imul(T,Ne)|0,f=f+Math.imul(T,Oe)|0,f=f+Math.imul(C,Ne)|0,w=w+Math.imul(C,Oe)|0;var Lt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,g=Math.imul(oe,_e),f=Math.imul(oe,Ee),f=f+Math.imul(ce,_e)|0,w=Math.imul(ce,Ee),g=g+Math.imul(ie,Pe)|0,f=f+Math.imul(ie,Se)|0,f=f+Math.imul(ae,Pe)|0,w=w+Math.imul(ae,Se)|0,g=g+Math.imul(Q,Te)|0,f=f+Math.imul(Q,Ie)|0,f=f+Math.imul(te,Te)|0,w=w+Math.imul(te,Ie)|0,g=g+Math.imul(J,Re)|0,f=f+Math.imul(J,Ce)|0,f=f+Math.imul(X,Re)|0,w=w+Math.imul(X,Ce)|0,g=g+Math.imul(G,Ne)|0,f=f+Math.imul(G,Oe)|0,f=f+Math.imul(V,Ne)|0,w=w+Math.imul(V,Oe)|0,g=g+Math.imul(T,ke)|0,f=f+Math.imul(T,Be)|0,f=f+Math.imul(C,ke)|0,w=w+Math.imul(C,Be)|0;var St=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(St>>>26)|0,St&=67108863,g=Math.imul(pe,_e),f=Math.imul(pe,Ee),f=f+Math.imul(Me,_e)|0,w=Math.imul(Me,Ee),g=g+Math.imul(oe,Pe)|0,f=f+Math.imul(oe,Se)|0,f=f+Math.imul(ce,Pe)|0,w=w+Math.imul(ce,Se)|0,g=g+Math.imul(ie,Te)|0,f=f+Math.imul(ie,Ie)|0,f=f+Math.imul(ae,Te)|0,w=w+Math.imul(ae,Ie)|0,g=g+Math.imul(Q,Re)|0,f=f+Math.imul(Q,Ce)|0,f=f+Math.imul(te,Re)|0,w=w+Math.imul(te,Ce)|0,g=g+Math.imul(J,Ne)|0,f=f+Math.imul(J,Oe)|0,f=f+Math.imul(X,Ne)|0,w=w+Math.imul(X,Oe)|0,g=g+Math.imul(G,ke)|0,f=f+Math.imul(G,Be)|0,f=f+Math.imul(V,ke)|0,w=w+Math.imul(V,Be)|0,g=g+Math.imul(T,De)|0,f=f+Math.imul(T,je)|0,f=f+Math.imul(C,De)|0,w=w+Math.imul(C,je)|0;var pt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(pt>>>26)|0,pt&=67108863,g=Math.imul(we,_e),f=Math.imul(we,Ee),f=f+Math.imul(Ae,_e)|0,w=Math.imul(Ae,Ee),g=g+Math.imul(pe,Pe)|0,f=f+Math.imul(pe,Se)|0,f=f+Math.imul(Me,Pe)|0,w=w+Math.imul(Me,Se)|0,g=g+Math.imul(oe,Te)|0,f=f+Math.imul(oe,Ie)|0,f=f+Math.imul(ce,Te)|0,w=w+Math.imul(ce,Ie)|0,g=g+Math.imul(ie,Re)|0,f=f+Math.imul(ie,Ce)|0,f=f+Math.imul(ae,Re)|0,w=w+Math.imul(ae,Ce)|0,g=g+Math.imul(Q,Ne)|0,f=f+Math.imul(Q,Oe)|0,f=f+Math.imul(te,Ne)|0,w=w+Math.imul(te,Oe)|0,g=g+Math.imul(J,ke)|0,f=f+Math.imul(J,Be)|0,f=f+Math.imul(X,ke)|0,w=w+Math.imul(X,Be)|0,g=g+Math.imul(G,De)|0,f=f+Math.imul(G,je)|0,f=f+Math.imul(V,De)|0,w=w+Math.imul(V,je)|0,g=g+Math.imul(T,ee)|0,f=f+Math.imul(T,Y)|0,f=f+Math.imul(C,ee)|0,w=w+Math.imul(C,Y)|0;var Tt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,g=Math.imul(me,_e),f=Math.imul(me,Ee),f=f+Math.imul(he,_e)|0,w=Math.imul(he,Ee),g=g+Math.imul(we,Pe)|0,f=f+Math.imul(we,Se)|0,f=f+Math.imul(Ae,Pe)|0,w=w+Math.imul(Ae,Se)|0,g=g+Math.imul(pe,Te)|0,f=f+Math.imul(pe,Ie)|0,f=f+Math.imul(Me,Te)|0,w=w+Math.imul(Me,Ie)|0,g=g+Math.imul(oe,Re)|0,f=f+Math.imul(oe,Ce)|0,f=f+Math.imul(ce,Re)|0,w=w+Math.imul(ce,Ce)|0,g=g+Math.imul(ie,Ne)|0,f=f+Math.imul(ie,Oe)|0,f=f+Math.imul(ae,Ne)|0,w=w+Math.imul(ae,Oe)|0,g=g+Math.imul(Q,ke)|0,f=f+Math.imul(Q,Be)|0,f=f+Math.imul(te,ke)|0,w=w+Math.imul(te,Be)|0,g=g+Math.imul(J,De)|0,f=f+Math.imul(J,je)|0,f=f+Math.imul(X,De)|0,w=w+Math.imul(X,je)|0,g=g+Math.imul(G,ee)|0,f=f+Math.imul(G,Y)|0,f=f+Math.imul(V,ee)|0,w=w+Math.imul(V,Y)|0,g=g+Math.imul(T,re)|0,f=f+Math.imul(T,ne)|0,f=f+Math.imul(C,re)|0,w=w+Math.imul(C,ne)|0;var vt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(vt>>>26)|0,vt&=67108863,g=Math.imul(ye,_e),f=Math.imul(ye,Ee),f=f+Math.imul(le,_e)|0,w=Math.imul(le,Ee),g=g+Math.imul(me,Pe)|0,f=f+Math.imul(me,Se)|0,f=f+Math.imul(he,Pe)|0,w=w+Math.imul(he,Se)|0,g=g+Math.imul(we,Te)|0,f=f+Math.imul(we,Ie)|0,f=f+Math.imul(Ae,Te)|0,w=w+Math.imul(Ae,Ie)|0,g=g+Math.imul(pe,Re)|0,f=f+Math.imul(pe,Ce)|0,f=f+Math.imul(Me,Re)|0,w=w+Math.imul(Me,Ce)|0,g=g+Math.imul(oe,Ne)|0,f=f+Math.imul(oe,Oe)|0,f=f+Math.imul(ce,Ne)|0,w=w+Math.imul(ce,Oe)|0,g=g+Math.imul(ie,ke)|0,f=f+Math.imul(ie,Be)|0,f=f+Math.imul(ae,ke)|0,w=w+Math.imul(ae,Be)|0,g=g+Math.imul(Q,De)|0,f=f+Math.imul(Q,je)|0,f=f+Math.imul(te,De)|0,w=w+Math.imul(te,je)|0,g=g+Math.imul(J,ee)|0,f=f+Math.imul(J,Y)|0,f=f+Math.imul(X,ee)|0,w=w+Math.imul(X,Y)|0,g=g+Math.imul(G,re)|0,f=f+Math.imul(G,ne)|0,f=f+Math.imul(V,re)|0,w=w+Math.imul(V,ne)|0,g=g+Math.imul(T,ge)|0,f=f+Math.imul(T,ve)|0,f=f+Math.imul(C,ge)|0,w=w+Math.imul(C,ve)|0;var zr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(zr>>>26)|0,zr&=67108863,g=Math.imul(ye,Pe),f=Math.imul(ye,Se),f=f+Math.imul(le,Pe)|0,w=Math.imul(le,Se),g=g+Math.imul(me,Te)|0,f=f+Math.imul(me,Ie)|0,f=f+Math.imul(he,Te)|0,w=w+Math.imul(he,Ie)|0,g=g+Math.imul(we,Re)|0,f=f+Math.imul(we,Ce)|0,f=f+Math.imul(Ae,Re)|0,w=w+Math.imul(Ae,Ce)|0,g=g+Math.imul(pe,Ne)|0,f=f+Math.imul(pe,Oe)|0,f=f+Math.imul(Me,Ne)|0,w=w+Math.imul(Me,Oe)|0,g=g+Math.imul(oe,ke)|0,f=f+Math.imul(oe,Be)|0,f=f+Math.imul(ce,ke)|0,w=w+Math.imul(ce,Be)|0,g=g+Math.imul(ie,De)|0,f=f+Math.imul(ie,je)|0,f=f+Math.imul(ae,De)|0,w=w+Math.imul(ae,je)|0,g=g+Math.imul(Q,ee)|0,f=f+Math.imul(Q,Y)|0,f=f+Math.imul(te,ee)|0,w=w+Math.imul(te,Y)|0,g=g+Math.imul(J,re)|0,f=f+Math.imul(J,ne)|0,f=f+Math.imul(X,re)|0,w=w+Math.imul(X,ne)|0,g=g+Math.imul(G,ge)|0,f=f+Math.imul(G,ve)|0,f=f+Math.imul(V,ge)|0,w=w+Math.imul(V,ve)|0;var ir=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ir>>>26)|0,ir&=67108863,g=Math.imul(ye,Te),f=Math.imul(ye,Ie),f=f+Math.imul(le,Te)|0,w=Math.imul(le,Ie),g=g+Math.imul(me,Re)|0,f=f+Math.imul(me,Ce)|0,f=f+Math.imul(he,Re)|0,w=w+Math.imul(he,Ce)|0,g=g+Math.imul(we,Ne)|0,f=f+Math.imul(we,Oe)|0,f=f+Math.imul(Ae,Ne)|0,w=w+Math.imul(Ae,Oe)|0,g=g+Math.imul(pe,ke)|0,f=f+Math.imul(pe,Be)|0,f=f+Math.imul(Me,ke)|0,w=w+Math.imul(Me,Be)|0,g=g+Math.imul(oe,De)|0,f=f+Math.imul(oe,je)|0,f=f+Math.imul(ce,De)|0,w=w+Math.imul(ce,je)|0,g=g+Math.imul(ie,ee)|0,f=f+Math.imul(ie,Y)|0,f=f+Math.imul(ae,ee)|0,w=w+Math.imul(ae,Y)|0,g=g+Math.imul(Q,re)|0,f=f+Math.imul(Q,ne)|0,f=f+Math.imul(te,re)|0,w=w+Math.imul(te,ne)|0,g=g+Math.imul(J,ge)|0,f=f+Math.imul(J,ve)|0,f=f+Math.imul(X,ge)|0,w=w+Math.imul(X,ve)|0;var ur=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ur>>>26)|0,ur&=67108863,g=Math.imul(ye,Re),f=Math.imul(ye,Ce),f=f+Math.imul(le,Re)|0,w=Math.imul(le,Ce),g=g+Math.imul(me,Ne)|0,f=f+Math.imul(me,Oe)|0,f=f+Math.imul(he,Ne)|0,w=w+Math.imul(he,Oe)|0,g=g+Math.imul(we,ke)|0,f=f+Math.imul(we,Be)|0,f=f+Math.imul(Ae,ke)|0,w=w+Math.imul(Ae,Be)|0,g=g+Math.imul(pe,De)|0,f=f+Math.imul(pe,je)|0,f=f+Math.imul(Me,De)|0,w=w+Math.imul(Me,je)|0,g=g+Math.imul(oe,ee)|0,f=f+Math.imul(oe,Y)|0,f=f+Math.imul(ce,ee)|0,w=w+Math.imul(ce,Y)|0,g=g+Math.imul(ie,re)|0,f=f+Math.imul(ie,ne)|0,f=f+Math.imul(ae,re)|0,w=w+Math.imul(ae,ne)|0,g=g+Math.imul(Q,ge)|0,f=f+Math.imul(Q,ve)|0,f=f+Math.imul(te,ge)|0,w=w+Math.imul(te,ve)|0;var wt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(wt>>>26)|0,wt&=67108863,g=Math.imul(ye,Ne),f=Math.imul(ye,Oe),f=f+Math.imul(le,Ne)|0,w=Math.imul(le,Oe),g=g+Math.imul(me,ke)|0,f=f+Math.imul(me,Be)|0,f=f+Math.imul(he,ke)|0,w=w+Math.imul(he,Be)|0,g=g+Math.imul(we,De)|0,f=f+Math.imul(we,je)|0,f=f+Math.imul(Ae,De)|0,w=w+Math.imul(Ae,je)|0,g=g+Math.imul(pe,ee)|0,f=f+Math.imul(pe,Y)|0,f=f+Math.imul(Me,ee)|0,w=w+Math.imul(Me,Y)|0,g=g+Math.imul(oe,re)|0,f=f+Math.imul(oe,ne)|0,f=f+Math.imul(ce,re)|0,w=w+Math.imul(ce,ne)|0,g=g+Math.imul(ie,ge)|0,f=f+Math.imul(ie,ve)|0,f=f+Math.imul(ae,ge)|0,w=w+Math.imul(ae,ve)|0;var or=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(or>>>26)|0,or&=67108863,g=Math.imul(ye,ke),f=Math.imul(ye,Be),f=f+Math.imul(le,ke)|0,w=Math.imul(le,Be),g=g+Math.imul(me,De)|0,f=f+Math.imul(me,je)|0,f=f+Math.imul(he,De)|0,w=w+Math.imul(he,je)|0,g=g+Math.imul(we,ee)|0,f=f+Math.imul(we,Y)|0,f=f+Math.imul(Ae,ee)|0,w=w+Math.imul(Ae,Y)|0,g=g+Math.imul(pe,re)|0,f=f+Math.imul(pe,ne)|0,f=f+Math.imul(Me,re)|0,w=w+Math.imul(Me,ne)|0,g=g+Math.imul(oe,ge)|0,f=f+Math.imul(oe,ve)|0,f=f+Math.imul(ce,ge)|0,w=w+Math.imul(ce,ve)|0;var lr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(lr>>>26)|0,lr&=67108863,g=Math.imul(ye,De),f=Math.imul(ye,je),f=f+Math.imul(le,De)|0,w=Math.imul(le,je),g=g+Math.imul(me,ee)|0,f=f+Math.imul(me,Y)|0,f=f+Math.imul(he,ee)|0,w=w+Math.imul(he,Y)|0,g=g+Math.imul(we,re)|0,f=f+Math.imul(we,ne)|0,f=f+Math.imul(Ae,re)|0,w=w+Math.imul(Ae,ne)|0,g=g+Math.imul(pe,ge)|0,f=f+Math.imul(pe,ve)|0,f=f+Math.imul(Me,ge)|0,w=w+Math.imul(Me,ve)|0;var Mr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,g=Math.imul(ye,ee),f=Math.imul(ye,Y),f=f+Math.imul(le,ee)|0,w=Math.imul(le,Y),g=g+Math.imul(me,re)|0,f=f+Math.imul(me,ne)|0,f=f+Math.imul(he,re)|0,w=w+Math.imul(he,ne)|0,g=g+Math.imul(we,ge)|0,f=f+Math.imul(we,ve)|0,f=f+Math.imul(Ae,ge)|0,w=w+Math.imul(Ae,ve)|0;var Kr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,g=Math.imul(ye,re),f=Math.imul(ye,ne),f=f+Math.imul(le,re)|0,w=Math.imul(le,ne),g=g+Math.imul(me,ge)|0,f=f+Math.imul(me,ve)|0,f=f+Math.imul(he,ge)|0,w=w+Math.imul(he,ve)|0;var kr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(kr>>>26)|0,kr&=67108863,g=Math.imul(ye,ge),f=Math.imul(ye,ve),f=f+Math.imul(le,ge)|0,w=Math.imul(le,ve);var Yr=(x+g|0)+((f&8191)<<13)|0;return x=(w+(f>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,v[0]=gt,v[1]=ot,v[2]=Ge,v[3]=Pt,v[4]=Lt,v[5]=St,v[6]=pt,v[7]=Tt,v[8]=vt,v[9]=zr,v[10]=ir,v[11]=ur,v[12]=wt,v[13]=or,v[14]=lr,v[15]=Mr,v[16]=Kr,v[17]=kr,v[18]=Yr,x!==0&&(v[19]=x,y.length++),y};Math.imul||(S=M);function P(E,c,l){l.negative=c.negative^E.negative,l.length=E.length+c.length;for(var y=0,d=0,h=0;h<l.length-1;h++){var v=d;d=0;for(var x=y&67108863,g=Math.min(h,c.length-1),f=Math.max(0,h-E.length+1);f<=g;f++){var w=h-f,D=E.words[w]|0,T=c.words[f]|0,C=D*T,z=C&67108863;v=v+(C/67108864|0)|0,z=z+x|0,x=z&67108863,v=v+(z>>>26)|0,d+=v>>>26,v&=67108863}l.words[h]=x,y=v,v=d}return y!==0?l.words[h]=y:l.length--,l.strip()}function k(E,c,l){var y=new R;return y.mulp(E,c,l)}i.prototype.mulTo=function(c,l){var y,d=this.length+c.length;return this.length===10&&c.length===10?y=S(this,c,l):d<63?y=M(this,c,l):d<1024?y=P(this,c,l):y=k(this,c,l),y};function R(E,c){this.x=E,this.y=c}R.prototype.makeRBT=function(c){for(var l=new Array(c),y=i.prototype._countBits(c)-1,d=0;d<c;d++)l[d]=this.revBin(d,y,c);return l},R.prototype.revBin=function(c,l,y){if(c===0||c===y-1)return c;for(var d=0,h=0;h<l;h++)d|=(c&1)<<l-h-1,c>>=1;return d},R.prototype.permute=function(c,l,y,d,h,v){for(var x=0;x<v;x++)d[x]=l[c[x]],h[x]=y[c[x]]},R.prototype.transform=function(c,l,y,d,h,v){this.permute(v,c,l,y,d,h);for(var x=1;x<h;x<<=1)for(var g=x<<1,f=Math.cos(2*Math.PI/g),w=Math.sin(2*Math.PI/g),D=0;D<h;D+=g)for(var T=f,C=w,z=0;z<x;z++){var G=y[D+z],V=d[D+z],Z=y[D+z+x],J=d[D+z+x],X=T*Z-C*J;J=T*J+C*Z,Z=X,y[D+z]=G+Z,d[D+z]=V+J,y[D+z+x]=G-Z,d[D+z+x]=V-J,z!==g&&(X=f*T-w*C,C=f*C+w*T,T=X)}},R.prototype.guessLen13b=function(c,l){var y=Math.max(l,c)|1,d=y&1,h=0;for(y=y/2|0;y;y=y>>>1)h++;return 1<<h+1+d},R.prototype.conjugate=function(c,l,y){if(!(y<=1))for(var d=0;d<y/2;d++){var h=c[d];c[d]=c[y-d-1],c[y-d-1]=h,h=l[d],l[d]=-l[y-d-1],l[y-d-1]=-h}},R.prototype.normalize13b=function(c,l){for(var y=0,d=0;d<l/2;d++){var h=Math.round(c[2*d+1]/l)*8192+Math.round(c[2*d]/l)+y;c[d]=h&67108863,h<67108864?y=0:y=h/67108864|0}return c},R.prototype.convert13b=function(c,l,y,d){for(var h=0,v=0;v<l;v++)h=h+(c[v]|0),y[2*v]=h&8191,h=h>>>13,y[2*v+1]=h&8191,h=h>>>13;for(v=2*l;v<d;++v)y[v]=0;r(h===0),r((h&-8192)===0)},R.prototype.stub=function(c){for(var l=new Array(c),y=0;y<c;y++)l[y]=0;return l},R.prototype.mulp=function(c,l,y){var d=2*this.guessLen13b(c.length,l.length),h=this.makeRBT(d),v=this.stub(d),x=new Array(d),g=new Array(d),f=new Array(d),w=new Array(d),D=new Array(d),T=new Array(d),C=y.words;C.length=d,this.convert13b(c.words,c.length,x,d),this.convert13b(l.words,l.length,w,d),this.transform(x,v,g,f,d,h),this.transform(w,v,D,T,d,h);for(var z=0;z<d;z++){var G=g[z]*D[z]-f[z]*T[z];f[z]=g[z]*T[z]+f[z]*D[z],g[z]=G}return this.conjugate(g,f,d),this.transform(g,f,C,v,d,h),this.conjugate(C,v,d),this.normalize13b(C,d),y.negative=c.negative^l.negative,y.length=c.length+l.length,y.strip()},i.prototype.mul=function(c){var l=new i(null);return l.words=new Array(this.length+c.length),this.mulTo(c,l)},i.prototype.mulf=function(c){var l=new i(null);return l.words=new Array(this.length+c.length),k(this,c,l)},i.prototype.imul=function(c){return this.clone().mulTo(c,this)},i.prototype.imuln=function(c){r(typeof c=="number"),r(c<67108864);for(var l=0,y=0;y<this.length;y++){var d=(this.words[y]|0)*c,h=(d&67108863)+(l&67108863);l>>=26,l+=d/67108864|0,l+=h>>>26,this.words[y]=h&67108863}return l!==0&&(this.words[y]=l,this.length++),this},i.prototype.muln=function(c){return this.clone().imuln(c)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(c){var l=A(c);if(l.length===0)return new i(1);for(var y=this,d=0;d<l.length&&l[d]===0;d++,y=y.sqr());if(++d<l.length)for(var h=y.sqr();d<l.length;d++,h=h.sqr())l[d]!==0&&(y=y.mul(h));return y},i.prototype.iushln=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26,d=67108863>>>26-l<<26-l,h;if(l!==0){var v=0;for(h=0;h<this.length;h++){var x=this.words[h]&d,g=(this.words[h]|0)-x<<l;this.words[h]=g|v,v=x>>>26-l}v&&(this.words[h]=v,this.length++)}if(y!==0){for(h=this.length-1;h>=0;h--)this.words[h+y]=this.words[h];for(h=0;h<y;h++)this.words[h]=0;this.length+=y}return this.strip()},i.prototype.ishln=function(c){return r(this.negative===0),this.iushln(c)},i.prototype.iushrn=function(c,l,y){r(typeof c=="number"&&c>=0);var d;l?d=(l-l%26)/26:d=0;var h=c%26,v=Math.min((c-h)/26,this.length),x=67108863^67108863>>>h<<h,g=y;if(d-=v,d=Math.max(0,d),g){for(var f=0;f<v;f++)g.words[f]=this.words[f];g.length=v}if(v!==0)if(this.length>v)for(this.length-=v,f=0;f<this.length;f++)this.words[f]=this.words[f+v];else this.words[0]=0,this.length=1;var w=0;for(f=this.length-1;f>=0&&(w!==0||f>=d);f--){var D=this.words[f]|0;this.words[f]=w<<26-h|D>>>h,w=D&x}return g&&w!==0&&(g.words[g.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(c,l,y){return r(this.negative===0),this.iushrn(c,l,y)},i.prototype.shln=function(c){return this.clone().ishln(c)},i.prototype.ushln=function(c){return this.clone().iushln(c)},i.prototype.shrn=function(c){return this.clone().ishrn(c)},i.prototype.ushrn=function(c){return this.clone().iushrn(c)},i.prototype.testn=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26,d=1<<l;if(this.length<=y)return!1;var h=this.words[y];return!!(h&d)},i.prototype.imaskn=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(l!==0&&y++,this.length=Math.min(y,this.length),l!==0){var d=67108863^67108863>>>l<<l;this.words[this.length-1]&=d}return this.strip()},i.prototype.maskn=function(c){return this.clone().imaskn(c)},i.prototype.iaddn=function(c){return r(typeof c=="number"),r(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},i.prototype._iaddn=function(c){this.words[0]+=c;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(c){if(r(typeof c=="number"),r(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(c){return this.clone().iaddn(c)},i.prototype.subn=function(c){return this.clone().isubn(c)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(c,l,y){var d=c.length+y,h;this._expand(d);var v,x=0;for(h=0;h<c.length;h++){v=(this.words[h+y]|0)+x;var g=(c.words[h]|0)*l;v-=g&67108863,x=(v>>26)-(g/67108864|0),this.words[h+y]=v&67108863}for(;h<this.length-y;h++)v=(this.words[h+y]|0)+x,x=v>>26,this.words[h+y]=v&67108863;if(x===0)return this.strip();for(r(x===-1),x=0,h=0;h<this.length;h++)v=-(this.words[h]|0)+x,x=v>>26,this.words[h]=v&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(c,l){var y=this.length-c.length,d=this.clone(),h=c,v=h.words[h.length-1]|0,x=this._countBits(v);y=26-x,y!==0&&(h=h.ushln(y),d.iushln(y),v=h.words[h.length-1]|0);var g=d.length-h.length,f;if(l!=="mod"){f=new i(null),f.length=g+1,f.words=new Array(f.length);for(var w=0;w<f.length;w++)f.words[w]=0}var D=d.clone()._ishlnsubmul(h,1,g);D.negative===0&&(d=D,f&&(f.words[g]=1));for(var T=g-1;T>=0;T--){var C=(d.words[h.length+T]|0)*67108864+(d.words[h.length+T-1]|0);for(C=Math.min(C/v|0,67108863),d._ishlnsubmul(h,C,T);d.negative!==0;)C--,d.negative=0,d._ishlnsubmul(h,1,T),d.isZero()||(d.negative^=1);f&&(f.words[T]=C)}return f&&f.strip(),d.strip(),l!=="div"&&y!==0&&d.iushrn(y),{div:f||null,mod:d}},i.prototype.divmod=function(c,l,y){if(r(!c.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var d,h,v;return this.negative!==0&&c.negative===0?(v=this.neg().divmod(c,l),l!=="mod"&&(d=v.div.neg()),l!=="div"&&(h=v.mod.neg(),y&&h.negative!==0&&h.iadd(c)),{div:d,mod:h}):this.negative===0&&c.negative!==0?(v=this.divmod(c.neg(),l),l!=="mod"&&(d=v.div.neg()),{div:d,mod:v.mod}):this.negative&c.negative?(v=this.neg().divmod(c.neg(),l),l!=="div"&&(h=v.mod.neg(),y&&h.negative!==0&&h.isub(c)),{div:v.div,mod:h}):c.length>this.length||this.cmp(c)<0?{div:new i(0),mod:this}:c.length===1?l==="div"?{div:this.divn(c.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new i(this.modn(c.words[0]))}:this._wordDiv(c,l)},i.prototype.div=function(c){return this.divmod(c,"div",!1).div},i.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},i.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},i.prototype.divRound=function(c){var l=this.divmod(c);if(l.mod.isZero())return l.div;var y=l.div.negative!==0?l.mod.isub(c):l.mod,d=c.ushrn(1),h=c.andln(1),v=y.cmp(d);return v<0||h===1&&v===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(c){r(c<=67108863);for(var l=(1<<26)%c,y=0,d=this.length-1;d>=0;d--)y=(l*y+(this.words[d]|0))%c;return y},i.prototype.idivn=function(c){r(c<=67108863);for(var l=0,y=this.length-1;y>=0;y--){var d=(this.words[y]|0)+l*67108864;this.words[y]=d/c|0,l=d%c}return this.strip()},i.prototype.divn=function(c){return this.clone().idivn(c)},i.prototype.egcd=function(c){r(c.negative===0),r(!c.isZero());var l=this,y=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var d=new i(1),h=new i(0),v=new i(0),x=new i(1),g=0;l.isEven()&&y.isEven();)l.iushrn(1),y.iushrn(1),++g;for(var f=y.clone(),w=l.clone();!l.isZero();){for(var D=0,T=1;!(l.words[0]&T)&&D<26;++D,T<<=1);if(D>0)for(l.iushrn(D);D-- >0;)(d.isOdd()||h.isOdd())&&(d.iadd(f),h.isub(w)),d.iushrn(1),h.iushrn(1);for(var C=0,z=1;!(y.words[0]&z)&&C<26;++C,z<<=1);if(C>0)for(y.iushrn(C);C-- >0;)(v.isOdd()||x.isOdd())&&(v.iadd(f),x.isub(w)),v.iushrn(1),x.iushrn(1);l.cmp(y)>=0?(l.isub(y),d.isub(v),h.isub(x)):(y.isub(l),v.isub(d),x.isub(h))}return{a:v,b:x,gcd:y.iushln(g)}},i.prototype._invmp=function(c){r(c.negative===0),r(!c.isZero());var l=this,y=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var d=new i(1),h=new i(0),v=y.clone();l.cmpn(1)>0&&y.cmpn(1)>0;){for(var x=0,g=1;!(l.words[0]&g)&&x<26;++x,g<<=1);if(x>0)for(l.iushrn(x);x-- >0;)d.isOdd()&&d.iadd(v),d.iushrn(1);for(var f=0,w=1;!(y.words[0]&w)&&f<26;++f,w<<=1);if(f>0)for(y.iushrn(f);f-- >0;)h.isOdd()&&h.iadd(v),h.iushrn(1);l.cmp(y)>=0?(l.isub(y),d.isub(h)):(y.isub(l),h.isub(d))}var D;return l.cmpn(1)===0?D=d:D=h,D.cmpn(0)<0&&D.iadd(c),D},i.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var l=this.clone(),y=c.clone();l.negative=0,y.negative=0;for(var d=0;l.isEven()&&y.isEven();d++)l.iushrn(1),y.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;y.isEven();)y.iushrn(1);var h=l.cmp(y);if(h<0){var v=l;l=y,y=v}else if(h===0||y.cmpn(1)===0)break;l.isub(y)}while(!0);return y.iushln(d)},i.prototype.invm=function(c){return this.egcd(c).a.umod(c)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(c){return this.words[0]&c},i.prototype.bincn=function(c){r(typeof c=="number");var l=c%26,y=(c-l)/26,d=1<<l;if(this.length<=y)return this._expand(y+1),this.words[y]|=d,this;for(var h=d,v=y;h!==0&&v<this.length;v++){var x=this.words[v]|0;x+=h,h=x>>>26,x&=67108863,this.words[v]=x}return h!==0&&(this.words[v]=h,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(c){var l=c<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var y;if(this.length>1)y=1;else{l&&(c=-c),r(c<=67108863,"Number is too big");var d=this.words[0]|0;y=d===c?0:d<c?-1:1}return this.negative!==0?-y|0:y},i.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var l=this.ucmp(c);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var l=0,y=this.length-1;y>=0;y--){var d=this.words[y]|0,h=c.words[y]|0;if(d!==h){d<h?l=-1:d>h&&(l=1);break}}return l},i.prototype.gtn=function(c){return this.cmpn(c)===1},i.prototype.gt=function(c){return this.cmp(c)===1},i.prototype.gten=function(c){return this.cmpn(c)>=0},i.prototype.gte=function(c){return this.cmp(c)>=0},i.prototype.ltn=function(c){return this.cmpn(c)===-1},i.prototype.lt=function(c){return this.cmp(c)===-1},i.prototype.lten=function(c){return this.cmpn(c)<=0},i.prototype.lte=function(c){return this.cmp(c)<=0},i.prototype.eqn=function(c){return this.cmpn(c)===0},i.prototype.eq=function(c){return this.cmp(c)===0},i.red=function(c){return new L(c)},i.prototype.toRed=function(c){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(c){return this.red=c,this},i.prototype.forceRed=function(c){return r(!this.red,"Already a number in reduction context"),this._forceRed(c)},i.prototype.redAdd=function(c){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},i.prototype.redIAdd=function(c){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},i.prototype.redSub=function(c){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},i.prototype.redISub=function(c){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},i.prototype.redShl=function(c){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},i.prototype.redMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},i.prototype.redIMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(c){return r(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var B={k256:null,p224:null,p192:null,p25519:null};function I(E,c){this.name=E,this.p=new i(c,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}I.prototype._tmp=function(){var c=new i(null);return c.words=new Array(Math.ceil(this.n/13)),c},I.prototype.ireduce=function(c){var l=c,y;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),y=l.bitLength();while(y>this.n);var d=y<this.n?-1:l.ucmp(this.p);return d===0?(l.words[0]=0,l.length=1):d>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},I.prototype.split=function(c,l){c.iushrn(this.n,0,l)},I.prototype.imulK=function(c){return c.imul(this.k)};function q(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(q,I),q.prototype.split=function(c,l){for(var y=4194303,d=Math.min(c.length,9),h=0;h<d;h++)l.words[h]=c.words[h];if(l.length=d,c.length<=9){c.words[0]=0,c.length=1;return}var v=c.words[9];for(l.words[l.length++]=v&y,h=10;h<c.length;h++){var x=c.words[h]|0;c.words[h-10]=(x&y)<<4|v>>>22,v=x}v>>>=22,c.words[h-10]=v,v===0&&c.length>10?c.length-=10:c.length-=9},q.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var l=0,y=0;y<c.length;y++){var d=c.words[y]|0;l+=d*977,c.words[y]=l&67108863,l=d*64+(l/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function $(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n($,I);function U(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(U,I);function F(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(F,I),F.prototype.imulK=function(c){for(var l=0,y=0;y<c.length;y++){var d=(c.words[y]|0)*19+l,h=d&67108863;d>>>=26,c.words[y]=h,l=d}return l!==0&&(c.words[c.length++]=l),c},i._prime=function(c){if(B[c])return B[c];var l;if(c==="k256")l=new q;else if(c==="p224")l=new $;else if(c==="p192")l=new U;else if(c==="p25519")l=new F;else throw new Error("Unknown prime "+c);return B[c]=l,l};function L(E){if(typeof E=="string"){var c=i._prime(E);this.m=c.p,this.prime=c}else r(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}L.prototype._verify1=function(c){r(c.negative===0,"red works only with positives"),r(c.red,"red works only with red numbers")},L.prototype._verify2=function(c,l){r((c.negative|l.negative)===0,"red works only with positives"),r(c.red&&c.red===l.red,"red works only with red numbers")},L.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):c.umod(this.m)._forceRed(this)},L.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},L.prototype.add=function(c,l){this._verify2(c,l);var y=c.add(l);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},L.prototype.iadd=function(c,l){this._verify2(c,l);var y=c.iadd(l);return y.cmp(this.m)>=0&&y.isub(this.m),y},L.prototype.sub=function(c,l){this._verify2(c,l);var y=c.sub(l);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},L.prototype.isub=function(c,l){this._verify2(c,l);var y=c.isub(l);return y.cmpn(0)<0&&y.iadd(this.m),y},L.prototype.shl=function(c,l){return this._verify1(c),this.imod(c.ushln(l))},L.prototype.imul=function(c,l){return this._verify2(c,l),this.imod(c.imul(l))},L.prototype.mul=function(c,l){return this._verify2(c,l),this.imod(c.mul(l))},L.prototype.isqr=function(c){return this.imul(c,c.clone())},L.prototype.sqr=function(c){return this.mul(c,c)},L.prototype.sqrt=function(c){if(c.isZero())return c.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var y=this.m.add(new i(1)).iushrn(2);return this.pow(c,y)}for(var d=this.m.subn(1),h=0;!d.isZero()&&d.andln(1)===0;)h++,d.iushrn(1);r(!d.isZero());var v=new i(1).toRed(this),x=v.redNeg(),g=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,g).cmp(x)!==0;)f.redIAdd(x);for(var w=this.pow(f,d),D=this.pow(c,d.addn(1).iushrn(1)),T=this.pow(c,d),C=h;T.cmp(v)!==0;){for(var z=T,G=0;z.cmp(v)!==0;G++)z=z.redSqr();r(G<C);var V=this.pow(w,new i(1).iushln(C-G-1));D=D.redMul(V),w=V.redSqr(),T=T.redMul(w),C=G}return D},L.prototype.invm=function(c){var l=c._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},L.prototype.pow=function(c,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return c.clone();var y=4,d=new Array(1<<y);d[0]=new i(1).toRed(this),d[1]=c;for(var h=2;h<d.length;h++)d[h]=this.mul(d[h-1],c);var v=d[0],x=0,g=0,f=l.bitLength()%26;for(f===0&&(f=26),h=l.length-1;h>=0;h--){for(var w=l.words[h],D=f-1;D>=0;D--){var T=w>>D&1;if(v!==d[0]&&(v=this.sqr(v)),T===0&&x===0){g=0;continue}x<<=1,x|=T,g++,!(g!==y&&(h!==0||D!==0))&&(v=this.mul(v,d[x]),g=0,x=0)}f=26}return v},L.prototype.convertTo=function(c){var l=c.umod(this.m);return l===c?l.clone():l},L.prototype.convertFrom=function(c){var l=c.clone();return l.red=null,l},i.mont=function(c){return new W(c)};function W(E){L.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(W,L),W.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},W.prototype.convertFrom=function(c){var l=this.imod(c.mul(this.rinv));return l.red=null,l},W.prototype.imul=function(c,l){if(c.isZero()||l.isZero())return c.words[0]=0,c.length=1,c;var y=c.imul(l),d=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=y.isub(d).iushrn(this.shift),v=h;return h.cmp(this.m)>=0?v=h.isub(this.m):h.cmpn(0)<0&&(v=h.iadd(this.m)),v._forceRed(this)},W.prototype.mul=function(c,l){if(c.isZero()||l.isZero())return new i(0)._forceRed(this);var y=c.mul(l),d=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=y.isub(d).iushrn(this.shift),v=h;return h.cmp(this.m)>=0?v=h.isub(this.m):h.cmpn(0)<0&&(v=h.iadd(this.m)),v._forceRed(this)},W.prototype.invm=function(c){var l=this.imod(c._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(typeof TN>"u"||TN,Jfe)});var Xfe=H((_Bt,Qfe)=>{_();var xze=w4(),Eze=Yfe();Qfe.exports=function(e){return new eg(e)};var Mc={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};Mc.p224=Mc.secp224r1;Mc.p256=Mc.secp256r1=Mc.prime256v1;Mc.p192=Mc.secp192r1=Mc.prime192v1;Mc.p384=Mc.secp384r1;Mc.p521=Mc.secp521r1;function eg(t){this.curveType=Mc[t],this.curveType||(this.curveType={name:t}),this.curve=new xze.ec(this.curveType.name),this.keys=void 0}eg.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)};eg.prototype.computeSecret=function(t,e,r){e=e||"utf8",N.Buffer.isBuffer(t)||(t=new N.Buffer(t,e));var n=this.curve.keyFromPublic(t).getPublic(),i=n.mul(this.keys.getPrivate()).getX();return RN(i,r,this.curveType.byteLength)};eg.prototype.getPublicKey=function(t,e){var r=this.keys.getPublic(e==="compressed",!0);return e==="hybrid"&&(r[r.length-1]%2?r[0]=7:r[0]=6),RN(r,t)};eg.prototype.getPrivateKey=function(t){return RN(this.keys.getPrivate(),t)};eg.prototype.setPublicKey=function(t,e){return e=e||"utf8",N.Buffer.isBuffer(t)||(t=new N.Buffer(t,e)),this.keys._importPublic(t),this};eg.prototype.setPrivateKey=function(t,e){e=e||"utf8",N.Buffer.isBuffer(t)||(t=new N.Buffer(t,e));var r=new Eze(t);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this};function RN(t,e,r){Array.isArray(t)||(t=t.toArray());var n=new N.Buffer(t);if(r&&n.length<r){var i=new N.Buffer(r-n.length);i.fill(0),n=N.Buffer.concat([i,n])}return e?n.toString(e):n}});var kN=H((EBt,eue)=>{_();var Sze=vw(),IN=Wr().Buffer;eue.exports=function(t,e){for(var r=IN.alloc(0),n=0,i;r.length<e;)i=Mze(n++),r=IN.concat([r,Sze("sha1").update(t).update(i).digest()]);return r.slice(0,e)};function Mze(t){var e=IN.allocUnsafe(4);return e.writeUInt32BE(t,0),e}});var ON=H((MBt,tue)=>{_();tue.exports=function(e,r){for(var n=e.length,i=-1;++i<n;)e[i]^=r[i];return e}});var B4=H((rue,BN)=>{_();(function(t,e){"use strict";function r(E,c){if(!E)throw new Error(c||"Assertion failed")}function n(E,c){E.super_=c;var l=function(){};l.prototype=c.prototype,E.prototype=new l,E.prototype.constructor=E}function i(E,c,l){if(i.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((c==="le"||c==="be")&&(l=c,c=10),this._init(E||0,c||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ut().Buffer}catch{}i.isBN=function(c){return c instanceof i?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===i.wordSize&&Array.isArray(c.words)},i.max=function(c,l){return c.cmp(l)>0?c:l},i.min=function(c,l){return c.cmp(l)<0?c:l},i.prototype._init=function(c,l,y){if(typeof c=="number")return this._initNumber(c,l,y);if(typeof c=="object")return this._initArray(c,l,y);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),c=c.toString().replace(/\s+/g,"");var d=0;c[0]==="-"&&(d++,this.negative=1),d<c.length&&(l===16?this._parseHex(c,d,y):(this._parseBase(c,l,d),y==="le"&&this._initArray(this.toArray(),l,y)))},i.prototype._initNumber=function(c,l,y){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(r(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),l,y)},i.prototype._initArray=function(c,l,y){if(r(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var h,v,x=0;if(y==="be")for(d=c.length-1,h=0;d>=0;d-=3)v=c[d]|c[d-1]<<8|c[d-2]<<16,this.words[h]|=v<<x&67108863,this.words[h+1]=v>>>26-x&67108863,x+=24,x>=26&&(x-=26,h++);else if(y==="le")for(d=0,h=0;d<c.length;d+=3)v=c[d]|c[d+1]<<8|c[d+2]<<16,this.words[h]|=v<<x&67108863,this.words[h+1]=v>>>26-x&67108863,x+=24,x>=26&&(x-=26,h++);return this.strip()};function s(E,c){var l=E.charCodeAt(c);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function a(E,c,l){var y=s(E,l);return l-1>=c&&(y|=s(E,l-1)<<4),y}i.prototype._parseHex=function(c,l,y){this.length=Math.ceil((c.length-l)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var h=0,v=0,x;if(y==="be")for(d=c.length-1;d>=l;d-=2)x=a(c,l,d)<<h,this.words[v]|=x&67108863,h>=18?(h-=18,v+=1,this.words[v]|=x>>>26):h+=8;else{var g=c.length-l;for(d=g%2===0?l+1:l;d<c.length;d+=2)x=a(c,l,d)<<h,this.words[v]|=x&67108863,h>=18?(h-=18,v+=1,this.words[v]|=x>>>26):h+=8}this.strip()};function u(E,c,l,y){for(var d=0,h=Math.min(E.length,l),v=c;v<h;v++){var x=E.charCodeAt(v)-48;d*=y,x>=49?d+=x-49+10:x>=17?d+=x-17+10:d+=x}return d}i.prototype._parseBase=function(c,l,y){this.words=[0],this.length=1;for(var d=0,h=1;h<=67108863;h*=l)d++;d--,h=h/l|0;for(var v=c.length-y,x=v%d,g=Math.min(v,v-x)+y,f=0,w=y;w<g;w+=d)f=u(c,w,w+d,l),this.imuln(h),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(x!==0){var D=1;for(f=u(c,w,c.length,l),w=0;w<x;w++)D*=l;this.imuln(D),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this.strip()},i.prototype.copy=function(c){c.words=new Array(this.length);for(var l=0;l<this.length;l++)c.words[l]=this.words[l];c.length=this.length,c.negative=this.negative,c.red=this.red},i.prototype.clone=function(){var c=new i(null);return this.copy(c),c},i.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(c,l){c=c||10,l=l|0||1;var y;if(c===16||c==="hex"){y="";for(var d=0,h=0,v=0;v<this.length;v++){var x=this.words[v],g=((x<<d|h)&16777215).toString(16);h=x>>>24-d&16777215,h!==0||v!==this.length-1?y=m[6-g.length]+g+y:y=g+y,d+=2,d>=26&&(d-=26,v--)}for(h!==0&&(y=h.toString(16)+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(c===(c|0)&&c>=2&&c<=36){var f=p[c],w=b[c];y="";var D=this.clone();for(D.negative=0;!D.isZero();){var T=D.modn(w).toString(c);D=D.idivn(w),D.isZero()?y=T+y:y=m[f-T.length]+T+y}for(this.isZero()&&(y="0"+y);y.length%l!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(c,l){return r(typeof o<"u"),this.toArrayLike(o,c,l)},i.prototype.toArray=function(c,l){return this.toArrayLike(Array,c,l)},i.prototype.toArrayLike=function(c,l,y){var d=this.byteLength(),h=y||Math.max(1,d);r(d<=h,"byte array longer than desired length"),r(h>0,"Requested array length <= 0"),this.strip();var v=l==="le",x=new c(h),g,f,w=this.clone();if(v){for(f=0;!w.isZero();f++)g=w.andln(255),w.iushrn(8),x[f]=g;for(;f<h;f++)x[f]=0}else{for(f=0;f<h-d;f++)x[f]=0;for(f=0;!w.isZero();f++)g=w.andln(255),w.iushrn(8),x[h-f-1]=g}return x},Math.clz32?i.prototype._countBits=function(c){return 32-Math.clz32(c)}:i.prototype._countBits=function(c){var l=c,y=0;return l>=4096&&(y+=13,l>>>=13),l>=64&&(y+=7,l>>>=7),l>=8&&(y+=4,l>>>=4),l>=2&&(y+=2,l>>>=2),y+l},i.prototype._zeroBits=function(c){if(c===0)return 26;var l=c,y=0;return l&8191||(y+=13,l>>>=13),l&127||(y+=7,l>>>=7),l&15||(y+=4,l>>>=4),l&3||(y+=2,l>>>=2),l&1||y++,y},i.prototype.bitLength=function(){var c=this.words[this.length-1],l=this._countBits(c);return(this.length-1)*26+l};function A(E){for(var c=new Array(E.bitLength()),l=0;l<c.length;l++){var y=l/26|0,d=l%26;c[l]=(E.words[y]&1<<d)>>>d}return c}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,l=0;l<this.length;l++){var y=this._zeroBits(this.words[l]);if(c+=y,y!==26)break}return c},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},i.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var l=0;l<c.length;l++)this.words[l]=this.words[l]|c.words[l];return this.strip()},i.prototype.ior=function(c){return r((this.negative|c.negative)===0),this.iuor(c)},i.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},i.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},i.prototype.iuand=function(c){var l;this.length>c.length?l=c:l=this;for(var y=0;y<l.length;y++)this.words[y]=this.words[y]&c.words[y];return this.length=l.length,this.strip()},i.prototype.iand=function(c){return r((this.negative|c.negative)===0),this.iuand(c)},i.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},i.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},i.prototype.iuxor=function(c){var l,y;this.length>c.length?(l=this,y=c):(l=c,y=this);for(var d=0;d<y.length;d++)this.words[d]=l.words[d]^y.words[d];if(this!==l)for(;d<l.length;d++)this.words[d]=l.words[d];return this.length=l.length,this.strip()},i.prototype.ixor=function(c){return r((this.negative|c.negative)===0),this.iuxor(c)},i.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},i.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},i.prototype.inotn=function(c){r(typeof c=="number"&&c>=0);var l=Math.ceil(c/26)|0,y=c%26;this._expand(l),y>0&&l--;for(var d=0;d<l;d++)this.words[d]=~this.words[d]&67108863;return y>0&&(this.words[d]=~this.words[d]&67108863>>26-y),this.strip()},i.prototype.notn=function(c){return this.clone().inotn(c)},i.prototype.setn=function(c,l){r(typeof c=="number"&&c>=0);var y=c/26|0,d=c%26;return this._expand(y+1),l?this.words[y]=this.words[y]|1<<d:this.words[y]=this.words[y]&~(1<<d),this.strip()},i.prototype.iadd=function(c){var l;if(this.negative!==0&&c.negative===0)return this.negative=0,l=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,l=this.isub(c),c.negative=1,l._normSign();var y,d;this.length>c.length?(y=this,d=c):(y=c,d=this);for(var h=0,v=0;v<d.length;v++)l=(y.words[v]|0)+(d.words[v]|0)+h,this.words[v]=l&67108863,h=l>>>26;for(;h!==0&&v<y.length;v++)l=(y.words[v]|0)+h,this.words[v]=l&67108863,h=l>>>26;if(this.length=y.length,h!==0)this.words[this.length]=h,this.length++;else if(y!==this)for(;v<y.length;v++)this.words[v]=y.words[v];return this},i.prototype.add=function(c){var l;return c.negative!==0&&this.negative===0?(c.negative=0,l=this.sub(c),c.negative^=1,l):c.negative===0&&this.negative!==0?(this.negative=0,l=c.sub(this),this.negative=1,l):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},i.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var l=this.iadd(c);return c.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var y=this.cmp(c);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var d,h;y>0?(d=this,h=c):(d=c,h=this);for(var v=0,x=0;x<h.length;x++)l=(d.words[x]|0)-(h.words[x]|0)+v,v=l>>26,this.words[x]=l&67108863;for(;v!==0&&x<d.length;x++)l=(d.words[x]|0)+v,v=l>>26,this.words[x]=l&67108863;if(v===0&&x<d.length&&d!==this)for(;x<d.length;x++)this.words[x]=d.words[x];return this.length=Math.max(this.length,x),d!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(c){return this.clone().isub(c)};function M(E,c,l){l.negative=c.negative^E.negative;var y=E.length+c.length|0;l.length=y,y=y-1|0;var d=E.words[0]|0,h=c.words[0]|0,v=d*h,x=v&67108863,g=v/67108864|0;l.words[0]=x;for(var f=1;f<y;f++){for(var w=g>>>26,D=g&67108863,T=Math.min(f,c.length-1),C=Math.max(0,f-E.length+1);C<=T;C++){var z=f-C|0;d=E.words[z]|0,h=c.words[C]|0,v=d*h+D,w+=v/67108864|0,D=v&67108863}l.words[f]=D|0,g=w|0}return g!==0?l.words[f]=g|0:l.length--,l.strip()}var S=function(c,l,y){var d=c.words,h=l.words,v=y.words,x=0,g,f,w,D=d[0]|0,T=D&8191,C=D>>>13,z=d[1]|0,G=z&8191,V=z>>>13,Z=d[2]|0,J=Z&8191,X=Z>>>13,se=d[3]|0,Q=se&8191,te=se>>>13,de=d[4]|0,ie=de&8191,ae=de>>>13,fe=d[5]|0,oe=fe&8191,ce=fe>>>13,Ke=d[6]|0,pe=Ke&8191,Me=Ke>>>13,it=d[7]|0,we=it&8191,Ae=it>>>13,er=d[8]|0,me=er&8191,he=er>>>13,mt=d[9]|0,ye=mt&8191,le=mt>>>13,kt=h[0]|0,_e=kt&8191,Ee=kt>>>13,Ht=h[1]|0,Pe=Ht&8191,Se=Ht>>>13,Pn=h[2]|0,Te=Pn&8191,Ie=Pn>>>13,_i=h[3]|0,Re=_i&8191,Ce=_i>>>13,Tn=h[4]|0,Ne=Tn&8191,Oe=Tn>>>13,xi=h[5]|0,ke=xi&8191,Be=xi>>>13,Ei=h[6]|0,De=Ei&8191,je=Ei>>>13,si=h[7]|0,ee=si&8191,Y=si>>>13,ue=h[8]|0,re=ue&8191,ne=ue>>>13,ze=h[9]|0,ge=ze&8191,ve=ze>>>13;y.negative=c.negative^l.negative,y.length=19,g=Math.imul(T,_e),f=Math.imul(T,Ee),f=f+Math.imul(C,_e)|0,w=Math.imul(C,Ee);var gt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(gt>>>26)|0,gt&=67108863,g=Math.imul(G,_e),f=Math.imul(G,Ee),f=f+Math.imul(V,_e)|0,w=Math.imul(V,Ee),g=g+Math.imul(T,Pe)|0,f=f+Math.imul(T,Se)|0,f=f+Math.imul(C,Pe)|0,w=w+Math.imul(C,Se)|0;var ot=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ot>>>26)|0,ot&=67108863,g=Math.imul(J,_e),f=Math.imul(J,Ee),f=f+Math.imul(X,_e)|0,w=Math.imul(X,Ee),g=g+Math.imul(G,Pe)|0,f=f+Math.imul(G,Se)|0,f=f+Math.imul(V,Pe)|0,w=w+Math.imul(V,Se)|0,g=g+Math.imul(T,Te)|0,f=f+Math.imul(T,Ie)|0,f=f+Math.imul(C,Te)|0,w=w+Math.imul(C,Ie)|0;var Ge=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,g=Math.imul(Q,_e),f=Math.imul(Q,Ee),f=f+Math.imul(te,_e)|0,w=Math.imul(te,Ee),g=g+Math.imul(J,Pe)|0,f=f+Math.imul(J,Se)|0,f=f+Math.imul(X,Pe)|0,w=w+Math.imul(X,Se)|0,g=g+Math.imul(G,Te)|0,f=f+Math.imul(G,Ie)|0,f=f+Math.imul(V,Te)|0,w=w+Math.imul(V,Ie)|0,g=g+Math.imul(T,Re)|0,f=f+Math.imul(T,Ce)|0,f=f+Math.imul(C,Re)|0,w=w+Math.imul(C,Ce)|0;var Pt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,g=Math.imul(ie,_e),f=Math.imul(ie,Ee),f=f+Math.imul(ae,_e)|0,w=Math.imul(ae,Ee),g=g+Math.imul(Q,Pe)|0,f=f+Math.imul(Q,Se)|0,f=f+Math.imul(te,Pe)|0,w=w+Math.imul(te,Se)|0,g=g+Math.imul(J,Te)|0,f=f+Math.imul(J,Ie)|0,f=f+Math.imul(X,Te)|0,w=w+Math.imul(X,Ie)|0,g=g+Math.imul(G,Re)|0,f=f+Math.imul(G,Ce)|0,f=f+Math.imul(V,Re)|0,w=w+Math.imul(V,Ce)|0,g=g+Math.imul(T,Ne)|0,f=f+Math.imul(T,Oe)|0,f=f+Math.imul(C,Ne)|0,w=w+Math.imul(C,Oe)|0;var Lt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,g=Math.imul(oe,_e),f=Math.imul(oe,Ee),f=f+Math.imul(ce,_e)|0,w=Math.imul(ce,Ee),g=g+Math.imul(ie,Pe)|0,f=f+Math.imul(ie,Se)|0,f=f+Math.imul(ae,Pe)|0,w=w+Math.imul(ae,Se)|0,g=g+Math.imul(Q,Te)|0,f=f+Math.imul(Q,Ie)|0,f=f+Math.imul(te,Te)|0,w=w+Math.imul(te,Ie)|0,g=g+Math.imul(J,Re)|0,f=f+Math.imul(J,Ce)|0,f=f+Math.imul(X,Re)|0,w=w+Math.imul(X,Ce)|0,g=g+Math.imul(G,Ne)|0,f=f+Math.imul(G,Oe)|0,f=f+Math.imul(V,Ne)|0,w=w+Math.imul(V,Oe)|0,g=g+Math.imul(T,ke)|0,f=f+Math.imul(T,Be)|0,f=f+Math.imul(C,ke)|0,w=w+Math.imul(C,Be)|0;var St=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(St>>>26)|0,St&=67108863,g=Math.imul(pe,_e),f=Math.imul(pe,Ee),f=f+Math.imul(Me,_e)|0,w=Math.imul(Me,Ee),g=g+Math.imul(oe,Pe)|0,f=f+Math.imul(oe,Se)|0,f=f+Math.imul(ce,Pe)|0,w=w+Math.imul(ce,Se)|0,g=g+Math.imul(ie,Te)|0,f=f+Math.imul(ie,Ie)|0,f=f+Math.imul(ae,Te)|0,w=w+Math.imul(ae,Ie)|0,g=g+Math.imul(Q,Re)|0,f=f+Math.imul(Q,Ce)|0,f=f+Math.imul(te,Re)|0,w=w+Math.imul(te,Ce)|0,g=g+Math.imul(J,Ne)|0,f=f+Math.imul(J,Oe)|0,f=f+Math.imul(X,Ne)|0,w=w+Math.imul(X,Oe)|0,g=g+Math.imul(G,ke)|0,f=f+Math.imul(G,Be)|0,f=f+Math.imul(V,ke)|0,w=w+Math.imul(V,Be)|0,g=g+Math.imul(T,De)|0,f=f+Math.imul(T,je)|0,f=f+Math.imul(C,De)|0,w=w+Math.imul(C,je)|0;var pt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(pt>>>26)|0,pt&=67108863,g=Math.imul(we,_e),f=Math.imul(we,Ee),f=f+Math.imul(Ae,_e)|0,w=Math.imul(Ae,Ee),g=g+Math.imul(pe,Pe)|0,f=f+Math.imul(pe,Se)|0,f=f+Math.imul(Me,Pe)|0,w=w+Math.imul(Me,Se)|0,g=g+Math.imul(oe,Te)|0,f=f+Math.imul(oe,Ie)|0,f=f+Math.imul(ce,Te)|0,w=w+Math.imul(ce,Ie)|0,g=g+Math.imul(ie,Re)|0,f=f+Math.imul(ie,Ce)|0,f=f+Math.imul(ae,Re)|0,w=w+Math.imul(ae,Ce)|0,g=g+Math.imul(Q,Ne)|0,f=f+Math.imul(Q,Oe)|0,f=f+Math.imul(te,Ne)|0,w=w+Math.imul(te,Oe)|0,g=g+Math.imul(J,ke)|0,f=f+Math.imul(J,Be)|0,f=f+Math.imul(X,ke)|0,w=w+Math.imul(X,Be)|0,g=g+Math.imul(G,De)|0,f=f+Math.imul(G,je)|0,f=f+Math.imul(V,De)|0,w=w+Math.imul(V,je)|0,g=g+Math.imul(T,ee)|0,f=f+Math.imul(T,Y)|0,f=f+Math.imul(C,ee)|0,w=w+Math.imul(C,Y)|0;var Tt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,g=Math.imul(me,_e),f=Math.imul(me,Ee),f=f+Math.imul(he,_e)|0,w=Math.imul(he,Ee),g=g+Math.imul(we,Pe)|0,f=f+Math.imul(we,Se)|0,f=f+Math.imul(Ae,Pe)|0,w=w+Math.imul(Ae,Se)|0,g=g+Math.imul(pe,Te)|0,f=f+Math.imul(pe,Ie)|0,f=f+Math.imul(Me,Te)|0,w=w+Math.imul(Me,Ie)|0,g=g+Math.imul(oe,Re)|0,f=f+Math.imul(oe,Ce)|0,f=f+Math.imul(ce,Re)|0,w=w+Math.imul(ce,Ce)|0,g=g+Math.imul(ie,Ne)|0,f=f+Math.imul(ie,Oe)|0,f=f+Math.imul(ae,Ne)|0,w=w+Math.imul(ae,Oe)|0,g=g+Math.imul(Q,ke)|0,f=f+Math.imul(Q,Be)|0,f=f+Math.imul(te,ke)|0,w=w+Math.imul(te,Be)|0,g=g+Math.imul(J,De)|0,f=f+Math.imul(J,je)|0,f=f+Math.imul(X,De)|0,w=w+Math.imul(X,je)|0,g=g+Math.imul(G,ee)|0,f=f+Math.imul(G,Y)|0,f=f+Math.imul(V,ee)|0,w=w+Math.imul(V,Y)|0,g=g+Math.imul(T,re)|0,f=f+Math.imul(T,ne)|0,f=f+Math.imul(C,re)|0,w=w+Math.imul(C,ne)|0;var vt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(vt>>>26)|0,vt&=67108863,g=Math.imul(ye,_e),f=Math.imul(ye,Ee),f=f+Math.imul(le,_e)|0,w=Math.imul(le,Ee),g=g+Math.imul(me,Pe)|0,f=f+Math.imul(me,Se)|0,f=f+Math.imul(he,Pe)|0,w=w+Math.imul(he,Se)|0,g=g+Math.imul(we,Te)|0,f=f+Math.imul(we,Ie)|0,f=f+Math.imul(Ae,Te)|0,w=w+Math.imul(Ae,Ie)|0,g=g+Math.imul(pe,Re)|0,f=f+Math.imul(pe,Ce)|0,f=f+Math.imul(Me,Re)|0,w=w+Math.imul(Me,Ce)|0,g=g+Math.imul(oe,Ne)|0,f=f+Math.imul(oe,Oe)|0,f=f+Math.imul(ce,Ne)|0,w=w+Math.imul(ce,Oe)|0,g=g+Math.imul(ie,ke)|0,f=f+Math.imul(ie,Be)|0,f=f+Math.imul(ae,ke)|0,w=w+Math.imul(ae,Be)|0,g=g+Math.imul(Q,De)|0,f=f+Math.imul(Q,je)|0,f=f+Math.imul(te,De)|0,w=w+Math.imul(te,je)|0,g=g+Math.imul(J,ee)|0,f=f+Math.imul(J,Y)|0,f=f+Math.imul(X,ee)|0,w=w+Math.imul(X,Y)|0,g=g+Math.imul(G,re)|0,f=f+Math.imul(G,ne)|0,f=f+Math.imul(V,re)|0,w=w+Math.imul(V,ne)|0,g=g+Math.imul(T,ge)|0,f=f+Math.imul(T,ve)|0,f=f+Math.imul(C,ge)|0,w=w+Math.imul(C,ve)|0;var zr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(zr>>>26)|0,zr&=67108863,g=Math.imul(ye,Pe),f=Math.imul(ye,Se),f=f+Math.imul(le,Pe)|0,w=Math.imul(le,Se),g=g+Math.imul(me,Te)|0,f=f+Math.imul(me,Ie)|0,f=f+Math.imul(he,Te)|0,w=w+Math.imul(he,Ie)|0,g=g+Math.imul(we,Re)|0,f=f+Math.imul(we,Ce)|0,f=f+Math.imul(Ae,Re)|0,w=w+Math.imul(Ae,Ce)|0,g=g+Math.imul(pe,Ne)|0,f=f+Math.imul(pe,Oe)|0,f=f+Math.imul(Me,Ne)|0,w=w+Math.imul(Me,Oe)|0,g=g+Math.imul(oe,ke)|0,f=f+Math.imul(oe,Be)|0,f=f+Math.imul(ce,ke)|0,w=w+Math.imul(ce,Be)|0,g=g+Math.imul(ie,De)|0,f=f+Math.imul(ie,je)|0,f=f+Math.imul(ae,De)|0,w=w+Math.imul(ae,je)|0,g=g+Math.imul(Q,ee)|0,f=f+Math.imul(Q,Y)|0,f=f+Math.imul(te,ee)|0,w=w+Math.imul(te,Y)|0,g=g+Math.imul(J,re)|0,f=f+Math.imul(J,ne)|0,f=f+Math.imul(X,re)|0,w=w+Math.imul(X,ne)|0,g=g+Math.imul(G,ge)|0,f=f+Math.imul(G,ve)|0,f=f+Math.imul(V,ge)|0,w=w+Math.imul(V,ve)|0;var ir=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ir>>>26)|0,ir&=67108863,g=Math.imul(ye,Te),f=Math.imul(ye,Ie),f=f+Math.imul(le,Te)|0,w=Math.imul(le,Ie),g=g+Math.imul(me,Re)|0,f=f+Math.imul(me,Ce)|0,f=f+Math.imul(he,Re)|0,w=w+Math.imul(he,Ce)|0,g=g+Math.imul(we,Ne)|0,f=f+Math.imul(we,Oe)|0,f=f+Math.imul(Ae,Ne)|0,w=w+Math.imul(Ae,Oe)|0,g=g+Math.imul(pe,ke)|0,f=f+Math.imul(pe,Be)|0,f=f+Math.imul(Me,ke)|0,w=w+Math.imul(Me,Be)|0,g=g+Math.imul(oe,De)|0,f=f+Math.imul(oe,je)|0,f=f+Math.imul(ce,De)|0,w=w+Math.imul(ce,je)|0,g=g+Math.imul(ie,ee)|0,f=f+Math.imul(ie,Y)|0,f=f+Math.imul(ae,ee)|0,w=w+Math.imul(ae,Y)|0,g=g+Math.imul(Q,re)|0,f=f+Math.imul(Q,ne)|0,f=f+Math.imul(te,re)|0,w=w+Math.imul(te,ne)|0,g=g+Math.imul(J,ge)|0,f=f+Math.imul(J,ve)|0,f=f+Math.imul(X,ge)|0,w=w+Math.imul(X,ve)|0;var ur=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(ur>>>26)|0,ur&=67108863,g=Math.imul(ye,Re),f=Math.imul(ye,Ce),f=f+Math.imul(le,Re)|0,w=Math.imul(le,Ce),g=g+Math.imul(me,Ne)|0,f=f+Math.imul(me,Oe)|0,f=f+Math.imul(he,Ne)|0,w=w+Math.imul(he,Oe)|0,g=g+Math.imul(we,ke)|0,f=f+Math.imul(we,Be)|0,f=f+Math.imul(Ae,ke)|0,w=w+Math.imul(Ae,Be)|0,g=g+Math.imul(pe,De)|0,f=f+Math.imul(pe,je)|0,f=f+Math.imul(Me,De)|0,w=w+Math.imul(Me,je)|0,g=g+Math.imul(oe,ee)|0,f=f+Math.imul(oe,Y)|0,f=f+Math.imul(ce,ee)|0,w=w+Math.imul(ce,Y)|0,g=g+Math.imul(ie,re)|0,f=f+Math.imul(ie,ne)|0,f=f+Math.imul(ae,re)|0,w=w+Math.imul(ae,ne)|0,g=g+Math.imul(Q,ge)|0,f=f+Math.imul(Q,ve)|0,f=f+Math.imul(te,ge)|0,w=w+Math.imul(te,ve)|0;var wt=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(wt>>>26)|0,wt&=67108863,g=Math.imul(ye,Ne),f=Math.imul(ye,Oe),f=f+Math.imul(le,Ne)|0,w=Math.imul(le,Oe),g=g+Math.imul(me,ke)|0,f=f+Math.imul(me,Be)|0,f=f+Math.imul(he,ke)|0,w=w+Math.imul(he,Be)|0,g=g+Math.imul(we,De)|0,f=f+Math.imul(we,je)|0,f=f+Math.imul(Ae,De)|0,w=w+Math.imul(Ae,je)|0,g=g+Math.imul(pe,ee)|0,f=f+Math.imul(pe,Y)|0,f=f+Math.imul(Me,ee)|0,w=w+Math.imul(Me,Y)|0,g=g+Math.imul(oe,re)|0,f=f+Math.imul(oe,ne)|0,f=f+Math.imul(ce,re)|0,w=w+Math.imul(ce,ne)|0,g=g+Math.imul(ie,ge)|0,f=f+Math.imul(ie,ve)|0,f=f+Math.imul(ae,ge)|0,w=w+Math.imul(ae,ve)|0;var or=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(or>>>26)|0,or&=67108863,g=Math.imul(ye,ke),f=Math.imul(ye,Be),f=f+Math.imul(le,ke)|0,w=Math.imul(le,Be),g=g+Math.imul(me,De)|0,f=f+Math.imul(me,je)|0,f=f+Math.imul(he,De)|0,w=w+Math.imul(he,je)|0,g=g+Math.imul(we,ee)|0,f=f+Math.imul(we,Y)|0,f=f+Math.imul(Ae,ee)|0,w=w+Math.imul(Ae,Y)|0,g=g+Math.imul(pe,re)|0,f=f+Math.imul(pe,ne)|0,f=f+Math.imul(Me,re)|0,w=w+Math.imul(Me,ne)|0,g=g+Math.imul(oe,ge)|0,f=f+Math.imul(oe,ve)|0,f=f+Math.imul(ce,ge)|0,w=w+Math.imul(ce,ve)|0;var lr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(lr>>>26)|0,lr&=67108863,g=Math.imul(ye,De),f=Math.imul(ye,je),f=f+Math.imul(le,De)|0,w=Math.imul(le,je),g=g+Math.imul(me,ee)|0,f=f+Math.imul(me,Y)|0,f=f+Math.imul(he,ee)|0,w=w+Math.imul(he,Y)|0,g=g+Math.imul(we,re)|0,f=f+Math.imul(we,ne)|0,f=f+Math.imul(Ae,re)|0,w=w+Math.imul(Ae,ne)|0,g=g+Math.imul(pe,ge)|0,f=f+Math.imul(pe,ve)|0,f=f+Math.imul(Me,ge)|0,w=w+Math.imul(Me,ve)|0;var Mr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,g=Math.imul(ye,ee),f=Math.imul(ye,Y),f=f+Math.imul(le,ee)|0,w=Math.imul(le,Y),g=g+Math.imul(me,re)|0,f=f+Math.imul(me,ne)|0,f=f+Math.imul(he,re)|0,w=w+Math.imul(he,ne)|0,g=g+Math.imul(we,ge)|0,f=f+Math.imul(we,ve)|0,f=f+Math.imul(Ae,ge)|0,w=w+Math.imul(Ae,ve)|0;var Kr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,g=Math.imul(ye,re),f=Math.imul(ye,ne),f=f+Math.imul(le,re)|0,w=Math.imul(le,ne),g=g+Math.imul(me,ge)|0,f=f+Math.imul(me,ve)|0,f=f+Math.imul(he,ge)|0,w=w+Math.imul(he,ve)|0;var kr=(x+g|0)+((f&8191)<<13)|0;x=(w+(f>>>13)|0)+(kr>>>26)|0,kr&=67108863,g=Math.imul(ye,ge),f=Math.imul(ye,ve),f=f+Math.imul(le,ge)|0,w=Math.imul(le,ve);var Yr=(x+g|0)+((f&8191)<<13)|0;return x=(w+(f>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,v[0]=gt,v[1]=ot,v[2]=Ge,v[3]=Pt,v[4]=Lt,v[5]=St,v[6]=pt,v[7]=Tt,v[8]=vt,v[9]=zr,v[10]=ir,v[11]=ur,v[12]=wt,v[13]=or,v[14]=lr,v[15]=Mr,v[16]=Kr,v[17]=kr,v[18]=Yr,x!==0&&(v[19]=x,y.length++),y};Math.imul||(S=M);function P(E,c,l){l.negative=c.negative^E.negative,l.length=E.length+c.length;for(var y=0,d=0,h=0;h<l.length-1;h++){var v=d;d=0;for(var x=y&67108863,g=Math.min(h,c.length-1),f=Math.max(0,h-E.length+1);f<=g;f++){var w=h-f,D=E.words[w]|0,T=c.words[f]|0,C=D*T,z=C&67108863;v=v+(C/67108864|0)|0,z=z+x|0,x=z&67108863,v=v+(z>>>26)|0,d+=v>>>26,v&=67108863}l.words[h]=x,y=v,v=d}return y!==0?l.words[h]=y:l.length--,l.strip()}function k(E,c,l){var y=new R;return y.mulp(E,c,l)}i.prototype.mulTo=function(c,l){var y,d=this.length+c.length;return this.length===10&&c.length===10?y=S(this,c,l):d<63?y=M(this,c,l):d<1024?y=P(this,c,l):y=k(this,c,l),y};function R(E,c){this.x=E,this.y=c}R.prototype.makeRBT=function(c){for(var l=new Array(c),y=i.prototype._countBits(c)-1,d=0;d<c;d++)l[d]=this.revBin(d,y,c);return l},R.prototype.revBin=function(c,l,y){if(c===0||c===y-1)return c;for(var d=0,h=0;h<l;h++)d|=(c&1)<<l-h-1,c>>=1;return d},R.prototype.permute=function(c,l,y,d,h,v){for(var x=0;x<v;x++)d[x]=l[c[x]],h[x]=y[c[x]]},R.prototype.transform=function(c,l,y,d,h,v){this.permute(v,c,l,y,d,h);for(var x=1;x<h;x<<=1)for(var g=x<<1,f=Math.cos(2*Math.PI/g),w=Math.sin(2*Math.PI/g),D=0;D<h;D+=g)for(var T=f,C=w,z=0;z<x;z++){var G=y[D+z],V=d[D+z],Z=y[D+z+x],J=d[D+z+x],X=T*Z-C*J;J=T*J+C*Z,Z=X,y[D+z]=G+Z,d[D+z]=V+J,y[D+z+x]=G-Z,d[D+z+x]=V-J,z!==g&&(X=f*T-w*C,C=f*C+w*T,T=X)}},R.prototype.guessLen13b=function(c,l){var y=Math.max(l,c)|1,d=y&1,h=0;for(y=y/2|0;y;y=y>>>1)h++;return 1<<h+1+d},R.prototype.conjugate=function(c,l,y){if(!(y<=1))for(var d=0;d<y/2;d++){var h=c[d];c[d]=c[y-d-1],c[y-d-1]=h,h=l[d],l[d]=-l[y-d-1],l[y-d-1]=-h}},R.prototype.normalize13b=function(c,l){for(var y=0,d=0;d<l/2;d++){var h=Math.round(c[2*d+1]/l)*8192+Math.round(c[2*d]/l)+y;c[d]=h&67108863,h<67108864?y=0:y=h/67108864|0}return c},R.prototype.convert13b=function(c,l,y,d){for(var h=0,v=0;v<l;v++)h=h+(c[v]|0),y[2*v]=h&8191,h=h>>>13,y[2*v+1]=h&8191,h=h>>>13;for(v=2*l;v<d;++v)y[v]=0;r(h===0),r((h&-8192)===0)},R.prototype.stub=function(c){for(var l=new Array(c),y=0;y<c;y++)l[y]=0;return l},R.prototype.mulp=function(c,l,y){var d=2*this.guessLen13b(c.length,l.length),h=this.makeRBT(d),v=this.stub(d),x=new Array(d),g=new Array(d),f=new Array(d),w=new Array(d),D=new Array(d),T=new Array(d),C=y.words;C.length=d,this.convert13b(c.words,c.length,x,d),this.convert13b(l.words,l.length,w,d),this.transform(x,v,g,f,d,h),this.transform(w,v,D,T,d,h);for(var z=0;z<d;z++){var G=g[z]*D[z]-f[z]*T[z];f[z]=g[z]*T[z]+f[z]*D[z],g[z]=G}return this.conjugate(g,f,d),this.transform(g,f,C,v,d,h),this.conjugate(C,v,d),this.normalize13b(C,d),y.negative=c.negative^l.negative,y.length=c.length+l.length,y.strip()},i.prototype.mul=function(c){var l=new i(null);return l.words=new Array(this.length+c.length),this.mulTo(c,l)},i.prototype.mulf=function(c){var l=new i(null);return l.words=new Array(this.length+c.length),k(this,c,l)},i.prototype.imul=function(c){return this.clone().mulTo(c,this)},i.prototype.imuln=function(c){r(typeof c=="number"),r(c<67108864);for(var l=0,y=0;y<this.length;y++){var d=(this.words[y]|0)*c,h=(d&67108863)+(l&67108863);l>>=26,l+=d/67108864|0,l+=h>>>26,this.words[y]=h&67108863}return l!==0&&(this.words[y]=l,this.length++),this},i.prototype.muln=function(c){return this.clone().imuln(c)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(c){var l=A(c);if(l.length===0)return new i(1);for(var y=this,d=0;d<l.length&&l[d]===0;d++,y=y.sqr());if(++d<l.length)for(var h=y.sqr();d<l.length;d++,h=h.sqr())l[d]!==0&&(y=y.mul(h));return y},i.prototype.iushln=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26,d=67108863>>>26-l<<26-l,h;if(l!==0){var v=0;for(h=0;h<this.length;h++){var x=this.words[h]&d,g=(this.words[h]|0)-x<<l;this.words[h]=g|v,v=x>>>26-l}v&&(this.words[h]=v,this.length++)}if(y!==0){for(h=this.length-1;h>=0;h--)this.words[h+y]=this.words[h];for(h=0;h<y;h++)this.words[h]=0;this.length+=y}return this.strip()},i.prototype.ishln=function(c){return r(this.negative===0),this.iushln(c)},i.prototype.iushrn=function(c,l,y){r(typeof c=="number"&&c>=0);var d;l?d=(l-l%26)/26:d=0;var h=c%26,v=Math.min((c-h)/26,this.length),x=67108863^67108863>>>h<<h,g=y;if(d-=v,d=Math.max(0,d),g){for(var f=0;f<v;f++)g.words[f]=this.words[f];g.length=v}if(v!==0)if(this.length>v)for(this.length-=v,f=0;f<this.length;f++)this.words[f]=this.words[f+v];else this.words[0]=0,this.length=1;var w=0;for(f=this.length-1;f>=0&&(w!==0||f>=d);f--){var D=this.words[f]|0;this.words[f]=w<<26-h|D>>>h,w=D&x}return g&&w!==0&&(g.words[g.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(c,l,y){return r(this.negative===0),this.iushrn(c,l,y)},i.prototype.shln=function(c){return this.clone().ishln(c)},i.prototype.ushln=function(c){return this.clone().iushln(c)},i.prototype.shrn=function(c){return this.clone().ishrn(c)},i.prototype.ushrn=function(c){return this.clone().iushrn(c)},i.prototype.testn=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26,d=1<<l;if(this.length<=y)return!1;var h=this.words[y];return!!(h&d)},i.prototype.imaskn=function(c){r(typeof c=="number"&&c>=0);var l=c%26,y=(c-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(l!==0&&y++,this.length=Math.min(y,this.length),l!==0){var d=67108863^67108863>>>l<<l;this.words[this.length-1]&=d}return this.strip()},i.prototype.maskn=function(c){return this.clone().imaskn(c)},i.prototype.iaddn=function(c){return r(typeof c=="number"),r(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},i.prototype._iaddn=function(c){this.words[0]+=c;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(c){if(r(typeof c=="number"),r(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(c){return this.clone().iaddn(c)},i.prototype.subn=function(c){return this.clone().isubn(c)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(c,l,y){var d=c.length+y,h;this._expand(d);var v,x=0;for(h=0;h<c.length;h++){v=(this.words[h+y]|0)+x;var g=(c.words[h]|0)*l;v-=g&67108863,x=(v>>26)-(g/67108864|0),this.words[h+y]=v&67108863}for(;h<this.length-y;h++)v=(this.words[h+y]|0)+x,x=v>>26,this.words[h+y]=v&67108863;if(x===0)return this.strip();for(r(x===-1),x=0,h=0;h<this.length;h++)v=-(this.words[h]|0)+x,x=v>>26,this.words[h]=v&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(c,l){var y=this.length-c.length,d=this.clone(),h=c,v=h.words[h.length-1]|0,x=this._countBits(v);y=26-x,y!==0&&(h=h.ushln(y),d.iushln(y),v=h.words[h.length-1]|0);var g=d.length-h.length,f;if(l!=="mod"){f=new i(null),f.length=g+1,f.words=new Array(f.length);for(var w=0;w<f.length;w++)f.words[w]=0}var D=d.clone()._ishlnsubmul(h,1,g);D.negative===0&&(d=D,f&&(f.words[g]=1));for(var T=g-1;T>=0;T--){var C=(d.words[h.length+T]|0)*67108864+(d.words[h.length+T-1]|0);for(C=Math.min(C/v|0,67108863),d._ishlnsubmul(h,C,T);d.negative!==0;)C--,d.negative=0,d._ishlnsubmul(h,1,T),d.isZero()||(d.negative^=1);f&&(f.words[T]=C)}return f&&f.strip(),d.strip(),l!=="div"&&y!==0&&d.iushrn(y),{div:f||null,mod:d}},i.prototype.divmod=function(c,l,y){if(r(!c.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var d,h,v;return this.negative!==0&&c.negative===0?(v=this.neg().divmod(c,l),l!=="mod"&&(d=v.div.neg()),l!=="div"&&(h=v.mod.neg(),y&&h.negative!==0&&h.iadd(c)),{div:d,mod:h}):this.negative===0&&c.negative!==0?(v=this.divmod(c.neg(),l),l!=="mod"&&(d=v.div.neg()),{div:d,mod:v.mod}):this.negative&c.negative?(v=this.neg().divmod(c.neg(),l),l!=="div"&&(h=v.mod.neg(),y&&h.negative!==0&&h.isub(c)),{div:v.div,mod:h}):c.length>this.length||this.cmp(c)<0?{div:new i(0),mod:this}:c.length===1?l==="div"?{div:this.divn(c.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new i(this.modn(c.words[0]))}:this._wordDiv(c,l)},i.prototype.div=function(c){return this.divmod(c,"div",!1).div},i.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},i.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},i.prototype.divRound=function(c){var l=this.divmod(c);if(l.mod.isZero())return l.div;var y=l.div.negative!==0?l.mod.isub(c):l.mod,d=c.ushrn(1),h=c.andln(1),v=y.cmp(d);return v<0||h===1&&v===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(c){r(c<=67108863);for(var l=(1<<26)%c,y=0,d=this.length-1;d>=0;d--)y=(l*y+(this.words[d]|0))%c;return y},i.prototype.idivn=function(c){r(c<=67108863);for(var l=0,y=this.length-1;y>=0;y--){var d=(this.words[y]|0)+l*67108864;this.words[y]=d/c|0,l=d%c}return this.strip()},i.prototype.divn=function(c){return this.clone().idivn(c)},i.prototype.egcd=function(c){r(c.negative===0),r(!c.isZero());var l=this,y=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var d=new i(1),h=new i(0),v=new i(0),x=new i(1),g=0;l.isEven()&&y.isEven();)l.iushrn(1),y.iushrn(1),++g;for(var f=y.clone(),w=l.clone();!l.isZero();){for(var D=0,T=1;!(l.words[0]&T)&&D<26;++D,T<<=1);if(D>0)for(l.iushrn(D);D-- >0;)(d.isOdd()||h.isOdd())&&(d.iadd(f),h.isub(w)),d.iushrn(1),h.iushrn(1);for(var C=0,z=1;!(y.words[0]&z)&&C<26;++C,z<<=1);if(C>0)for(y.iushrn(C);C-- >0;)(v.isOdd()||x.isOdd())&&(v.iadd(f),x.isub(w)),v.iushrn(1),x.iushrn(1);l.cmp(y)>=0?(l.isub(y),d.isub(v),h.isub(x)):(y.isub(l),v.isub(d),x.isub(h))}return{a:v,b:x,gcd:y.iushln(g)}},i.prototype._invmp=function(c){r(c.negative===0),r(!c.isZero());var l=this,y=c.clone();l.negative!==0?l=l.umod(c):l=l.clone();for(var d=new i(1),h=new i(0),v=y.clone();l.cmpn(1)>0&&y.cmpn(1)>0;){for(var x=0,g=1;!(l.words[0]&g)&&x<26;++x,g<<=1);if(x>0)for(l.iushrn(x);x-- >0;)d.isOdd()&&d.iadd(v),d.iushrn(1);for(var f=0,w=1;!(y.words[0]&w)&&f<26;++f,w<<=1);if(f>0)for(y.iushrn(f);f-- >0;)h.isOdd()&&h.iadd(v),h.iushrn(1);l.cmp(y)>=0?(l.isub(y),d.isub(h)):(y.isub(l),h.isub(d))}var D;return l.cmpn(1)===0?D=d:D=h,D.cmpn(0)<0&&D.iadd(c),D},i.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var l=this.clone(),y=c.clone();l.negative=0,y.negative=0;for(var d=0;l.isEven()&&y.isEven();d++)l.iushrn(1),y.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;y.isEven();)y.iushrn(1);var h=l.cmp(y);if(h<0){var v=l;l=y,y=v}else if(h===0||y.cmpn(1)===0)break;l.isub(y)}while(!0);return y.iushln(d)},i.prototype.invm=function(c){return this.egcd(c).a.umod(c)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(c){return this.words[0]&c},i.prototype.bincn=function(c){r(typeof c=="number");var l=c%26,y=(c-l)/26,d=1<<l;if(this.length<=y)return this._expand(y+1),this.words[y]|=d,this;for(var h=d,v=y;h!==0&&v<this.length;v++){var x=this.words[v]|0;x+=h,h=x>>>26,x&=67108863,this.words[v]=x}return h!==0&&(this.words[v]=h,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(c){var l=c<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var y;if(this.length>1)y=1;else{l&&(c=-c),r(c<=67108863,"Number is too big");var d=this.words[0]|0;y=d===c?0:d<c?-1:1}return this.negative!==0?-y|0:y},i.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var l=this.ucmp(c);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var l=0,y=this.length-1;y>=0;y--){var d=this.words[y]|0,h=c.words[y]|0;if(d!==h){d<h?l=-1:d>h&&(l=1);break}}return l},i.prototype.gtn=function(c){return this.cmpn(c)===1},i.prototype.gt=function(c){return this.cmp(c)===1},i.prototype.gten=function(c){return this.cmpn(c)>=0},i.prototype.gte=function(c){return this.cmp(c)>=0},i.prototype.ltn=function(c){return this.cmpn(c)===-1},i.prototype.lt=function(c){return this.cmp(c)===-1},i.prototype.lten=function(c){return this.cmpn(c)<=0},i.prototype.lte=function(c){return this.cmp(c)<=0},i.prototype.eqn=function(c){return this.cmpn(c)===0},i.prototype.eq=function(c){return this.cmp(c)===0},i.red=function(c){return new L(c)},i.prototype.toRed=function(c){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(c){return this.red=c,this},i.prototype.forceRed=function(c){return r(!this.red,"Already a number in reduction context"),this._forceRed(c)},i.prototype.redAdd=function(c){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},i.prototype.redIAdd=function(c){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},i.prototype.redSub=function(c){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},i.prototype.redISub=function(c){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},i.prototype.redShl=function(c){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},i.prototype.redMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},i.prototype.redIMul=function(c){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(c){return r(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var B={k256:null,p224:null,p192:null,p25519:null};function I(E,c){this.name=E,this.p=new i(c,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}I.prototype._tmp=function(){var c=new i(null);return c.words=new Array(Math.ceil(this.n/13)),c},I.prototype.ireduce=function(c){var l=c,y;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),y=l.bitLength();while(y>this.n);var d=y<this.n?-1:l.ucmp(this.p);return d===0?(l.words[0]=0,l.length=1):d>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},I.prototype.split=function(c,l){c.iushrn(this.n,0,l)},I.prototype.imulK=function(c){return c.imul(this.k)};function q(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(q,I),q.prototype.split=function(c,l){for(var y=4194303,d=Math.min(c.length,9),h=0;h<d;h++)l.words[h]=c.words[h];if(l.length=d,c.length<=9){c.words[0]=0,c.length=1;return}var v=c.words[9];for(l.words[l.length++]=v&y,h=10;h<c.length;h++){var x=c.words[h]|0;c.words[h-10]=(x&y)<<4|v>>>22,v=x}v>>>=22,c.words[h-10]=v,v===0&&c.length>10?c.length-=10:c.length-=9},q.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var l=0,y=0;y<c.length;y++){var d=c.words[y]|0;l+=d*977,c.words[y]=l&67108863,l=d*64+(l/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function $(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n($,I);function U(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(U,I);function F(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(F,I),F.prototype.imulK=function(c){for(var l=0,y=0;y<c.length;y++){var d=(c.words[y]|0)*19+l,h=d&67108863;d>>>=26,c.words[y]=h,l=d}return l!==0&&(c.words[c.length++]=l),c},i._prime=function(c){if(B[c])return B[c];var l;if(c==="k256")l=new q;else if(c==="p224")l=new $;else if(c==="p192")l=new U;else if(c==="p25519")l=new F;else throw new Error("Unknown prime "+c);return B[c]=l,l};function L(E){if(typeof E=="string"){var c=i._prime(E);this.m=c.p,this.prime=c}else r(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}L.prototype._verify1=function(c){r(c.negative===0,"red works only with positives"),r(c.red,"red works only with red numbers")},L.prototype._verify2=function(c,l){r((c.negative|l.negative)===0,"red works only with positives"),r(c.red&&c.red===l.red,"red works only with red numbers")},L.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):c.umod(this.m)._forceRed(this)},L.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},L.prototype.add=function(c,l){this._verify2(c,l);var y=c.add(l);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},L.prototype.iadd=function(c,l){this._verify2(c,l);var y=c.iadd(l);return y.cmp(this.m)>=0&&y.isub(this.m),y},L.prototype.sub=function(c,l){this._verify2(c,l);var y=c.sub(l);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},L.prototype.isub=function(c,l){this._verify2(c,l);var y=c.isub(l);return y.cmpn(0)<0&&y.iadd(this.m),y},L.prototype.shl=function(c,l){return this._verify1(c),this.imod(c.ushln(l))},L.prototype.imul=function(c,l){return this._verify2(c,l),this.imod(c.imul(l))},L.prototype.mul=function(c,l){return this._verify2(c,l),this.imod(c.mul(l))},L.prototype.isqr=function(c){return this.imul(c,c.clone())},L.prototype.sqr=function(c){return this.mul(c,c)},L.prototype.sqrt=function(c){if(c.isZero())return c.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var y=this.m.add(new i(1)).iushrn(2);return this.pow(c,y)}for(var d=this.m.subn(1),h=0;!d.isZero()&&d.andln(1)===0;)h++,d.iushrn(1);r(!d.isZero());var v=new i(1).toRed(this),x=v.redNeg(),g=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,g).cmp(x)!==0;)f.redIAdd(x);for(var w=this.pow(f,d),D=this.pow(c,d.addn(1).iushrn(1)),T=this.pow(c,d),C=h;T.cmp(v)!==0;){for(var z=T,G=0;z.cmp(v)!==0;G++)z=z.redSqr();r(G<C);var V=this.pow(w,new i(1).iushln(C-G-1));D=D.redMul(V),w=V.redSqr(),T=T.redMul(w),C=G}return D},L.prototype.invm=function(c){var l=c._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},L.prototype.pow=function(c,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return c.clone();var y=4,d=new Array(1<<y);d[0]=new i(1).toRed(this),d[1]=c;for(var h=2;h<d.length;h++)d[h]=this.mul(d[h-1],c);var v=d[0],x=0,g=0,f=l.bitLength()%26;for(f===0&&(f=26),h=l.length-1;h>=0;h--){for(var w=l.words[h],D=f-1;D>=0;D--){var T=w>>D&1;if(v!==d[0]&&(v=this.sqr(v)),T===0&&x===0){g=0;continue}x<<=1,x|=T,g++,!(g!==y&&(h!==0||D!==0))&&(v=this.mul(v,d[x]),g=0,x=0)}f=26}return v},L.prototype.convertTo=function(c){var l=c.umod(this.m);return l===c?l.clone():l},L.prototype.convertFrom=function(c){var l=c.clone();return l.red=null,l},i.mont=function(c){return new W(c)};function W(E){L.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(W,L),W.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},W.prototype.convertFrom=function(c){var l=this.imod(c.mul(this.rinv));return l.red=null,l},W.prototype.imul=function(c,l){if(c.isZero()||l.isZero())return c.words[0]=0,c.length=1,c;var y=c.imul(l),d=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=y.isub(d).iushrn(this.shift),v=h;return h.cmp(this.m)>=0?v=h.isub(this.m):h.cmpn(0)<0&&(v=h.iadd(this.m)),v._forceRed(this)},W.prototype.mul=function(c,l){if(c.isZero()||l.isZero())return new i(0)._forceRed(this);var y=c.mul(l),d=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=y.isub(d).iushrn(this.shift),v=h;return h.cmp(this.m)>=0?v=h.isub(this.m):h.cmpn(0)<0&&(v=h.iadd(this.m)),v._forceRed(this)},W.prototype.invm=function(c){var l=this.imod(c._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(typeof BN>"u"||BN,rue)});var DN=H((TBt,iue)=>{_();var nue=B4(),Aze=Wr().Buffer;function Pze(t,e){return Aze.from(t.toRed(nue.mont(e.modulus)).redPow(new nue(e.publicExponent)).fromRed().toArray())}iue.exports=Pze});var cue=H((IBt,aue)=>{_();var Tze=AE(),CN=fy(),Rze=vw(),oue=kN(),sue=ON(),NN=B4(),Ize=DN(),kze=n4(),gu=Wr().Buffer;aue.exports=function(e,r,n){var i;e.padding?i=e.padding:n?i=1:i=4;var o=Tze(e),s;if(i===4)s=Oze(o,r);else if(i===1)s=Bze(o,r,n);else if(i===3){if(s=new NN(r),s.cmp(o.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return n?kze(s,o):Ize(s,o)};function Oze(t,e){var r=t.modulus.byteLength(),n=e.length,i=Rze("sha1").update(gu.alloc(0)).digest(),o=i.length,s=2*o;if(n>r-s-2)throw new Error("message too long");var a=gu.alloc(r-n-s-2),u=r-o-1,m=CN(o),p=sue(gu.concat([i,a,gu.alloc(1,1),e],u),oue(m,u)),b=sue(m,oue(p,o));return new NN(gu.concat([gu.alloc(1),b,p],r))}function Bze(t,e,r){var n=e.length,i=t.modulus.byteLength();if(n>i-11)throw new Error("message too long");var o;return r?o=gu.alloc(i-n-3,255):o=Dze(i-n-3),new NN(gu.concat([gu.from([0,r?1:2]),o,gu.alloc(1),e],i))}function Dze(t){for(var e=gu.allocUnsafe(t),r=0,n=CN(t*2),i=0,o;r<t;)i===n.length&&(n=CN(t*2),i=0),o=n[i++],o&&(e[r++]=o);return e}});var hue=H((OBt,due)=>{_();var Cze=AE(),fue=kN(),uue=ON(),lue=B4(),Nze=n4(),jze=vw(),qze=DN(),IE=Wr().Buffer;due.exports=function(e,r,n){var i;e.padding?i=e.padding:n?i=1:i=4;var o=Cze(e),s=o.modulus.byteLength();if(r.length>s||new lue(r).cmp(o.modulus)>=0)throw new Error("decryption error");var a;n?a=qze(new lue(r),o):a=Nze(r,o);var u=IE.alloc(s-a.length);if(a=IE.concat([u,a],s),i===4)return $ze(o,a);if(i===1)return Lze(o,a,n);if(i===3)return a;throw new Error("unknown padding")};function $ze(t,e){var r=t.modulus.byteLength(),n=jze("sha1").update(IE.alloc(0)).digest(),i=n.length;if(e[0]!==0)throw new Error("decryption error");var o=e.slice(1,i+1),s=e.slice(i+1),a=uue(o,fue(s,i)),u=uue(s,fue(a,r-i-1));if(Uze(n,u.slice(0,i)))throw new Error("decryption error");for(var m=i;u[m]===0;)m++;if(u[m++]!==1)throw new Error("decryption error");return u.slice(m)}function Lze(t,e,r){for(var n=e.slice(0,2),i=2,o=0;e[i++]!==0;)if(i>=e.length){o++;break}var s=e.slice(2,i-1);if((n.toString("hex")!=="0002"&&!r||n.toString("hex")!=="0001"&&r)&&o++,s.length<8&&o++,o)throw new Error("decryption error");return e.slice(i)}function Uze(t,e){t=IE.from(t),e=IE.from(e);var r=0,n=t.length;t.length!==e.length&&(r++,n=Math.min(t.length,e.length));for(var i=-1;++i<n;)r+=t[i]^e[i];return r}});var pue=H(tg=>{_();tg.publicEncrypt=cue();tg.privateDecrypt=hue();tg.privateEncrypt=function(e,r){return tg.publicEncrypt(e,r,!0)};tg.publicDecrypt=function(e,r){return tg.privateDecrypt(e,r,!0)}});var Sue=H(kE=>{"use strict";_();function mue(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var gue=Wr(),yue=fy(),bue=gue.Buffer,vue=gue.kMaxLength,jN=globalThis.crypto||globalThis.msCrypto,wue=Math.pow(2,32)-1;function _ue(t,e){if(typeof t!="number"||t!==t)throw new TypeError("offset must be a number");if(t>wue||t<0)throw new TypeError("offset must be a uint32");if(t>vue||t>e)throw new RangeError("offset out of range")}function xue(t,e,r){if(typeof t!="number"||t!==t)throw new TypeError("size must be a number");if(t>wue||t<0)throw new TypeError("size must be a uint32");if(t+e>r||t>vue)throw new RangeError("buffer too small")}jN&&jN.getRandomValues||!O.default.browser?(kE.randomFill=Fze,kE.randomFillSync=zze):(kE.randomFill=mue,kE.randomFillSync=mue);function Fze(t,e,r,n){if(!bue.isBuffer(t)&&!(t instanceof globalThis.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof e=="function")n=e,e=0,r=t.length;else if(typeof r=="function")n=r,r=t.length-e;else if(typeof n!="function")throw new TypeError('"cb" argument must be a function');return _ue(e,t.length),xue(r,e,t.length),Eue(t,e,r,n)}function Eue(t,e,r,n){if(O.default.browser){var i=t.buffer,o=new Uint8Array(i,e,r);if(jN.getRandomValues(o),n){O.default.nextTick(function(){n(null,t)});return}return t}if(n){yue(r,function(a,u){if(a)return n(a);u.copy(t,e),n(null,t)});return}var s=yue(r);return s.copy(t,e),t}function zze(t,e,r){if(typeof e>"u"&&(e=0),!bue.isBuffer(t)&&!(t instanceof globalThis.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return _ue(e,t.length),r===void 0&&(r=t.length-e),xue(r,e,t.length),Eue(t,e,r)}});var j5=H(dr=>{"use strict";_();dr.randomBytes=dr.rng=dr.pseudoRandomBytes=dr.prng=fy();dr.createHash=dr.Hash=vw();dr.createHmac=dr.Hmac=TD();var Kze=qie(),Wze=Object.keys(Kze),Gze=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(Wze);dr.getHashes=function(){return Gze};var Mue=qD();dr.pbkdf2=Mue.pbkdf2;dr.pbkdf2Sync=Mue.pbkdf2Sync;var Dl=sse();dr.Cipher=Dl.Cipher;dr.createCipher=Dl.createCipher;dr.Cipheriv=Dl.Cipheriv;dr.createCipheriv=Dl.createCipheriv;dr.Decipher=Dl.Decipher;dr.createDecipher=Dl.createDecipher;dr.Decipheriv=Dl.Decipheriv;dr.createDecipheriv=Dl.createDecipheriv;dr.getCiphers=Dl.getCiphers;dr.listCiphers=Dl.listCiphers;var OE=_se();dr.DiffieHellmanGroup=OE.DiffieHellmanGroup;dr.createDiffieHellmanGroup=OE.createDiffieHellmanGroup;dr.getDiffieHellman=OE.getDiffieHellman;dr.createDiffieHellman=OE.createDiffieHellman;dr.DiffieHellman=OE.DiffieHellman;var D4=Zfe();dr.createSign=D4.createSign;dr.Sign=D4.Sign;dr.createVerify=D4.createVerify;dr.Verify=D4.Verify;dr.createECDH=Xfe();var C4=pue();dr.publicEncrypt=C4.publicEncrypt;dr.privateEncrypt=C4.privateEncrypt;dr.publicDecrypt=C4.publicDecrypt;dr.privateDecrypt=C4.privateDecrypt;var Aue=Sue();dr.randomFill=Aue.randomFill;dr.randomFillSync=Aue.randomFillSync;dr.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))};dr.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}});var bu=H(hr=>{"use strict";_();Object.defineProperty(hr,"__esModule",{value:!0});hr.setBigUint64=hr.Hash=hr.equalBytes=hr.ensureBytes=hr.checkOpts=hr.concatBytes=hr.toBytes=hr.bytesToUtf8=hr.utf8ToBytes=hr.asyncLoop=hr.nextTick=hr.hexToBytes=hr.bytesToHex=hr.isLE=hr.createView=hr.u32=hr.u16=hr.u8=void 0;var $N=t=>t instanceof Uint8Array,Vze=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);hr.u8=Vze;var Hze=t=>new Uint16Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/2));hr.u16=Hze;var Zze=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));hr.u32=Zze;var Jze=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);hr.createView=Jze;hr.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!hr.isLE)throw new Error("Non little-endian hardware is not supported");var Yze=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Qze(t){if(!$N(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Yze[t[r]];return e}hr.bytesToHex=Qze;function Xze(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(e/2);for(let n=0;n<r.length;n++){let i=n*2,o=t.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[n]=s}return r}hr.hexToBytes=Xze;var eKe=async()=>{};hr.nextTick=eKe;async function tKe(t,e,r){let n=Date.now();for(let i=0;i<t;i++){r(i);let o=Date.now()-n;o>=0&&o<e||(await(0,hr.nextTick)(),n+=o)}}hr.asyncLoop=tKe;function Pue(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}hr.utf8ToBytes=Pue;function rKe(t){return new TextDecoder().decode(t)}hr.bytesToUtf8=rKe;function nKe(t){if(typeof t=="string"&&(t=Pue(t)),!$N(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}hr.toBytes=nKe;function iKe(...t){let e=new Uint8Array(t.reduce((n,i)=>n+i.length,0)),r=0;return t.forEach(n=>{if(!$N(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}hr.concatBytes=iKe;var oKe=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function sKe(t,e){if(e!==void 0&&(typeof e!="object"||!oKe(e)))throw new Error("options must be object or undefined");return Object.assign(t,e)}hr.checkOpts=sKe;function aKe(t,e){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");if(typeof e=="number"&&t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}hr.ensureBytes=aKe;function cKe(t,e){if(t.length!==e.length)throw new Error("equalBytes: Different size of Uint8Arrays");let r=!0;for(let n=0;n<t.length;n++)r&&(r=t[n]===e[n]);return r}hr.equalBytes=cKe;var qN=class{};hr.Hash=qN;function fKe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,m=n?0:4;t.setUint32(e+u,s,n),t.setUint32(e+m,a,n)}hr.setBigUint64=fKe});var BE=H(Js=>{"use strict";_();Object.defineProperty(Js,"__esModule",{value:!0});Js.AEAD_TAG_LENGTH=Js.XCHACHA20_NONCE_LENGTH=Js.CURVE25519_PUBLIC_KEY_SIZE=Js.ETH_PUBLIC_KEY_SIZE=Js.UNCOMPRESSED_PUBLIC_KEY_SIZE=Js.COMPRESSED_PUBLIC_KEY_SIZE=Js.SECRET_KEY_LENGTH=void 0;Js.SECRET_KEY_LENGTH=32;Js.COMPRESSED_PUBLIC_KEY_SIZE=33;Js.UNCOMPRESSED_PUBLIC_KEY_SIZE=65;Js.ETH_PUBLIC_KEY_SIZE=64;Js.CURVE25519_PUBLIC_KEY_SIZE=32;Js.XCHACHA20_NONCE_LENGTH=24;Js.AEAD_TAG_LENGTH=16});var rg=H(Yn=>{"use strict";_();Object.defineProperty(Yn,"__esModule",{value:!0});Yn.ephemeralKeySize=Yn.symmetricNonceLength=Yn.symmetricAlgorithm=Yn.isHkdfKeyCompressed=Yn.isEphemeralKeyCompressed=Yn.ellipticCurve=Yn.ECIES_CONFIG=void 0;var N4=BE(),uKe=function(){function t(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16}return t}();Yn.ECIES_CONFIG=new uKe;var lKe=function(){return Yn.ECIES_CONFIG.ellipticCurve};Yn.ellipticCurve=lKe;var dKe=function(){return Yn.ECIES_CONFIG.isEphemeralKeyCompressed};Yn.isEphemeralKeyCompressed=dKe;var hKe=function(){return Yn.ECIES_CONFIG.isHkdfKeyCompressed};Yn.isHkdfKeyCompressed=hKe;var pKe=function(){return Yn.ECIES_CONFIG.symmetricAlgorithm};Yn.symmetricAlgorithm=pKe;var mKe=function(){return Yn.ECIES_CONFIG.symmetricNonceLength};Yn.symmetricNonceLength=mKe;var yKe=function(){var t={secp256k1:Yn.ECIES_CONFIG.isEphemeralKeyCompressed?N4.COMPRESSED_PUBLIC_KEY_SIZE:N4.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:N4.CURVE25519_PUBLIC_KEY_SIZE,ed25519:N4.CURVE25519_PUBLIC_KEY_SIZE};if(Yn.ECIES_CONFIG.ellipticCurve in t)return t[Yn.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")};Yn.ephemeralKeySize=yKe});var Tue=H(j4=>{"use strict";_();Object.defineProperty(j4,"__esModule",{value:!0});j4.crypto=void 0;j4.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var LN=H(Jw=>{"use strict";_();Object.defineProperty(Jw,"__esModule",{value:!0});Jw.getWebcryptoSubtle=Jw.randomBytes=void 0;var ng=Tue();function gKe(t=32){if(ng.crypto&&typeof ng.crypto.getRandomValues=="function")return ng.crypto.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}Jw.randomBytes=gKe;function bKe(){if(ng.crypto&&typeof ng.crypto.subtle=="object"&&ng.crypto.subtle!=null)return ng.crypto.subtle;throw new Error("crypto.subtle must be defined")}Jw.getWebcryptoSubtle=bKe});var $4=H(hs=>{"use strict";_();Object.defineProperty(hs,"__esModule",{value:!0});hs.output=hs.exists=hs.hash=hs.bytes=hs.bool=hs.number=hs.isBytes=void 0;function q4(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}hs.number=q4;function Rue(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}hs.bool=Rue;function Iue(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}hs.isBytes=Iue;function UN(t,...e){if(!Iue(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}hs.bytes=UN;function kue(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");q4(t.outputLen),q4(t.blockLen)}hs.hash=kue;function Oue(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}hs.exists=Oue;function Bue(t,e){UN(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}hs.output=Bue;var vKe={number:q4,bool:Rue,bytes:UN,hash:kue,exists:Oue,output:Bue};hs.default=vKe});var Due=H(L4=>{"use strict";_();Object.defineProperty(L4,"__esModule",{value:!0});L4.crypto=void 0;L4.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var m0=H(At=>{"use strict";_();Object.defineProperty(At,"__esModule",{value:!0});At.randomBytes=At.wrapXOFConstructorWithOpts=At.wrapConstructorWithOpts=At.wrapConstructor=At.checkOpts=At.Hash=At.concatBytes=At.toBytes=At.utf8ToBytes=At.asyncLoop=At.nextTick=At.hexToBytes=At.bytesToHex=At.byteSwap32=At.byteSwapIfBE=At.byteSwap=At.isLE=At.rotl=At.rotr=At.createView=At.u32=At.u8=At.isBytes=void 0;var FN=Due(),KN=$4();function wKe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}At.isBytes=wKe;var _Ke=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);At.u8=_Ke;var xKe=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));At.u32=xKe;var EKe=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);At.createView=EKe;var SKe=(t,e)=>t<<32-e|t>>>e;At.rotr=SKe;var MKe=(t,e)=>t<<e|t>>>32-e>>>0;At.rotl=MKe;At.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;var AKe=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;At.byteSwap=AKe;At.byteSwapIfBE=At.isLE?t=>t:t=>(0,At.byteSwap)(t);function PKe(t){for(let e=0;e<t.length;e++)t[e]=(0,At.byteSwap)(t[e])}At.byteSwap32=PKe;var TKe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function RKe(t){(0,KN.bytes)(t);let e="";for(let r=0;r<t.length;r++)e+=TKe[t[r]];return e}At.bytesToHex=RKe;var xh={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Cue(t){if(t>=xh._0&&t<=xh._9)return t-xh._0;if(t>=xh._A&&t<=xh._F)return t-(xh._A-10);if(t>=xh._a&&t<=xh._f)return t-(xh._a-10)}function IKe(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=Cue(t.charCodeAt(o)),a=Cue(t.charCodeAt(o+1));if(s===void 0||a===void 0){let u=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+o)}n[i]=s*16+a}return n}At.hexToBytes=IKe;var kKe=async()=>{};At.nextTick=kKe;async function OKe(t,e,r){let n=Date.now();for(let i=0;i<t;i++){r(i);let o=Date.now()-n;o>=0&&o<e||(await(0,At.nextTick)(),n+=o)}}At.asyncLoop=OKe;function Nue(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}At.utf8ToBytes=Nue;function U4(t){return typeof t=="string"&&(t=Nue(t)),(0,KN.bytes)(t),t}At.toBytes=U4;function BKe(...t){let e=0;for(let n=0;n<t.length;n++){let i=t[n];(0,KN.bytes)(i),e+=i.length}let r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}At.concatBytes=BKe;var zN=class{clone(){return this._cloneInto()}};At.Hash=zN;var DKe={}.toString;function CKe(t,e){if(e!==void 0&&DKe.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}At.checkOpts=CKe;function NKe(t){let e=n=>t().update(U4(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}At.wrapConstructor=NKe;function jKe(t){let e=(n,i)=>t(i).update(U4(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}At.wrapConstructorWithOpts=jKe;function qKe(t){let e=(n,i)=>t(i).update(U4(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}At.wrapXOFConstructorWithOpts=qKe;function $Ke(t=32){if(FN.crypto&&typeof FN.crypto.getRandomValues=="function")return FN.crypto.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}At.randomBytes=$Ke});var VN=H(y0=>{"use strict";_();Object.defineProperty(y0,"__esModule",{value:!0});y0.HashMD=y0.Maj=y0.Chi=void 0;var WN=$4(),DE=m0();function LKe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,m=n?0:4;t.setUint32(e+u,s,n),t.setUint32(e+m,a,n)}var UKe=(t,e,r)=>t&e^~t&r;y0.Chi=UKe;var FKe=(t,e,r)=>t&e^t&r^e&r;y0.Maj=FKe;var GN=class extends DE.Hash{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,DE.createView)(this.buffer)}update(e){(0,WN.exists)(this);let{view:r,buffer:n,blockLen:i}=this;e=(0,DE.toBytes)(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let u=(0,DE.createView)(e);for(;i<=o-s;s+=i)this.process(u,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,WN.exists)(this),(0,WN.output)(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let b=s;b<i;b++)r[b]=0;LKe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,DE.createView)(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let m=u/4,p=this.get();if(m>p.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<m;b++)a.setUint32(4*b,p[b],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};y0.HashMD=GN});var ile=H(Wt=>{"use strict";_();Object.defineProperty(Wt,"__esModule",{value:!0});Wt.add5L=Wt.add5H=Wt.add4H=Wt.add4L=Wt.add3H=Wt.add3L=Wt.add=Wt.rotlBL=Wt.rotlBH=Wt.rotlSL=Wt.rotlSH=Wt.rotr32L=Wt.rotr32H=Wt.rotrBL=Wt.rotrBH=Wt.rotrSL=Wt.rotrSH=Wt.shrSL=Wt.shrSH=Wt.toBig=Wt.split=Wt.fromBig=void 0;var F4=BigInt(2**32-1),HN=BigInt(32);function ZN(t,e=!1){return e?{h:Number(t&F4),l:Number(t>>HN&F4)}:{h:Number(t>>HN&F4)|0,l:Number(t&F4)|0}}Wt.fromBig=ZN;function jue(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:o,l:s}=ZN(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]}Wt.split=jue;var que=(t,e)=>BigInt(t>>>0)<<HN|BigInt(e>>>0);Wt.toBig=que;var $ue=(t,e,r)=>t>>>r;Wt.shrSH=$ue;var Lue=(t,e,r)=>t<<32-r|e>>>r;Wt.shrSL=Lue;var Uue=(t,e,r)=>t>>>r|e<<32-r;Wt.rotrSH=Uue;var Fue=(t,e,r)=>t<<32-r|e>>>r;Wt.rotrSL=Fue;var zue=(t,e,r)=>t<<64-r|e>>>r-32;Wt.rotrBH=zue;var Kue=(t,e,r)=>t>>>r-32|e<<64-r;Wt.rotrBL=Kue;var Wue=(t,e)=>e;Wt.rotr32H=Wue;var Gue=(t,e)=>t;Wt.rotr32L=Gue;var Vue=(t,e,r)=>t<<r|e>>>32-r;Wt.rotlSH=Vue;var Hue=(t,e,r)=>e<<r|t>>>32-r;Wt.rotlSL=Hue;var Zue=(t,e,r)=>e<<r-32|t>>>64-r;Wt.rotlBH=Zue;var Jue=(t,e,r)=>t<<r-32|e>>>64-r;Wt.rotlBL=Jue;function Yue(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}Wt.add=Yue;var Que=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0);Wt.add3L=Que;var Xue=(t,e,r,n)=>e+r+n+(t/2**32|0)|0;Wt.add3H=Xue;var ele=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0);Wt.add4L=ele;var tle=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0;Wt.add4H=tle;var rle=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0);Wt.add5L=rle;var nle=(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0;Wt.add5H=nle;var zKe={fromBig:ZN,split:jue,toBig:que,shrSH:$ue,shrSL:Lue,rotrSH:Uue,rotrSL:Fue,rotrBH:zue,rotrBL:Kue,rotr32H:Wue,rotr32L:Gue,rotlSH:Vue,rotlSL:Hue,rotlBH:Zue,rotlBL:Jue,add:Yue,add3L:Que,add3H:Xue,add4L:ele,add4H:tle,add5H:nle,add5L:rle};Wt.default=zKe});var ole=H(bf=>{"use strict";_();Object.defineProperty(bf,"__esModule",{value:!0});bf.sha384=bf.sha512_256=bf.sha512_224=bf.sha512=bf.SHA512=void 0;var KKe=VN(),pr=ile(),z4=m0(),[WKe,GKe]=(()=>pr.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),g0=new Uint32Array(80),b0=new Uint32Array(80),ig=class extends KKe.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:u,Eh:m,El:p,Fh:b,Fl:A,Gh:M,Gl:S,Hh:P,Hl:k}=this;return[e,r,n,i,o,s,a,u,m,p,b,A,M,S,P,k]}set(e,r,n,i,o,s,a,u,m,p,b,A,M,S,P,k){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=u|0,this.Eh=m|0,this.El=p|0,this.Fh=b|0,this.Fl=A|0,this.Gh=M|0,this.Gl=S|0,this.Hh=P|0,this.Hl=k|0}process(e,r){for(let I=0;I<16;I++,r+=4)g0[I]=e.getUint32(r),b0[I]=e.getUint32(r+=4);for(let I=16;I<80;I++){let q=g0[I-15]|0,$=b0[I-15]|0,U=pr.default.rotrSH(q,$,1)^pr.default.rotrSH(q,$,8)^pr.default.shrSH(q,$,7),F=pr.default.rotrSL(q,$,1)^pr.default.rotrSL(q,$,8)^pr.default.shrSL(q,$,7),L=g0[I-2]|0,W=b0[I-2]|0,E=pr.default.rotrSH(L,W,19)^pr.default.rotrBH(L,W,61)^pr.default.shrSH(L,W,6),c=pr.default.rotrSL(L,W,19)^pr.default.rotrBL(L,W,61)^pr.default.shrSL(L,W,6),l=pr.default.add4L(F,c,b0[I-7],b0[I-16]),y=pr.default.add4H(l,U,E,g0[I-7],g0[I-16]);g0[I]=y|0,b0[I]=l|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:u,Dh:m,Dl:p,Eh:b,El:A,Fh:M,Fl:S,Gh:P,Gl:k,Hh:R,Hl:B}=this;for(let I=0;I<80;I++){let q=pr.default.rotrSH(b,A,14)^pr.default.rotrSH(b,A,18)^pr.default.rotrBH(b,A,41),$=pr.default.rotrSL(b,A,14)^pr.default.rotrSL(b,A,18)^pr.default.rotrBL(b,A,41),U=b&M^~b&P,F=A&S^~A&k,L=pr.default.add5L(B,$,F,GKe[I],b0[I]),W=pr.default.add5H(L,R,q,U,WKe[I],g0[I]),E=L|0,c=pr.default.rotrSH(n,i,28)^pr.default.rotrBH(n,i,34)^pr.default.rotrBH(n,i,39),l=pr.default.rotrSL(n,i,28)^pr.default.rotrBL(n,i,34)^pr.default.rotrBL(n,i,39),y=n&o^n&a^o&a,d=i&s^i&u^s&u;R=P|0,B=k|0,P=M|0,k=S|0,M=b|0,S=A|0,{h:b,l:A}=pr.default.add(m|0,p|0,W|0,E|0),m=a|0,p=u|0,a=o|0,u=s|0,o=n|0,s=i|0;let h=pr.default.add3L(E,l,d);n=pr.default.add3H(h,W,c,y),i=h|0}({h:n,l:i}=pr.default.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=pr.default.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:u}=pr.default.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:m,l:p}=pr.default.add(this.Dh|0,this.Dl|0,m|0,p|0),{h:b,l:A}=pr.default.add(this.Eh|0,this.El|0,b|0,A|0),{h:M,l:S}=pr.default.add(this.Fh|0,this.Fl|0,M|0,S|0),{h:P,l:k}=pr.default.add(this.Gh|0,this.Gl|0,P|0,k|0),{h:R,l:B}=pr.default.add(this.Hh|0,this.Hl|0,R|0,B|0),this.set(n,i,o,s,a,u,m,p,b,A,M,S,P,k,R,B)}roundClean(){g0.fill(0),b0.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};bf.SHA512=ig;var JN=class extends ig{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},YN=class extends ig{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},QN=class extends ig{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};bf.sha512=(0,z4.wrapConstructor)(()=>new ig);bf.sha512_224=(0,z4.wrapConstructor)(()=>new JN);bf.sha512_256=(0,z4.wrapConstructor)(()=>new YN);bf.sha384=(0,z4.wrapConstructor)(()=>new QN)});var vu=H(Qn=>{"use strict";_();Object.defineProperty(Qn,"__esModule",{value:!0});Qn.bitMask=void 0;Qn.isBytes=W4;Qn.abytes=G4;Qn.bytesToHex=ej;Qn.numberToHexUnpadded=fle;Qn.hexToNumber=tj;Qn.hexToBytes=V4;Qn.bytesToNumberBE=ZKe;Qn.bytesToNumberLE=JKe;Qn.numberToBytesBE=ule;Qn.numberToBytesLE=YKe;Qn.numberToVarBytesBE=QKe;Qn.ensureBytes=XKe;Qn.concatBytes=lle;Qn.equalBytes=eWe;Qn.utf8ToBytes=tWe;Qn.bitLen=rWe;Qn.bitGet=nWe;Qn.bitSet=iWe;Qn.createHmacDrbg=sWe;Qn.validateObject=cWe;var cle=BigInt(0),K4=BigInt(1),VKe=BigInt(2);function W4(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function G4(t){if(!W4(t))throw new Error("Uint8Array expected")}var HKe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ej(t){G4(t);let e="";for(let r=0;r<t.length;r++)e+=HKe[t[r]];return e}function fle(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function tj(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var Eh={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function sle(t){if(t>=Eh._0&&t<=Eh._9)return t-Eh._0;if(t>=Eh._A&&t<=Eh._F)return t-(Eh._A-10);if(t>=Eh._a&&t<=Eh._f)return t-(Eh._a-10)}function V4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=sle(t.charCodeAt(o)),a=sle(t.charCodeAt(o+1));if(s===void 0||a===void 0){let u=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+o)}n[i]=s*16+a}return n}function ZKe(t){return tj(ej(t))}function JKe(t){return G4(t),tj(ej(Uint8Array.from(t).reverse()))}function ule(t,e){return V4(t.toString(16).padStart(e*2,"0"))}function YKe(t,e){return ule(t,e).reverse()}function QKe(t){return V4(fle(t))}function XKe(t,e,r){let n;if(typeof e=="string")try{n=V4(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else if(W4(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function lle(...t){let e=0;for(let n=0;n<t.length;n++){let i=t[n];G4(i),e+=i.length}let r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}function eWe(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function tWe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function rWe(t){let e;for(e=0;t>cle;t>>=K4,e+=1);return e}function nWe(t,e){return t>>BigInt(e)&K4}function iWe(t,e,r){return t|(r?K4:cle)<<BigInt(e)}var oWe=t=>(VKe<<BigInt(t-1))-K4;Qn.bitMask=oWe;var XN=t=>new Uint8Array(t),ale=t=>Uint8Array.from(t);function sWe(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=XN(t),i=XN(t),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...b)=>r(i,n,...b),u=(b=XN())=>{i=a(ale([0]),b),n=a(),b.length!==0&&(i=a(ale([1]),b),n=a())},m=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let b=0,A=[];for(;b<e;){n=a();let M=n.slice();A.push(M),b+=n.length}return lle(...A)};return(b,A)=>{s(),u(b);let M;for(;!(M=A(m()));)u();return s(),M}}var aWe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||W4(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function cWe(t,e,r={}){let n=(i,o,s)=>{let a=aWe[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let u=t[i];if(!(s&&u===void 0)&&!a(u,t))throw new Error(`Invalid param ${String(i)}=${u} (${typeof u}), expected ${o}`)};for(let[i,o]of Object.entries(e))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return t}});var w0=H(fi=>{"use strict";_();Object.defineProperty(fi,"__esModule",{value:!0});fi.isNegativeLE=void 0;fi.mod=Ac;fi.pow=ple;fi.pow2=dWe;fi.invert=H4;fi.tonelliShanks=mle;fi.FpSqrt=yle;fi.validateField=mWe;fi.FpPow=gle;fi.FpInvertBatch=ble;fi.FpDiv=yWe;fi.FpIsSquare=gWe;fi.nLength=nj;fi.Field=bWe;fi.FpSqrtOdd=vWe;fi.FpSqrtEven=wWe;fi.hashToPrivateScalar=_We;fi.getFieldBytesLength=ij;fi.getMinHashLength=vle;fi.mapHashToField=xWe;var Pc=vu(),So=BigInt(0),In=BigInt(1),v0=BigInt(2),fWe=BigInt(3),rj=BigInt(4),dle=BigInt(5),hle=BigInt(8),uWe=BigInt(9),lWe=BigInt(16);function Ac(t,e){let r=t%e;return r>=So?r:e+r}function ple(t,e,r){if(r<=So||e<So)throw new Error("Expected power/modulo > 0");if(r===In)return So;let n=In;for(;e>So;)e&In&&(n=n*t%r),t=t*t%r,e>>=In;return n}function dWe(t,e,r){let n=t;for(;e-- >So;)n*=n,n%=r;return n}function H4(t,e){if(t===So||e<=So)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Ac(t,e),n=e,i=So,o=In,s=In,a=So;for(;r!==So;){let m=n/r,p=n%r,b=i-s*m,A=o-a*m;n=r,r=p,i=s,o=a,s=b,a=A}if(n!==In)throw new Error("invert: does not exist");return Ac(i,e)}function mle(t){let e=(t-In)/v0,r,n,i;for(r=t-In,n=0;r%v0===So;r/=v0,n++);for(i=v0;i<t&&ple(i,e,t)!==t-In;i++);if(n===1){let s=(t+In)/rj;return function(u,m){let p=u.pow(m,s);if(!u.eql(u.sqr(p),m))throw new Error("Cannot find square root");return p}}let o=(r+In)/v0;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let m=n,p=a.pow(a.mul(a.ONE,i),r),b=a.pow(u,o),A=a.pow(u,r);for(;!a.eql(A,a.ONE);){if(a.eql(A,a.ZERO))return a.ZERO;let M=1;for(let P=a.sqr(A);M<m&&!a.eql(P,a.ONE);M++)P=a.sqr(P);let S=a.pow(p,In<<BigInt(m-M-1));p=a.sqr(S),b=a.mul(b,S),A=a.mul(A,p),m=M}return b}}function yle(t){if(t%rj===fWe){let e=(t+In)/rj;return function(n,i){let o=n.pow(i,e);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(t%hle===dle){let e=(t-dle)/hle;return function(n,i){let o=n.mul(i,v0),s=n.pow(o,e),a=n.mul(i,s),u=n.mul(n.mul(a,v0),s),m=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(m),i))throw new Error("Cannot find square root");return m}}return t%lWe,mle(t)}var hWe=(t,e)=>(Ac(t,e)&In)===In;fi.isNegativeLE=hWe;var pWe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function mWe(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=pWe.reduce((n,i)=>(n[i]="function",n),e);return(0,Pc.validateObject)(t,r)}function gle(t,e,r){if(r<So)throw new Error("Expected power > 0");if(r===So)return t.ONE;if(r===In)return e;let n=t.ONE,i=e;for(;r>So;)r&In&&(n=t.mul(n,i)),i=t.sqr(i),r>>=In;return n}function ble(t,e){let r=new Array(e.length),n=e.reduce((o,s,a)=>t.is0(s)?o:(r[a]=o,t.mul(o,s)),t.ONE),i=t.inv(n);return e.reduceRight((o,s,a)=>t.is0(s)?o:(r[a]=t.mul(o,r[a]),t.mul(o,s)),i),r}function yWe(t,e,r){return t.mul(e,typeof r=="bigint"?H4(r,t.ORDER):t.inv(r))}function gWe(t){let e=(t.ORDER-In)/v0;return r=>{let n=t.pow(r,e);return t.eql(n,t.ZERO)||t.eql(n,t.ONE)}}function nj(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function bWe(t,e,r=!1,n={}){if(t<=So)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:i,nByteLength:o}=nj(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=yle(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:(0,Pc.bitMask)(i),ZERO:So,ONE:In,create:u=>Ac(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return So<=u&&u<t},is0:u=>u===So,isOdd:u=>(u&In)===In,neg:u=>Ac(-u,t),eql:(u,m)=>u===m,sqr:u=>Ac(u*u,t),add:(u,m)=>Ac(u+m,t),sub:(u,m)=>Ac(u-m,t),mul:(u,m)=>Ac(u*m,t),pow:(u,m)=>gle(a,u,m),div:(u,m)=>Ac(u*H4(m,t),t),sqrN:u=>u*u,addN:(u,m)=>u+m,subN:(u,m)=>u-m,mulN:(u,m)=>u*m,inv:u=>H4(u,t),sqrt:n.sqrt||(u=>s(a,u)),invertBatch:u=>ble(a,u),cmov:(u,m,p)=>p?m:u,toBytes:u=>r?(0,Pc.numberToBytesLE)(u,o):(0,Pc.numberToBytesBE)(u,o),fromBytes:u=>{if(u.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${u.length}`);return r?(0,Pc.bytesToNumberLE)(u):(0,Pc.bytesToNumberBE)(u)}});return Object.freeze(a)}function vWe(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?r:t.neg(r)}function wWe(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function _We(t,e,r=!1){t=(0,Pc.ensureBytes)("privateHash",t);let n=t.length,i=nj(e).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);let o=r?(0,Pc.bytesToNumberLE)(t):(0,Pc.bytesToNumberBE)(t);return Ac(o,e-In)+In}function ij(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function vle(t){let e=ij(t);return e+Math.ceil(e/2)}function xWe(t,e,r=!1){let n=t.length,i=ij(e),o=vle(e);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?(0,Pc.bytesToNumberBE)(t):(0,Pc.bytesToNumberLE)(t),a=Ac(s,e-In)+In;return r?(0,Pc.numberToBytesLE)(a,i):(0,Pc.numberToBytesBE)(a,i)}});var sj=H(Z4=>{"use strict";_();Object.defineProperty(Z4,"__esModule",{value:!0});Z4.wNAF=MWe;Z4.validateBasic=AWe;var wle=w0(),EWe=vu(),SWe=BigInt(0),oj=BigInt(1);function MWe(t,e){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(e/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=t.ZERO,a=i;for(;o>SWe;)o&oj&&(s=s.add(a)),a=a.double(),o>>=oj;return s},precomputeWindow(i,o){let{windows:s,windowSize:a}=n(o),u=[],m=i,p=m;for(let b=0;b<s;b++){p=m,u.push(p);for(let A=1;A<a;A++)p=p.add(m),u.push(p);m=p.double()}return u},wNAF(i,o,s){let{windows:a,windowSize:u}=n(i),m=t.ZERO,p=t.BASE,b=BigInt(2**i-1),A=2**i,M=BigInt(i);for(let S=0;S<a;S++){let P=S*u,k=Number(s&b);s>>=M,k>u&&(k-=A,s+=oj);let R=P,B=P+Math.abs(k)-1,I=S%2!==0,q=k<0;k===0?p=p.add(r(I,o[R])):m=m.add(r(q,o[B]))}return{p:m,f:p}},wNAFCached(i,o,s,a){let u=i._WINDOW_SIZE||1,m=o.get(i);return m||(m=this.precomputeWindow(i,u),u!==1&&o.set(i,a(m))),this.wNAF(u,m,s)}}}function AWe(t){return(0,wle.validateField)(t.Fp),(0,EWe.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,wle.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}});var xle=H(aj=>{"use strict";_();Object.defineProperty(aj,"__esModule",{value:!0});aj.twistedEdwards=kWe;var _le=sj(),PWe=w0(),Sh=vu(),_0=vu(),wu=BigInt(0),Tc=BigInt(1),J4=BigInt(2),TWe=BigInt(8),RWe={zip215:!0};function IWe(t){let e=(0,_le.validateBasic)(t);return Sh.validateObject(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function kWe(t){let e=IWe(t),{Fp:r,n,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:u}=e,m=J4<<BigInt(a*8)-Tc,p=r.create,b=e.uvRatio||((g,f)=>{try{return{isValid:!0,value:r.sqrt(g*r.inv(f))}}catch{return{isValid:!1,value:wu}}}),A=e.adjustScalarBytes||(g=>g),M=e.domain||((g,f,w)=>{if(f.length||w)throw new Error("Contexts/pre-hash are not supported");return g}),S=g=>typeof g=="bigint"&&wu<g,P=(g,f)=>S(g)&&S(f)&&g<f,k=g=>g===wu||P(g,m);function R(g,f){if(P(g,f))return g;throw new Error(`Expected valid scalar < ${f}, got ${typeof g} ${g}`)}function B(g){return g===wu?g:R(g,n)}let I=new Map;function q(g){if(!(g instanceof $))throw new Error("ExtendedPoint expected")}class ${constructor(f,w,D,T){if(this.ex=f,this.ey=w,this.ez=D,this.et=T,!k(f))throw new Error("x required");if(!k(w))throw new Error("y required");if(!k(D))throw new Error("z required");if(!k(T))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(f){if(f instanceof $)throw new Error("extended point not allowed");let{x:w,y:D}=f||{};if(!k(w)||!k(D))throw new Error("invalid affine point");return new $(w,D,Tc,p(w*D))}static normalizeZ(f){let w=r.invertBatch(f.map(D=>D.ez));return f.map((D,T)=>D.toAffine(w[T])).map($.fromAffine)}_setWindowSize(f){this._WINDOW_SIZE=f,I.delete(this)}assertValidity(){let{a:f,d:w}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:D,ey:T,ez:C,et:z}=this,G=p(D*D),V=p(T*T),Z=p(C*C),J=p(Z*Z),X=p(G*f),se=p(Z*p(X+V)),Q=p(J+p(w*p(G*V)));if(se!==Q)throw new Error("bad point: equation left != right (1)");let te=p(D*T),de=p(C*z);if(te!==de)throw new Error("bad point: equation left != right (2)")}equals(f){q(f);let{ex:w,ey:D,ez:T}=this,{ex:C,ey:z,ez:G}=f,V=p(w*G),Z=p(C*T),J=p(D*G),X=p(z*T);return V===Z&&J===X}is0(){return this.equals($.ZERO)}negate(){return new $(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){let{a:f}=e,{ex:w,ey:D,ez:T}=this,C=p(w*w),z=p(D*D),G=p(J4*p(T*T)),V=p(f*C),Z=w+D,J=p(p(Z*Z)-C-z),X=V+z,se=X-G,Q=V-z,te=p(J*se),de=p(X*Q),ie=p(J*Q),ae=p(se*X);return new $(te,de,ae,ie)}add(f){q(f);let{a:w,d:D}=e,{ex:T,ey:C,ez:z,et:G}=this,{ex:V,ey:Z,ez:J,et:X}=f;if(w===BigInt(-1)){let it=p((C-T)*(Z+V)),we=p((C+T)*(Z-V)),Ae=p(we-it);if(Ae===wu)return this.double();let er=p(z*J4*X),me=p(G*J4*J),he=me+er,mt=we+it,ye=me-er,le=p(he*Ae),kt=p(mt*ye),_e=p(he*ye),Ee=p(Ae*mt);return new $(le,kt,Ee,_e)}let se=p(T*V),Q=p(C*Z),te=p(G*D*X),de=p(z*J),ie=p((T+C)*(V+Z)-se-Q),ae=de-te,fe=de+te,oe=p(Q-w*se),ce=p(ie*ae),Ke=p(fe*oe),pe=p(ie*oe),Me=p(ae*fe);return new $(ce,Ke,Me,pe)}subtract(f){return this.add(f.negate())}wNAF(f){return L.wNAFCached(this,I,f,$.normalizeZ)}multiply(f){let{p:w,f:D}=this.wNAF(R(f,n));return $.normalizeZ([w,D])[0]}multiplyUnsafe(f){let w=B(f);return w===wu?F:this.equals(F)||w===Tc?this:this.equals(U)?this.wNAF(w).p:L.unsafeLadder(this,w)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return L.unsafeLadder(this,n).is0()}toAffine(f){let{ex:w,ey:D,ez:T}=this,C=this.is0();f==null&&(f=C?TWe:r.inv(T));let z=p(w*f),G=p(D*f),V=p(T*f);if(C)return{x:wu,y:Tc};if(V!==Tc)throw new Error("invZ was invalid");return{x:z,y:G}}clearCofactor(){let{h:f}=e;return f===Tc?this:this.multiplyUnsafe(f)}static fromHex(f,w=!1){let{d:D,a:T}=e,C=r.BYTES;f=(0,_0.ensureBytes)("pointHex",f,C);let z=f.slice(),G=f[C-1];z[C-1]=G&-129;let V=Sh.bytesToNumberLE(z);V===wu||(w?R(V,m):R(V,r.ORDER));let Z=p(V*V),J=p(Z-Tc),X=p(D*Z-T),{isValid:se,value:Q}=b(J,X);if(!se)throw new Error("Point.fromHex: invalid y coordinate");let te=(Q&Tc)===Tc,de=(G&128)!==0;if(!w&&Q===wu&&de)throw new Error("Point.fromHex: x=0 and x_0=1");return de!==te&&(Q=p(-Q)),$.fromAffine({x:Q,y:V})}static fromPrivateKey(f){return c(f).point}toRawBytes(){let{x:f,y:w}=this.toAffine(),D=Sh.numberToBytesLE(w,r.BYTES);return D[D.length-1]|=f&Tc?128:0,D}toHex(){return Sh.bytesToHex(this.toRawBytes())}}$.BASE=new $(e.Gx,e.Gy,Tc,p(e.Gx*e.Gy)),$.ZERO=new $(wu,Tc,Tc,wu);let{BASE:U,ZERO:F}=$,L=(0,_le.wNAF)($,a*8);function W(g){return(0,PWe.mod)(g,n)}function E(g){return W(Sh.bytesToNumberLE(g))}function c(g){let f=a;g=(0,_0.ensureBytes)("private key",g,f);let w=(0,_0.ensureBytes)("hashed private key",o(g),2*f),D=A(w.slice(0,f)),T=w.slice(f,2*f),C=E(D),z=U.multiply(C),G=z.toRawBytes();return{head:D,prefix:T,scalar:C,point:z,pointBytes:G}}function l(g){return c(g).pointBytes}function y(g=new Uint8Array,...f){let w=Sh.concatBytes(...f);return E(o(M(w,(0,_0.ensureBytes)("context",g),!!i)))}function d(g,f,w={}){g=(0,_0.ensureBytes)("message",g),i&&(g=i(g));let{prefix:D,scalar:T,pointBytes:C}=c(f),z=y(w.context,D,g),G=U.multiply(z).toRawBytes(),V=y(w.context,G,C,g),Z=W(z+V*T);B(Z);let J=Sh.concatBytes(G,Sh.numberToBytesLE(Z,r.BYTES));return(0,_0.ensureBytes)("result",J,a*2)}let h=RWe;function v(g,f,w,D=h){let{context:T,zip215:C}=D,z=r.BYTES;g=(0,_0.ensureBytes)("signature",g,2*z),f=(0,_0.ensureBytes)("message",f),i&&(f=i(f));let G=Sh.bytesToNumberLE(g.slice(z,2*z)),V,Z,J;try{V=$.fromHex(w,C),Z=$.fromHex(g.slice(0,z),C),J=U.multiplyUnsafe(G)}catch{return!1}if(!C&&V.isSmallOrder())return!1;let X=y(T,Z.toRawBytes(),V.toRawBytes(),f);return Z.add(V.multiplyUnsafe(X)).subtract(J).clearCofactor().equals($.ZERO)}return U._setWindowSize(8),{CURVE:e,getPublicKey:l,sign:d,verify:v,ExtendedPoint:$,utils:{getExtendedPublicKey:c,randomPrivateKey:()=>s(r.BYTES),precompute(g=8,f=$.BASE){return f._setWindowSize(g),f.multiply(BigInt(3)),f}}}}});var uj=H(og=>{"use strict";_();Object.defineProperty(og,"__esModule",{value:!0});og.expand_message_xmd=Ele;og.expand_message_xof=Sle;og.hash_to_field=cj;og.isogenyMap=CWe;og.createHasher=NWe;var OWe=w0(),Ys=vu(),BWe=Ys.bytesToNumberBE;function x0(t,e){if(t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);let r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function DWe(t,e){let r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function fj(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function Ele(t,e,r,n){(0,Ys.abytes)(t),(0,Ys.abytes)(e),fj(r),e.length>255&&(e=n((0,Ys.concatBytes)((0,Ys.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));let{outputLen:i,blockLen:o}=n,s=Math.ceil(r/i);if(s>255)throw new Error("Invalid xmd length");let a=(0,Ys.concatBytes)(e,x0(e.length,1)),u=x0(0,o),m=x0(r,2),p=new Array(s),b=n((0,Ys.concatBytes)(u,t,m,x0(0,1),a));p[0]=n((0,Ys.concatBytes)(b,x0(1,1),a));for(let M=1;M<=s;M++){let S=[DWe(b,p[M-1]),x0(M+1,1),a];p[M]=n((0,Ys.concatBytes)(...S))}return(0,Ys.concatBytes)(...p).slice(0,r)}function Sle(t,e,r,n,i){if((0,Ys.abytes)(t),(0,Ys.abytes)(e),fj(r),e.length>255){let o=Math.ceil(2*n/8);e=i.create({dkLen:o}).update((0,Ys.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(x0(r,2)).update(e).update(x0(e.length,1)).digest()}function cj(t,e,r){(0,Ys.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:n,k:i,m:o,hash:s,expand:a,DST:u}=r;(0,Ys.abytes)(t),fj(e);let m=typeof u=="string"?(0,Ys.utf8ToBytes)(u):u,p=n.toString(2).length,b=Math.ceil((p+i)/8),A=e*o*b,M;if(a==="xmd")M=Ele(t,m,A,s);else if(a==="xof")M=Sle(t,m,A,i,s);else if(a==="_internal_pass")M=t;else throw new Error('expand must be "xmd" or "xof"');let S=new Array(e);for(let P=0;P<e;P++){let k=new Array(o);for(let R=0;R<o;R++){let B=b*(R+P*o),I=M.subarray(B,B+b);k[R]=(0,OWe.mod)(BWe(I),n)}S[P]=k}return S}function CWe(t,e){let r=e.map(n=>Array.from(n).reverse());return(n,i)=>{let[o,s,a,u]=r.map(m=>m.reduce((p,b)=>t.add(t.mul(p,n),b)));return n=t.div(o,s),i=t.mul(i,t.div(a,u)),{x:n,y:i}}}function NWe(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){let o=cj(n,2,{...r,DST:r.DST,...i}),s=t.fromAffine(e(o[0])),a=t.fromAffine(e(o[1])),u=s.add(a).clearCofactor();return u.assertValidity(),u},encodeToCurve(n,i){let o=cj(n,1,{...r,DST:r.encodeDST,...i}),s=t.fromAffine(e(o[0])).clearCofactor();return s.assertValidity(),s},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(let o of n)if(typeof o!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${o} in array`);let i=t.fromAffine(e(n)).clearCofactor();return i.assertValidity(),i}}}});var Ale=H(dj=>{"use strict";_();Object.defineProperty(dj,"__esModule",{value:!0});dj.montgomery=qWe;var Mle=w0(),Yw=vu(),CE=BigInt(0),lj=BigInt(1);function jWe(t){return(0,Yw.validateObject)(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function qWe(t){let e=jWe(t),{P:r}=e,n=I=>(0,Mle.mod)(I,r),i=e.montgomeryBits,o=Math.ceil(i/8),s=e.nByteLength,a=e.adjustScalarBytes||(I=>I),u=e.powPminus2||(I=>(0,Mle.pow)(I,r-BigInt(2),r));function m(I,q,$){let U=n(I*(q-$));return q=n(q-U),$=n($+U),[q,$]}function p(I){if(typeof I=="bigint"&&CE<=I&&I<r)return I;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}let b=(e.a-BigInt(2))/BigInt(4);function A(I,q){let $=p(I),U=p(q),F=$,L=lj,W=CE,E=$,c=lj,l=CE,y;for(let h=BigInt(i-1);h>=CE;h--){let v=U>>h&lj;l^=v,y=m(l,L,E),L=y[0],E=y[1],y=m(l,W,c),W=y[0],c=y[1],l=v;let x=L+W,g=n(x*x),f=L-W,w=n(f*f),D=g-w,T=E+c,C=E-c,z=n(C*x),G=n(T*f),V=z+G,Z=z-G;E=n(V*V),c=n(F*n(Z*Z)),L=n(g*w),W=n(D*(g+n(b*D)))}y=m(l,L,E),L=y[0],E=y[1],y=m(l,W,c),W=y[0],c=y[1];let d=u(W);return n(L*d)}function M(I){return(0,Yw.numberToBytesLE)(n(I),o)}function S(I){let q=(0,Yw.ensureBytes)("u coordinate",I,o);return s===32&&(q[31]&=127),(0,Yw.bytesToNumberLE)(q)}function P(I){let q=(0,Yw.ensureBytes)("scalar",I),$=q.length;if($!==o&&$!==s)throw new Error(`Expected ${o} or ${s} bytes, got ${$}`);return(0,Yw.bytesToNumberLE)(a(q))}function k(I,q){let $=S(q),U=P(I),F=A($,U);if(F===CE)throw new Error("Invalid private or public key received");return M(F)}let R=M(e.Gu);function B(I){return k(I,R)}return{scalarMult:k,scalarMultBase:B,getSharedSecret:(I,q)=>k(I,q),getPublicKey:I=>B(I),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:R}}});var qle=H(Qt=>{"use strict";_();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.hash_to_ristretto255=Qt.hashToRistretto255=Qt.RistrettoPoint=Qt.encodeToCurve=Qt.hashToCurve=Qt.edwardsToMontgomery=Qt.x25519=Qt.ed25519ph=Qt.ed25519ctx=Qt.ed25519=Qt.ED25519_TORSION_SUBGROUP=void 0;Qt.edwardsToMontgomeryPub=Nle;Qt.edwardsToMontgomeryPriv=UWe;var Q4=ole(),NE=m0(),gj=xle(),Ile=uj(),dn=w0(),$We=Ale(),sg=vu(),jE=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),mj=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),LWe=BigInt(0),Cl=BigInt(1),Y4=BigInt(2),kle=BigInt(3),Ole=BigInt(5),bj=BigInt(8);function Ble(t){let e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),o=jE,a=t*t%o*t%o,u=(0,dn.pow2)(a,Y4,o)*a%o,m=(0,dn.pow2)(u,Cl,o)*t%o,p=(0,dn.pow2)(m,Ole,o)*m%o,b=(0,dn.pow2)(p,e,o)*p%o,A=(0,dn.pow2)(b,r,o)*b%o,M=(0,dn.pow2)(A,n,o)*A%o,S=(0,dn.pow2)(M,i,o)*M%o,P=(0,dn.pow2)(S,i,o)*M%o,k=(0,dn.pow2)(P,e,o)*p%o;return{pow_p_5_8:(0,dn.pow2)(k,Y4,o)*t%o,b2:a}}function Dle(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function vj(t,e){let r=jE,n=(0,dn.mod)(e*e*e,r),i=(0,dn.mod)(n*n*e,r),o=Ble(t*i).pow_p_5_8,s=(0,dn.mod)(t*n*o,r),a=(0,dn.mod)(e*s*s,r),u=s,m=(0,dn.mod)(s*mj,r),p=a===t,b=a===(0,dn.mod)(-t,r),A=a===(0,dn.mod)(-t*mj,r);return p&&(s=u),(b||A)&&(s=m),(0,dn.isNegativeLE)(s,r)&&(s=(0,dn.mod)(-s,r)),{isValid:p||b,value:s}}Qt.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];var Ye=(()=>(0,dn.Field)(jE,void 0,!0))(),qE=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ye,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:bj,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Q4.sha512,randomBytes:NE.randomBytes,adjustScalarBytes:Dle,uvRatio:vj}))();Qt.ed25519=(()=>(0,gj.twistedEdwards)(qE))();function Cle(t,e,r){if(e.length>255)throw new Error("Context is too big");return(0,NE.concatBytes)((0,NE.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}Qt.ed25519ctx=(()=>(0,gj.twistedEdwards)({...qE,domain:Cle}))();Qt.ed25519ph=(()=>(0,gj.twistedEdwards)(Object.assign({},qE,{domain:Cle,prehash:Q4.sha512})))();Qt.x25519=(()=>(0,$We.montgomery)({P:jE,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{let e=jE,{pow_p_5_8:r,b2:n}=Ble(t);return(0,dn.mod)((0,dn.pow2)(r,kle,e)*n,e)},adjustScalarBytes:Dle,randomBytes:NE.randomBytes}))();function Nle(t){let{y:e}=Qt.ed25519.ExtendedPoint.fromHex(t),r=BigInt(1);return Ye.toBytes(Ye.create((r+e)*Ye.inv(r-e)))}Qt.edwardsToMontgomery=Nle;function UWe(t){let e=qE.hash(t.subarray(0,32));return qE.adjustScalarBytes(e).subarray(0,32)}var FWe=(()=>(Ye.ORDER+kle)/bj)(),zWe=(()=>Ye.pow(Y4,FWe))(),Ple=(()=>Ye.sqrt(Ye.neg(Ye.ONE)))();function KWe(t){let e=(Ye.ORDER-Ole)/bj,r=BigInt(486662),n=Ye.sqr(t);n=Ye.mul(n,Y4);let i=Ye.add(n,Ye.ONE),o=Ye.neg(r),s=Ye.sqr(i),a=Ye.mul(s,i),u=Ye.mul(n,r);u=Ye.mul(u,o),u=Ye.add(u,s),u=Ye.mul(u,o);let m=Ye.sqr(a);s=Ye.sqr(m),m=Ye.mul(m,a),m=Ye.mul(m,u),s=Ye.mul(s,m);let p=Ye.pow(s,e);p=Ye.mul(p,m);let b=Ye.mul(p,Ple);s=Ye.sqr(p),s=Ye.mul(s,a);let A=Ye.eql(s,u),M=Ye.cmov(b,p,A),S=Ye.mul(o,n),P=Ye.mul(p,t);P=Ye.mul(P,zWe);let k=Ye.mul(P,Ple),R=Ye.mul(u,n);s=Ye.sqr(P),s=Ye.mul(s,a);let B=Ye.eql(s,R),I=Ye.cmov(k,P,B);s=Ye.sqr(M),s=Ye.mul(s,a);let q=Ye.eql(s,u),$=Ye.cmov(S,o,q),U=Ye.cmov(I,M,q),F=Ye.isOdd(U);return U=Ye.cmov(U,Ye.neg(U),q!==F),{xMn:$,xMd:i,yMn:U,yMd:Cl}}var WWe=(()=>(0,dn.FpSqrtEven)(Ye,Ye.neg(BigInt(486664))))();function GWe(t){let{xMn:e,xMd:r,yMn:n,yMd:i}=KWe(t),o=Ye.mul(e,i);o=Ye.mul(o,WWe);let s=Ye.mul(r,n),a=Ye.sub(e,r),u=Ye.add(e,r),m=Ye.mul(s,u),p=Ye.eql(m,Ye.ZERO);o=Ye.cmov(o,Ye.ZERO,p),s=Ye.cmov(s,Ye.ONE,p),a=Ye.cmov(a,Ye.ONE,p),u=Ye.cmov(u,Ye.ONE,p);let b=Ye.invertBatch([s,u]);return{x:Ye.mul(o,b[0]),y:Ye.mul(a,b[1])}}var jle=(()=>(0,Ile.createHasher)(Qt.ed25519.ExtendedPoint,t=>GWe(t[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:Ye.ORDER,m:1,k:128,expand:"xmd",hash:Q4.sha512}))();Qt.hashToCurve=(()=>jle.hashToCurve)();Qt.encodeToCurve=(()=>jle.encodeToCurve)();function hj(t){if(!(t instanceof Wi))throw new Error("RistrettoPoint expected")}var yj=mj,VWe=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),HWe=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ZWe=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),JWe=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),Tle=t=>vj(Cl,t),YWe=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),pj=t=>Qt.ed25519.CURVE.Fp.create((0,sg.bytesToNumberLE)(t)&YWe);function Rle(t){let{d:e}=Qt.ed25519.CURVE,r=Qt.ed25519.CURVE.Fp.ORDER,n=Qt.ed25519.CURVE.Fp.create,i=n(yj*t*t),o=n((i+Cl)*ZWe),s=BigInt(-1),a=n((s-e*i)*n(i+e)),{isValid:u,value:m}=vj(o,a),p=n(m*t);(0,dn.isNegativeLE)(p,r)||(p=n(-p)),u||(m=p),u||(s=i);let b=n(s*(i-Cl)*JWe-a),A=m*m,M=n((m+m)*a),S=n(b*VWe),P=n(Cl-A),k=n(Cl+A);return new Qt.ed25519.ExtendedPoint(n(M*k),n(P*S),n(S*k),n(M*P))}var Wi=class{constructor(e){this.ep=e}static fromAffine(e){return new Wi(Qt.ed25519.ExtendedPoint.fromAffine(e))}static hashToCurve(e){e=(0,sg.ensureBytes)("ristrettoHash",e,64);let r=pj(e.slice(0,32)),n=Rle(r),i=pj(e.slice(32,64)),o=Rle(i);return new Wi(n.add(o))}static fromHex(e){e=(0,sg.ensureBytes)("ristrettoHex",e,32);let{a:r,d:n}=Qt.ed25519.CURVE,i=Qt.ed25519.CURVE.Fp.ORDER,o=Qt.ed25519.CURVE.Fp.create,s="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",a=pj(e);if(!(0,sg.equalBytes)((0,sg.numberToBytesLE)(a,32),e)||(0,dn.isNegativeLE)(a,i))throw new Error(s);let u=o(a*a),m=o(Cl+r*u),p=o(Cl-r*u),b=o(m*m),A=o(p*p),M=o(r*n*b-A),{isValid:S,value:P}=Tle(o(M*A)),k=o(P*p),R=o(P*k*M),B=o((a+a)*k);(0,dn.isNegativeLE)(B,i)&&(B=o(-B));let I=o(m*R),q=o(B*I);if(!S||(0,dn.isNegativeLE)(q,i)||I===LWe)throw new Error(s);return new Wi(new Qt.ed25519.ExtendedPoint(B,I,Cl,q))}toRawBytes(){let{ex:e,ey:r,ez:n,et:i}=this.ep,o=Qt.ed25519.CURVE.Fp.ORDER,s=Qt.ed25519.CURVE.Fp.create,a=s(s(n+r)*s(n-r)),u=s(e*r),m=s(u*u),{value:p}=Tle(s(a*m)),b=s(p*a),A=s(p*u),M=s(b*A*i),S;if((0,dn.isNegativeLE)(i*M,o)){let k=s(r*yj),R=s(e*yj);e=k,r=R,S=s(b*HWe)}else S=A;(0,dn.isNegativeLE)(e*M,o)&&(r=s(-r));let P=s((n-r)*S);return(0,dn.isNegativeLE)(P,o)&&(P=s(-P)),(0,sg.numberToBytesLE)(P,32)}toHex(){return(0,sg.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(e){hj(e);let{ex:r,ey:n}=this.ep,{ex:i,ey:o}=e.ep,s=Qt.ed25519.CURVE.Fp.create,a=s(r*o)===s(n*i),u=s(n*o)===s(r*i);return a||u}add(e){return hj(e),new Wi(this.ep.add(e.ep))}subtract(e){return hj(e),new Wi(this.ep.subtract(e.ep))}multiply(e){return new Wi(this.ep.multiply(e))}multiplyUnsafe(e){return new Wi(this.ep.multiplyUnsafe(e))}double(){return new Wi(this.ep.double())}negate(){return new Wi(this.ep.negate())}};Qt.RistrettoPoint=(()=>(Wi.BASE||(Wi.BASE=new Wi(Qt.ed25519.ExtendedPoint.BASE)),Wi.ZERO||(Wi.ZERO=new Wi(Qt.ed25519.ExtendedPoint.ZERO)),Wi))();var QWe=(t,e)=>{let r=e.DST,n=typeof r=="string"?(0,NE.utf8ToBytes)(r):r,i=(0,Ile.expand_message_xmd)(t,n,64,Q4.sha512);return Wi.hashToCurve(i)};Qt.hashToRistretto255=QWe;Qt.hash_to_ristretto255=Qt.hashToRistretto255});var $le=H(Qw=>{"use strict";_();Object.defineProperty(Qw,"__esModule",{value:!0});Qw.sha224=Qw.sha256=void 0;var wj=VN(),vf=m0(),XWe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),E0=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),S0=new Uint32Array(64),X4=class extends wj.HashMD{constructor(){super(64,32,8,!1),this.A=E0[0]|0,this.B=E0[1]|0,this.C=E0[2]|0,this.D=E0[3]|0,this.E=E0[4]|0,this.F=E0[5]|0,this.G=E0[6]|0,this.H=E0[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:u}=this;return[e,r,n,i,o,s,a,u]}set(e,r,n,i,o,s,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=u|0}process(e,r){for(let b=0;b<16;b++,r+=4)S0[b]=e.getUint32(r,!1);for(let b=16;b<64;b++){let A=S0[b-15],M=S0[b-2],S=(0,vf.rotr)(A,7)^(0,vf.rotr)(A,18)^A>>>3,P=(0,vf.rotr)(M,17)^(0,vf.rotr)(M,19)^M>>>10;S0[b]=P+S0[b-7]+S+S0[b-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:u,G:m,H:p}=this;for(let b=0;b<64;b++){let A=(0,vf.rotr)(a,6)^(0,vf.rotr)(a,11)^(0,vf.rotr)(a,25),M=p+A+(0,wj.Chi)(a,u,m)+XWe[b]+S0[b]|0,P=((0,vf.rotr)(n,2)^(0,vf.rotr)(n,13)^(0,vf.rotr)(n,22))+(0,wj.Maj)(n,i,o)|0;p=m,m=u,u=a,a=s+M|0,s=o,o=i,i=n,n=M+P|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,u=u+this.F|0,m=m+this.G|0,p=p+this.H|0,this.set(n,i,o,s,a,u,m,p)}roundClean(){S0.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},_j=class extends X4{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};Qw.sha256=(0,vf.wrapConstructor)(()=>new X4);Qw.sha224=(0,vf.wrapConstructor)(()=>new _j)});var Ule=H(ag=>{"use strict";_();Object.defineProperty(ag,"__esModule",{value:!0});ag.hmac=ag.HMAC=void 0;var eA=$4(),Lle=m0(),$E=class extends Lle.Hash{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,(0,eA.hash)(e);let n=(0,Lle.toBytes)(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return(0,eA.exists)(this),this.iHash.update(e),this}digestInto(e){(0,eA.exists)(this),(0,eA.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};ag.HMAC=$E;var eGe=(t,e,r)=>new $E(t,e).update(r).digest();ag.hmac=eGe;ag.hmac.create=(t,e)=>new $E(t,e)});var Ej=H(va=>{"use strict";_();Object.defineProperty(va,"__esModule",{value:!0});va.DER=void 0;va.weierstrassPoints=zle;va.weierstrass=oGe;va.SWUFpSqrtRatio=Kle;va.mapToCurveSimpleSWU=sGe;var xj=sj(),Xw=w0(),ui=vu(),Nl=vu();function tGe(t){let e=(0,xj.validateBasic)(t);ui.validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:rGe,hexToBytes:nGe}=ui;va.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=va.DER;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:rGe(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=va.DER,r=typeof t=="string"?nGe(t):t;ui.abytes(r);let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:i,l:o}=va.DER._parseInt(r.subarray(2)),{d:s,l:a}=va.DER._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){let e=m=>Number.parseInt(m[0],16)&8?"00"+m:m,r=m=>{let p=m.toString(16);return p.length&1?`0${p}`:p},n=e(r(t.s)),i=e(r(t.r)),o=n.length/2,s=i.length/2,a=r(o),u=r(s);return`30${r(s+o+4)}02${u}${i}02${a}${n}`}};var _u=BigInt(0),Ci=BigInt(1),M0=BigInt(2),tA=BigInt(3),Fle=BigInt(4);function zle(t){let e=tGe(t),{Fp:r}=e,n=e.toBytes||((S,P,k)=>{let R=P.toAffine();return ui.concatBytes(Uint8Array.from([4]),r.toBytes(R.x),r.toBytes(R.y))}),i=e.fromBytes||(S=>{let P=S.subarray(1),k=r.fromBytes(P.subarray(0,r.BYTES)),R=r.fromBytes(P.subarray(r.BYTES,2*r.BYTES));return{x:k,y:R}});function o(S){let{a:P,b:k}=e,R=r.sqr(S),B=r.mul(R,S);return r.add(r.add(B,r.mul(S,P)),k)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(S){return typeof S=="bigint"&&_u<S&&S<e.n}function a(S){if(!s(S))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(S){let{allowedPrivateKeyLengths:P,nByteLength:k,wrapPrivateKey:R,n:B}=e;if(P&&typeof S!="bigint"){if(ui.isBytes(S)&&(S=ui.bytesToHex(S)),typeof S!="string"||!P.includes(S.length))throw new Error("Invalid key");S=S.padStart(k*2,"0")}let I;try{I=typeof S=="bigint"?S:ui.bytesToNumberBE((0,Nl.ensureBytes)("private key",S,k))}catch{throw new Error(`private key must be ${k} bytes, hex or bigint, not ${typeof S}`)}return R&&(I=Xw.mod(I,B)),a(I),I}let m=new Map;function p(S){if(!(S instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(P,k,R){if(this.px=P,this.py=k,this.pz=R,P==null||!r.isValid(P))throw new Error("x required");if(k==null||!r.isValid(k))throw new Error("y required");if(R==null||!r.isValid(R))throw new Error("z required")}static fromAffine(P){let{x:k,y:R}=P||{};if(!P||!r.isValid(k)||!r.isValid(R))throw new Error("invalid affine point");if(P instanceof b)throw new Error("projective point not allowed");let B=I=>r.eql(I,r.ZERO);return B(k)&&B(R)?b.ZERO:new b(k,R,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(P){let k=r.invertBatch(P.map(R=>R.pz));return P.map((R,B)=>R.toAffine(k[B])).map(b.fromAffine)}static fromHex(P){let k=b.fromAffine(i((0,Nl.ensureBytes)("pointHex",P)));return k.assertValidity(),k}static fromPrivateKey(P){return b.BASE.multiply(u(P))}_setWindowSize(P){this._WINDOW_SIZE=P,m.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:P,y:k}=this.toAffine();if(!r.isValid(P)||!r.isValid(k))throw new Error("bad point: x or y not FE");let R=r.sqr(k),B=o(P);if(!r.eql(R,B))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:P}=this.toAffine();if(r.isOdd)return!r.isOdd(P);throw new Error("Field doesn't support isOdd")}equals(P){p(P);let{px:k,py:R,pz:B}=this,{px:I,py:q,pz:$}=P,U=r.eql(r.mul(k,$),r.mul(I,B)),F=r.eql(r.mul(R,$),r.mul(q,B));return U&&F}negate(){return new b(this.px,r.neg(this.py),this.pz)}double(){let{a:P,b:k}=e,R=r.mul(k,tA),{px:B,py:I,pz:q}=this,$=r.ZERO,U=r.ZERO,F=r.ZERO,L=r.mul(B,B),W=r.mul(I,I),E=r.mul(q,q),c=r.mul(B,I);return c=r.add(c,c),F=r.mul(B,q),F=r.add(F,F),$=r.mul(P,F),U=r.mul(R,E),U=r.add($,U),$=r.sub(W,U),U=r.add(W,U),U=r.mul($,U),$=r.mul(c,$),F=r.mul(R,F),E=r.mul(P,E),c=r.sub(L,E),c=r.mul(P,c),c=r.add(c,F),F=r.add(L,L),L=r.add(F,L),L=r.add(L,E),L=r.mul(L,c),U=r.add(U,L),E=r.mul(I,q),E=r.add(E,E),L=r.mul(E,c),$=r.sub($,L),F=r.mul(E,W),F=r.add(F,F),F=r.add(F,F),new b($,U,F)}add(P){p(P);let{px:k,py:R,pz:B}=this,{px:I,py:q,pz:$}=P,U=r.ZERO,F=r.ZERO,L=r.ZERO,W=e.a,E=r.mul(e.b,tA),c=r.mul(k,I),l=r.mul(R,q),y=r.mul(B,$),d=r.add(k,R),h=r.add(I,q);d=r.mul(d,h),h=r.add(c,l),d=r.sub(d,h),h=r.add(k,B);let v=r.add(I,$);return h=r.mul(h,v),v=r.add(c,y),h=r.sub(h,v),v=r.add(R,B),U=r.add(q,$),v=r.mul(v,U),U=r.add(l,y),v=r.sub(v,U),L=r.mul(W,h),U=r.mul(E,y),L=r.add(U,L),U=r.sub(l,L),L=r.add(l,L),F=r.mul(U,L),l=r.add(c,c),l=r.add(l,c),y=r.mul(W,y),h=r.mul(E,h),l=r.add(l,y),y=r.sub(c,y),y=r.mul(W,y),h=r.add(h,y),c=r.mul(l,h),F=r.add(F,c),c=r.mul(v,h),U=r.mul(d,U),U=r.sub(U,c),c=r.mul(d,l),L=r.mul(v,L),L=r.add(L,c),new b(U,F,L)}subtract(P){return this.add(P.negate())}is0(){return this.equals(b.ZERO)}wNAF(P){return M.wNAFCached(this,m,P,k=>{let R=r.invertBatch(k.map(B=>B.pz));return k.map((B,I)=>B.toAffine(R[I])).map(b.fromAffine)})}multiplyUnsafe(P){let k=b.ZERO;if(P===_u)return k;if(a(P),P===Ci)return this;let{endo:R}=e;if(!R)return M.unsafeLadder(this,P);let{k1neg:B,k1:I,k2neg:q,k2:$}=R.splitScalar(P),U=k,F=k,L=this;for(;I>_u||$>_u;)I&Ci&&(U=U.add(L)),$&Ci&&(F=F.add(L)),L=L.double(),I>>=Ci,$>>=Ci;return B&&(U=U.negate()),q&&(F=F.negate()),F=new b(r.mul(F.px,R.beta),F.py,F.pz),U.add(F)}multiply(P){a(P);let k=P,R,B,{endo:I}=e;if(I){let{k1neg:q,k1:$,k2neg:U,k2:F}=I.splitScalar(k),{p:L,f:W}=this.wNAF($),{p:E,f:c}=this.wNAF(F);L=M.constTimeNegate(q,L),E=M.constTimeNegate(U,E),E=new b(r.mul(E.px,I.beta),E.py,E.pz),R=L.add(E),B=W.add(c)}else{let{p:q,f:$}=this.wNAF(k);R=q,B=$}return b.normalizeZ([R,B])[0]}multiplyAndAddUnsafe(P,k,R){let B=b.BASE,I=($,U)=>U===_u||U===Ci||!$.equals(B)?$.multiplyUnsafe(U):$.multiply(U),q=I(this,k).add(I(P,R));return q.is0()?void 0:q}toAffine(P){let{px:k,py:R,pz:B}=this,I=this.is0();P==null&&(P=I?r.ONE:r.inv(B));let q=r.mul(k,P),$=r.mul(R,P),U=r.mul(B,P);if(I)return{x:r.ZERO,y:r.ZERO};if(!r.eql(U,r.ONE))throw new Error("invZ was invalid");return{x:q,y:$}}isTorsionFree(){let{h:P,isTorsionFree:k}=e;if(P===Ci)return!0;if(k)return k(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:P,clearCofactor:k}=e;return P===Ci?this:k?k(b,this):this.multiplyUnsafe(e.h)}toRawBytes(P=!0){return this.assertValidity(),n(b,this,P)}toHex(P=!0){return ui.bytesToHex(this.toRawBytes(P))}}b.BASE=new b(e.Gx,e.Gy,r.ONE),b.ZERO=new b(r.ZERO,r.ONE,r.ZERO);let A=e.nBitLength,M=(0,xj.wNAF)(b,e.endo?Math.ceil(A/2):A);return{CURVE:e,ProjectivePoint:b,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:s}}function iGe(t){let e=(0,xj.validateBasic)(t);return ui.validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function oGe(t){let e=iGe(t),{Fp:r,n}=e,i=r.BYTES+1,o=2*r.BYTES+1;function s(h){return _u<h&&h<r.ORDER}function a(h){return Xw.mod(h,n)}function u(h){return Xw.invert(h,n)}let{ProjectivePoint:m,normPrivateKeyToScalar:p,weierstrassEquation:b,isWithinCurveOrder:A}=zle({...e,toBytes(h,v,x){let g=v.toAffine(),f=r.toBytes(g.x),w=ui.concatBytes;return x?w(Uint8Array.from([v.hasEvenY()?2:3]),f):w(Uint8Array.from([4]),f,r.toBytes(g.y))},fromBytes(h){let v=h.length,x=h[0],g=h.subarray(1);if(v===i&&(x===2||x===3)){let f=ui.bytesToNumberBE(g);if(!s(f))throw new Error("Point is not on curve");let w=b(f),D;try{D=r.sqrt(w)}catch(z){let G=z instanceof Error?": "+z.message:"";throw new Error("Point is not on curve"+G)}let T=(D&Ci)===Ci;return(x&1)===1!==T&&(D=r.neg(D)),{x:f,y:D}}else if(v===o&&x===4){let f=r.fromBytes(g.subarray(0,r.BYTES)),w=r.fromBytes(g.subarray(r.BYTES,2*r.BYTES));return{x:f,y:w}}else throw new Error(`Point of length ${v} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),M=h=>ui.bytesToHex(ui.numberToBytesBE(h,e.nByteLength));function S(h){let v=n>>Ci;return h>v}function P(h){return S(h)?a(-h):h}let k=(h,v,x)=>ui.bytesToNumberBE(h.slice(v,x));class R{constructor(v,x,g){this.r=v,this.s=x,this.recovery=g,this.assertValidity()}static fromCompact(v){let x=e.nByteLength;return v=(0,Nl.ensureBytes)("compactSignature",v,x*2),new R(k(v,0,x),k(v,x,2*x))}static fromDER(v){let{r:x,s:g}=va.DER.toSig((0,Nl.ensureBytes)("DER",v));return new R(x,g)}assertValidity(){if(!A(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!A(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(v){return new R(this.r,this.s,v)}recoverPublicKey(v){let{r:x,s:g,recovery:f}=this,w=F((0,Nl.ensureBytes)("msgHash",v));if(f==null||![0,1,2,3].includes(f))throw new Error("recovery id invalid");let D=f===2||f===3?x+e.n:x;if(D>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let T=f&1?"03":"02",C=m.fromHex(T+M(D)),z=u(D),G=a(-w*z),V=a(g*z),Z=m.BASE.multiplyAndAddUnsafe(C,G,V);if(!Z)throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return S(this.s)}normalizeS(){return this.hasHighS()?new R(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return ui.hexToBytes(this.toDERHex())}toDERHex(){return va.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ui.hexToBytes(this.toCompactHex())}toCompactHex(){return M(this.r)+M(this.s)}}let B={isValidPrivateKey(h){try{return p(h),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{let h=Xw.getMinHashLength(e.n);return Xw.mapHashToField(e.randomBytes(h),e.n)},precompute(h=8,v=m.BASE){return v._setWindowSize(h),v.multiply(BigInt(3)),v}};function I(h,v=!0){return m.fromPrivateKey(h).toRawBytes(v)}function q(h){let v=ui.isBytes(h),x=typeof h=="string",g=(v||x)&&h.length;return v?g===i||g===o:x?g===2*i||g===2*o:h instanceof m}function $(h,v,x=!0){if(q(h))throw new Error("first arg must be private key");if(!q(v))throw new Error("second arg must be public key");return m.fromHex(v).multiply(p(h)).toRawBytes(x)}let U=e.bits2int||function(h){let v=ui.bytesToNumberBE(h),x=h.length*8-e.nBitLength;return x>0?v>>BigInt(x):v},F=e.bits2int_modN||function(h){return a(U(h))},L=ui.bitMask(e.nBitLength);function W(h){if(typeof h!="bigint")throw new Error("bigint expected");if(!(_u<=h&&h<L))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ui.numberToBytesBE(h,e.nByteLength)}function E(h,v,x=c){if(["recovered","canonical"].some(X=>X in x))throw new Error("sign() legacy options not supported");let{hash:g,randomBytes:f}=e,{lowS:w,prehash:D,extraEntropy:T}=x;w==null&&(w=!0),h=(0,Nl.ensureBytes)("msgHash",h),D&&(h=(0,Nl.ensureBytes)("prehashed msgHash",g(h)));let C=F(h),z=p(v),G=[W(z),W(C)];if(T!=null&&T!==!1){let X=T===!0?f(r.BYTES):T;G.push((0,Nl.ensureBytes)("extraEntropy",X))}let V=ui.concatBytes(...G),Z=C;function J(X){let se=U(X);if(!A(se))return;let Q=u(se),te=m.BASE.multiply(se).toAffine(),de=a(te.x);if(de===_u)return;let ie=a(Q*a(Z+de*z));if(ie===_u)return;let ae=(te.x===de?0:2)|Number(te.y&Ci),fe=ie;return w&&S(ie)&&(fe=P(ie),ae^=1),new R(de,fe,ae)}return{seed:V,k2sig:J}}let c={lowS:e.lowS,prehash:!1},l={lowS:e.lowS,prehash:!1};function y(h,v,x=c){let{seed:g,k2sig:f}=E(h,v,x),w=e;return ui.createHmacDrbg(w.hash.outputLen,w.nByteLength,w.hmac)(g,f)}m.BASE._setWindowSize(8);function d(h,v,x,g=l){let f=h;if(v=(0,Nl.ensureBytes)("msgHash",v),x=(0,Nl.ensureBytes)("publicKey",x),"strict"in g)throw new Error("options.strict was renamed to lowS");let{lowS:w,prehash:D}=g,T,C;try{if(typeof f=="string"||ui.isBytes(f))try{T=R.fromDER(f)}catch(te){if(!(te instanceof va.DER.Err))throw te;T=R.fromCompact(f)}else if(typeof f=="object"&&typeof f.r=="bigint"&&typeof f.s=="bigint"){let{r:te,s:de}=f;T=new R(te,de)}else throw new Error("PARSE");C=m.fromHex(x)}catch(te){if(te.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(w&&T.hasHighS())return!1;D&&(v=e.hash(v));let{r:z,s:G}=T,V=F(v),Z=u(G),J=a(V*Z),X=a(z*Z),se=m.BASE.multiplyAndAddUnsafe(C,J,X)?.toAffine();return se?a(se.x)===z:!1}return{CURVE:e,getPublicKey:I,getSharedSecret:$,sign:y,verify:d,ProjectivePoint:m,Signature:R,utils:B}}function Kle(t,e){let r=t.ORDER,n=_u;for(let S=r-Ci;S%M0===_u;S/=M0)n+=Ci;let i=n,o=M0<<i-Ci-Ci,s=o*M0,a=(r-Ci)/s,u=(a-Ci)/M0,m=s-Ci,p=o,b=t.pow(e,a),A=t.pow(e,(a+Ci)/M0),M=(S,P)=>{let k=b,R=t.pow(P,m),B=t.sqr(R);B=t.mul(B,P);let I=t.mul(S,B);I=t.pow(I,u),I=t.mul(I,R),R=t.mul(I,P),B=t.mul(I,S);let q=t.mul(B,R);I=t.pow(q,p);let $=t.eql(I,t.ONE);R=t.mul(B,A),I=t.mul(q,k),B=t.cmov(R,B,$),q=t.cmov(I,q,$);for(let U=i;U>Ci;U--){let F=U-M0;F=M0<<F-Ci;let L=t.pow(q,F),W=t.eql(L,t.ONE);R=t.mul(B,k),k=t.mul(k,k),L=t.mul(q,k),B=t.cmov(R,B,W),q=t.cmov(L,q,W)}return{isValid:$,value:B}};if(t.ORDER%Fle===tA){let S=(t.ORDER-tA)/Fle,P=t.sqrt(t.neg(e));M=(k,R)=>{let B=t.sqr(R),I=t.mul(k,R);B=t.mul(B,I);let q=t.pow(B,S);q=t.mul(q,I);let $=t.mul(q,P),U=t.mul(t.sqr(q),R),F=t.eql(U,k),L=t.cmov($,q,F);return{isValid:F,value:L}}}return M}function sGe(t,e){if(Xw.validateField(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let r=Kle(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,o,s,a,u,m,p,b;i=t.sqr(n),i=t.mul(i,e.Z),o=t.sqr(i),o=t.add(o,i),s=t.add(o,t.ONE),s=t.mul(s,e.B),a=t.cmov(e.Z,t.neg(o),!t.eql(o,t.ZERO)),a=t.mul(a,e.A),o=t.sqr(s),m=t.sqr(a),u=t.mul(m,e.A),o=t.add(o,u),o=t.mul(o,s),m=t.mul(m,a),u=t.mul(m,e.B),o=t.add(o,u),p=t.mul(i,s);let{isValid:A,value:M}=r(o,m);b=t.mul(i,n),b=t.mul(b,M),p=t.cmov(p,s,A),b=t.cmov(b,M,A);let S=t.isOdd(n)===t.isOdd(b);return b=t.cmov(t.neg(b),b,S),p=t.div(p,a),{x:p,y:b}}}});var Vle=H(rA=>{"use strict";_();Object.defineProperty(rA,"__esModule",{value:!0});rA.getHash=Gle;rA.createCurve=fGe;var aGe=Ule(),Wle=m0(),cGe=Ej();function Gle(t){return{hash:t,hmac:(e,...r)=>(0,aGe.hmac)(t,e,(0,Wle.concatBytes)(...r)),randomBytes:Wle.randomBytes}}function fGe(t,e){let r=n=>(0,cGe.weierstrass)({...t,...Gle(n)});return Object.freeze({...r(e),create:r})}});var ide=H(Ha=>{"use strict";_();Object.defineProperty(Ha,"__esModule",{value:!0});Ha.encodeToCurve=Ha.hashToCurve=Ha.schnorr=Ha.secp256k1=void 0;var nA=$le(),uGe=m0(),lGe=Vle(),Jle=uj(),Zo=w0(),Qs=vu(),dGe=Ej(),aA=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),iA=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Yle=BigInt(1),oA=BigInt(2),Hle=(t,e)=>(t+e/oA)/e;function Qle(t){let e=aA,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),u=BigInt(88),m=t*t*t%e,p=m*m*t%e,b=(0,Zo.pow2)(p,r,e)*p%e,A=(0,Zo.pow2)(b,r,e)*p%e,M=(0,Zo.pow2)(A,oA,e)*m%e,S=(0,Zo.pow2)(M,i,e)*M%e,P=(0,Zo.pow2)(S,o,e)*S%e,k=(0,Zo.pow2)(P,a,e)*P%e,R=(0,Zo.pow2)(k,u,e)*k%e,B=(0,Zo.pow2)(R,a,e)*P%e,I=(0,Zo.pow2)(B,r,e)*p%e,q=(0,Zo.pow2)(I,s,e)*S%e,$=(0,Zo.pow2)(q,n,e)*m%e,U=(0,Zo.pow2)($,oA,e);if(!A0.eql(A0.sqr(U),t))throw new Error("Cannot find square root");return U}var A0=(0,Zo.Field)(aA,void 0,void 0,{sqrt:Qle});Ha.secp256k1=(0,lGe.createCurve)({a:BigInt(0),b:BigInt(7),Fp:A0,n:iA,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=iA,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Yle*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=Hle(o*t,e),u=Hle(-n*t,e),m=(0,Zo.mod)(t-a*r-u*i,e),p=(0,Zo.mod)(-a*n-u*o,e),b=m>s,A=p>s;if(b&&(m=e-m),A&&(p=e-p),m>s||p>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:b,k1:m,k2neg:A,k2:p}}}},nA.sha256);var cA=BigInt(0),Xle=t=>typeof t=="bigint"&&cA<t&&t<aA,hGe=t=>typeof t=="bigint"&&cA<t&&t<iA,Zle={};function sA(t,...e){let r=Zle[t];if(r===void 0){let n=(0,nA.sha256)(Uint8Array.from(t,i=>i.charCodeAt(0)));r=(0,Qs.concatBytes)(n,n),Zle[t]=r}return(0,nA.sha256)((0,Qs.concatBytes)(r,...e))}var Pj=t=>t.toRawBytes(!0).slice(1),Mj=t=>(0,Qs.numberToBytesBE)(t,32),Sj=t=>(0,Zo.mod)(t,aA),LE=t=>(0,Zo.mod)(t,iA),Tj=Ha.secp256k1.ProjectivePoint,pGe=(t,e,r)=>Tj.BASE.multiplyAndAddUnsafe(t,e,r);function Aj(t){let e=Ha.secp256k1.utils.normPrivateKeyToScalar(t),r=Tj.fromPrivateKey(e);return{scalar:r.hasEvenY()?e:LE(-e),bytes:Pj(r)}}function ede(t){if(!Xle(t))throw new Error("bad x: need 0 < x < p");let e=Sj(t*t),r=Sj(e*t+BigInt(7)),n=Qle(r);n%oA!==cA&&(n=Sj(-n));let i=new Tj(t,n,Yle);return i.assertValidity(),i}function tde(...t){return LE((0,Qs.bytesToNumberBE)(sA("BIP0340/challenge",...t)))}function mGe(t){return Aj(t).bytes}function yGe(t,e,r=(0,uGe.randomBytes)(32)){let n=(0,Qs.ensureBytes)("message",t),{bytes:i,scalar:o}=Aj(e),s=(0,Qs.ensureBytes)("auxRand",r,32),a=Mj(o^(0,Qs.bytesToNumberBE)(sA("BIP0340/aux",s))),u=sA("BIP0340/nonce",a,i,n),m=LE((0,Qs.bytesToNumberBE)(u));if(m===cA)throw new Error("sign failed: k is zero");let{bytes:p,scalar:b}=Aj(m),A=tde(p,i,n),M=new Uint8Array(64);if(M.set(p,0),M.set(Mj(LE(b+A*o)),32),!rde(M,n,i))throw new Error("sign: Invalid signature produced");return M}function rde(t,e,r){let n=(0,Qs.ensureBytes)("signature",t,64),i=(0,Qs.ensureBytes)("message",e),o=(0,Qs.ensureBytes)("publicKey",r,32);try{let s=ede((0,Qs.bytesToNumberBE)(o)),a=(0,Qs.bytesToNumberBE)(n.subarray(0,32));if(!Xle(a))return!1;let u=(0,Qs.bytesToNumberBE)(n.subarray(32,64));if(!hGe(u))return!1;let m=tde(Mj(a),Pj(s),i),p=pGe(s,u,LE(-m));return!(!p||!p.hasEvenY()||p.toAffine().x!==a)}catch{return!1}}Ha.schnorr=(()=>({getPublicKey:mGe,sign:yGe,verify:rde,utils:{randomPrivateKey:Ha.secp256k1.utils.randomPrivateKey,lift_x:ede,pointToBytes:Pj,numberToBytesBE:Qs.numberToBytesBE,bytesToNumberBE:Qs.bytesToNumberBE,taggedHash:sA,mod:Zo.mod}}))();var gGe=(()=>(0,Jle.isogenyMap)(A0,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))))(),bGe=(()=>(0,dGe.mapToCurveSimpleSWU)(A0,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:A0.create(BigInt("-11"))}))(),nde=(()=>(0,Jle.createHasher)(Ha.secp256k1.ProjectivePoint,t=>{let{x:e,y:r}=bGe(A0.create(t[0]));return gGe(e,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:A0.ORDER,m:1,k:128,expand:"xmd",hash:nA.sha256}))();Ha.hashToCurve=(()=>nde.hashToCurve)();Ha.encodeToCurve=(()=>nde.encodeToCurve)()});var Rj=H(e1=>{"use strict";_();Object.defineProperty(e1,"__esModule",{value:!0});e1.decodeHex=e1.remove0x=void 0;var vGe=bu();function ode(t){return t.startsWith("0x")||t.startsWith("0X")?t.slice(2):t}e1.remove0x=ode;function wGe(t){return(0,vGe.hexToBytes)(ode(t))}e1.decodeHex=wGe});var kj=H(wa=>{"use strict";_();Object.defineProperty(wa,"__esModule",{value:!0});wa.output=wa.exists=wa.hash=wa.bytes=wa.bool=wa.number=void 0;function fA(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}wa.number=fA;function sde(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}wa.bool=sde;function Ij(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}wa.bytes=Ij;function ade(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("hash must be wrapped by utils.wrapConstructor");fA(t.outputLen),fA(t.blockLen)}wa.hash=ade;function cde(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}wa.exists=cde;function fde(t,e){Ij(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}wa.output=fde;var _Ge={number:fA,bool:sde,bytes:Ij,hash:ade,exists:cde,output:fde};wa.default=_Ge});var lde=H(t1=>{"use strict";_();Object.defineProperty(t1,"__esModule",{value:!0});t1.poly1305=t1.wrapConstructorWithKey=void 0;var uA=bu(),Oj=kj(),ps=(t,e)=>t[e++]&255|(t[e++]&255)<<8,Bj=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,uA.toBytes)(e),(0,uA.ensureBytes)(e,32);let r=ps(e,0),n=ps(e,2),i=ps(e,4),o=ps(e,6),s=ps(e,8),a=ps(e,10),u=ps(e,12),m=ps(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|o<<9)&8191,this.r[4]=(o>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|a<<2)&8191,this.r[7]=(a>>>11|u<<5)&8065,this.r[8]=(u>>>8|m<<8)&8191,this.r[9]=m>>>5&127;for(let p=0;p<8;p++)this.pad[p]=ps(e,16+2*p)}process(e,r,n=!1){let i=n?0:2048,{h:o,r:s}=this,a=s[0],u=s[1],m=s[2],p=s[3],b=s[4],A=s[5],M=s[6],S=s[7],P=s[8],k=s[9],R=ps(e,r+0),B=ps(e,r+2),I=ps(e,r+4),q=ps(e,r+6),$=ps(e,r+8),U=ps(e,r+10),F=ps(e,r+12),L=ps(e,r+14),W=o[0]+(R&8191),E=o[1]+((R>>>13|B<<3)&8191),c=o[2]+((B>>>10|I<<6)&8191),l=o[3]+((I>>>7|q<<9)&8191),y=o[4]+((q>>>4|$<<12)&8191),d=o[5]+($>>>1&8191),h=o[6]+(($>>>14|U<<2)&8191),v=o[7]+((U>>>11|F<<5)&8191),x=o[8]+((F>>>8|L<<8)&8191),g=o[9]+(L>>>5|i),f=0,w=f+W*a+E*(5*k)+c*(5*P)+l*(5*S)+y*(5*M);f=w>>>13,w&=8191,w+=d*(5*A)+h*(5*b)+v*(5*p)+x*(5*m)+g*(5*u),f+=w>>>13,w&=8191;let D=f+W*u+E*a+c*(5*k)+l*(5*P)+y*(5*S);f=D>>>13,D&=8191,D+=d*(5*M)+h*(5*A)+v*(5*b)+x*(5*p)+g*(5*m),f+=D>>>13,D&=8191;let T=f+W*m+E*u+c*a+l*(5*k)+y*(5*P);f=T>>>13,T&=8191,T+=d*(5*S)+h*(5*M)+v*(5*A)+x*(5*b)+g*(5*p),f+=T>>>13,T&=8191;let C=f+W*p+E*m+c*u+l*a+y*(5*k);f=C>>>13,C&=8191,C+=d*(5*P)+h*(5*S)+v*(5*M)+x*(5*A)+g*(5*b),f+=C>>>13,C&=8191;let z=f+W*b+E*p+c*m+l*u+y*a;f=z>>>13,z&=8191,z+=d*(5*k)+h*(5*P)+v*(5*S)+x*(5*M)+g*(5*A),f+=z>>>13,z&=8191;let G=f+W*A+E*b+c*p+l*m+y*u;f=G>>>13,G&=8191,G+=d*a+h*(5*k)+v*(5*P)+x*(5*S)+g*(5*M),f+=G>>>13,G&=8191;let V=f+W*M+E*A+c*b+l*p+y*m;f=V>>>13,V&=8191,V+=d*u+h*a+v*(5*k)+x*(5*P)+g*(5*S),f+=V>>>13,V&=8191;let Z=f+W*S+E*M+c*A+l*b+y*p;f=Z>>>13,Z&=8191,Z+=d*m+h*u+v*a+x*(5*k)+g*(5*P),f+=Z>>>13,Z&=8191;let J=f+W*P+E*S+c*M+l*A+y*b;f=J>>>13,J&=8191,J+=d*p+h*m+v*u+x*a+g*(5*k),f+=J>>>13,J&=8191;let X=f+W*k+E*P+c*S+l*M+y*A;f=X>>>13,X&=8191,X+=d*b+h*p+v*m+x*u+g*a,f+=X>>>13,X&=8191,f=(f<<2)+f|0,f=f+w|0,w=f&8191,f=f>>>13,D+=f,o[0]=w,o[1]=D,o[2]=T,o[3]=C,o[4]=z,o[5]=G,o[6]=V,o[7]=Z,o[8]=J,o[9]=X}finalize(){let{h:e,pad:r}=this,n=new Uint16Array(10),i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=1<<13;let o=(i^1)-1;for(let a=0;a<10;a++)n[a]&=o;o=~o;for(let a=0;a<10;a++)e[a]=e[a]&o|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+r[0];e[0]=s&65535;for(let a=1;a<8;a++)s=(e[a]+r[a]|0)+(s>>>16)|0,e[a]=s&65535}update(e){Oj.default.exists(this);let{buffer:r,blockLen:n}=this;e=(0,uA.toBytes)(e);let i=e.length;for(let o=0;o<i;){let s=Math.min(n-this.pos,i-o);if(s===n){for(;n<=i-o;o+=n)this.process(e,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){Oj.default.exists(this),Oj.default.output(e,this),this.finished=!0;let{buffer:r,h:n}=this,{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let o=0;for(let s=0;s<8;s++)e[o++]=n[s]>>>0,e[o++]=n[s]>>>8;return e}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}};function ude(t){let e=(n,i)=>t(i).update((0,uA.toBytes)(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}t1.wrapConstructorWithKey=ude;t1.poly1305=ude(t=>new Bj(t))});var dde=H(dA=>{"use strict";_();Object.defineProperty(dA,"__esModule",{value:!0});dA.salsaBasic=void 0;var jl=kj(),ql=bu(),xGe=(0,ql.utf8ToBytes)("expand 16-byte k"),EGe=(0,ql.utf8ToBytes)("expand 32-byte k"),SGe=(0,ql.u32)(xGe),MGe=(0,ql.u32)(EGe),lA=t=>!(t.byteOffset%4),AGe=t=>{let{core:e,rounds:r,counterRight:n,counterLen:i,allow128bitKeys:o,extendNonceFn:s,blockLen:a}=(0,ql.checkOpts)({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},t);jl.default.number(i),jl.default.number(r),jl.default.number(a),jl.default.bool(n),jl.default.bool(o);let u=a/4;if(a%4!==0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(m,p,b,A,M=0)=>{if(jl.default.bytes(m),jl.default.bytes(p),jl.default.bytes(b),A||(A=new Uint8Array(b.length)),jl.default.bytes(A),jl.default.number(M),M<0||M>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(A.length<b.length)throw new Error(`Salsa/ChaCha: output (${A.length}) is shorter than data (${b.length})`);let S=[],P,k;if(m.length===32)lA(m)?P=m:(P=m.slice(),S.push(P)),k=MGe;else if(m.length===16&&o)P=new Uint8Array(32),P.set(m),P.set(m,16),k=SGe,S.push(P);else throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${m.length}`);if(lA(p)||(p=p.slice(),S.push(p)),s){if(p.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");P=s(k,P,p.subarray(0,16),new Uint8Array(32)),S.push(P),p=p.subarray(16)}let R=16-i;if(p.length!==R)throw new Error(`Salsa/ChaCha: nonce must be ${R} or 16 bytes`);if(R!==12){let W=new Uint8Array(12);W.set(p,n?0:12-p.length),S.push(p=W)}let B=new Uint8Array(a),I=(0,ql.u32)(B),q=(0,ql.u32)(P),$=(0,ql.u32)(p),U=lA(b)&&(0,ql.u32)(b),F=lA(A)&&(0,ql.u32)(A);S.push(I);let L=b.length;for(let W=0,E=M;W<L;E++){if(e(k,q,$,I,E,r),E>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");let c=Math.min(a,L-W);if(c===a&&F&&U){let l=W/4;if(W%4!==0)throw new Error("Salsa/ChaCha: invalid block position");for(let y=0;y<u;y++)F[l+y]=U[l+y]^I[y];W+=a;continue}for(let l=0;l<c;l++)A[W+l]=b[W+l]^B[l];W+=c}for(let W=0;W<S.length;W++)S[W].fill(0);return A}};dA.salsaBasic=AGe});var yde=H(Xn=>{"use strict";_();Object.defineProperty(Xn,"__esModule",{value:!0});Xn.xchacha20poly1305=Xn.chacha20poly1305=Xn._poly1305_aead=Xn.chacha12=Xn.chacha8=Xn.xchacha20=Xn.chacha20=Xn.chacha20orig=Xn.hchacha=void 0;var xu=bu(),PGe=lde(),UE=dde(),ct=(t,e)=>t<<e|t>>>32-e;function FE(t,e,r,n,i,o=20){let s=t[0],a=t[1],u=t[2],m=t[3],p=e[0],b=e[1],A=e[2],M=e[3],S=e[4],P=e[5],k=e[6],R=e[7],B=i,I=r[0],q=r[1],$=r[2],U=s,F=a,L=u,W=m,E=p,c=b,l=A,y=M,d=S,h=P,v=k,x=R,g=B,f=I,w=q,D=$;for(let C=0;C<o;C+=2)U=U+E|0,g=ct(g^U,16),d=d+g|0,E=ct(E^d,12),U=U+E|0,g=ct(g^U,8),d=d+g|0,E=ct(E^d,7),F=F+c|0,f=ct(f^F,16),h=h+f|0,c=ct(c^h,12),F=F+c|0,f=ct(f^F,8),h=h+f|0,c=ct(c^h,7),L=L+l|0,w=ct(w^L,16),v=v+w|0,l=ct(l^v,12),L=L+l|0,w=ct(w^L,8),v=v+w|0,l=ct(l^v,7),W=W+y|0,D=ct(D^W,16),x=x+D|0,y=ct(y^x,12),W=W+y|0,D=ct(D^W,8),x=x+D|0,y=ct(y^x,7),U=U+c|0,D=ct(D^U,16),v=v+D|0,c=ct(c^v,12),U=U+c|0,D=ct(D^U,8),v=v+D|0,c=ct(c^v,7),F=F+l|0,g=ct(g^F,16),x=x+g|0,l=ct(l^x,12),F=F+l|0,g=ct(g^F,8),x=x+g|0,l=ct(l^x,7),L=L+y|0,f=ct(f^L,16),d=d+f|0,y=ct(y^d,12),L=L+y|0,f=ct(f^L,8),d=d+f|0,y=ct(y^d,7),W=W+E|0,w=ct(w^W,16),h=h+w|0,E=ct(E^h,12),W=W+E|0,w=ct(w^W,8),h=h+w|0,E=ct(E^h,7);let T=0;n[T++]=s+U|0,n[T++]=a+F|0,n[T++]=u+L|0,n[T++]=m+W|0,n[T++]=p+E|0,n[T++]=b+c|0,n[T++]=A+l|0,n[T++]=M+y|0,n[T++]=S+d|0,n[T++]=P+h|0,n[T++]=k+v|0,n[T++]=R+x|0,n[T++]=B+g|0,n[T++]=I+f|0,n[T++]=q+w|0,n[T++]=$+D|0}function mde(t,e,r,n){let i=(0,xu.u32)(e),o=(0,xu.u32)(r),s=(0,xu.u32)(n),a=t[0],u=t[1],m=t[2],p=t[3],b=i[0],A=i[1],M=i[2],S=i[3],P=i[4],k=i[5],R=i[6],B=i[7],I=o[0],q=o[1],$=o[2],U=o[3];for(let F=0;F<20;F+=2)a=a+b|0,I=ct(I^a,16),P=P+I|0,b=ct(b^P,12),a=a+b|0,I=ct(I^a,8),P=P+I|0,b=ct(b^P,7),u=u+A|0,q=ct(q^u,16),k=k+q|0,A=ct(A^k,12),u=u+A|0,q=ct(q^u,8),k=k+q|0,A=ct(A^k,7),m=m+M|0,$=ct($^m,16),R=R+$|0,M=ct(M^R,12),m=m+M|0,$=ct($^m,8),R=R+$|0,M=ct(M^R,7),p=p+S|0,U=ct(U^p,16),B=B+U|0,S=ct(S^B,12),p=p+S|0,U=ct(U^p,8),B=B+U|0,S=ct(S^B,7),a=a+A|0,U=ct(U^a,16),R=R+U|0,A=ct(A^R,12),a=a+A|0,U=ct(U^a,8),R=R+U|0,A=ct(A^R,7),u=u+M|0,I=ct(I^u,16),B=B+I|0,M=ct(M^B,12),u=u+M|0,I=ct(I^u,8),B=B+I|0,M=ct(M^B,7),m=m+S|0,q=ct(q^m,16),P=P+q|0,S=ct(S^P,12),m=m+S|0,q=ct(q^m,8),P=P+q|0,S=ct(S^P,7),p=p+b|0,$=ct($^p,16),k=k+$|0,b=ct(b^k,12),p=p+b|0,$=ct($^p,8),k=k+$|0,b=ct(b^k,7);return s[0]=a,s[1]=u,s[2]=m,s[3]=p,s[4]=I,s[5]=q,s[6]=$,s[7]=U,n}Xn.hchacha=mde;Xn.chacha20orig=(0,UE.salsaBasic)({core:FE,counterRight:!1,counterLen:8});Xn.chacha20=(0,UE.salsaBasic)({core:FE,counterRight:!1,counterLen:4,allow128bitKeys:!1});Xn.xchacha20=(0,UE.salsaBasic)({core:FE,counterRight:!1,counterLen:8,extendNonceFn:mde,allow128bitKeys:!1});Xn.chacha8=(0,UE.salsaBasic)({core:FE,counterRight:!1,counterLen:4,rounds:8});Xn.chacha12=(0,UE.salsaBasic)({core:FE,counterRight:!1,counterLen:4,rounds:12});var TGe=new Uint8Array(16),hde=(t,e)=>{t.update(e);let r=e.length%16;r&&t.update(TGe.subarray(r))},pde=(t,e,r,n,i)=>{let o=t(e,r,new Uint8Array(32)),s=PGe.poly1305.create(o);i&&hde(s,i),hde(s,n);let a=new Uint8Array(16),u=(0,xu.createView)(a);(0,xu.setBigUint64)(u,0,BigInt(i?i.length:0),!0),(0,xu.setBigUint64)(u,8,BigInt(n.length),!0),s.update(a);let m=s.digest();return o.fill(0),m},RGe=t=>(e,r,n)=>((0,xu.ensureBytes)(e,32),(0,xu.ensureBytes)(r),{tagLength:16,encrypt:(o,s)=>{let a=o.length,u=a+16;s?(0,xu.ensureBytes)(s,u):s=new Uint8Array(u),t(e,r,o,s,1);let m=pde(t,e,r,s.subarray(0,-16),n);return s.set(m,a),s},decrypt:(o,s)=>{let a=o.length,u=a-16;if(a<16)throw new Error(`encrypted data must be at least ${16} bytes`);s?(0,xu.ensureBytes)(s,u):s=new Uint8Array(u);let m=o.subarray(0,-16),p=o.subarray(-16),b=pde(t,e,r,m,n);if(!(0,xu.equalBytes)(p,b))throw new Error("invalid tag");return t(e,r,m,s,1),s}});Xn._poly1305_aead=RGe;Xn.chacha20poly1305=(0,Xn._poly1305_aead)(Xn.chacha20);Xn.xchacha20poly1305=(0,Xn._poly1305_aead)(Xn.xchacha20)});var pA=H(_a=>{"use strict";_();Object.defineProperty(_a,"__esModule",{value:!0});_a.output=_a.exists=_a.hash=_a.bytes=_a.bool=_a.number=void 0;function hA(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}_a.number=hA;function gde(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}_a.bool=gde;function IGe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Dj(t,...e){if(!IGe(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}_a.bytes=Dj;function bde(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");hA(t.outputLen),hA(t.blockLen)}_a.hash=bde;function vde(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}_a.exists=vde;function wde(t,e){Dj(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}_a.output=wde;var kGe={number:hA,bool:gde,bytes:Dj,hash:bde,exists:vde,output:wde};_a.default=kGe});var _de=H(mA=>{"use strict";_();Object.defineProperty(mA,"__esModule",{value:!0});mA.crypto=void 0;mA.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var zE=H(mr=>{"use strict";_();Object.defineProperty(mr,"__esModule",{value:!0});mr.randomBytes=mr.wrapXOFConstructorWithOpts=mr.wrapConstructorWithOpts=mr.wrapConstructor=mr.checkOpts=mr.Hash=mr.concatBytes=mr.toBytes=mr.utf8ToBytes=mr.asyncLoop=mr.nextTick=mr.hexToBytes=mr.bytesToHex=mr.isLE=mr.rotr=mr.createView=mr.u32=mr.u8=void 0;var Cj=_de(),OGe=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);mr.u8=OGe;var BGe=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));mr.u32=BGe;function jj(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var DGe=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);mr.createView=DGe;var CGe=(t,e)=>t<<32-e|t>>>e;mr.rotr=CGe;mr.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!mr.isLE)throw new Error("Non little-endian hardware is not supported");var NGe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function jGe(t){if(!jj(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=NGe[t[r]];return e}mr.bytesToHex=jGe;var Mh={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function xde(t){if(t>=Mh._0&&t<=Mh._9)return t-Mh._0;if(t>=Mh._A&&t<=Mh._F)return t-(Mh._A-10);if(t>=Mh._a&&t<=Mh._f)return t-(Mh._a-10)}function qGe(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=xde(t.charCodeAt(o)),a=xde(t.charCodeAt(o+1));if(s===void 0||a===void 0){let u=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+o)}n[i]=s*16+a}return n}mr.hexToBytes=qGe;var $Ge=async()=>{};mr.nextTick=$Ge;async function LGe(t,e,r){let n=Date.now();for(let i=0;i<t;i++){r(i);let o=Date.now()-n;o>=0&&o<e||(await(0,mr.nextTick)(),n+=o)}}mr.asyncLoop=LGe;function Ede(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}mr.utf8ToBytes=Ede;function yA(t){if(typeof t=="string"&&(t=Ede(t)),!jj(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}mr.toBytes=yA;function UGe(...t){let e=0;for(let n=0;n<t.length;n++){let i=t[n];if(!jj(i))throw new Error("Uint8Array expected");e+=i.length}let r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}mr.concatBytes=UGe;var Nj=class{clone(){return this._cloneInto()}};mr.Hash=Nj;var FGe={}.toString;function zGe(t,e){if(e!==void 0&&FGe.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}mr.checkOpts=zGe;function KGe(t){let e=n=>t().update(yA(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}mr.wrapConstructor=KGe;function WGe(t){let e=(n,i)=>t(i).update(yA(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}mr.wrapConstructorWithOpts=WGe;function GGe(t){let e=(n,i)=>t(i).update(yA(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}mr.wrapXOFConstructorWithOpts=GGe;function VGe(t=32){if(Cj.crypto&&typeof Cj.crypto.getRandomValues=="function")return Cj.crypto.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}mr.randomBytes=VGe});var Mde=H(cg=>{"use strict";_();Object.defineProperty(cg,"__esModule",{value:!0});cg.hmac=cg.HMAC=void 0;var gA=pA(),Sde=zE(),KE=class extends Sde.Hash{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,(0,gA.hash)(e);let n=(0,Sde.toBytes)(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return(0,gA.exists)(this),this.iHash.update(e),this}digestInto(e){(0,gA.exists)(this),(0,gA.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};cg.HMAC=KE;var HGe=(t,e,r)=>new KE(t,e).update(r).digest();cg.hmac=HGe;cg.hmac.create=(t,e)=>new KE(t,e)});var kde=H(P0=>{"use strict";_();Object.defineProperty(P0,"__esModule",{value:!0});P0.hkdf=P0.expand=P0.extract=void 0;var $j=pA(),Ade=zE(),Tde=Mde();function Rde(t,e,r){return(0,$j.hash)(t),r===void 0&&(r=new Uint8Array(t.outputLen)),(0,Tde.hmac)(t,(0,Ade.toBytes)(r),(0,Ade.toBytes)(e))}P0.extract=Rde;var qj=new Uint8Array([0]),Pde=new Uint8Array;function Ide(t,e,r,n=32){if((0,$j.hash)(t),(0,$j.number)(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");let i=Math.ceil(n/t.outputLen);r===void 0&&(r=Pde);let o=new Uint8Array(i*t.outputLen),s=Tde.hmac.create(t,e),a=s._cloneInto(),u=new Uint8Array(s.outputLen);for(let m=0;m<i;m++)qj[0]=m+1,a.update(m===0?Pde:u).update(r).update(qj).digestInto(u),o.set(u,t.outputLen*m),s._cloneInto(a);return s.destroy(),a.destroy(),u.fill(0),qj.fill(0),o.slice(0,n)}P0.expand=Ide;var ZGe=(t,e,r,n,i)=>Ide(t,Rde(t,e,r),n,i);P0.hkdf=ZGe});var Ode=H(bA=>{"use strict";_();Object.defineProperty(bA,"__esModule",{value:!0});bA.SHA2=void 0;var Lj=pA(),WE=zE();function JGe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,m=n?0:4;t.setUint32(e+u,s,n),t.setUint32(e+m,a,n)}var Uj=class extends WE.Hash{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,WE.createView)(this.buffer)}update(e){(0,Lj.exists)(this);let{view:r,buffer:n,blockLen:i}=this;e=(0,WE.toBytes)(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let u=(0,WE.createView)(e);for(;i<=o-s;s+=i)this.process(u,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,Lj.exists)(this),(0,Lj.output)(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let b=s;b<i;b++)r[b]=0;JGe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,WE.createView)(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let m=u/4,p=this.get();if(m>p.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<m;b++)a.setUint32(4*b,p[b],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};bA.SHA2=Uj});var Bde=H(r1=>{"use strict";_();Object.defineProperty(r1,"__esModule",{value:!0});r1.sha224=r1.sha256=void 0;var YGe=Ode(),wf=zE(),QGe=(t,e,r)=>t&e^~t&r,XGe=(t,e,r)=>t&e^t&r^e&r,eVe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),T0=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),R0=new Uint32Array(64),vA=class extends YGe.SHA2{constructor(){super(64,32,8,!1),this.A=T0[0]|0,this.B=T0[1]|0,this.C=T0[2]|0,this.D=T0[3]|0,this.E=T0[4]|0,this.F=T0[5]|0,this.G=T0[6]|0,this.H=T0[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:u}=this;return[e,r,n,i,o,s,a,u]}set(e,r,n,i,o,s,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=u|0}process(e,r){for(let b=0;b<16;b++,r+=4)R0[b]=e.getUint32(r,!1);for(let b=16;b<64;b++){let A=R0[b-15],M=R0[b-2],S=(0,wf.rotr)(A,7)^(0,wf.rotr)(A,18)^A>>>3,P=(0,wf.rotr)(M,17)^(0,wf.rotr)(M,19)^M>>>10;R0[b]=P+R0[b-7]+S+R0[b-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:u,G:m,H:p}=this;for(let b=0;b<64;b++){let A=(0,wf.rotr)(a,6)^(0,wf.rotr)(a,11)^(0,wf.rotr)(a,25),M=p+A+QGe(a,u,m)+eVe[b]+R0[b]|0,P=((0,wf.rotr)(n,2)^(0,wf.rotr)(n,13)^(0,wf.rotr)(n,22))+XGe(n,i,o)|0;p=m,m=u,u=a,a=s+M|0,s=o,o=i,i=n,n=M+P|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,u=u+this.F|0,m=m+this.G|0,p=p+this.H|0,this.set(n,i,o,s,a,u,m,p)}roundClean(){R0.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Fj=class extends vA{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};r1.sha256=(0,wf.wrapConstructor)(()=>new vA);r1.sha224=(0,wf.wrapConstructor)(()=>new Fj)});var Nde=H(wA=>{"use strict";_();Object.defineProperty(wA,"__esModule",{value:!0});wA.aes256gcm=void 0;var Dde=bu(),Cde=j5(),zj=BE();function tVe(t,e,r){var n=function(o){var s=(0,Cde.createCipheriv)("aes-256-gcm",t,e);r&&s.setAAD(r);var a=s.update(o),u=s.final();return(0,Dde.concatBytes)(a,u,s.getAuthTag())},i=function(o){var s=o.subarray(0,o.length-zj.AEAD_TAG_LENGTH),a=o.subarray(-zj.AEAD_TAG_LENGTH),u=(0,Cde.createDecipheriv)("aes-256-gcm",t,e);r&&u.setAAD(r),u.setAuthTag(a);var m=u.update(s),p=u.final();return(0,Dde.concatBytes)(m,p)};return{tagLength:zj.AEAD_TAG_LENGTH,encrypt:n,decrypt:i}}wA.aes256gcm=tVe});var Kj=H(I0=>{"use strict";_();Object.defineProperty(I0,"__esModule",{value:!0});I0.deriveKey=I0.aesDecrypt=I0.aesEncrypt=void 0;var rVe=yde(),qde=bu(),nVe=LN(),iVe=kde(),oVe=Bde(),jde=rg(),_A=BE(),sVe=Nde();function aVe(t,e){return $de(!0,t,e)}I0.aesEncrypt=aVe;function cVe(t,e){return $de(!1,t,e)}I0.aesDecrypt=cVe;function fVe(t){return(0,iVe.hkdf)(oVe.sha256,t,void 0,void 0,32)}I0.deriveKey=fVe;function $de(t,e,r){var n=(0,jde.symmetricAlgorithm)(),i=t?uVe:lVe;if(n==="aes-256-gcm")return i(sVe.aes256gcm,e,r,(0,jde.symmetricNonceLength)());if(n==="xchacha20")return i(rVe.xchacha20poly1305,e,r,_A.XCHACHA20_NONCE_LENGTH);throw new Error("Not implemented")}function uVe(t,e,r,n){var i=(0,nVe.randomBytes)(n),o=t(e,i),s=o.encrypt(r),a=s.subarray(0,s.length-_A.AEAD_TAG_LENGTH),u=s.subarray(-_A.AEAD_TAG_LENGTH);return(0,qde.concatBytes)(i,u,a)}function lVe(t,e,r,n){var i=n+_A.AEAD_TAG_LENGTH,o=r.subarray(0,n),s=r.subarray(n,i),a=r.subarray(i),u=t(e,Uint8Array.from(o)),m=(0,qde.concatBytes)(a,s);return u.decrypt(m)}});var zde=H(Xs=>{"use strict";_();Object.defineProperty(Xs,"__esModule",{value:!0});Xs.hexToPublicKey=Xs.convertPublicKeyFormat=Xs.getSharedPoint=Xs.getSharedKey=Xs.getPublicKey=Xs.isValidPrivateKey=Xs.getValidSecret=void 0;var dVe=bu(),hVe=LN(),Lde=qle(),pVe=ide(),Wj=rg(),Ude=BE(),mVe=Rj(),yVe=Kj();function gVe(){var t;do t=(0,hVe.randomBytes)(Ude.SECRET_KEY_LENGTH);while(!Fde(t));return t}Xs.getValidSecret=gVe;function Fde(t){return GE(function(e){return e.utils.isValidPrivateKey(t)},function(){return!0},function(){return!0})}Xs.isValidPrivateKey=Fde;function bVe(t){return GE(function(e){return e.getPublicKey(t)},function(e){return e.getPublicKey(t)},function(e){return e.getPublicKey(t)})}Xs.getPublicKey=bVe;function vVe(t,e){return(0,yVe.deriveKey)((0,dVe.concatBytes)(t,e))}Xs.getSharedKey=vVe;function wVe(t,e,r){return GE(function(n){return n.getSharedSecret(t,e,r)},function(n){return n.getSharedSecret(t,e)},function(n){var i=n.utils.getExtendedPublicKey(t).scalar,o=n.ExtendedPoint.fromHex(e).multiply(i);return o.toRawBytes()})}Xs.getSharedPoint=wVe;function _Ve(t,e){return GE(function(r){return r.getSharedSecret(BigInt(1),t,e)},function(){return t},function(){return t})}Xs.convertPublicKeyFormat=_Ve;function xVe(t){var e=(0,mVe.decodeHex)(t);return GE(function(){if(e.length===Ude.ETH_PUBLIC_KEY_SIZE){var r=new Uint8Array(1+e.length);return r.set([4]),r.set(e,1),r}return e},function(){return e},function(){return e})}Xs.hexToPublicKey=xVe;function GE(t,e,r){if((0,Wj.ellipticCurve)()==="secp256k1")return t(pVe.secp256k1);if((0,Wj.ellipticCurve)()==="x25519")return e(Lde.x25519);if((0,Wj.ellipticCurve)()==="ed25519")return r(Lde.ed25519);throw new Error("Not implemented")}});var xA=H(Ah=>{"use strict";_();var EVe=Ah&&Ah.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Gj=Ah&&Ah.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&EVe(e,t,r)};Object.defineProperty(Ah,"__esModule",{value:!0});Gj(zde(),Ah);Gj(Rj(),Ah);Gj(Kj(),Ah)});var Hj=H(SA=>{"use strict";_();Object.defineProperty(SA,"__esModule",{value:!0});SA.PublicKey=void 0;var Vj=bu(),SVe=rg(),EA=xA(),MVe=function(){function t(e){this.data=(0,EA.convertPublicKeyFormat)(e,!0)}return t.fromHex=function(e){return new t((0,EA.hexToPublicKey)(e))},Object.defineProperty(t.prototype,"uncompressed",{get:function(){return N.Buffer.from((0,EA.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"compressed",{get:function(){return N.Buffer.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(e){return e===void 0&&(e=!0),e?(0,Vj.bytesToHex)(this.data):(0,Vj.bytesToHex)(this.uncompressed)},t.prototype.decapsulate=function(e){var r,n;return(0,SVe.isHkdfKeyCompressed)()?(r=this.data,n=e.multiply(this,!0)):(r=this.uncompressed,n=e.multiply(this,!1)),(0,EA.getSharedKey)(r,n)},t.prototype.equals=function(e){return(0,Vj.equalBytes)(this.data,e.data)},t}();SA.PublicKey=MVe});var Wde=H(MA=>{"use strict";_();Object.defineProperty(MA,"__esModule",{value:!0});MA.PrivateKey=void 0;var Kde=bu(),AVe=rg(),n1=xA(),PVe=Hj(),TVe=function(){function t(e){var r=e===void 0?(0,n1.getValidSecret)():e;if(!(0,n1.isValidPrivateKey)(r))throw new Error("Invalid private key");this.data=r,this.publicKey=new PVe.PublicKey((0,n1.getPublicKey)(r))}return t.fromHex=function(e){return new t((0,n1.decodeHex)(e))},Object.defineProperty(t.prototype,"secret",{get:function(){return N.Buffer.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(){return(0,Kde.bytesToHex)(this.data)},t.prototype.encapsulate=function(e){var r,n;return(0,AVe.isHkdfKeyCompressed)()?(r=this.publicKey.compressed,n=this.multiply(e,!0)):(r=this.publicKey.uncompressed,n=this.multiply(e,!1)),(0,n1.getSharedKey)(r,n)},t.prototype.multiply=function(e,r){return r===void 0&&(r=!1),(0,n1.getSharedPoint)(this.data,e.compressed,r)},t.prototype.equals=function(e){return(0,Kde.equalBytes)(this.data,e.data)},t}();MA.PrivateKey=TVe});var Zj=H(i1=>{"use strict";_();Object.defineProperty(i1,"__esModule",{value:!0});i1.PublicKey=i1.PrivateKey=void 0;var RVe=Wde();Object.defineProperty(i1,"PrivateKey",{enumerable:!0,get:function(){return RVe.PrivateKey}});var IVe=Hj();Object.defineProperty(i1,"PublicKey",{enumerable:!0,get:function(){return IVe.PublicKey}})});var Hde=H(Za=>{"use strict";_();Object.defineProperty(Za,"__esModule",{value:!0});Za.utils=Za.PublicKey=Za.PrivateKey=Za.ECIES_CONFIG=Za.decrypt=Za.encrypt=void 0;var kVe=bu(),Gde=rg(),o1=Zj(),fg=xA();function OVe(t,e){var r=new o1.PrivateKey,n=t instanceof Uint8Array?new o1.PublicKey(t):o1.PublicKey.fromHex(t),i=r.encapsulate(n),o=(0,fg.aesEncrypt)(i,e),s;return(0,Gde.isEphemeralKeyCompressed)()?s=r.publicKey.compressed:s=r.publicKey.uncompressed,N.Buffer.from((0,kVe.concatBytes)(s,o))}Za.encrypt=OVe;function BVe(t,e){var r=t instanceof Uint8Array?new o1.PrivateKey(t):o1.PrivateKey.fromHex(t),n=(0,Gde.ephemeralKeySize)(),i=new o1.PublicKey(e.subarray(0,n)),o=e.subarray(n),s=i.decapsulate(r);return N.Buffer.from((0,fg.aesDecrypt)(s,o))}Za.decrypt=BVe;var DVe=rg();Object.defineProperty(Za,"ECIES_CONFIG",{enumerable:!0,get:function(){return DVe.ECIES_CONFIG}});var Vde=Zj();Object.defineProperty(Za,"PrivateKey",{enumerable:!0,get:function(){return Vde.PrivateKey}});Object.defineProperty(Za,"PublicKey",{enumerable:!0,get:function(){return Vde.PublicKey}});Za.utils={aesDecrypt:fg.aesDecrypt,aesEncrypt:fg.aesEncrypt,decodeHex:fg.decodeHex,getValidSecret:fg.getValidSecret,remove0x:fg.remove0x}});var li=H((vCt,Zde)=>{"use strict";_();Zde.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var _f=H((_Ct,AA)=>{"use strict";_();var{AbortController:Jde,AbortSignal:CVe}=typeof self<"u"?self:typeof window<"u"?window:void 0;AA.exports=Jde;AA.exports.AbortSignal=CVe;AA.exports.default=Jde});var ea=H((ECt,Yj)=>{"use strict";_();var NVe=Ut(),{kResistStopPropagation:jVe,SymbolDispose:qVe}=li(),$Ve=globalThis.AbortSignal||_f().AbortSignal,LVe=globalThis.AbortController||_f().AbortController,UVe=Object.getPrototypeOf(async function(){}).constructor,Yde=globalThis.Blob||NVe.Blob,FVe=typeof Yde<"u"?function(e){return e instanceof Yde}:function(e){return!1},Qde=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ERR_INVALID_ARG_TYPE(e,"AbortSignal",t)},zVe=(t,e)=>{if(typeof t!="function")throw new ERR_INVALID_ARG_TYPE(e,"Function",t)},Jj=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};Yj.exports={AggregateError:Jj,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof UVe},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:FVe,deprecate(t,e){return t},addAbortListener:uo().addAbortListener||function(e,r){if(e===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",e);Qde(e,"signal"),zVe(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[jVe]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[qVe](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:$Ve.any||function(e){if(e.length===1)return e[0];let r=new LVe,n=()=>r.abort();return e.forEach(i=>{Qde(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};Yj.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var xa=H((MCt,the)=>{"use strict";_();var{format:KVe,inspect:PA,AggregateError:WVe}=ea(),GVe=globalThis.AggregateError||WVe,VVe=Symbol("kIsNodeError"),HVe=["string","function","number","object","Function","Object","boolean","bigint","symbol"],ZVe=/^([A-Z][a-z0-9]*)+$/,JVe="__node_internal_",TA={};function ug(t,e){if(!t)throw new TA.ERR_INTERNAL_ASSERTION(e)}function Xde(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function YVe(t,e,r){if(typeof e=="function")return ug(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return ug(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:KVe(e,...r)}function ms(t,e,r){r||(r=Error);class n extends r{constructor(...o){super(YVe(t,e,o))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[VVe]=!0,TA[t]=n}function ehe(t){let e=JVe+t.name;return Object.defineProperty(t,"name",{value:e}),t}function QVe(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new GVe([e,t],e.message);return r.code=e.code,r}return t||e}var Qj=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new TA.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};ms("ERR_ASSERTION","%s",Error);ms("ERR_INVALID_ARG_TYPE",(t,e,r)=>{ug(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],o=[],s=[];for(let u of e)ug(typeof u=="string","All expected entries have to be of type string"),HVe.includes(u)?i.push(u.toLowerCase()):ZVe.test(u)?o.push(u):(ug(u!=="object",'The value "object" should be written as "Object"'),s.push(u));if(o.length>0){let u=i.indexOf("object");u!==-1&&(i.splice(i,u,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let u=i.pop();n+=`one of type ${i.join(", ")}, or ${u}`}}(o.length>0||s.length>0)&&(n+=" or ")}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let u=o.pop();n+=`an instance of ${o.join(", ")}, or ${u}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{let u=s.pop();n+=`one of ${s.join(", ")}, or ${u}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let u=PA(r,{depth:-1});n+=`. Received ${u}`}}else{let u=PA(r,{colors:!1});u.length>25&&(u=`${u.slice(0,25)}...`),n+=`. Received type ${typeof r} (${u})`}return n},TypeError);ms("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=PA(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);ms("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);ms("ERR_MISSING_ARGS",(...t)=>{ug(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);ms("ERR_OUT_OF_RANGE",(t,e,r)=>{ug(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=Xde(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=Xde(n)),n+="n"):n=PA(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);ms("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);ms("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);ms("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);ms("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);ms("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);ms("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ms("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);ms("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);ms("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);ms("ERR_STREAM_WRITE_AFTER_END","write after end",Error);ms("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);the.exports={AbortError:Qj,aggregateTwoErrors:ehe(QVe),hideStackFrames:ehe,codes:TA}});var a1=H((PCt,lhe)=>{"use strict";_();var{ArrayIsArray:eq,ArrayPrototypeIncludes:ohe,ArrayPrototypeJoin:she,ArrayPrototypeMap:XVe,NumberIsInteger:tq,NumberIsNaN:eHe,NumberMAX_SAFE_INTEGER:tHe,NumberMIN_SAFE_INTEGER:rHe,NumberParseInt:nHe,ObjectPrototypeHasOwnProperty:iHe,RegExpPrototypeExec:ahe,String:oHe,StringPrototypeToUpperCase:sHe,StringPrototypeTrim:aHe}=li(),{hideStackFrames:xf,codes:{ERR_SOCKET_BAD_PORT:cHe,ERR_INVALID_ARG_TYPE:ta,ERR_INVALID_ARG_VALUE:s1,ERR_OUT_OF_RANGE:lg,ERR_UNKNOWN_SIGNAL:rhe}}=xa(),{normalizeEncoding:fHe}=ea(),{isAsyncFunction:uHe,isArrayBufferView:lHe}=ea().types,nhe={};function dHe(t){return t===(t|0)}function hHe(t){return t===t>>>0}var pHe=/^[0-7]+$/,mHe="must be a 32-bit unsigned integer or an octal string";function yHe(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(ahe(pHe,t)===null)throw new s1(e,t,mHe);t=nHe(t,8)}return che(t,e),t}var gHe=xf((t,e,r=rHe,n=tHe)=>{if(typeof t!="number")throw new ta(e,"number",t);if(!tq(t))throw new lg(e,"an integer",t);if(t<r||t>n)throw new lg(e,`>= ${r} && <= ${n}`,t)}),bHe=xf((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new ta(e,"number",t);if(!tq(t))throw new lg(e,"an integer",t);if(t<r||t>n)throw new lg(e,`>= ${r} && <= ${n}`,t)}),che=xf((t,e,r=!1)=>{if(typeof t!="number")throw new ta(e,"number",t);if(!tq(t))throw new lg(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new lg(e,`>= ${n} && <= ${i}`,t)});function rq(t,e){if(typeof t!="string")throw new ta(e,"string",t)}function vHe(t,e,r=void 0,n){if(typeof t!="number")throw new ta(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&eHe(t))throw new lg(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var wHe=xf((t,e,r)=>{if(!ohe(r,t)){let i="must be one of: "+she(XVe(r,o=>typeof o=="string"?`'${o}'`:oHe(o)),", ");throw new s1(e,t,i)}});function fhe(t,e){if(typeof t!="boolean")throw new ta(e,"boolean",t)}function Xj(t,e,r){return t==null||!iHe(t,e)?r:t[e]}var _He=xf((t,e,r=null)=>{let n=Xj(r,"allowArray",!1),i=Xj(r,"allowFunction",!1);if(!Xj(r,"nullable",!1)&&t===null||!n&&eq(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new ta(e,"Object",t)}),xHe=xf((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new ta(e,"a dictionary",t)}),RA=xf((t,e,r=0)=>{if(!eq(t))throw new ta(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new s1(e,t,n)}});function EHe(t,e){RA(t,e);for(let r=0;r<t.length;r++)rq(t[r],`${e}[${r}]`)}function SHe(t,e){RA(t,e);for(let r=0;r<t.length;r++)fhe(t[r],`${e}[${r}]`)}function MHe(t,e){RA(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new ta(i,"AbortSignal",n);uhe(n,i)}}function AHe(t,e="signal"){if(rq(t,e),nhe[t]===void 0)throw nhe[sHe(t)]!==void 0?new rhe(t+" (signals must use all capital letters)"):new rhe(t)}var PHe=xf((t,e="buffer")=>{if(!lHe(t))throw new ta(e,["Buffer","TypedArray","DataView"],t)});function THe(t,e){let r=fHe(e),n=t.length;if(r==="hex"&&n%2!==0)throw new s1("encoding",e,`is invalid for data of length ${n}`)}function RHe(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&aHe(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new cHe(e,t,r);return t|0}var uhe=xf((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ta(e,"AbortSignal",t)}),IHe=xf((t,e)=>{if(typeof t!="function")throw new ta(e,"Function",t)}),kHe=xf((t,e)=>{if(typeof t!="function"||uHe(t))throw new ta(e,"Function",t)}),OHe=xf((t,e)=>{if(t!==void 0)throw new ta(e,"undefined",t)});function BHe(t,e,r){if(!ohe(r,t))throw new ta(e,`('${she(r,"|")}')`,t)}var DHe=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ihe(t,e){if(typeof t>"u"||!ahe(DHe,t))throw new s1(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function CHe(t){if(typeof t=="string")return ihe(t,"hints"),t;if(eq(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];ihe(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new s1("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}lhe.exports={isInt32:dHe,isUint32:hHe,parseFileMode:yHe,validateArray:RA,validateStringArray:EHe,validateBooleanArray:SHe,validateAbortSignalArray:MHe,validateBoolean:fhe,validateBuffer:PHe,validateDictionary:xHe,validateEncoding:THe,validateFunction:IHe,validateInt32:bHe,validateInteger:gHe,validateNumber:vHe,validateObject:_He,validateOneOf:wHe,validatePlainFunction:kHe,validatePort:RHe,validateSignalName:AHe,validateString:rq,validateUint32:che,validateUndefined:OHe,validateUnion:BHe,validateAbortSignal:uhe,validateLinkHeaderValue:CHe}});var Ll=H((RCt,Ahe)=>{"use strict";_();var{SymbolAsyncIterator:dhe,SymbolIterator:hhe,SymbolFor:dg}=li(),phe=dg("nodejs.stream.destroyed"),mhe=dg("nodejs.stream.errored"),nq=dg("nodejs.stream.readable"),iq=dg("nodejs.stream.writable"),yhe=dg("nodejs.stream.disturbed"),NHe=dg("nodejs.webstream.isClosedPromise"),jHe=dg("nodejs.webstream.controllerErrorFunction");function IA(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function kA(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function qHe(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function $l(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function ghe(t){return!!(t&&!$l(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function bhe(t){return!!(t&&!$l(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function vhe(t){return!!(t&&!$l(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function $He(t){return ghe(t)||bhe(t)||vhe(t)}function LHe(t,e){return t==null?!1:e===!0?typeof t[dhe]=="function":e===!1?typeof t[hhe]=="function":typeof t[dhe]=="function"||typeof t[hhe]=="function"}function OA(t){if(!$l(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[phe]||n!=null&&n.destroyed)}function whe(t){if(!kA(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function UHe(t,e){if(!kA(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function FHe(t){if(!IA(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function _he(t,e){if(!IA(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function xhe(t){return t&&t[nq]!=null?t[nq]:typeof t?.readable!="boolean"?null:OA(t)?!1:IA(t)&&t.readable&&!_he(t)}function Ehe(t){return t&&t[iq]!=null?t[iq]:typeof t?.writable!="boolean"?null:OA(t)?!1:kA(t)&&t.writable&&!whe(t)}function zHe(t,e){return $l(t)?OA(t)?!0:!(e?.readable!==!1&&xhe(t)||e?.writable!==!1&&Ehe(t)):null}function KHe(t){var e,r;return $l(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function WHe(t){var e,r;return $l(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function GHe(t){if(!$l(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&She(t)?t._closed:null}function She(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function Mhe(t){return typeof t._sent100=="boolean"&&She(t)}function VHe(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function HHe(t){if(!$l(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&Mhe(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function ZHe(t){var e;return!!(t&&((e=t[yhe])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function JHe(t){var e,r,n,i,o,s,a,u,m,p;return!!(t&&((e=(r=(n=(i=(o=(s=t[mhe])!==null&&s!==void 0?s:t.readableErrored)!==null&&o!==void 0?o:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(u=t._writableState)===null||u===void 0?void 0:u.errorEmitted)!==null&&r!==void 0?r:(m=t._readableState)===null||m===void 0?void 0:m.errored)!==null&&e!==void 0?e:!((p=t._writableState)===null||p===void 0)&&p.errored))}Ahe.exports={isDestroyed:OA,kIsDestroyed:phe,isDisturbed:ZHe,kIsDisturbed:yhe,isErrored:JHe,kIsErrored:mhe,isReadable:xhe,kIsReadable:nq,kIsClosedPromise:NHe,kControllerErrorFunction:jHe,kIsWritable:iq,isClosed:GHe,isDuplexNodeStream:qHe,isFinished:zHe,isIterable:LHe,isReadableNodeStream:IA,isReadableStream:ghe,isReadableEnded:FHe,isReadableFinished:_he,isReadableErrored:WHe,isNodeStream:$l,isWebStream:$He,isWritable:Ehe,isWritableNodeStream:kA,isWritableStream:bhe,isWritableEnded:whe,isWritableFinished:UHe,isWritableErrored:KHe,isServerRequest:VHe,isServerResponse:Mhe,willEmitClose:HHe,isTransformStream:vhe}});var Ph=H((kCt,fq)=>{_();var k0=ai(),{AbortError:Che,codes:YHe}=xa(),{ERR_INVALID_ARG_TYPE:QHe,ERR_STREAM_PREMATURE_CLOSE:Phe}=YHe,{kEmptyObject:sq,once:aq}=ea(),{validateAbortSignal:XHe,validateFunction:eZe,validateObject:tZe,validateBoolean:rZe}=a1(),{Promise:nZe,PromisePrototypeThen:iZe,SymbolDispose:Nhe}=li(),{isClosed:oZe,isReadable:The,isReadableNodeStream:oq,isReadableStream:sZe,isReadableFinished:Rhe,isReadableErrored:Ihe,isWritable:khe,isWritableNodeStream:Ohe,isWritableStream:aZe,isWritableFinished:Bhe,isWritableErrored:Dhe,isNodeStream:cZe,willEmitClose:fZe,kIsClosedPromise:uZe}=Ll(),c1;function lZe(t){return t.setHeader&&typeof t.abort=="function"}var cq=()=>{};function jhe(t,e,r){var n,i;if(arguments.length===2?(r=e,e=sq):e==null?e=sq:tZe(e,"options"),eZe(r,"callback"),XHe(e.signal,"options.signal"),r=aq(r),sZe(t)||aZe(t))return dZe(t,e,r);if(!cZe(t))throw new QHe("stream",["ReadableStream","WritableStream","Stream"],t);let o=(n=e.readable)!==null&&n!==void 0?n:oq(t),s=(i=e.writable)!==null&&i!==void 0?i:Ohe(t),a=t._writableState,u=t._readableState,m=()=>{t.writable||A()},p=fZe(t)&&oq(t)===o&&Ohe(t)===s,b=Bhe(t,!1),A=()=>{b=!0,t.destroyed&&(p=!1),!(p&&(!t.readable||o))&&(!o||M)&&r.call(t)},M=Rhe(t,!1),S=()=>{M=!0,t.destroyed&&(p=!1),!(p&&(!t.writable||s))&&(!s||b)&&r.call(t)},P=$=>{r.call(t,$)},k=oZe(t),R=()=>{k=!0;let $=Dhe(t)||Ihe(t);if($&&typeof $!="boolean")return r.call(t,$);if(o&&!M&&oq(t,!0)&&!Rhe(t,!1))return r.call(t,new Phe);if(s&&!b&&!Bhe(t,!1))return r.call(t,new Phe);r.call(t)},B=()=>{k=!0;let $=Dhe(t)||Ihe(t);if($&&typeof $!="boolean")return r.call(t,$);r.call(t)},I=()=>{t.req.on("finish",A)};lZe(t)?(t.on("complete",A),p||t.on("abort",R),t.req?I():t.on("request",I)):s&&!a&&(t.on("end",m),t.on("close",m)),!p&&typeof t.aborted=="boolean"&&t.on("aborted",R),t.on("end",S),t.on("finish",A),e.error!==!1&&t.on("error",P),t.on("close",R),k?k0.nextTick(R):a!=null&&a.errorEmitted||u!=null&&u.errorEmitted?p||k0.nextTick(B):(!o&&(!p||The(t))&&(b||khe(t)===!1)||!s&&(!p||khe(t))&&(M||The(t)===!1)||u&&t.req&&t.aborted)&&k0.nextTick(B);let q=()=>{r=cq,t.removeListener("aborted",R),t.removeListener("complete",A),t.removeListener("abort",R),t.removeListener("request",I),t.req&&t.req.removeListener("finish",A),t.removeListener("end",m),t.removeListener("close",m),t.removeListener("finish",A),t.removeListener("end",S),t.removeListener("error",P),t.removeListener("close",R)};if(e.signal&&!k){let $=()=>{let U=r;q(),U.call(t,new Che(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)k0.nextTick($);else{c1=c1||ea().addAbortListener;let U=c1(e.signal,$),F=r;r=aq((...L)=>{U[Nhe](),F.apply(t,L)})}}return q}function dZe(t,e,r){let n=!1,i=cq;if(e.signal)if(i=()=>{n=!0,r.call(t,new Che(void 0,{cause:e.signal.reason}))},e.signal.aborted)k0.nextTick(i);else{c1=c1||ea().addAbortListener;let s=c1(e.signal,i),a=r;r=aq((...u)=>{s[Nhe](),a.apply(t,u)})}let o=(...s)=>{n||k0.nextTick(()=>r.apply(t,s))};return iZe(t[uZe].promise,o,o),cq}function hZe(t,e){var r;let n=!1;return e===null&&(e=sq),(r=e)!==null&&r!==void 0&&r.cleanup&&(rZe(e.cleanup,"cleanup"),n=e.cleanup),new nZe((i,o)=>{let s=jhe(t,e,a=>{n&&s(),a?o(a):i()})})}fq.exports=jhe;fq.exports.finished=hZe});var hg=H((BCt,Whe)=>{"use strict";_();var Ul=ai(),{aggregateTwoErrors:pZe,codes:{ERR_MULTIPLE_CALLBACK:mZe},AbortError:yZe}=xa(),{Symbol:Lhe}=li(),{kIsDestroyed:gZe,isDestroyed:bZe,isFinished:vZe,isServerRequest:wZe}=Ll(),Uhe=Lhe("kDestroy"),uq=Lhe("kConstruct");function Fhe(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function _Ze(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(Fhe(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?qhe(this,t,e):this.once(Uhe,function(o){qhe(this,pZe(o,t),e)}),this)}function qhe(t,e,r){let n=!1;function i(o){if(n)return;n=!0;let s=t._readableState,a=t._writableState;Fhe(o,a,s),a&&(a.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(o),o?Ul.nextTick(xZe,t,o):Ul.nextTick(zhe,t)}try{t._destroy(e||null,i)}catch(o){i(o)}}function xZe(t,e){lq(t,e),zhe(t)}function zhe(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function lq(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function EZe(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function dq(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?Ul.nextTick(lq,t,e):lq(t,e))}function SZe(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(uq,e),!(t.listenerCount(uq)>1)&&Ul.nextTick(MZe,t)}function MZe(t){let e=!1;function r(n){if(e){dq(t,n??new mZe);return}e=!0;let i=t._readableState,o=t._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?t.emit(Uhe,n):n?dq(t,n,!0):Ul.nextTick(AZe,t)}try{t._construct(n=>{Ul.nextTick(r,n)})}catch(n){Ul.nextTick(r,n)}}function AZe(t){t.emit(uq)}function $he(t){return t?.setHeader&&typeof t.abort=="function"}function Khe(t){t.emit("close")}function PZe(t,e){t.emit("error",e),Ul.nextTick(Khe,t)}function TZe(t,e){!t||bZe(t)||(!e&&!vZe(t)&&(e=new yZe),wZe(t)?(t.socket=null,t.destroy(e)):$he(t)?t.abort():$he(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Ul.nextTick(PZe,t,e):Ul.nextTick(Khe,t),t.destroyed||(t[gZe]=!0))}Whe.exports={construct:SZe,destroyer:TZe,destroy:_Ze,undestroy:EZe,errorOrDestroy:dq}});var CA=H((CCt,Vhe)=>{"use strict";_();var{ArrayIsArray:RZe,ObjectSetPrototypeOf:Ghe}=li(),{EventEmitter:BA}=uo();function DA(t){BA.call(this,t)}Ghe(DA.prototype,BA.prototype);Ghe(DA,BA);DA.prototype.pipe=function(t,e){let r=this;function n(p){t.writable&&t.write(p)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",s),r.on("close",a));let o=!1;function s(){o||(o=!0,t.end())}function a(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function u(p){m(),BA.listenerCount(this,"error")===0&&this.emit("error",p)}hq(r,"error",u),hq(t,"error",u);function m(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",m),r.removeListener("close",m),t.removeListener("close",m)}return r.on("end",m),r.on("close",m),t.on("close",m),t.emit("pipe",r),t};function hq(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):RZe(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}Vhe.exports={Stream:DA,prependListener:hq}});var VE=H((jCt,NA)=>{"use strict";_();var{SymbolDispose:IZe}=li(),{AbortError:Hhe,codes:kZe}=xa(),{isNodeStream:Zhe,isWebStream:OZe,kControllerErrorFunction:BZe}=Ll(),DZe=Ph(),{ERR_INVALID_ARG_TYPE:Jhe}=kZe,pq,CZe=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new Jhe(e,"AbortSignal",t)};NA.exports.addAbortSignal=function(e,r){if(CZe(e,"signal"),!Zhe(r)&&!OZe(r))throw new Jhe("stream",["ReadableStream","WritableStream","Stream"],r);return NA.exports.addAbortSignalNoValidate(e,r)};NA.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=Zhe(e)?()=>{e.destroy(new Hhe(void 0,{cause:t.reason}))}:()=>{e[BZe](new Hhe(void 0,{cause:t.reason}))};if(t.aborted)r();else{pq=pq||ea().addAbortListener;let n=pq(t,r);DZe(e,n[IZe])}return e}});var Xhe=H((LCt,Qhe)=>{"use strict";_();var{StringPrototypeSlice:Yhe,SymbolIterator:NZe,TypedArrayPrototypeSet:jA,Uint8Array:jZe}=li(),{Buffer:mq}=Ut(),{inspect:qZe}=ea();Qhe.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return mq.alloc(0);let r=mq.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)jA(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[NZe](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let o=n.data;if(e>o.length)r+=o,e-=o.length;else{e===o.length?(r+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=Yhe(o,0,e),this.head=n,n.data=Yhe(o,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=mq.allocUnsafe(e),n=e,i=this.head,o=0;do{let s=i.data;if(e>s.length)jA(r,s,n-e),e-=s.length;else{e===s.length?(jA(r,s,n-e),++o,i.next?this.head=i.next:this.head=this.tail=null):(jA(r,new jZe(s.buffer,s.byteOffset,e),n-e),this.head=i,i.data=s.slice(e));break}++o}while((i=i.next)!==null);return this.length-=o,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return qZe(this,{...r,depth:0,customInspect:!1})}}});var HE=H((FCt,npe)=>{"use strict";_();var{MathFloor:$Ze,NumberIsInteger:LZe}=li(),{validateInteger:UZe}=a1(),{ERR_INVALID_ARG_VALUE:FZe}=xa().codes,epe=16*1024,tpe=16;function zZe(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function rpe(t){return t?tpe:epe}function KZe(t,e){UZe(e,"value",0),t?tpe=e:epe=e}function WZe(t,e,r,n){let i=zZe(e,n,r);if(i!=null){if(!LZe(i)||i<0){let o=n?`options.${r}`:"options.highWaterMark";throw new FZe(o,i)}return $Ze(i)}return rpe(t.objectMode)}npe.exports={getHighWaterMark:WZe,getDefaultHighWaterMark:rpe,setDefaultHighWaterMark:KZe}});var yq=H((KCt,ape)=>{"use strict";_();var ipe=ai(),{PromisePrototypeThen:GZe,SymbolAsyncIterator:ope,SymbolIterator:spe}=li(),{Buffer:VZe}=Ut(),{ERR_INVALID_ARG_TYPE:HZe,ERR_STREAM_NULL_VALUES:ZZe}=xa().codes;function JZe(t,e,r){let n;if(typeof e=="string"||e instanceof VZe)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[ope])i=!0,n=e[ope]();else if(e&&e[spe])i=!1,n=e[spe]();else throw new HZe("iterable",["Iterable"],e);let o=new t({objectMode:!0,highWaterMark:1,...r}),s=!1;o._read=function(){s||(s=!0,u())},o._destroy=function(m,p){GZe(a(m),()=>ipe.nextTick(p,m),b=>ipe.nextTick(p,b||m))};async function a(m){let p=m!=null,b=typeof n.throw=="function";if(p&&b){let{value:A,done:M}=await n.throw(m);if(await A,M)return}if(typeof n.return=="function"){let{value:A}=await n.return();await A}}async function u(){for(;;){try{let{value:m,done:p}=i?await n.next():n.next();if(p)o.push(null);else{let b=m&&typeof m.then=="function"?await m:m;if(b===null)throw s=!1,new ZZe;if(o.push(b))continue;s=!1}}catch(m){o.destroy(m)}break}}return o}ape.exports=JZe});var JE=H((GCt,Mpe)=>{_();var Eu=ai(),{ArrayPrototypeIndexOf:YZe,NumberIsInteger:QZe,NumberIsNaN:XZe,NumberParseInt:eJe,ObjectDefineProperties:Sq,ObjectKeys:tJe,ObjectSetPrototypeOf:upe,Promise:lpe,SafeSet:rJe,SymbolAsyncDispose:nJe,SymbolAsyncIterator:iJe,Symbol:oJe}=li();Mpe.exports=yr;yr.ReadableState=UA;var{EventEmitter:sJe}=uo(),{Stream:O0,prependListener:aJe}=CA(),{Buffer:gq}=Ut(),{addAbortSignal:cJe}=VE(),dpe=Ph(),Lr=ea().debuglog("stream",t=>{Lr=t}),fJe=Xhe(),l1=hg(),{getHighWaterMark:uJe,getDefaultHighWaterMark:lJe}=HE(),{aggregateTwoErrors:cpe,codes:{ERR_INVALID_ARG_TYPE:dJe,ERR_METHOD_NOT_IMPLEMENTED:hJe,ERR_OUT_OF_RANGE:pJe,ERR_STREAM_PUSH_AFTER_EOF:mJe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:yJe},AbortError:gJe}=xa(),{validateObject:bJe}=a1(),pg=oJe("kPaused"),{StringDecoder:hpe}=ou(),vJe=yq();upe(yr.prototype,O0.prototype);upe(yr,O0);var bq=()=>{},{errorOrDestroy:f1}=l1,u1=1<<0,wJe=1<<1,ppe=1<<2,ZE=1<<3,mpe=1<<4,qA=1<<5,$A=1<<6,ype=1<<7,_Je=1<<8,xJe=1<<9,EJe=1<<10,xq=1<<11,Eq=1<<12,SJe=1<<13,MJe=1<<14,AJe=1<<15,gpe=1<<16,PJe=1<<17,TJe=1<<18;function Mo(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}Sq(UA.prototype,{objectMode:Mo(u1),ended:Mo(wJe),endEmitted:Mo(ppe),reading:Mo(ZE),constructed:Mo(mpe),sync:Mo(qA),needReadable:Mo($A),emittedReadable:Mo(ype),readableListening:Mo(_Je),resumeScheduled:Mo(xJe),errorEmitted:Mo(EJe),emitClose:Mo(xq),autoDestroy:Mo(Eq),destroyed:Mo(SJe),closed:Mo(MJe),closeEmitted:Mo(AJe),multiAwaitDrain:Mo(gpe),readingMore:Mo(PJe),dataEmitted:Mo(TJe)});function UA(t,e,r){typeof r!="boolean"&&(r=e instanceof Fl()),this.state=xq|Eq|mpe|qA,t&&t.objectMode&&(this.state|=u1),r&&t&&t.readableObjectMode&&(this.state|=u1),this.highWaterMark=t?uJe(this,t,"readableHighWaterMark",r):lJe(!1),this.buffer=new fJe,this.length=0,this.pipes=[],this.flowing=null,this[pg]=null,t&&t.emitClose===!1&&(this.state&=~xq),t&&t.autoDestroy===!1&&(this.state&=~Eq),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new hpe(t.encoding),this.encoding=t.encoding)}function yr(t){if(!(this instanceof yr))return new yr(t);let e=this instanceof Fl();this._readableState=new UA(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&cJe(t.signal,this)),O0.call(this,t),l1.construct(this,()=>{this._readableState.needReadable&&LA(this,this._readableState)})}yr.prototype.destroy=l1.destroy;yr.prototype._undestroy=l1.undestroy;yr.prototype._destroy=function(t,e){e(t)};yr.prototype[sJe.captureRejectionSymbol]=function(t){this.destroy(t)};yr.prototype[nJe]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new gJe,this.destroy(t)),new lpe((e,r)=>dpe(this,n=>n&&n!==t?r(n):e(null)))};yr.prototype.push=function(t,e){return bpe(this,t,e,!1)};yr.prototype.unshift=function(t,e){return bpe(this,t,e,!0)};function bpe(t,e,r,n){Lr("readableAddChunk",e);let i=t._readableState,o;if(i.state&u1||(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=gq.from(e,r).toString(i.encoding):(e=gq.from(e,r),r=""))):e instanceof gq?r="":O0._isUint8Array(e)?(e=O0._uint8ArrayToBuffer(e),r=""):e!=null&&(o=new dJe("chunk",["string","Buffer","Uint8Array"],e))),o)f1(t,o);else if(e===null)i.state&=~ZE,kJe(t,i);else if(i.state&u1||e&&e.length>0)if(n)if(i.state&ppe)f1(t,new yJe);else{if(i.destroyed||i.errored)return!1;vq(t,i,e,!0)}else if(i.ended)f1(t,new mJe);else{if(i.destroyed||i.errored)return!1;i.state&=~ZE,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?vq(t,i,e,!1):LA(t,i)):vq(t,i,e,!1)}else n||(i.state&=~ZE,LA(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function vq(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.state&gpe?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.state&$A&&FA(t)),LA(t,e)}yr.prototype.isPaused=function(){let t=this._readableState;return t[pg]===!0||t.flowing===!1};yr.prototype.setEncoding=function(t){let e=new hpe(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var RJe=1073741824;function IJe(t){if(t>RJe)throw new pJe("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function fpe(t,e){return t<=0||e.length===0&&e.ended?0:e.state&u1?1:XZe(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}yr.prototype.read=function(t){Lr("read",t),t===void 0?t=NaN:QZe(t)||(t=eJe(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=IJe(t)),t!==0&&(e.state&=~ype),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Lr("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?wq(this):FA(this),null;if(t=fpe(t,e),t===0&&e.ended)return e.length===0&&wq(this),null;let n=(e.state&$A)!==0;if(Lr("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Lr("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,Lr("reading, ended or constructing",n);else if(n){Lr("do read"),e.state|=ZE|qA,e.length===0&&(e.state|=$A);try{this._read(e.highWaterMark)}catch(o){f1(this,o)}e.state&=~qA,e.reading||(t=fpe(r,e))}let i;return t>0?i=Epe(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&wq(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function kJe(t,e){if(Lr("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?FA(t):(e.needReadable=!1,e.emittedReadable=!0,vpe(t))}}function FA(t){let e=t._readableState;Lr("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Lr("emitReadable",e.flowing),e.emittedReadable=!0,Eu.nextTick(vpe,t))}function vpe(t){let e=t._readableState;Lr("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,_pe(t)}function LA(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Eu.nextTick(OJe,t,e))}function OJe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(Lr("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}yr.prototype._read=function(t){throw new hJe("_read()")};yr.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new rJe(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),Lr("pipe count=%d opts=%j",n.pipes.length,e);let o=(!e||e.end!==!1)&&t!==Eu.stdout&&t!==Eu.stderr?a:k;n.endEmitted?Eu.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(R,B){Lr("onunpipe"),R===r&&B&&B.hasUnpiped===!1&&(B.hasUnpiped=!0,p())}function a(){Lr("onend"),t.end()}let u,m=!1;function p(){Lr("cleanup"),t.removeListener("close",S),t.removeListener("finish",P),u&&t.removeListener("drain",u),t.removeListener("error",M),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",k),r.removeListener("data",A),m=!0,u&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&u()}function b(){m||(n.pipes.length===1&&n.pipes[0]===t?(Lr("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(Lr("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),u||(u=BJe(r,t),t.on("drain",u))}r.on("data",A);function A(R){Lr("ondata");let B=t.write(R);Lr("dest.write",B),B===!1&&b()}function M(R){if(Lr("onerror",R),k(),t.removeListener("error",M),t.listenerCount("error")===0){let B=t._writableState||t._readableState;B&&!B.errorEmitted?f1(t,R):t.emit("error",R)}}aJe(t,"error",M);function S(){t.removeListener("finish",P),k()}t.once("close",S);function P(){Lr("onfinish"),t.removeListener("close",S),k()}t.once("finish",P);function k(){Lr("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?b():n.flowing||(Lr("pipe resume"),r.resume()),t};function BJe(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(Lr("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(Lr("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}yr.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let o=0;o<i.length;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}let n=YZe(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};yr.prototype.on=function(t,e){let r=O0.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Lr("on readable",n.length,n.reading),n.length?FA(this):n.reading||Eu.nextTick(DJe,this)),r};yr.prototype.addListener=yr.prototype.on;yr.prototype.removeListener=function(t,e){let r=O0.prototype.removeListener.call(this,t,e);return t==="readable"&&Eu.nextTick(wpe,this),r};yr.prototype.off=yr.prototype.removeListener;yr.prototype.removeAllListeners=function(t){let e=O0.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Eu.nextTick(wpe,this),e};function wpe(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[pg]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function DJe(t){Lr("readable nexttick read 0"),t.read(0)}yr.prototype.resume=function(){let t=this._readableState;return t.flowing||(Lr("resume"),t.flowing=!t.readableListening,CJe(this,t)),t[pg]=!1,this};function CJe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Eu.nextTick(NJe,t,e))}function NJe(t,e){Lr("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),_pe(t),e.flowing&&!e.reading&&t.read(0)}yr.prototype.pause=function(){return Lr("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Lr("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[pg]=!0,this};function _pe(t){let e=t._readableState;for(Lr("flow",e.flowing);e.flowing&&t.read()!==null;);}yr.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{f1(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=tJe(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};yr.prototype[iJe]=function(){return xpe(this)};yr.prototype.iterator=function(t){return t!==void 0&&bJe(t,"options"),xpe(this,t)};function xpe(t,e){typeof t.read!="function"&&(t=yr.wrap(t,{objectMode:!0}));let r=jJe(t,e);return r.stream=t,r}async function*jJe(t,e){let r=bq;function n(s){this===t?(r(),r=bq):r=s}t.on("readable",n);let i,o=dpe(t,{writable:!1},s=>{i=s?cpe(i,s):null,r(),r=bq});try{for(;;){let s=t.destroyed?null:t.read();if(s!==null)yield s;else{if(i)throw i;if(i===null)return;await new lpe(n)}}}catch(s){throw i=cpe(i,s),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?l1.destroyer(t,null):(t.off("readable",n),o())}}Sq(yr.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});Sq(UA.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[pg]!==!1},set(t){this[pg]=!!t}}});yr._fromList=Epe;function Epe(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function wq(t){let e=t._readableState;Lr("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Eu.nextTick(qJe,e,t))}function qJe(t,e){if(Lr("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Eu.nextTick($Je,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function $Je(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}yr.from=function(t,e){return vJe(yr,t,e)};var _q;function Spe(){return _q===void 0&&(_q={}),_q}yr.fromWeb=function(t,e){return Spe().newStreamReadableFromReadableStream(t,e)};yr.toWeb=function(t,e){return Spe().newReadableStreamFromStreamReadable(t,e)};yr.wrap=function(t,e){var r,n;return new yr({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,o){l1.destroyer(t,i),o(i)}}).wrap(t)}});var VA=H((HCt,jpe)=>{_();var mg=ai(),{ArrayPrototypeSlice:Tpe,Error:LJe,FunctionPrototypeSymbolHasInstance:Rpe,ObjectDefineProperty:Ipe,ObjectDefineProperties:UJe,ObjectSetPrototypeOf:kpe,StringPrototypeToLowerCase:FJe,Symbol:zJe,SymbolHasInstance:KJe}=li();jpe.exports=di;di.WritableState=XE;var{EventEmitter:WJe}=uo(),YE=CA().Stream,{Buffer:zA}=Ut(),GA=hg(),{addAbortSignal:GJe}=VE(),{getHighWaterMark:VJe,getDefaultHighWaterMark:HJe}=HE(),{ERR_INVALID_ARG_TYPE:ZJe,ERR_METHOD_NOT_IMPLEMENTED:JJe,ERR_MULTIPLE_CALLBACK:Ope,ERR_STREAM_CANNOT_PIPE:YJe,ERR_STREAM_DESTROYED:QE,ERR_STREAM_ALREADY_FINISHED:QJe,ERR_STREAM_NULL_VALUES:XJe,ERR_STREAM_WRITE_AFTER_END:eYe,ERR_UNKNOWN_ENCODING:Bpe}=xa().codes,{errorOrDestroy:d1}=GA;kpe(di.prototype,YE.prototype);kpe(di,YE);function Pq(){}var h1=zJe("kOnFinished");function XE(t,e,r){typeof r!="boolean"&&(r=e instanceof Fl()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?VJe(this,t,"writableHighWaterMark",r):HJe(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=rYe.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,WA(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[h1]=[]}function WA(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}XE.prototype.getBuffer=function(){return Tpe(this.buffered,this.bufferedIndex)};Ipe(XE.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function di(t){let e=this instanceof Fl();if(!e&&!Rpe(di,this))return new di(t);this._writableState=new XE(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&GJe(t.signal,this)),YE.call(this,t),GA.construct(this,()=>{let r=this._writableState;r.writing||Rq(this,r),Iq(this,r)})}Ipe(di,KJe,{__proto__:null,value:function(t){return Rpe(this,t)?!0:this!==di?!1:t&&t._writableState instanceof XE}});di.prototype.pipe=function(){d1(this,new YJe)};function Dpe(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!zA.isEncoding(r))throw new Bpe(r);typeof n!="function"&&(n=Pq)}if(e===null)throw new XJe;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=zA.from(e,r),r="buffer");else if(e instanceof zA)r="buffer";else if(YE._isUint8Array(e))e=YE._uint8ArrayToBuffer(e),r="buffer";else throw new ZJe("chunk",["string","Buffer","Uint8Array"],e);let o;return i.ending?o=new eYe:i.destroyed&&(o=new QE("write")),o?(mg.nextTick(n,o),d1(t,o,!0),o):(i.pendingcb++,tYe(t,i,e,r,n))}di.prototype.write=function(t,e,r){return Dpe(this,t,e,r)===!0};di.prototype.cork=function(){this._writableState.corked++};di.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||Rq(this,t))};di.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=FJe(e)),!zA.isEncoding(e))throw new Bpe(e);return this._writableState.defaultEncoding=e,this};function tYe(t,e,r,n,i){let o=e.objectMode?1:r.length;e.length+=o;let s=e.length<e.highWaterMark;return s||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==Pq&&(e.allNoop=!1)):(e.writelen=o,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),s&&!e.errored&&!e.destroyed}function Ape(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new QE("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function Ppe(t,e,r,n){--e.pendingcb,n(r),Tq(e),d1(t,r)}function rYe(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){d1(t,new Ope);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?mg.nextTick(Ppe,t,r,e,i):Ppe(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&Rq(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},mg.nextTick(nYe,r.afterWriteTickInfo)):Cpe(t,r,1,i))}function nYe({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,Cpe(t,e,r,n)}function Cpe(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&Tq(e),Iq(t,e)}function Tq(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:o,callback:s}=t.buffered[i],a=t.objectMode?1:o.length;t.length-=a,s((e=t.errored)!==null&&e!==void 0?e:new QE("write"))}let r=t[h1].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new QE("end"))}WA(t)}function Rq(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,o=r.length-n;if(!o)return;let s=n;if(e.bufferProcessing=!0,o>1&&t._writev){e.pendingcb-=o-1;let a=e.allNoop?Pq:m=>{for(let p=s;p<r.length;++p)r[p].callback(m)},u=e.allNoop&&s===0?r:Tpe(r,s);u.allBuffers=e.allBuffers,Ape(t,e,!0,e.length,u,"",a),WA(e)}else{do{let{chunk:a,encoding:u,callback:m}=r[s];r[s++]=null;let p=i?1:a.length;Ape(t,e,!1,p,a,u,m)}while(s<r.length&&!e.writing);s===r.length?WA(e):s>256?(r.splice(0,s),e.bufferedIndex=0):e.bufferedIndex=s}e.bufferProcessing=!1}di.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new JJe("_write()")};di.prototype._writev=null;di.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let o=Dpe(this,t,e);o instanceof LJe&&(i=o)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,Iq(this,n,!0),n.ended=!0):n.finished?i=new QJe("end"):n.destroyed&&(i=new QE("end"))),typeof r=="function"&&(i||n.finished?mg.nextTick(r,i):n[h1].push(r)),this};function KA(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function iYe(t,e){let r=!1;function n(i){if(r){d1(t,i??Ope());return}if(r=!0,e.pendingcb--,i){let o=e[h1].splice(0);for(let s=0;s<o.length;s++)o[s](i);d1(t,i,e.sync)}else KA(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,mg.nextTick(Aq,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function oYe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,iYe(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Iq(t,e,r){KA(e)&&(oYe(t,e),e.pendingcb===0&&(r?(e.pendingcb++,mg.nextTick((n,i)=>{KA(i)?Aq(n,i):i.pendingcb--},t,e)):KA(e)&&(e.pendingcb++,Aq(t,e))))}function Aq(t,e){e.pendingcb--,e.finished=!0;let r=e[h1].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}UJe(di.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var sYe=GA.destroy;di.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[h1].length)&&mg.nextTick(Tq,r),sYe.call(this,t,e),this};di.prototype._undestroy=GA.undestroy;di.prototype._destroy=function(t,e){e(t)};di.prototype[WJe.captureRejectionSymbol]=function(t){this.destroy(t)};var Mq;function Npe(){return Mq===void 0&&(Mq={}),Mq}di.fromWeb=function(t,e){return Npe().newStreamWritableFromWritableStream(t,e)};di.toWeb=function(t){return Npe().newWritableStreamFromStreamWritable(t)}});var Qpe=H((JCt,Ype)=>{_();var kq=ai(),aYe=Ut(),{isReadable:cYe,isWritable:fYe,isIterable:qpe,isNodeStream:uYe,isReadableNodeStream:$pe,isWritableNodeStream:Lpe,isDuplexNodeStream:lYe,isReadableStream:Upe,isWritableStream:Fpe}=Ll(),zpe=Ph(),{AbortError:Zpe,codes:{ERR_INVALID_ARG_TYPE:dYe,ERR_INVALID_RETURN_VALUE:Kpe}}=xa(),{destroyer:m1}=hg(),hYe=Fl(),Jpe=JE(),pYe=VA(),{createDeferredPromise:Wpe}=ea(),Gpe=yq(),Vpe=globalThis.Blob||aYe.Blob,mYe=typeof Vpe<"u"?function(e){return e instanceof Vpe}:function(e){return!1},yYe=globalThis.AbortController||_f().AbortController,{FunctionPrototypeCall:Hpe}=li(),B0=class extends hYe{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};Ype.exports=function t(e,r){if(lYe(e))return e;if($pe(e))return p1({readable:e});if(Lpe(e))return p1({writable:e});if(uYe(e))return p1({writable:!1,readable:!1});if(Upe(e))return p1({readable:Jpe.fromWeb(e)});if(Fpe(e))return p1({writable:pYe.fromWeb(e)});if(typeof e=="function"){let{value:i,write:o,final:s,destroy:a}=gYe(e);if(qpe(i))return Gpe(B0,i,{objectMode:!0,write:o,final:s,destroy:a});let u=i?.then;if(typeof u=="function"){let m,p=Hpe(u,i,b=>{if(b!=null)throw new Kpe("nully","body",b)},b=>{m1(m,b)});return m=new B0({objectMode:!0,readable:!1,write:o,final(b){s(async()=>{try{await p,kq.nextTick(b,null)}catch(A){kq.nextTick(b,A)}})},destroy:a})}throw new Kpe("Iterable, AsyncIterable or AsyncFunction",r,i)}if(mYe(e))return t(e.arrayBuffer());if(qpe(e))return Gpe(B0,e,{objectMode:!0,writable:!1});if(Upe(e?.readable)&&Fpe(e?.writable))return B0.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?$pe(e?.readable)?e?.readable:t(e.readable):void 0,o=e!=null&&e.writable?Lpe(e?.writable)?e?.writable:t(e.writable):void 0;return p1({readable:i,writable:o})}let n=e?.then;if(typeof n=="function"){let i;return Hpe(n,e,o=>{o!=null&&i.push(o),i.push(null)},o=>{m1(i,o)}),i=new B0({objectMode:!0,writable:!1,read(){}})}throw new dYe(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function gYe(t){let{promise:e,resolve:r}=Wpe(),n=new yYe,i=n.signal;return{value:t(async function*(){for(;;){let s=e;e=null;let{chunk:a,done:u,cb:m}=await s;if(kq.nextTick(m),u)return;if(i.aborted)throw new Zpe(void 0,{cause:i.reason});({promise:e,resolve:r}=Wpe()),yield a}}(),{signal:i}),write(s,a,u){let m=r;r=null,m({chunk:s,done:!1,cb:u})},final(s){let a=r;r=null,a({done:!0,cb:s})},destroy(s,a){n.abort(),a(s)}}}function p1(t){let e=t.readable&&typeof t.readable.read!="function"?Jpe.wrap(t.readable):t.readable,r=t.writable,n=!!cYe(e),i=!!fYe(r),o,s,a,u,m;function p(b){let A=u;u=null,A?A(b):b&&m.destroy(b)}return m=new B0({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(zpe(r,b=>{i=!1,b&&m1(e,b),p(b)}),m._write=function(b,A,M){r.write(b,A)?M():o=M},m._final=function(b){r.end(),s=b},r.on("drain",function(){if(o){let b=o;o=null,b()}}),r.on("finish",function(){if(s){let b=s;s=null,b()}})),n&&(zpe(e,b=>{n=!1,b&&m1(e,b),p(b)}),e.on("readable",function(){if(a){let b=a;a=null,b()}}),e.on("end",function(){m.push(null)}),m._read=function(){for(;;){let b=e.read();if(b===null){a=m._read;return}if(!m.push(b))return}}),m._destroy=function(b,A){!b&&u!==null&&(b=new Zpe),a=null,o=null,s=null,u===null?A(b):(u=A,m1(r,b),m1(e,b))},m}});var Fl=H((QCt,t0e)=>{"use strict";_();var{ObjectDefineProperties:bYe,ObjectGetOwnPropertyDescriptor:Th,ObjectKeys:vYe,ObjectSetPrototypeOf:Xpe}=li();t0e.exports=Su;var Dq=JE(),Ef=VA();Xpe(Su.prototype,Dq.prototype);Xpe(Su,Dq);{let t=vYe(Ef.prototype);for(let e=0;e<t.length;e++){let r=t[e];Su.prototype[r]||(Su.prototype[r]=Ef.prototype[r])}}function Su(t){if(!(this instanceof Su))return new Su(t);Dq.call(this,t),Ef.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}bYe(Su.prototype,{writable:{__proto__:null,...Th(Ef.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Th(Ef.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Th(Ef.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Th(Ef.prototype,"writableBuffer")},writableLength:{__proto__:null,...Th(Ef.prototype,"writableLength")},writableFinished:{__proto__:null,...Th(Ef.prototype,"writableFinished")},writableCorked:{__proto__:null,...Th(Ef.prototype,"writableCorked")},writableEnded:{__proto__:null,...Th(Ef.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Th(Ef.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var Oq;function e0e(){return Oq===void 0&&(Oq={}),Oq}Su.fromWeb=function(t,e){return e0e().newStreamDuplexFromReadableWritablePair(t,e)};Su.toWeb=function(t){return e0e().newReadableWritablePairFromDuplex(t)};var Bq;Su.from=function(t){return Bq||(Bq=Qpe()),Bq(t,"body")}});var jq=H((eNt,n0e)=>{"use strict";_();var{ObjectSetPrototypeOf:r0e,Symbol:wYe}=li();n0e.exports=Rh;var{ERR_METHOD_NOT_IMPLEMENTED:_Ye}=xa().codes,Nq=Fl(),{getHighWaterMark:xYe}=HE();r0e(Rh.prototype,Nq.prototype);r0e(Rh,Nq);var eS=wYe("kCallback");function Rh(t){if(!(this instanceof Rh))return new Rh(t);let e=t?xYe(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Nq.call(this,t),this._readableState.sync=!1,this[eS]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",EYe)}function Cq(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function EYe(){this._final!==Cq&&Cq.call(this)}Rh.prototype._final=Cq;Rh.prototype._transform=function(t,e,r){throw new _Ye("_transform()")};Rh.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,o=n.length;this._transform(t,e,(s,a)=>{if(s){r(s);return}a!=null&&this.push(a),i.ended||o===n.length||n.length<n.highWaterMark?r():this[eS]=r})};Rh.prototype._read=function(){if(this[eS]){let t=this[eS];this[eS]=null,t()}}});var $q=H((rNt,o0e)=>{"use strict";_();var{ObjectSetPrototypeOf:i0e}=li();o0e.exports=y1;var qq=jq();i0e(y1.prototype,qq.prototype);i0e(y1,qq);function y1(t){if(!(this instanceof y1))return new y1(t);qq.call(this,t)}y1.prototype._transform=function(t,e,r){r(null,t)}});var YA=H((iNt,u0e)=>{_();var tS=ai(),{ArrayIsArray:SYe,Promise:MYe,SymbolAsyncIterator:AYe,SymbolDispose:PYe}=li(),JA=Ph(),{once:TYe}=ea(),RYe=hg(),s0e=Fl(),{aggregateTwoErrors:IYe,codes:{ERR_INVALID_ARG_TYPE:Hq,ERR_INVALID_RETURN_VALUE:Lq,ERR_MISSING_ARGS:kYe,ERR_STREAM_DESTROYED:OYe,ERR_STREAM_PREMATURE_CLOSE:BYe},AbortError:DYe}=xa(),{validateFunction:CYe,validateAbortSignal:NYe}=a1(),{isIterable:yg,isReadable:Uq,isReadableNodeStream:ZA,isNodeStream:a0e,isTransformStream:g1,isWebStream:jYe,isReadableStream:Fq,isReadableFinished:qYe}=Ll(),$Ye=globalThis.AbortController||_f().AbortController,zq,Kq,Wq;function c0e(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=JA(t,{readable:e,writable:r},o=>{n=!o});return{destroy:o=>{n||(n=!0,RYe.destroyer(t,o||new OYe("pipe")))},cleanup:i}}function LYe(t){return CYe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function Gq(t){if(yg(t))return t;if(ZA(t))return UYe(t);throw new Hq("val",["Readable","Iterable","AsyncIterable"],t)}async function*UYe(t){Kq||(Kq=JE()),yield*Kq.prototype[AYe].call(t)}async function HA(t,e,r,{end:n}){let i,o=null,s=m=>{if(m&&(i=m),o){let p=o;o=null,p()}},a=()=>new MYe((m,p)=>{i?p(i):o=()=>{i?p(i):m()}});e.on("drain",s);let u=JA(e,{readable:!1},s);try{e.writableNeedDrain&&await a();for await(let m of t)e.write(m)||await a();n&&(e.end(),await a()),r()}catch(m){r(i!==m?IYe(i,m):m)}finally{u(),e.off("drain",s)}}async function Vq(t,e,r,{end:n}){g1(e)&&(e=e.writable);let i=e.getWriter();try{for await(let o of t)await i.ready,i.write(o).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(o){try{await i.abort(o),r(o)}catch(s){r(s)}}}function FYe(...t){return f0e(t,TYe(LYe(t)))}function f0e(t,e,r){if(t.length===1&&SYe(t[0])&&(t=t[0]),t.length<2)throw new kYe("streams");let n=new $Ye,i=n.signal,o=r?.signal,s=[];NYe(o,"options.signal");function a(){S(new DYe)}Wq=Wq||ea().addAbortListener;let u;o&&(u=Wq(o,a));let m,p,b=[],A=0;function M(I){S(I,--A===0)}function S(I,q){var $;if(I&&(!m||m.code==="ERR_STREAM_PREMATURE_CLOSE")&&(m=I),!(!m&&!q)){for(;b.length;)b.shift()(m);($=u)===null||$===void 0||$[PYe](),n.abort(),q&&(m||s.forEach(U=>U()),tS.nextTick(e,m,p))}}let P;for(let I=0;I<t.length;I++){let q=t[I],$=I<t.length-1,U=I>0,F=$||r?.end!==!1,L=I===t.length-1;if(a0e(q)){let W=function(E){E&&E.name!=="AbortError"&&E.code!=="ERR_STREAM_PREMATURE_CLOSE"&&M(E)};var B=W;if(F){let{destroy:E,cleanup:c}=c0e(q,$,U);b.push(E),Uq(q)&&L&&s.push(c)}q.on("error",W),Uq(q)&&L&&s.push(()=>{q.removeListener("error",W)})}if(I===0)if(typeof q=="function"){if(P=q({signal:i}),!yg(P))throw new Lq("Iterable, AsyncIterable or Stream","source",P)}else yg(q)||ZA(q)||g1(q)?P=q:P=s0e.from(q);else if(typeof q=="function"){if(g1(P)){var k;P=Gq((k=P)===null||k===void 0?void 0:k.readable)}else P=Gq(P);if(P=q(P,{signal:i}),$){if(!yg(P,!0))throw new Lq("AsyncIterable",`transform[${I-1}]`,P)}else{var R;zq||(zq=$q());let W=new zq({objectMode:!0}),E=(R=P)===null||R===void 0?void 0:R.then;if(typeof E=="function")A++,E.call(P,y=>{p=y,y!=null&&W.write(y),F&&W.end(),tS.nextTick(M)},y=>{W.destroy(y),tS.nextTick(M,y)});else if(yg(P,!0))A++,HA(P,W,M,{end:F});else if(Fq(P)||g1(P)){let y=P.readable||P;A++,HA(y,W,M,{end:F})}else throw new Lq("AsyncIterable or Promise","destination",P);P=W;let{destroy:c,cleanup:l}=c0e(P,!1,!0);b.push(c),L&&s.push(l)}}else if(a0e(q)){if(ZA(P)){A+=2;let W=zYe(P,q,M,{end:F});Uq(q)&&L&&s.push(W)}else if(g1(P)||Fq(P)){let W=P.readable||P;A++,HA(W,q,M,{end:F})}else if(yg(P))A++,HA(P,q,M,{end:F});else throw new Hq("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],P);P=q}else if(jYe(q)){if(ZA(P))A++,Vq(Gq(P),q,M,{end:F});else if(Fq(P)||yg(P))A++,Vq(P,q,M,{end:F});else if(g1(P))A++,Vq(P.readable,q,M,{end:F});else throw new Hq("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],P);P=q}else P=s0e.from(q)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&tS.nextTick(a),P}function zYe(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new BYe)}),t.pipe(e,{end:!1}),n){let s=function(){i=!0,e.end()};var o=s;qYe(t)?tS.nextTick(s):t.once("end",s)}else r();return JA(t,{readable:!0,writable:!1},s=>{let a=t._readableState;s&&s.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(s)}),JA(e,{readable:!1,writable:!0},r)}u0e.exports={pipelineImpl:f0e,pipeline:FYe}});var Jq=H((sNt,y0e)=>{"use strict";_();var{pipeline:KYe}=YA(),QA=Fl(),{destroyer:WYe}=hg(),{isNodeStream:XA,isReadable:l0e,isWritable:d0e,isWebStream:Zq,isTransformStream:gg,isWritableStream:h0e,isReadableStream:p0e}=Ll(),{AbortError:GYe,codes:{ERR_INVALID_ARG_VALUE:m0e,ERR_MISSING_ARGS:VYe}}=xa(),HYe=Ph();y0e.exports=function(...e){if(e.length===0)throw new VYe("streams");if(e.length===1)return QA.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=QA.from(e[0])),typeof e[e.length-1]=="function"){let M=e.length-1;e[M]=QA.from(e[M])}for(let M=0;M<e.length;++M)if(!(!XA(e[M])&&!Zq(e[M]))){if(M<e.length-1&&!(l0e(e[M])||p0e(e[M])||gg(e[M])))throw new m0e(`streams[${M}]`,r[M],"must be readable");if(M>0&&!(d0e(e[M])||h0e(e[M])||gg(e[M])))throw new m0e(`streams[${M}]`,r[M],"must be writable")}let n,i,o,s,a;function u(M){let S=s;s=null,S?S(M):M?a.destroy(M):!A&&!b&&a.destroy()}let m=e[0],p=KYe(e,u),b=!!(d0e(m)||h0e(m)||gg(m)),A=!!(l0e(p)||p0e(p)||gg(p));if(a=new QA({writableObjectMode:!!(m!=null&&m.writableObjectMode),readableObjectMode:!!(p!=null&&p.readableObjectMode),writable:b,readable:A}),b){if(XA(m))a._write=function(S,P,k){m.write(S,P)?k():n=k},a._final=function(S){m.end(),i=S},m.on("drain",function(){if(n){let S=n;n=null,S()}});else if(Zq(m)){let P=(gg(m)?m.writable:m).getWriter();a._write=async function(k,R,B){try{await P.ready,P.write(k).catch(()=>{}),B()}catch(I){B(I)}},a._final=async function(k){try{await P.ready,P.close().catch(()=>{}),i=k}catch(R){k(R)}}}let M=gg(p)?p.readable:p;HYe(M,()=>{if(i){let S=i;i=null,S()}})}if(A){if(XA(p))p.on("readable",function(){if(o){let M=o;o=null,M()}}),p.on("end",function(){a.push(null)}),a._read=function(){for(;;){let M=p.read();if(M===null){o=a._read;return}if(!a.push(M))return}};else if(Zq(p)){let S=(gg(p)?p.readable:p).getReader();a._read=async function(){for(;;)try{let{value:P,done:k}=await S.read();if(!a.push(P))return;if(k){a.push(null);return}}catch{return}}}}return a._destroy=function(M,S){!M&&s!==null&&(M=new GYe),o=null,n=null,i=null,s===null?S(M):(s=S,XA(p)&&WYe(p,M))},a}});var A0e=H((cNt,Xq)=>{"use strict";_();var ZYe=globalThis.AbortController||_f().AbortController,{codes:{ERR_INVALID_ARG_VALUE:JYe,ERR_INVALID_ARG_TYPE:rS,ERR_MISSING_ARGS:YYe,ERR_OUT_OF_RANGE:QYe},AbortError:zl}=xa(),{validateAbortSignal:bg,validateInteger:g0e,validateObject:vg}=a1(),XYe=li().Symbol("kWeak"),eQe=li().Symbol("kResistStopPropagation"),{finished:tQe}=Ph(),rQe=Jq(),{addAbortSignalNoValidate:nQe}=VE(),{isWritable:iQe,isNodeStream:oQe}=Ll(),{deprecate:sQe}=ea(),{ArrayPrototypePush:aQe,Boolean:cQe,MathFloor:b0e,Number:fQe,NumberIsNaN:uQe,Promise:v0e,PromiseReject:w0e,PromiseResolve:lQe,PromisePrototypeThen:_0e,Symbol:E0e}=li(),eP=E0e("kEmpty"),x0e=E0e("kEof");function dQe(t,e){if(e!=null&&vg(e,"options"),e?.signal!=null&&bg(e.signal,"options.signal"),oQe(t)&&!iQe(t))throw new JYe("stream",t,"must be writable");let r=rQe(this,t);return e!=null&&e.signal&&nQe(e.signal,r),r}function tP(t,e){if(typeof t!="function")throw new rS("fn",["Function","AsyncFunction"],t);e!=null&&vg(e,"options"),e?.signal!=null&&bg(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=b0e(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=b0e(e.highWaterMark)),g0e(r,"options.concurrency",1),g0e(n,"options.highWaterMark",0),n+=r,async function*(){let o=ea().AbortSignalAny([e?.signal].filter(cQe)),s=this,a=[],u={signal:o},m,p,b=!1,A=0;function M(){b=!0,S()}function S(){A-=1,P()}function P(){p&&!b&&A<r&&a.length<n&&(p(),p=null)}async function k(){try{for await(let R of s){if(b)return;if(o.aborted)throw new zl;try{if(R=t(R,u),R===eP)continue;R=lQe(R)}catch(B){R=w0e(B)}A+=1,_0e(R,S,M),a.push(R),m&&(m(),m=null),!b&&(a.length>=n||A>=r)&&await new v0e(B=>{p=B})}a.push(x0e)}catch(R){let B=w0e(R);_0e(B,S,M),a.push(B)}finally{b=!0,m&&(m(),m=null)}}k();try{for(;;){for(;a.length>0;){let R=await a[0];if(R===x0e)return;if(o.aborted)throw new zl;R!==eP&&(yield R),a.shift(),P()}await new v0e(R=>{m=R})}}finally{b=!0,p&&(p(),p=null)}}.call(this)}function hQe(t=void 0){return t!=null&&vg(t,"options"),t?.signal!=null&&bg(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new zl({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function S0e(t,e=void 0){for await(let r of Qq.call(this,t,e))return!0;return!1}async function pQe(t,e=void 0){if(typeof t!="function")throw new rS("fn",["Function","AsyncFunction"],t);return!await S0e.call(this,async(...r)=>!await t(...r),e)}async function mQe(t,e){for await(let r of Qq.call(this,t,e))return r}async function yQe(t,e){if(typeof t!="function")throw new rS("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),eP}for await(let n of tP.call(this,r,e));}function Qq(t,e){if(typeof t!="function")throw new rS("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:eP}return tP.call(this,r,e)}var Yq=class extends YYe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function gQe(t,e,r){var n;if(typeof t!="function")throw new rS("reducer",["Function","AsyncFunction"],t);r!=null&&vg(r,"options"),r?.signal!=null&&bg(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let m=new zl(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await tQe(this.destroy(m)),m}let o=new ZYe,s=o.signal;if(r!=null&&r.signal){let m={once:!0,[XYe]:this,[eQe]:!0};r.signal.addEventListener("abort",()=>o.abort(),m)}let a=!1;try{for await(let m of this){var u;if(a=!0,r!=null&&(u=r.signal)!==null&&u!==void 0&&u.aborted)throw new zl;i?e=await t(e,m,{signal:s}):(e=m,i=!0)}if(!a&&!i)throw new Yq}finally{o.abort()}return e}async function bQe(t){t!=null&&vg(t,"options"),t?.signal!=null&&bg(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new zl(void 0,{cause:t.signal.reason});aQe(e,n)}return e}function vQe(t,e){let r=tP.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function M0e(t){if(t=fQe(t),uQe(t))return 0;if(t<0)throw new QYe("number",">= 0",t);return t}function wQe(t,e=void 0){return e!=null&&vg(e,"options"),e?.signal!=null&&bg(e.signal,"options.signal"),t=M0e(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new zl;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new zl;t--<=0&&(yield o)}}.call(this)}function _Qe(t,e=void 0){return e!=null&&vg(e,"options"),e?.signal!=null&&bg(e.signal,"options.signal"),t=M0e(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new zl;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new zl;if(t-- >0&&(yield o),t<=0)return}}.call(this)}Xq.exports.streamReturningOperators={asIndexedPairs:sQe(hQe,"readable.asIndexedPairs will be removed in a future version."),drop:wQe,filter:Qq,flatMap:vQe,map:tP,take:_Qe,compose:dQe};Xq.exports.promiseReturningOperators={every:pQe,forEach:yQe,reduce:gQe,toArray:bQe,some:S0e,find:mQe}});var e$=H((uNt,P0e)=>{"use strict";_();var{ArrayPrototypePop:xQe,Promise:EQe}=li(),{isIterable:SQe,isNodeStream:MQe,isWebStream:AQe}=Ll(),{pipelineImpl:PQe}=YA(),{finished:TQe}=Ph();t$();function RQe(...t){return new EQe((e,r)=>{let n,i,o=t[t.length-1];if(o&&typeof o=="object"&&!MQe(o)&&!SQe(o)&&!AQe(o)){let s=xQe(t);n=s.signal,i=s.end}PQe(t,(s,a)=>{s?r(s):e(a)},{signal:n,end:i})})}P0e.exports={finished:TQe,pipeline:RQe}});var t$=H((dNt,N0e)=>{_();var{Buffer:IQe}=Ut(),{ObjectDefineProperty:Ih,ObjectKeys:I0e,ReflectApply:k0e}=li(),{promisify:{custom:O0e}}=ea(),{streamReturningOperators:T0e,promiseReturningOperators:R0e}=A0e(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:B0e}}=xa(),kQe=Jq(),{setDefaultHighWaterMark:OQe,getDefaultHighWaterMark:BQe}=HE(),{pipeline:D0e}=YA(),{destroyer:DQe}=hg(),C0e=Ph(),r$=e$(),nS=Ll(),Gn=N0e.exports=CA().Stream;Gn.isDestroyed=nS.isDestroyed;Gn.isDisturbed=nS.isDisturbed;Gn.isErrored=nS.isErrored;Gn.isReadable=nS.isReadable;Gn.isWritable=nS.isWritable;Gn.Readable=JE();for(let t of I0e(T0e)){let r=function(...n){if(new.target)throw B0e();return Gn.Readable.from(k0e(e,this,n))};NQe=r;let e=T0e[t];Ih(r,"name",{__proto__:null,value:e.name}),Ih(r,"length",{__proto__:null,value:e.length}),Ih(Gn.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var NQe;for(let t of I0e(R0e)){let r=function(...i){if(new.target)throw B0e();return k0e(e,this,i)};NQe=r;let e=R0e[t];Ih(r,"name",{__proto__:null,value:e.name}),Ih(r,"length",{__proto__:null,value:e.length}),Ih(Gn.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var NQe;Gn.Writable=VA();Gn.Duplex=Fl();Gn.Transform=jq();Gn.PassThrough=$q();Gn.pipeline=D0e;var{addAbortSignal:CQe}=VE();Gn.addAbortSignal=CQe;Gn.finished=C0e;Gn.destroy=DQe;Gn.compose=kQe;Gn.setDefaultHighWaterMark=OQe;Gn.getDefaultHighWaterMark=BQe;Ih(Gn,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return r$}});Ih(D0e,O0e,{__proto__:null,enumerable:!0,get(){return r$.pipeline}});Ih(C0e,O0e,{__proto__:null,enumerable:!0,get(){return r$.finished}});Gn.Stream=Gn;Gn._isUint8Array=function(e){return e instanceof Uint8Array};Gn._uint8ArrayToBuffer=function(e){return IQe.from(e.buffer,e.byteOffset,e.byteLength)}});var rP=H((pNt,Gi)=>{"use strict";_();var Ao=t$(),jQe=e$(),qQe=Ao.Readable.destroy;Gi.exports=Ao.Readable;Gi.exports._uint8ArrayToBuffer=Ao._uint8ArrayToBuffer;Gi.exports._isUint8Array=Ao._isUint8Array;Gi.exports.isDisturbed=Ao.isDisturbed;Gi.exports.isErrored=Ao.isErrored;Gi.exports.isReadable=Ao.isReadable;Gi.exports.Readable=Ao.Readable;Gi.exports.Writable=Ao.Writable;Gi.exports.Duplex=Ao.Duplex;Gi.exports.Transform=Ao.Transform;Gi.exports.PassThrough=Ao.PassThrough;Gi.exports.addAbortSignal=Ao.addAbortSignal;Gi.exports.finished=Ao.finished;Gi.exports.destroy=Ao.destroy;Gi.exports.destroy=qQe;Gi.exports.pipeline=Ao.pipeline;Gi.exports.compose=Ao.compose;Object.defineProperty(Ao,"promises",{configurable:!0,enumerable:!0,get(){return jQe}});Gi.exports.Stream=Ao.Stream;Gi.exports.default=Gi.exports});var L0e=H((s$,a$)=>{_();(function(t,e){typeof s$=="object"&&typeof a$<"u"?a$.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self,t.JSBI=e())})(s$,function(){"use strict";var t=Math.imul,e=Math.clz32;function r(L){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},r(L)}function n(L,W){if(!(L instanceof W))throw new TypeError("Cannot call a class as a function")}function i(L,W){for(var E,c=0;c<W.length;c++)E=W[c],E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(L,E.key,E)}function o(L,W,E){return W&&i(L.prototype,W),E&&i(L,E),Object.defineProperty(L,"prototype",{writable:!1}),L}function s(L,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(W&&W.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),Object.defineProperty(L,"prototype",{writable:!1}),W&&u(L,W)}function a(L){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(W){return W.__proto__||Object.getPrototypeOf(W)},a(L)}function u(L,W){return u=Object.setPrototypeOf||function(E,c){return E.__proto__=c,E},u(L,W)}function m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function p(){return p=m()?Reflect.construct:function(L,W,E){var c=[null];c.push.apply(c,W);var l=Function.bind.apply(L,c),y=new l;return E&&u(y,E.prototype),y},p.apply(null,arguments)}function b(L){return Function.toString.call(L).indexOf("[native code]")!==-1}function A(L){var W=typeof Map=="function"?new Map:void 0;return A=function(E){function c(){return p(E,arguments,a(this).constructor)}if(E===null||!b(E))return E;if(typeof E!="function")throw new TypeError("Super expression must either be null or a function");if(typeof W<"u"){if(W.has(E))return W.get(E);W.set(E,c)}return c.prototype=Object.create(E.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),u(c,E)},A(L)}function M(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}function S(L,W){if(W&&(typeof W=="object"||typeof W=="function"))return W;if(W!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M(L)}function P(L){var W=m();return function(){var E,c=a(L);if(W){var l=a(this).constructor;E=Reflect.construct(c,arguments,l)}else E=c.apply(this,arguments);return S(this,E)}}function k(L,W){return R(L)||B(L,W)||I(L,W)||$()}function R(L){if(Array.isArray(L))return L}function B(L,W){var E=L==null?null:typeof Symbol<"u"&&L[Symbol.iterator]||L["@@iterator"];if(E!=null){var c,l,y=[],d=!0,h=!1;try{for(E=E.call(L);!(d=(c=E.next()).done)&&(y.push(c.value),!(W&&y.length===W));d=!0);}catch(v){h=!0,l=v}finally{try{d||E.return==null||E.return()}finally{if(h)throw l}}return y}}function I(L,W){if(L){if(typeof L=="string")return q(L,W);var E=Object.prototype.toString.call(L).slice(8,-1);return E==="Object"&&L.constructor&&(E=L.constructor.name),E==="Map"||E==="Set"?Array.from(L):E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E)?q(L,W):void 0}}function q(L,W){(W==null||W>L.length)&&(W=L.length);for(var E=0,c=Array(W);E<W;E++)c[E]=L[E];return c}function $(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U(L,W){var E=typeof Symbol<"u"&&L[Symbol.iterator]||L["@@iterator"];if(!E){if(Array.isArray(L)||(E=I(L))||W&&L&&typeof L.length=="number"){E&&(L=E);var c=0,l=function(){};return{s:l,n:function(){return c>=L.length?{done:!0}:{done:!1,value:L[c++]}},e:function(v){throw v},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y,d=!0,h=!1;return{s:function(){E=E.call(L)},n:function(){var v=E.next();return d=v.done,v},e:function(v){h=!0,y=v},f:function(){try{d||E.return==null||E.return()}finally{if(h)throw y}}}}var F=function(L){var W=Math.abs,E=Math.max,c=Math.floor;function l(d,h){var v;if(n(this,l),v=y.call(this,d),v.sign=h,Object.setPrototypeOf(M(v),l.prototype),d>l.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return v}s(l,L);var y=P(l);return o(l,[{key:"toDebugString",value:function(){var d,h=["BigInt["],v=U(this);try{for(v.s();!(d=v.n()).done;){var x=d.value;h.push((x&&(x>>>0).toString(16))+", ")}}catch(g){v.e(g)}finally{v.f()}return h.push("]"),h.join("")}},{key:"toString",value:function(){var d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:10;if(2>d||36<d)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":d&d-1?l.__toStringGeneric(this,d,!1):l.__toStringBasePowerOfTwo(this,d)}},{key:"valueOf",value:function(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}},{key:"__copy",value:function(){for(var d=new l(this.length,this.sign),h=0;h<this.length;h++)d[h]=this[h];return d}},{key:"__trim",value:function(){for(var d=this.length,h=this[d-1];h===0;)d--,h=this[d-1],this.pop();return d===0&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var d=0;d<this.length;d++)this[d]=0}},{key:"__clzmsd",value:function(){return l.__clz30(this.__digit(this.length-1))}},{key:"__inplaceMultiplyAdd",value:function(d,h,v){v>this.length&&(v=this.length);for(var x=32767&d,g=d>>>15,f=0,w=h,D=0;D<v;D++){var T=this.__digit(D),C=32767&T,z=T>>>15,G=l.__imul(C,x),V=l.__imul(C,g),Z=l.__imul(z,x),J=l.__imul(z,g),X=w+G+f;f=X>>>30,X&=1073741823,X+=((32767&V)<<15)+((32767&Z)<<15),f+=X>>>30,w=J+(V>>>15)+(Z>>>15),this.__setDigit(D,1073741823&X)}if(f!==0||w!==0)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(d,h,v){for(var x,g=0,f=0;f<v;f++)x=this.__halfDigit(h+f)+d.__halfDigit(f)+g,g=x>>>15,this.__setHalfDigit(h+f,32767&x);return g}},{key:"__inplaceSub",value:function(d,h,v){var x=0;if(1&h){h>>=1;for(var g=this.__digit(h),f=32767&g,w=0;w<v-1>>>1;w++){var D=d.__digit(w),T=(g>>>15)-(32767&D)-x;x=1&T>>>15,this.__setDigit(h+w,(32767&T)<<15|32767&f),g=this.__digit(h+w+1),f=(32767&g)-(D>>>15)-x,x=1&f>>>15}var C=d.__digit(w),z=(g>>>15)-(32767&C)-x;if(x=1&z>>>15,this.__setDigit(h+w,(32767&z)<<15|32767&f),h+w+1>=this.length)throw new RangeError("out of bounds");!(1&v)&&(g=this.__digit(h+w+1),f=(32767&g)-(C>>>15)-x,x=1&f>>>15,this.__setDigit(h+d.length,1073709056&g|32767&f))}else{h>>=1;for(var G=0;G<d.length-1;G++){var V=this.__digit(h+G),Z=d.__digit(G),J=(32767&V)-(32767&Z)-x;x=1&J>>>15;var X=(V>>>15)-(Z>>>15)-x;x=1&X>>>15,this.__setDigit(h+G,(32767&X)<<15|32767&J)}var se=this.__digit(h+G),Q=d.__digit(G),te=(32767&se)-(32767&Q)-x;x=1&te>>>15;var de=0;!(1&v)&&(de=(se>>>15)-(Q>>>15)-x,x=1&de>>>15),this.__setDigit(h+G,(32767&de)<<15|32767&te)}return x}},{key:"__inplaceRightShift",value:function(d){if(d!==0){for(var h,v=this.__digit(0)>>>d,x=this.length-1,g=0;g<x;g++)h=this.__digit(g+1),this.__setDigit(g,1073741823&h<<30-d|v),v=h>>>d;this.__setDigit(x,v)}}},{key:"__digit",value:function(d){return this[d]}},{key:"__unsignedDigit",value:function(d){return this[d]>>>0}},{key:"__setDigit",value:function(d,h){this[d]=0|h}},{key:"__setDigitGrow",value:function(d,h){this[d]=0|h}},{key:"__halfDigitLength",value:function(){var d=this.length;return 32767>=this.__unsignedDigit(d-1)?2*d-1:2*d}},{key:"__halfDigit",value:function(d){return 32767&this[d>>>1]>>>15*(1&d)}},{key:"__setHalfDigit",value:function(d,h){var v=d>>>1,x=this.__digit(v),g=1&d?32767&x|h<<15:1073709056&x|32767&h;this.__setDigit(v,g)}}],[{key:"BigInt",value:function(d){var h=Number.isFinite;if(typeof d=="number"){if(d===0)return l.__zero();if(l.__isOneDigitInt(d))return 0>d?l.__oneDigit(-d,!0):l.__oneDigit(d,!1);if(!h(d)||c(d)!==d)throw new RangeError("The number "+d+" cannot be converted to BigInt because it is not an integer");return l.__fromDouble(d)}if(typeof d=="string"){var v=l.__fromString(d);if(v===null)throw new SyntaxError("Cannot convert "+d+" to a BigInt");return v}if(typeof d=="boolean")return d===!0?l.__oneDigit(1,!1):l.__zero();if(r(d)==="object"){if(d.constructor===l)return d;var x=l.__toPrimitive(d);return l.BigInt(x)}throw new TypeError("Cannot convert "+d+" to a BigInt")}},{key:"toNumber",value:function(d){var h=d.length;if(h===0)return 0;if(h===1){var v=d.__unsignedDigit(0);return d.sign?-v:v}var x=d.__digit(h-1),g=l.__clz30(x),f=30*h-g;if(1024<f)return d.sign?-1/0:1/0;var w=f-1,D=x,T=h-1,C=g+3,z=C===32?0:D<<C;z>>>=12;var G=C-12,V=12<=C?0:D<<20+C,Z=20+C;for(0<G&&0<T&&(T--,D=d.__digit(T),z|=D>>>30-G,V=D<<G+2,Z=G+2);0<Z&&0<T;)T--,D=d.__digit(T),V|=30<=Z?D<<Z-30:D>>>30-Z,Z-=30;var J=l.__decideRounding(d,Z,T,D);if((J===1||J===0&&(1&V)==1)&&(V=V+1>>>0,V===0&&(z++,z>>>20!=0&&(z=0,w++,1023<w))))return d.sign?-1/0:1/0;var X=d.sign?-2147483648:0;return w=w+1023<<20,l.__kBitConversionInts[1]=X|w|z,l.__kBitConversionInts[0]=V,l.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(d){if(d.length===0)return d;var h=d.__copy();return h.sign=!d.sign,h}},{key:"bitwiseNot",value:function(d){return d.sign?l.__absoluteSubOne(d).__trim():l.__absoluteAddOne(d,!0)}},{key:"exponentiate",value:function(d,h){if(h.sign)throw new RangeError("Exponent must be positive");if(h.length===0)return l.__oneDigit(1,!1);if(d.length===0)return d;if(d.length===1&&d.__digit(0)===1)return d.sign&&!(1&h.__digit(0))?l.unaryMinus(d):d;if(1<h.length)throw new RangeError("BigInt too big");var v=h.__unsignedDigit(0);if(v===1)return d;if(v>=l.__kMaxLengthBits)throw new RangeError("BigInt too big");if(d.length===1&&d.__digit(0)===2){var x=1+(0|v/30),g=d.sign&&(1&v)!=0,f=new l(x,g);f.__initializeDigits();var w=1<<v%30;return f.__setDigit(x-1,w),f}var D=null,T=d;for(1&v&&(D=d),v>>=1;v!==0;v>>=1)T=l.multiply(T,T),1&v&&(D===null?D=T:D=l.multiply(D,T));return D}},{key:"multiply",value:function(d,h){if(d.length===0)return d;if(h.length===0)return h;var v=d.length+h.length;30<=d.__clzmsd()+h.__clzmsd()&&v--;var x=new l(v,d.sign!==h.sign);x.__initializeDigits();for(var g=0;g<d.length;g++)l.__multiplyAccumulate(h,d.__digit(g),x,g);return x.__trim()}},{key:"divide",value:function(d,h){if(h.length===0)throw new RangeError("Division by zero");if(0>l.__absoluteCompare(d,h))return l.__zero();var v,x=d.sign!==h.sign,g=h.__unsignedDigit(0);if(h.length===1&&32767>=g){if(g===1)return x===d.sign?d:l.unaryMinus(d);v=l.__absoluteDivSmall(d,g,null)}else v=l.__absoluteDivLarge(d,h,!0,!1);return v.sign=x,v.__trim()}},{key:"remainder",value:function(h,v){if(v.length===0)throw new RangeError("Division by zero");if(0>l.__absoluteCompare(h,v))return h;var x=v.__unsignedDigit(0);if(v.length===1&&32767>=x){if(x===1)return l.__zero();var g=l.__absoluteModSmall(h,x);return g===0?l.__zero():l.__oneDigit(g,h.sign)}var f=l.__absoluteDivLarge(h,v,!1,!0);return f.sign=h.sign,f.__trim()}},{key:"add",value:function(d,h){var v=d.sign;return v===h.sign?l.__absoluteAdd(d,h,v):0<=l.__absoluteCompare(d,h)?l.__absoluteSub(d,h,v):l.__absoluteSub(h,d,!v)}},{key:"subtract",value:function(d,h){var v=d.sign;return v===h.sign?0<=l.__absoluteCompare(d,h)?l.__absoluteSub(d,h,v):l.__absoluteSub(h,d,!v):l.__absoluteAdd(d,h,v)}},{key:"leftShift",value:function(d,h){return h.length===0||d.length===0?d:h.sign?l.__rightShiftByAbsolute(d,h):l.__leftShiftByAbsolute(d,h)}},{key:"signedRightShift",value:function(d,h){return h.length===0||d.length===0?d:h.sign?l.__leftShiftByAbsolute(d,h):l.__rightShiftByAbsolute(d,h)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(d,h){return 0>l.__compareToBigInt(d,h)}},{key:"lessThanOrEqual",value:function(d,h){return 0>=l.__compareToBigInt(d,h)}},{key:"greaterThan",value:function(d,h){return 0<l.__compareToBigInt(d,h)}},{key:"greaterThanOrEqual",value:function(d,h){return 0<=l.__compareToBigInt(d,h)}},{key:"equal",value:function(d,h){if(d.sign!==h.sign||d.length!==h.length)return!1;for(var v=0;v<d.length;v++)if(d.__digit(v)!==h.__digit(v))return!1;return!0}},{key:"notEqual",value:function(d,h){return!l.equal(d,h)}},{key:"bitwiseAnd",value:function(d,h){if(!d.sign&&!h.sign)return l.__absoluteAnd(d,h).__trim();if(d.sign&&h.sign){var v=E(d.length,h.length)+1,x=l.__absoluteSubOne(d,v),g=l.__absoluteSubOne(h);return x=l.__absoluteOr(x,g,x),l.__absoluteAddOne(x,!0,x).__trim()}if(d.sign){var f=[h,d];d=f[0],h=f[1]}return l.__absoluteAndNot(d,l.__absoluteSubOne(h)).__trim()}},{key:"bitwiseXor",value:function(d,h){if(!d.sign&&!h.sign)return l.__absoluteXor(d,h).__trim();if(d.sign&&h.sign){var v=E(d.length,h.length),x=l.__absoluteSubOne(d,v),g=l.__absoluteSubOne(h);return l.__absoluteXor(x,g,x).__trim()}var f=E(d.length,h.length)+1;if(d.sign){var w=[h,d];d=w[0],h=w[1]}var D=l.__absoluteSubOne(h,f);return D=l.__absoluteXor(D,d,D),l.__absoluteAddOne(D,!0,D).__trim()}},{key:"bitwiseOr",value:function(d,h){var v=E(d.length,h.length);if(!d.sign&&!h.sign)return l.__absoluteOr(d,h).__trim();if(d.sign&&h.sign){var x=l.__absoluteSubOne(d,v),g=l.__absoluteSubOne(h);return x=l.__absoluteAnd(x,g,x),l.__absoluteAddOne(x,!0,x).__trim()}if(d.sign){var f=[h,d];d=f[0],h=f[1]}var w=l.__absoluteSubOne(h,v);return w=l.__absoluteAndNot(w,d,w),l.__absoluteAddOne(w,!0,w).__trim()}},{key:"asIntN",value:function(d,h){if(h.length===0)return h;if(d=c(d),0>d)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(d===0)return l.__zero();if(d>=l.__kMaxLengthBits)return h;var v=0|(d+29)/30;if(h.length<v)return h;var x=h.__unsignedDigit(v-1),g=1<<(d-1)%30;if(h.length===v&&x<g)return h;if((x&g)!==g)return l.__truncateToNBits(d,h);if(!h.sign)return l.__truncateAndSubFromPowerOfTwo(d,h,!0);if(!(x&g-1)){for(var f=v-2;0<=f;f--)if(h.__digit(f)!==0)return l.__truncateAndSubFromPowerOfTwo(d,h,!1);return h.length===v&&x===g?h:l.__truncateToNBits(d,h)}return l.__truncateAndSubFromPowerOfTwo(d,h,!1)}},{key:"asUintN",value:function(d,h){if(h.length===0)return h;if(d=c(d),0>d)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(d===0)return l.__zero();if(h.sign){if(d>l.__kMaxLengthBits)throw new RangeError("BigInt too big");return l.__truncateAndSubFromPowerOfTwo(d,h,!1)}if(d>=l.__kMaxLengthBits)return h;var v=0|(d+29)/30;if(h.length<v)return h;var x=d%30;if(h.length==v){if(x===0)return h;var g=h.__digit(v-1);if(!(g>>>x))return h}return l.__truncateToNBits(d,h)}},{key:"ADD",value:function(d,h){if(d=l.__toPrimitive(d),h=l.__toPrimitive(h),typeof d=="string")return typeof h!="string"&&(h=h.toString()),d+h;if(typeof h=="string")return d.toString()+h;if(d=l.__toNumeric(d),h=l.__toNumeric(h),l.__isBigInt(d)&&l.__isBigInt(h))return l.add(d,h);if(typeof d=="number"&&typeof h=="number")return d+h;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(d,h){return l.__compare(d,h,0)}},{key:"LE",value:function(d,h){return l.__compare(d,h,1)}},{key:"GT",value:function(d,h){return l.__compare(d,h,2)}},{key:"GE",value:function(d,h){return l.__compare(d,h,3)}},{key:"EQ",value:function(d,h){for(;;){if(l.__isBigInt(d))return l.__isBigInt(h)?l.equal(d,h):l.EQ(h,d);if(typeof d=="number"){if(l.__isBigInt(h))return l.__equalToNumber(h,d);if(r(h)!=="object")return d==h;h=l.__toPrimitive(h)}else if(typeof d=="string"){if(l.__isBigInt(h))return d=l.__fromString(d),d!==null&&l.equal(d,h);if(r(h)!=="object")return d==h;h=l.__toPrimitive(h)}else if(typeof d=="boolean"){if(l.__isBigInt(h))return l.__equalToNumber(h,+d);if(r(h)!=="object")return d==h;h=l.__toPrimitive(h)}else if(r(d)==="symbol"){if(l.__isBigInt(h))return!1;if(r(h)!=="object")return d==h;h=l.__toPrimitive(h)}else if(r(d)==="object"){if(r(h)==="object"&&h.constructor!==l)return d==h;d=l.__toPrimitive(d)}else return d==h}}},{key:"NE",value:function(d,h){return!l.EQ(d,h)}},{key:"DataViewGetBigInt64",value:function(d,h){var v=2<arguments.length&&arguments[2]!==void 0&&arguments[2];return l.asIntN(64,l.DataViewGetBigUint64(d,h,v))}},{key:"DataViewGetBigUint64",value:function(d,h){var v=2<arguments.length&&arguments[2]!==void 0&&arguments[2],x=v?[4,0]:[0,4],g=k(x,2),f=g[0],w=g[1],D=d.getUint32(h+f,v),T=d.getUint32(h+w,v),C=new l(3,!1);return C.__setDigit(0,1073741823&T),C.__setDigit(1,(268435455&D)<<2|T>>>30),C.__setDigit(2,D>>>28),C.__trim()}},{key:"DataViewSetBigInt64",value:function(d,h,v){var x=3<arguments.length&&arguments[3]!==void 0&&arguments[3];l.DataViewSetBigUint64(d,h,v,x)}},{key:"DataViewSetBigUint64",value:function(d,h,v){var x=3<arguments.length&&arguments[3]!==void 0&&arguments[3];v=l.asUintN(64,v);var g=0,f=0;if(0<v.length&&(f=v.__digit(0),1<v.length)){var w=v.__digit(1);f|=w<<30,g=w>>>2,2<v.length&&(g|=v.__digit(2)<<28)}var D=x?[4,0]:[0,4],T=k(D,2),C=T[0],z=T[1];d.setUint32(h+C,g,x),d.setUint32(h+z,f,x)}},{key:"__zero",value:function(){return new l(0,!1)}},{key:"__oneDigit",value:function(d,h){var v=new l(1,h);return v.__setDigit(0,d),v}},{key:"__decideRounding",value:function(d,h,v,x){if(0<h)return-1;var g;if(0>h)g=-h-1;else{if(v===0)return-1;v--,x=d.__digit(v),g=29}var f=1<<g;if(!(x&f))return-1;if(f-=1,(x&f)!=0)return 1;for(;0<v;)if(v--,d.__digit(v)!==0)return 1;return 0}},{key:"__fromDouble",value:function(d){l.__kBitConversionDouble[0]=d;var h,v=2047&l.__kBitConversionInts[1]>>>20,x=v-1023,g=(0|x/30)+1,f=new l(g,0>d),w=1048575&l.__kBitConversionInts[1]|1048576,D=l.__kBitConversionInts[0],T=20,C=x%30,z=0;if(C<T){var G=T-C;z=G+32,h=w>>>G,w=w<<32-G|D>>>G,D<<=32-G}else if(C===T)z=32,h=w,w=D,D=0;else{var V=C-T;z=32-V,h=w<<V|D>>>32-V,w=D<<V,D=0}f.__setDigit(g-1,h);for(var Z=g-2;0<=Z;Z--)0<z?(z-=30,h=w>>>2,w=w<<30|D>>>2,D<<=30):h=0,f.__setDigit(Z,h);return f.__trim()}},{key:"__isWhitespace",value:function(d){return 13>=d&&9<=d||(159>=d?d==32:131071>=d?d==160||d==5760:196607>=d?(d&=131071,10>=d||d==40||d==41||d==47||d==95||d==4096):d==65279)}},{key:"__fromString",value:function(d){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,v=0,x=d.length,g=0;if(g===x)return l.__zero();for(var f=d.charCodeAt(g);l.__isWhitespace(f);){if(++g===x)return l.__zero();f=d.charCodeAt(g)}if(f===43){if(++g===x)return null;f=d.charCodeAt(g),v=1}else if(f===45){if(++g===x)return null;f=d.charCodeAt(g),v=-1}if(h===0){if(h=10,f===48){if(++g===x)return l.__zero();if(f=d.charCodeAt(g),f===88||f===120){if(h=16,++g===x)return null;f=d.charCodeAt(g)}else if(f===79||f===111){if(h=8,++g===x)return null;f=d.charCodeAt(g)}else if(f===66||f===98){if(h=2,++g===x)return null;f=d.charCodeAt(g)}}}else if(h===16&&f===48){if(++g===x)return l.__zero();if(f=d.charCodeAt(g),f===88||f===120){if(++g===x)return null;f=d.charCodeAt(g)}}if(v!==0&&h!==10)return null;for(;f===48;){if(++g===x)return l.__zero();f=d.charCodeAt(g)}var w=x-g,D=l.__kMaxBitsPerChar[h],T=l.__kBitsPerCharTableMultiplier-1;if(w>1073741824/D)return null;var C=D*w+T>>>l.__kBitsPerCharTableShift,z=new l(0|(C+29)/30,!1),G=10>h?h:10,V=10<h?h-10:0;if(h&h-1){z.__initializeDigits();var de=!1,ie=0;do{for(var ae,fe=0,oe=1;;){if(ae=void 0,f-48>>>0<G)ae=f-48;else if((32|f)-97>>>0<V)ae=(32|f)-87;else{de=!0;break}var ce=oe*h;if(1073741823<ce)break;if(oe=ce,fe=fe*h+ae,ie++,++g===x){de=!0;break}f=d.charCodeAt(g)}T=30*l.__kBitsPerCharTableMultiplier-1;var Ke=0|(D*ie+T>>>l.__kBitsPerCharTableShift)/30;z.__inplaceMultiplyAdd(oe,fe,Ke)}while(!de)}else{D>>=l.__kBitsPerCharTableShift;var Z=[],J=[],X=!1;do{for(var se,Q=0,te=0;;){if(se=void 0,f-48>>>0<G)se=f-48;else if((32|f)-97>>>0<V)se=(32|f)-87;else{X=!0;break}if(te+=D,Q=Q<<D|se,++g===x){X=!0;break}if(f=d.charCodeAt(g),30<te+D)break}Z.push(Q),J.push(te)}while(!X);l.__fillFromParts(z,Z,J)}if(g!==x){if(!l.__isWhitespace(f))return null;for(g++;g<x;g++)if(f=d.charCodeAt(g),!l.__isWhitespace(f))return null}return z.sign=v===-1,z.__trim()}},{key:"__fillFromParts",value:function(d,h,v){for(var x=0,g=0,f=0,w=h.length-1;0<=w;w--){var D=h[w],T=v[w];g|=D<<f,f+=T,f===30?(d.__setDigit(x++,g),f=0,g=0):30<f&&(d.__setDigit(x++,1073741823&g),f-=30,g=D>>>T-f)}if(g!==0){if(x>=d.length)throw new Error("implementation bug");d.__setDigit(x++,g)}for(;x<d.length;x++)d.__setDigit(x,0)}},{key:"__toStringBasePowerOfTwo",value:function(d,h){var v=d.length,x=h-1;x=(85&x>>>1)+(85&x),x=(51&x>>>2)+(51&x),x=(15&x>>>4)+(15&x);var g=x,f=h-1,w=d.__digit(v-1),D=l.__clz30(w),T=0|(30*v-D+g-1)/g;if(d.sign&&T++,268435456<T)throw new Error("string too long");for(var C=Array(T),z=T-1,G=0,V=0,Z=0;Z<v-1;Z++){var J=d.__digit(Z),X=(G|J<<V)&f;C[z--]=l.__kConversionChars[X];var se=g-V;for(G=J>>>se,V=30-se;V>=g;)C[z--]=l.__kConversionChars[G&f],G>>>=g,V-=g}var Q=(G|w<<V)&f;for(C[z--]=l.__kConversionChars[Q],G=w>>>g-V;G!==0;)C[z--]=l.__kConversionChars[G&f],G>>>=g;if(d.sign&&(C[z--]="-"),z!==-1)throw new Error("implementation bug");return C.join("")}},{key:"__toStringGeneric",value:function(d,h,v){var x=d.length;if(x===0)return"";if(x===1){var g=d.__unsignedDigit(0).toString(h);return v===!1&&d.sign&&(g="-"+g),g}var f=30*x-l.__clz30(d.__digit(x-1)),w=l.__kMaxBitsPerChar[h],D=w-1,T=f*l.__kBitsPerCharTableMultiplier;T+=D-1,T=0|T/D;var C,z,G=T+1>>1,V=l.exponentiate(l.__oneDigit(h,!1),l.__oneDigit(G,!1)),Z=V.__unsignedDigit(0);if(V.length===1&&32767>=Z){C=new l(d.length,!1),C.__initializeDigits();for(var J,X=0,se=2*d.length-1;0<=se;se--)J=X<<15|d.__halfDigit(se),C.__setHalfDigit(se,0|J/Z),X=0|J%Z;z=X.toString(h)}else{var Q=l.__absoluteDivLarge(d,V,!0,!0);C=Q.quotient;var te=Q.remainder.__trim();z=l.__toStringGeneric(te,h,!0)}C.__trim();for(var de=l.__toStringGeneric(C,h,!0);z.length<G;)z="0"+z;return v===!1&&d.sign&&(de="-"+de),de+z}},{key:"__unequalSign",value:function(d){return d?-1:1}},{key:"__absoluteGreater",value:function(d){return d?-1:1}},{key:"__absoluteLess",value:function(d){return d?1:-1}},{key:"__compareToBigInt",value:function(d,h){var v=d.sign;if(v!==h.sign)return l.__unequalSign(v);var x=l.__absoluteCompare(d,h);return 0<x?l.__absoluteGreater(v):0>x?l.__absoluteLess(v):0}},{key:"__compareToNumber",value:function(d,h){if(l.__isOneDigitInt(h)){var v=d.sign,x=0>h;if(v!==x)return l.__unequalSign(v);if(d.length===0){if(x)throw new Error("implementation bug");return h===0?0:-1}if(1<d.length)return l.__absoluteGreater(v);var g=W(h),f=d.__unsignedDigit(0);return f>g?l.__absoluteGreater(v):f<g?l.__absoluteLess(v):0}return l.__compareToDouble(d,h)}},{key:"__compareToDouble",value:function(d,h){if(h!==h)return h;if(h===1/0)return-1;if(h===-1/0)return 1;var v=d.sign;if(v!==0>h)return l.__unequalSign(v);if(h===0)throw new Error("implementation bug: should be handled elsewhere");if(d.length===0)return-1;l.__kBitConversionDouble[0]=h;var x=2047&l.__kBitConversionInts[1]>>>20;if(x==2047)throw new Error("implementation bug: handled elsewhere");var g=x-1023;if(0>g)return l.__absoluteGreater(v);var f=d.length,w=d.__digit(f-1),D=l.__clz30(w),T=30*f-D,C=g+1;if(T<C)return l.__absoluteLess(v);if(T>C)return l.__absoluteGreater(v);var z=1048576|1048575&l.__kBitConversionInts[1],G=l.__kBitConversionInts[0],V=20,Z=29-D;if(Z!==(0|(T-1)%30))throw new Error("implementation bug");var J,X=0;if(Z<V){var se=V-Z;X=se+32,J=z>>>se,z=z<<32-se|G>>>se,G<<=32-se}else if(Z===V)X=32,J=z,z=G,G=0;else{var Q=Z-V;X=32-Q,J=z<<Q|G>>>32-Q,z=G<<Q,G=0}if(w>>>=0,J>>>=0,w>J)return l.__absoluteGreater(v);if(w<J)return l.__absoluteLess(v);for(var te=f-2;0<=te;te--){0<X?(X-=30,J=z>>>2,z=z<<30|G>>>2,G<<=30):J=0;var de=d.__unsignedDigit(te);if(de>J)return l.__absoluteGreater(v);if(de<J)return l.__absoluteLess(v)}if(z!==0||G!==0){if(X===0)throw new Error("implementation bug");return l.__absoluteLess(v)}return 0}},{key:"__equalToNumber",value:function(d,h){return l.__isOneDigitInt(h)?h===0?d.length===0:d.length===1&&d.sign===0>h&&d.__unsignedDigit(0)===W(h):l.__compareToDouble(d,h)===0}},{key:"__comparisonResultToBool",value:function(d,h){return h===0?0>d:h===1?0>=d:h===2?0<d:h===3?0<=d:void 0}},{key:"__compare",value:function(d,h,v){if(d=l.__toPrimitive(d),h=l.__toPrimitive(h),typeof d=="string"&&typeof h=="string")switch(v){case 0:return d<h;case 1:return d<=h;case 2:return d>h;case 3:return d>=h}if(l.__isBigInt(d)&&typeof h=="string")return h=l.__fromString(h),h!==null&&l.__comparisonResultToBool(l.__compareToBigInt(d,h),v);if(typeof d=="string"&&l.__isBigInt(h))return d=l.__fromString(d),d!==null&&l.__comparisonResultToBool(l.__compareToBigInt(d,h),v);if(d=l.__toNumeric(d),h=l.__toNumeric(h),l.__isBigInt(d)){if(l.__isBigInt(h))return l.__comparisonResultToBool(l.__compareToBigInt(d,h),v);if(typeof h!="number")throw new Error("implementation bug");return l.__comparisonResultToBool(l.__compareToNumber(d,h),v)}if(typeof d!="number")throw new Error("implementation bug");if(l.__isBigInt(h))return l.__comparisonResultToBool(l.__compareToNumber(h,d),2^v);if(typeof h!="number")throw new Error("implementation bug");return v===0?d<h:v===1?d<=h:v===2?d>h:v===3?d>=h:void 0}},{key:"__absoluteAdd",value:function(d,h,v){if(d.length<h.length)return l.__absoluteAdd(h,d,v);if(d.length===0)return d;if(h.length===0)return d.sign===v?d:l.unaryMinus(d);var x=d.length;(d.__clzmsd()===0||h.length===d.length&&h.__clzmsd()===0)&&x++;for(var g,f=new l(x,v),w=0,D=0;D<h.length;D++)g=d.__digit(D)+h.__digit(D)+w,w=g>>>30,f.__setDigit(D,1073741823&g);for(;D<d.length;D++){var T=d.__digit(D)+w;w=T>>>30,f.__setDigit(D,1073741823&T)}return D<f.length&&f.__setDigit(D,w),f.__trim()}},{key:"__absoluteSub",value:function(d,h,v){if(d.length===0)return d;if(h.length===0)return d.sign===v?d:l.unaryMinus(d);for(var x,g=new l(d.length,v),f=0,w=0;w<h.length;w++)x=d.__digit(w)-h.__digit(w)-f,f=1&x>>>30,g.__setDigit(w,1073741823&x);for(;w<d.length;w++){var D=d.__digit(w)-f;f=1&D>>>30,g.__setDigit(w,1073741823&D)}return g.__trim()}},{key:"__absoluteAddOne",value:function(d,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,x=d.length;v===null?v=new l(x,h):v.sign=h;for(var g,f=1,w=0;w<x;w++)g=d.__digit(w)+f,f=g>>>30,v.__setDigit(w,1073741823&g);return f!==0&&v.__setDigitGrow(x,1),v}},{key:"__absoluteSubOne",value:function(d,h){var v=d.length;h=h||v;for(var x,g=new l(h,!1),f=1,w=0;w<v;w++)x=d.__digit(w)-f,f=1&x>>>30,g.__setDigit(w,1073741823&x);if(f!==0)throw new Error("implementation bug");for(var D=v;D<h;D++)g.__setDigit(D,0);return g}},{key:"__absoluteAnd",value:function(d,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,x=d.length,g=h.length,f=g;if(x<g){f=x;var w=d,D=x;d=h,x=g,h=w,g=D}var T=f;v===null?v=new l(T,!1):T=v.length;for(var C=0;C<f;C++)v.__setDigit(C,d.__digit(C)&h.__digit(C));for(;C<T;C++)v.__setDigit(C,0);return v}},{key:"__absoluteAndNot",value:function(d,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,x=d.length,g=h.length,f=g;x<g&&(f=x);var w=x;v===null?v=new l(w,!1):w=v.length;for(var D=0;D<f;D++)v.__setDigit(D,d.__digit(D)&~h.__digit(D));for(;D<x;D++)v.__setDigit(D,d.__digit(D));for(;D<w;D++)v.__setDigit(D,0);return v}},{key:"__absoluteOr",value:function(d,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,x=d.length,g=h.length,f=g;if(x<g){f=x;var w=d,D=x;d=h,x=g,h=w,g=D}var T=x;v===null?v=new l(T,!1):T=v.length;for(var C=0;C<f;C++)v.__setDigit(C,d.__digit(C)|h.__digit(C));for(;C<x;C++)v.__setDigit(C,d.__digit(C));for(;C<T;C++)v.__setDigit(C,0);return v}},{key:"__absoluteXor",value:function(d,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,x=d.length,g=h.length,f=g;if(x<g){f=x;var w=d,D=x;d=h,x=g,h=w,g=D}var T=x;v===null?v=new l(T,!1):T=v.length;for(var C=0;C<f;C++)v.__setDigit(C,d.__digit(C)^h.__digit(C));for(;C<x;C++)v.__setDigit(C,d.__digit(C));for(;C<T;C++)v.__setDigit(C,0);return v}},{key:"__absoluteCompare",value:function(d,h){var v=d.length-h.length;if(v!=0)return v;for(var x=d.length-1;0<=x&&d.__digit(x)===h.__digit(x);)x--;return 0>x?0:d.__unsignedDigit(x)>h.__unsignedDigit(x)?1:-1}},{key:"__multiplyAccumulate",value:function(d,h,v,x){if(h!==0){for(var g=32767&h,f=h>>>15,w=0,D=0,T=0;T<d.length;T++,x++){var C=v.__digit(x),z=d.__digit(T),G=32767&z,V=z>>>15,Z=l.__imul(G,g),J=l.__imul(G,f),X=l.__imul(V,g),se=l.__imul(V,f);C+=D+Z+w,w=C>>>30,C&=1073741823,C+=((32767&J)<<15)+((32767&X)<<15),w+=C>>>30,D=se+(J>>>15)+(X>>>15),v.__setDigit(x,1073741823&C)}for(;w!==0||D!==0;x++){var Q=v.__digit(x);Q+=w+D,D=0,w=Q>>>30,v.__setDigit(x,1073741823&Q)}}}},{key:"__internalMultiplyAdd",value:function(d,h,v,x,g){for(var f=v,w=0,D=0;D<x;D++){var T=d.__digit(D),C=l.__imul(32767&T,h),z=l.__imul(T>>>15,h),G=C+((32767&z)<<15)+w+f;f=G>>>30,w=z>>>15,g.__setDigit(D,1073741823&G)}if(g.length>x)for(g.__setDigit(x++,f+w);x<g.length;)g.__setDigit(x++,0);else if(f+w!==0)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(d,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;v===null&&(v=new l(d.length,!1));for(var x=0,g=2*d.length-1;0<=g;g-=2){var f=(x<<15|d.__halfDigit(g))>>>0,w=0|f/h;x=0|f%h,f=(x<<15|d.__halfDigit(g-1))>>>0;var D=0|f/h;x=0|f%h,v.__setDigit(g>>>1,w<<15|D)}return v}},{key:"__absoluteModSmall",value:function(d,h){for(var v,x=0,g=2*d.length-1;0<=g;g--)v=(x<<15|d.__halfDigit(g))>>>0,x=0|v%h;return x}},{key:"__absoluteDivLarge",value:function(d,h,v,x){var g=h.__halfDigitLength(),f=h.length,w=d.__halfDigitLength()-g,D=null;v&&(D=new l(w+2>>>1,!1),D.__initializeDigits());var T=new l(g+2>>>1,!1);T.__initializeDigits();var C=l.__clz15(h.__halfDigit(g-1));0<C&&(h=l.__specialLeftShift(h,C,0));for(var z=l.__specialLeftShift(d,C,1),G=h.__halfDigit(g-1),V=0,Z=w;0<=Z;Z--){var J=32767,X=z.__halfDigit(Z+g);if(X!==G){var se=(X<<15|z.__halfDigit(Z+g-1))>>>0;J=0|se/G;for(var Q=0|se%G,te=h.__halfDigit(g-2),de=z.__halfDigit(Z+g-2);l.__imul(J,te)>>>0>(Q<<16|de)>>>0&&(J--,Q+=G,!(32767<Q)););}l.__internalMultiplyAdd(h,J,0,f,T);var ie=z.__inplaceSub(T,Z,g+1);ie!==0&&(ie=z.__inplaceAdd(h,Z,g),z.__setHalfDigit(Z+g,32767&z.__halfDigit(Z+g)+ie),J--),v&&(1&Z?V=J<<15:D.__setDigit(Z>>>1,V|J))}if(x)return z.__inplaceRightShift(C),v?{quotient:D,remainder:z}:z;if(v)return D;throw new Error("unreachable")}},{key:"__clz15",value:function(d){return l.__clz30(d)-15}},{key:"__specialLeftShift",value:function(d,h,v){var x=d.length,g=new l(x+v,!1);if(h===0){for(var f=0;f<x;f++)g.__setDigit(f,d.__digit(f));return 0<v&&g.__setDigit(x,0),g}for(var w,D=0,T=0;T<x;T++)w=d.__digit(T),g.__setDigit(T,1073741823&w<<h|D),D=w>>>30-h;return 0<v&&g.__setDigit(x,D),g}},{key:"__leftShiftByAbsolute",value:function(d,h){var v=l.__toShiftAmount(h);if(0>v)throw new RangeError("BigInt too big");var x=0|v/30,g=v%30,f=d.length,w=g!==0&&d.__digit(f-1)>>>30-g!=0,D=f+x+(w?1:0),T=new l(D,d.sign);if(g===0){for(var C=0;C<x;C++)T.__setDigit(C,0);for(;C<D;C++)T.__setDigit(C,d.__digit(C-x))}else{for(var z=0,G=0;G<x;G++)T.__setDigit(G,0);for(var V,Z=0;Z<f;Z++)V=d.__digit(Z),T.__setDigit(Z+x,1073741823&V<<g|z),z=V>>>30-g;if(w)T.__setDigit(f+x,z);else if(z!==0)throw new Error("implementation bug")}return T.__trim()}},{key:"__rightShiftByAbsolute",value:function(d,h){var v=d.length,x=d.sign,g=l.__toShiftAmount(h);if(0>g)return l.__rightShiftByMaximum(x);var f=0|g/30,w=g%30,D=v-f;if(0>=D)return l.__rightShiftByMaximum(x);var T=!1;if(x){if(d.__digit(f)&(1<<w)-1)T=!0;else for(var C=0;C<f;C++)if(d.__digit(C)!==0){T=!0;break}}if(T&&w===0){var z=d.__digit(v-1);!~z&&D++}var G=new l(D,x);if(w===0){G.__setDigit(D-1,0);for(var V=f;V<v;V++)G.__setDigit(V-f,d.__digit(V))}else{for(var Z,J=d.__digit(f)>>>w,X=v-f-1,se=0;se<X;se++)Z=d.__digit(se+f+1),G.__setDigit(se,1073741823&Z<<30-w|J),J=Z>>>w;G.__setDigit(X,J)}return T&&(G=l.__absoluteAddOne(G,!0,G)),G.__trim()}},{key:"__rightShiftByMaximum",value:function(d){return d?l.__oneDigit(1,!0):l.__zero()}},{key:"__toShiftAmount",value:function(d){if(1<d.length)return-1;var h=d.__unsignedDigit(0);return h>l.__kMaxLengthBits?-1:h}},{key:"__toPrimitive",value:function(d){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"default";if(r(d)!=="object"||d.constructor===l)return d;if(typeof Symbol<"u"&&r(Symbol.toPrimitive)==="symbol"){var v=d[Symbol.toPrimitive];if(v){var x=v(h);if(r(x)!=="object")return x;throw new TypeError("Cannot convert object to primitive value")}}var g=d.valueOf;if(g){var f=g.call(d);if(r(f)!=="object")return f}var w=d.toString;if(w){var D=w.call(d);if(r(D)!=="object")return D}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(d){return l.__isBigInt(d)?d:+d}},{key:"__isBigInt",value:function(d){return r(d)==="object"&&d!==null&&d.constructor===l}},{key:"__truncateToNBits",value:function(d,h){for(var v=0|(d+29)/30,x=new l(v,h.sign),g=v-1,f=0;f<g;f++)x.__setDigit(f,h.__digit(f));var w=h.__digit(g);if(d%30!=0){var D=32-d%30;w=w<<D>>>D}return x.__setDigit(g,w),x.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(d,h,v){for(var x=Math.min,g,f=0|(d+29)/30,w=new l(f,v),D=0,T=f-1,C=0,z=x(T,h.length);D<z;D++)g=0-h.__digit(D)-C,C=1&g>>>30,w.__setDigit(D,1073741823&g);for(;D<T;D++)w.__setDigit(D,0|1073741823&-C);var G,V=T<h.length?h.__digit(T):0,Z=d%30;if(Z===0)G=0-V-C,G&=1073741823;else{var J=32-Z;V=V<<J>>>J;var X=1<<32-J;G=X-V-C,G&=X-1}return w.__setDigit(T,G),w.__trim()}},{key:"__digitPow",value:function(d,h){for(var v=1;0<h;)1&h&&(v*=d),h>>>=1,d*=d;return v}},{key:"__isOneDigitInt",value:function(d){return(1073741823&d)===d}}]),l}(A(Array));return F.__kMaxLength=33554432,F.__kMaxLengthBits=F.__kMaxLength<<5,F.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],F.__kBitsPerCharTableShift=5,F.__kBitsPerCharTableMultiplier=1<<F.__kBitsPerCharTableShift,F.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],F.__kBitConversionBuffer=new ArrayBuffer(8),F.__kBitConversionDouble=new Float64Array(F.__kBitConversionBuffer),F.__kBitConversionInts=new Int32Array(F.__kBitConversionBuffer),F.__clz30=e?function(L){return e(L)-2}:function(L){var W=Math.LN2,E=Math.log;return L===0?30:0|29-(0|E(L>>>0)/W)},F.__imul=t||function(L,W){return 0|L*W},F})});var NS=H(rn=>{"use strict";_();Object.defineProperty(rn,"__esModule",{value:!0});rn.regexpCode=rn.getEsmExportName=rn.getProperty=rn.safeStringify=rn.stringify=rn.strConcat=rn.addCodeArg=rn.str=rn._=rn.nil=rn._Code=rn.Name=rn.IDENTIFIER=rn._CodeOrName=void 0;var DS=class{};rn._CodeOrName=DS;rn.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Lg=class extends DS{constructor(e){if(super(),!rn.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};rn.Name=Lg;var Pf=class extends DS{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof Lg&&(r[n.str]=(r[n.str]||0)+1),r),{})}};rn._Code=Pf;rn.nil=new Pf("");function Tye(t,...e){let r=[t[0]],n=0;for(;n<e.length;)yL(r,e[n]),r.push(t[++n]);return new Pf(r)}rn._=Tye;var mL=new Pf("+");function Rye(t,...e){let r=[CS(t[0])],n=0;for(;n<e.length;)r.push(mL),yL(r,e[n]),r.push(mL,CS(t[++n]));return TXe(r),new Pf(r)}rn.str=Rye;function yL(t,e){e instanceof Pf?t.push(...e._items):e instanceof Lg?t.push(e):t.push(kXe(e))}rn.addCodeArg=yL;function TXe(t){let e=1;for(;e<t.length-1;){if(t[e]===mL){let r=RXe(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function RXe(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Lg||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Lg))return`"${t}${e.slice(1)}`}function IXe(t,e){return e.emptyStr()?t:t.emptyStr()?e:Rye`${t}${e}`}rn.strConcat=IXe;function kXe(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:CS(Array.isArray(t)?t.join(","):t)}function OXe(t){return new Pf(CS(t))}rn.stringify=OXe;function CS(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}rn.safeStringify=CS;function BXe(t){return typeof t=="string"&&rn.IDENTIFIER.test(t)?new Pf(`.${t}`):Tye`[${t}]`}rn.getProperty=BXe;function DXe(t){if(typeof t=="string"&&rn.IDENTIFIER.test(t))return new Pf(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}rn.getEsmExportName=DXe;function CXe(t){return new Pf(t.toString())}rn.regexpCode=CXe});var wL=H(Ra=>{"use strict";_();Object.defineProperty(Ra,"__esModule",{value:!0});Ra.ValueScope=Ra.ValueScopeName=Ra.Scope=Ra.varKinds=Ra.UsedValueState=void 0;var ec=NS(),gL=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},bL;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(bL=Ra.UsedValueState||(Ra.UsedValueState={}));Ra.varKinds={const:new ec.Name("const"),let:new ec.Name("let"),var:new ec.Name("var")};var KP=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof ec.Name?e:this.name(e)}name(e){return new ec.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Ra.Scope=KP;var WP=class extends ec.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,ec._)`.${new ec.Name(r)}[${n}]`}};Ra.ValueScopeName=WP;var NXe=(0,ec._)`\n`,vL=class extends KP{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?NXe:ec.nil}}get(){return this._scope}name(e){return new WP(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let i=this.toName(e),{prefix:o}=i,s=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[o];if(a){let p=a.get(s);if(p)return p}else a=this._values[o]=new Map;a.set(s,i);let u=this._scope[o]||(this._scope[o]=[]),m=u.length;return u[m]=r.ref,i.setValue(r,{property:o,itemIndex:m}),i}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,ec._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,i=>{if(i.value===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return i.value.code},r,n)}_reduceValues(e,r,n={},i){let o=ec.nil;for(let s in e){let a=e[s];if(!a)continue;let u=n[s]=n[s]||new Map;a.forEach(m=>{if(u.has(m))return;u.set(m,bL.Started);let p=r(m);if(p){let b=this.opts.es5?Ra.varKinds.var:Ra.varKinds.const;o=(0,ec._)`${o}${b} ${m} = ${p};${this.opts._n}`}else if(p=i?.(m))o=(0,ec._)`${o}${p}${this.opts._n}`;else throw new gL(m);u.set(m,bL.Completed)})}return o}};Ra.ValueScope=vL});var rr=H(_r=>{"use strict";_();Object.defineProperty(_r,"__esModule",{value:!0});_r.or=_r.and=_r.not=_r.CodeGen=_r.operators=_r.varKinds=_r.ValueScopeName=_r.ValueScope=_r.Scope=_r.Name=_r.regexpCode=_r.stringify=_r.getProperty=_r.nil=_r.strConcat=_r.str=_r._=void 0;var Vr=NS(),Iu=wL(),H0=NS();Object.defineProperty(_r,"_",{enumerable:!0,get:function(){return H0._}});Object.defineProperty(_r,"str",{enumerable:!0,get:function(){return H0.str}});Object.defineProperty(_r,"strConcat",{enumerable:!0,get:function(){return H0.strConcat}});Object.defineProperty(_r,"nil",{enumerable:!0,get:function(){return H0.nil}});Object.defineProperty(_r,"getProperty",{enumerable:!0,get:function(){return H0.getProperty}});Object.defineProperty(_r,"stringify",{enumerable:!0,get:function(){return H0.stringify}});Object.defineProperty(_r,"regexpCode",{enumerable:!0,get:function(){return H0.regexpCode}});Object.defineProperty(_r,"Name",{enumerable:!0,get:function(){return H0.Name}});var ZP=wL();Object.defineProperty(_r,"Scope",{enumerable:!0,get:function(){return ZP.Scope}});Object.defineProperty(_r,"ValueScope",{enumerable:!0,get:function(){return ZP.ValueScope}});Object.defineProperty(_r,"ValueScopeName",{enumerable:!0,get:function(){return ZP.ValueScopeName}});Object.defineProperty(_r,"varKinds",{enumerable:!0,get:function(){return ZP.varKinds}});_r.operators={GT:new Vr._Code(">"),GTE:new Vr._Code(">="),LT:new Vr._Code("<"),LTE:new Vr._Code("<="),EQ:new Vr._Code("==="),NEQ:new Vr._Code("!=="),NOT:new Vr._Code("!"),OR:new Vr._Code("||"),AND:new Vr._Code("&&"),ADD:new Vr._Code("+")};var zh=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},_L=class extends zh{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Iu.varKinds.var:this.varKind,i=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=H1(this.rhs,e,r)),this}get names(){return this.rhs instanceof Vr._CodeOrName?this.rhs.names:{}}},GP=class extends zh{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Vr.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=H1(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Vr.Name?{}:{...this.lhs.names};return HP(e,this.rhs)}},xL=class extends GP{constructor(e,r,n,i){super(e,n,i),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},EL=class extends zh{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},SL=class extends zh{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},ML=class extends zh{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},AL=class extends zh{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=H1(this.code,e,r),this}get names(){return this.code instanceof Vr._CodeOrName?this.code.names:{}}},jS=class extends zh{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,i=n.length;for(;i--;){let o=n[i];o.optimizeNames(e,r)||(jXe(e,o.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>Fg(e,r.names),{})}},Kh=class extends jS{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},PL=class extends jS{},V1=class extends Kh{};V1.kind="else";var ku=class extends Kh{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new V1(n):n}if(r)return e===!1?r instanceof ku?r:r.nodes:this.nodes.length?this:new ku(Iye(e),r instanceof ku?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=H1(this.condition,e,r),this}get names(){let e=super.names;return HP(e,this.condition),this.else&&Fg(e,this.else.names),e}};ku.kind="if";var Ug=class extends Kh{};Ug.kind="for";var TL=class extends Ug{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=H1(this.iteration,e,r),this}get names(){return Fg(super.names,this.iteration.names)}},RL=class extends Ug{constructor(e,r,n,i){super(),this.varKind=e,this.name=r,this.from=n,this.to=i}render(e){let r=e.es5?Iu.varKinds.var:this.varKind,{name:n,from:i,to:o}=this;return`for(${r} ${n}=${i}; ${n}<${o}; ${n}++)`+super.render(e)}get names(){let e=HP(super.names,this.from);return HP(e,this.to)}},VP=class extends Ug{constructor(e,r,n,i){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=i}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=H1(this.iterable,e,r),this}get names(){return Fg(super.names,this.iterable.names)}},qS=class extends Kh{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};qS.kind="func";var $S=class extends jS{render(e){return"return "+super.render(e)}};$S.kind="return";var IL=class extends Kh{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,i;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(i=this.finally)===null||i===void 0||i.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&Fg(e,this.catch.names),this.finally&&Fg(e,this.finally.names),e}},LS=class extends Kh{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};LS.kind="catch";var US=class extends Kh{render(e){return"finally"+super.render(e)}};US.kind="finally";var kL=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Iu.Scope({parent:e}),this._nodes=[new PL]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,i){let o=this._scope.toName(r);return n!==void 0&&i&&(this._constants[o.str]=n),this._leafNode(new _L(e,o,n)),o}const(e,r,n){return this._def(Iu.varKinds.const,e,r,n)}let(e,r,n){return this._def(Iu.varKinds.let,e,r,n)}var(e,r,n){return this._def(Iu.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new GP(e,r,n))}add(e,r){return this._leafNode(new xL(e,_r.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Vr.nil&&this._leafNode(new AL(e)),this}object(...e){let r=["{"];for(let[n,i]of e)r.length>1&&r.push(","),r.push(n),(n!==i||this.opts.es5)&&(r.push(":"),(0,Vr.addCodeArg)(r,i));return r.push("}"),new Vr._Code(r)}if(e,r,n){if(this._blockNode(new ku(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new ku(e))}else(){return this._elseNode(new V1)}endIf(){return this._endBlockNode(ku,V1)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new TL(e),r)}forRange(e,r,n,i,o=this.opts.es5?Iu.varKinds.var:Iu.varKinds.let){let s=this._scope.toName(e);return this._for(new RL(o,s,r,n),()=>i(s))}forOf(e,r,n,i=Iu.varKinds.const){let o=this._scope.toName(e);if(this.opts.es5){let s=r instanceof Vr.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Vr._)`${s}.length`,a=>{this.var(o,(0,Vr._)`${s}[${a}]`),n(o)})}return this._for(new VP("of",i,o,r),()=>n(o))}forIn(e,r,n,i=this.opts.es5?Iu.varKinds.var:Iu.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Vr._)`Object.keys(${r})`,n);let o=this._scope.toName(e);return this._for(new VP("in",i,o,r),()=>n(o))}endFor(){return this._endBlockNode(Ug)}label(e){return this._leafNode(new EL(e))}break(e){return this._leafNode(new SL(e))}return(e){let r=new $S;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode($S)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let i=new IL;if(this._blockNode(i),this.code(e),r){let o=this.name("e");this._currNode=i.catch=new LS(o),r(o)}return n&&(this._currNode=i.finally=new US,this.code(n)),this._endBlockNode(LS,US)}throw(e){return this._leafNode(new ML(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Vr.nil,n,i){return this._blockNode(new qS(e,r,n)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(qS)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof ku))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};_r.CodeGen=kL;function Fg(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function HP(t,e){return e instanceof Vr._CodeOrName?Fg(t,e.names):t}function H1(t,e,r){if(t instanceof Vr.Name)return n(t);if(!i(t))return t;return new Vr._Code(t._items.reduce((o,s)=>(s instanceof Vr.Name&&(s=n(s)),s instanceof Vr._Code?o.push(...s._items):o.push(s),o),[]));function n(o){let s=r[o.str];return s===void 0||e[o.str]!==1?o:(delete e[o.str],s)}function i(o){return o instanceof Vr._Code&&o._items.some(s=>s instanceof Vr.Name&&e[s.str]===1&&r[s.str]!==void 0)}}function jXe(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function Iye(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Vr._)`!${OL(t)}`}_r.not=Iye;var qXe=kye(_r.operators.AND);function $Xe(...t){return t.reduce(qXe)}_r.and=$Xe;var LXe=kye(_r.operators.OR);function UXe(...t){return t.reduce(LXe)}_r.or=UXe;function kye(t){return(e,r)=>e===Vr.nil?r:r===Vr.nil?e:(0,Vr._)`${OL(e)} ${t} ${OL(r)}`}function OL(t){return t instanceof Vr.Name?t:(0,Vr._)`(${t})`}});var jr=H(xr=>{"use strict";_();Object.defineProperty(xr,"__esModule",{value:!0});xr.checkStrictMode=xr.getErrorPath=xr.Type=xr.useFunc=xr.setEvaluated=xr.evaluatedPropsToName=xr.mergeEvaluated=xr.eachItem=xr.unescapeJsonPointer=xr.escapeJsonPointer=xr.escapeFragment=xr.unescapeFragment=xr.schemaRefOrVal=xr.schemaHasRulesButRef=xr.schemaHasRules=xr.checkUnknownRules=xr.alwaysValidSchema=xr.toHash=void 0;var Bn=rr(),FXe=NS();function zXe(t){let e={};for(let r of t)e[r]=!0;return e}xr.toHash=zXe;function KXe(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(Dye(t,e),!Cye(e,t.self.RULES.all))}xr.alwaysValidSchema=KXe;function Dye(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let i=n.RULES.keywords;for(let o in e)i[o]||$ye(t,`unknown keyword: "${o}"`)}xr.checkUnknownRules=Dye;function Cye(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}xr.schemaHasRules=Cye;function WXe(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}xr.schemaHasRulesButRef=WXe;function GXe({topSchemaRef:t,schemaPath:e},r,n,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Bn._)`${r}`}return(0,Bn._)`${t}${e}${(0,Bn.getProperty)(n)}`}xr.schemaRefOrVal=GXe;function VXe(t){return Nye(decodeURIComponent(t))}xr.unescapeFragment=VXe;function HXe(t){return encodeURIComponent(BL(t))}xr.escapeFragment=HXe;function BL(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}xr.escapeJsonPointer=BL;function Nye(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}xr.unescapeJsonPointer=Nye;function ZXe(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}xr.eachItem=ZXe;function Oye({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(i,o,s,a)=>{let u=s===void 0?o:s instanceof Bn.Name?(o instanceof Bn.Name?t(i,o,s):e(i,o,s),s):o instanceof Bn.Name?(e(i,s,o),o):r(o,s);return a===Bn.Name&&!(u instanceof Bn.Name)?n(i,u):u}}xr.mergeEvaluated={props:Oye({mergeNames:(t,e,r)=>t.if((0,Bn._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Bn._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Bn._)`${r} || {}`).code((0,Bn._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Bn._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Bn._)`${r} || {}`),DL(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:jye}),items:Oye({mergeNames:(t,e,r)=>t.if((0,Bn._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Bn._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Bn._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Bn._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function jye(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,Bn._)`{}`);return e!==void 0&&DL(t,r,e),r}xr.evaluatedPropsToName=jye;function DL(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Bn._)`${e}${(0,Bn.getProperty)(n)}`,!0))}xr.setEvaluated=DL;var Bye={};function JXe(t,e){return t.scopeValue("func",{ref:e,code:Bye[e.code]||(Bye[e.code]=new FXe._Code(e.code))})}xr.useFunc=JXe;var qye;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(qye=xr.Type||(xr.Type={}));function YXe(t,e,r){if(t instanceof Bn.Name){let n=e===qye.Num;return r?n?(0,Bn._)`"[" + ${t} + "]"`:(0,Bn._)`"['" + ${t} + "']"`:n?(0,Bn._)`"/" + ${t}`:(0,Bn._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Bn.getProperty)(t).toString():"/"+BL(t)}xr.getErrorPath=YXe;function $ye(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}xr.checkStrictMode=$ye});var Tf=H(CL=>{"use strict";_();Object.defineProperty(CL,"__esModule",{value:!0});var oa=rr(),QXe={data:new oa.Name("data"),valCxt:new oa.Name("valCxt"),instancePath:new oa.Name("instancePath"),parentData:new oa.Name("parentData"),parentDataProperty:new oa.Name("parentDataProperty"),rootData:new oa.Name("rootData"),dynamicAnchors:new oa.Name("dynamicAnchors"),vErrors:new oa.Name("vErrors"),errors:new oa.Name("errors"),this:new oa.Name("this"),self:new oa.Name("self"),scope:new oa.Name("scope"),json:new oa.Name("json"),jsonPos:new oa.Name("jsonPos"),jsonLen:new oa.Name("jsonLen"),jsonPart:new oa.Name("jsonPart")};CL.default=QXe});var FS=H(sa=>{"use strict";_();Object.defineProperty(sa,"__esModule",{value:!0});sa.extendErrors=sa.resetErrorsCount=sa.reportExtraError=sa.reportError=sa.keyword$DataError=sa.keywordError=void 0;var Jr=rr(),JP=jr(),Ia=Tf();sa.keywordError={message:({keyword:t})=>(0,Jr.str)`must pass "${t}" keyword validation`};sa.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Jr.str)`"${t}" keyword must be ${e} ($data)`:(0,Jr.str)`"${t}" keyword is invalid ($data)`};function XXe(t,e=sa.keywordError,r,n){let{it:i}=t,{gen:o,compositeRule:s,allErrors:a}=i,u=Fye(t,e,r);n??(s||a)?Lye(o,u):Uye(i,(0,Jr._)`[${u}]`)}sa.reportError=XXe;function eet(t,e=sa.keywordError,r){let{it:n}=t,{gen:i,compositeRule:o,allErrors:s}=n,a=Fye(t,e,r);Lye(i,a),o||s||Uye(n,Ia.default.vErrors)}sa.reportExtraError=eet;function tet(t,e){t.assign(Ia.default.errors,e),t.if((0,Jr._)`${Ia.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Jr._)`${Ia.default.vErrors}.length`,e),()=>t.assign(Ia.default.vErrors,null)))}sa.resetErrorsCount=tet;function ret({gen:t,keyword:e,schemaValue:r,data:n,errsCount:i,it:o}){if(i===void 0)throw new Error("ajv implementation error");let s=t.name("err");t.forRange("i",i,Ia.default.errors,a=>{t.const(s,(0,Jr._)`${Ia.default.vErrors}[${a}]`),t.if((0,Jr._)`${s}.instancePath === undefined`,()=>t.assign((0,Jr._)`${s}.instancePath`,(0,Jr.strConcat)(Ia.default.instancePath,o.errorPath))),t.assign((0,Jr._)`${s}.schemaPath`,(0,Jr.str)`${o.errSchemaPath}/${e}`),o.opts.verbose&&(t.assign((0,Jr._)`${s}.schema`,r),t.assign((0,Jr._)`${s}.data`,n))})}sa.extendErrors=ret;function Lye(t,e){let r=t.const("err",e);t.if((0,Jr._)`${Ia.default.vErrors} === null`,()=>t.assign(Ia.default.vErrors,(0,Jr._)`[${r}]`),(0,Jr._)`${Ia.default.vErrors}.push(${r})`),t.code((0,Jr._)`${Ia.default.errors}++`)}function Uye(t,e){let{gen:r,validateName:n,schemaEnv:i}=t;i.$async?r.throw((0,Jr._)`new ${t.ValidationError}(${e})`):(r.assign((0,Jr._)`${n}.errors`,e),r.return(!1))}var zg={keyword:new Jr.Name("keyword"),schemaPath:new Jr.Name("schemaPath"),params:new Jr.Name("params"),propertyName:new Jr.Name("propertyName"),message:new Jr.Name("message"),schema:new Jr.Name("schema"),parentSchema:new Jr.Name("parentSchema")};function Fye(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,Jr._)`{}`:net(t,e,r)}function net(t,e,r={}){let{gen:n,it:i}=t,o=[iet(i,r),oet(t,r)];return set(t,e,o),n.object(...o)}function iet({errorPath:t},{instancePath:e}){let r=e?(0,Jr.str)`${t}${(0,JP.getErrorPath)(e,JP.Type.Str)}`:t;return[Ia.default.instancePath,(0,Jr.strConcat)(Ia.default.instancePath,r)]}function oet({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let i=n?e:(0,Jr.str)`${e}/${t}`;return r&&(i=(0,Jr.str)`${i}${(0,JP.getErrorPath)(r,JP.Type.Str)}`),[zg.schemaPath,i]}function set(t,{params:e,message:r},n){let{keyword:i,data:o,schemaValue:s,it:a}=t,{opts:u,propertyName:m,topSchemaRef:p,schemaPath:b}=a;n.push([zg.keyword,i],[zg.params,typeof e=="function"?e(t):e||(0,Jr._)`{}`]),u.messages&&n.push([zg.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([zg.schema,s],[zg.parentSchema,(0,Jr._)`${p}${b}`],[Ia.default.data,o]),m&&n.push([zg.propertyName,m])}});var Kye=H(Z1=>{"use strict";_();Object.defineProperty(Z1,"__esModule",{value:!0});Z1.boolOrEmptySchema=Z1.topBoolOrEmptySchema=void 0;var aet=FS(),cet=rr(),fet=Tf(),uet={message:"boolean schema is false"};function det(t){let{gen:e,schema:r,validateName:n}=t;r===!1?zye(t,!1):typeof r=="object"&&r.$async===!0?e.return(fet.default.data):(e.assign((0,cet._)`${n}.errors`,null),e.return(!0))}Z1.topBoolOrEmptySchema=det;function het(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),zye(t)):r.var(e,!0)}Z1.boolOrEmptySchema=het;function zye(t,e){let{gen:r,data:n}=t,i={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,aet.reportError)(i,uet,void 0,e)}});var NL=H(J1=>{"use strict";_();Object.defineProperty(J1,"__esModule",{value:!0});J1.getRules=J1.isJSONType=void 0;var pet=["string","number","integer","boolean","null","object","array"],met=new Set(pet);function yet(t){return typeof t=="string"&&met.has(t)}J1.isJSONType=yet;function get(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}J1.getRules=get});var jL=H(Z0=>{"use strict";_();Object.defineProperty(Z0,"__esModule",{value:!0});Z0.shouldUseRule=Z0.shouldUseGroup=Z0.schemaHasRulesForType=void 0;function bet({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&Wye(t,n)}Z0.schemaHasRulesForType=bet;function Wye(t,e){return e.rules.some(r=>Gye(t,r))}Z0.shouldUseGroup=Wye;function Gye(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Z0.shouldUseRule=Gye});var KS=H(Ps=>{"use strict";_();Object.defineProperty(Ps,"__esModule",{value:!0});Ps.reportTypeError=Ps.checkDataTypes=Ps.checkDataType=Ps.coerceAndCheckDataType=Ps.getJSONTypes=Ps.getSchemaTypes=Ps.DataType=void 0;var vet=NL(),wet=jL(),_et=FS(),sr=rr(),Vye=jr(),zS;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(zS=Ps.DataType||(Ps.DataType={}));function xet(t){let e=Hye(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Ps.getSchemaTypes=xet;function Hye(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(vet.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Ps.getJSONTypes=Hye;function Eet(t,e){let{gen:r,data:n,opts:i}=t,o=Met(e,i.coerceTypes),s=e.length>0&&!(o.length===0&&e.length===1&&(0,wet.schemaHasRulesForType)(t,e[0]));if(s){let a=$L(e,n,i.strictNumbers,zS.Wrong);r.if(a,()=>{o.length?Aet(t,e,o):LL(t)})}return s}Ps.coerceAndCheckDataType=Eet;var Zye=new Set(["string","number","integer","boolean","null"]);function Met(t,e){return e?t.filter(r=>Zye.has(r)||e==="array"&&r==="array"):[]}function Aet(t,e,r){let{gen:n,data:i,opts:o}=t,s=n.let("dataType",(0,sr._)`typeof ${i}`),a=n.let("coerced",(0,sr._)`undefined`);o.coerceTypes==="array"&&n.if((0,sr._)`${s} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>n.assign(i,(0,sr._)`${i}[0]`).assign(s,(0,sr._)`typeof ${i}`).if($L(e,i,o.strictNumbers),()=>n.assign(a,i))),n.if((0,sr._)`${a} !== undefined`);for(let m of r)(Zye.has(m)||m==="array"&&o.coerceTypes==="array")&&u(m);n.else(),LL(t),n.endIf(),n.if((0,sr._)`${a} !== undefined`,()=>{n.assign(i,a),Pet(t,a)});function u(m){switch(m){case"string":n.elseIf((0,sr._)`${s} == "number" || ${s} == "boolean"`).assign(a,(0,sr._)`"" + ${i}`).elseIf((0,sr._)`${i} === null`).assign(a,(0,sr._)`""`);return;case"number":n.elseIf((0,sr._)`${s} == "boolean" || ${i} === null
              || (${s} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,sr._)`+${i}`);return;case"integer":n.elseIf((0,sr._)`${s} === "boolean" || ${i} === null
              || (${s} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,sr._)`+${i}`);return;case"boolean":n.elseIf((0,sr._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,sr._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":n.elseIf((0,sr._)`${i} === "" || ${i} === 0 || ${i} === false`),n.assign(a,null);return;case"array":n.elseIf((0,sr._)`${s} === "string" || ${s} === "number"
              || ${s} === "boolean" || ${i} === null`).assign(a,(0,sr._)`[${i}]`)}}}function Pet({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,sr._)`${e} !== undefined`,()=>t.assign((0,sr._)`${e}[${r}]`,n))}function qL(t,e,r,n=zS.Correct){let i=n===zS.Correct?sr.operators.EQ:sr.operators.NEQ,o;switch(t){case"null":return(0,sr._)`${e} ${i} null`;case"array":o=(0,sr._)`Array.isArray(${e})`;break;case"object":o=(0,sr._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":o=s((0,sr._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":o=s();break;default:return(0,sr._)`typeof ${e} ${i} ${t}`}return n===zS.Correct?o:(0,sr.not)(o);function s(a=sr.nil){return(0,sr.and)((0,sr._)`typeof ${e} == "number"`,a,r?(0,sr._)`isFinite(${e})`:sr.nil)}}Ps.checkDataType=qL;function $L(t,e,r,n){if(t.length===1)return qL(t[0],e,r,n);let i,o=(0,Vye.toHash)(t);if(o.array&&o.object){let s=(0,sr._)`typeof ${e} != "object"`;i=o.null?s:(0,sr._)`!${e} || ${s}`,delete o.null,delete o.array,delete o.object}else i=sr.nil;o.number&&delete o.integer;for(let s in o)i=(0,sr.and)(i,qL(s,e,r,n));return i}Ps.checkDataTypes=$L;var Tet={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,sr._)`{type: ${t}}`:(0,sr._)`{type: ${e}}`};function LL(t){let e=Ret(t);(0,_et.reportError)(e,Tet)}Ps.reportTypeError=LL;function Ret(t){let{gen:e,data:r,schema:n}=t,i=(0,Vye.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:t}}});var Yye=H(YP=>{"use strict";_();Object.defineProperty(YP,"__esModule",{value:!0});YP.assignDefaults=void 0;var Y1=rr(),Iet=jr();function ket(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let i in r)Jye(t,i,r[i].default);else e==="array"&&Array.isArray(n)&&n.forEach((i,o)=>Jye(t,o,i.default))}YP.assignDefaults=ket;function Jye(t,e,r){let{gen:n,compositeRule:i,data:o,opts:s}=t;if(r===void 0)return;let a=(0,Y1._)`${o}${(0,Y1.getProperty)(e)}`;if(i){(0,Iet.checkStrictMode)(t,`default is ignored for: ${a}`);return}let u=(0,Y1._)`${a} === undefined`;s.useDefaults==="empty"&&(u=(0,Y1._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,Y1._)`${a} = ${(0,Y1.stringify)(r)}`)}});var Rf=H(Sn=>{"use strict";_();Object.defineProperty(Sn,"__esModule",{value:!0});Sn.validateUnion=Sn.validateArray=Sn.usePattern=Sn.callValidateCode=Sn.schemaProperties=Sn.allSchemaProperties=Sn.noPropertyInData=Sn.propertyInData=Sn.isOwnProperty=Sn.hasPropFunc=Sn.reportMissingProp=Sn.checkMissingProp=Sn.checkReportMissingProp=void 0;var Vn=rr(),UL=jr(),J0=Tf(),Oet=jr();function Bet(t,e){let{gen:r,data:n,it:i}=t;r.if(zL(r,n,e,i.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Vn._)`${e}`},!0),t.error()})}Sn.checkReportMissingProp=Bet;function Det({gen:t,data:e,it:{opts:r}},n,i){return(0,Vn.or)(...n.map(o=>(0,Vn.and)(zL(t,e,o,r.ownProperties),(0,Vn._)`${i} = ${o}`)))}Sn.checkMissingProp=Det;function Cet(t,e){t.setParams({missingProperty:e},!0),t.error()}Sn.reportMissingProp=Cet;function Qye(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Vn._)`Object.prototype.hasOwnProperty`})}Sn.hasPropFunc=Qye;function FL(t,e,r){return(0,Vn._)`${Qye(t)}.call(${e}, ${r})`}Sn.isOwnProperty=FL;function Net(t,e,r,n){let i=(0,Vn._)`${e}${(0,Vn.getProperty)(r)} !== undefined`;return n?(0,Vn._)`${i} && ${FL(t,e,r)}`:i}Sn.propertyInData=Net;function zL(t,e,r,n){let i=(0,Vn._)`${e}${(0,Vn.getProperty)(r)} === undefined`;return n?(0,Vn.or)(i,(0,Vn.not)(FL(t,e,r))):i}Sn.noPropertyInData=zL;function Xye(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Sn.allSchemaProperties=Xye;function jet(t,e){return Xye(e).filter(r=>!(0,UL.alwaysValidSchema)(t,e[r]))}Sn.schemaProperties=jet;function qet({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:o},it:s},a,u,m){let p=m?(0,Vn._)`${t}, ${e}, ${n}${i}`:e,b=[[J0.default.instancePath,(0,Vn.strConcat)(J0.default.instancePath,o)],[J0.default.parentData,s.parentData],[J0.default.parentDataProperty,s.parentDataProperty],[J0.default.rootData,J0.default.rootData]];s.opts.dynamicRef&&b.push([J0.default.dynamicAnchors,J0.default.dynamicAnchors]);let A=(0,Vn._)`${p}, ${r.object(...b)}`;return u!==Vn.nil?(0,Vn._)`${a}.call(${u}, ${A})`:(0,Vn._)`${a}(${A})`}Sn.callValidateCode=qet;var $et=(0,Vn._)`new RegExp`;function Let({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:i}=e.code,o=i(r,n);return t.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,Vn._)`${i.code==="new RegExp"?$et:(0,Oet.useFunc)(t,i)}(${r}, ${n})`})}Sn.usePattern=Let;function Uet(t){let{gen:e,data:r,keyword:n,it:i}=t,o=e.name("valid");if(i.allErrors){let a=e.let("valid",!0);return s(()=>e.assign(a,!1)),a}return e.var(o,!0),s(()=>e.break()),o;function s(a){let u=e.const("len",(0,Vn._)`${r}.length`);e.forRange("i",0,u,m=>{t.subschema({keyword:n,dataProp:m,dataPropType:UL.Type.Num},o),e.if((0,Vn.not)(o),a)})}}Sn.validateArray=Uet;function Fet(t){let{gen:e,schema:r,keyword:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,UL.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;let s=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((u,m)=>{let p=t.subschema({keyword:n,schemaProp:m,compositeRule:!0},a);e.assign(s,(0,Vn._)`${s} || ${a}`),t.mergeValidEvaluated(p,a)||e.if((0,Vn.not)(s))})),t.result(s,()=>t.reset(),()=>t.error(!0))}Sn.validateUnion=Fet});var rge=H(ad=>{"use strict";_();Object.defineProperty(ad,"__esModule",{value:!0});ad.validateKeywordUsage=ad.validSchemaType=ad.funcKeywordCode=ad.macroKeywordCode=void 0;var ka=rr(),Kg=Tf(),zet=Rf(),Ket=FS();function Wet(t,e){let{gen:r,keyword:n,schema:i,parentSchema:o,it:s}=t,a=e.macro.call(s.self,i,o,s),u=tge(r,n,a);s.opts.validateSchema!==!1&&s.self.validateSchema(a,!0);let m=r.name("valid");t.subschema({schema:a,schemaPath:ka.nil,errSchemaPath:`${s.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},m),t.pass(m,()=>t.error(!0))}ad.macroKeywordCode=Wet;function Get(t,e){var r;let{gen:n,keyword:i,schema:o,parentSchema:s,$data:a,it:u}=t;Het(u,e);let m=!a&&e.compile?e.compile.call(u.self,o,s,u):e.validate,p=tge(n,i,m),b=n.let("valid");t.block$data(b,A),t.ok((r=e.valid)!==null&&r!==void 0?r:b);function A(){if(e.errors===!1)P(),e.modifying&&ege(t),k(()=>t.error());else{let R=e.async?M():S();e.modifying&&ege(t),k(()=>Vet(t,R))}}function M(){let R=n.let("ruleErrs",null);return n.try(()=>P((0,ka._)`await `),B=>n.assign(b,!1).if((0,ka._)`${B} instanceof ${u.ValidationError}`,()=>n.assign(R,(0,ka._)`${B}.errors`),()=>n.throw(B))),R}function S(){let R=(0,ka._)`${p}.errors`;return n.assign(R,null),P(ka.nil),R}function P(R=e.async?(0,ka._)`await `:ka.nil){let B=u.opts.passContext?Kg.default.this:Kg.default.self,I=!("compile"in e&&!a||e.schema===!1);n.assign(b,(0,ka._)`${R}${(0,zet.callValidateCode)(t,p,B,I)}`,e.modifying)}function k(R){var B;n.if((0,ka.not)((B=e.valid)!==null&&B!==void 0?B:b),R)}}ad.funcKeywordCode=Get;function ege(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,ka._)`${n.parentData}[${n.parentDataProperty}]`))}function Vet(t,e){let{gen:r}=t;r.if((0,ka._)`Array.isArray(${e})`,()=>{r.assign(Kg.default.vErrors,(0,ka._)`${Kg.default.vErrors} === null ? ${e} : ${Kg.default.vErrors}.concat(${e})`).assign(Kg.default.errors,(0,ka._)`${Kg.default.vErrors}.length`),(0,Ket.extendErrors)(t)},()=>t.error())}function Het({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function tge(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,ka.stringify)(r)})}function Zet(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}ad.validSchemaType=Zet;function Jet({schema:t,opts:e,self:r,errSchemaPath:n},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");let s=i.dependencies;if(s?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${o}: ${s.join(",")}`);if(i.validateSchema&&!i.validateSchema(t[o])){let u=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(i.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}ad.validateKeywordUsage=Jet});var ige=H(Y0=>{"use strict";_();Object.defineProperty(Y0,"__esModule",{value:!0});Y0.extendSubschemaMode=Y0.extendSubschemaData=Y0.getSubschema=void 0;var cd=rr(),nge=jr();function Yet(t,{keyword:e,schemaProp:r,schema:n,schemaPath:i,errSchemaPath:o,topSchemaRef:s}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,cd._)`${t.schemaPath}${(0,cd.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,cd._)`${t.schemaPath}${(0,cd.getProperty)(e)}${(0,cd.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,nge.escapeFragment)(r)}`}}if(n!==void 0){if(i===void 0||o===void 0||s===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:i,topSchemaRef:s,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Y0.getSubschema=Yet;function Qet(t,e,{dataProp:r,dataPropType:n,data:i,dataTypes:o,propertyName:s}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:m,dataPathArr:p,opts:b}=e,A=a.let("data",(0,cd._)`${e.data}${(0,cd.getProperty)(r)}`,!0);u(A),t.errorPath=(0,cd.str)`${m}${(0,nge.getErrorPath)(r,n,b.jsPropertySyntax)}`,t.parentDataProperty=(0,cd._)`${r}`,t.dataPathArr=[...p,t.parentDataProperty]}if(i!==void 0){let m=i instanceof cd.Name?i:a.let("data",i,!0);u(m),s!==void 0&&(t.propertyName=s)}o&&(t.dataTypes=o);function u(m){t.data=m,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,m]}}Y0.extendSubschemaData=Qet;function Xet(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:o}){n!==void 0&&(t.compositeRule=n),i!==void 0&&(t.createErrors=i),o!==void 0&&(t.allErrors=o),t.jtdDiscriminator=e,t.jtdMetadata=r}Y0.extendSubschemaMode=Xet});var KL=H((ZLt,oge)=>{"use strict";_();oge.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var s=o[i];if(!t(e[s],r[s]))return!1}return!0}return e!==e&&r!==r}});var age=H((YLt,sge)=>{"use strict";_();var Q0=sge.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};QP(e,n,i,t,"",t)};Q0.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Q0.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Q0.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Q0.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function QP(t,e,r,n,i,o,s,a,u,m){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,i,o,s,a,u,m);for(var p in n){var b=n[p];if(Array.isArray(b)){if(p in Q0.arrayKeywords)for(var A=0;A<b.length;A++)QP(t,e,r,b[A],i+"/"+p+"/"+A,o,i,p,n,A)}else if(p in Q0.propsKeywords){if(b&&typeof b=="object")for(var M in b)QP(t,e,r,b[M],i+"/"+p+"/"+ett(M),o,i,p,n,M)}else(p in Q0.keywords||t.allKeys&&!(p in Q0.skipKeywords))&&QP(t,e,r,b,i+"/"+p,o,i,p,n)}r(n,i,o,s,a,u,m)}}function ett(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var WS=H(tc=>{"use strict";_();Object.defineProperty(tc,"__esModule",{value:!0});tc.getSchemaRefs=tc.resolveUrl=tc.normalizeId=tc._getFullPath=tc.getFullPath=tc.inlineRef=void 0;var ttt=jr(),rtt=KL(),ntt=age(),itt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function ott(t,e=!0){return typeof t=="boolean"?!0:e===!0?!WL(t):e?cge(t)<=e:!1}tc.inlineRef=ott;var stt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function WL(t){for(let e in t){if(stt.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(WL)||typeof r=="object"&&WL(r))return!0}return!1}function cge(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!itt.has(r)&&(typeof t[r]=="object"&&(0,ttt.eachItem)(t[r],n=>e+=cge(n)),e===1/0))return 1/0}return e}function fge(t,e="",r){r!==!1&&(e=Q1(e));let n=t.parse(e);return uge(t,n)}tc.getFullPath=fge;function uge(t,e){return t.serialize(e).split("#")[0]+"#"}tc._getFullPath=uge;var att=/#\/?$/;function Q1(t){return t?t.replace(att,""):""}tc.normalizeId=Q1;function ctt(t,e,r){return r=Q1(r),t.resolve(e,r)}tc.resolveUrl=ctt;var ftt=/^[a-z_][-a-z0-9._]*$/i;function utt(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,i=Q1(t[r]||e),o={"":i},s=fge(n,i,!1),a={},u=new Set;return ntt(t,{allKeys:!0},(b,A,M,S)=>{if(S===void 0)return;let P=s+A,k=o[S];typeof b[r]=="string"&&(k=R.call(this,b[r])),B.call(this,b.$anchor),B.call(this,b.$dynamicAnchor),o[A]=k;function R(I){let q=this.opts.uriResolver.resolve;if(I=Q1(k?q(k,I):I),u.has(I))throw p(I);u.add(I);let $=this.refs[I];return typeof $=="string"&&($=this.refs[$]),typeof $=="object"?m(b,$.schema,I):I!==Q1(P)&&(I[0]==="#"?(m(b,a[I],I),a[I]=b):this.refs[I]=P),I}function B(I){if(typeof I=="string"){if(!ftt.test(I))throw new Error(`invalid anchor "${I}"`);R.call(this,`#${I}`)}}}),a;function m(b,A,M){if(A!==void 0&&!rtt(b,A))throw p(M)}function p(b){return new Error(`reference "${b}" resolves to more than one schema`)}}tc.getSchemaRefs=utt});var HS=H(X0=>{"use strict";_();Object.defineProperty(X0,"__esModule",{value:!0});X0.getData=X0.KeywordCxt=X0.validateFunctionCode=void 0;var mge=Kye(),lge=KS(),VL=jL(),XP=KS(),ltt=Yye(),VS=rge(),GL=ige(),yt=rr(),Vt=Tf(),dtt=WS(),Wh=jr(),GS=FS();function htt(t){if(bge(t)&&(vge(t),gge(t))){ytt(t);return}yge(t,()=>(0,mge.topBoolOrEmptySchema)(t))}X0.validateFunctionCode=htt;function yge({gen:t,validateName:e,schema:r,schemaEnv:n,opts:i},o){i.code.es5?t.func(e,(0,yt._)`${Vt.default.data}, ${Vt.default.valCxt}`,n.$async,()=>{t.code((0,yt._)`"use strict"; ${dge(r,i)}`),mtt(t,i),t.code(o)}):t.func(e,(0,yt._)`${Vt.default.data}, ${ptt(i)}`,n.$async,()=>t.code(dge(r,i)).code(o))}function ptt(t){return(0,yt._)`{${Vt.default.instancePath}="", ${Vt.default.parentData}, ${Vt.default.parentDataProperty}, ${Vt.default.rootData}=${Vt.default.data}${t.dynamicRef?(0,yt._)`, ${Vt.default.dynamicAnchors}={}`:yt.nil}}={}`}function mtt(t,e){t.if(Vt.default.valCxt,()=>{t.var(Vt.default.instancePath,(0,yt._)`${Vt.default.valCxt}.${Vt.default.instancePath}`),t.var(Vt.default.parentData,(0,yt._)`${Vt.default.valCxt}.${Vt.default.parentData}`),t.var(Vt.default.parentDataProperty,(0,yt._)`${Vt.default.valCxt}.${Vt.default.parentDataProperty}`),t.var(Vt.default.rootData,(0,yt._)`${Vt.default.valCxt}.${Vt.default.rootData}`),e.dynamicRef&&t.var(Vt.default.dynamicAnchors,(0,yt._)`${Vt.default.valCxt}.${Vt.default.dynamicAnchors}`)},()=>{t.var(Vt.default.instancePath,(0,yt._)`""`),t.var(Vt.default.parentData,(0,yt._)`undefined`),t.var(Vt.default.parentDataProperty,(0,yt._)`undefined`),t.var(Vt.default.rootData,Vt.default.data),e.dynamicRef&&t.var(Vt.default.dynamicAnchors,(0,yt._)`{}`)})}function ytt(t){let{schema:e,opts:r,gen:n}=t;yge(t,()=>{r.$comment&&e.$comment&&_ge(t),_tt(t),n.let(Vt.default.vErrors,null),n.let(Vt.default.errors,0),r.unevaluated&&gtt(t),wge(t),Stt(t)})}function gtt(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,yt._)`${r}.evaluated`),e.if((0,yt._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,yt._)`${t.evaluated}.props`,(0,yt._)`undefined`)),e.if((0,yt._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,yt._)`${t.evaluated}.items`,(0,yt._)`undefined`))}function dge(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,yt._)`/*# sourceURL=${r} */`:yt.nil}function btt(t,e){if(bge(t)&&(vge(t),gge(t))){vtt(t,e);return}(0,mge.boolOrEmptySchema)(t,e)}function gge({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function bge(t){return typeof t.schema!="boolean"}function vtt(t,e){let{schema:r,gen:n,opts:i}=t;i.$comment&&r.$comment&&_ge(t),xtt(t),Ett(t);let o=n.const("_errs",Vt.default.errors);wge(t,o),n.var(e,(0,yt._)`${o} === ${Vt.default.errors}`)}function vge(t){(0,Wh.checkUnknownRules)(t),wtt(t)}function wge(t,e){if(t.opts.jtd)return hge(t,[],!1,e);let r=(0,lge.getSchemaTypes)(t.schema),n=(0,lge.coerceAndCheckDataType)(t,r);hge(t,r,!n,e)}function wtt(t){let{schema:e,errSchemaPath:r,opts:n,self:i}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,Wh.schemaHasRulesButRef)(e,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function _tt(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Wh.checkStrictMode)(t,"default is ignored in the schema root")}function xtt(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,dtt.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Ett(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function _ge({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:i}){let o=r.$comment;if(i.$comment===!0)t.code((0,yt._)`${Vt.default.self}.logger.log(${o})`);else if(typeof i.$comment=="function"){let s=(0,yt.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,yt._)`${Vt.default.self}.opts.$comment(${o}, ${s}, ${a}.schema)`)}}function Stt(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:i,opts:o}=t;r.$async?e.if((0,yt._)`${Vt.default.errors} === 0`,()=>e.return(Vt.default.data),()=>e.throw((0,yt._)`new ${i}(${Vt.default.vErrors})`)):(e.assign((0,yt._)`${n}.errors`,Vt.default.vErrors),o.unevaluated&&Mtt(t),e.return((0,yt._)`${Vt.default.errors} === 0`))}function Mtt({gen:t,evaluated:e,props:r,items:n}){r instanceof yt.Name&&t.assign((0,yt._)`${e}.props`,r),n instanceof yt.Name&&t.assign((0,yt._)`${e}.items`,n)}function hge(t,e,r,n){let{gen:i,schema:o,data:s,allErrors:a,opts:u,self:m}=t,{RULES:p}=m;if(o.$ref&&(u.ignoreKeywordsWithRef||!(0,Wh.schemaHasRulesButRef)(o,p))){i.block(()=>Ege(t,"$ref",p.all.$ref.definition));return}u.jtd||Att(t,e),i.block(()=>{for(let A of p.rules)b(A);b(p.post)});function b(A){(0,VL.shouldUseGroup)(o,A)&&(A.type?(i.if((0,XP.checkDataType)(A.type,s,u.strictNumbers)),pge(t,A),e.length===1&&e[0]===A.type&&r&&(i.else(),(0,XP.reportTypeError)(t)),i.endIf()):pge(t,A),a||i.if((0,yt._)`${Vt.default.errors} === ${n||0}`))}}function pge(t,e){let{gen:r,schema:n,opts:{useDefaults:i}}=t;i&&(0,ltt.assignDefaults)(t,e.type),r.block(()=>{for(let o of e.rules)(0,VL.shouldUseRule)(n,o)&&Ege(t,o.keyword,o.definition,e.type)})}function Att(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Ptt(t,e),t.opts.allowUnionTypes||Ttt(t,e),Rtt(t,t.dataTypes))}function Ptt(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{xge(t.dataTypes,r)||HL(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),ktt(t,e)}}function Ttt(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&HL(t,"use allowUnionTypes to allow union type keyword")}function Rtt(t,e){let r=t.self.RULES.all;for(let n in r){let i=r[n];if(typeof i=="object"&&(0,VL.shouldUseRule)(t.schema,i)){let{type:o}=i.definition;o.length&&!o.some(s=>Itt(e,s))&&HL(t,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function Itt(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function xge(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function ktt(t,e){let r=[];for(let n of t.dataTypes)xge(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function HL(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Wh.checkStrictMode)(t,e,t.opts.strictTypes)}var eT=class{constructor(e,r,n){if((0,VS.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Wh.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",Sge(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,VS.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Vt.default.errors))}result(e,r,n){this.failResult((0,yt.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,yt.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,yt._)`${r} !== undefined && (${(0,yt.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?GS.reportExtraError:GS.reportError)(this,this.def.error,r)}$dataError(){(0,GS.reportError)(this,this.def.$dataError||GS.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,GS.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=yt.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=yt.nil,r=yt.nil){if(!this.$data)return;let{gen:n,schemaCode:i,schemaType:o,def:s}=this;n.if((0,yt.or)((0,yt._)`${i} === undefined`,r)),e!==yt.nil&&n.assign(e,!0),(o.length||s.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==yt.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:i,it:o}=this;return(0,yt.or)(s(),a());function s(){if(n.length){if(!(r instanceof yt.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,yt._)`${(0,XP.checkDataTypes)(u,r,o.opts.strictNumbers,XP.DataType.Wrong)}`}return yt.nil}function a(){if(i.validateSchema){let u=e.scopeValue("validate$data",{ref:i.validateSchema});return(0,yt._)`!${u}(${r})`}return yt.nil}}subschema(e,r){let n=(0,GL.getSubschema)(this.it,e);(0,GL.extendSubschemaData)(n,this.it,e),(0,GL.extendSubschemaMode)(n,e);let i={...this.it,...n,items:void 0,props:void 0};return btt(i,r),i}mergeEvaluated(e,r){let{it:n,gen:i}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=Wh.mergeEvaluated.props(i,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=Wh.mergeEvaluated.items(i,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:i}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return i.if(r,()=>this.mergeEvaluated(e,yt.Name)),!0}};X0.KeywordCxt=eT;function Ege(t,e,r,n){let i=new eT(t,r,e);"code"in r?r.code(i,n):i.$data&&r.validate?(0,VS.funcKeywordCode)(i,r):"macro"in r?(0,VS.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,VS.funcKeywordCode)(i,r)}var Ott=/^\/(?:[^~]|~0|~1)*$/,Btt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Sge(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let i,o;if(t==="")return Vt.default.rootData;if(t[0]==="/"){if(!Ott.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);i=t,o=Vt.default.rootData}else{let m=Btt.exec(t);if(!m)throw new Error(`Invalid JSON-pointer: ${t}`);let p=+m[1];if(i=m[2],i==="#"){if(p>=e)throw new Error(u("property/index",p));return n[e-p]}if(p>e)throw new Error(u("data",p));if(o=r[e-p],!i)return o}let s=o,a=i.split("/");for(let m of a)m&&(o=(0,yt._)`${o}${(0,yt.getProperty)((0,Wh.unescapeJsonPointer)(m))}`,s=(0,yt._)`${s} && ${o}`);return s;function u(m,p){return`Cannot access ${m} ${p} levels up, current level is ${e}`}}X0.getData=Sge});var tT=H(JL=>{"use strict";_();Object.defineProperty(JL,"__esModule",{value:!0});var ZL=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};JL.default=ZL});var rT=H(XL=>{"use strict";_();Object.defineProperty(XL,"__esModule",{value:!0});var YL=WS(),QL=class extends Error{constructor(e,r,n,i){super(i||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,YL.resolveUrl)(e,r,n),this.missingSchema=(0,YL.normalizeId)((0,YL.getFullPath)(e,this.missingRef))}};XL.default=QL});var ZS=H(If=>{"use strict";_();Object.defineProperty(If,"__esModule",{value:!0});If.resolveSchema=If.getCompilingSchema=If.resolveRef=If.compileSchema=If.SchemaEnv=void 0;var Ou=rr(),Dtt=tT(),Wg=Tf(),Bu=WS(),Mge=jr(),Ctt=HS(),X1=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Bu.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};If.SchemaEnv=X1;function tU(t){let e=Age.call(this,t);if(e)return e;let r=(0,Bu.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:i}=this.opts.code,{ownProperties:o}=this.opts,s=new Ou.CodeGen(this.scope,{es5:n,lines:i,ownProperties:o}),a;t.$async&&(a=s.scopeValue("Error",{ref:Dtt.default,code:(0,Ou._)`require("ajv/dist/runtime/validation_error").default`}));let u=s.scopeName("validate");t.validateName=u;let m={gen:s,allErrors:this.opts.allErrors,data:Wg.default.data,parentData:Wg.default.parentData,parentDataProperty:Wg.default.parentDataProperty,dataNames:[Wg.default.data],dataPathArr:[Ou.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:s.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Ou.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Ou.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Ou._)`""`,opts:this.opts,self:this},p;try{this._compilations.add(t),(0,Ctt.validateFunctionCode)(m),s.optimize(this.opts.code.optimize);let b=s.toString();p=`${s.scopeRefs(Wg.default.scope)}return ${b}`,this.opts.code.process&&(p=this.opts.code.process(p,t));let M=new Function(`${Wg.default.self}`,`${Wg.default.scope}`,p)(this,this.scope.get());if(this.scope.value(u,{ref:M}),M.errors=null,M.schema=t.schema,M.schemaEnv=t,t.$async&&(M.$async=!0),this.opts.code.source===!0&&(M.source={validateName:u,validateCode:b,scopeValues:s._values}),this.opts.unevaluated){let{props:S,items:P}=m;M.evaluated={props:S instanceof Ou.Name?void 0:S,items:P instanceof Ou.Name?void 0:P,dynamicProps:S instanceof Ou.Name,dynamicItems:P instanceof Ou.Name},M.source&&(M.source.evaluated=(0,Ou.stringify)(M.evaluated))}return t.validate=M,t}catch(b){throw delete t.validate,delete t.validateName,p&&this.logger.error("Error compiling schema, function code:",p),b}finally{this._compilations.delete(t)}}If.compileSchema=tU;function Ntt(t,e,r){var n;r=(0,Bu.resolveUrl)(this.opts.uriResolver,e,r);let i=t.refs[r];if(i)return i;let o=$tt.call(this,t,r);if(o===void 0){let s=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;s&&(o=new X1({schema:s,schemaId:a,root:t,baseId:e}))}if(o!==void 0)return t.refs[r]=jtt.call(this,o)}If.resolveRef=Ntt;function jtt(t){return(0,Bu.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:tU.call(this,t)}function Age(t){for(let e of this._compilations)if(qtt(e,t))return e}If.getCompilingSchema=Age;function qtt(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function $tt(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||nT.call(this,t,e)}function nT(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Bu._getFullPath)(this.opts.uriResolver,r),i=(0,Bu.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===i)return eU.call(this,r,t);let o=(0,Bu.normalizeId)(n),s=this.refs[o]||this.schemas[o];if(typeof s=="string"){let a=nT.call(this,t,s);return typeof a?.schema!="object"?void 0:eU.call(this,r,a)}if(typeof s?.schema=="object"){if(s.validate||tU.call(this,s),o===(0,Bu.normalizeId)(e)){let{schema:a}=s,{schemaId:u}=this.opts,m=a[u];return m&&(i=(0,Bu.resolveUrl)(this.opts.uriResolver,i,m)),new X1({schema:a,schemaId:u,root:t,baseId:i})}return eU.call(this,r,s)}}If.resolveSchema=nT;var Ltt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function eU(t,{baseId:e,schema:r,root:n}){var i;if(((i=t.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,Mge.unescapeFragment)(a)];if(u===void 0)return;r=u;let m=typeof r=="object"&&r[this.opts.schemaId];!Ltt.has(a)&&m&&(e=(0,Bu.resolveUrl)(this.opts.uriResolver,e,m))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Mge.schemaHasRulesButRef)(r,this.RULES)){let a=(0,Bu.resolveUrl)(this.opts.uriResolver,e,r.$ref);o=nT.call(this,n,a)}let{schemaId:s}=this.opts;if(o=o||new X1({schema:r,schemaId:s,root:n,baseId:e}),o.schema!==o.root.schema)return o}});var Pge=H((fUt,Utt)=>{Utt.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var rU=H((iT,Tge)=>{_();(function(t,e){typeof iT=="object"&&typeof Tge<"u"?e(iT):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(iT,function(t){"use strict";function e(){for(var ee=arguments.length,Y=Array(ee),ue=0;ue<ee;ue++)Y[ue]=arguments[ue];if(Y.length>1){Y[0]=Y[0].slice(0,-1);for(var re=Y.length-1,ne=1;ne<re;++ne)Y[ne]=Y[ne].slice(1,-1);return Y[re]=Y[re].slice(1),Y.join("")}else return Y[0]}function r(ee){return"(?:"+ee+")"}function n(ee){return ee===void 0?"undefined":ee===null?"null":Object.prototype.toString.call(ee).split(" ").pop().split("]").shift().toLowerCase()}function i(ee){return ee.toUpperCase()}function o(ee){return ee!=null?ee instanceof Array?ee:typeof ee.length!="number"||ee.split||ee.setInterval||ee.call?[ee]:Array.prototype.slice.call(ee):[]}function s(ee,Y){var ue=ee;if(Y)for(var re in Y)ue[re]=Y[re];return ue}function a(ee){var Y="[A-Za-z]",ue="[\\x0D]",re="[0-9]",ne="[\\x22]",ze=e(re,"[A-Fa-f]"),ge="[\\x0A]",ve="[\\x20]",gt=r(r("%[EFef]"+ze+"%"+ze+ze+"%"+ze+ze)+"|"+r("%[89A-Fa-f]"+ze+"%"+ze+ze)+"|"+r("%"+ze+ze)),ot="[\\:\\/\\?\\#\\[\\]\\@]",Ge="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Pt=e(ot,Ge),Lt=ee?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",St=ee?"[\\uE000-\\uF8FF]":"[]",pt=e(Y,re,"[\\-\\.\\_\\~]",Lt),Tt=r(Y+e(Y,re,"[\\+\\-\\.]")+"*"),vt=r(r(gt+"|"+e(pt,Ge,"[\\:]"))+"*"),zr=r(r("25[0-5]")+"|"+r("2[0-4]"+re)+"|"+r("1"+re+re)+"|"+r("[1-9]"+re)+"|"+re),ir=r(r("25[0-5]")+"|"+r("2[0-4]"+re)+"|"+r("1"+re+re)+"|"+r("0?[1-9]"+re)+"|0?0?"+re),ur=r(ir+"\\."+ir+"\\."+ir+"\\."+ir),wt=r(ze+"{1,4}"),or=r(r(wt+"\\:"+wt)+"|"+ur),lr=r(r(wt+"\\:")+"{6}"+or),Mr=r("\\:\\:"+r(wt+"\\:")+"{5}"+or),Kr=r(r(wt)+"?\\:\\:"+r(wt+"\\:")+"{4}"+or),kr=r(r(r(wt+"\\:")+"{0,1}"+wt)+"?\\:\\:"+r(wt+"\\:")+"{3}"+or),Yr=r(r(r(wt+"\\:")+"{0,2}"+wt)+"?\\:\\:"+r(wt+"\\:")+"{2}"+or),Ep=r(r(r(wt+"\\:")+"{0,3}"+wt)+"?\\:\\:"+wt+"\\:"+or),Sp=r(r(r(wt+"\\:")+"{0,4}"+wt)+"?\\:\\:"+or),tl=r(r(r(wt+"\\:")+"{0,5}"+wt)+"?\\:\\:"+wt),Vb=r(r(r(wt+"\\:")+"{0,6}"+wt)+"?\\:\\:"),jd=r([lr,Mr,Kr,kr,Yr,Ep,Sp,tl,Vb].join("|")),Hb=r(r(pt+"|"+gt)+"+"),hk=r(jd+"\\%25"+Hb),Cm=r(jd+r("\\%25|\\%(?!"+ze+"{2})")+Hb),E6e=r("[vV]"+ze+"+\\."+e(pt,Ge,"[\\:]")+"+"),S6e=r("\\["+r(Cm+"|"+jd+"|"+E6e)+"\\]"),YG=r(r(gt+"|"+e(pt,Ge))+"*"),l_=r(S6e+"|"+ur+"(?!"+YG+")|"+YG),d_=r(re+"*"),QG=r(r(vt+"@")+"?"+l_+r("\\:"+d_)+"?"),h_=r(gt+"|"+e(pt,Ge,"[\\:\\@]")),M6e=r(h_+"*"),XG=r(h_+"+"),A6e=r(r(gt+"|"+e(pt,Ge,"[\\@]"))+"+"),qd=r(r("\\/"+M6e)+"*"),Zb=r("\\/"+r(XG+qd)+"?"),pk=r(A6e+qd),J6=r(XG+qd),Jb="(?!"+h_+")",fvt=r(qd+"|"+Zb+"|"+pk+"|"+J6+"|"+Jb),Yb=r(r(h_+"|"+e("[\\/\\?]",St))+"*"),p_=r(r(h_+"|[\\/\\?]")+"*"),eV=r(r("\\/\\/"+QG+qd)+"|"+Zb+"|"+J6+"|"+Jb),P6e=r(Tt+"\\:"+eV+r("\\?"+Yb)+"?"+r("\\#"+p_)+"?"),T6e=r(r("\\/\\/"+QG+qd)+"|"+Zb+"|"+pk+"|"+Jb),R6e=r(T6e+r("\\?"+Yb)+"?"+r("\\#"+p_)+"?"),uvt=r(P6e+"|"+R6e),qe=r(Tt+"\\:"+eV+r("\\?"+Yb)+"?"),lvt="^("+Tt+")\\:"+r(r("\\/\\/("+r("("+vt+")@")+"?("+l_+")"+r("\\:("+d_+")")+"?)")+"?("+qd+"|"+Zb+"|"+J6+"|"+Jb+")")+r("\\?("+Yb+")")+"?"+r("\\#("+p_+")")+"?$",dvt="^(){0}"+r(r("\\/\\/("+r("("+vt+")@")+"?("+l_+")"+r("\\:("+d_+")")+"?)")+"?("+qd+"|"+Zb+"|"+pk+"|"+Jb+")")+r("\\?("+Yb+")")+"?"+r("\\#("+p_+")")+"?$",hvt="^("+Tt+")\\:"+r(r("\\/\\/("+r("("+vt+")@")+"?("+l_+")"+r("\\:("+d_+")")+"?)")+"?("+qd+"|"+Zb+"|"+J6+"|"+Jb+")")+r("\\?("+Yb+")")+"?$",pvt="^"+r("\\#("+p_+")")+"?$",mvt="^"+r("("+vt+")@")+"?("+l_+")"+r("\\:("+d_+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",Y,re,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",pt,Ge),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",pt,Ge),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",pt,Ge),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",pt,Ge),"g"),NOT_QUERY:new RegExp(e("[^\\%]",pt,Ge,"[\\:\\@\\/\\?]",St),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",pt,Ge,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",pt,Ge),"g"),UNRESERVED:new RegExp(pt,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",pt,Pt),"g"),PCT_ENCODED:new RegExp(gt,"g"),IPV4ADDRESS:new RegExp("^("+ur+")$"),IPV6ADDRESS:new RegExp("^\\[?("+jd+")"+r(r("\\%25|\\%(?!"+ze+"{2})")+"("+Hb+")")+"?\\]?$")}}var u=a(!1),m=a(!0),p=function(){function ee(Y,ue){var re=[],ne=!0,ze=!1,ge=void 0;try{for(var ve=Y[Symbol.iterator](),gt;!(ne=(gt=ve.next()).done)&&(re.push(gt.value),!(ue&&re.length===ue));ne=!0);}catch(ot){ze=!0,ge=ot}finally{try{!ne&&ve.return&&ve.return()}finally{if(ze)throw ge}}return re}return function(Y,ue){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return ee(Y,ue);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(ee){if(Array.isArray(ee)){for(var Y=0,ue=Array(ee.length);Y<ee.length;Y++)ue[Y]=ee[Y];return ue}else return Array.from(ee)},A=2147483647,M=36,S=1,P=26,k=38,R=700,B=72,I=128,q="-",$=/^xn--/,U=/[^\0-\x7E]/,F=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},W=M-S,E=Math.floor,c=String.fromCharCode;function l(ee){throw new RangeError(L[ee])}function y(ee,Y){for(var ue=[],re=ee.length;re--;)ue[re]=Y(ee[re]);return ue}function d(ee,Y){var ue=ee.split("@"),re="";ue.length>1&&(re=ue[0]+"@",ee=ue[1]),ee=ee.replace(F,".");var ne=ee.split("."),ze=y(ne,Y).join(".");return re+ze}function h(ee){for(var Y=[],ue=0,re=ee.length;ue<re;){var ne=ee.charCodeAt(ue++);if(ne>=55296&&ne<=56319&&ue<re){var ze=ee.charCodeAt(ue++);(ze&64512)==56320?Y.push(((ne&1023)<<10)+(ze&1023)+65536):(Y.push(ne),ue--)}else Y.push(ne)}return Y}var v=function(Y){return String.fromCodePoint.apply(String,b(Y))},x=function(Y){return Y-48<10?Y-22:Y-65<26?Y-65:Y-97<26?Y-97:M},g=function(Y,ue){return Y+22+75*(Y<26)-((ue!=0)<<5)},f=function(Y,ue,re){var ne=0;for(Y=re?E(Y/R):Y>>1,Y+=E(Y/ue);Y>W*P>>1;ne+=M)Y=E(Y/W);return E(ne+(W+1)*Y/(Y+k))},w=function(Y){var ue=[],re=Y.length,ne=0,ze=I,ge=B,ve=Y.lastIndexOf(q);ve<0&&(ve=0);for(var gt=0;gt<ve;++gt)Y.charCodeAt(gt)>=128&&l("not-basic"),ue.push(Y.charCodeAt(gt));for(var ot=ve>0?ve+1:0;ot<re;){for(var Ge=ne,Pt=1,Lt=M;;Lt+=M){ot>=re&&l("invalid-input");var St=x(Y.charCodeAt(ot++));(St>=M||St>E((A-ne)/Pt))&&l("overflow"),ne+=St*Pt;var pt=Lt<=ge?S:Lt>=ge+P?P:Lt-ge;if(St<pt)break;var Tt=M-pt;Pt>E(A/Tt)&&l("overflow"),Pt*=Tt}var vt=ue.length+1;ge=f(ne-Ge,vt,Ge==0),E(ne/vt)>A-ze&&l("overflow"),ze+=E(ne/vt),ne%=vt,ue.splice(ne++,0,ze)}return String.fromCodePoint.apply(String,ue)},D=function(Y){var ue=[];Y=h(Y);var re=Y.length,ne=I,ze=0,ge=B,ve=!0,gt=!1,ot=void 0;try{for(var Ge=Y[Symbol.iterator](),Pt;!(ve=(Pt=Ge.next()).done);ve=!0){var Lt=Pt.value;Lt<128&&ue.push(c(Lt))}}catch(Cm){gt=!0,ot=Cm}finally{try{!ve&&Ge.return&&Ge.return()}finally{if(gt)throw ot}}var St=ue.length,pt=St;for(St&&ue.push(q);pt<re;){var Tt=A,vt=!0,zr=!1,ir=void 0;try{for(var ur=Y[Symbol.iterator](),wt;!(vt=(wt=ur.next()).done);vt=!0){var or=wt.value;or>=ne&&or<Tt&&(Tt=or)}}catch(Cm){zr=!0,ir=Cm}finally{try{!vt&&ur.return&&ur.return()}finally{if(zr)throw ir}}var lr=pt+1;Tt-ne>E((A-ze)/lr)&&l("overflow"),ze+=(Tt-ne)*lr,ne=Tt;var Mr=!0,Kr=!1,kr=void 0;try{for(var Yr=Y[Symbol.iterator](),Ep;!(Mr=(Ep=Yr.next()).done);Mr=!0){var Sp=Ep.value;if(Sp<ne&&++ze>A&&l("overflow"),Sp==ne){for(var tl=ze,Vb=M;;Vb+=M){var jd=Vb<=ge?S:Vb>=ge+P?P:Vb-ge;if(tl<jd)break;var Hb=tl-jd,hk=M-jd;ue.push(c(g(jd+Hb%hk,0))),tl=E(Hb/hk)}ue.push(c(g(tl,0))),ge=f(ze,lr,pt==St),ze=0,++pt}}}catch(Cm){Kr=!0,kr=Cm}finally{try{!Mr&&Yr.return&&Yr.return()}finally{if(Kr)throw kr}}++ze,++ne}return ue.join("")},T=function(Y){return d(Y,function(ue){return $.test(ue)?w(ue.slice(4).toLowerCase()):ue})},C=function(Y){return d(Y,function(ue){return U.test(ue)?"xn--"+D(ue):ue})},z={version:"2.1.0",ucs2:{decode:h,encode:v},decode:w,encode:D,toASCII:C,toUnicode:T},G={};function V(ee){var Y=ee.charCodeAt(0),ue=void 0;return Y<16?ue="%0"+Y.toString(16).toUpperCase():Y<128?ue="%"+Y.toString(16).toUpperCase():Y<2048?ue="%"+(Y>>6|192).toString(16).toUpperCase()+"%"+(Y&63|128).toString(16).toUpperCase():ue="%"+(Y>>12|224).toString(16).toUpperCase()+"%"+(Y>>6&63|128).toString(16).toUpperCase()+"%"+(Y&63|128).toString(16).toUpperCase(),ue}function Z(ee){for(var Y="",ue=0,re=ee.length;ue<re;){var ne=parseInt(ee.substr(ue+1,2),16);if(ne<128)Y+=String.fromCharCode(ne),ue+=3;else if(ne>=194&&ne<224){if(re-ue>=6){var ze=parseInt(ee.substr(ue+4,2),16);Y+=String.fromCharCode((ne&31)<<6|ze&63)}else Y+=ee.substr(ue,6);ue+=6}else if(ne>=224){if(re-ue>=9){var ge=parseInt(ee.substr(ue+4,2),16),ve=parseInt(ee.substr(ue+7,2),16);Y+=String.fromCharCode((ne&15)<<12|(ge&63)<<6|ve&63)}else Y+=ee.substr(ue,9);ue+=9}else Y+=ee.substr(ue,3),ue+=3}return Y}function J(ee,Y){function ue(re){var ne=Z(re);return ne.match(Y.UNRESERVED)?ne:re}return ee.scheme&&(ee.scheme=String(ee.scheme).replace(Y.PCT_ENCODED,ue).toLowerCase().replace(Y.NOT_SCHEME,"")),ee.userinfo!==void 0&&(ee.userinfo=String(ee.userinfo).replace(Y.PCT_ENCODED,ue).replace(Y.NOT_USERINFO,V).replace(Y.PCT_ENCODED,i)),ee.host!==void 0&&(ee.host=String(ee.host).replace(Y.PCT_ENCODED,ue).toLowerCase().replace(Y.NOT_HOST,V).replace(Y.PCT_ENCODED,i)),ee.path!==void 0&&(ee.path=String(ee.path).replace(Y.PCT_ENCODED,ue).replace(ee.scheme?Y.NOT_PATH:Y.NOT_PATH_NOSCHEME,V).replace(Y.PCT_ENCODED,i)),ee.query!==void 0&&(ee.query=String(ee.query).replace(Y.PCT_ENCODED,ue).replace(Y.NOT_QUERY,V).replace(Y.PCT_ENCODED,i)),ee.fragment!==void 0&&(ee.fragment=String(ee.fragment).replace(Y.PCT_ENCODED,ue).replace(Y.NOT_FRAGMENT,V).replace(Y.PCT_ENCODED,i)),ee}function X(ee){return ee.replace(/^0*(.*)/,"$1")||"0"}function se(ee,Y){var ue=ee.match(Y.IPV4ADDRESS)||[],re=p(ue,2),ne=re[1];return ne?ne.split(".").map(X).join("."):ee}function Q(ee,Y){var ue=ee.match(Y.IPV6ADDRESS)||[],re=p(ue,3),ne=re[1],ze=re[2];if(ne){for(var ge=ne.toLowerCase().split("::").reverse(),ve=p(ge,2),gt=ve[0],ot=ve[1],Ge=ot?ot.split(":").map(X):[],Pt=gt.split(":").map(X),Lt=Y.IPV4ADDRESS.test(Pt[Pt.length-1]),St=Lt?7:8,pt=Pt.length-St,Tt=Array(St),vt=0;vt<St;++vt)Tt[vt]=Ge[vt]||Pt[pt+vt]||"";Lt&&(Tt[St-1]=se(Tt[St-1],Y));var zr=Tt.reduce(function(lr,Mr,Kr){if(!Mr||Mr==="0"){var kr=lr[lr.length-1];kr&&kr.index+kr.length===Kr?kr.length++:lr.push({index:Kr,length:1})}return lr},[]),ir=zr.sort(function(lr,Mr){return Mr.length-lr.length})[0],ur=void 0;if(ir&&ir.length>1){var wt=Tt.slice(0,ir.index),or=Tt.slice(ir.index+ir.length);ur=wt.join(":")+"::"+or.join(":")}else ur=Tt.join(":");return ze&&(ur+="%"+ze),ur}else return ee}var te=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,de="".match(/(){0}/)[1]===void 0;function ie(ee){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue={},re=Y.iri!==!1?m:u;Y.reference==="suffix"&&(ee=(Y.scheme?Y.scheme+":":"")+"//"+ee);var ne=ee.match(te);if(ne){de?(ue.scheme=ne[1],ue.userinfo=ne[3],ue.host=ne[4],ue.port=parseInt(ne[5],10),ue.path=ne[6]||"",ue.query=ne[7],ue.fragment=ne[8],isNaN(ue.port)&&(ue.port=ne[5])):(ue.scheme=ne[1]||void 0,ue.userinfo=ee.indexOf("@")!==-1?ne[3]:void 0,ue.host=ee.indexOf("//")!==-1?ne[4]:void 0,ue.port=parseInt(ne[5],10),ue.path=ne[6]||"",ue.query=ee.indexOf("?")!==-1?ne[7]:void 0,ue.fragment=ee.indexOf("#")!==-1?ne[8]:void 0,isNaN(ue.port)&&(ue.port=ee.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?ne[4]:void 0)),ue.host&&(ue.host=Q(se(ue.host,re),re)),ue.scheme===void 0&&ue.userinfo===void 0&&ue.host===void 0&&ue.port===void 0&&!ue.path&&ue.query===void 0?ue.reference="same-document":ue.scheme===void 0?ue.reference="relative":ue.fragment===void 0?ue.reference="absolute":ue.reference="uri",Y.reference&&Y.reference!=="suffix"&&Y.reference!==ue.reference&&(ue.error=ue.error||"URI is not a "+Y.reference+" reference.");var ze=G[(Y.scheme||ue.scheme||"").toLowerCase()];if(!Y.unicodeSupport&&(!ze||!ze.unicodeSupport)){if(ue.host&&(Y.domainHost||ze&&ze.domainHost))try{ue.host=z.toASCII(ue.host.replace(re.PCT_ENCODED,Z).toLowerCase())}catch(ge){ue.error=ue.error||"Host's domain name can not be converted to ASCII via punycode: "+ge}J(ue,u)}else J(ue,re);ze&&ze.parse&&ze.parse(ue,Y)}else ue.error=ue.error||"URI can not be parsed.";return ue}function ae(ee,Y){var ue=Y.iri!==!1?m:u,re=[];return ee.userinfo!==void 0&&(re.push(ee.userinfo),re.push("@")),ee.host!==void 0&&re.push(Q(se(String(ee.host),ue),ue).replace(ue.IPV6ADDRESS,function(ne,ze,ge){return"["+ze+(ge?"%25"+ge:"")+"]"})),(typeof ee.port=="number"||typeof ee.port=="string")&&(re.push(":"),re.push(String(ee.port))),re.length?re.join(""):void 0}var fe=/^\.\.?\//,oe=/^\/\.(\/|$)/,ce=/^\/\.\.(\/|$)/,Ke=/^\/?(?:.|\n)*?(?=\/|$)/;function pe(ee){for(var Y=[];ee.length;)if(ee.match(fe))ee=ee.replace(fe,"");else if(ee.match(oe))ee=ee.replace(oe,"/");else if(ee.match(ce))ee=ee.replace(ce,"/"),Y.pop();else if(ee==="."||ee==="..")ee="";else{var ue=ee.match(Ke);if(ue){var re=ue[0];ee=ee.slice(re.length),Y.push(re)}else throw new Error("Unexpected dot segment condition")}return Y.join("")}function Me(ee){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue=Y.iri?m:u,re=[],ne=G[(Y.scheme||ee.scheme||"").toLowerCase()];if(ne&&ne.serialize&&ne.serialize(ee,Y),ee.host&&!ue.IPV6ADDRESS.test(ee.host)){if(Y.domainHost||ne&&ne.domainHost)try{ee.host=Y.iri?z.toUnicode(ee.host):z.toASCII(ee.host.replace(ue.PCT_ENCODED,Z).toLowerCase())}catch(ve){ee.error=ee.error||"Host's domain name can not be converted to "+(Y.iri?"Unicode":"ASCII")+" via punycode: "+ve}}J(ee,ue),Y.reference!=="suffix"&&ee.scheme&&(re.push(ee.scheme),re.push(":"));var ze=ae(ee,Y);if(ze!==void 0&&(Y.reference!=="suffix"&&re.push("//"),re.push(ze),ee.path&&ee.path.charAt(0)!=="/"&&re.push("/")),ee.path!==void 0){var ge=ee.path;!Y.absolutePath&&(!ne||!ne.absolutePath)&&(ge=pe(ge)),ze===void 0&&(ge=ge.replace(/^\/\//,"/%2F")),re.push(ge)}return ee.query!==void 0&&(re.push("?"),re.push(ee.query)),ee.fragment!==void 0&&(re.push("#"),re.push(ee.fragment)),re.join("")}function it(ee,Y){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},re=arguments[3],ne={};return re||(ee=ie(Me(ee,ue),ue),Y=ie(Me(Y,ue),ue)),ue=ue||{},!ue.tolerant&&Y.scheme?(ne.scheme=Y.scheme,ne.userinfo=Y.userinfo,ne.host=Y.host,ne.port=Y.port,ne.path=pe(Y.path||""),ne.query=Y.query):(Y.userinfo!==void 0||Y.host!==void 0||Y.port!==void 0?(ne.userinfo=Y.userinfo,ne.host=Y.host,ne.port=Y.port,ne.path=pe(Y.path||""),ne.query=Y.query):(Y.path?(Y.path.charAt(0)==="/"?ne.path=pe(Y.path):((ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0)&&!ee.path?ne.path="/"+Y.path:ee.path?ne.path=ee.path.slice(0,ee.path.lastIndexOf("/")+1)+Y.path:ne.path=Y.path,ne.path=pe(ne.path)),ne.query=Y.query):(ne.path=ee.path,Y.query!==void 0?ne.query=Y.query:ne.query=ee.query),ne.userinfo=ee.userinfo,ne.host=ee.host,ne.port=ee.port),ne.scheme=ee.scheme),ne.fragment=Y.fragment,ne}function we(ee,Y,ue){var re=s({scheme:"null"},ue);return Me(it(ie(ee,re),ie(Y,re),re,!0),re)}function Ae(ee,Y){return typeof ee=="string"?ee=Me(ie(ee,Y),Y):n(ee)==="object"&&(ee=ie(Me(ee,Y),Y)),ee}function er(ee,Y,ue){return typeof ee=="string"?ee=Me(ie(ee,ue),ue):n(ee)==="object"&&(ee=Me(ee,ue)),typeof Y=="string"?Y=Me(ie(Y,ue),ue):n(Y)==="object"&&(Y=Me(Y,ue)),ee===Y}function me(ee,Y){return ee&&ee.toString().replace(!Y||!Y.iri?u.ESCAPE:m.ESCAPE,V)}function he(ee,Y){return ee&&ee.toString().replace(!Y||!Y.iri?u.PCT_ENCODED:m.PCT_ENCODED,Z)}var mt={scheme:"http",domainHost:!0,parse:function(Y,ue){return Y.host||(Y.error=Y.error||"HTTP URIs must have a host."),Y},serialize:function(Y,ue){var re=String(Y.scheme).toLowerCase()==="https";return(Y.port===(re?443:80)||Y.port==="")&&(Y.port=void 0),Y.path||(Y.path="/"),Y}},ye={scheme:"https",domainHost:mt.domainHost,parse:mt.parse,serialize:mt.serialize};function le(ee){return typeof ee.secure=="boolean"?ee.secure:String(ee.scheme).toLowerCase()==="wss"}var kt={scheme:"ws",domainHost:!0,parse:function(Y,ue){var re=Y;return re.secure=le(re),re.resourceName=(re.path||"/")+(re.query?"?"+re.query:""),re.path=void 0,re.query=void 0,re},serialize:function(Y,ue){if((Y.port===(le(Y)?443:80)||Y.port==="")&&(Y.port=void 0),typeof Y.secure=="boolean"&&(Y.scheme=Y.secure?"wss":"ws",Y.secure=void 0),Y.resourceName){var re=Y.resourceName.split("?"),ne=p(re,2),ze=ne[0],ge=ne[1];Y.path=ze&&ze!=="/"?ze:void 0,Y.query=ge,Y.resourceName=void 0}return Y.fragment=void 0,Y}},_e={scheme:"wss",domainHost:kt.domainHost,parse:kt.parse,serialize:kt.serialize},Ee={},Ht=!0,Pe="[A-Za-z0-9\\-\\.\\_\\~"+(Ht?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Se="[0-9A-Fa-f]",Pn=r(r("%[EFef]"+Se+"%"+Se+Se+"%"+Se+Se)+"|"+r("%[89A-Fa-f]"+Se+"%"+Se+Se)+"|"+r("%"+Se+Se)),Te="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Ie="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",_i=e(Ie,'[\\"\\\\]'),Re="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Ce=new RegExp(Pe,"g"),Tn=new RegExp(Pn,"g"),Ne=new RegExp(e("[^]",Te,"[\\.]",'[\\"]',_i),"g"),Oe=new RegExp(e("[^]",Pe,Re),"g"),xi=Oe;function ke(ee){var Y=Z(ee);return Y.match(Ce)?Y:ee}var Be={scheme:"mailto",parse:function(Y,ue){var re=Y,ne=re.to=re.path?re.path.split(","):[];if(re.path=void 0,re.query){for(var ze=!1,ge={},ve=re.query.split("&"),gt=0,ot=ve.length;gt<ot;++gt){var Ge=ve[gt].split("=");switch(Ge[0]){case"to":for(var Pt=Ge[1].split(","),Lt=0,St=Pt.length;Lt<St;++Lt)ne.push(Pt[Lt]);break;case"subject":re.subject=he(Ge[1],ue);break;case"body":re.body=he(Ge[1],ue);break;default:ze=!0,ge[he(Ge[0],ue)]=he(Ge[1],ue);break}}ze&&(re.headers=ge)}re.query=void 0;for(var pt=0,Tt=ne.length;pt<Tt;++pt){var vt=ne[pt].split("@");if(vt[0]=he(vt[0]),ue.unicodeSupport)vt[1]=he(vt[1],ue).toLowerCase();else try{vt[1]=z.toASCII(he(vt[1],ue).toLowerCase())}catch(zr){re.error=re.error||"Email address's domain name can not be converted to ASCII via punycode: "+zr}ne[pt]=vt.join("@")}return re},serialize:function(Y,ue){var re=Y,ne=o(Y.to);if(ne){for(var ze=0,ge=ne.length;ze<ge;++ze){var ve=String(ne[ze]),gt=ve.lastIndexOf("@"),ot=ve.slice(0,gt).replace(Tn,ke).replace(Tn,i).replace(Ne,V),Ge=ve.slice(gt+1);try{Ge=ue.iri?z.toUnicode(Ge):z.toASCII(he(Ge,ue).toLowerCase())}catch(pt){re.error=re.error||"Email address's domain name can not be converted to "+(ue.iri?"Unicode":"ASCII")+" via punycode: "+pt}ne[ze]=ot+"@"+Ge}re.path=ne.join(",")}var Pt=Y.headers=Y.headers||{};Y.subject&&(Pt.subject=Y.subject),Y.body&&(Pt.body=Y.body);var Lt=[];for(var St in Pt)Pt[St]!==Ee[St]&&Lt.push(St.replace(Tn,ke).replace(Tn,i).replace(Oe,V)+"="+Pt[St].replace(Tn,ke).replace(Tn,i).replace(xi,V));return Lt.length&&(re.query=Lt.join("&")),re}},Ei=/^([^\:]+)\:(.*)/,De={scheme:"urn",parse:function(Y,ue){var re=Y.path&&Y.path.match(Ei),ne=Y;if(re){var ze=ue.scheme||ne.scheme||"urn",ge=re[1].toLowerCase(),ve=re[2],gt=ze+":"+(ue.nid||ge),ot=G[gt];ne.nid=ge,ne.nss=ve,ne.path=void 0,ot&&(ne=ot.parse(ne,ue))}else ne.error=ne.error||"URN can not be parsed.";return ne},serialize:function(Y,ue){var re=ue.scheme||Y.scheme||"urn",ne=Y.nid,ze=re+":"+(ue.nid||ne),ge=G[ze];ge&&(Y=ge.serialize(Y,ue));var ve=Y,gt=Y.nss;return ve.path=(ne||ue.nid)+":"+gt,ve}},je=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,si={scheme:"urn:uuid",parse:function(Y,ue){var re=Y;return re.uuid=re.nss,re.nss=void 0,!ue.tolerant&&(!re.uuid||!re.uuid.match(je))&&(re.error=re.error||"UUID is not valid."),re},serialize:function(Y,ue){var re=Y;return re.nss=(Y.uuid||"").toLowerCase(),re}};G[mt.scheme]=mt,G[ye.scheme]=ye,G[kt.scheme]=kt,G[_e.scheme]=_e,G[Be.scheme]=Be,G[De.scheme]=De,G[si.scheme]=si,t.SCHEMES=G,t.pctEncChar=V,t.pctDecChars=Z,t.parse=ie,t.removeDotSegments=pe,t.serialize=Me,t.resolveComponents=it,t.resolve=we,t.normalize=Ae,t.equal=er,t.escapeComponent=me,t.unescapeComponent=he,Object.defineProperty(t,"__esModule",{value:!0})})});var Ige=H(nU=>{"use strict";_();Object.defineProperty(nU,"__esModule",{value:!0});var Rge=rU();Rge.code='require("ajv/dist/runtime/uri").default';nU.default=Rge});var qge=H(Ts=>{"use strict";_();Object.defineProperty(Ts,"__esModule",{value:!0});Ts.CodeGen=Ts.Name=Ts.nil=Ts.stringify=Ts.str=Ts._=Ts.KeywordCxt=void 0;var Ftt=HS();Object.defineProperty(Ts,"KeywordCxt",{enumerable:!0,get:function(){return Ftt.KeywordCxt}});var e2=rr();Object.defineProperty(Ts,"_",{enumerable:!0,get:function(){return e2._}});Object.defineProperty(Ts,"str",{enumerable:!0,get:function(){return e2.str}});Object.defineProperty(Ts,"stringify",{enumerable:!0,get:function(){return e2.stringify}});Object.defineProperty(Ts,"nil",{enumerable:!0,get:function(){return e2.nil}});Object.defineProperty(Ts,"Name",{enumerable:!0,get:function(){return e2.Name}});Object.defineProperty(Ts,"CodeGen",{enumerable:!0,get:function(){return e2.CodeGen}});var ztt=tT(),Cge=rT(),Ktt=NL(),JS=ZS(),Wtt=rr(),YS=WS(),oT=KS(),oU=jr(),kge=Pge(),Gtt=Ige(),Nge=(t,e)=>new RegExp(t,e);Nge.code="new RegExp";var Vtt=["removeAdditional","useDefaults","coerceTypes"],Htt=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Ztt={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Jtt={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Oge=200;function Ytt(t){var e,r,n,i,o,s,a,u,m,p,b,A,M,S,P,k,R,B,I,q,$,U,F,L,W;let E=t.strict,c=(e=t.code)===null||e===void 0?void 0:e.optimize,l=c===!0||c===void 0?1:c||0,y=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:Nge,d=(i=t.uriResolver)!==null&&i!==void 0?i:Gtt.default;return{strictSchema:(s=(o=t.strictSchema)!==null&&o!==void 0?o:E)!==null&&s!==void 0?s:!0,strictNumbers:(u=(a=t.strictNumbers)!==null&&a!==void 0?a:E)!==null&&u!==void 0?u:!0,strictTypes:(p=(m=t.strictTypes)!==null&&m!==void 0?m:E)!==null&&p!==void 0?p:"log",strictTuples:(A=(b=t.strictTuples)!==null&&b!==void 0?b:E)!==null&&A!==void 0?A:"log",strictRequired:(S=(M=t.strictRequired)!==null&&M!==void 0?M:E)!==null&&S!==void 0?S:!1,code:t.code?{...t.code,optimize:l,regExp:y}:{optimize:l,regExp:y},loopRequired:(P=t.loopRequired)!==null&&P!==void 0?P:Oge,loopEnum:(k=t.loopEnum)!==null&&k!==void 0?k:Oge,meta:(R=t.meta)!==null&&R!==void 0?R:!0,messages:(B=t.messages)!==null&&B!==void 0?B:!0,inlineRefs:(I=t.inlineRefs)!==null&&I!==void 0?I:!0,schemaId:(q=t.schemaId)!==null&&q!==void 0?q:"$id",addUsedSchema:($=t.addUsedSchema)!==null&&$!==void 0?$:!0,validateSchema:(U=t.validateSchema)!==null&&U!==void 0?U:!0,validateFormats:(F=t.validateFormats)!==null&&F!==void 0?F:!0,unicodeRegExp:(L=t.unicodeRegExp)!==null&&L!==void 0?L:!0,int32range:(W=t.int32range)!==null&&W!==void 0?W:!0,uriResolver:d}}var QS=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...Ytt(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new Wtt.ValueScope({scope:{},prefixes:Htt,es5:r,lines:n}),this.logger=nrt(e.logger);let i=e.validateFormats;e.validateFormats=!1,this.RULES=(0,Ktt.getRules)(),Bge.call(this,Ztt,e,"NOT SUPPORTED"),Bge.call(this,Jtt,e,"DEPRECATED","warn"),this._metaOpts=trt.call(this),e.formats&&Xtt.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&ert.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),Qtt.call(this),e.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,i=kge;n==="id"&&(i={...kge},i.id=i.$id,delete i.$id),r&&e&&this.addMetaSchema(i,i[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let i=n(r);return"$async"in n||(this.errors=n.errors),i}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return i.call(this,e,r);async function i(p,b){await o.call(this,p.$schema);let A=this._addSchema(p,b);return A.validate||s.call(this,A)}async function o(p){p&&!this.getSchema(p)&&await i.call(this,{$ref:p},!0)}async function s(p){try{return this._compileSchemaEnv(p)}catch(b){if(!(b instanceof Cge.default))throw b;return a.call(this,b),await u.call(this,b.missingSchema),s.call(this,p)}}function a({missingSchema:p,missingRef:b}){if(this.refs[p])throw new Error(`AnySchema ${p} is loaded but ${b} cannot be resolved`)}async function u(p){let b=await m.call(this,p);this.refs[p]||await o.call(this,b.$schema),this.refs[p]||this.addSchema(b,p,r)}async function m(p){let b=this._loading[p];if(b)return b;try{return await(this._loading[p]=n(p))}finally{delete this._loading[p]}}}addSchema(e,r,n,i=this.opts.validateSchema){if(Array.isArray(e)){for(let s of e)this.addSchema(s,void 0,n,i);return this}let o;if(typeof e=="object"){let{schemaId:s}=this.opts;if(o=e[s],o!==void 0&&typeof o!="string")throw new Error(`schema ${s} must be string`)}return r=(0,YS.normalizeId)(r||o),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,i,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let i=this.validate(n,e);if(!i&&r){let o="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(o);else throw new Error(o)}return i}getSchema(e){let r;for(;typeof(r=Dge.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,i=new JS.SchemaEnv({schema:{},schemaId:n});if(r=JS.resolveSchema.call(this,i,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=Dge.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,YS.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(ort.call(this,n,r),!r)return(0,oU.eachItem)(n,o=>iU.call(this,o)),this;art.call(this,r);let i={...r,type:(0,oT.getJSONTypes)(r.type),schemaType:(0,oT.getJSONTypes)(r.schemaType)};return(0,oU.eachItem)(n,i.type.length===0?o=>iU.call(this,o,i):o=>i.type.forEach(s=>iU.call(this,o,i,s))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let i=n.rules.findIndex(o=>o.keyword===e);i>=0&&n.rules.splice(i,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(i=>`${n}${i.instancePath} ${i.message}`).reduce((i,o)=>i+r+o)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let i of r){let o=i.split("/").slice(1),s=e;for(let a of o)s=s[a];for(let a in n){let u=n[a];if(typeof u!="object")continue;let{$data:m}=u.definition,p=s[a];m&&p&&(s[a]=jge(p))}}return e}_removeAllSchemas(e,r){for(let n in e){let i=e[n];(!r||r.test(n))&&(typeof i=="string"?delete e[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete e[n]))}}_addSchema(e,r,n,i=this.opts.validateSchema,o=this.opts.addUsedSchema){let s,{schemaId:a}=this.opts;if(typeof e=="object")s=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,YS.normalizeId)(s||n);let m=YS.getSchemaRefs.call(this,e,n);return u=new JS.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:m}),this._cache.set(u.schema,u),o&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),i&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):JS.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{JS.compileSchema.call(this,e)}finally{this.opts=r}}};Ts.default=QS;QS.ValidationError=ztt.default;QS.MissingRefError=Cge.default;function Bge(t,e,r,n="error"){for(let i in t){let o=i;o in e&&this.logger[n](`${r}: option ${i}. ${t[o]}`)}}function Dge(t){return t=(0,YS.normalizeId)(t),this.schemas[t]||this.refs[t]}function Qtt(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function Xtt(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function ert(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function trt(){let t={...this.opts};for(let e of Vtt)delete t[e];return t}var rrt={log(){},warn(){},error(){}};function nrt(t){if(t===!1)return rrt;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var irt=/^[a-z_$][a-z0-9_$:-]*$/i;function ort(t,e){let{RULES:r}=this;if((0,oU.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!irt.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function iU(t,e,r){var n;let i=e?.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:o}=this,s=i?o.post:o.rules.find(({type:u})=>u===r);if(s||(s={type:r,rules:[]},o.rules.push(s)),o.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,oT.getJSONTypes)(e.type),schemaType:(0,oT.getJSONTypes)(e.schemaType)}};e.before?srt.call(this,s,a,e.before):s.rules.push(a),o.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function srt(t,e,r){let n=t.rules.findIndex(i=>i.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function art(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=jge(e)),t.validateSchema=this.compile(e,!0))}var crt={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function jge(t){return{anyOf:[t,crt]}}});var $ge=H(sU=>{"use strict";_();Object.defineProperty(sU,"__esModule",{value:!0});var frt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};sU.default=frt});var cT=H(Gg=>{"use strict";_();Object.defineProperty(Gg,"__esModule",{value:!0});Gg.callRef=Gg.getValidate=void 0;var urt=rT(),Lge=Rf(),rc=rr(),t2=Tf(),Uge=ZS(),sT=jr(),lrt={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:i,schemaEnv:o,validateName:s,opts:a,self:u}=n,{root:m}=o;if((r==="#"||r==="#/")&&i===m.baseId)return b();let p=Uge.resolveRef.call(u,m,i,r);if(p===void 0)throw new urt.default(n.opts.uriResolver,i,r);if(p instanceof Uge.SchemaEnv)return A(p);return M(p);function b(){if(o===m)return aT(t,s,o,o.$async);let S=e.scopeValue("root",{ref:m});return aT(t,(0,rc._)`${S}.validate`,m,m.$async)}function A(S){let P=Fge(t,S);aT(t,P,S,S.$async)}function M(S){let P=e.scopeValue("schema",a.code.source===!0?{ref:S,code:(0,rc.stringify)(S)}:{ref:S}),k=e.name("valid"),R=t.subschema({schema:S,dataTypes:[],schemaPath:rc.nil,topSchemaRef:P,errSchemaPath:r},k);t.mergeEvaluated(R),t.ok(k)}}};function Fge(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,rc._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Gg.getValidate=Fge;function aT(t,e,r,n){let{gen:i,it:o}=t,{allErrors:s,schemaEnv:a,opts:u}=o,m=u.passContext?t2.default.this:rc.nil;n?p():b();function p(){if(!a.$async)throw new Error("async schema referenced by sync schema");let S=i.let("valid");i.try(()=>{i.code((0,rc._)`await ${(0,Lge.callValidateCode)(t,e,m)}`),M(e),s||i.assign(S,!0)},P=>{i.if((0,rc._)`!(${P} instanceof ${o.ValidationError})`,()=>i.throw(P)),A(P),s||i.assign(S,!1)}),t.ok(S)}function b(){t.result((0,Lge.callValidateCode)(t,e,m),()=>M(e),()=>A(e))}function A(S){let P=(0,rc._)`${S}.errors`;i.assign(t2.default.vErrors,(0,rc._)`${t2.default.vErrors} === null ? ${P} : ${t2.default.vErrors}.concat(${P})`),i.assign(t2.default.errors,(0,rc._)`${t2.default.vErrors}.length`)}function M(S){var P;if(!o.opts.unevaluated)return;let k=(P=r?.validate)===null||P===void 0?void 0:P.evaluated;if(o.props!==!0)if(k&&!k.dynamicProps)k.props!==void 0&&(o.props=sT.mergeEvaluated.props(i,k.props,o.props));else{let R=i.var("props",(0,rc._)`${S}.evaluated.props`);o.props=sT.mergeEvaluated.props(i,R,o.props,rc.Name)}if(o.items!==!0)if(k&&!k.dynamicItems)k.items!==void 0&&(o.items=sT.mergeEvaluated.items(i,k.items,o.items));else{let R=i.var("items",(0,rc._)`${S}.evaluated.items`);o.items=sT.mergeEvaluated.items(i,R,o.items,rc.Name)}}}Gg.callRef=aT;Gg.default=lrt});var zge=H(aU=>{"use strict";_();Object.defineProperty(aU,"__esModule",{value:!0});var drt=$ge(),hrt=cT(),prt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",drt.default,hrt.default];aU.default=prt});var Kge=H(cU=>{"use strict";_();Object.defineProperty(cU,"__esModule",{value:!0});var fT=rr(),em=fT.operators,uT={maximum:{okStr:"<=",ok:em.LTE,fail:em.GT},minimum:{okStr:">=",ok:em.GTE,fail:em.LT},exclusiveMaximum:{okStr:"<",ok:em.LT,fail:em.GTE},exclusiveMinimum:{okStr:">",ok:em.GT,fail:em.LTE}},mrt={message:({keyword:t,schemaCode:e})=>(0,fT.str)`must be ${uT[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,fT._)`{comparison: ${uT[t].okStr}, limit: ${e}}`},yrt={keyword:Object.keys(uT),type:"number",schemaType:"number",$data:!0,error:mrt,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,fT._)`${r} ${uT[e].fail} ${n} || isNaN(${r})`)}};cU.default=yrt});var Wge=H(fU=>{"use strict";_();Object.defineProperty(fU,"__esModule",{value:!0});var XS=rr(),grt={message:({schemaCode:t})=>(0,XS.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,XS._)`{multipleOf: ${t}}`},brt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:grt,code(t){let{gen:e,data:r,schemaCode:n,it:i}=t,o=i.opts.multipleOfPrecision,s=e.let("res"),a=o?(0,XS._)`Math.abs(Math.round(${s}) - ${s}) > 1e-${o}`:(0,XS._)`${s} !== parseInt(${s})`;t.fail$data((0,XS._)`(${n} === 0 || (${s} = ${r}/${n}, ${a}))`)}};fU.default=brt});var Vge=H(uU=>{"use strict";_();Object.defineProperty(uU,"__esModule",{value:!0});function Gge(t){let e=t.length,r=0,n=0,i;for(;n<e;)r++,i=t.charCodeAt(n++),i>=55296&&i<=56319&&n<e&&(i=t.charCodeAt(n),(i&64512)===56320&&n++);return r}uU.default=Gge;Gge.code='require("ajv/dist/runtime/ucs2length").default'});var Hge=H(lU=>{"use strict";_();Object.defineProperty(lU,"__esModule",{value:!0});var Vg=rr(),vrt=jr(),wrt=Vge(),_rt={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,Vg.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,Vg._)`{limit: ${t}}`},xrt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:_rt,code(t){let{keyword:e,data:r,schemaCode:n,it:i}=t,o=e==="maxLength"?Vg.operators.GT:Vg.operators.LT,s=i.opts.unicode===!1?(0,Vg._)`${r}.length`:(0,Vg._)`${(0,vrt.useFunc)(t.gen,wrt.default)}(${r})`;t.fail$data((0,Vg._)`${s} ${o} ${n}`)}};lU.default=xrt});var Zge=H(dU=>{"use strict";_();Object.defineProperty(dU,"__esModule",{value:!0});var Ert=Rf(),lT=rr(),Srt={message:({schemaCode:t})=>(0,lT.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,lT._)`{pattern: ${t}}`},Mrt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Srt,code(t){let{data:e,$data:r,schema:n,schemaCode:i,it:o}=t,s=o.opts.unicodeRegExp?"u":"",a=r?(0,lT._)`(new RegExp(${i}, ${s}))`:(0,Ert.usePattern)(t,n);t.fail$data((0,lT._)`!${a}.test(${e})`)}};dU.default=Mrt});var Jge=H(hU=>{"use strict";_();Object.defineProperty(hU,"__esModule",{value:!0});var e3=rr(),Art={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,e3.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,e3._)`{limit: ${t}}`},Prt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Art,code(t){let{keyword:e,data:r,schemaCode:n}=t,i=e==="maxProperties"?e3.operators.GT:e3.operators.LT;t.fail$data((0,e3._)`Object.keys(${r}).length ${i} ${n}`)}};hU.default=Prt});var Yge=H(pU=>{"use strict";_();Object.defineProperty(pU,"__esModule",{value:!0});var t3=Rf(),r3=rr(),Trt=jr(),Rrt={message:({params:{missingProperty:t}})=>(0,r3.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,r3._)`{missingProperty: ${t}}`},Irt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Rrt,code(t){let{gen:e,schema:r,schemaCode:n,data:i,$data:o,it:s}=t,{opts:a}=s;if(!o&&r.length===0)return;let u=r.length>=a.loopRequired;if(s.allErrors?m():p(),a.strictRequired){let M=t.parentSchema.properties,{definedProperties:S}=t.it;for(let P of r)if(M?.[P]===void 0&&!S.has(P)){let k=s.schemaEnv.baseId+s.errSchemaPath,R=`required property "${P}" is not defined at "${k}" (strictRequired)`;(0,Trt.checkStrictMode)(s,R,s.opts.strictRequired)}}function m(){if(u||o)t.block$data(r3.nil,b);else for(let M of r)(0,t3.checkReportMissingProp)(t,M)}function p(){let M=e.let("missing");if(u||o){let S=e.let("valid",!0);t.block$data(S,()=>A(M,S)),t.ok(S)}else e.if((0,t3.checkMissingProp)(t,r,M)),(0,t3.reportMissingProp)(t,M),e.else()}function b(){e.forOf("prop",n,M=>{t.setParams({missingProperty:M}),e.if((0,t3.noPropertyInData)(e,i,M,a.ownProperties),()=>t.error())})}function A(M,S){t.setParams({missingProperty:M}),e.forOf(M,n,()=>{e.assign(S,(0,t3.propertyInData)(e,i,M,a.ownProperties)),e.if((0,r3.not)(S),()=>{t.error(),e.break()})},r3.nil)}}};pU.default=Irt});var Qge=H(mU=>{"use strict";_();Object.defineProperty(mU,"__esModule",{value:!0});var n3=rr(),krt={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,n3.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,n3._)`{limit: ${t}}`},Ort={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:krt,code(t){let{keyword:e,data:r,schemaCode:n}=t,i=e==="maxItems"?n3.operators.GT:n3.operators.LT;t.fail$data((0,n3._)`${r}.length ${i} ${n}`)}};mU.default=Ort});var dT=H(yU=>{"use strict";_();Object.defineProperty(yU,"__esModule",{value:!0});var Xge=KL();Xge.code='require("ajv/dist/runtime/equal").default';yU.default=Xge});var ebe=H(bU=>{"use strict";_();Object.defineProperty(bU,"__esModule",{value:!0});var gU=KS(),Rs=rr(),Brt=jr(),Drt=dT(),Crt={message:({params:{i:t,j:e}})=>(0,Rs.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Rs._)`{i: ${t}, j: ${e}}`},Nrt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Crt,code(t){let{gen:e,data:r,$data:n,schema:i,parentSchema:o,schemaCode:s,it:a}=t;if(!n&&!i)return;let u=e.let("valid"),m=o.items?(0,gU.getSchemaTypes)(o.items):[];t.block$data(u,p,(0,Rs._)`${s} === false`),t.ok(u);function p(){let S=e.let("i",(0,Rs._)`${r}.length`),P=e.let("j");t.setParams({i:S,j:P}),e.assign(u,!0),e.if((0,Rs._)`${S} > 1`,()=>(b()?A:M)(S,P))}function b(){return m.length>0&&!m.some(S=>S==="object"||S==="array")}function A(S,P){let k=e.name("item"),R=(0,gU.checkDataTypes)(m,k,a.opts.strictNumbers,gU.DataType.Wrong),B=e.const("indices",(0,Rs._)`{}`);e.for((0,Rs._)`;${S}--;`,()=>{e.let(k,(0,Rs._)`${r}[${S}]`),e.if(R,(0,Rs._)`continue`),m.length>1&&e.if((0,Rs._)`typeof ${k} == "string"`,(0,Rs._)`${k} += "_"`),e.if((0,Rs._)`typeof ${B}[${k}] == "number"`,()=>{e.assign(P,(0,Rs._)`${B}[${k}]`),t.error(),e.assign(u,!1).break()}).code((0,Rs._)`${B}[${k}] = ${S}`)})}function M(S,P){let k=(0,Brt.useFunc)(e,Drt.default),R=e.name("outer");e.label(R).for((0,Rs._)`;${S}--;`,()=>e.for((0,Rs._)`${P} = ${S}; ${P}--;`,()=>e.if((0,Rs._)`${k}(${r}[${S}], ${r}[${P}])`,()=>{t.error(),e.assign(u,!1).break(R)})))}}};bU.default=Nrt});var tbe=H(wU=>{"use strict";_();Object.defineProperty(wU,"__esModule",{value:!0});var vU=rr(),jrt=jr(),qrt=dT(),$rt={message:"must be equal to constant",params:({schemaCode:t})=>(0,vU._)`{allowedValue: ${t}}`},Lrt={keyword:"const",$data:!0,error:$rt,code(t){let{gen:e,data:r,$data:n,schemaCode:i,schema:o}=t;n||o&&typeof o=="object"?t.fail$data((0,vU._)`!${(0,jrt.useFunc)(e,qrt.default)}(${r}, ${i})`):t.fail((0,vU._)`${o} !== ${r}`)}};wU.default=Lrt});var rbe=H(_U=>{"use strict";_();Object.defineProperty(_U,"__esModule",{value:!0});var i3=rr(),Urt=jr(),Frt=dT(),zrt={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,i3._)`{allowedValues: ${t}}`},Krt={keyword:"enum",schemaType:"array",$data:!0,error:zrt,code(t){let{gen:e,data:r,$data:n,schema:i,schemaCode:o,it:s}=t;if(!n&&i.length===0)throw new Error("enum must have non-empty array");let a=i.length>=s.opts.loopEnum,u,m=()=>u??(u=(0,Urt.useFunc)(e,Frt.default)),p;if(a||n)p=e.let("valid"),t.block$data(p,b);else{if(!Array.isArray(i))throw new Error("ajv implementation error");let M=e.const("vSchema",o);p=(0,i3.or)(...i.map((S,P)=>A(M,P)))}t.pass(p);function b(){e.assign(p,!1),e.forOf("v",o,M=>e.if((0,i3._)`${m()}(${r}, ${M})`,()=>e.assign(p,!0).break()))}function A(M,S){let P=i[S];return typeof P=="object"&&P!==null?(0,i3._)`${m()}(${r}, ${M}[${S}])`:(0,i3._)`${r} === ${P}`}}};_U.default=Krt});var nbe=H(xU=>{"use strict";_();Object.defineProperty(xU,"__esModule",{value:!0});var Wrt=Kge(),Grt=Wge(),Vrt=Hge(),Hrt=Zge(),Zrt=Jge(),Jrt=Yge(),Yrt=Qge(),Qrt=ebe(),Xrt=tbe(),ent=rbe(),tnt=[Wrt.default,Grt.default,Vrt.default,Hrt.default,Zrt.default,Jrt.default,Yrt.default,Qrt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Xrt.default,ent.default];xU.default=tnt});var SU=H(o3=>{"use strict";_();Object.defineProperty(o3,"__esModule",{value:!0});o3.validateAdditionalItems=void 0;var Hg=rr(),EU=jr(),rnt={message:({params:{len:t}})=>(0,Hg.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Hg._)`{limit: ${t}}`},nnt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:rnt,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,EU.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}ibe(t,n)}};function ibe(t,e){let{gen:r,schema:n,data:i,keyword:o,it:s}=t;s.items=!0;let a=r.const("len",(0,Hg._)`${i}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,Hg._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,EU.alwaysValidSchema)(s,n)){let m=r.var("valid",(0,Hg._)`${a} <= ${e.length}`);r.if((0,Hg.not)(m),()=>u(m)),t.ok(m)}function u(m){r.forRange("i",e.length,a,p=>{t.subschema({keyword:o,dataProp:p,dataPropType:EU.Type.Num},m),s.allErrors||r.if((0,Hg.not)(m),()=>r.break())})}}o3.validateAdditionalItems=ibe;o3.default=nnt});var MU=H(s3=>{"use strict";_();Object.defineProperty(s3,"__esModule",{value:!0});s3.validateTuple=void 0;var obe=rr(),hT=jr(),int=Rf(),ont={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return sbe(t,"additionalItems",e);r.items=!0,!(0,hT.alwaysValidSchema)(r,e)&&t.ok((0,int.validateArray)(t))}};function sbe(t,e,r=t.schema){let{gen:n,parentSchema:i,data:o,keyword:s,it:a}=t;p(i),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=hT.mergeEvaluated.items(n,r.length,a.items));let u=n.name("valid"),m=n.const("len",(0,obe._)`${o}.length`);r.forEach((b,A)=>{(0,hT.alwaysValidSchema)(a,b)||(n.if((0,obe._)`${m} > ${A}`,()=>t.subschema({keyword:s,schemaProp:A,dataProp:A},u)),t.ok(u))});function p(b){let{opts:A,errSchemaPath:M}=a,S=r.length,P=S===b.minItems&&(S===b.maxItems||b[e]===!1);if(A.strictTuples&&!P){let k=`"${s}" is ${S}-tuple, but minItems or maxItems/${e} are not specified or different at path "${M}"`;(0,hT.checkStrictMode)(a,k,A.strictTuples)}}}s3.validateTuple=sbe;s3.default=ont});var abe=H(AU=>{"use strict";_();Object.defineProperty(AU,"__esModule",{value:!0});var snt=MU(),ant={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,snt.validateTuple)(t,"items")};AU.default=ant});var fbe=H(PU=>{"use strict";_();Object.defineProperty(PU,"__esModule",{value:!0});var cbe=rr(),cnt=jr(),fnt=Rf(),unt=SU(),lnt={message:({params:{len:t}})=>(0,cbe.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,cbe._)`{limit: ${t}}`},dnt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:lnt,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:i}=r;n.items=!0,!(0,cnt.alwaysValidSchema)(n,e)&&(i?(0,unt.validateAdditionalItems)(t,i):t.ok((0,fnt.validateArray)(t)))}};PU.default=dnt});var ube=H(TU=>{"use strict";_();Object.defineProperty(TU,"__esModule",{value:!0});var kf=rr(),pT=jr(),hnt={message:({params:{min:t,max:e}})=>e===void 0?(0,kf.str)`must contain at least ${t} valid item(s)`:(0,kf.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,kf._)`{minContains: ${t}}`:(0,kf._)`{minContains: ${t}, maxContains: ${e}}`},pnt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:hnt,code(t){let{gen:e,schema:r,parentSchema:n,data:i,it:o}=t,s,a,{minContains:u,maxContains:m}=n;o.opts.next?(s=u===void 0?1:u,a=m):s=1;let p=e.const("len",(0,kf._)`${i}.length`);if(t.setParams({min:s,max:a}),a===void 0&&s===0){(0,pT.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&s>a){(0,pT.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,pT.alwaysValidSchema)(o,r)){let P=(0,kf._)`${p} >= ${s}`;a!==void 0&&(P=(0,kf._)`${P} && ${p} <= ${a}`),t.pass(P);return}o.items=!0;let b=e.name("valid");a===void 0&&s===1?M(b,()=>e.if(b,()=>e.break())):s===0?(e.let(b,!0),a!==void 0&&e.if((0,kf._)`${i}.length > 0`,A)):(e.let(b,!1),A()),t.result(b,()=>t.reset());function A(){let P=e.name("_valid"),k=e.let("count",0);M(P,()=>e.if(P,()=>S(k)))}function M(P,k){e.forRange("i",0,p,R=>{t.subschema({keyword:"contains",dataProp:R,dataPropType:pT.Type.Num,compositeRule:!0},P),k()})}function S(P){e.code((0,kf._)`${P}++`),a===void 0?e.if((0,kf._)`${P} >= ${s}`,()=>e.assign(b,!0).break()):(e.if((0,kf._)`${P} > ${a}`,()=>e.assign(b,!1).break()),s===1?e.assign(b,!0):e.if((0,kf._)`${P} >= ${s}`,()=>e.assign(b,!0)))}}};TU.default=pnt});var mT=H(fd=>{"use strict";_();Object.defineProperty(fd,"__esModule",{value:!0});fd.validateSchemaDeps=fd.validatePropertyDeps=fd.error=void 0;var RU=rr(),mnt=jr(),a3=Rf();fd.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,RU.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,RU._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var ynt={keyword:"dependencies",type:"object",schemaType:"object",error:fd.error,code(t){let[e,r]=gnt(t);lbe(t,e),dbe(t,r)}};function gnt({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let i=Array.isArray(t[n])?e:r;i[n]=t[n]}return[e,r]}function lbe(t,e=t.schema){let{gen:r,data:n,it:i}=t;if(Object.keys(e).length===0)return;let o=r.let("missing");for(let s in e){let a=e[s];if(a.length===0)continue;let u=(0,a3.propertyInData)(r,n,s,i.opts.ownProperties);t.setParams({property:s,depsCount:a.length,deps:a.join(", ")}),i.allErrors?r.if(u,()=>{for(let m of a)(0,a3.checkReportMissingProp)(t,m)}):(r.if((0,RU._)`${u} && (${(0,a3.checkMissingProp)(t,a,o)})`),(0,a3.reportMissingProp)(t,o),r.else())}}fd.validatePropertyDeps=lbe;function dbe(t,e=t.schema){let{gen:r,data:n,keyword:i,it:o}=t,s=r.name("valid");for(let a in e)(0,mnt.alwaysValidSchema)(o,e[a])||(r.if((0,a3.propertyInData)(r,n,a,o.opts.ownProperties),()=>{let u=t.subschema({keyword:i,schemaProp:a},s);t.mergeValidEvaluated(u,s)},()=>r.var(s,!0)),t.ok(s))}fd.validateSchemaDeps=dbe;fd.default=ynt});var pbe=H(IU=>{"use strict";_();Object.defineProperty(IU,"__esModule",{value:!0});var hbe=rr(),bnt=jr(),vnt={message:"property name must be valid",params:({params:t})=>(0,hbe._)`{propertyName: ${t.propertyName}}`},wnt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:vnt,code(t){let{gen:e,schema:r,data:n,it:i}=t;if((0,bnt.alwaysValidSchema)(i,r))return;let o=e.name("valid");e.forIn("key",n,s=>{t.setParams({propertyName:s}),t.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},o),e.if((0,hbe.not)(o),()=>{t.error(!0),i.allErrors||e.break()})}),t.ok(o)}};IU.default=wnt});var OU=H(kU=>{"use strict";_();Object.defineProperty(kU,"__esModule",{value:!0});var yT=Rf(),Du=rr(),_nt=Tf(),gT=jr(),xnt={message:"must NOT have additional properties",params:({params:t})=>(0,Du._)`{additionalProperty: ${t.additionalProperty}}`},Ent={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:xnt,code(t){let{gen:e,schema:r,parentSchema:n,data:i,errsCount:o,it:s}=t;if(!o)throw new Error("ajv implementation error");let{allErrors:a,opts:u}=s;if(s.props=!0,u.removeAdditional!=="all"&&(0,gT.alwaysValidSchema)(s,r))return;let m=(0,yT.allSchemaProperties)(n.properties),p=(0,yT.allSchemaProperties)(n.patternProperties);b(),t.ok((0,Du._)`${o} === ${_nt.default.errors}`);function b(){e.forIn("key",i,k=>{!m.length&&!p.length?S(k):e.if(A(k),()=>S(k))})}function A(k){let R;if(m.length>8){let B=(0,gT.schemaRefOrVal)(s,n.properties,"properties");R=(0,yT.isOwnProperty)(e,B,k)}else m.length?R=(0,Du.or)(...m.map(B=>(0,Du._)`${k} === ${B}`)):R=Du.nil;return p.length&&(R=(0,Du.or)(R,...p.map(B=>(0,Du._)`${(0,yT.usePattern)(t,B)}.test(${k})`))),(0,Du.not)(R)}function M(k){e.code((0,Du._)`delete ${i}[${k}]`)}function S(k){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){M(k);return}if(r===!1){t.setParams({additionalProperty:k}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,gT.alwaysValidSchema)(s,r)){let R=e.name("valid");u.removeAdditional==="failing"?(P(k,R,!1),e.if((0,Du.not)(R),()=>{t.reset(),M(k)})):(P(k,R),a||e.if((0,Du.not)(R),()=>e.break()))}}function P(k,R,B){let I={keyword:"additionalProperties",dataProp:k,dataPropType:gT.Type.Str};B===!1&&Object.assign(I,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(I,R)}}};kU.default=Ent});var gbe=H(DU=>{"use strict";_();Object.defineProperty(DU,"__esModule",{value:!0});var Snt=HS(),mbe=Rf(),BU=jr(),ybe=OU(),Mnt={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:i,it:o}=t;o.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&ybe.default.code(new Snt.KeywordCxt(o,ybe.default,"additionalProperties"));let s=(0,mbe.allSchemaProperties)(r);for(let b of s)o.definedProperties.add(b);o.opts.unevaluated&&s.length&&o.props!==!0&&(o.props=BU.mergeEvaluated.props(e,(0,BU.toHash)(s),o.props));let a=s.filter(b=>!(0,BU.alwaysValidSchema)(o,r[b]));if(a.length===0)return;let u=e.name("valid");for(let b of a)m(b)?p(b):(e.if((0,mbe.propertyInData)(e,i,b,o.opts.ownProperties)),p(b),o.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(b),t.ok(u);function m(b){return o.opts.useDefaults&&!o.compositeRule&&r[b].default!==void 0}function p(b){t.subschema({keyword:"properties",schemaProp:b,dataProp:b},u)}}};DU.default=Mnt});var _be=H(CU=>{"use strict";_();Object.defineProperty(CU,"__esModule",{value:!0});var bbe=Rf(),bT=rr(),vbe=jr(),wbe=jr(),Ant={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:i,it:o}=t,{opts:s}=o,a=(0,bbe.allSchemaProperties)(r),u=a.filter(P=>(0,vbe.alwaysValidSchema)(o,r[P]));if(a.length===0||u.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;let m=s.strictSchema&&!s.allowMatchingProperties&&i.properties,p=e.name("valid");o.props!==!0&&!(o.props instanceof bT.Name)&&(o.props=(0,wbe.evaluatedPropsToName)(e,o.props));let{props:b}=o;A();function A(){for(let P of a)m&&M(P),o.allErrors?S(P):(e.var(p,!0),S(P),e.if(p))}function M(P){for(let k in m)new RegExp(P).test(k)&&(0,vbe.checkStrictMode)(o,`property ${k} matches pattern ${P} (use allowMatchingProperties)`)}function S(P){e.forIn("key",n,k=>{e.if((0,bT._)`${(0,bbe.usePattern)(t,P)}.test(${k})`,()=>{let R=u.includes(P);R||t.subschema({keyword:"patternProperties",schemaProp:P,dataProp:k,dataPropType:wbe.Type.Str},p),o.opts.unevaluated&&b!==!0?e.assign((0,bT._)`${b}[${k}]`,!0):!R&&!o.allErrors&&e.if((0,bT.not)(p),()=>e.break())})})}}};CU.default=Ant});var xbe=H(NU=>{"use strict";_();Object.defineProperty(NU,"__esModule",{value:!0});var Pnt=jr(),Tnt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,Pnt.alwaysValidSchema)(n,r)){t.fail();return}let i=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),t.failResult(i,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};NU.default=Tnt});var Ebe=H(jU=>{"use strict";_();Object.defineProperty(jU,"__esModule",{value:!0});var Rnt=Rf(),Int={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Rnt.validateUnion,error:{message:"must match a schema in anyOf"}};jU.default=Int});var Sbe=H(qU=>{"use strict";_();Object.defineProperty(qU,"__esModule",{value:!0});var vT=rr(),knt=jr(),Ont={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,vT._)`{passingSchemas: ${t.passing}}`},Bnt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Ont,code(t){let{gen:e,schema:r,parentSchema:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;let o=r,s=e.let("valid",!1),a=e.let("passing",null),u=e.name("_valid");t.setParams({passing:a}),e.block(m),t.result(s,()=>t.reset(),()=>t.error(!0));function m(){o.forEach((p,b)=>{let A;(0,knt.alwaysValidSchema)(i,p)?e.var(u,!0):A=t.subschema({keyword:"oneOf",schemaProp:b,compositeRule:!0},u),b>0&&e.if((0,vT._)`${u} && ${s}`).assign(s,!1).assign(a,(0,vT._)`[${a}, ${b}]`).else(),e.if(u,()=>{e.assign(s,!0),e.assign(a,b),A&&t.mergeEvaluated(A,vT.Name)})})}}};qU.default=Bnt});var Mbe=H($U=>{"use strict";_();Object.defineProperty($U,"__esModule",{value:!0});var Dnt=jr(),Cnt={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let i=e.name("valid");r.forEach((o,s)=>{if((0,Dnt.alwaysValidSchema)(n,o))return;let a=t.subschema({keyword:"allOf",schemaProp:s},i);t.ok(i),t.mergeEvaluated(a)})}};$U.default=Cnt});var Tbe=H(LU=>{"use strict";_();Object.defineProperty(LU,"__esModule",{value:!0});var wT=rr(),Pbe=jr(),Nnt={message:({params:t})=>(0,wT.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,wT._)`{failingKeyword: ${t.ifClause}}`},jnt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Nnt,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,Pbe.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let i=Abe(n,"then"),o=Abe(n,"else");if(!i&&!o)return;let s=e.let("valid",!0),a=e.name("_valid");if(u(),t.reset(),i&&o){let p=e.let("ifClause");t.setParams({ifClause:p}),e.if(a,m("then",p),m("else",p))}else i?e.if(a,m("then")):e.if((0,wT.not)(a),m("else"));t.pass(s,()=>t.error(!0));function u(){let p=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(p)}function m(p,b){return()=>{let A=t.subschema({keyword:p},a);e.assign(s,a),t.mergeValidEvaluated(A,s),b?e.assign(b,(0,wT._)`${p}`):t.setParams({ifClause:p})}}}};function Abe(t,e){let r=t.schema[e];return r!==void 0&&!(0,Pbe.alwaysValidSchema)(t,r)}LU.default=jnt});var Rbe=H(UU=>{"use strict";_();Object.defineProperty(UU,"__esModule",{value:!0});var qnt=jr(),$nt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,qnt.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};UU.default=$nt});var Ibe=H(FU=>{"use strict";_();Object.defineProperty(FU,"__esModule",{value:!0});var Lnt=SU(),Unt=abe(),Fnt=MU(),znt=fbe(),Knt=ube(),Wnt=mT(),Gnt=pbe(),Vnt=OU(),Hnt=gbe(),Znt=_be(),Jnt=xbe(),Ynt=Ebe(),Qnt=Sbe(),Xnt=Mbe(),eit=Tbe(),tit=Rbe();function rit(t=!1){let e=[Jnt.default,Ynt.default,Qnt.default,Xnt.default,eit.default,tit.default,Gnt.default,Vnt.default,Wnt.default,Hnt.default,Znt.default];return t?e.push(Unt.default,znt.default):e.push(Lnt.default,Fnt.default),e.push(Knt.default),e}FU.default=rit});var KU=H(c3=>{"use strict";_();Object.defineProperty(c3,"__esModule",{value:!0});c3.dynamicAnchor=void 0;var zU=rr(),nit=Tf(),kbe=ZS(),iit=cT(),oit={keyword:"$dynamicAnchor",schemaType:"string",code:t=>Obe(t,t.schema)};function Obe(t,e){let{gen:r,it:n}=t;n.schemaEnv.root.dynamicAnchors[e]=!0;let i=(0,zU._)`${nit.default.dynamicAnchors}${(0,zU.getProperty)(e)}`,o=n.errSchemaPath==="#"?n.validateName:sit(t);r.if((0,zU._)`!${i}`,()=>r.assign(i,o))}c3.dynamicAnchor=Obe;function sit(t){let{schemaEnv:e,schema:r,self:n}=t.it,{root:i,baseId:o,localRefs:s,meta:a}=e.root,{schemaId:u}=n.opts,m=new kbe.SchemaEnv({schema:r,schemaId:u,root:i,baseId:o,localRefs:s,meta:a});return kbe.compileSchema.call(n,m),(0,iit.getValidate)(t,m)}c3.default=oit});var WU=H(f3=>{"use strict";_();Object.defineProperty(f3,"__esModule",{value:!0});f3.dynamicRef=void 0;var Bbe=rr(),ait=Tf(),Dbe=cT(),cit={keyword:"$dynamicRef",schemaType:"string",code:t=>Cbe(t,t.schema)};function Cbe(t,e){let{gen:r,keyword:n,it:i}=t;if(e[0]!=="#")throw new Error(`"${n}" only supports hash fragment reference`);let o=e.slice(1);if(i.allErrors)s();else{let u=r.let("valid",!1);s(u),t.ok(u)}function s(u){if(i.schemaEnv.root.dynamicAnchors[o]){let m=r.let("_v",(0,Bbe._)`${ait.default.dynamicAnchors}${(0,Bbe.getProperty)(o)}`);r.if(m,a(m,u),a(i.validateName,u))}else a(i.validateName,u)()}function a(u,m){return m?()=>r.block(()=>{(0,Dbe.callRef)(t,u),r.let(m,!0)}):()=>(0,Dbe.callRef)(t,u)}}f3.dynamicRef=Cbe;f3.default=cit});var Nbe=H(GU=>{"use strict";_();Object.defineProperty(GU,"__esModule",{value:!0});var fit=KU(),uit=jr(),lit={keyword:"$recursiveAnchor",schemaType:"boolean",code(t){t.schema?(0,fit.dynamicAnchor)(t,""):(0,uit.checkStrictMode)(t.it,"$recursiveAnchor: false is ignored")}};GU.default=lit});var jbe=H(VU=>{"use strict";_();Object.defineProperty(VU,"__esModule",{value:!0});var dit=WU(),hit={keyword:"$recursiveRef",schemaType:"string",code:t=>(0,dit.dynamicRef)(t,t.schema)};VU.default=hit});var qbe=H(HU=>{"use strict";_();Object.defineProperty(HU,"__esModule",{value:!0});var pit=KU(),mit=WU(),yit=Nbe(),git=jbe(),bit=[pit.default,mit.default,yit.default,git.default];HU.default=bit});var Lbe=H(ZU=>{"use strict";_();Object.defineProperty(ZU,"__esModule",{value:!0});var $be=mT(),vit={keyword:"dependentRequired",type:"object",schemaType:"object",error:$be.error,code:t=>(0,$be.validatePropertyDeps)(t)};ZU.default=vit});var Ube=H(JU=>{"use strict";_();Object.defineProperty(JU,"__esModule",{value:!0});var wit=mT(),_it={keyword:"dependentSchemas",type:"object",schemaType:"object",code:t=>(0,wit.validateSchemaDeps)(t)};JU.default=_it});var Fbe=H(YU=>{"use strict";_();Object.defineProperty(YU,"__esModule",{value:!0});var xit=jr(),Eit={keyword:["maxContains","minContains"],type:"array",schemaType:"number",code({keyword:t,parentSchema:e,it:r}){e.contains===void 0&&(0,xit.checkStrictMode)(r,`"${t}" without "contains" is ignored`)}};YU.default=Eit});var zbe=H(QU=>{"use strict";_();Object.defineProperty(QU,"__esModule",{value:!0});var Sit=Lbe(),Mit=Ube(),Ait=Fbe(),Pit=[Sit.default,Mit.default,Ait.default];QU.default=Pit});var Wbe=H(XU=>{"use strict";_();Object.defineProperty(XU,"__esModule",{value:!0});var tm=rr(),Kbe=jr(),Tit=Tf(),Rit={message:"must NOT have unevaluated properties",params:({params:t})=>(0,tm._)`{unevaluatedProperty: ${t.unevaluatedProperty}}`},Iit={keyword:"unevaluatedProperties",type:"object",schemaType:["boolean","object"],trackErrors:!0,error:Rit,code(t){let{gen:e,schema:r,data:n,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:s,props:a}=o;a instanceof tm.Name?e.if((0,tm._)`${a} !== true`,()=>e.forIn("key",n,b=>e.if(m(a,b),()=>u(b)))):a!==!0&&e.forIn("key",n,b=>a===void 0?u(b):e.if(p(a,b),()=>u(b))),o.props=!0,t.ok((0,tm._)`${i} === ${Tit.default.errors}`);function u(b){if(r===!1){t.setParams({unevaluatedProperty:b}),t.error(),s||e.break();return}if(!(0,Kbe.alwaysValidSchema)(o,r)){let A=e.name("valid");t.subschema({keyword:"unevaluatedProperties",dataProp:b,dataPropType:Kbe.Type.Str},A),s||e.if((0,tm.not)(A),()=>e.break())}}function m(b,A){return(0,tm._)`!${b} || !${b}[${A}]`}function p(b,A){let M=[];for(let S in b)b[S]===!0&&M.push((0,tm._)`${A} !== ${S}`);return(0,tm.and)(...M)}}};XU.default=Iit});var Vbe=H(eF=>{"use strict";_();Object.defineProperty(eF,"__esModule",{value:!0});var Zg=rr(),Gbe=jr(),kit={message:({params:{len:t}})=>(0,Zg.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Zg._)`{limit: ${t}}`},Oit={keyword:"unevaluatedItems",type:"array",schemaType:["boolean","object"],error:kit,code(t){let{gen:e,schema:r,data:n,it:i}=t,o=i.items||0;if(o===!0)return;let s=e.const("len",(0,Zg._)`${n}.length`);if(r===!1)t.setParams({len:o}),t.fail((0,Zg._)`${s} > ${o}`);else if(typeof r=="object"&&!(0,Gbe.alwaysValidSchema)(i,r)){let u=e.var("valid",(0,Zg._)`${s} <= ${o}`);e.if((0,Zg.not)(u),()=>a(u,o)),t.ok(u)}i.items=!0;function a(u,m){e.forRange("i",m,s,p=>{t.subschema({keyword:"unevaluatedItems",dataProp:p,dataPropType:Gbe.Type.Num},u),i.allErrors||e.if((0,Zg.not)(u),()=>e.break())})}}};eF.default=Oit});var Hbe=H(tF=>{"use strict";_();Object.defineProperty(tF,"__esModule",{value:!0});var Bit=Wbe(),Dit=Vbe(),Cit=[Bit.default,Dit.default];tF.default=Cit});var Zbe=H(rF=>{"use strict";_();Object.defineProperty(rF,"__esModule",{value:!0});var Qi=rr(),Nit={message:({schemaCode:t})=>(0,Qi.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Qi._)`{format: ${t}}`},jit={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Nit,code(t,e){let{gen:r,data:n,$data:i,schema:o,schemaCode:s,it:a}=t,{opts:u,errSchemaPath:m,schemaEnv:p,self:b}=a;if(!u.validateFormats)return;i?A():M();function A(){let S=r.scopeValue("formats",{ref:b.formats,code:u.code.formats}),P=r.const("fDef",(0,Qi._)`${S}[${s}]`),k=r.let("fType"),R=r.let("format");r.if((0,Qi._)`typeof ${P} == "object" && !(${P} instanceof RegExp)`,()=>r.assign(k,(0,Qi._)`${P}.type || "string"`).assign(R,(0,Qi._)`${P}.validate`),()=>r.assign(k,(0,Qi._)`"string"`).assign(R,P)),t.fail$data((0,Qi.or)(B(),I()));function B(){return u.strictSchema===!1?Qi.nil:(0,Qi._)`${s} && !${R}`}function I(){let q=p.$async?(0,Qi._)`(${P}.async ? await ${R}(${n}) : ${R}(${n}))`:(0,Qi._)`${R}(${n})`,$=(0,Qi._)`(typeof ${R} == "function" ? ${q} : ${R}.test(${n}))`;return(0,Qi._)`${R} && ${R} !== true && ${k} === ${e} && !${$}`}}function M(){let S=b.formats[o];if(!S){B();return}if(S===!0)return;let[P,k,R]=I(S);P===e&&t.pass(q());function B(){if(u.strictSchema===!1){b.logger.warn($());return}throw new Error($());function $(){return`unknown format "${o}" ignored in schema at path "${m}"`}}function I($){let U=$ instanceof RegExp?(0,Qi.regexpCode)($):u.code.formats?(0,Qi._)`${u.code.formats}${(0,Qi.getProperty)(o)}`:void 0,F=r.scopeValue("formats",{key:o,ref:$,code:U});return typeof $=="object"&&!($ instanceof RegExp)?[$.type||"string",$.validate,(0,Qi._)`${F}.validate`]:["string",$,F]}function q(){if(typeof S=="object"&&!(S instanceof RegExp)&&S.async){if(!p.$async)throw new Error("async format in sync schema");return(0,Qi._)`await ${R}(${n})`}return typeof k=="function"?(0,Qi._)`${R}(${n})`:(0,Qi._)`${R}.test(${n})`}}}};rF.default=jit});var Jbe=H(nF=>{"use strict";_();Object.defineProperty(nF,"__esModule",{value:!0});var qit=Zbe(),$it=[qit.default];nF.default=$it});var Ybe=H(r2=>{"use strict";_();Object.defineProperty(r2,"__esModule",{value:!0});r2.contentVocabulary=r2.metadataVocabulary=void 0;r2.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];r2.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Xbe=H(iF=>{"use strict";_();Object.defineProperty(iF,"__esModule",{value:!0});var Lit=zge(),Uit=nbe(),Fit=Ibe(),zit=qbe(),Kit=zbe(),Wit=Hbe(),Git=Jbe(),Qbe=Ybe(),Vit=[zit.default,Lit.default,Uit.default,(0,Fit.default)(!0),Git.default,Qbe.metadataVocabulary,Qbe.contentVocabulary,Kit.default,Wit.default];iF.default=Vit});var eve=H(u3=>{"use strict";_();Object.defineProperty(u3,"__esModule",{value:!0});u3.DiscrError=void 0;var Hit;(function(t){t.Tag="tag",t.Mapping="mapping"})(Hit=u3.DiscrError||(u3.DiscrError={}))});var rve=H(sF=>{"use strict";_();Object.defineProperty(sF,"__esModule",{value:!0});var n2=rr(),oF=eve(),tve=ZS(),Zit=jr(),Jit={message:({params:{discrError:t,tagName:e}})=>t===oF.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,n2._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Yit={keyword:"discriminator",type:"object",schemaType:"object",error:Jit,code(t){let{gen:e,data:r,schema:n,parentSchema:i,it:o}=t,{oneOf:s}=i;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!s)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),m=e.const("tag",(0,n2._)`${r}${(0,n2.getProperty)(a)}`);e.if((0,n2._)`typeof ${m} == "string"`,()=>p(),()=>t.error(!1,{discrError:oF.DiscrError.Tag,tag:m,tagName:a})),t.ok(u);function p(){let M=A();e.if(!1);for(let S in M)e.elseIf((0,n2._)`${m} === ${S}`),e.assign(u,b(M[S]));e.else(),t.error(!1,{discrError:oF.DiscrError.Mapping,tag:m,tagName:a}),e.endIf()}function b(M){let S=e.name("valid"),P=t.subschema({keyword:"oneOf",schemaProp:M},S);return t.mergeEvaluated(P,n2.Name),S}function A(){var M;let S={},P=R(i),k=!0;for(let q=0;q<s.length;q++){let $=s[q];$?.$ref&&!(0,Zit.schemaHasRulesButRef)($,o.self.RULES)&&($=tve.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,$?.$ref),$ instanceof tve.SchemaEnv&&($=$.schema));let U=(M=$?.properties)===null||M===void 0?void 0:M[a];if(typeof U!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);k=k&&(P||R($)),B(U,q)}if(!k)throw new Error(`discriminator: "${a}" must be required`);return S;function R({required:q}){return Array.isArray(q)&&q.includes(a)}function B(q,$){if(q.const)I(q.const,$);else if(q.enum)for(let U of q.enum)I(U,$);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function I(q,$){if(typeof q!="string"||q in S)throw new Error(`discriminator: "${a}" values must be unique strings`);S[q]=$}}}};sF.default=Yit});var nve=H((fzt,Qit)=>{Qit.exports={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/schema",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/core":!0,"https://json-schema.org/draft/2020-12/vocab/applicator":!0,"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0,"https://json-schema.org/draft/2020-12/vocab/validation":!0,"https://json-schema.org/draft/2020-12/vocab/meta-data":!0,"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0,"https://json-schema.org/draft/2020-12/vocab/content":!0},$dynamicAnchor:"meta",title:"Core and Validation specifications meta-schema",allOf:[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/unevaluated"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}],type:["object","boolean"],$comment:"This meta-schema also defines keywords that have appeared in previous drafts in order to prevent incompatible extensions as they remain in common use.",properties:{definitions:{$comment:'"definitions" has been replaced by "$defs".',type:"object",additionalProperties:{$dynamicRef:"#meta"},deprecated:!0,default:{}},dependencies:{$comment:'"dependencies" has been split and replaced by "dependentSchemas" and "dependentRequired" in order to serve their differing semantics.',type:"object",additionalProperties:{anyOf:[{$dynamicRef:"#meta"},{$ref:"meta/validation#/$defs/stringArray"}]},deprecated:!0,default:{}},$recursiveAnchor:{$comment:'"$recursiveAnchor" has been replaced by "$dynamicAnchor".',$ref:"meta/core#/$defs/anchorString",deprecated:!0},$recursiveRef:{$comment:'"$recursiveRef" has been replaced by "$dynamicRef".',$ref:"meta/core#/$defs/uriReferenceString",deprecated:!0}}}});var ive=H((uzt,Xit)=>{Xit.exports={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/meta/applicator",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/applicator":!0},$dynamicAnchor:"meta",title:"Applicator vocabulary meta-schema",type:["object","boolean"],properties:{prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"#meta"},contains:{$dynamicRef:"#meta"},additionalProperties:{$dynamicRef:"#meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},propertyNames:{format:"regex"},default:{}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},propertyNames:{$dynamicRef:"#meta"},if:{$dynamicRef:"#meta"},then:{$dynamicRef:"#meta"},else:{$dynamicRef:"#meta"},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"#meta"}},$defs:{schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"#meta"}}}}});var ove=H((lzt,eot)=>{eot.exports={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/meta/unevaluated",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0},$dynamicAnchor:"meta",title:"Unevaluated applicator vocabulary meta-schema",type:["object","boolean"],properties:{unevaluatedItems:{$dynamicRef:"#meta"},unevaluatedProperties:{$dynamicRef:"#meta"}}}});var sve=H((dzt,tot)=>{tot.exports={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/meta/content",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/content":!0},$dynamicAnchor:"meta",title:"Content vocabulary meta-schema",type:["object","boolean"],properties:{contentEncoding:{type:"string"},contentMediaType:{type:"string"},contentSchema:{$dynamicRef:"#meta"}}}});var ave=H((hzt,rot)=>{rot.exports={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/meta/core",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/core":!0},$dynamicAnchor:"meta",title:"Core vocabulary meta-schema",type:["object","boolean"],properties:{$id:{$ref:"#/$defs/uriReferenceString",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{$ref:"#/$defs/uriString"},$ref:{$ref:"#/$defs/uriReferenceString"},$anchor:{$ref:"#/$defs/anchorString"},$dynamicRef:{$ref:"#/$defs/uriReferenceString"},$dynamicAnchor:{$ref:"#/$defs/anchorString"},$vocabulary:{type:"object",propertyNames:{$ref:"#/$defs/uriString"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"#meta"}}},$defs:{anchorString:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"},uriString:{type:"string",format:"uri"},uriReferenceString:{type:"string",format:"uri-reference"}}}});var cve=H((pzt,not)=>{not.exports={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/meta/format-annotation",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0},$dynamicAnchor:"meta",title:"Format vocabulary meta-schema for annotation results",type:["object","boolean"],properties:{format:{type:"string"}}}});var fve=H((mzt,iot)=>{iot.exports={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/meta/meta-data",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/meta-data":!0},$dynamicAnchor:"meta",title:"Meta-data vocabulary meta-schema",type:["object","boolean"],properties:{title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean",default:!1},readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0}}}});var uve=H((yzt,oot)=>{oot.exports={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://json-schema.org/draft/2020-12/meta/validation",$vocabulary:{"https://json-schema.org/draft/2020-12/vocab/validation":!0},$dynamicAnchor:"meta",title:"Validation vocabulary meta-schema",type:["object","boolean"],properties:{type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]},const:!0,enum:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger",default:1},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeIntegerDefault0"},required:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}}},$defs:{nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{$ref:"#/$defs/nonNegativeInteger",default:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}}}});var lve=H(aF=>{"use strict";_();Object.defineProperty(aF,"__esModule",{value:!0});var sot=nve(),aot=ive(),cot=ove(),fot=sve(),uot=ave(),lot=cve(),dot=fve(),hot=uve(),pot=["/properties"];function mot(t){return[sot,aot,cot,fot,uot,e(this,lot),dot,e(this,hot)].forEach(r=>this.addMetaSchema(r,void 0,!1)),this;function e(r,n){return t?r.$dataMetaSchema(n,pot):n}}aF.default=mot});var fF=H((mi,dve)=>{"use strict";_();Object.defineProperty(mi,"__esModule",{value:!0});mi.MissingRefError=mi.ValidationError=mi.CodeGen=mi.Name=mi.nil=mi.stringify=mi.str=mi._=mi.KeywordCxt=void 0;var yot=qge(),got=Xbe(),bot=rve(),vot=lve(),cF="https://json-schema.org/draft/2020-12/schema",_T=class extends yot.default{constructor(e={}){super({...e,dynamicRef:!0,next:!0,unevaluated:!0})}_addVocabularies(){super._addVocabularies(),got.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(bot.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema();let{$data:e,meta:r}=this.opts;r&&(vot.default.call(this,e),this.refs["http://json-schema.org/schema"]=cF)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(cF)?cF:void 0)}};dve.exports=mi=_T;Object.defineProperty(mi,"__esModule",{value:!0});mi.default=_T;var wot=HS();Object.defineProperty(mi,"KeywordCxt",{enumerable:!0,get:function(){return wot.KeywordCxt}});var i2=rr();Object.defineProperty(mi,"_",{enumerable:!0,get:function(){return i2._}});Object.defineProperty(mi,"str",{enumerable:!0,get:function(){return i2.str}});Object.defineProperty(mi,"stringify",{enumerable:!0,get:function(){return i2.stringify}});Object.defineProperty(mi,"nil",{enumerable:!0,get:function(){return i2.nil}});Object.defineProperty(mi,"Name",{enumerable:!0,get:function(){return i2.Name}});Object.defineProperty(mi,"CodeGen",{enumerable:!0,get:function(){return i2.CodeGen}});var _ot=tT();Object.defineProperty(mi,"ValidationError",{enumerable:!0,get:function(){return _ot.default}});var xot=rT();Object.defineProperty(mi,"MissingRefError",{enumerable:!0,get:function(){return xot.default}})});var lF=H((MGt,mve)=>{_();var Mot=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,ET=()=>Mot.now(),Aot=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),uF=t=>t===1/0||Aot(t),h3=class{constructor({max:e=1/0,ttl:r,updateAgeOnGet:n=!1,checkAgeOnGet:i=!1,noUpdateTTL:o=!1,dispose:s,noDisposeOnSet:a=!1}={}){if(this.expirations=Object.create(null),this.data=new Map,this.expirationMap=new Map,r!==void 0&&!uF(r))throw new TypeError("ttl must be positive integer or Infinity if set");if(!uF(e))throw new TypeError("max must be positive integer or Infinity");if(this.ttl=r,this.max=e,this.updateAgeOnGet=!!n,this.checkAgeOnGet=!!i,this.noUpdateTTL=!!o,this.noDisposeOnSet=!!a,s!==void 0){if(typeof s!="function")throw new TypeError("dispose must be function if set");this.dispose=s}this.timer=void 0,this.timerExpiration=void 0}setTimer(e,r){if(this.timerExpiration<e)return;this.timer&&clearTimeout(this.timer);let n=setTimeout(()=>{this.timer=void 0,this.timerExpiration=void 0,this.purgeStale();for(let i in this.expirations){this.setTimer(i,i-ET());break}},r);n.unref&&n.unref(),this.timerExpiration=e,this.timer=n}cancelTimer(){this.timer&&(clearTimeout(this.timer),this.timerExpiration=void 0,this.timer=void 0)}cancelTimers(){return O.default.emitWarning('TTLCache.cancelTimers has been renamed to TTLCache.cancelTimer (no "s"), and will be removed in the next major version update'),this.cancelTimer()}clear(){let e=this.dispose!==h3.prototype.dispose?[...this]:[];this.data.clear(),this.expirationMap.clear(),this.cancelTimer(),this.expirations=Object.create(null);for(let[r,n]of e)this.dispose(n,r,"delete")}setTTL(e,r=this.ttl){let n=this.expirationMap.get(e);if(n!==void 0){let i=this.expirations[n];!i||i.length<=1?delete this.expirations[n]:this.expirations[n]=i.filter(o=>o!==e)}if(r!==1/0){let i=Math.floor(ET()+r);this.expirationMap.set(e,i),this.expirations[i]||(this.expirations[i]=[],this.setTimer(i,r)),this.expirations[i].push(e)}else this.expirationMap.set(e,1/0)}set(e,r,{ttl:n=this.ttl,noUpdateTTL:i=this.noUpdateTTL,noDisposeOnSet:o=this.noDisposeOnSet}={}){if(!uF(n))throw new TypeError("ttl must be positive integer or Infinity");if(this.expirationMap.has(e)){i||this.setTTL(e,n);let s=this.data.get(e);s!==r&&(this.data.set(e,r),o||this.dispose(s,e,"set"))}else this.setTTL(e,n),this.data.set(e,r);for(;this.size>this.max;)this.purgeToCapacity();return this}has(e){return this.data.has(e)}getRemainingTTL(e){let r=this.expirationMap.get(e);return r===1/0?r:r!==void 0?Math.max(0,Math.ceil(r-ET())):0}get(e,{updateAgeOnGet:r=this.updateAgeOnGet,ttl:n=this.ttl,checkAgeOnGet:i=this.checkAgeOnGet}={}){let o=this.data.get(e);if(i&&this.getRemainingTTL(e)===0){this.delete(e);return}return r&&this.setTTL(e,n),o}dispose(e,r){}delete(e){let r=this.expirationMap.get(e);if(r!==void 0){let n=this.data.get(e);this.data.delete(e),this.expirationMap.delete(e);let i=this.expirations[r];return i&&(i.length<=1?delete this.expirations[r]:this.expirations[r]=i.filter(o=>o!==e)),this.dispose(n,e,"delete"),this.size===0&&this.cancelTimer(),!0}return!1}purgeToCapacity(){for(let e in this.expirations){let r=this.expirations[e];if(this.size-r.length>=this.max){delete this.expirations[e];let n=[];for(let i of r)n.push([i,this.data.get(i)]),this.data.delete(i),this.expirationMap.delete(i);for(let[i,o]of n)this.dispose(o,i,"evict")}else{let n=this.size-this.max,i=[];for(let o of r.splice(0,n))i.push([o,this.data.get(o)]),this.data.delete(o),this.expirationMap.delete(o);for(let[o,s]of i)this.dispose(s,o,"evict");return}}}get size(){return this.data.size}purgeStale(){let e=Math.ceil(ET());for(let r in this.expirations){if(r==="Infinity"||r>e)return;let n=[...this.expirations[r]||[]],i=[];delete this.expirations[r];for(let o of n)i.push([o,this.data.get(o)]),this.data.delete(o),this.expirationMap.delete(o);for(let[o,s]of i)this.dispose(s,o,"stale")}this.size===0&&this.cancelTimer()}*entries(){for(let e in this.expirations)for(let r of this.expirations[e])yield[r,this.data.get(r)]}*keys(){for(let e in this.expirations)for(let r of this.expirations[e])yield r}*values(){for(let e in this.expirations)for(let r of this.expirations[e])yield this.data.get(r)}[Symbol.iterator](){return this.entries()}};mve.exports=h3});var Ove=H(kve=>{"use strict";_();kve.supports=function(...e){let r=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})}});var ju=H((VVt,Bve)=>{"use strict";_();Bve.exports=class extends Error{constructor(e,r){super(e||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var SF=H((ZVt,Dve)=>{"use strict";_();var EF=null;Dve.exports=function(){return EF===null&&(EF={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),EF}});var PF=H(Cve=>{"use strict";_();var MF=ju(),ist=new Set(["buffer","view","utf8"]),AF=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!ist.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new MF(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new MF(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new MF(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};Cve.Encoding=AF});var kF=H(AT=>{"use strict";_();var{Buffer:RF}=Ut()||{},{Encoding:IF}=PF(),ost=SF(),b3=class extends IF{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new v3({encode:this.encode,decode:e=>this.decode(RF.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},v3=class extends IF{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new b3({encode:e=>{let r=this.encode(e);return RF.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},TF=class extends IF{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new b3({encode:e=>RF.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:r}=ost();return new v3({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(r.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};AT.BufferFormat=b3;AT.ViewFormat=v3;AT.UTF8Format=TF});var $ve=H(eb=>{"use strict";_();var{Buffer:aa}=Ut()||{Buffer:{isBuffer:()=>!1}},{textEncoder:jve,textDecoder:Nve}=SF()(),{BufferFormat:w3,ViewFormat:OF,UTF8Format:qve}=kF(),PT=t=>t;eb.utf8=new qve({encode:function(t){return aa.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?Nve.decode(t):String(t)},decode:PT,name:"utf8",createViewTranscoder(){return new OF({encode:function(t){return ArrayBuffer.isView(t)?t:jve.encode(t)},decode:function(t){return Nve.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new w3({encode:function(t){return aa.isBuffer(t)?t:ArrayBuffer.isView(t)?aa.from(t.buffer,t.byteOffset,t.byteLength):aa.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});eb.json=new qve({encode:JSON.stringify,decode:JSON.parse,name:"json"});eb.buffer=new w3({encode:function(t){return aa.isBuffer(t)?t:ArrayBuffer.isView(t)?aa.from(t.buffer,t.byteOffset,t.byteLength):aa.from(String(t),"utf8")},decode:PT,name:"buffer",createViewTranscoder(){return new OF({encode:function(t){return ArrayBuffer.isView(t)?t:aa.from(String(t),"utf8")},decode:function(t){return aa.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});eb.view=new OF({encode:function(t){return ArrayBuffer.isView(t)?t:jve.encode(t)},decode:PT,name:"view",createBufferTranscoder(){return new w3({encode:function(t){return aa.isBuffer(t)?t:ArrayBuffer.isView(t)?aa.from(t.buffer,t.byteOffset,t.byteLength):aa.from(String(t),"utf8")},decode:PT,name:`${this.name}+buffer`})}});eb.hex=new w3({encode:function(t){return aa.isBuffer(t)?t:aa.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});eb.base64=new w3({encode:function(t){return aa.isBuffer(t)?t:aa.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"})});var Fve=H(Uve=>{"use strict";_();var Lve=ju(),RT=$ve(),{Encoding:sst}=PF(),{BufferFormat:ast,ViewFormat:cst,UTF8Format:fst}=kF(),_3=Symbol("formats"),TT=Symbol("encodings"),ust=new Set(["buffer","view","utf8"]),BF=class{constructor(e){if(Array.isArray(e)){if(!e.every(r=>ust.has(r)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[TT]=new Map,this[_3]=new Set(e);for(let r in RT)try{this.encoding(r)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[TT].values()))}encoding(e){let r=this[TT].get(e);if(r===void 0){if(typeof e=="string"&&e!==""){if(r=pst[e],!r)throw new Lve(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");r=lst(e)}let{name:n,format:i}=r;if(!this[_3].has(i))if(this[_3].has("view"))r=r.createViewTranscoder();else if(this[_3].has("buffer"))r=r.createBufferTranscoder();else if(this[_3].has("utf8"))r=r.createUTF8Transcoder();else throw new Lve(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,n,r.name,r.commonName])this[TT].set(o,r)}return r}};Uve.Transcoder=BF;function lst(t){if(t instanceof sst)return t;let e="type"in t&&typeof t.type=="string"?t.type:void 0,r=t.name||e||`anonymous-${mst++}`;switch(dst(t)){case"view":return new cst({...t,name:r});case"utf8":return new fst({...t,name:r});case"buffer":return new ast({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function dst(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}var hst={binary:RT.buffer,"utf-8":RT.utf8},pst={...RT,...hst},mst=0});var Kve=H((oHt,zve)=>{_();zve.exports=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t)});var x3=H(DF=>{"use strict";_();var Wve=Kve();DF.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(n,i){t=function(o,s){o?i(o):n(s)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};DF.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){Wve(()=>e(null,r))}).catch(function(r){Wve(()=>e(r))})}});var IT=H(CF=>{"use strict";_();CF.getCallback=function(t,e){return typeof t=="function"?t:e};CF.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}}});var cm=H(DT=>{"use strict";_();var{fromCallback:NF}=x3(),Nc=ju(),{getOptions:jF,getCallback:Gve}=IT(),tb=Symbol("promise"),d2=Symbol("callback"),hd=Symbol("working"),rb=Symbol("handleOne"),Hh=Symbol("handleMany"),qF=Symbol("autoClose"),sm=Symbol("finishWork"),pd=Symbol("returnMany"),nm=Symbol("closing"),E3=Symbol("handleClose"),kT=Symbol("closed"),S3=Symbol("closeCallbacks"),om=Symbol("keyEncoding"),nb=Symbol("valueEncoding"),$F=Symbol("abortOnClose"),OT=Symbol("legacy"),LF=Symbol("keys"),UF=Symbol("values"),im=Symbol("limit"),Df=Symbol("count"),BT=Object.freeze({}),yst=()=>{},Vve=!1,M3=class{constructor(e,r,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof r!="object"||r===null)throw new TypeError("The second argument must be an options object");this[kT]=!1,this[S3]=[],this[hd]=!1,this[nm]=!1,this[qF]=!1,this[d2]=null,this[rb]=this[rb].bind(this),this[Hh]=this[Hh].bind(this),this[E3]=this[E3].bind(this),this[om]=r[om],this[nb]=r[nb],this[OT]=n,this[im]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[Df]=0,this[$F]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[Df]}get limit(){return this[im]}next(e){let r;if(e===void 0)r=new Promise((n,i)=>{e=(o,s,a)=>{o?i(o):this[OT]?s===void 0&&a===void 0?n():n([s,a]):n(s)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[nm]?this.nextTick(e,new Nc("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[hd]?this.nextTick(e,new Nc("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[hd]=!0,this[d2]=e,this[Df]>=this[im]?this.nextTick(this[rb],null):this._next(this[rb])),r}_next(e){this.nextTick(e)}nextv(e,r,n){return n=Gve(r,n),n=NF(n,tb),r=jF(r,BT),Number.isInteger(e)?(this[nm]?this.nextTick(n,new Nc("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[hd]?this.nextTick(n,new Nc("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[im]<1/0&&(e=Math.min(e,this[im]-this[Df])),this[hd]=!0,this[d2]=n,e<=0?this.nextTick(this[Hh],null,[]):this._nextv(e,r,this[Hh])),n[tb]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[tb])}_nextv(e,r,n){let i=[],o=(s,a,u)=>{if(s)return n(s);if(this[OT]?a===void 0&&u===void 0:a===void 0)return n(null,i);i.push(this[OT]?[a,u]:a),i.length===e?n(null,i):this._next(o)};this._next(o)}all(e,r){return r=Gve(e,r),r=NF(r,tb),e=jF(e,BT),this[nm]?this.nextTick(r,new Nc("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[hd]?this.nextTick(r,new Nc("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[hd]=!0,this[d2]=r,this[qF]=!0,this[Df]>=this[im]?this.nextTick(this[Hh],null,[]):this._all(e,this[Hh])),r[tb]}_all(e,r){let n=this[Df],i=[],o=()=>{let a=this[im]<1/0?Math.min(1e3,this[im]-n):1e3;a<=0?this.nextTick(r,null,i):this._nextv(a,BT,s)},s=(a,u)=>{a?r(a):u.length===0?r(null,i):(i.push.apply(i,u),n+=u.length,o())};o()}[sm](){let e=this[d2];return this[$F]&&e===null?yst:(this[hd]=!1,this[d2]=null,this[nm]&&this._close(this[E3]),e)}[pd](e,r,n){this[qF]?this.close(e.bind(null,r,n)):e(r,n)}seek(e,r){if(r=jF(r,BT),!this[nm]){if(this[hd])throw new Nc("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(r.keyEncoding||this[om]),i=n.format;r.keyEncoding!==i&&(r={...r,keyEncoding:i});let o=this.db.prefixKey(n.encode(e),i);this._seek(o,r)}}}_seek(e,r){throw new Nc("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=NF(e,tb),this[kT]?this.nextTick(e):this[nm]?this[S3].push(e):(this[nm]=!0,this[S3].push(e),this[hd]?this[$F]&&this[sm]()(new Nc("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[E3])),e[tb]}_close(e){this.nextTick(e)}[E3](){this[kT]=!0,this.db.detachResource(this);let e=this[S3];this[S3]=[];for(let r of e)r()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[kT]||await this.close()}}},h2=class extends M3{constructor(e,r){super(e,r,!0),this[LF]=r.keys!==!1,this[UF]=r.values!==!1}[rb](e,r,n){let i=this[sm]();if(e)return i(e);try{r=this[LF]&&r!==void 0?this[om].decode(r):void 0,n=this[UF]&&n!==void 0?this[nb].decode(n):void 0}catch(o){return i(new am("entry",o))}r===void 0&&n===void 0||this[Df]++,i(null,r,n)}[Hh](e,r){let n=this[sm]();if(e)return this[pd](n,e);try{for(let i of r){let o=i[0],s=i[1];i[0]=this[LF]&&o!==void 0?this[om].decode(o):void 0,i[1]=this[UF]&&s!==void 0?this[nb].decode(s):void 0}}catch(i){return this[pd](n,new am("entries",i))}this[Df]+=r.length,this[pd](n,null,r)}end(e){return!Vve&&typeof console<"u"&&(Vve=!0,console.warn(new Nc("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},FF=class extends M3{constructor(e,r){super(e,r,!1)}[rb](e,r){let n=this[sm]();if(e)return n(e);try{r=r!==void 0?this[om].decode(r):void 0}catch(i){return n(new am("key",i))}r!==void 0&&this[Df]++,n(null,r)}[Hh](e,r){let n=this[sm]();if(e)return this[pd](n,e);try{for(let i=0;i<r.length;i++){let o=r[i];r[i]=o!==void 0?this[om].decode(o):void 0}}catch(i){return this[pd](n,new am("keys",i))}this[Df]+=r.length,this[pd](n,null,r)}},zF=class extends M3{constructor(e,r){super(e,r,!1)}[rb](e,r){let n=this[sm]();if(e)return n(e);try{r=r!==void 0?this[nb].decode(r):void 0}catch(i){return n(new am("value",i))}r!==void 0&&this[Df]++,n(null,r)}[Hh](e,r){let n=this[sm]();if(e)return this[pd](n,e);try{for(let i=0;i<r.length;i++){let o=r[i];r[i]=o!==void 0?this[nb].decode(o):void 0}}catch(i){return this[pd](n,new am("values",i))}this[Df]+=r.length,this[pd](n,null,r)}},am=class extends Nc{constructor(e,r){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:r})}};for(let t of["_ended property","_nexting property","_end method"])Object.defineProperty(h2.prototype,t.split(" ")[0],{get(){throw new Nc(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Nc(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});h2.keyEncoding=om;h2.valueEncoding=nb;DT.AbstractIterator=h2;DT.AbstractKeyIterator=FF;DT.AbstractValueIterator=zF});var Hve=H(KF=>{"use strict";_();var{AbstractKeyIterator:gst,AbstractValueIterator:bst}=cm(),ib=Symbol("iterator"),A3=Symbol("callback"),p2=Symbol("handleOne"),ob=Symbol("handleMany"),P3=class extends gst{constructor(e,r){super(e,r),this[ib]=e.iterator({...r,keys:!0,values:!1}),this[p2]=this[p2].bind(this),this[ob]=this[ob].bind(this)}},CT=class extends bst{constructor(e,r){super(e,r),this[ib]=e.iterator({...r,keys:!1,values:!0}),this[p2]=this[p2].bind(this),this[ob]=this[ob].bind(this)}};for(let t of[P3,CT]){let e=t===P3,r=e?n=>n[0]:n=>n[1];t.prototype._next=function(n){this[A3]=n,this[ib].next(this[p2])},t.prototype[p2]=function(n,i,o){let s=this[A3];n?s(n):s(null,e?i:o)},t.prototype._nextv=function(n,i,o){this[A3]=o,this[ib].nextv(n,i,this[ob])},t.prototype._all=function(n,i){this[A3]=i,this[ib].all(n,this[ob])},t.prototype[ob]=function(n,i){let o=this[A3];n?o(n):o(null,i.map(r))},t.prototype._seek=function(n,i){this[ib].seek(n,i)},t.prototype._close=function(n){this[ib].close(n)}}KF.DefaultKeyIterator=P3;KF.DefaultValueIterator=CT});var Zve=H(UT=>{"use strict";_();var{AbstractIterator:vst,AbstractKeyIterator:wst,AbstractValueIterator:_st}=cm(),WF=ju(),ic=Symbol("nut"),$T=Symbol("undefer"),LT=Symbol("factory"),NT=class extends vst{constructor(e,r){super(e,r),this[ic]=null,this[LT]=()=>e.iterator(r),this.db.defer(()=>this[$T]())}},jT=class extends wst{constructor(e,r){super(e,r),this[ic]=null,this[LT]=()=>e.keys(r),this.db.defer(()=>this[$T]())}},qT=class extends _st{constructor(e,r){super(e,r),this[ic]=null,this[LT]=()=>e.values(r),this.db.defer(()=>this[$T]())}};for(let t of[NT,jT,qT])t.prototype[$T]=function(){this.db.status==="open"&&(this[ic]=this[LT]())},t.prototype._next=function(e){this[ic]!==null?this[ic].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new WF("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,r,n){this[ic]!==null?this[ic].nextv(e,r,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,r,n)):this.nextTick(n,new WF("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,r){this[ic]!==null?this[ic].all(r):this.db.status==="opening"?this.db.defer(()=>this._all(e,r)):this.nextTick(r,new WF("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,r){this[ic]!==null?this[ic]._seek(e,r):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,r))},t.prototype._close=function(e){this[ic]!==null?this[ic].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};UT.DeferredIterator=NT;UT.DeferredKeyIterator=jT;UT.DeferredValueIterator=qT});var VF=H(Yve=>{"use strict";_();var{fromCallback:Jve}=x3(),FT=ju(),{getCallback:xst,getOptions:Est}=IT(),zT=Symbol("promise"),Cf=Symbol("status"),m2=Symbol("operations"),T3=Symbol("finishClose"),y2=Symbol("closeCallbacks"),GF=class{constructor(e){if(typeof e!="object"||e===null){let r=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${r}`)}this[m2]=[],this[y2]=[],this[Cf]="open",this[T3]=this[T3].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[m2].length}put(e,r,n){if(this[Cf]!=="open")throw new FT("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(r);if(i)throw i;let o=n&&n.sublevel!=null?n.sublevel:this.db,s=n,a=o.keyEncoding(n&&n.keyEncoding),u=o.valueEncoding(n&&n.valueEncoding),m=a.format;n={...n,keyEncoding:m,valueEncoding:u.format},o!==this.db&&(n.sublevel=null);let p=o.prefixKey(a.encode(e),m),b=u.encode(r);return this._put(p,b,n),this[m2].push({...s,type:"put",key:e,value:r}),this}_put(e,r,n){}del(e,r){if(this[Cf]!=="open")throw new FT("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=r&&r.sublevel!=null?r.sublevel:this.db,o=r,s=i.keyEncoding(r&&r.keyEncoding),a=s.format;return r={...r,keyEncoding:a},i!==this.db&&(r.sublevel=null),this._del(i.prefixKey(s.encode(e),a),r),this[m2].push({...o,type:"del",key:e}),this}_del(e,r){}clear(){if(this[Cf]!=="open")throw new FT("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[m2]=[],this}_clear(){}write(e,r){return r=xst(e,r),r=Jve(r,zT),e=Est(e),this[Cf]!=="open"?this.nextTick(r,new FT("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(r):(this[Cf]="writing",this._write(e,n=>{this[Cf]="closing",this[y2].push(()=>r(n)),n||this.db.emit("batch",this[m2]),this._close(this[T3])})),r[zT]}_write(e,r){}close(e){return e=Jve(e,zT),this[Cf]==="closing"?this[y2].push(e):this[Cf]==="closed"?this.nextTick(e):(this[y2].push(e),this[Cf]!=="writing"&&(this[Cf]="closing",this._close(this[T3]))),e[zT]}_close(e){this.nextTick(e)}[T3](){this[Cf]="closed",this.db.detachResource(this);let e=this[y2];this[y2]=[];for(let r of e)r()}};Yve.AbstractChainedBatch=GF});var Xve=H(Qve=>{"use strict";_();var{AbstractChainedBatch:Sst}=VF(),Mst=ju(),g2=Symbol("encoded"),HF=class extends Sst{constructor(e){super(e),this[g2]=[]}_put(e,r,n){this[g2].push({...n,type:"put",key:e,value:r})}_del(e,r){this[g2].push({...r,type:"del",key:e})}_clear(){this[g2]=[]}_write(e,r){this.db.status==="opening"?this.db.defer(()=>this._write(e,r)):this.db.status==="open"?this[g2].length===0?this.nextTick(r):this.db._batch(this[g2],e,r):this.nextTick(r,new Mst("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};Qve.DefaultChainedBatch=HF});var rwe=H((_Ht,twe)=>{"use strict";_();var ewe=ju(),Ast=Object.prototype.hasOwnProperty,Pst=new Set(["lt","lte","gt","gte"]);twe.exports=function(t,e){let r={};for(let n in t)if(Ast.call(t,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new ewe(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new ewe("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});Pst.has(n)?r[n]=e.encode(t[n]):r[n]=t[n]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r}});var ZF=H((EHt,iwe)=>{_();var nwe;iwe.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):t=>(nwe||(nwe=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0))});var awe=H((MHt,swe)=>{"use strict";_();var owe=ZF();swe.exports=function(t,...e){e.length===0?owe(t):owe(()=>t(...e))}});var cwe=H(KT=>{"use strict";_();var{AbstractIterator:Tst,AbstractKeyIterator:Rst,AbstractValueIterator:Ist}=cm(),b2=Symbol("unfix"),qu=Symbol("iterator"),sb=Symbol("handleOne"),fm=Symbol("handleMany"),Zh=Symbol("callback"),R3=class extends Tst{constructor(e,r,n,i){super(e,r),this[qu]=n,this[b2]=i,this[sb]=this[sb].bind(this),this[fm]=this[fm].bind(this),this[Zh]=null}[sb](e,r,n){let i=this[Zh];if(e)return i(e);r!==void 0&&(r=this[b2](r)),i(e,r,n)}[fm](e,r){let n=this[Zh];if(e)return n(e);for(let i of r){let o=i[0];o!==void 0&&(i[0]=this[b2](o))}n(e,r)}},I3=class extends Rst{constructor(e,r,n,i){super(e,r),this[qu]=n,this[b2]=i,this[sb]=this[sb].bind(this),this[fm]=this[fm].bind(this),this[Zh]=null}[sb](e,r){let n=this[Zh];if(e)return n(e);r!==void 0&&(r=this[b2](r)),n(e,r)}[fm](e,r){let n=this[Zh];if(e)return n(e);for(let i=0;i<r.length;i++){let o=r[i];o!==void 0&&(r[i]=this[b2](o))}n(e,r)}},k3=class extends Ist{constructor(e,r,n){super(e,r),this[qu]=n}};for(let t of[R3,I3])t.prototype._next=function(e){this[Zh]=e,this[qu].next(this[sb])},t.prototype._nextv=function(e,r,n){this[Zh]=n,this[qu].nextv(e,r,this[fm])},t.prototype._all=function(e,r){this[Zh]=r,this[qu].all(e,this[fm])};for(let t of[k3])t.prototype._next=function(e){this[qu].next(e)},t.prototype._nextv=function(e,r,n){this[qu].nextv(e,r,n)},t.prototype._all=function(e,r){this[qu].all(e,r)};for(let t of[R3,I3,k3])t.prototype._seek=function(e,r){this[qu].seek(e,r)},t.prototype._close=function(e){this[qu].close(e)};KT.AbstractSublevelIterator=R3;KT.AbstractSublevelKeyIterator=I3;KT.AbstractSublevelValueIterator=k3});var dwe=H((RHt,lwe)=>{"use strict";_();var JF=ju(),{Buffer:XF}=Ut()||{},{AbstractSublevelIterator:kst,AbstractSublevelKeyIterator:Ost,AbstractSublevelValueIterator:Bst}=cwe(),Jh=Symbol("prefix"),fwe=Symbol("upperBound"),O3=Symbol("prefixRange"),jc=Symbol("parent"),YF=Symbol("unfix"),uwe=new TextEncoder,Dst={separator:"!"};lwe.exports=function({AbstractLevel:t}){class e extends t{static defaults(n){if(typeof n=="string")throw new JF("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new JF("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?Dst:n.separator?n:{...n,separator:"!"}}constructor(n,i,o){let{separator:s,manifest:a,...u}=e.defaults(o);i=Nst(i,s);let m=s.charCodeAt(0)+1,p=n[jc]||n;if(!uwe.encode(i).every(M=>M>m&&M<127))throw new JF(`Prefix must use bytes > ${m} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(Cst(p,a),u);let b=(n.prefix||"")+s+i+s,A=b.slice(0,-1)+String.fromCharCode(m);this[jc]=p,this[Jh]=new WT(b),this[fwe]=new WT(A),this[YF]=new ez,this.nextTick=p.nextTick}prefixKey(n,i){if(i==="utf8")return this[Jh].utf8+n;if(n.byteLength===0)return this[Jh][i];if(i==="view"){let o=this[Jh].view,s=new Uint8Array(o.byteLength+n.byteLength);return s.set(o,0),s.set(n,o.byteLength),s}else{let o=this[Jh].buffer;return XF.concat([o,n],o.byteLength+n.byteLength)}}[O3](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[Jh][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[fwe][i]}get prefix(){return this[Jh].utf8}get db(){return this[jc]}_open(n,i){this[jc].open({passive:!0},i)}_put(n,i,o,s){this[jc].put(n,i,o,s)}_get(n,i,o){this[jc].get(n,i,o)}_getMany(n,i,o){this[jc].getMany(n,i,o)}_del(n,i,o){this[jc].del(n,i,o)}_batch(n,i,o){this[jc].batch(n,i,o)}_clear(n,i){this[O3](n,n.keyEncoding),this[jc].clear(n,i)}_iterator(n){this[O3](n,n.keyEncoding);let i=this[jc].iterator(n),o=this[YF].get(this[Jh].utf8.length,n.keyEncoding);return new kst(this,n,i,o)}_keys(n){this[O3](n,n.keyEncoding);let i=this[jc].keys(n),o=this[YF].get(this[Jh].utf8.length,n.keyEncoding);return new Ost(this,n,i,o)}_values(n){this[O3](n,n.keyEncoding);let i=this[jc].values(n);return new Bst(this,n,i)}}return{AbstractSublevel:e}};var Cst=function(t,e){return{...t.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:QF(t,"utf8"),buffer:QF(t,"buffer"),view:QF(t,"view")}}},QF=function(t,e){return t.supports.encodings[e]?t.keyEncoding(e).name===e:!1},WT=class{constructor(e){this.utf8=e,this.view=uwe.encode(e),this.buffer=XF?XF.from(this.view.buffer,0,this.view.byteLength):{}}},ez=class{constructor(){this.cache=new Map}get(e,r){let n=this.cache.get(r);return n===void 0&&(r==="view"?n=function(i,o){return o.subarray(i)}.bind(null,e):n=function(i,o){return o.slice(i)}.bind(null,e),this.cache.set(r,n)),n}},Nst=function(t,e){let r=0,n=t.length;for(;r<n&&t[r]===e;)r++;for(;n>r&&t[n-1]===e;)n--;return t.slice(r,n)}});var oz=H(iz=>{"use strict";_();var{supports:jst}=Ove(),{Transcoder:qst}=Fve(),{EventEmitter:$st}=uo(),{fromCallback:um}=x3(),$u=ju(),{AbstractIterator:ab}=cm(),{DefaultKeyIterator:Lst,DefaultValueIterator:Ust}=Hve(),{DeferredIterator:Fst,DeferredKeyIterator:zst,DeferredValueIterator:Kst}=Zve(),{DefaultChainedBatch:hwe}=Xve(),{getCallback:cb,getOptions:lm}=IT(),GT=rwe(),br=Symbol("promise"),Yh=Symbol("landed"),fb=Symbol("resources"),tz=Symbol("closeResources"),B3=Symbol("operations"),D3=Symbol("undefer"),VT=Symbol("deferOpen"),pwe=Symbol("options"),qr=Symbol("status"),ub=Symbol("defaultOptions"),v2=Symbol("transcoder"),HT=Symbol("keyEncoding"),rz=Symbol("valueEncoding"),Wst=()=>{},C3=class extends $st{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");r=lm(r);let{keyEncoding:n,valueEncoding:i,passive:o,...s}=r;this[fb]=new Set,this[B3]=[],this[VT]=!0,this[pwe]=s,this[qr]="opening",this.supports=jst(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[v2]=new qst(Gst(this)),this[HT]=this[v2].encoding(n||"utf8"),this[rz]=this[v2].encoding(i||"utf8");for(let a of this[v2].encodings())this.supports.encodings[a.commonName]||(this.supports.encodings[a.commonName]=!0);this[ub]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[HT].commonName,valueEncoding:this[rz].commonName}),key:Object.freeze({keyEncoding:this[HT].commonName})},this.nextTick(()=>{this[VT]&&this.open({passive:!1},Wst)})}get status(){return this[qr]}keyEncoding(e){return this[v2].encoding(e??this[HT])}valueEncoding(e){return this[v2].encoding(e??this[rz])}open(e,r){r=cb(e,r),r=um(r,br),e={...this[pwe],...lm(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[qr]==="closing"||this[qr]==="opening"?this.once(Yh,i?()=>n(i):n):this[qr]!=="open"?r(new $u("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):r()};return e.passive?this[qr]==="opening"?this.once(Yh,n):this.nextTick(n):this[qr]==="closed"||this[VT]?(this[VT]=!1,this[qr]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[qr]="closed",this[tz](()=>{this.emit(Yh),n(i)}),this[D3]();return}this[qr]="open",this[D3](),this.emit(Yh),this[qr]==="open"&&this.emit("open"),this[qr]==="open"&&this.emit("ready"),n()})):this[qr]==="open"?this.nextTick(n):this.once(Yh,()=>this.open(e,r)),r[br]}_open(e,r){this.nextTick(r)}close(e){e=um(e,br);let r=n=>{this[qr]==="opening"||this[qr]==="closing"?this.once(Yh,n?r(n):r):this[qr]!=="closed"?e(new $u("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[qr]==="open"){this[qr]="closing",this.emit("closing");let n=i=>{this[qr]="open",this[D3](),this.emit(Yh),r(i)};this[tz](()=>{this._close(i=>{if(i)return n(i);this[qr]="closed",this[D3](),this.emit(Yh),this[qr]==="closed"&&this.emit("closed"),r()})})}else this[qr]==="closed"?this.nextTick(r):this.once(Yh,()=>this.close(e));return e[br]}[tz](e){if(this[fb].size===0)return this.nextTick(e);let r=this[fb].size,n=!0,i=()=>{--r===0&&(n?this.nextTick(e):e())};for(let o of this[fb])o.close(i);n=!1,this[fb].clear()}_close(e){this.nextTick(e)}get(e,r,n){if(n=cb(r,n),n=um(n,br),r=lm(r,this[ub].entry),this[qr]==="opening")return this.defer(()=>this.get(e,r,n)),n[br];if(w2(this,n))return n[br];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[br];let o=this.keyEncoding(r.keyEncoding),s=this.valueEncoding(r.valueEncoding),a=o.format,u=s.format;return(r.keyEncoding!==a||r.valueEncoding!==u)&&(r=Object.assign({},r,{keyEncoding:a,valueEncoding:u})),this._get(this.prefixKey(o.encode(e),a),r,(m,p)=>{if(m)return(m.code==="LEVEL_NOT_FOUND"||m.notFound||/NotFound/i.test(m))&&(m.code||(m.code="LEVEL_NOT_FOUND"),m.notFound||(m.notFound=!0),m.status||(m.status=404)),n(m);try{p=s.decode(p)}catch(b){return n(new $u("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:b}))}n(null,p)}),n[br]}_get(e,r,n){this.nextTick(n,new Error("NotFound"))}getMany(e,r,n){if(n=cb(r,n),n=um(n,br),r=lm(r,this[ub].entry),this[qr]==="opening")return this.defer(()=>this.getMany(e,r,n)),n[br];if(w2(this,n))return n[br];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[br];if(e.length===0)return this.nextTick(n,null,[]),n[br];let i=this.keyEncoding(r.keyEncoding),o=this.valueEncoding(r.valueEncoding),s=i.format,a=o.format;(r.keyEncoding!==s||r.valueEncoding!==a)&&(r=Object.assign({},r,{keyEncoding:s,valueEncoding:a}));let u=new Array(e.length);for(let m=0;m<e.length;m++){let p=e[m],b=this._checkKey(p);if(b)return this.nextTick(n,b),n[br];u[m]=this.prefixKey(i.encode(p),s)}return this._getMany(u,r,(m,p)=>{if(m)return n(m);try{for(let b=0;b<p.length;b++)p[b]!==void 0&&(p[b]=o.decode(p[b]))}catch(b){return n(new $u(`Could not decode one or more of ${p.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:b}))}n(null,p)}),n[br]}_getMany(e,r,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,r,n,i){if(i=cb(n,i),i=um(i,br),n=lm(n,this[ub].entry),this[qr]==="opening")return this.defer(()=>this.put(e,r,n,i)),i[br];if(w2(this,i))return i[br];let o=this._checkKey(e)||this._checkValue(r);if(o)return this.nextTick(i,o),i[br];let s=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),u=s.format,m=a.format;(n.keyEncoding!==u||n.valueEncoding!==m)&&(n=Object.assign({},n,{keyEncoding:u,valueEncoding:m}));let p=this.prefixKey(s.encode(e),u),b=a.encode(r);return this._put(p,b,n,A=>{if(A)return i(A);this.emit("put",e,r),i()}),i[br]}_put(e,r,n,i){this.nextTick(i)}del(e,r,n){if(n=cb(r,n),n=um(n,br),r=lm(r,this[ub].key),this[qr]==="opening")return this.defer(()=>this.del(e,r,n)),n[br];if(w2(this,n))return n[br];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[br];let o=this.keyEncoding(r.keyEncoding),s=o.format;return r.keyEncoding!==s&&(r=Object.assign({},r,{keyEncoding:s})),this._del(this.prefixKey(o.encode(e),s),r,a=>{if(a)return n(a);this.emit("del",e),n()}),n[br]}_del(e,r,n){this.nextTick(n)}batch(e,r,n){if(!arguments.length){if(this[qr]==="opening")return new hwe(this);if(this[qr]!=="open")throw new $u("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=cb(r,n),n=um(n,br),r=lm(r,this[ub].empty),this[qr]==="opening")return this.defer(()=>this.batch(e,r,n)),n[br];if(w2(this,n))return n[br];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[br];if(e.length===0)return this.nextTick(n),n[br];let i=new Array(e.length),{keyEncoding:o,valueEncoding:s,...a}=r;for(let u=0;u<e.length;u++){if(typeof e[u]!="object"||e[u]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[br];let m=Object.assign({},e[u]);if(m.type!=="put"&&m.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[br];let p=this._checkKey(m.key);if(p)return this.nextTick(n,p),n[br];let b=m.sublevel!=null?m.sublevel:this,A=b.keyEncoding(m.keyEncoding||o),M=A.format;if(m.key=b.prefixKey(A.encode(m.key),M),m.keyEncoding=M,m.type==="put"){let S=this._checkValue(m.value);if(S)return this.nextTick(n,S),n[br];let P=b.valueEncoding(m.valueEncoding||s);m.value=P.encode(m.value),m.valueEncoding=P.format}b!==this&&(m.sublevel=null),i[u]=m}return this._batch(i,a,u=>{if(u)return n(u);this.emit("batch",e),n()}),n[br]}_batch(e,r,n){this.nextTick(n)}sublevel(e,r){return this._sublevel(e,nz.defaults(r))}_sublevel(e,r){return new nz(this,e,r)}prefixKey(e,r){return e}clear(e,r){if(r=cb(e,r),r=um(r,br),e=lm(e,this[ub].empty),this[qr]==="opening")return this.defer(()=>this.clear(e,r)),r[br];if(w2(this,r))return r[br];let n=e,i=this.keyEncoding(e.keyEncoding);return e=GT(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(r):this._clear(e,o=>{if(o)return r(o);this.emit("clear",n),r()}),r[br]}_clear(e,r){this.nextTick(r)}iterator(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=GT(e,r),e.keys=e.keys!==!1,e.values=e.values!==!1,e[ab.keyEncoding]=r,e[ab.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[qr]==="opening")return new Fst(this,e);if(this[qr]!=="open")throw new $u("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new ab(this,e)}keys(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=GT(e,r),e[ab.keyEncoding]=r,e[ab.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[qr]==="opening")return new zst(this,e);if(this[qr]!=="open")throw new $u("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new Lst(this,e)}values(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=GT(e,r),e[ab.keyEncoding]=r,e[ab.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[qr]==="opening")return new Kst(this,e);if(this[qr]!=="open")throw new $u("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new Ust(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[B3].push(e)}[D3](){if(this[B3].length===0)return;let e=this[B3];this[B3]=[];for(let r of e)r()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[fb].add(e)}detachResource(e){this[fb].delete(e)}_chainedBatch(){return new hwe(this)}_checkKey(e){if(e==null)return new $u("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new $u("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};C3.prototype.nextTick=awe();var{AbstractSublevel:nz}=dwe()({AbstractLevel:C3});iz.AbstractLevel=C3;iz.AbstractSublevel=nz;var w2=function(t,e){return t[qr]!=="open"?(t.nextTick(e,new $u("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},Gst=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])}});var sz=H(lb=>{"use strict";_();lb.AbstractLevel=oz().AbstractLevel;lb.AbstractSublevel=oz().AbstractSublevel;lb.AbstractIterator=cm().AbstractIterator;lb.AbstractKeyIterator=cm().AbstractKeyIterator;lb.AbstractValueIterator=cm().AbstractValueIterator;lb.AbstractChainedBatch=VF().AbstractChainedBatch});var ywe=H((CHt,mwe)=>{_();mwe.exports=Hst;var Vst=ZF();function Hst(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,o,s,a,u=!0,m;Array.isArray(t)?(n=[],o=i=t.length):(s=Object.keys(t),n={},o=i=s.length);function p(A){function M(){r&&r(A,n),r=null}u?Vst(M):M()}function b(A,M,S){if(n[A]=S,M&&(a=!0),--o===0||M)p(M);else if(!a&&m<i){let P;s?(P=s[m],m+=1,t[P](function(k,R){b(P,k,R)})):(P=m,m+=1,t[P](function(k,R){b(P,k,R)}))}}m=e,o?s?s.some(function(A,M){return t[A](function(S,P){b(A,S,P)}),M===e-1}):t.some(function(A,M){return A(function(S,P){b(M,S,P)}),M===e-1}):p(null),u=!1}});var az=H((jHt,gwe)=>{"use strict";_();gwe.exports=function(e){let r=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,i,o):r!==void 0?IDBKeyRange.lowerBound(r,i):n!==void 0?IDBKeyRange.upperBound(n,o):null}});var cz=H(($Ht,bwe)=>{"use strict";_();var Zst=new TextEncoder;bwe.exports=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):Zst.encode(t)}});var Ewe=H(xwe=>{"use strict";_();var{AbstractIterator:Jst}=sz(),vwe=az(),ZT=cz(),md=Symbol("cache"),Qh=Symbol("finished"),qc=Symbol("options"),Xh=Symbol("currentOptions"),db=Symbol("position"),fz=Symbol("location"),_2=Symbol("first"),wwe={},uz=class extends Jst{constructor(e,r,n){super(e,n),this[md]=[],this[Qh]=this.limit===0,this[qc]=n,this[Xh]={...n},this[db]=void 0,this[fz]=r,this[_2]=!0}_nextv(e,r,n){if(this[_2]=!1,this[Qh])return this.nextTick(n,null,[]);if(this[md].length>0)return e=Math.min(e,this[md].length),this.nextTick(n,null,this[md].splice(0,e));this[db]!==void 0&&(this[qc].reverse?(this[Xh].lt=this[db],this[Xh].lte=void 0):(this[Xh].gt=this[db],this[Xh].gte=void 0));let i;try{i=vwe(this[Xh])}catch{return this[Qh]=!0,this.nextTick(n,null,[])}let o=this.db.db.transaction([this[fz]],"readonly"),s=o.objectStore(this[fz]),a=[];if(this[qc].reverse){let u=!this[qc].values&&s.openKeyCursor?"openKeyCursor":"openCursor";s[u](i,"prev").onsuccess=m=>{let p=m.target.result;if(p){let{key:b,value:A}=p;this[db]=b,a.push([this[qc].keys&&b!==void 0?ZT(b):void 0,this[qc].values&&A!==void 0?ZT(A):void 0]),a.length<e?p.continue():_we(o)}else this[Qh]=!0}}else{let u,m,p=()=>{if(u===void 0||m===void 0)return;let b=Math.max(u.length,m.length);b===0||e===1/0?this[Qh]=!0:this[db]=u[b-1],a.length=b;for(let A=0;A<b;A++){let M=u[A],S=m[A];a[A]=[this[qc].keys&&M!==void 0?ZT(M):void 0,this[qc].values&&S!==void 0?ZT(S):void 0]}_we(o)};this[qc].keys||e<1/0?s.getAllKeys(i,e<1/0?e:void 0).onsuccess=b=>{u=b.target.result,p()}:(u=[],this.nextTick(p)),this[qc].values?s.getAll(i,e<1/0?e:void 0).onsuccess=b=>{m=b.target.result,p()}:(m=[],this.nextTick(p))}o.onabort=()=>{n(o.error||new Error("aborted by user")),n=null},o.oncomplete=()=>{n(null,a),n=null}}_next(e){if(this[md].length>0){let[r,n]=this[md].shift();this.nextTick(e,null,r,n)}else if(this[Qh])this.nextTick(e);else{let r=Math.min(100,this.limit-this.count);this[_2]&&(this[_2]=!1,r=1),this._nextv(r,wwe,(n,i)=>{if(n)return e(n);this[md]=i,this._next(e)})}}_all(e,r){this[_2]=!1;let n=this[md].splice(0,this[md].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(r,null,n);this._nextv(i,wwe,(o,s)=>{if(o)return r(o);n.length>0&&(s=n.concat(s)),r(null,s)})}_seek(e,r){this[_2]=!0,this[md]=[],this[Qh]=!1,this[db]=void 0,this[Xh]={...this[qc]};let n;try{n=vwe(this[qc])}catch{this[Qh]=!0;return}n!==null&&!n.includes(e)?this[Qh]=!0:this[qc].reverse?this[Xh].lte=e:this[Xh].gte=e}};xwe.Iterator=uz;function _we(t){typeof t.commit=="function"&&t.commit()}});var Mwe=H((zHt,Swe)=>{"use strict";_();Swe.exports=function(e,r,n,i,o){if(i.limit===0)return e.nextTick(o);let s=e.db.transaction([r],"readwrite"),a=s.objectStore(r),u=0;s.oncomplete=function(){o()},s.onabort=function(){o(s.error||new Error("aborted by user"))};let m=a.openKeyCursor?"openKeyCursor":"openCursor",p=i.reverse?"prev":"next";a[m](n,p).onsuccess=function(b){let A=b.target.result;A&&(a.delete(A.key).onsuccess=function(){(i.limit<=0||++u<i.limit)&&A.continue()})}}});var YT=H(Iwe=>{"use strict";_();var{AbstractLevel:Yst}=sz(),Awe=ju(),Qst=ywe(),{fromCallback:Xst}=x3(),{Iterator:eat}=Ewe(),Pwe=cz(),tat=Mwe(),rat=az(),Rwe="level-js-",N3=Symbol("idb"),lz=Symbol("namePrefix"),ep=Symbol("location"),dz=Symbol("version"),hb=Symbol("store"),j3=Symbol("onComplete"),Twe=Symbol("promise"),JT=class extends Yst{constructor(e,r,n){if(typeof r=="function"||typeof n=="function")throw new Awe("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...s}=r||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},s),typeof e!="string")throw new Error("constructor requires a location string argument");this[ep]=e,this[lz]=i??Rwe,this[dz]=parseInt(o||1,10),this[N3]=null}get location(){return this[ep]}get namePrefix(){return this[lz]}get version(){return this[dz]}get db(){return this[N3]}get type(){return"browser-level"}_open(e,r){let n=indexedDB.open(this[lz]+this[ep],this[dz]);n.onerror=function(){r(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[N3]=n.result,r()},n.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[ep])||o.createObjectStore(this[ep])}}[hb](e){return this[N3].transaction([this[ep]],e).objectStore(this[ep])}[j3](e,r){let n=e.transaction;n.onabort=function(){r(n.error||new Error("aborted by user"))},n.oncomplete=function(){r(null,e.result)}}_get(e,r,n){let i=this[hb]("readonly"),o;try{o=i.get(e)}catch(s){return this.nextTick(n,s)}this[j3](o,function(s,a){if(s)return n(s);if(a===void 0)return n(new Awe("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,Pwe(a))})}_getMany(e,r,n){let i=this[hb]("readonly"),o=e.map(s=>a=>{let u;try{u=i.get(s)}catch(m){return a(m)}u.onsuccess=()=>{let m=u.result;a(null,m===void 0?m:Pwe(m))},u.onerror=m=>{m.stopPropagation(),a(u.error)}});Qst(o,16,n)}_del(e,r,n){let i=this[hb]("readwrite"),o;try{o=i.delete(e)}catch(s){return this.nextTick(n,s)}this[j3](o,n)}_put(e,r,n,i){let o=this[hb]("readwrite"),s;try{s=o.put(r,e)}catch(a){return this.nextTick(i,a)}this[j3](s,i)}_iterator(e){return new eat(this,this[ep],e)}_batch(e,r,n){let i=this[hb]("readwrite"),o=i.transaction,s=0,a;o.onabort=function(){n(a||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()};function u(){let m=e[s++],p=m.key,b;try{b=m.type==="del"?i.delete(p):i.put(m.value,p)}catch(A){a=A,o.abort();return}s<e.length?b.onsuccess=u:typeof o.commit=="function"&&o.commit()}u()}_clear(e,r){let n,i;try{n=rat(e)}catch{return this.nextTick(r)}if(e.limit>=0)return tat(this,this[ep],n,e,r);try{let o=this[hb]("readwrite");i=n?o.delete(n):o.clear()}catch(o){return this.nextTick(r,o)}this[j3](i,r)}_close(e){this[N3].close(),this.nextTick(e)}};JT.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=Rwe),r=Xst(r,Twe);let n=indexedDB.deleteDatabase(e+t);return n.onsuccess=function(){r()},n.onerror=function(i){r(i)},r[Twe]};Iwe.BrowserLevel=JT});var Owe=H(kwe=>{_();kwe.Level=YT().BrowserLevel});var yo=H((eZt,Bwe)=>{"use strict";_();Bwe.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Uint8Array}});var yd=H((rZt,pz)=>{"use strict";_();var iat=Ut(),oat=Object.getPrototypeOf(async function(){}).constructor,Dwe=globalThis.Blob||iat.Blob,sat=typeof Dwe<"u"?function(e){return e instanceof Dwe}:function(e){return!1},hz=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};pz.exports={AggregateError:hz,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof oat},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:sat};pz.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Ba=H((iZt,jwe)=>{"use strict";_();var{format:aat,inspect:XT,AggregateError:cat}=yd(),fat=globalThis.AggregateError||cat,uat=Symbol("kIsNodeError"),lat=["string","function","number","object","Function","Object","boolean","bigint","symbol"],dat=/^([A-Z][a-z0-9]*)+$/,hat="__node_internal_",eR={};function mb(t,e){if(!t)throw new eR.ERR_INTERNAL_ASSERTION(e)}function Cwe(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function pat(t,e,r){if(typeof e=="function")return mb(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return mb(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:aat(e,...r)}function Is(t,e,r){r||(r=Error);class n extends r{constructor(...o){super(pat(t,e,o))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[uat]=!0,eR[t]=n}function Nwe(t){let e=hat+t.name;return Object.defineProperty(t,"name",{value:e}),t}function mat(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new fat([e,t],e.message);return r.code=e.code,r}return t||e}var mz=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new eR.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};Is("ERR_ASSERTION","%s",Error);Is("ERR_INVALID_ARG_TYPE",(t,e,r)=>{mb(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],o=[],s=[];for(let u of e)mb(typeof u=="string","All expected entries have to be of type string"),lat.includes(u)?i.push(u.toLowerCase()):dat.test(u)?o.push(u):(mb(u!=="object",'The value "object" should be written as "Object"'),s.push(u));if(o.length>0){let u=i.indexOf("object");u!==-1&&(i.splice(i,u,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let u=i.pop();n+=`one of type ${i.join(", ")}, or ${u}`}}(o.length>0||s.length>0)&&(n+=" or ")}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let u=o.pop();n+=`an instance of ${o.join(", ")}, or ${u}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{let u=s.pop();n+=`one of ${s.join(", ")}, or ${u}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let u=XT(r,{depth:-1});n+=`. Received ${u}`}}else{let u=XT(r,{colors:!1});u.length>25&&(u=`${u.slice(0,25)}...`),n+=`. Received type ${typeof r} (${u})`}return n},TypeError);Is("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=XT(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);Is("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);Is("ERR_MISSING_ARGS",(...t)=>{mb(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);Is("ERR_OUT_OF_RANGE",(t,e,r)=>{mb(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=Cwe(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=Cwe(n)),n+="n"):n=XT(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);Is("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Is("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Is("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Is("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Is("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Is("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Is("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Is("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Is("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Is("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Is("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);jwe.exports={AbortError:mz,aggregateTwoErrors:Nwe(mat),hideStackFrames:Nwe,codes:eR}});var q3=H((sZt,Gwe)=>{"use strict";_();var{ArrayIsArray:gz,ArrayPrototypeIncludes:Uwe,ArrayPrototypeJoin:Fwe,ArrayPrototypeMap:yat,NumberIsInteger:bz,NumberIsNaN:gat,NumberMAX_SAFE_INTEGER:bat,NumberMIN_SAFE_INTEGER:vat,NumberParseInt:wat,ObjectPrototypeHasOwnProperty:_at,RegExpPrototypeExec:zwe,String:xat,StringPrototypeToUpperCase:Eat,StringPrototypeTrim:Sat}=yo(),{hideStackFrames:Nf,codes:{ERR_SOCKET_BAD_PORT:Mat,ERR_INVALID_ARG_TYPE:Da,ERR_INVALID_ARG_VALUE:x2,ERR_OUT_OF_RANGE:yb,ERR_UNKNOWN_SIGNAL:qwe}}=Ba(),{normalizeEncoding:Aat}=yd(),{isAsyncFunction:Pat,isArrayBufferView:Tat}=yd().types,$we={};function Rat(t){return t===(t|0)}function Iat(t){return t===t>>>0}var kat=/^[0-7]+$/,Oat="must be a 32-bit unsigned integer or an octal string";function Bat(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(zwe(kat,t)===null)throw new x2(e,t,Oat);t=wat(t,8)}return Kwe(t,e),t}var Dat=Nf((t,e,r=vat,n=bat)=>{if(typeof t!="number")throw new Da(e,"number",t);if(!bz(t))throw new yb(e,"an integer",t);if(t<r||t>n)throw new yb(e,`>= ${r} && <= ${n}`,t)}),Cat=Nf((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Da(e,"number",t);if(!bz(t))throw new yb(e,"an integer",t);if(t<r||t>n)throw new yb(e,`>= ${r} && <= ${n}`,t)}),Kwe=Nf((t,e,r=!1)=>{if(typeof t!="number")throw new Da(e,"number",t);if(!bz(t))throw new yb(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new yb(e,`>= ${n} && <= ${i}`,t)});function vz(t,e){if(typeof t!="string")throw new Da(e,"string",t)}function Nat(t,e,r=void 0,n){if(typeof t!="number")throw new Da(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&gat(t))throw new yb(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var jat=Nf((t,e,r)=>{if(!Uwe(r,t)){let i="must be one of: "+Fwe(yat(r,o=>typeof o=="string"?`'${o}'`:xat(o)),", ");throw new x2(e,t,i)}});function Wwe(t,e){if(typeof t!="boolean")throw new Da(e,"boolean",t)}function yz(t,e,r){return t==null||!_at(t,e)?r:t[e]}var qat=Nf((t,e,r=null)=>{let n=yz(r,"allowArray",!1),i=yz(r,"allowFunction",!1);if(!yz(r,"nullable",!1)&&t===null||!n&&gz(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Da(e,"Object",t)}),$at=Nf((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Da(e,"a dictionary",t)}),wz=Nf((t,e,r=0)=>{if(!gz(t))throw new Da(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new x2(e,t,n)}});function Lat(t,e){wz(t,e);for(let r=0;r<t.length;r++)vz(t[r],`${e}[${r}]`)}function Uat(t,e){wz(t,e);for(let r=0;r<t.length;r++)Wwe(t[r],`${e}[${r}]`)}function Fat(t,e="signal"){if(vz(t,e),$we[t]===void 0)throw $we[Eat(t)]!==void 0?new qwe(t+" (signals must use all capital letters)"):new qwe(t)}var zat=Nf((t,e="buffer")=>{if(!Tat(t))throw new Da(e,["Buffer","TypedArray","DataView"],t)});function Kat(t,e){let r=Aat(e),n=t.length;if(r==="hex"&&n%2!==0)throw new x2("encoding",e,`is invalid for data of length ${n}`)}function Wat(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&Sat(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new Mat(e,t,r);return t|0}var Gat=Nf((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Da(e,"AbortSignal",t)}),Vat=Nf((t,e)=>{if(typeof t!="function")throw new Da(e,"Function",t)}),Hat=Nf((t,e)=>{if(typeof t!="function"||Pat(t))throw new Da(e,"Function",t)}),Zat=Nf((t,e)=>{if(t!==void 0)throw new Da(e,"undefined",t)});function Jat(t,e,r){if(!Uwe(r,t))throw new Da(e,`('${Fwe(r,"|")}')`,t)}var Yat=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Lwe(t,e){if(typeof t>"u"||!zwe(Yat,t))throw new x2(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Qat(t){if(typeof t=="string")return Lwe(t,"hints"),t;if(gz(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];Lwe(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new x2("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Gwe.exports={isInt32:Rat,isUint32:Iat,parseFileMode:Bat,validateArray:wz,validateStringArray:Lat,validateBooleanArray:Uat,validateBoolean:Wwe,validateBuffer:zat,validateDictionary:$at,validateEncoding:Kat,validateFunction:Vat,validateInt32:Cat,validateInteger:Dat,validateNumber:Nat,validateObject:qat,validateOneOf:jat,validatePlainFunction:Hat,validatePort:Wat,validateSignalName:Fat,validateString:vz,validateUint32:Kwe,validateUndefined:Zat,validateUnion:Jat,validateAbortSignal:Gat,validateLinkHeaderValue:Qat}});var bd=H((cZt,c1e)=>{"use strict";_();var{Symbol:tR,SymbolAsyncIterator:Vwe,SymbolIterator:Hwe,SymbolFor:Zwe}=yo(),Jwe=tR("kDestroyed"),Ywe=tR("kIsErrored"),_z=tR("kIsReadable"),Qwe=tR("kIsDisturbed"),Xat=Zwe("nodejs.webstream.isClosedPromise"),ect=Zwe("nodejs.webstream.controllerErrorFunction");function rR(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function nR(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function tct(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function gd(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function Xwe(t){return!!(t&&!gd(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function e1e(t){return!!(t&&!gd(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function t1e(t){return!!(t&&!gd(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function rct(t){return Xwe(t)||e1e(t)||t1e(t)}function nct(t,e){return t==null?!1:e===!0?typeof t[Vwe]=="function":e===!1?typeof t[Hwe]=="function":typeof t[Vwe]=="function"||typeof t[Hwe]=="function"}function iR(t){if(!gd(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[Jwe]||n!=null&&n.destroyed)}function r1e(t){if(!nR(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function ict(t,e){if(!nR(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function oct(t){if(!rR(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function n1e(t,e){if(!rR(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function i1e(t){return t&&t[_z]!=null?t[_z]:typeof t?.readable!="boolean"?null:iR(t)?!1:rR(t)&&t.readable&&!n1e(t)}function o1e(t){return typeof t?.writable!="boolean"?null:iR(t)?!1:nR(t)&&t.writable&&!r1e(t)}function sct(t,e){return gd(t)?iR(t)?!0:!(e?.readable!==!1&&i1e(t)||e?.writable!==!1&&o1e(t)):null}function act(t){var e,r;return gd(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function cct(t){var e,r;return gd(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function fct(t){if(!gd(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&s1e(t)?t._closed:null}function s1e(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function a1e(t){return typeof t._sent100=="boolean"&&s1e(t)}function uct(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function lct(t){if(!gd(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&a1e(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function dct(t){var e;return!!(t&&((e=t[Qwe])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function hct(t){var e,r,n,i,o,s,a,u,m,p;return!!(t&&((e=(r=(n=(i=(o=(s=t[Ywe])!==null&&s!==void 0?s:t.readableErrored)!==null&&o!==void 0?o:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(u=t._writableState)===null||u===void 0?void 0:u.errorEmitted)!==null&&r!==void 0?r:(m=t._readableState)===null||m===void 0?void 0:m.errored)!==null&&e!==void 0?e:!((p=t._writableState)===null||p===void 0)&&p.errored))}c1e.exports={kDestroyed:Jwe,isDisturbed:dct,kIsDisturbed:Qwe,isErrored:hct,kIsErrored:Ywe,isReadable:i1e,kIsReadable:_z,kIsClosedPromise:Xat,kControllerErrorFunction:ect,isClosed:fct,isDestroyed:iR,isDuplexNodeStream:tct,isFinished:sct,isIterable:nct,isReadableNodeStream:rR,isReadableStream:Xwe,isReadableEnded:oct,isReadableFinished:n1e,isReadableErrored:cct,isNodeStream:gd,isWebStream:rct,isWritable:o1e,isWritableNodeStream:nR,isWritableStream:e1e,isWritableEnded:r1e,isWritableFinished:ict,isWritableErrored:act,isServerRequest:uct,isServerResponse:a1e,willEmitClose:lct,isTransformStream:t1e}});var tp=H((uZt,Az)=>{_();var dm=ai(),{AbortError:g1e,codes:pct}=Ba(),{ERR_INVALID_ARG_TYPE:mct,ERR_STREAM_PREMATURE_CLOSE:f1e}=pct,{kEmptyObject:Ez,once:Sz}=yd(),{validateAbortSignal:yct,validateFunction:gct,validateObject:bct,validateBoolean:vct}=q3(),{Promise:wct,PromisePrototypeThen:_ct}=yo(),{isClosed:xct,isReadable:u1e,isReadableNodeStream:xz,isReadableStream:Ect,isReadableFinished:l1e,isReadableErrored:d1e,isWritable:h1e,isWritableNodeStream:p1e,isWritableStream:Sct,isWritableFinished:m1e,isWritableErrored:y1e,isNodeStream:Mct,willEmitClose:Act,kIsClosedPromise:Pct}=bd();function Tct(t){return t.setHeader&&typeof t.abort=="function"}var Mz=()=>{};function b1e(t,e,r){var n,i;if(arguments.length===2?(r=e,e=Ez):e==null?e=Ez:bct(e,"options"),gct(r,"callback"),yct(e.signal,"options.signal"),r=Sz(r),Ect(t)||Sct(t))return Rct(t,e,r);if(!Mct(t))throw new mct("stream",["ReadableStream","WritableStream","Stream"],t);let o=(n=e.readable)!==null&&n!==void 0?n:xz(t),s=(i=e.writable)!==null&&i!==void 0?i:p1e(t),a=t._writableState,u=t._readableState,m=()=>{t.writable||A()},p=Act(t)&&xz(t)===o&&p1e(t)===s,b=m1e(t,!1),A=()=>{b=!0,t.destroyed&&(p=!1),!(p&&(!t.readable||o))&&(!o||M)&&r.call(t)},M=l1e(t,!1),S=()=>{M=!0,t.destroyed&&(p=!1),!(p&&(!t.writable||s))&&(!s||b)&&r.call(t)},P=$=>{r.call(t,$)},k=xct(t),R=()=>{k=!0;let $=y1e(t)||d1e(t);if($&&typeof $!="boolean")return r.call(t,$);if(o&&!M&&xz(t,!0)&&!l1e(t,!1))return r.call(t,new f1e);if(s&&!b&&!m1e(t,!1))return r.call(t,new f1e);r.call(t)},B=()=>{k=!0;let $=y1e(t)||d1e(t);if($&&typeof $!="boolean")return r.call(t,$);r.call(t)},I=()=>{t.req.on("finish",A)};Tct(t)?(t.on("complete",A),p||t.on("abort",R),t.req?I():t.on("request",I)):s&&!a&&(t.on("end",m),t.on("close",m)),!p&&typeof t.aborted=="boolean"&&t.on("aborted",R),t.on("end",S),t.on("finish",A),e.error!==!1&&t.on("error",P),t.on("close",R),k?dm.nextTick(R):a!=null&&a.errorEmitted||u!=null&&u.errorEmitted?p||dm.nextTick(B):(!o&&(!p||u1e(t))&&(b||h1e(t)===!1)||!s&&(!p||h1e(t))&&(M||u1e(t)===!1)||u&&t.req&&t.aborted)&&dm.nextTick(B);let q=()=>{r=Mz,t.removeListener("aborted",R),t.removeListener("complete",A),t.removeListener("abort",R),t.removeListener("request",I),t.req&&t.req.removeListener("finish",A),t.removeListener("end",m),t.removeListener("close",m),t.removeListener("finish",A),t.removeListener("end",S),t.removeListener("error",P),t.removeListener("close",R)};if(e.signal&&!k){let $=()=>{let U=r;q(),U.call(t,new g1e(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)dm.nextTick($);else{let U=r;r=Sz((...F)=>{e.signal.removeEventListener("abort",$),U.apply(t,F)}),e.signal.addEventListener("abort",$)}}return q}function Rct(t,e,r){let n=!1,i=Mz;if(e.signal)if(i=()=>{n=!0,r.call(t,new g1e(void 0,{cause:e.signal.reason}))},e.signal.aborted)dm.nextTick(i);else{let s=r;r=Sz((...a)=>{e.signal.removeEventListener("abort",i),s.apply(t,a)}),e.signal.addEventListener("abort",i)}let o=(...s)=>{n||dm.nextTick(()=>r.apply(t,s))};return _ct(t[Pct].promise,o,o),Mz}function Ict(t,e){var r;let n=!1;return e===null&&(e=Ez),(r=e)!==null&&r!==void 0&&r.cleanup&&(vct(e.cleanup,"cleanup"),n=e.cleanup),new wct((i,o)=>{let s=b1e(t,e,a=>{n&&s(),a?o(a):i()})})}Az.exports=b1e;Az.exports.finished=Ict});var gb=H((dZt,A1e)=>{"use strict";_();var vd=ai(),{aggregateTwoErrors:kct,codes:{ERR_MULTIPLE_CALLBACK:Oct},AbortError:Bct}=Ba(),{Symbol:_1e}=yo(),{kDestroyed:Dct,isDestroyed:Cct,isFinished:Nct,isServerRequest:jct}=bd(),x1e=_1e("kDestroy"),Pz=_1e("kConstruct");function E1e(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function qct(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(E1e(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?v1e(this,t,e):this.once(x1e,function(o){v1e(this,kct(o,t),e)}),this)}function v1e(t,e,r){let n=!1;function i(o){if(n)return;n=!0;let s=t._readableState,a=t._writableState;E1e(o,a,s),a&&(a.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(o),o?vd.nextTick($ct,t,o):vd.nextTick(S1e,t)}try{t._destroy(e||null,i)}catch(o){i(o)}}function $ct(t,e){Tz(t,e),S1e(t)}function S1e(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function Tz(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function Lct(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function Rz(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?vd.nextTick(Tz,t,e):Tz(t,e))}function Uct(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(Pz,e),!(t.listenerCount(Pz)>1)&&vd.nextTick(Fct,t)}function Fct(t){let e=!1;function r(n){if(e){Rz(t,n??new Oct);return}e=!0;let i=t._readableState,o=t._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?t.emit(x1e,n):n?Rz(t,n,!0):vd.nextTick(zct,t)}try{t._construct(n=>{vd.nextTick(r,n)})}catch(n){vd.nextTick(r,n)}}function zct(t){t.emit(Pz)}function w1e(t){return t?.setHeader&&typeof t.abort=="function"}function M1e(t){t.emit("close")}function Kct(t,e){t.emit("error",e),vd.nextTick(M1e,t)}function Wct(t,e){!t||Cct(t)||(!e&&!Nct(t)&&(e=new Bct),jct(t)?(t.socket=null,t.destroy(e)):w1e(t)?t.abort():w1e(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?vd.nextTick(Kct,t,e):vd.nextTick(M1e,t),t.destroyed||(t[Dct]=!0))}A1e.exports={construct:Uct,destroyer:Wct,destroy:qct,undestroy:Lct,errorOrDestroy:Rz}});var aR=H((pZt,T1e)=>{"use strict";_();var{ArrayIsArray:Gct,ObjectSetPrototypeOf:P1e}=yo(),{EventEmitter:oR}=uo();function sR(t){oR.call(this,t)}P1e(sR.prototype,oR.prototype);P1e(sR,oR);sR.prototype.pipe=function(t,e){let r=this;function n(p){t.writable&&t.write(p)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",s),r.on("close",a));let o=!1;function s(){o||(o=!0,t.end())}function a(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function u(p){m(),oR.listenerCount(this,"error")===0&&this.emit("error",p)}Iz(r,"error",u),Iz(t,"error",u);function m(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",m),r.removeListener("close",m),t.removeListener("close",m)}return r.on("end",m),r.on("close",m),t.on("close",m),t.emit("pipe",r),t};function Iz(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Gct(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}T1e.exports={Stream:sR,prependListener:Iz}});var $3=H((yZt,cR)=>{"use strict";_();var{AbortError:R1e,codes:Vct}=Ba(),{isNodeStream:I1e,isWebStream:Hct,kControllerErrorFunction:Zct}=bd(),Jct=tp(),{ERR_INVALID_ARG_TYPE:k1e}=Vct,Yct=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new k1e(e,"AbortSignal",t)};cR.exports.addAbortSignal=function(e,r){if(Yct(e,"signal"),!I1e(r)&&!Hct(r))throw new k1e("stream",["ReadableStream","WritableStream","Stream"],r);return cR.exports.addAbortSignalNoValidate(e,r)};cR.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=I1e(e)?()=>{e.destroy(new R1e(void 0,{cause:t.reason}))}:()=>{e[Zct](new R1e(void 0,{cause:t.reason}))};return t.aborted?r():(t.addEventListener("abort",r),Jct(e,()=>t.removeEventListener("abort",r))),e}});var D1e=H((vZt,B1e)=>{"use strict";_();var{StringPrototypeSlice:O1e,SymbolIterator:Qct,TypedArrayPrototypeSet:fR,Uint8Array:Xct}=yo(),{Buffer:kz}=Ut(),{inspect:eft}=yd();B1e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return kz.alloc(0);let r=kz.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)fR(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Qct](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let o=n.data;if(e>o.length)r+=o,e-=o.length;else{e===o.length?(r+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=O1e(o,0,e),this.head=n,n.data=O1e(o,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=kz.allocUnsafe(e),n=e,i=this.head,o=0;do{let s=i.data;if(e>s.length)fR(r,s,n-e),e-=s.length;else{e===s.length?(fR(r,s,n-e),++o,i.next?this.head=i.next:this.head=this.tail=null):(fR(r,new Xct(s.buffer,s.byteOffset,e),n-e),this.head=i,i.data=s.slice(e));break}++o}while((i=i.next)!==null);return this.length-=o,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return eft(this,{...r,depth:0,customInspect:!1})}}});var uR=H((_Zt,N1e)=>{"use strict";_();var{MathFloor:tft,NumberIsInteger:rft}=yo(),{ERR_INVALID_ARG_VALUE:nft}=Ba().codes;function ift(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function C1e(t){return t?16:16*1024}function oft(t,e,r,n){let i=ift(e,n,r);if(i!=null){if(!rft(i)||i<0){let o=n?`options.${r}`:"options.highWaterMark";throw new nft(o,i)}return tft(i)}return C1e(t.objectMode)}N1e.exports={getHighWaterMark:oft,getDefaultHighWaterMark:C1e}});var Oz=H((EZt,L1e)=>{"use strict";_();var j1e=ai(),{PromisePrototypeThen:sft,SymbolAsyncIterator:q1e,SymbolIterator:$1e}=yo(),{Buffer:aft}=Ut(),{ERR_INVALID_ARG_TYPE:cft,ERR_STREAM_NULL_VALUES:fft}=Ba().codes;function uft(t,e,r){let n;if(typeof e=="string"||e instanceof aft)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[q1e])i=!0,n=e[q1e]();else if(e&&e[$1e])i=!1,n=e[$1e]();else throw new cft("iterable",["Iterable"],e);let o=new t({objectMode:!0,highWaterMark:1,...r}),s=!1;o._read=function(){s||(s=!0,u())},o._destroy=function(m,p){sft(a(m),()=>j1e.nextTick(p,m),b=>j1e.nextTick(p,b||m))};async function a(m){let p=m!=null,b=typeof n.throw=="function";if(p&&b){let{value:A,done:M}=await n.throw(m);if(await A,M)return}if(typeof n.return=="function"){let{value:A}=await n.return();await A}}async function u(){for(;;){try{let{value:m,done:p}=i?await n.next():n.next();if(p)o.push(null);else{let b=m&&typeof m.then=="function"?await m:m;if(b===null)throw s=!1,new fft;if(o.push(b))continue;s=!1}}catch(m){o.destroy(m)}break}}return o}L1e.exports=uft});var L3=H((MZt,X1e)=>{_();var Lu=ai(),{ArrayPrototypeIndexOf:lft,NumberIsInteger:dft,NumberIsNaN:hft,NumberParseInt:pft,ObjectDefineProperties:z1e,ObjectKeys:mft,ObjectSetPrototypeOf:K1e,Promise:yft,SafeSet:gft,SymbolAsyncIterator:bft,Symbol:vft}=yo();X1e.exports=Er;Er.ReadableState=qz;var{EventEmitter:wft}=uo(),{Stream:hm,prependListener:_ft}=aR(),{Buffer:Bz}=Ut(),{addAbortSignal:xft}=$3(),Eft=tp(),Ur=yd().debuglog("stream",t=>{Ur=t}),Sft=D1e(),S2=gb(),{getHighWaterMark:Mft,getDefaultHighWaterMark:Aft}=uR(),{aggregateTwoErrors:U1e,codes:{ERR_INVALID_ARG_TYPE:Pft,ERR_METHOD_NOT_IMPLEMENTED:Tft,ERR_OUT_OF_RANGE:Rft,ERR_STREAM_PUSH_AFTER_EOF:Ift,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:kft}}=Ba(),{validateObject:Oft}=q3(),bb=vft("kPaused"),{StringDecoder:W1e}=ou(),Bft=Oz();K1e(Er.prototype,hm.prototype);K1e(Er,hm);var Dz=()=>{},{errorOrDestroy:E2}=S2;function qz(t,e,r){typeof r!="boolean"&&(r=e instanceof wd()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.readableObjectMode)),this.highWaterMark=t?Mft(this,t,"readableHighWaterMark",r):Aft(!1),this.buffer=new Sft,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[bb]=null,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new W1e(t.encoding),this.encoding=t.encoding)}function Er(t){if(!(this instanceof Er))return new Er(t);let e=this instanceof wd();this._readableState=new qz(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&xft(t.signal,this)),hm.call(this,t),S2.construct(this,()=>{this._readableState.needReadable&&lR(this,this._readableState)})}Er.prototype.destroy=S2.destroy;Er.prototype._undestroy=S2.undestroy;Er.prototype._destroy=function(t,e){e(t)};Er.prototype[wft.captureRejectionSymbol]=function(t){this.destroy(t)};Er.prototype.push=function(t,e){return G1e(this,t,e,!1)};Er.prototype.unshift=function(t,e){return G1e(this,t,e,!0)};function G1e(t,e,r,n){Ur("readableAddChunk",e);let i=t._readableState,o;if(i.objectMode||(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=Bz.from(e,r).toString(i.encoding):(e=Bz.from(e,r),r=""))):e instanceof Bz?r="":hm._isUint8Array(e)?(e=hm._uint8ArrayToBuffer(e),r=""):e!=null&&(o=new Pft("chunk",["string","Buffer","Uint8Array"],e))),o)E2(t,o);else if(e===null)i.reading=!1,Nft(t,i);else if(i.objectMode||e&&e.length>0)if(n)if(i.endEmitted)E2(t,new kft);else{if(i.destroyed||i.errored)return!1;Cz(t,i,e,!0)}else if(i.ended)E2(t,new Ift);else{if(i.destroyed||i.errored)return!1;i.reading=!1,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?Cz(t,i,e,!1):lR(t,i)):Cz(t,i,e,!1)}else n||(i.reading=!1,lR(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function Cz(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&dR(t)),lR(t,e)}Er.prototype.isPaused=function(){let t=this._readableState;return t[bb]===!0||t.flowing===!1};Er.prototype.setEncoding=function(t){let e=new W1e(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var Dft=1073741824;function Cft(t){if(t>Dft)throw new Rft("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function F1e(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:hft(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}Er.prototype.read=function(t){Ur("read",t),t===void 0?t=NaN:dft(t)||(t=pft(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=Cft(t)),t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Ur("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Nz(this):dR(this),null;if(t=F1e(t,e),t===0&&e.ended)return e.length===0&&Nz(this),null;let n=e.needReadable;if(Ur("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Ur("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,Ur("reading, ended or constructing",n);else if(n){Ur("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0);try{this._read(e.highWaterMark)}catch(o){E2(this,o)}e.sync=!1,e.reading||(t=F1e(r,e))}let i;return t>0?i=Y1e(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Nz(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function Nft(t,e){if(Ur("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?dR(t):(e.needReadable=!1,e.emittedReadable=!0,V1e(t))}}function dR(t){let e=t._readableState;Ur("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Ur("emitReadable",e.flowing),e.emittedReadable=!0,Lu.nextTick(V1e,t))}function V1e(t){let e=t._readableState;Ur("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Z1e(t)}function lR(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Lu.nextTick(jft,t,e))}function jft(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(Ur("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Er.prototype._read=function(t){throw new Tft("_read()")};Er.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new gft(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),Ur("pipe count=%d opts=%j",n.pipes.length,e);let o=(!e||e.end!==!1)&&t!==Lu.stdout&&t!==Lu.stderr?a:k;n.endEmitted?Lu.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(R,B){Ur("onunpipe"),R===r&&B&&B.hasUnpiped===!1&&(B.hasUnpiped=!0,p())}function a(){Ur("onend"),t.end()}let u,m=!1;function p(){Ur("cleanup"),t.removeListener("close",S),t.removeListener("finish",P),u&&t.removeListener("drain",u),t.removeListener("error",M),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",k),r.removeListener("data",A),m=!0,u&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&u()}function b(){m||(n.pipes.length===1&&n.pipes[0]===t?(Ur("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(Ur("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),u||(u=qft(r,t),t.on("drain",u))}r.on("data",A);function A(R){Ur("ondata");let B=t.write(R);Ur("dest.write",B),B===!1&&b()}function M(R){if(Ur("onerror",R),k(),t.removeListener("error",M),t.listenerCount("error")===0){let B=t._writableState||t._readableState;B&&!B.errorEmitted?E2(t,R):t.emit("error",R)}}_ft(t,"error",M);function S(){t.removeListener("finish",P),k()}t.once("close",S);function P(){Ur("onfinish"),t.removeListener("close",S),k()}t.once("finish",P);function k(){Ur("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?n.flowing&&b():n.flowing||(Ur("pipe resume"),r.resume()),t};function qft(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(Ur("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(Ur("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}Er.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let o=0;o<i.length;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}let n=lft(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};Er.prototype.on=function(t,e){let r=hm.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Ur("on readable",n.length,n.reading),n.length?dR(this):n.reading||Lu.nextTick($ft,this)),r};Er.prototype.addListener=Er.prototype.on;Er.prototype.removeListener=function(t,e){let r=hm.prototype.removeListener.call(this,t,e);return t==="readable"&&Lu.nextTick(H1e,this),r};Er.prototype.off=Er.prototype.removeListener;Er.prototype.removeAllListeners=function(t){let e=hm.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Lu.nextTick(H1e,this),e};function H1e(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[bb]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function $ft(t){Ur("readable nexttick read 0"),t.read(0)}Er.prototype.resume=function(){let t=this._readableState;return t.flowing||(Ur("resume"),t.flowing=!t.readableListening,Lft(this,t)),t[bb]=!1,this};function Lft(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Lu.nextTick(Uft,t,e))}function Uft(t,e){Ur("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Z1e(t),e.flowing&&!e.reading&&t.read(0)}Er.prototype.pause=function(){return Ur("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ur("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[bb]=!0,this};function Z1e(t){let e=t._readableState;for(Ur("flow",e.flowing);e.flowing&&t.read()!==null;);}Er.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{E2(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=mft(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};Er.prototype[bft]=function(){return J1e(this)};Er.prototype.iterator=function(t){return t!==void 0&&Oft(t,"options"),J1e(this,t)};function J1e(t,e){typeof t.read!="function"&&(t=Er.wrap(t,{objectMode:!0}));let r=Fft(t,e);return r.stream=t,r}async function*Fft(t,e){let r=Dz;function n(s){this===t?(r(),r=Dz):r=s}t.on("readable",n);let i,o=Eft(t,{writable:!1},s=>{i=s?U1e(i,s):null,r(),r=Dz});try{for(;;){let s=t.destroyed?null:t.read();if(s!==null)yield s;else{if(i)throw i;if(i===null)return;await new yft(n)}}}catch(s){throw i=U1e(i,s),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?S2.destroyer(t,null):(t.off("readable",n),o())}}z1e(Er.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});z1e(qz.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[bb]!==!1},set(t){this[bb]=!!t}}});Er._fromList=Y1e;function Y1e(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Nz(t){let e=t._readableState;Ur("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Lu.nextTick(zft,e,t))}function zft(t,e){if(Ur("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Lu.nextTick(Kft,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function Kft(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}Er.from=function(t,e){return Bft(Er,t,e)};var jz;function Q1e(){return jz===void 0&&(jz={}),jz}Er.fromWeb=function(t,e){return Q1e().newStreamReadableFromReadableStream(t,e)};Er.toWeb=function(t,e){return Q1e().newReadableStreamFromStreamReadable(t,e)};Er.wrap=function(t,e){var r,n;return new Er({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,o){S2.destroyer(t,i),o(i)}}).wrap(t)}});var Wz=H((PZt,l2e)=>{_();var vb=ai(),{ArrayPrototypeSlice:r2e,Error:Wft,FunctionPrototypeSymbolHasInstance:n2e,ObjectDefineProperty:i2e,ObjectDefineProperties:Gft,ObjectSetPrototypeOf:o2e,StringPrototypeToLowerCase:Vft,Symbol:Hft,SymbolHasInstance:Zft}=yo();l2e.exports=gi;gi.WritableState=z3;var{EventEmitter:Jft}=uo(),U3=aR().Stream,{Buffer:hR}=Ut(),yR=gb(),{addAbortSignal:Yft}=$3(),{getHighWaterMark:Qft,getDefaultHighWaterMark:Xft}=uR(),{ERR_INVALID_ARG_TYPE:eut,ERR_METHOD_NOT_IMPLEMENTED:tut,ERR_MULTIPLE_CALLBACK:s2e,ERR_STREAM_CANNOT_PIPE:rut,ERR_STREAM_DESTROYED:F3,ERR_STREAM_ALREADY_FINISHED:nut,ERR_STREAM_NULL_VALUES:iut,ERR_STREAM_WRITE_AFTER_END:out,ERR_UNKNOWN_ENCODING:a2e}=Ba().codes,{errorOrDestroy:M2}=yR;o2e(gi.prototype,U3.prototype);o2e(gi,U3);function Uz(){}var A2=Hft("kOnFinished");function z3(t,e,r){typeof r!="boolean"&&(r=e instanceof wd()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?Qft(this,t,"writableHighWaterMark",r):Xft(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=aut.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,mR(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[A2]=[]}function mR(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}z3.prototype.getBuffer=function(){return r2e(this.buffered,this.bufferedIndex)};i2e(z3.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function gi(t){let e=this instanceof wd();if(!e&&!n2e(gi,this))return new gi(t);this._writableState=new z3(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&Yft(t.signal,this)),U3.call(this,t),yR.construct(this,()=>{let r=this._writableState;r.writing||zz(this,r),Kz(this,r)})}i2e(gi,Zft,{__proto__:null,value:function(t){return n2e(this,t)?!0:this!==gi?!1:t&&t._writableState instanceof z3}});gi.prototype.pipe=function(){M2(this,new rut)};function c2e(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!hR.isEncoding(r))throw new a2e(r);typeof n!="function"&&(n=Uz)}if(e===null)throw new iut;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=hR.from(e,r),r="buffer");else if(e instanceof hR)r="buffer";else if(U3._isUint8Array(e))e=U3._uint8ArrayToBuffer(e),r="buffer";else throw new eut("chunk",["string","Buffer","Uint8Array"],e);let o;return i.ending?o=new out:i.destroyed&&(o=new F3("write")),o?(vb.nextTick(n,o),M2(t,o,!0),o):(i.pendingcb++,sut(t,i,e,r,n))}gi.prototype.write=function(t,e,r){return c2e(this,t,e,r)===!0};gi.prototype.cork=function(){this._writableState.corked++};gi.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||zz(this,t))};gi.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=Vft(e)),!hR.isEncoding(e))throw new a2e(e);return this._writableState.defaultEncoding=e,this};function sut(t,e,r,n,i){let o=e.objectMode?1:r.length;e.length+=o;let s=e.length<e.highWaterMark;return s||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==Uz&&(e.allNoop=!1)):(e.writelen=o,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),s&&!e.errored&&!e.destroyed}function e2e(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new F3("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function t2e(t,e,r,n){--e.pendingcb,n(r),Fz(e),M2(t,r)}function aut(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){M2(t,new s2e);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?vb.nextTick(t2e,t,r,e,i):t2e(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&zz(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},vb.nextTick(cut,r.afterWriteTickInfo)):f2e(t,r,1,i))}function cut({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,f2e(t,e,r,n)}function f2e(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&Fz(e),Kz(t,e)}function Fz(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:o,callback:s}=t.buffered[i],a=t.objectMode?1:o.length;t.length-=a,s((e=t.errored)!==null&&e!==void 0?e:new F3("write"))}let r=t[A2].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new F3("end"))}mR(t)}function zz(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,o=r.length-n;if(!o)return;let s=n;if(e.bufferProcessing=!0,o>1&&t._writev){e.pendingcb-=o-1;let a=e.allNoop?Uz:m=>{for(let p=s;p<r.length;++p)r[p].callback(m)},u=e.allNoop&&s===0?r:r2e(r,s);u.allBuffers=e.allBuffers,e2e(t,e,!0,e.length,u,"",a),mR(e)}else{do{let{chunk:a,encoding:u,callback:m}=r[s];r[s++]=null;let p=i?1:a.length;e2e(t,e,!1,p,a,u,m)}while(s<r.length&&!e.writing);s===r.length?mR(e):s>256?(r.splice(0,s),e.bufferedIndex=0):e.bufferedIndex=s}e.bufferProcessing=!1}gi.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new tut("_write()")};gi.prototype._writev=null;gi.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let o=c2e(this,t,e);o instanceof Wft&&(i=o)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,Kz(this,n,!0),n.ended=!0):n.finished?i=new nut("end"):n.destroyed&&(i=new F3("end"))),typeof r=="function"&&(i||n.finished?vb.nextTick(r,i):n[A2].push(r)),this};function pR(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function fut(t,e){let r=!1;function n(i){if(r){M2(t,i??s2e());return}if(r=!0,e.pendingcb--,i){let o=e[A2].splice(0);for(let s=0;s<o.length;s++)o[s](i);M2(t,i,e.sync)}else pR(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,vb.nextTick(Lz,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function uut(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,fut(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Kz(t,e,r){pR(e)&&(uut(t,e),e.pendingcb===0&&(r?(e.pendingcb++,vb.nextTick((n,i)=>{pR(i)?Lz(n,i):i.pendingcb--},t,e)):pR(e)&&(e.pendingcb++,Lz(t,e))))}function Lz(t,e){e.pendingcb--,e.finished=!0;let r=e[A2].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}Gft(gi.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var lut=yR.destroy;gi.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[A2].length)&&vb.nextTick(Fz,r),lut.call(this,t,e),this};gi.prototype._undestroy=yR.undestroy;gi.prototype._destroy=function(t,e){e(t)};gi.prototype[Jft.captureRejectionSymbol]=function(t){this.destroy(t)};var $z;function u2e(){return $z===void 0&&($z={}),$z}gi.fromWeb=function(t,e){return u2e().newStreamWritableFromWritableStream(t,e)};gi.toWeb=function(t){return u2e().newWritableStreamFromStreamWritable(t)}});var E2e=H((RZt,x2e)=>{_();var Gz=ai(),dut=Ut(),{isReadable:hut,isWritable:put,isIterable:d2e,isNodeStream:mut,isReadableNodeStream:h2e,isWritableNodeStream:p2e,isDuplexNodeStream:yut}=bd(),m2e=tp(),{AbortError:_2e,codes:{ERR_INVALID_ARG_TYPE:gut,ERR_INVALID_RETURN_VALUE:y2e}}=Ba(),{destroyer:P2}=gb(),but=wd(),vut=L3(),{createDeferredPromise:g2e}=yd(),b2e=Oz(),v2e=globalThis.Blob||dut.Blob,wut=typeof v2e<"u"?function(e){return e instanceof v2e}:function(e){return!1},_ut=globalThis.AbortController||_f().AbortController,{FunctionPrototypeCall:w2e}=yo(),wb=class extends but{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};x2e.exports=function t(e,r){if(yut(e))return e;if(h2e(e))return gR({readable:e});if(p2e(e))return gR({writable:e});if(mut(e))return gR({writable:!1,readable:!1});if(typeof e=="function"){let{value:i,write:o,final:s,destroy:a}=xut(e);if(d2e(i))return b2e(wb,i,{objectMode:!0,write:o,final:s,destroy:a});let u=i?.then;if(typeof u=="function"){let m,p=w2e(u,i,b=>{if(b!=null)throw new y2e("nully","body",b)},b=>{P2(m,b)});return m=new wb({objectMode:!0,readable:!1,write:o,final(b){s(async()=>{try{await p,Gz.nextTick(b,null)}catch(A){Gz.nextTick(b,A)}})},destroy:a})}throw new y2e("Iterable, AsyncIterable or AsyncFunction",r,i)}if(wut(e))return t(e.arrayBuffer());if(d2e(e))return b2e(wb,e,{objectMode:!0,writable:!1});if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?h2e(e?.readable)?e?.readable:t(e.readable):void 0,o=e!=null&&e.writable?p2e(e?.writable)?e?.writable:t(e.writable):void 0;return gR({readable:i,writable:o})}let n=e?.then;if(typeof n=="function"){let i;return w2e(n,e,o=>{o!=null&&i.push(o),i.push(null)},o=>{P2(i,o)}),i=new wb({objectMode:!0,writable:!1,read(){}})}throw new gut(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function xut(t){let{promise:e,resolve:r}=g2e(),n=new _ut,i=n.signal;return{value:t(async function*(){for(;;){let s=e;e=null;let{chunk:a,done:u,cb:m}=await s;if(Gz.nextTick(m),u)return;if(i.aborted)throw new _2e(void 0,{cause:i.reason});({promise:e,resolve:r}=g2e()),yield a}}(),{signal:i}),write(s,a,u){let m=r;r=null,m({chunk:s,done:!1,cb:u})},final(s){let a=r;r=null,a({done:!0,cb:s})},destroy(s,a){n.abort(),a(s)}}}function gR(t){let e=t.readable&&typeof t.readable.read!="function"?vut.wrap(t.readable):t.readable,r=t.writable,n=!!hut(e),i=!!put(r),o,s,a,u,m;function p(b){let A=u;u=null,A?A(b):b&&m.destroy(b)}return m=new wb({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(m2e(r,b=>{i=!1,b&&P2(e,b),p(b)}),m._write=function(b,A,M){r.write(b,A)?M():o=M},m._final=function(b){r.end(),s=b},r.on("drain",function(){if(o){let b=o;o=null,b()}}),r.on("finish",function(){if(s){let b=s;s=null,b()}})),n&&(m2e(e,b=>{n=!1,b&&P2(e,b),p(b)}),e.on("readable",function(){if(a){let b=a;a=null,b()}}),e.on("end",function(){m.push(null)}),m._read=function(){for(;;){let b=e.read();if(b===null){a=m._read;return}if(!m.push(b))return}}),m._destroy=function(b,A){!b&&u!==null&&(b=new _2e),a=null,o=null,s=null,u===null?A(b):(u=A,P2(r,b),P2(e,b))},m}});var wd=H((kZt,A2e)=>{"use strict";_();var{ObjectDefineProperties:Eut,ObjectGetOwnPropertyDescriptor:rp,ObjectKeys:Sut,ObjectSetPrototypeOf:S2e}=yo();A2e.exports=Uu;var Zz=L3(),jf=Wz();S2e(Uu.prototype,Zz.prototype);S2e(Uu,Zz);{let t=Sut(jf.prototype);for(let e=0;e<t.length;e++){let r=t[e];Uu.prototype[r]||(Uu.prototype[r]=jf.prototype[r])}}function Uu(t){if(!(this instanceof Uu))return new Uu(t);Zz.call(this,t),jf.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}Eut(Uu.prototype,{writable:{__proto__:null,...rp(jf.prototype,"writable")},writableHighWaterMark:{__proto__:null,...rp(jf.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...rp(jf.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...rp(jf.prototype,"writableBuffer")},writableLength:{__proto__:null,...rp(jf.prototype,"writableLength")},writableFinished:{__proto__:null,...rp(jf.prototype,"writableFinished")},writableCorked:{__proto__:null,...rp(jf.prototype,"writableCorked")},writableEnded:{__proto__:null,...rp(jf.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...rp(jf.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var Vz;function M2e(){return Vz===void 0&&(Vz={}),Vz}Uu.fromWeb=function(t,e){return M2e().newStreamDuplexFromReadableWritablePair(t,e)};Uu.toWeb=function(t){return M2e().newReadableWritablePairFromDuplex(t)};var Hz;Uu.from=function(t){return Hz||(Hz=E2e()),Hz(t,"body")}});var Qz=H((BZt,T2e)=>{"use strict";_();var{ObjectSetPrototypeOf:P2e,Symbol:Mut}=yo();T2e.exports=np;var{ERR_METHOD_NOT_IMPLEMENTED:Aut}=Ba().codes,Yz=wd(),{getHighWaterMark:Put}=uR();P2e(np.prototype,Yz.prototype);P2e(np,Yz);var K3=Mut("kCallback");function np(t){if(!(this instanceof np))return new np(t);let e=t?Put(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Yz.call(this,t),this._readableState.sync=!1,this[K3]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Tut)}function Jz(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function Tut(){this._final!==Jz&&Jz.call(this)}np.prototype._final=Jz;np.prototype._transform=function(t,e,r){throw new Aut("_transform()")};np.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,o=n.length;this._transform(t,e,(s,a)=>{if(s){r(s);return}a!=null&&this.push(a),i.ended||o===n.length||n.length<n.highWaterMark?r():this[K3]=r})};np.prototype._read=function(){if(this[K3]){let t=this[K3];this[K3]=null,t()}}});var eK=H((CZt,I2e)=>{"use strict";_();var{ObjectSetPrototypeOf:R2e}=yo();I2e.exports=T2;var Xz=Qz();R2e(T2.prototype,Xz.prototype);R2e(T2,Xz);function T2(t){if(!(this instanceof T2))return new T2(t);Xz.call(this,t)}T2.prototype._transform=function(t,e,r){r(null,t)}});var _R=H((jZt,C2e)=>{_();var W3=ai(),{ArrayIsArray:Rut,Promise:Iut,SymbolAsyncIterator:kut}=yo(),wR=tp(),{once:Out}=yd(),But=gb(),k2e=wd(),{aggregateTwoErrors:Dut,codes:{ERR_INVALID_ARG_TYPE:cK,ERR_INVALID_RETURN_VALUE:tK,ERR_MISSING_ARGS:Cut,ERR_STREAM_DESTROYED:Nut,ERR_STREAM_PREMATURE_CLOSE:jut},AbortError:qut}=Ba(),{validateFunction:$ut,validateAbortSignal:Lut}=q3(),{isIterable:_b,isReadable:rK,isReadableNodeStream:vR,isNodeStream:O2e,isTransformStream:R2,isWebStream:Uut,isReadableStream:nK,isReadableEnded:Fut}=bd(),zut=globalThis.AbortController||_f().AbortController,iK,oK;function B2e(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=wR(t,{readable:e,writable:r},o=>{n=!o});return{destroy:o=>{n||(n=!0,But.destroyer(t,o||new Nut("pipe")))},cleanup:i}}function Kut(t){return $ut(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function sK(t){if(_b(t))return t;if(vR(t))return Wut(t);throw new cK("val",["Readable","Iterable","AsyncIterable"],t)}async function*Wut(t){oK||(oK=L3()),yield*oK.prototype[kut].call(t)}async function bR(t,e,r,{end:n}){let i,o=null,s=m=>{if(m&&(i=m),o){let p=o;o=null,p()}},a=()=>new Iut((m,p)=>{i?p(i):o=()=>{i?p(i):m()}});e.on("drain",s);let u=wR(e,{readable:!1},s);try{e.writableNeedDrain&&await a();for await(let m of t)e.write(m)||await a();n&&e.end(),await a(),r()}catch(m){r(i!==m?Dut(i,m):m)}finally{u(),e.off("drain",s)}}async function aK(t,e,r,{end:n}){R2(e)&&(e=e.writable);let i=e.getWriter();try{for await(let o of t)await i.ready,i.write(o).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(o){try{await i.abort(o),r(o)}catch(s){r(s)}}}function Gut(...t){return D2e(t,Out(Kut(t)))}function D2e(t,e,r){if(t.length===1&&Rut(t[0])&&(t=t[0]),t.length<2)throw new Cut("streams");let n=new zut,i=n.signal,o=r?.signal,s=[];Lut(o,"options.signal");function a(){M(new qut)}o?.addEventListener("abort",a);let u,m,p=[],b=0;function A(B){M(B,--b===0)}function M(B,I){if(B&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=B),!(!u&&!I)){for(;p.length;)p.shift()(u);o?.removeEventListener("abort",a),n.abort(),I&&(u||s.forEach(q=>q()),W3.nextTick(e,u,m))}}let S;for(let B=0;B<t.length;B++){let I=t[B],q=B<t.length-1,$=B>0,U=q||r?.end!==!1,F=B===t.length-1;if(O2e(I)){let L=function(W){W&&W.name!=="AbortError"&&W.code!=="ERR_STREAM_PREMATURE_CLOSE"&&A(W)};var R=L;if(U){let{destroy:W,cleanup:E}=B2e(I,q,$);p.push(W),rK(I)&&F&&s.push(E)}I.on("error",L),rK(I)&&F&&s.push(()=>{I.removeListener("error",L)})}if(B===0)if(typeof I=="function"){if(S=I({signal:i}),!_b(S))throw new tK("Iterable, AsyncIterable or Stream","source",S)}else _b(I)||vR(I)||R2(I)?S=I:S=k2e.from(I);else if(typeof I=="function"){if(R2(S)){var P;S=sK((P=S)===null||P===void 0?void 0:P.readable)}else S=sK(S);if(S=I(S,{signal:i}),q){if(!_b(S,!0))throw new tK("AsyncIterable",`transform[${B-1}]`,S)}else{var k;iK||(iK=eK());let L=new iK({objectMode:!0}),W=(k=S)===null||k===void 0?void 0:k.then;if(typeof W=="function")b++,W.call(S,l=>{m=l,l!=null&&L.write(l),U&&L.end(),W3.nextTick(A)},l=>{L.destroy(l),W3.nextTick(A,l)});else if(_b(S,!0))b++,bR(S,L,A,{end:U});else if(nK(S)||R2(S)){let l=S.readable||S;b++,bR(l,L,A,{end:U})}else throw new tK("AsyncIterable or Promise","destination",S);S=L;let{destroy:E,cleanup:c}=B2e(S,!1,!0);p.push(E),F&&s.push(c)}}else if(O2e(I)){if(vR(S)){b+=2;let L=Vut(S,I,A,{end:U});rK(I)&&F&&s.push(L)}else if(R2(S)||nK(S)){let L=S.readable||S;b++,bR(L,I,A,{end:U})}else if(_b(S))b++,bR(S,I,A,{end:U});else throw new cK("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],S);S=I}else if(Uut(I)){if(vR(S))b++,aK(sK(S),I,A,{end:U});else if(nK(S)||_b(S))b++,aK(S,I,A,{end:U});else if(R2(S))b++,aK(S.readable,I,A,{end:U});else throw new cK("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],S);S=I}else S=k2e.from(I)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&W3.nextTick(a),S}function Vut(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new jut)}),t.pipe(e,{end:!1}),n){let s=function(){i=!0,e.end()};var o=s;Fut(t)?W3.nextTick(s):t.once("end",s)}else r();return wR(t,{readable:!0,writable:!1},s=>{let a=t._readableState;s&&s.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(s)}),wR(e,{readable:!1,writable:!0},r)}C2e.exports={pipelineImpl:D2e,pipeline:Gut}});var uK=H(($Zt,U2e)=>{"use strict";_();var{pipeline:Hut}=_R(),xR=wd(),{destroyer:Zut}=gb(),{isNodeStream:ER,isReadable:N2e,isWritable:j2e,isWebStream:fK,isTransformStream:xb,isWritableStream:q2e,isReadableStream:$2e}=bd(),{AbortError:Jut,codes:{ERR_INVALID_ARG_VALUE:L2e,ERR_MISSING_ARGS:Yut}}=Ba(),Qut=tp();U2e.exports=function(...e){if(e.length===0)throw new Yut("streams");if(e.length===1)return xR.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=xR.from(e[0])),typeof e[e.length-1]=="function"){let M=e.length-1;e[M]=xR.from(e[M])}for(let M=0;M<e.length;++M)if(!(!ER(e[M])&&!fK(e[M]))){if(M<e.length-1&&!(N2e(e[M])||$2e(e[M])||xb(e[M])))throw new L2e(`streams[${M}]`,r[M],"must be readable");if(M>0&&!(j2e(e[M])||q2e(e[M])||xb(e[M])))throw new L2e(`streams[${M}]`,r[M],"must be writable")}let n,i,o,s,a;function u(M){let S=s;s=null,S?S(M):M?a.destroy(M):!A&&!b&&a.destroy()}let m=e[0],p=Hut(e,u),b=!!(j2e(m)||q2e(m)||xb(m)),A=!!(N2e(p)||$2e(p)||xb(p));if(a=new xR({writableObjectMode:!!(m!=null&&m.writableObjectMode),readableObjectMode:!!(p!=null&&p.writableObjectMode),writable:b,readable:A}),b){if(ER(m))a._write=function(S,P,k){m.write(S,P)?k():n=k},a._final=function(S){m.end(),i=S},m.on("drain",function(){if(n){let S=n;n=null,S()}});else if(fK(m)){let P=(xb(m)?m.writable:m).getWriter();a._write=async function(k,R,B){try{await P.ready,P.write(k).catch(()=>{}),B()}catch(I){B(I)}},a._final=async function(k){try{await P.ready,P.close().catch(()=>{}),i=k}catch(R){k(R)}}}let M=xb(p)?p.readable:p;Qut(M,()=>{if(i){let S=i;i=null,S()}})}if(A){if(ER(p))p.on("readable",function(){if(o){let M=o;o=null,M()}}),p.on("end",function(){a.push(null)}),a._read=function(){for(;;){let M=p.read();if(M===null){o=a._read;return}if(!a.push(M))return}};else if(fK(p)){let S=(xb(p)?p.readable:p).getReader();a._read=async function(){for(;;)try{let{value:P,done:k}=await S.read();if(!a.push(P))return;if(k){a.push(null);return}}catch{return}}}}return a._destroy=function(M,S){!M&&s!==null&&(M=new Jut),o=null,n=null,i=null,s===null?S(M):(s=S,ER(p)&&Zut(p,M))},a}});var Z2e=H((UZt,hK)=>{"use strict";_();var W2e=globalThis.AbortController||_f().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Xut,ERR_INVALID_ARG_TYPE:G3,ERR_MISSING_ARGS:elt,ERR_OUT_OF_RANGE:tlt},AbortError:_d}=Ba(),{validateAbortSignal:Eb,validateInteger:rlt,validateObject:Sb}=q3(),nlt=yo().Symbol("kWeak"),{finished:ilt}=tp(),olt=uK(),{addAbortSignalNoValidate:slt}=$3(),{isWritable:alt,isNodeStream:clt}=bd(),{ArrayPrototypePush:flt,MathFloor:ult,Number:llt,NumberIsNaN:dlt,Promise:F2e,PromiseReject:z2e,PromisePrototypeThen:hlt,Symbol:G2e}=yo(),SR=G2e("kEmpty"),K2e=G2e("kEof");function plt(t,e){if(e!=null&&Sb(e,"options"),e?.signal!=null&&Eb(e.signal,"options.signal"),clt(t)&&!alt(t))throw new Xut("stream",t,"must be writable");let r=olt(this,t);return e!=null&&e.signal&&slt(e.signal,r),r}function MR(t,e){if(typeof t!="function")throw new G3("fn",["Function","AsyncFunction"],t);e!=null&&Sb(e,"options"),e?.signal!=null&&Eb(e.signal,"options.signal");let r=1;return e?.concurrency!=null&&(r=ult(e.concurrency)),rlt(r,"concurrency",1),async function*(){var i,o;let s=new W2e,a=this,u=[],m=s.signal,p={signal:m},b=()=>s.abort();e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted&&b(),e==null||(o=e.signal)===null||o===void 0||o.addEventListener("abort",b);let A,M,S=!1;function P(){S=!0}async function k(){try{for await(let I of a){var R;if(S)return;if(m.aborted)throw new _d;try{I=t(I,p)}catch(q){I=z2e(q)}I!==SR&&(typeof((R=I)===null||R===void 0?void 0:R.catch)=="function"&&I.catch(P),u.push(I),A&&(A(),A=null),!S&&u.length&&u.length>=r&&await new F2e(q=>{M=q}))}u.push(K2e)}catch(I){let q=z2e(I);hlt(q,void 0,P),u.push(q)}finally{var B;S=!0,A&&(A(),A=null),e==null||(B=e.signal)===null||B===void 0||B.removeEventListener("abort",b)}}k();try{for(;;){for(;u.length>0;){let R=await u[0];if(R===K2e)return;if(m.aborted)throw new _d;R!==SR&&(yield R),u.shift(),M&&(M(),M=null)}await new F2e(R=>{A=R})}}finally{s.abort(),S=!0,M&&(M(),M=null)}}.call(this)}function mlt(t=void 0){return t!=null&&Sb(t,"options"),t?.signal!=null&&Eb(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new _d({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function V2e(t,e=void 0){for await(let r of dK.call(this,t,e))return!0;return!1}async function ylt(t,e=void 0){if(typeof t!="function")throw new G3("fn",["Function","AsyncFunction"],t);return!await V2e.call(this,async(...r)=>!await t(...r),e)}async function glt(t,e){for await(let r of dK.call(this,t,e))return r}async function blt(t,e){if(typeof t!="function")throw new G3("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),SR}for await(let n of MR.call(this,r,e));}function dK(t,e){if(typeof t!="function")throw new G3("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:SR}return MR.call(this,r,e)}var lK=class extends elt{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function vlt(t,e,r){var n;if(typeof t!="function")throw new G3("reducer",["Function","AsyncFunction"],t);r!=null&&Sb(r,"options"),r?.signal!=null&&Eb(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let m=new _d(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await ilt(this.destroy(m)),m}let o=new W2e,s=o.signal;if(r!=null&&r.signal){let m={once:!0,[nlt]:this};r.signal.addEventListener("abort",()=>o.abort(),m)}let a=!1;try{for await(let m of this){var u;if(a=!0,r!=null&&(u=r.signal)!==null&&u!==void 0&&u.aborted)throw new _d;i?e=await t(e,m,{signal:s}):(e=m,i=!0)}if(!a&&!i)throw new lK}finally{o.abort()}return e}async function wlt(t){t!=null&&Sb(t,"options"),t?.signal!=null&&Eb(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new _d(void 0,{cause:t.signal.reason});flt(e,n)}return e}function _lt(t,e){let r=MR.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function H2e(t){if(t=llt(t),dlt(t))return 0;if(t<0)throw new tlt("number",">= 0",t);return t}function xlt(t,e=void 0){return e!=null&&Sb(e,"options"),e?.signal!=null&&Eb(e.signal,"options.signal"),t=H2e(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new _d;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new _d;t--<=0&&(yield o)}}.call(this)}function Elt(t,e=void 0){return e!=null&&Sb(e,"options"),e?.signal!=null&&Eb(e.signal,"options.signal"),t=H2e(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new _d;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new _d;if(t-- >0)yield o;else return}}.call(this)}hK.exports.streamReturningOperators={asIndexedPairs:mlt,drop:xlt,filter:dK,flatMap:_lt,map:MR,take:Elt,compose:plt};hK.exports.promiseReturningOperators={every:ylt,forEach:blt,reduce:vlt,toArray:wlt,some:V2e,find:glt}});var pK=H((zZt,J2e)=>{"use strict";_();var{ArrayPrototypePop:Slt,Promise:Mlt}=yo(),{isIterable:Alt,isNodeStream:Plt,isWebStream:Tlt}=bd(),{pipelineImpl:Rlt}=_R(),{finished:Ilt}=tp();mK();function klt(...t){return new Mlt((e,r)=>{let n,i,o=t[t.length-1];if(o&&typeof o=="object"&&!Plt(o)&&!Alt(o)&&!Tlt(o)){let s=Slt(t);n=s.signal,i=s.end}Rlt(t,(s,a)=>{s?r(s):e(a)},{signal:n,end:i})})}J2e.exports={finished:Ilt,pipeline:klt}});var mK=H((WZt,o_e)=>{_();var{Buffer:Olt}=Ut(),{ObjectDefineProperty:ip,ObjectKeys:X2e,ReflectApply:e_e}=yo(),{promisify:{custom:t_e}}=yd(),{streamReturningOperators:Y2e,promiseReturningOperators:Q2e}=Z2e(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:r_e}}=Ba(),Blt=uK(),{pipeline:n_e}=_R(),{destroyer:Dlt}=gb(),i_e=tp(),yK=pK(),gK=bd(),Xi=o_e.exports=aR().Stream;Xi.isDisturbed=gK.isDisturbed;Xi.isErrored=gK.isErrored;Xi.isReadable=gK.isReadable;Xi.Readable=L3();for(let t of X2e(Y2e)){let r=function(...n){if(new.target)throw r_e();return Xi.Readable.from(e_e(e,this,n))};Nlt=r;let e=Y2e[t];ip(r,"name",{__proto__:null,value:e.name}),ip(r,"length",{__proto__:null,value:e.length}),ip(Xi.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var Nlt;for(let t of X2e(Q2e)){let r=function(...i){if(new.target)throw r_e();return e_e(e,this,i)};Nlt=r;let e=Q2e[t];ip(r,"name",{__proto__:null,value:e.name}),ip(r,"length",{__proto__:null,value:e.length}),ip(Xi.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var Nlt;Xi.Writable=Wz();Xi.Duplex=wd();Xi.Transform=Qz();Xi.PassThrough=eK();Xi.pipeline=n_e;var{addAbortSignal:Clt}=$3();Xi.addAbortSignal=Clt;Xi.finished=i_e;Xi.destroy=Dlt;Xi.compose=Blt;ip(Xi,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return yK}});ip(n_e,t_e,{__proto__:null,enumerable:!0,get(){return yK.pipeline}});ip(i_e,t_e,{__proto__:null,enumerable:!0,get(){return yK.finished}});Xi.Stream=Xi;Xi._isUint8Array=function(e){return e instanceof Uint8Array};Xi._uint8ArrayToBuffer=function(e){return Olt.from(e.buffer,e.byteOffset,e.byteLength)}});var bK=H((VZt,eo)=>{"use strict";_();var Oo=mK(),jlt=pK(),qlt=Oo.Readable.destroy;eo.exports=Oo.Readable;eo.exports._uint8ArrayToBuffer=Oo._uint8ArrayToBuffer;eo.exports._isUint8Array=Oo._isUint8Array;eo.exports.isDisturbed=Oo.isDisturbed;eo.exports.isErrored=Oo.isErrored;eo.exports.isReadable=Oo.isReadable;eo.exports.Readable=Oo.Readable;eo.exports.Writable=Oo.Writable;eo.exports.Duplex=Oo.Duplex;eo.exports.Transform=Oo.Transform;eo.exports.PassThrough=Oo.PassThrough;eo.exports.addAbortSignal=Oo.addAbortSignal;eo.exports.finished=Oo.finished;eo.exports.destroy=Oo.destroy;eo.exports.destroy=qlt;eo.exports.pipeline=Oo.pipeline;eo.exports.compose=Oo.compose;Object.defineProperty(Oo,"promises",{configurable:!0,enumerable:!0,get(){return jlt}});eo.exports.Stream=Oo.Stream;eo.exports.default=eo.exports});var GK=H(Q_e=>{_();Q_e.Level=YT().BrowserLevel});var go=H((Fer,X_e)=>{"use strict";_();X_e.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Uint8Array}});var Md=H((Ker,HK)=>{"use strict";_();var ght=Ut(),bht=Object.getPrototypeOf(async function(){}).constructor,exe=globalThis.Blob||ght.Blob,vht=typeof exe<"u"?function(e){return e instanceof exe}:function(e){return!1},VK=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};HK.exports={AggregateError:VK,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof bht},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:vht};HK.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Ca=H((Ger,nxe)=>{"use strict";_();var{format:wht,inspect:VR,AggregateError:_ht}=Md(),xht=globalThis.AggregateError||_ht,Eht=Symbol("kIsNodeError"),Sht=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Mht=/^([A-Z][a-z0-9]*)+$/,Aht="__node_internal_",HR={};function Ib(t,e){if(!t)throw new HR.ERR_INTERNAL_ASSERTION(e)}function txe(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Pht(t,e,r){if(typeof e=="function")return Ib(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return Ib(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:wht(e,...r)}function Bs(t,e,r){r||(r=Error);class n extends r{constructor(...o){super(Pht(t,e,o))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[Eht]=!0,HR[t]=n}function rxe(t){let e=Aht+t.name;return Object.defineProperty(t,"name",{value:e}),t}function Tht(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new xht([e,t],e.message);return r.code=e.code,r}return t||e}var ZK=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new HR.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};Bs("ERR_ASSERTION","%s",Error);Bs("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Ib(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],o=[],s=[];for(let u of e)Ib(typeof u=="string","All expected entries have to be of type string"),Sht.includes(u)?i.push(u.toLowerCase()):Mht.test(u)?o.push(u):(Ib(u!=="object",'The value "object" should be written as "Object"'),s.push(u));if(o.length>0){let u=i.indexOf("object");u!==-1&&(i.splice(i,u,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let u=i.pop();n+=`one of type ${i.join(", ")}, or ${u}`}}(o.length>0||s.length>0)&&(n+=" or ")}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let u=o.pop();n+=`an instance of ${o.join(", ")}, or ${u}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{let u=s.pop();n+=`one of ${s.join(", ")}, or ${u}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let u=VR(r,{depth:-1});n+=`. Received ${u}`}}else{let u=VR(r,{colors:!1});u.length>25&&(u=`${u.slice(0,25)}...`),n+=`. Received type ${typeof r} (${u})`}return n},TypeError);Bs("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=VR(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);Bs("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);Bs("ERR_MISSING_ARGS",(...t)=>{Ib(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);Bs("ERR_OUT_OF_RANGE",(t,e,r)=>{Ib(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=txe(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=txe(n)),n+="n"):n=VR(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);Bs("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Bs("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Bs("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Bs("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Bs("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Bs("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Bs("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Bs("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Bs("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Bs("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Bs("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);nxe.exports={AbortError:ZK,aggregateTwoErrors:rxe(Tht),hideStackFrames:rxe,codes:HR}});var s6=H((Her,dxe)=>{"use strict";_();var{ArrayIsArray:YK,ArrayPrototypeIncludes:axe,ArrayPrototypeJoin:cxe,ArrayPrototypeMap:Rht,NumberIsInteger:QK,NumberIsNaN:Iht,NumberMAX_SAFE_INTEGER:kht,NumberMIN_SAFE_INTEGER:Oht,NumberParseInt:Bht,ObjectPrototypeHasOwnProperty:Dht,RegExpPrototypeExec:fxe,String:Cht,StringPrototypeToUpperCase:Nht,StringPrototypeTrim:jht}=go(),{hideStackFrames:Ff,codes:{ERR_SOCKET_BAD_PORT:qht,ERR_INVALID_ARG_TYPE:Na,ERR_INVALID_ARG_VALUE:q2,ERR_OUT_OF_RANGE:kb,ERR_UNKNOWN_SIGNAL:ixe}}=Ca(),{normalizeEncoding:$ht}=Md(),{isAsyncFunction:Lht,isArrayBufferView:Uht}=Md().types,oxe={};function Fht(t){return t===(t|0)}function zht(t){return t===t>>>0}var Kht=/^[0-7]+$/,Wht="must be a 32-bit unsigned integer or an octal string";function Ght(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(fxe(Kht,t)===null)throw new q2(e,t,Wht);t=Bht(t,8)}return uxe(t,e),t}var Vht=Ff((t,e,r=Oht,n=kht)=>{if(typeof t!="number")throw new Na(e,"number",t);if(!QK(t))throw new kb(e,"an integer",t);if(t<r||t>n)throw new kb(e,`>= ${r} && <= ${n}`,t)}),Hht=Ff((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Na(e,"number",t);if(!QK(t))throw new kb(e,"an integer",t);if(t<r||t>n)throw new kb(e,`>= ${r} && <= ${n}`,t)}),uxe=Ff((t,e,r=!1)=>{if(typeof t!="number")throw new Na(e,"number",t);if(!QK(t))throw new kb(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new kb(e,`>= ${n} && <= ${i}`,t)});function XK(t,e){if(typeof t!="string")throw new Na(e,"string",t)}function Zht(t,e,r=void 0,n){if(typeof t!="number")throw new Na(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&Iht(t))throw new kb(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var Jht=Ff((t,e,r)=>{if(!axe(r,t)){let i="must be one of: "+cxe(Rht(r,o=>typeof o=="string"?`'${o}'`:Cht(o)),", ");throw new q2(e,t,i)}});function lxe(t,e){if(typeof t!="boolean")throw new Na(e,"boolean",t)}function JK(t,e,r){return t==null||!Dht(t,e)?r:t[e]}var Yht=Ff((t,e,r=null)=>{let n=JK(r,"allowArray",!1),i=JK(r,"allowFunction",!1);if(!JK(r,"nullable",!1)&&t===null||!n&&YK(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Na(e,"Object",t)}),Qht=Ff((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Na(e,"a dictionary",t)}),eW=Ff((t,e,r=0)=>{if(!YK(t))throw new Na(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new q2(e,t,n)}});function Xht(t,e){eW(t,e);for(let r=0;r<t.length;r++)XK(t[r],`${e}[${r}]`)}function ept(t,e){eW(t,e);for(let r=0;r<t.length;r++)lxe(t[r],`${e}[${r}]`)}function tpt(t,e="signal"){if(XK(t,e),oxe[t]===void 0)throw oxe[Nht(t)]!==void 0?new ixe(t+" (signals must use all capital letters)"):new ixe(t)}var rpt=Ff((t,e="buffer")=>{if(!Uht(t))throw new Na(e,["Buffer","TypedArray","DataView"],t)});function npt(t,e){let r=$ht(e),n=t.length;if(r==="hex"&&n%2!==0)throw new q2("encoding",e,`is invalid for data of length ${n}`)}function ipt(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&jht(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new qht(e,t,r);return t|0}var opt=Ff((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Na(e,"AbortSignal",t)}),spt=Ff((t,e)=>{if(typeof t!="function")throw new Na(e,"Function",t)}),apt=Ff((t,e)=>{if(typeof t!="function"||Lht(t))throw new Na(e,"Function",t)}),cpt=Ff((t,e)=>{if(t!==void 0)throw new Na(e,"undefined",t)});function fpt(t,e,r){if(!axe(r,t))throw new Na(e,`('${cxe(r,"|")}')`,t)}var upt=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function sxe(t,e){if(typeof t>"u"||!fxe(upt,t))throw new q2(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function lpt(t){if(typeof t=="string")return sxe(t,"hints"),t;if(YK(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];sxe(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new q2("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}dxe.exports={isInt32:Fht,isUint32:zht,parseFileMode:Ght,validateArray:eW,validateStringArray:Xht,validateBooleanArray:ept,validateBoolean:lxe,validateBuffer:rpt,validateDictionary:Qht,validateEncoding:npt,validateFunction:spt,validateInt32:Hht,validateInteger:Vht,validateNumber:Zht,validateObject:Yht,validateOneOf:Jht,validatePlainFunction:apt,validatePort:ipt,validateSignalName:tpt,validateString:XK,validateUint32:uxe,validateUndefined:cpt,validateUnion:fpt,validateAbortSignal:opt,validateLinkHeaderValue:lpt}});var Pd=H((Jer,Txe)=>{"use strict";_();var{Symbol:ZR,SymbolAsyncIterator:hxe,SymbolIterator:pxe,SymbolFor:mxe}=go(),yxe=ZR("kDestroyed"),gxe=ZR("kIsErrored"),tW=ZR("kIsReadable"),bxe=ZR("kIsDisturbed"),dpt=mxe("nodejs.webstream.isClosedPromise"),hpt=mxe("nodejs.webstream.controllerErrorFunction");function JR(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function YR(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function ppt(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Ad(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function vxe(t){return!!(t&&!Ad(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function wxe(t){return!!(t&&!Ad(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function _xe(t){return!!(t&&!Ad(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function mpt(t){return vxe(t)||wxe(t)||_xe(t)}function ypt(t,e){return t==null?!1:e===!0?typeof t[hxe]=="function":e===!1?typeof t[pxe]=="function":typeof t[hxe]=="function"||typeof t[pxe]=="function"}function QR(t){if(!Ad(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[yxe]||n!=null&&n.destroyed)}function xxe(t){if(!YR(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function gpt(t,e){if(!YR(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function bpt(t){if(!JR(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Exe(t,e){if(!JR(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function Sxe(t){return t&&t[tW]!=null?t[tW]:typeof t?.readable!="boolean"?null:QR(t)?!1:JR(t)&&t.readable&&!Exe(t)}function Mxe(t){return typeof t?.writable!="boolean"?null:QR(t)?!1:YR(t)&&t.writable&&!xxe(t)}function vpt(t,e){return Ad(t)?QR(t)?!0:!(e?.readable!==!1&&Sxe(t)||e?.writable!==!1&&Mxe(t)):null}function wpt(t){var e,r;return Ad(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function _pt(t){var e,r;return Ad(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function xpt(t){if(!Ad(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&Axe(t)?t._closed:null}function Axe(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function Pxe(t){return typeof t._sent100=="boolean"&&Axe(t)}function Ept(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Spt(t){if(!Ad(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&Pxe(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function Mpt(t){var e;return!!(t&&((e=t[bxe])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Apt(t){var e,r,n,i,o,s,a,u,m,p;return!!(t&&((e=(r=(n=(i=(o=(s=t[gxe])!==null&&s!==void 0?s:t.readableErrored)!==null&&o!==void 0?o:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(u=t._writableState)===null||u===void 0?void 0:u.errorEmitted)!==null&&r!==void 0?r:(m=t._readableState)===null||m===void 0?void 0:m.errored)!==null&&e!==void 0?e:!((p=t._writableState)===null||p===void 0)&&p.errored))}Txe.exports={kDestroyed:yxe,isDisturbed:Mpt,kIsDisturbed:bxe,isErrored:Apt,kIsErrored:gxe,isReadable:Sxe,kIsReadable:tW,kIsClosedPromise:dpt,kControllerErrorFunction:hpt,isClosed:xpt,isDestroyed:QR,isDuplexNodeStream:ppt,isFinished:vpt,isIterable:ypt,isReadableNodeStream:JR,isReadableStream:vxe,isReadableEnded:bpt,isReadableFinished:Exe,isReadableErrored:_pt,isNodeStream:Ad,isWebStream:mpt,isWritable:Mxe,isWritableNodeStream:YR,isWritableStream:wxe,isWritableEnded:xxe,isWritableFinished:gpt,isWritableErrored:wpt,isServerRequest:Ept,isServerResponse:Pxe,willEmitClose:Spt,isTransformStream:_xe}});var dp=H((Qer,sW)=>{_();var Em=ai(),{AbortError:jxe,codes:Ppt}=Ca(),{ERR_INVALID_ARG_TYPE:Tpt,ERR_STREAM_PREMATURE_CLOSE:Rxe}=Ppt,{kEmptyObject:nW,once:iW}=Md(),{validateAbortSignal:Rpt,validateFunction:Ipt,validateObject:kpt,validateBoolean:Opt}=s6(),{Promise:Bpt,PromisePrototypeThen:Dpt}=go(),{isClosed:Cpt,isReadable:Ixe,isReadableNodeStream:rW,isReadableStream:Npt,isReadableFinished:kxe,isReadableErrored:Oxe,isWritable:Bxe,isWritableNodeStream:Dxe,isWritableStream:jpt,isWritableFinished:Cxe,isWritableErrored:Nxe,isNodeStream:qpt,willEmitClose:$pt,kIsClosedPromise:Lpt}=Pd();function Upt(t){return t.setHeader&&typeof t.abort=="function"}var oW=()=>{};function qxe(t,e,r){var n,i;if(arguments.length===2?(r=e,e=nW):e==null?e=nW:kpt(e,"options"),Ipt(r,"callback"),Rpt(e.signal,"options.signal"),r=iW(r),Npt(t)||jpt(t))return Fpt(t,e,r);if(!qpt(t))throw new Tpt("stream",["ReadableStream","WritableStream","Stream"],t);let o=(n=e.readable)!==null&&n!==void 0?n:rW(t),s=(i=e.writable)!==null&&i!==void 0?i:Dxe(t),a=t._writableState,u=t._readableState,m=()=>{t.writable||A()},p=$pt(t)&&rW(t)===o&&Dxe(t)===s,b=Cxe(t,!1),A=()=>{b=!0,t.destroyed&&(p=!1),!(p&&(!t.readable||o))&&(!o||M)&&r.call(t)},M=kxe(t,!1),S=()=>{M=!0,t.destroyed&&(p=!1),!(p&&(!t.writable||s))&&(!s||b)&&r.call(t)},P=$=>{r.call(t,$)},k=Cpt(t),R=()=>{k=!0;let $=Nxe(t)||Oxe(t);if($&&typeof $!="boolean")return r.call(t,$);if(o&&!M&&rW(t,!0)&&!kxe(t,!1))return r.call(t,new Rxe);if(s&&!b&&!Cxe(t,!1))return r.call(t,new Rxe);r.call(t)},B=()=>{k=!0;let $=Nxe(t)||Oxe(t);if($&&typeof $!="boolean")return r.call(t,$);r.call(t)},I=()=>{t.req.on("finish",A)};Upt(t)?(t.on("complete",A),p||t.on("abort",R),t.req?I():t.on("request",I)):s&&!a&&(t.on("end",m),t.on("close",m)),!p&&typeof t.aborted=="boolean"&&t.on("aborted",R),t.on("end",S),t.on("finish",A),e.error!==!1&&t.on("error",P),t.on("close",R),k?Em.nextTick(R):a!=null&&a.errorEmitted||u!=null&&u.errorEmitted?p||Em.nextTick(B):(!o&&(!p||Ixe(t))&&(b||Bxe(t)===!1)||!s&&(!p||Bxe(t))&&(M||Ixe(t)===!1)||u&&t.req&&t.aborted)&&Em.nextTick(B);let q=()=>{r=oW,t.removeListener("aborted",R),t.removeListener("complete",A),t.removeListener("abort",R),t.removeListener("request",I),t.req&&t.req.removeListener("finish",A),t.removeListener("end",m),t.removeListener("close",m),t.removeListener("finish",A),t.removeListener("end",S),t.removeListener("error",P),t.removeListener("close",R)};if(e.signal&&!k){let $=()=>{let U=r;q(),U.call(t,new jxe(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Em.nextTick($);else{let U=r;r=iW((...F)=>{e.signal.removeEventListener("abort",$),U.apply(t,F)}),e.signal.addEventListener("abort",$)}}return q}function Fpt(t,e,r){let n=!1,i=oW;if(e.signal)if(i=()=>{n=!0,r.call(t,new jxe(void 0,{cause:e.signal.reason}))},e.signal.aborted)Em.nextTick(i);else{let s=r;r=iW((...a)=>{e.signal.removeEventListener("abort",i),s.apply(t,a)}),e.signal.addEventListener("abort",i)}let o=(...s)=>{n||Em.nextTick(()=>r.apply(t,s))};return Dpt(t[Lpt].promise,o,o),oW}function zpt(t,e){var r;let n=!1;return e===null&&(e=nW),(r=e)!==null&&r!==void 0&&r.cleanup&&(Opt(e.cleanup,"cleanup"),n=e.cleanup),new Bpt((i,o)=>{let s=qxe(t,e,a=>{n&&s(),a?o(a):i()})})}sW.exports=qxe;sW.exports.finished=zpt});var Ob=H((etr,Gxe)=>{"use strict";_();var Td=ai(),{aggregateTwoErrors:Kpt,codes:{ERR_MULTIPLE_CALLBACK:Wpt},AbortError:Gpt}=Ca(),{Symbol:Uxe}=go(),{kDestroyed:Vpt,isDestroyed:Hpt,isFinished:Zpt,isServerRequest:Jpt}=Pd(),Fxe=Uxe("kDestroy"),aW=Uxe("kConstruct");function zxe(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function Ypt(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(zxe(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?$xe(this,t,e):this.once(Fxe,function(o){$xe(this,Kpt(o,t),e)}),this)}function $xe(t,e,r){let n=!1;function i(o){if(n)return;n=!0;let s=t._readableState,a=t._writableState;zxe(o,a,s),a&&(a.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(o),o?Td.nextTick(Qpt,t,o):Td.nextTick(Kxe,t)}try{t._destroy(e||null,i)}catch(o){i(o)}}function Qpt(t,e){cW(t,e),Kxe(t)}function Kxe(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function cW(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function Xpt(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function fW(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?Td.nextTick(cW,t,e):cW(t,e))}function e0t(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(aW,e),!(t.listenerCount(aW)>1)&&Td.nextTick(t0t,t)}function t0t(t){let e=!1;function r(n){if(e){fW(t,n??new Wpt);return}e=!0;let i=t._readableState,o=t._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?t.emit(Fxe,n):n?fW(t,n,!0):Td.nextTick(r0t,t)}try{t._construct(n=>{Td.nextTick(r,n)})}catch(n){Td.nextTick(r,n)}}function r0t(t){t.emit(aW)}function Lxe(t){return t?.setHeader&&typeof t.abort=="function"}function Wxe(t){t.emit("close")}function n0t(t,e){t.emit("error",e),Td.nextTick(Wxe,t)}function i0t(t,e){!t||Hpt(t)||(!e&&!Zpt(t)&&(e=new Gpt),Jpt(t)?(t.socket=null,t.destroy(e)):Lxe(t)?t.abort():Lxe(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Td.nextTick(n0t,t,e):Td.nextTick(Wxe,t),t.destroyed||(t[Vpt]=!0))}Gxe.exports={construct:e0t,destroyer:i0t,destroy:Ypt,undestroy:Xpt,errorOrDestroy:fW}});var tI=H((rtr,Hxe)=>{"use strict";_();var{ArrayIsArray:o0t,ObjectSetPrototypeOf:Vxe}=go(),{EventEmitter:XR}=uo();function eI(t){XR.call(this,t)}Vxe(eI.prototype,XR.prototype);Vxe(eI,XR);eI.prototype.pipe=function(t,e){let r=this;function n(p){t.writable&&t.write(p)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",s),r.on("close",a));let o=!1;function s(){o||(o=!0,t.end())}function a(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function u(p){m(),XR.listenerCount(this,"error")===0&&this.emit("error",p)}uW(r,"error",u),uW(t,"error",u);function m(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",m),r.removeListener("close",m),t.removeListener("close",m)}return r.on("end",m),r.on("close",m),t.on("close",m),t.emit("pipe",r),t};function uW(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):o0t(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}Hxe.exports={Stream:eI,prependListener:uW}});var a6=H((itr,rI)=>{"use strict";_();var{AbortError:Zxe,codes:s0t}=Ca(),{isNodeStream:Jxe,isWebStream:a0t,kControllerErrorFunction:c0t}=Pd(),f0t=dp(),{ERR_INVALID_ARG_TYPE:Yxe}=s0t,u0t=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new Yxe(e,"AbortSignal",t)};rI.exports.addAbortSignal=function(e,r){if(u0t(e,"signal"),!Jxe(r)&&!a0t(r))throw new Yxe("stream",["ReadableStream","WritableStream","Stream"],r);return rI.exports.addAbortSignalNoValidate(e,r)};rI.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=Jxe(e)?()=>{e.destroy(new Zxe(void 0,{cause:t.reason}))}:()=>{e[c0t](new Zxe(void 0,{cause:t.reason}))};return t.aborted?r():(t.addEventListener("abort",r),f0t(e,()=>t.removeEventListener("abort",r))),e}});var eEe=H((atr,Xxe)=>{"use strict";_();var{StringPrototypeSlice:Qxe,SymbolIterator:l0t,TypedArrayPrototypeSet:nI,Uint8Array:d0t}=go(),{Buffer:lW}=Ut(),{inspect:h0t}=Md();Xxe.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return lW.alloc(0);let r=lW.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)nI(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[l0t](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let o=n.data;if(e>o.length)r+=o,e-=o.length;else{e===o.length?(r+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=Qxe(o,0,e),this.head=n,n.data=Qxe(o,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=lW.allocUnsafe(e),n=e,i=this.head,o=0;do{let s=i.data;if(e>s.length)nI(r,s,n-e),e-=s.length;else{e===s.length?(nI(r,s,n-e),++o,i.next?this.head=i.next:this.head=this.tail=null):(nI(r,new d0t(s.buffer,s.byteOffset,e),n-e),this.head=i,i.data=s.slice(e));break}++o}while((i=i.next)!==null);return this.length-=o,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return h0t(this,{...r,depth:0,customInspect:!1})}}});var iI=H((ftr,rEe)=>{"use strict";_();var{MathFloor:p0t,NumberIsInteger:m0t}=go(),{ERR_INVALID_ARG_VALUE:y0t}=Ca().codes;function g0t(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function tEe(t){return t?16:16*1024}function b0t(t,e,r,n){let i=g0t(e,n,r);if(i!=null){if(!m0t(i)||i<0){let o=n?`options.${r}`:"options.highWaterMark";throw new y0t(o,i)}return p0t(i)}return tEe(t.objectMode)}rEe.exports={getHighWaterMark:b0t,getDefaultHighWaterMark:tEe}});var dW=H((ltr,sEe)=>{"use strict";_();var nEe=ai(),{PromisePrototypeThen:v0t,SymbolAsyncIterator:iEe,SymbolIterator:oEe}=go(),{Buffer:w0t}=Ut(),{ERR_INVALID_ARG_TYPE:_0t,ERR_STREAM_NULL_VALUES:x0t}=Ca().codes;function E0t(t,e,r){let n;if(typeof e=="string"||e instanceof w0t)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[iEe])i=!0,n=e[iEe]();else if(e&&e[oEe])i=!1,n=e[oEe]();else throw new _0t("iterable",["Iterable"],e);let o=new t({objectMode:!0,highWaterMark:1,...r}),s=!1;o._read=function(){s||(s=!0,u())},o._destroy=function(m,p){v0t(a(m),()=>nEe.nextTick(p,m),b=>nEe.nextTick(p,b||m))};async function a(m){let p=m!=null,b=typeof n.throw=="function";if(p&&b){let{value:A,done:M}=await n.throw(m);if(await A,M)return}if(typeof n.return=="function"){let{value:A}=await n.return();await A}}async function u(){for(;;){try{let{value:m,done:p}=i?await n.next():n.next();if(p)o.push(null);else{let b=m&&typeof m.then=="function"?await m:m;if(b===null)throw s=!1,new x0t;if(o.push(b))continue;s=!1}}catch(m){o.destroy(m)}break}}return o}sEe.exports=E0t});var c6=H((htr,vEe)=>{_();var Hu=ai(),{ArrayPrototypeIndexOf:S0t,NumberIsInteger:M0t,NumberIsNaN:A0t,NumberParseInt:P0t,ObjectDefineProperties:fEe,ObjectKeys:T0t,ObjectSetPrototypeOf:uEe,Promise:R0t,SafeSet:I0t,SymbolAsyncIterator:k0t,Symbol:O0t}=go();vEe.exports=Sr;Sr.ReadableState=bW;var{EventEmitter:B0t}=uo(),{Stream:Sm,prependListener:D0t}=tI(),{Buffer:hW}=Ut(),{addAbortSignal:C0t}=a6(),N0t=dp(),Fr=Md().debuglog("stream",t=>{Fr=t}),j0t=eEe(),L2=Ob(),{getHighWaterMark:q0t,getDefaultHighWaterMark:$0t}=iI(),{aggregateTwoErrors:aEe,codes:{ERR_INVALID_ARG_TYPE:L0t,ERR_METHOD_NOT_IMPLEMENTED:U0t,ERR_OUT_OF_RANGE:F0t,ERR_STREAM_PUSH_AFTER_EOF:z0t,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:K0t}}=Ca(),{validateObject:W0t}=s6(),Bb=O0t("kPaused"),{StringDecoder:lEe}=ou(),G0t=dW();uEe(Sr.prototype,Sm.prototype);uEe(Sr,Sm);var pW=()=>{},{errorOrDestroy:$2}=L2;function bW(t,e,r){typeof r!="boolean"&&(r=e instanceof Rd()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.readableObjectMode)),this.highWaterMark=t?q0t(this,t,"readableHighWaterMark",r):$0t(!1),this.buffer=new j0t,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Bb]=null,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new lEe(t.encoding),this.encoding=t.encoding)}function Sr(t){if(!(this instanceof Sr))return new Sr(t);let e=this instanceof Rd();this._readableState=new bW(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&C0t(t.signal,this)),Sm.call(this,t),L2.construct(this,()=>{this._readableState.needReadable&&oI(this,this._readableState)})}Sr.prototype.destroy=L2.destroy;Sr.prototype._undestroy=L2.undestroy;Sr.prototype._destroy=function(t,e){e(t)};Sr.prototype[B0t.captureRejectionSymbol]=function(t){this.destroy(t)};Sr.prototype.push=function(t,e){return dEe(this,t,e,!1)};Sr.prototype.unshift=function(t,e){return dEe(this,t,e,!0)};function dEe(t,e,r,n){Fr("readableAddChunk",e);let i=t._readableState,o;if(i.objectMode||(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=hW.from(e,r).toString(i.encoding):(e=hW.from(e,r),r=""))):e instanceof hW?r="":Sm._isUint8Array(e)?(e=Sm._uint8ArrayToBuffer(e),r=""):e!=null&&(o=new L0t("chunk",["string","Buffer","Uint8Array"],e))),o)$2(t,o);else if(e===null)i.reading=!1,Z0t(t,i);else if(i.objectMode||e&&e.length>0)if(n)if(i.endEmitted)$2(t,new K0t);else{if(i.destroyed||i.errored)return!1;mW(t,i,e,!0)}else if(i.ended)$2(t,new z0t);else{if(i.destroyed||i.errored)return!1;i.reading=!1,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?mW(t,i,e,!1):oI(t,i)):mW(t,i,e,!1)}else n||(i.reading=!1,oI(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function mW(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&sI(t)),oI(t,e)}Sr.prototype.isPaused=function(){let t=this._readableState;return t[Bb]===!0||t.flowing===!1};Sr.prototype.setEncoding=function(t){let e=new lEe(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var V0t=1073741824;function H0t(t){if(t>V0t)throw new F0t("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function cEe(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:A0t(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}Sr.prototype.read=function(t){Fr("read",t),t===void 0?t=NaN:M0t(t)||(t=P0t(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=H0t(t)),t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Fr("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?yW(this):sI(this),null;if(t=cEe(t,e),t===0&&e.ended)return e.length===0&&yW(this),null;let n=e.needReadable;if(Fr("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Fr("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,Fr("reading, ended or constructing",n);else if(n){Fr("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0);try{this._read(e.highWaterMark)}catch(o){$2(this,o)}e.sync=!1,e.reading||(t=cEe(r,e))}let i;return t>0?i=gEe(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&yW(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function Z0t(t,e){if(Fr("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?sI(t):(e.needReadable=!1,e.emittedReadable=!0,hEe(t))}}function sI(t){let e=t._readableState;Fr("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Fr("emitReadable",e.flowing),e.emittedReadable=!0,Hu.nextTick(hEe,t))}function hEe(t){let e=t._readableState;Fr("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,mEe(t)}function oI(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Hu.nextTick(J0t,t,e))}function J0t(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(Fr("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Sr.prototype._read=function(t){throw new U0t("_read()")};Sr.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new I0t(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),Fr("pipe count=%d opts=%j",n.pipes.length,e);let o=(!e||e.end!==!1)&&t!==Hu.stdout&&t!==Hu.stderr?a:k;n.endEmitted?Hu.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(R,B){Fr("onunpipe"),R===r&&B&&B.hasUnpiped===!1&&(B.hasUnpiped=!0,p())}function a(){Fr("onend"),t.end()}let u,m=!1;function p(){Fr("cleanup"),t.removeListener("close",S),t.removeListener("finish",P),u&&t.removeListener("drain",u),t.removeListener("error",M),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",k),r.removeListener("data",A),m=!0,u&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&u()}function b(){m||(n.pipes.length===1&&n.pipes[0]===t?(Fr("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(Fr("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),u||(u=Y0t(r,t),t.on("drain",u))}r.on("data",A);function A(R){Fr("ondata");let B=t.write(R);Fr("dest.write",B),B===!1&&b()}function M(R){if(Fr("onerror",R),k(),t.removeListener("error",M),t.listenerCount("error")===0){let B=t._writableState||t._readableState;B&&!B.errorEmitted?$2(t,R):t.emit("error",R)}}D0t(t,"error",M);function S(){t.removeListener("finish",P),k()}t.once("close",S);function P(){Fr("onfinish"),t.removeListener("close",S),k()}t.once("finish",P);function k(){Fr("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?n.flowing&&b():n.flowing||(Fr("pipe resume"),r.resume()),t};function Y0t(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(Fr("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(Fr("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}Sr.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let o=0;o<i.length;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}let n=S0t(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};Sr.prototype.on=function(t,e){let r=Sm.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Fr("on readable",n.length,n.reading),n.length?sI(this):n.reading||Hu.nextTick(Q0t,this)),r};Sr.prototype.addListener=Sr.prototype.on;Sr.prototype.removeListener=function(t,e){let r=Sm.prototype.removeListener.call(this,t,e);return t==="readable"&&Hu.nextTick(pEe,this),r};Sr.prototype.off=Sr.prototype.removeListener;Sr.prototype.removeAllListeners=function(t){let e=Sm.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Hu.nextTick(pEe,this),e};function pEe(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Bb]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function Q0t(t){Fr("readable nexttick read 0"),t.read(0)}Sr.prototype.resume=function(){let t=this._readableState;return t.flowing||(Fr("resume"),t.flowing=!t.readableListening,X0t(this,t)),t[Bb]=!1,this};function X0t(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Hu.nextTick(emt,t,e))}function emt(t,e){Fr("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),mEe(t),e.flowing&&!e.reading&&t.read(0)}Sr.prototype.pause=function(){return Fr("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Fr("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Bb]=!0,this};function mEe(t){let e=t._readableState;for(Fr("flow",e.flowing);e.flowing&&t.read()!==null;);}Sr.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{$2(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=T0t(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};Sr.prototype[k0t]=function(){return yEe(this)};Sr.prototype.iterator=function(t){return t!==void 0&&W0t(t,"options"),yEe(this,t)};function yEe(t,e){typeof t.read!="function"&&(t=Sr.wrap(t,{objectMode:!0}));let r=tmt(t,e);return r.stream=t,r}async function*tmt(t,e){let r=pW;function n(s){this===t?(r(),r=pW):r=s}t.on("readable",n);let i,o=N0t(t,{writable:!1},s=>{i=s?aEe(i,s):null,r(),r=pW});try{for(;;){let s=t.destroyed?null:t.read();if(s!==null)yield s;else{if(i)throw i;if(i===null)return;await new R0t(n)}}}catch(s){throw i=aEe(i,s),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?L2.destroyer(t,null):(t.off("readable",n),o())}}fEe(Sr.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});fEe(bW.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Bb]!==!1},set(t){this[Bb]=!!t}}});Sr._fromList=gEe;function gEe(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function yW(t){let e=t._readableState;Fr("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Hu.nextTick(rmt,e,t))}function rmt(t,e){if(Fr("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Hu.nextTick(nmt,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function nmt(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}Sr.from=function(t,e){return G0t(Sr,t,e)};var gW;function bEe(){return gW===void 0&&(gW={}),gW}Sr.fromWeb=function(t,e){return bEe().newStreamReadableFromReadableStream(t,e)};Sr.toWeb=function(t,e){return bEe().newReadableStreamFromStreamReadable(t,e)};Sr.wrap=function(t,e){var r,n;return new Sr({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,o){L2.destroyer(t,i),o(i)}}).wrap(t)}});var MW=H((mtr,kEe)=>{_();var Db=ai(),{ArrayPrototypeSlice:xEe,Error:imt,FunctionPrototypeSymbolHasInstance:EEe,ObjectDefineProperty:SEe,ObjectDefineProperties:omt,ObjectSetPrototypeOf:MEe,StringPrototypeToLowerCase:smt,Symbol:amt,SymbolHasInstance:cmt}=go();kEe.exports=bi;bi.WritableState=l6;var{EventEmitter:fmt}=uo(),f6=tI().Stream,{Buffer:aI}=Ut(),uI=Ob(),{addAbortSignal:umt}=a6(),{getHighWaterMark:lmt,getDefaultHighWaterMark:dmt}=iI(),{ERR_INVALID_ARG_TYPE:hmt,ERR_METHOD_NOT_IMPLEMENTED:pmt,ERR_MULTIPLE_CALLBACK:AEe,ERR_STREAM_CANNOT_PIPE:mmt,ERR_STREAM_DESTROYED:u6,ERR_STREAM_ALREADY_FINISHED:ymt,ERR_STREAM_NULL_VALUES:gmt,ERR_STREAM_WRITE_AFTER_END:bmt,ERR_UNKNOWN_ENCODING:PEe}=Ca().codes,{errorOrDestroy:U2}=uI;MEe(bi.prototype,f6.prototype);MEe(bi,f6);function _W(){}var F2=amt("kOnFinished");function l6(t,e,r){typeof r!="boolean"&&(r=e instanceof Rd()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?lmt(this,t,"writableHighWaterMark",r):dmt(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=wmt.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,fI(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[F2]=[]}function fI(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}l6.prototype.getBuffer=function(){return xEe(this.buffered,this.bufferedIndex)};SEe(l6.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function bi(t){let e=this instanceof Rd();if(!e&&!EEe(bi,this))return new bi(t);this._writableState=new l6(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&umt(t.signal,this)),f6.call(this,t),uI.construct(this,()=>{let r=this._writableState;r.writing||EW(this,r),SW(this,r)})}SEe(bi,cmt,{__proto__:null,value:function(t){return EEe(this,t)?!0:this!==bi?!1:t&&t._writableState instanceof l6}});bi.prototype.pipe=function(){U2(this,new mmt)};function TEe(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!aI.isEncoding(r))throw new PEe(r);typeof n!="function"&&(n=_W)}if(e===null)throw new gmt;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=aI.from(e,r),r="buffer");else if(e instanceof aI)r="buffer";else if(f6._isUint8Array(e))e=f6._uint8ArrayToBuffer(e),r="buffer";else throw new hmt("chunk",["string","Buffer","Uint8Array"],e);let o;return i.ending?o=new bmt:i.destroyed&&(o=new u6("write")),o?(Db.nextTick(n,o),U2(t,o,!0),o):(i.pendingcb++,vmt(t,i,e,r,n))}bi.prototype.write=function(t,e,r){return TEe(this,t,e,r)===!0};bi.prototype.cork=function(){this._writableState.corked++};bi.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||EW(this,t))};bi.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=smt(e)),!aI.isEncoding(e))throw new PEe(e);return this._writableState.defaultEncoding=e,this};function vmt(t,e,r,n,i){let o=e.objectMode?1:r.length;e.length+=o;let s=e.length<e.highWaterMark;return s||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==_W&&(e.allNoop=!1)):(e.writelen=o,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),s&&!e.errored&&!e.destroyed}function wEe(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new u6("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function _Ee(t,e,r,n){--e.pendingcb,n(r),xW(e),U2(t,r)}function wmt(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){U2(t,new AEe);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?Db.nextTick(_Ee,t,r,e,i):_Ee(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&EW(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},Db.nextTick(_mt,r.afterWriteTickInfo)):REe(t,r,1,i))}function _mt({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,REe(t,e,r,n)}function REe(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&xW(e),SW(t,e)}function xW(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:o,callback:s}=t.buffered[i],a=t.objectMode?1:o.length;t.length-=a,s((e=t.errored)!==null&&e!==void 0?e:new u6("write"))}let r=t[F2].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new u6("end"))}fI(t)}function EW(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,o=r.length-n;if(!o)return;let s=n;if(e.bufferProcessing=!0,o>1&&t._writev){e.pendingcb-=o-1;let a=e.allNoop?_W:m=>{for(let p=s;p<r.length;++p)r[p].callback(m)},u=e.allNoop&&s===0?r:xEe(r,s);u.allBuffers=e.allBuffers,wEe(t,e,!0,e.length,u,"",a),fI(e)}else{do{let{chunk:a,encoding:u,callback:m}=r[s];r[s++]=null;let p=i?1:a.length;wEe(t,e,!1,p,a,u,m)}while(s<r.length&&!e.writing);s===r.length?fI(e):s>256?(r.splice(0,s),e.bufferedIndex=0):e.bufferedIndex=s}e.bufferProcessing=!1}bi.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new pmt("_write()")};bi.prototype._writev=null;bi.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let o=TEe(this,t,e);o instanceof imt&&(i=o)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,SW(this,n,!0),n.ended=!0):n.finished?i=new ymt("end"):n.destroyed&&(i=new u6("end"))),typeof r=="function"&&(i||n.finished?Db.nextTick(r,i):n[F2].push(r)),this};function cI(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function xmt(t,e){let r=!1;function n(i){if(r){U2(t,i??AEe());return}if(r=!0,e.pendingcb--,i){let o=e[F2].splice(0);for(let s=0;s<o.length;s++)o[s](i);U2(t,i,e.sync)}else cI(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,Db.nextTick(wW,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function Emt(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,xmt(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function SW(t,e,r){cI(e)&&(Emt(t,e),e.pendingcb===0&&(r?(e.pendingcb++,Db.nextTick((n,i)=>{cI(i)?wW(n,i):i.pendingcb--},t,e)):cI(e)&&(e.pendingcb++,wW(t,e))))}function wW(t,e){e.pendingcb--,e.finished=!0;let r=e[F2].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}omt(bi.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Smt=uI.destroy;bi.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[F2].length)&&Db.nextTick(xW,r),Smt.call(this,t,e),this};bi.prototype._undestroy=uI.undestroy;bi.prototype._destroy=function(t,e){e(t)};bi.prototype[fmt.captureRejectionSymbol]=function(t){this.destroy(t)};var vW;function IEe(){return vW===void 0&&(vW={}),vW}bi.fromWeb=function(t,e){return IEe().newStreamWritableFromWritableStream(t,e)};bi.toWeb=function(t){return IEe().newWritableStreamFromStreamWritable(t)}});var zEe=H((gtr,FEe)=>{_();var AW=ai(),Mmt=Ut(),{isReadable:Amt,isWritable:Pmt,isIterable:OEe,isNodeStream:Tmt,isReadableNodeStream:BEe,isWritableNodeStream:DEe,isDuplexNodeStream:Rmt}=Pd(),CEe=dp(),{AbortError:UEe,codes:{ERR_INVALID_ARG_TYPE:Imt,ERR_INVALID_RETURN_VALUE:NEe}}=Ca(),{destroyer:z2}=Ob(),kmt=Rd(),Omt=c6(),{createDeferredPromise:jEe}=Md(),qEe=dW(),$Ee=globalThis.Blob||Mmt.Blob,Bmt=typeof $Ee<"u"?function(e){return e instanceof $Ee}:function(e){return!1},Dmt=globalThis.AbortController||_f().AbortController,{FunctionPrototypeCall:LEe}=go(),Cb=class extends kmt{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};FEe.exports=function t(e,r){if(Rmt(e))return e;if(BEe(e))return lI({readable:e});if(DEe(e))return lI({writable:e});if(Tmt(e))return lI({writable:!1,readable:!1});if(typeof e=="function"){let{value:i,write:o,final:s,destroy:a}=Cmt(e);if(OEe(i))return qEe(Cb,i,{objectMode:!0,write:o,final:s,destroy:a});let u=i?.then;if(typeof u=="function"){let m,p=LEe(u,i,b=>{if(b!=null)throw new NEe("nully","body",b)},b=>{z2(m,b)});return m=new Cb({objectMode:!0,readable:!1,write:o,final(b){s(async()=>{try{await p,AW.nextTick(b,null)}catch(A){AW.nextTick(b,A)}})},destroy:a})}throw new NEe("Iterable, AsyncIterable or AsyncFunction",r,i)}if(Bmt(e))return t(e.arrayBuffer());if(OEe(e))return qEe(Cb,e,{objectMode:!0,writable:!1});if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?BEe(e?.readable)?e?.readable:t(e.readable):void 0,o=e!=null&&e.writable?DEe(e?.writable)?e?.writable:t(e.writable):void 0;return lI({readable:i,writable:o})}let n=e?.then;if(typeof n=="function"){let i;return LEe(n,e,o=>{o!=null&&i.push(o),i.push(null)},o=>{z2(i,o)}),i=new Cb({objectMode:!0,writable:!1,read(){}})}throw new Imt(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function Cmt(t){let{promise:e,resolve:r}=jEe(),n=new Dmt,i=n.signal;return{value:t(async function*(){for(;;){let s=e;e=null;let{chunk:a,done:u,cb:m}=await s;if(AW.nextTick(m),u)return;if(i.aborted)throw new UEe(void 0,{cause:i.reason});({promise:e,resolve:r}=jEe()),yield a}}(),{signal:i}),write(s,a,u){let m=r;r=null,m({chunk:s,done:!1,cb:u})},final(s){let a=r;r=null,a({done:!0,cb:s})},destroy(s,a){n.abort(),a(s)}}}function lI(t){let e=t.readable&&typeof t.readable.read!="function"?Omt.wrap(t.readable):t.readable,r=t.writable,n=!!Amt(e),i=!!Pmt(r),o,s,a,u,m;function p(b){let A=u;u=null,A?A(b):b&&m.destroy(b)}return m=new Cb({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(CEe(r,b=>{i=!1,b&&z2(e,b),p(b)}),m._write=function(b,A,M){r.write(b,A)?M():o=M},m._final=function(b){r.end(),s=b},r.on("drain",function(){if(o){let b=o;o=null,b()}}),r.on("finish",function(){if(s){let b=s;s=null,b()}})),n&&(CEe(e,b=>{n=!1,b&&z2(e,b),p(b)}),e.on("readable",function(){if(a){let b=a;a=null,b()}}),e.on("end",function(){m.push(null)}),m._read=function(){for(;;){let b=e.read();if(b===null){a=m._read;return}if(!m.push(b))return}}),m._destroy=function(b,A){!b&&u!==null&&(b=new UEe),a=null,o=null,s=null,u===null?A(b):(u=A,z2(r,b),z2(e,b))},m}});var Rd=H((vtr,GEe)=>{"use strict";_();var{ObjectDefineProperties:Nmt,ObjectGetOwnPropertyDescriptor:hp,ObjectKeys:jmt,ObjectSetPrototypeOf:KEe}=go();GEe.exports=Zu;var RW=c6(),zf=MW();KEe(Zu.prototype,RW.prototype);KEe(Zu,RW);{let t=jmt(zf.prototype);for(let e=0;e<t.length;e++){let r=t[e];Zu.prototype[r]||(Zu.prototype[r]=zf.prototype[r])}}function Zu(t){if(!(this instanceof Zu))return new Zu(t);RW.call(this,t),zf.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}Nmt(Zu.prototype,{writable:{__proto__:null,...hp(zf.prototype,"writable")},writableHighWaterMark:{__proto__:null,...hp(zf.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...hp(zf.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...hp(zf.prototype,"writableBuffer")},writableLength:{__proto__:null,...hp(zf.prototype,"writableLength")},writableFinished:{__proto__:null,...hp(zf.prototype,"writableFinished")},writableCorked:{__proto__:null,...hp(zf.prototype,"writableCorked")},writableEnded:{__proto__:null,...hp(zf.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...hp(zf.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var PW;function WEe(){return PW===void 0&&(PW={}),PW}Zu.fromWeb=function(t,e){return WEe().newStreamDuplexFromReadableWritablePair(t,e)};Zu.toWeb=function(t){return WEe().newReadableWritablePairFromDuplex(t)};var TW;Zu.from=function(t){return TW||(TW=zEe()),TW(t,"body")}});var OW=H((_tr,HEe)=>{"use strict";_();var{ObjectSetPrototypeOf:VEe,Symbol:qmt}=go();HEe.exports=pp;var{ERR_METHOD_NOT_IMPLEMENTED:$mt}=Ca().codes,kW=Rd(),{getHighWaterMark:Lmt}=iI();VEe(pp.prototype,kW.prototype);VEe(pp,kW);var d6=qmt("kCallback");function pp(t){if(!(this instanceof pp))return new pp(t);let e=t?Lmt(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),kW.call(this,t),this._readableState.sync=!1,this[d6]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Umt)}function IW(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function Umt(){this._final!==IW&&IW.call(this)}pp.prototype._final=IW;pp.prototype._transform=function(t,e,r){throw new $mt("_transform()")};pp.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,o=n.length;this._transform(t,e,(s,a)=>{if(s){r(s);return}a!=null&&this.push(a),i.ended||o===n.length||n.length<n.highWaterMark?r():this[d6]=r})};pp.prototype._read=function(){if(this[d6]){let t=this[d6];this[d6]=null,t()}}});var DW=H((Etr,JEe)=>{"use strict";_();var{ObjectSetPrototypeOf:ZEe}=go();JEe.exports=K2;var BW=OW();ZEe(K2.prototype,BW.prototype);ZEe(K2,BW);function K2(t){if(!(this instanceof K2))return new K2(t);BW.call(this,t)}K2.prototype._transform=function(t,e,r){r(null,t)}});var mI=H((Mtr,tSe)=>{_();var h6=ai(),{ArrayIsArray:Fmt,Promise:zmt,SymbolAsyncIterator:Kmt}=go(),pI=dp(),{once:Wmt}=Md(),Gmt=Ob(),YEe=Rd(),{aggregateTwoErrors:Vmt,codes:{ERR_INVALID_ARG_TYPE:FW,ERR_INVALID_RETURN_VALUE:CW,ERR_MISSING_ARGS:Hmt,ERR_STREAM_DESTROYED:Zmt,ERR_STREAM_PREMATURE_CLOSE:Jmt},AbortError:Ymt}=Ca(),{validateFunction:Qmt,validateAbortSignal:Xmt}=s6(),{isIterable:Nb,isReadable:NW,isReadableNodeStream:hI,isNodeStream:QEe,isTransformStream:W2,isWebStream:eyt,isReadableStream:jW,isReadableEnded:tyt}=Pd(),ryt=globalThis.AbortController||_f().AbortController,qW,$W;function XEe(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=pI(t,{readable:e,writable:r},o=>{n=!o});return{destroy:o=>{n||(n=!0,Gmt.destroyer(t,o||new Zmt("pipe")))},cleanup:i}}function nyt(t){return Qmt(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function LW(t){if(Nb(t))return t;if(hI(t))return iyt(t);throw new FW("val",["Readable","Iterable","AsyncIterable"],t)}async function*iyt(t){$W||($W=c6()),yield*$W.prototype[Kmt].call(t)}async function dI(t,e,r,{end:n}){let i,o=null,s=m=>{if(m&&(i=m),o){let p=o;o=null,p()}},a=()=>new zmt((m,p)=>{i?p(i):o=()=>{i?p(i):m()}});e.on("drain",s);let u=pI(e,{readable:!1},s);try{e.writableNeedDrain&&await a();for await(let m of t)e.write(m)||await a();n&&e.end(),await a(),r()}catch(m){r(i!==m?Vmt(i,m):m)}finally{u(),e.off("drain",s)}}async function UW(t,e,r,{end:n}){W2(e)&&(e=e.writable);let i=e.getWriter();try{for await(let o of t)await i.ready,i.write(o).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(o){try{await i.abort(o),r(o)}catch(s){r(s)}}}function oyt(...t){return eSe(t,Wmt(nyt(t)))}function eSe(t,e,r){if(t.length===1&&Fmt(t[0])&&(t=t[0]),t.length<2)throw new Hmt("streams");let n=new ryt,i=n.signal,o=r?.signal,s=[];Xmt(o,"options.signal");function a(){M(new Ymt)}o?.addEventListener("abort",a);let u,m,p=[],b=0;function A(B){M(B,--b===0)}function M(B,I){if(B&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=B),!(!u&&!I)){for(;p.length;)p.shift()(u);o?.removeEventListener("abort",a),n.abort(),I&&(u||s.forEach(q=>q()),h6.nextTick(e,u,m))}}let S;for(let B=0;B<t.length;B++){let I=t[B],q=B<t.length-1,$=B>0,U=q||r?.end!==!1,F=B===t.length-1;if(QEe(I)){let L=function(W){W&&W.name!=="AbortError"&&W.code!=="ERR_STREAM_PREMATURE_CLOSE"&&A(W)};var R=L;if(U){let{destroy:W,cleanup:E}=XEe(I,q,$);p.push(W),NW(I)&&F&&s.push(E)}I.on("error",L),NW(I)&&F&&s.push(()=>{I.removeListener("error",L)})}if(B===0)if(typeof I=="function"){if(S=I({signal:i}),!Nb(S))throw new CW("Iterable, AsyncIterable or Stream","source",S)}else Nb(I)||hI(I)||W2(I)?S=I:S=YEe.from(I);else if(typeof I=="function"){if(W2(S)){var P;S=LW((P=S)===null||P===void 0?void 0:P.readable)}else S=LW(S);if(S=I(S,{signal:i}),q){if(!Nb(S,!0))throw new CW("AsyncIterable",`transform[${B-1}]`,S)}else{var k;qW||(qW=DW());let L=new qW({objectMode:!0}),W=(k=S)===null||k===void 0?void 0:k.then;if(typeof W=="function")b++,W.call(S,l=>{m=l,l!=null&&L.write(l),U&&L.end(),h6.nextTick(A)},l=>{L.destroy(l),h6.nextTick(A,l)});else if(Nb(S,!0))b++,dI(S,L,A,{end:U});else if(jW(S)||W2(S)){let l=S.readable||S;b++,dI(l,L,A,{end:U})}else throw new CW("AsyncIterable or Promise","destination",S);S=L;let{destroy:E,cleanup:c}=XEe(S,!1,!0);p.push(E),F&&s.push(c)}}else if(QEe(I)){if(hI(S)){b+=2;let L=syt(S,I,A,{end:U});NW(I)&&F&&s.push(L)}else if(W2(S)||jW(S)){let L=S.readable||S;b++,dI(L,I,A,{end:U})}else if(Nb(S))b++,dI(S,I,A,{end:U});else throw new FW("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],S);S=I}else if(eyt(I)){if(hI(S))b++,UW(LW(S),I,A,{end:U});else if(jW(S)||Nb(S))b++,UW(S,I,A,{end:U});else if(W2(S))b++,UW(S.readable,I,A,{end:U});else throw new FW("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],S);S=I}else S=YEe.from(I)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&h6.nextTick(a),S}function syt(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new Jmt)}),t.pipe(e,{end:!1}),n){let s=function(){i=!0,e.end()};var o=s;tyt(t)?h6.nextTick(s):t.once("end",s)}else r();return pI(t,{readable:!0,writable:!1},s=>{let a=t._readableState;s&&s.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(s)}),pI(e,{readable:!1,writable:!0},r)}tSe.exports={pipelineImpl:eSe,pipeline:oyt}});var KW=H((Ptr,aSe)=>{"use strict";_();var{pipeline:ayt}=mI(),yI=Rd(),{destroyer:cyt}=Ob(),{isNodeStream:gI,isReadable:rSe,isWritable:nSe,isWebStream:zW,isTransformStream:jb,isWritableStream:iSe,isReadableStream:oSe}=Pd(),{AbortError:fyt,codes:{ERR_INVALID_ARG_VALUE:sSe,ERR_MISSING_ARGS:uyt}}=Ca(),lyt=dp();aSe.exports=function(...e){if(e.length===0)throw new uyt("streams");if(e.length===1)return yI.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=yI.from(e[0])),typeof e[e.length-1]=="function"){let M=e.length-1;e[M]=yI.from(e[M])}for(let M=0;M<e.length;++M)if(!(!gI(e[M])&&!zW(e[M]))){if(M<e.length-1&&!(rSe(e[M])||oSe(e[M])||jb(e[M])))throw new sSe(`streams[${M}]`,r[M],"must be readable");if(M>0&&!(nSe(e[M])||iSe(e[M])||jb(e[M])))throw new sSe(`streams[${M}]`,r[M],"must be writable")}let n,i,o,s,a;function u(M){let S=s;s=null,S?S(M):M?a.destroy(M):!A&&!b&&a.destroy()}let m=e[0],p=ayt(e,u),b=!!(nSe(m)||iSe(m)||jb(m)),A=!!(rSe(p)||oSe(p)||jb(p));if(a=new yI({writableObjectMode:!!(m!=null&&m.writableObjectMode),readableObjectMode:!!(p!=null&&p.writableObjectMode),writable:b,readable:A}),b){if(gI(m))a._write=function(S,P,k){m.write(S,P)?k():n=k},a._final=function(S){m.end(),i=S},m.on("drain",function(){if(n){let S=n;n=null,S()}});else if(zW(m)){let P=(jb(m)?m.writable:m).getWriter();a._write=async function(k,R,B){try{await P.ready,P.write(k).catch(()=>{}),B()}catch(I){B(I)}},a._final=async function(k){try{await P.ready,P.close().catch(()=>{}),i=k}catch(R){k(R)}}}let M=jb(p)?p.readable:p;lyt(M,()=>{if(i){let S=i;i=null,S()}})}if(A){if(gI(p))p.on("readable",function(){if(o){let M=o;o=null,M()}}),p.on("end",function(){a.push(null)}),a._read=function(){for(;;){let M=p.read();if(M===null){o=a._read;return}if(!a.push(M))return}};else if(zW(p)){let S=(jb(p)?p.readable:p).getReader();a._read=async function(){for(;;)try{let{value:P,done:k}=await S.read();if(!a.push(P))return;if(k){a.push(null);return}}catch{return}}}}return a._destroy=function(M,S){!M&&s!==null&&(M=new fyt),o=null,n=null,i=null,s===null?S(M):(s=S,gI(p)&&cyt(p,M))},a}});var mSe=H((Rtr,VW)=>{"use strict";_();var lSe=globalThis.AbortController||_f().AbortController,{codes:{ERR_INVALID_ARG_VALUE:dyt,ERR_INVALID_ARG_TYPE:p6,ERR_MISSING_ARGS:hyt,ERR_OUT_OF_RANGE:pyt},AbortError:Id}=Ca(),{validateAbortSignal:qb,validateInteger:myt,validateObject:$b}=s6(),yyt=go().Symbol("kWeak"),{finished:gyt}=dp(),byt=KW(),{addAbortSignalNoValidate:vyt}=a6(),{isWritable:wyt,isNodeStream:_yt}=Pd(),{ArrayPrototypePush:xyt,MathFloor:Eyt,Number:Syt,NumberIsNaN:Myt,Promise:cSe,PromiseReject:fSe,PromisePrototypeThen:Ayt,Symbol:dSe}=go(),bI=dSe("kEmpty"),uSe=dSe("kEof");function Pyt(t,e){if(e!=null&&$b(e,"options"),e?.signal!=null&&qb(e.signal,"options.signal"),_yt(t)&&!wyt(t))throw new dyt("stream",t,"must be writable");let r=byt(this,t);return e!=null&&e.signal&&vyt(e.signal,r),r}function vI(t,e){if(typeof t!="function")throw new p6("fn",["Function","AsyncFunction"],t);e!=null&&$b(e,"options"),e?.signal!=null&&qb(e.signal,"options.signal");let r=1;return e?.concurrency!=null&&(r=Eyt(e.concurrency)),myt(r,"concurrency",1),async function*(){var i,o;let s=new lSe,a=this,u=[],m=s.signal,p={signal:m},b=()=>s.abort();e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted&&b(),e==null||(o=e.signal)===null||o===void 0||o.addEventListener("abort",b);let A,M,S=!1;function P(){S=!0}async function k(){try{for await(let I of a){var R;if(S)return;if(m.aborted)throw new Id;try{I=t(I,p)}catch(q){I=fSe(q)}I!==bI&&(typeof((R=I)===null||R===void 0?void 0:R.catch)=="function"&&I.catch(P),u.push(I),A&&(A(),A=null),!S&&u.length&&u.length>=r&&await new cSe(q=>{M=q}))}u.push(uSe)}catch(I){let q=fSe(I);Ayt(q,void 0,P),u.push(q)}finally{var B;S=!0,A&&(A(),A=null),e==null||(B=e.signal)===null||B===void 0||B.removeEventListener("abort",b)}}k();try{for(;;){for(;u.length>0;){let R=await u[0];if(R===uSe)return;if(m.aborted)throw new Id;R!==bI&&(yield R),u.shift(),M&&(M(),M=null)}await new cSe(R=>{A=R})}}finally{s.abort(),S=!0,M&&(M(),M=null)}}.call(this)}function Tyt(t=void 0){return t!=null&&$b(t,"options"),t?.signal!=null&&qb(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Id({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function hSe(t,e=void 0){for await(let r of GW.call(this,t,e))return!0;return!1}async function Ryt(t,e=void 0){if(typeof t!="function")throw new p6("fn",["Function","AsyncFunction"],t);return!await hSe.call(this,async(...r)=>!await t(...r),e)}async function Iyt(t,e){for await(let r of GW.call(this,t,e))return r}async function kyt(t,e){if(typeof t!="function")throw new p6("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),bI}for await(let n of vI.call(this,r,e));}function GW(t,e){if(typeof t!="function")throw new p6("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:bI}return vI.call(this,r,e)}var WW=class extends hyt{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function Oyt(t,e,r){var n;if(typeof t!="function")throw new p6("reducer",["Function","AsyncFunction"],t);r!=null&&$b(r,"options"),r?.signal!=null&&qb(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let m=new Id(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await gyt(this.destroy(m)),m}let o=new lSe,s=o.signal;if(r!=null&&r.signal){let m={once:!0,[yyt]:this};r.signal.addEventListener("abort",()=>o.abort(),m)}let a=!1;try{for await(let m of this){var u;if(a=!0,r!=null&&(u=r.signal)!==null&&u!==void 0&&u.aborted)throw new Id;i?e=await t(e,m,{signal:s}):(e=m,i=!0)}if(!a&&!i)throw new WW}finally{o.abort()}return e}async function Byt(t){t!=null&&$b(t,"options"),t?.signal!=null&&qb(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Id(void 0,{cause:t.signal.reason});xyt(e,n)}return e}function Dyt(t,e){let r=vI.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function pSe(t){if(t=Syt(t),Myt(t))return 0;if(t<0)throw new pyt("number",">= 0",t);return t}function Cyt(t,e=void 0){return e!=null&&$b(e,"options"),e?.signal!=null&&qb(e.signal,"options.signal"),t=pSe(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Id;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Id;t--<=0&&(yield o)}}.call(this)}function Nyt(t,e=void 0){return e!=null&&$b(e,"options"),e?.signal!=null&&qb(e.signal,"options.signal"),t=pSe(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Id;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Id;if(t-- >0)yield o;else return}}.call(this)}VW.exports.streamReturningOperators={asIndexedPairs:Tyt,drop:Cyt,filter:GW,flatMap:Dyt,map:vI,take:Nyt,compose:Pyt};VW.exports.promiseReturningOperators={every:Ryt,forEach:kyt,reduce:Oyt,toArray:Byt,some:hSe,find:Iyt}});var HW=H((ktr,ySe)=>{"use strict";_();var{ArrayPrototypePop:jyt,Promise:qyt}=go(),{isIterable:$yt,isNodeStream:Lyt,isWebStream:Uyt}=Pd(),{pipelineImpl:Fyt}=mI(),{finished:zyt}=dp();ZW();function Kyt(...t){return new qyt((e,r)=>{let n,i,o=t[t.length-1];if(o&&typeof o=="object"&&!Lyt(o)&&!$yt(o)&&!Uyt(o)){let s=jyt(t);n=s.signal,i=s.end}Fyt(t,(s,a)=>{s?r(s):e(a)},{signal:n,end:i})})}ySe.exports={finished:zyt,pipeline:Kyt}});var ZW=H((Btr,MSe)=>{_();var{Buffer:Wyt}=Ut(),{ObjectDefineProperty:mp,ObjectKeys:vSe,ReflectApply:wSe}=go(),{promisify:{custom:_Se}}=Md(),{streamReturningOperators:gSe,promiseReturningOperators:bSe}=mSe(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:xSe}}=Ca(),Gyt=KW(),{pipeline:ESe}=mI(),{destroyer:Vyt}=Ob(),SSe=dp(),JW=HW(),YW=Pd(),to=MSe.exports=tI().Stream;to.isDisturbed=YW.isDisturbed;to.isErrored=YW.isErrored;to.isReadable=YW.isReadable;to.Readable=c6();for(let t of vSe(gSe)){let r=function(...n){if(new.target)throw xSe();return to.Readable.from(wSe(e,this,n))};Zyt=r;let e=gSe[t];mp(r,"name",{__proto__:null,value:e.name}),mp(r,"length",{__proto__:null,value:e.length}),mp(to.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var Zyt;for(let t of vSe(bSe)){let r=function(...i){if(new.target)throw xSe();return wSe(e,this,i)};Zyt=r;let e=bSe[t];mp(r,"name",{__proto__:null,value:e.name}),mp(r,"length",{__proto__:null,value:e.length}),mp(to.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var Zyt;to.Writable=MW();to.Duplex=Rd();to.Transform=OW();to.PassThrough=DW();to.pipeline=ESe;var{addAbortSignal:Hyt}=a6();to.addAbortSignal=Hyt;to.finished=SSe;to.destroy=Vyt;to.compose=Gyt;mp(to,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return JW}});mp(ESe,_Se,{__proto__:null,enumerable:!0,get(){return JW.pipeline}});mp(SSe,_Se,{__proto__:null,enumerable:!0,get(){return JW.finished}});to.Stream=to;to._isUint8Array=function(e){return e instanceof Uint8Array};to._uint8ArrayToBuffer=function(e){return Wyt.from(e.buffer,e.byteOffset,e.byteLength)}});var QW=H((Ctr,ro)=>{"use strict";_();var Do=ZW(),Jyt=HW(),Yyt=Do.Readable.destroy;ro.exports=Do.Readable;ro.exports._uint8ArrayToBuffer=Do._uint8ArrayToBuffer;ro.exports._isUint8Array=Do._isUint8Array;ro.exports.isDisturbed=Do.isDisturbed;ro.exports.isErrored=Do.isErrored;ro.exports.isReadable=Do.isReadable;ro.exports.Readable=Do.Readable;ro.exports.Writable=Do.Writable;ro.exports.Duplex=Do.Duplex;ro.exports.Transform=Do.Transform;ro.exports.PassThrough=Do.PassThrough;ro.exports.addAbortSignal=Do.addAbortSignal;ro.exports.finished=Do.finished;ro.exports.destroy=Do.destroy;ro.exports.destroy=Yyt;ro.exports.pipeline=Do.pipeline;ro.exports.compose=Do.compose;Object.defineProperty(Do,"promises",{configurable:!0,enumerable:!0,get(){return Jyt}});ro.exports.Stream=Do.Stream;ro.exports.default=ro.exports});var c3e=H((eir,a3e)=>{"use strict";_();a3e.exports=function t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?t(e.toJSON()):Array.isArray(e)?`[${e.reduce((i,o,s)=>`${i}${s===0?"":","}${t(o===void 0||typeof o=="symbol"?null:o)}`,"")}]`:`{${Object.keys(e).sort().reduce((n,i)=>{if(e[i]===void 0||typeof e[i]=="symbol")return n;let o=n.length===0?"":",";return`${n}${o}${t(i)}:${t(e[i])}`},"")}}`}});var _3e=H((isr,w3e)=>{_();var t_=1e3,r_=t_*60,n_=r_*60,Ub=n_*24,cbt=Ub*7,fbt=Ub*365.25;w3e.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return ubt(t);if(r==="number"&&isFinite(t))return e.long?dbt(t):lbt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function ubt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*fbt;case"weeks":case"week":case"w":return r*cbt;case"days":case"day":case"d":return r*Ub;case"hours":case"hour":case"hrs":case"hr":case"h":return r*n_;case"minutes":case"minute":case"mins":case"min":case"m":return r*r_;case"seconds":case"second":case"secs":case"sec":case"s":return r*t_;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function lbt(t){var e=Math.abs(t);return e>=Ub?Math.round(t/Ub)+"d":e>=n_?Math.round(t/n_)+"h":e>=r_?Math.round(t/r_)+"m":e>=t_?Math.round(t/t_)+"s":t+"ms"}function dbt(t){var e=Math.abs(t);return e>=Ub?VI(t,e,Ub,"day"):e>=n_?VI(t,e,n_,"hour"):e>=r_?VI(t,e,r_,"minute"):e>=t_?VI(t,e,t_,"second"):t+" ms"}function VI(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var E3e=H(x3e=>{_();x3e.Level=YT().BrowserLevel});var H3e=H((xcr,jG)=>{"use strict";_();var Lbt=Object.prototype.hasOwnProperty,La="~";function N6(){}Object.create&&(N6.prototype=Object.create(null),new N6().__proto__||(La=!1));function Ubt(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function V3e(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var o=new Ubt(r,n||t,i),s=La?La+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],o]:t._events[s].push(o):(t._events[s]=o,t._eventsCount++),t}function XI(t,e){--t._eventsCount===0?t._events=new N6:delete t._events[e]}function ua(){this._events=new N6,this._eventsCount=0}ua.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)Lbt.call(r,n)&&e.push(La?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};ua.prototype.listeners=function(e){var r=La?La+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s};ua.prototype.listenerCount=function(e){var r=La?La+e:e,n=this._events[r];return n?n.fn?1:n.length:0};ua.prototype.emit=function(e,r,n,i,o,s){var a=La?La+e:e;if(!this._events[a])return!1;var u=this._events[a],m=arguments.length,p,b;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),m){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,i),!0;case 5:return u.fn.call(u.context,r,n,i,o),!0;case 6:return u.fn.call(u.context,r,n,i,o,s),!0}for(b=1,p=new Array(m-1);b<m;b++)p[b-1]=arguments[b];u.fn.apply(u.context,p)}else{var A=u.length,M;for(b=0;b<A;b++)switch(u[b].once&&this.removeListener(e,u[b].fn,void 0,!0),m){case 1:u[b].fn.call(u[b].context);break;case 2:u[b].fn.call(u[b].context,r);break;case 3:u[b].fn.call(u[b].context,r,n);break;case 4:u[b].fn.call(u[b].context,r,n,i);break;default:if(!p)for(M=1,p=new Array(m-1);M<m;M++)p[M-1]=arguments[M];u[b].fn.apply(u[b].context,p)}}return!0};ua.prototype.on=function(e,r,n){return V3e(this,e,r,n,!1)};ua.prototype.once=function(e,r,n){return V3e(this,e,r,n,!0)};ua.prototype.removeListener=function(e,r,n,i){var o=La?La+e:e;if(!this._events[o])return this;if(!r)return XI(this,o),this;var s=this._events[o];if(s.fn)s.fn===r&&(!i||s.once)&&(!n||s.context===n)&&XI(this,o);else{for(var a=0,u=[],m=s.length;a<m;a++)(s[a].fn!==r||i&&!s[a].once||n&&s[a].context!==n)&&u.push(s[a]);u.length?this._events[o]=u.length===1?u[0]:u:XI(this,o)}return this};ua.prototype.removeAllListeners=function(e){var r;return e?(r=La?La+e:e,this._events[r]&&XI(this,r)):(this._events=new N6,this._eventsCount=0),this};ua.prototype.off=ua.prototype.removeListener;ua.prototype.addListener=ua.prototype.on;ua.prefixed=La;ua.EventEmitter=ua;typeof jG<"u"&&(jG.exports=ua)});_();_();_();_();var AZ=Zt(VV(),1);_();_();_();_();function WMe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,u=t.charAt(0),m=Math.log(a)/Math.log(256),p=Math.log(256)/Math.log(a);function b(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var P=0,k=0,R=0,B=S.length;R!==B&&S[R]===0;)R++,P++;for(var I=(B-R)*p+1>>>0,q=new Uint8Array(I);R!==B;){for(var $=S[R],U=0,F=I-1;($!==0||U<k)&&F!==-1;F--,U++)$+=256*q[F]>>>0,q[F]=$%a>>>0,$=$/a>>>0;if($!==0)throw new Error("Non-zero carry");k=U,R++}for(var L=I-k;L!==I&&q[L]===0;)L++;for(var W=u.repeat(P);L<I;++L)W+=t.charAt(q[L]);return W}function A(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var P=0;if(S[P]!==" "){for(var k=0,R=0;S[P]===u;)k++,P++;for(var B=(S.length-P)*m+1>>>0,I=new Uint8Array(B);S[P];){var q=r[S.charCodeAt(P)];if(q===255)return;for(var $=0,U=B-1;(q!==0||$<R)&&U!==-1;U--,$++)q+=a*I[U]>>>0,I[U]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");R=$,P++}if(S[P]!==" "){for(var F=B-R;F!==B&&I[F]===0;)F++;for(var L=new Uint8Array(k+(B-F)),W=k;F!==B;)L[W++]=I[F++];return L}}}function M(S){var P=A(S);if(P)return P;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:A,decode:M}}var GMe=WMe,VMe=GMe,HV=VMe;_();var Zvt=new Uint8Array(0);var ZV=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Vf=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};_();var Rk=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Ik=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return YV(this,e)}},kk=class{constructor(e){this.decoders=e}or(e){return YV(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},YV=(t,e)=>new kk({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Ok=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Rk(e,r,n),this.decoder=new Ik(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},QV=({name:t,prefix:e,encode:r,decode:n})=>new Ok(t,e,r,n),Bk=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=HV(r,e);return QV({prefix:t,name:e,encode:n,decode:o=>Vf(i(o))})},HMe=(t,e,r,n)=>{let i={};for(let p=0;p<e.length;++p)i[e[p]]=p;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,u=0,m=0;for(let p=0;p<o;++p){let b=i[t[p]];if(b===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|b,a+=r,a>=8&&(a-=8,s[m++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s},ZMe=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},la=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>QV({prefix:e,name:t,encode(i){return ZMe(i,n,r)},decode(i){return HMe(i,n,r,t)}});var iwt=la({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),owt=la({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),da=la({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),swt=la({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Dk=new TextEncoder,JMe=new TextDecoder,Je=class{static base64UrlToBytes(e){return da.baseDecode(e)}static base64UrlToObject(e){let r=da.baseDecode(e);return Je.bytesToObject(r)}static bytesToBase64Url(e){return da.baseEncode(e)}static bytesToString(e){return JMe.decode(e)}static bytesToObject(e){let r=Je.bytesToString(e);return JSON.parse(r)}static objectToBytes(e){let r=JSON.stringify(e);return Dk.encode(r)}static stringToBase64Url(e){let r=Dk.encode(e);return da.baseEncode(r)}static stringToBytes(e){return Dk.encode(e)}};_();_();_();_();var os=2n**255n-19n,tv=2n**252n+27742317777372353535851937790883648493n,Ck=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,Nk=0x6666666666666666666666666666666666666666666666666666666666666658n,tM={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,p:os,n:tv,h:8,Gx:Ck,Gy:Nk},ha=(t="")=>{throw new Error(t)},nH=t=>typeof t=="string",iM=(t,e)=>!(t instanceof Uint8Array)||typeof e=="number"&&e>0&&t.length!==e?ha("Uint8Array expected"):t,rv=t=>new Uint8Array(t),nv=(t,e)=>iM(nH(t)?qk(t):rv(t),e),xt=(t,e=os)=>{let r=t%e;return r>=0n?r:e+r},XV=t=>t instanceof js?t:ha("Point expected"),eH,js=class{constructor(e,r,n,i){this.ex=e,this.ey=r,this.ez=n,this.et=i}static fromAffine(e){return new js(e.x,e.y,1n,xt(e.x*e.y))}static fromHex(e,r=!0){let{d:n}=tM;e=nv(e,32);let i=e.slice();i[31]=e[31]&-129;let o=$k(i);o===0n||(r&&!(0n<o&&o<os)&&ha("bad y coord 1"),!r&&!(0n<o&&o<2n**256n)&&ha("bad y coord 2"));let s=xt(o*o),a=xt(s-1n),u=xt(n*s+1n),{isValid:m,value:p}=QMe(a,u);m||ha("bad y coordinate 3");let b=(p&1n)===1n;return(e[31]&128)!==0!==b&&(p=xt(-p)),new js(p,o,1n,xt(p*o))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(e){let{ex:r,ey:n,ez:i}=this,{ex:o,ey:s,ez:a}=XV(e),u=xt(r*a),m=xt(o*i),p=xt(n*a),b=xt(s*i);return u===m&&p===b}is0(){return this.equals(rM)}negate(){return new js(xt(-this.ex),this.ey,this.ez,xt(-this.et))}double(){let{ex:e,ey:r,ez:n}=this,{a:i}=tM,o=xt(e*e),s=xt(r*r),a=xt(2n*xt(n*n)),u=xt(i*o),m=e+r,p=xt(xt(m*m)-o-s),b=u+s,A=b-a,M=u-s,S=xt(p*A),P=xt(b*M),k=xt(p*M),R=xt(A*b);return new js(S,P,R,k)}add(e){let{ex:r,ey:n,ez:i,et:o}=this,{ex:s,ey:a,ez:u,et:m}=XV(e),{a:p,d:b}=tM,A=xt(r*s),M=xt(n*a),S=xt(o*b*m),P=xt(i*u),k=xt((r+n)*(s+a)-A-M),R=xt(P-S),B=xt(P+S),I=xt(M-p*A),q=xt(k*R),$=xt(B*I),U=xt(k*I),F=xt(R*B);return new js(q,$,F,U)}mul(e,r=!0){if(e===0n)return r===!0?ha("cannot multiply by 0"):rM;if(typeof e=="bigint"&&0n<e&&e<tv||ha("invalid scalar, must be < L"),!r&&this.is0()||e===1n)return this;if(this.equals(Mp))return n8e(e).p;let n=rM,i=Mp;for(let o=this;e>0n;o=o.double(),e>>=1n)e&1n?n=n.add(o):r&&(i=i.add(o));return n}multiply(e){return this.mul(e)}clearCofactor(){return this.mul(BigInt(tM.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let e=this.mul(tv/2n,!1).double();return tv%2n&&(e=e.add(this)),e.is0()}toAffine(){let{ex:e,ey:r,ez:n}=this;if(this.is0())return{x:0n,y:0n};let i=sH(n);return xt(n*i)!==1n&&ha("invalid inverse"),{x:xt(e*i),y:xt(r*i)}}toRawBytes(){let{x:e,y:r}=this.toAffine(),n=oH(r);return n[31]|=e&1n?128:0,n}toHex(){return jk(this.toRawBytes())}};js.BASE=new js(Ck,Nk,1n,xt(Ck*Nk));js.ZERO=new js(0n,1n,1n,0n);var{BASE:Mp,ZERO:rM}=js,iH=(t,e)=>t.toString(16).padStart(e,"0"),jk=t=>Array.from(t).map(e=>iH(e,2)).join(""),qk=t=>{let e=t.length;(!nH(t)||e%2)&&ha("hex invalid 1");let r=rv(e/2);for(let n=0;n<r.length;n++){let i=n*2,o=t.slice(i,i+2),s=Number.parseInt(o,16);(Number.isNaN(s)||s<0)&&ha("hex invalid 2"),r[n]=s}return r},oH=t=>qk(iH(t,32*2)).reverse(),$k=t=>BigInt("0x"+jk(rv(iM(t)).reverse())),g_=(...t)=>{let e=rv(t.reduce((n,i)=>n+iM(i).length,0)),r=0;return t.forEach(n=>{e.set(n,r),r+=n.length}),e},sH=(t,e=os)=>{(t===0n||e<=0n)&&ha("no inverse n="+t+" mod="+e);let r=xt(t,e),n=e,i=0n,o=1n,s=1n,a=0n;for(;r!==0n;){let u=n/r,m=n%r,p=i-s*u,b=o-a*u;n=r,r=m,i=s,o=a,s=p,a=b}return n===1n?xt(i,e):ha("no inverse")},sl=(t,e)=>{let r=t;for(;e-- >0n;)r*=r,r%=os;return r},YMe=t=>{let r=t*t%os*t%os,n=sl(r,2n)*r%os,i=sl(n,1n)*t%os,o=sl(i,5n)*i%os,s=sl(o,10n)*o%os,a=sl(s,20n)*s%os,u=sl(a,40n)*a%os,m=sl(u,80n)*u%os,p=sl(m,80n)*u%os,b=sl(p,10n)*o%os;return{pow_p_5_8:sl(b,2n)*t%os,b2:r}},tH=19681161376707505956807079304988542015446066515923890162744021073123829784752n,QMe=(t,e)=>{let r=xt(e*e*e),n=xt(r*r*e),i=YMe(t*n).pow_p_5_8,o=xt(t*r*i),s=xt(e*o*o),a=o,u=xt(o*tH),m=s===t,p=s===xt(-t),b=s===xt(-t*tH);return m&&(o=a),(p||b)&&(o=u),(xt(o)&1n)===1n&&(o=xt(-o)),{isValid:m||p,value:o}},nM=t=>xt($k(t),tv),y_,Lk=(...t)=>oM.sha512Async(...t),aH=(...t)=>typeof y_=="function"?y_(...t):ha("etc.sha512Sync not set"),cH=t=>{let e=t.slice(0,32);e[0]&=248,e[31]&=127,e[31]|=64;let r=t.slice(32,64),n=nM(e),i=Mp.mul(n),o=i.toRawBytes();return{head:e,prefix:r,scalar:n,point:i,pointBytes:o}},Uk=t=>Lk(nv(t,32)).then(cH),XMe=t=>cH(aH(nv(t,32))),Fk=t=>Uk(t).then(e=>e.pointBytes);function fH(t,e){return t?Lk(e.hashable).then(e.finish):e.finish(aH(e.hashable))}var e8e=(t,e,r)=>{let{pointBytes:n,scalar:i}=t,o=nM(e),s=Mp.mul(o).toRawBytes();return{hashable:g_(s,n,r),finish:m=>{let p=xt(o+nM(m)*i,tv);return iM(g_(s,oH(p)),64)}}},uH=async(t,e)=>{let r=nv(t),n=await Uk(e),i=await Lk(n.prefix,r);return fH(!0,e8e(n,i,r))};var t8e=(t,e,r)=>{e=nv(e),t=nv(t,64);let n=js.fromHex(r,!1),i=js.fromHex(t.slice(0,32),!1),o=$k(t.slice(32,64)),s=Mp.mul(o,!1);return{hashable:g_(i.toRawBytes(),n.toRawBytes(),e),finish:m=>{let p=nM(m);return i.add(n.mul(p,!1)).add(s.negate()).clearCofactor().is0()}}},lH=async(t,e,r)=>fH(!0,t8e(t,e,r));var rH=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,oM={bytesToHex:jk,hexToBytes:qk,concatBytes:g_,mod:xt,invert:sH,randomBytes:t=>{let e=rH();return e||ha("crypto.getRandomValues must be defined"),e.getRandomValues(rv(t))},sha512Async:async(...t)=>{let e=rH();e||ha("crypto.subtle or etc.sha512Async must be defined");let r=g_(...t);return rv(await e.subtle.digest("SHA-512",r.buffer))},sha512Sync:void 0};Object.defineProperties(oM,{sha512Sync:{configurable:!1,get(){return y_},set(t){y_||(y_=t)}}});var zk={getExtendedPublicKeyAsync:Uk,getExtendedPublicKey:XMe,randomPrivateKey:()=>oM.randomBytes(32),precompute(t=8,e=Mp){return e.multiply(3n),e}},$m=8,r8e=()=>{let t=[],e=256/$m+1,r=Mp,n=r;for(let i=0;i<e;i++){n=r,t.push(n);for(let o=1;o<2**($m-1);o++)n=n.add(r),t.push(n);r=n.double()}return t},n8e=t=>{let e=eH||(eH=r8e()),r=(p,b)=>{let A=b.negate();return p?A:b},n=rM,i=Mp,o=1+256/$m,s=2**($m-1),a=BigInt(2**$m-1),u=2**$m,m=BigInt($m);for(let p=0;p<o;p++){let b=p*s,A=Number(t&a);t>>=m,A>s&&(A-=u,t+=1n);let M=b,S=b+Math.abs(A)-1,P=p%2!==0,k=A<0;A===0?i=i.add(r(P,e[M])):n=n.add(r(k,e[S]))}return{p:n,f:i}};_();var be=class extends Error{constructor(r,n){super(`${r}: ${n}`);this.code=r;this.name="DwnError"}},Or=(qe=>(qe.AuthenticateJwsMissing="AuthenticateJwsMissing",qe.AuthenticateDescriptorCidMismatch="AuthenticateDescriptorCidMismatch",qe.AuthenticationMoreThanOneSignatureNotSupported="AuthenticationMoreThanOneSignatureNotSupported",qe.AuthorizationAuthorNotOwner="AuthorizationAuthorNotOwner",qe.AuthorizationNotGrantedToAuthor="AuthorizationNotGrantedToAuthor",qe.ComputeCidCodecNotSupported="ComputeCidCodecNotSupported",qe.ComputeCidMultihashNotSupported="ComputeCidMultihashNotSupported",qe.Ed25519InvalidJwk="Ed25519InvalidJwk",qe.EventEmitterStreamNotOpenError="EventEmitterStreamNotOpenError",qe.MessagesGrantAuthorizationMismatchedProtocol="EventsGrantAuthorizationMismatchedProtocol",qe.MessagesSubscribeAuthorizationFailed="MessagesSubscribeAuthorizationFailed",qe.MessagesSubscribeEventStreamUnimplemented="MessagesSubscribeEventStreamUnimplemented",qe.GeneralJwsVerifierGetPublicKeyNotFound="GeneralJwsVerifierGetPublicKeyNotFound",qe.GeneralJwsVerifierInvalidSignature="GeneralJwsVerifierInvalidSignature",qe.GrantAuthorizationGrantExpired="GrantAuthorizationGrantExpired",qe.GrantAuthorizationGrantMissing="GrantAuthorizationGrantMissing",qe.GrantAuthorizationGrantRevoked="GrantAuthorizationGrantRevoked",qe.GrantAuthorizationInterfaceMismatch="GrantAuthorizationInterfaceMismatch",qe.GrantAuthorizationMethodMismatch="GrantAuthorizationMethodMismatch",qe.GrantAuthorizationNotGrantedForTenant="GrantAuthorizationNotGrantedForTenant",qe.GrantAuthorizationNotGrantedToAuthor="GrantAuthorizationNotGrantedToAuthor",qe.GrantAuthorizationGrantNotYetActive="GrantAuthorizationGrantNotYetActive",qe.HdKeyDerivationPathInvalid="HdKeyDerivationPathInvalid",qe.JwsVerifySignatureUnsupportedCrv="JwsVerifySignatureUnsupportedCrv",qe.IndexInvalidCursorValueType="IndexInvalidCursorValueType",qe.IndexInvalidCursorSortProperty="IndexInvalidCursorSortProperty",qe.IndexInvalidSortPropertyInMemory="IndexInvalidSortPropertyInMemory",qe.IndexMissingIndexableProperty="IndexMissingIndexableProperty",qe.JwsDecodePlainObjectPayloadInvalid="JwsDecodePlainObjectPayloadInvalid",qe.MessagesReadInvalidCid="MessagesReadInvalidCid",qe.MessagesReadAuthorizationFailed="MessagesReadAuthorizationFailed",qe.MessageGetInvalidCid="MessageGetInvalidCid",qe.MessagesQueryAuthorizationFailed="MessagesQueryAuthorizationFailed",qe.MessagesReadVerifyScopeFailed="MessagesReadVerifyScopeFailed",qe.ParseCidCodecNotSupported="ParseCidCodecNotSupported",qe.ParseCidMultihashNotSupported="ParseCidMultihashNotSupported",qe.PermissionsProtocolCreateGrantRecordsScopeMissingProtocol="PermissionsProtocolCreateGrantRecordsScopeMissingProtocol",qe.PermissionsProtocolCreateRequestRecordsScopeMissingProtocol="PermissionsProtocolCreateRequestRecordsScopeMissingProtocol",qe.PermissionsProtocolGetScopeInvalidProtocol="PermissionsProtocolGetScopeInvalidProtocol",qe.PermissionsProtocolValidateSchemaUnexpectedRecord="PermissionsProtocolValidateSchemaUnexpectedRecord",qe.PermissionsProtocolValidateScopeContextIdProhibitedProperties="PermissionsProtocolValidateScopeContextIdProhibitedProperties",qe.PermissionsProtocolValidateScopeProtocolMismatch="PermissionsProtocolValidateScopeProtocolMismatch",qe.PermissionsProtocolValidateScopeMissingProtocolTag="PermissionsProtocolValidateScopeMissingProtocolTag",qe.PermissionsProtocolValidateRevocationProtocolTagMismatch="PermissionsProtocolValidateRevocationProtocolTagMismatch",qe.PrivateKeySignerUnableToDeduceAlgorithm="PrivateKeySignerUnableToDeduceAlgorithm",qe.PrivateKeySignerUnableToDeduceKeyId="PrivateKeySignerUnableToDeduceKeyId",qe.PrivateKeySignerUnsupportedCurve="PrivateKeySignerUnsupportedCurve",qe.ProtocolAuthorizationActionNotAllowed="ProtocolAuthorizationActionNotAllowed",qe.ProtocolAuthorizationActionRulesNotFound="ProtocolAuthorizationActionRulesNotFound",qe.ProtocolAuthorizationIncorrectDataFormat="ProtocolAuthorizationIncorrectDataFormat",qe.ProtocolAuthorizationIncorrectContextId="ProtocolAuthorizationIncorrectContextId",qe.ProtocolAuthorizationIncorrectProtocolPath="ProtocolAuthorizationIncorrectProtocolPath",qe.ProtocolAuthorizationDuplicateRoleRecipient="ProtocolAuthorizationDuplicateRoleRecipient",qe.ProtocolAuthorizationInvalidSchema="ProtocolAuthorizationInvalidSchema",qe.ProtocolAuthorizationInvalidType="ProtocolAuthorizationInvalidType",qe.ProtocolAuthorizationMatchingRoleRecordNotFound="ProtocolAuthorizationMatchingRoleRecordNotFound",qe.ProtocolAuthorizationMaxSizeInvalid="ProtocolAuthorizationMaxSizeInvalid",qe.ProtocolAuthorizationMinSizeInvalid="ProtocolAuthorizationMinSizeInvalid",qe.ProtocolAuthorizationMissingContextId="ProtocolAuthorizationMissingContextId",qe.ProtocolAuthorizationMissingRuleSet="ProtocolAuthorizationMissingRuleSet",qe.ProtocolAuthorizationParentlessIncorrectProtocolPath="ProtocolAuthorizationParentlessIncorrectProtocolPath",qe.ProtocolAuthorizationNotARole="ProtocolAuthorizationNotARole",qe.ProtocolAuthorizationParentNotFoundConstructingRecordChain="ProtocolAuthorizationParentNotFoundConstructingRecordChain",qe.ProtocolAuthorizationProtocolNotFound="ProtocolAuthorizationProtocolNotFound",qe.ProtocolAuthorizationRoleMissingRecipient="ProtocolAuthorizationRoleMissingRecipient",qe.ProtocolAuthorizationTagsInvalidSchema="ProtocolAuthorizationTagsInvalidSchema",qe.ProtocolsConfigureDuplicateActorInRuleSet="ProtocolsConfigureDuplicateActorInRuleSet",qe.ProtocolsConfigureDuplicateRoleInRuleSet="ProtocolsConfigureDuplicateRoleInRuleSet",qe.ProtocolsConfigureInvalidSize="ProtocolsConfigureInvalidSize",qe.ProtocolsConfigureInvalidActionMissingOf="ProtocolsConfigureInvalidActionMissingOf",qe.ProtocolsConfigureInvalidActionOfNotAllowed="ProtocolsConfigureInvalidActionOfNotAllowed",qe.ProtocolsConfigureInvalidActionDeleteWithoutCreate="ProtocolsConfigureInvalidActionDeleteWithoutCreate",qe.ProtocolsConfigureInvalidActionUpdateWithoutCreate="ProtocolsConfigureInvalidActionUpdateWithoutCreate",qe.ProtocolsConfigureInvalidRecipientOfAction="ProtocolsConfigureInvalidRecipientOfAction",qe.ProtocolsConfigureInvalidRuleSetRecordType="ProtocolsConfigureInvalidRuleSetRecordType",qe.ProtocolsConfigureInvalidTagSchema="ProtocolsConfigureInvalidTagSchema",qe.ProtocolsConfigureRecordNestingDepthExceeded="ProtocolsConfigureRecordNestingDepthExceeded",qe.ProtocolsConfigureRoleDoesNotExistAtGivenPath="ProtocolsConfigureRoleDoesNotExistAtGivenPath",qe.ProtocolsQueryUnauthorized="ProtocolsQueryUnauthorized",qe.RecordsAuthorDelegatedGrantAndIdExistenceMismatch="RecordsAuthorDelegatedGrantAndIdExistenceMismatch",qe.RecordsAuthorDelegatedGrantCidMismatch="RecordsAuthorDelegatedGrantCidMismatch",qe.RecordsAuthorDelegatedGrantGrantedToAndOwnerSignatureMismatch="RecordsAuthorDelegatedGrantGrantedToAndOwnerSignatureMismatch",qe.RecordsAuthorDelegatedGrantNotADelegatedGrant="RecordsAuthorDelegatedGrantNotADelegatedGrant",qe.RecordsDecryptNoMatchingKeyEncryptedFound="RecordsDecryptNoMatchingKeyEncryptedFound",qe.RecordsDeleteAuthorizationFailed="RecordsDeleteAuthorizationFailed",qe.RecordsQueryCreateFilterPublishedSortInvalid="RecordsQueryCreateFilterPublishedSortInvalid",qe.RecordsQueryParseFilterPublishedSortInvalid="RecordsQueryParseFilterPublishedSortInvalid",qe.RecordsGrantAuthorizationConditionPublicationProhibited="RecordsGrantAuthorizationConditionPublicationProhibited",qe.RecordsGrantAuthorizationConditionPublicationRequired="RecordsGrantAuthorizationConditionPublicationRequired",qe.RecordsGrantAuthorizationDeleteProtocolScopeMismatch="RecordsGrantAuthorizationDeleteProtocolScopeMismatch",qe.RecordsGrantAuthorizationQueryOrSubscribeProtocolScopeMismatch="RecordsGrantAuthorizationQueryOrSubscribeProtocolScopeMismatch",qe.RecordsGrantAuthorizationScopeContextIdMismatch="RecordsGrantAuthorizationScopeContextIdMismatch",qe.RecordsGrantAuthorizationScopeProtocolMismatch="RecordsGrantAuthorizationScopeProtocolMismatch",qe.RecordsGrantAuthorizationScopeProtocolPathMismatch="RecordsGrantAuthorizationScopeProtocolPathMismatch",qe.RecordsDerivePrivateKeyUnSupportedCurve="RecordsDerivePrivateKeyUnSupportedCurve",qe.RecordsInvalidAncestorKeyDerivationSegment="RecordsInvalidAncestorKeyDerivationSegment",qe.RecordsOwnerDelegatedGrantAndIdExistenceMismatch="RecordsOwnerDelegatedGrantAndIdExistenceMismatch",qe.RecordsOwnerDelegatedGrantCidMismatch="RecordsOwnerDelegatedGrantCidMismatch",qe.RecordsOwnerDelegatedGrantGrantedToAndOwnerSignatureMismatch="RecordsOwnerDelegatedGrantGrantedToAndOwnerSignatureMismatch",qe.RecordsOwnerDelegatedGrantNotADelegatedGrant="RecordsOwnerDelegatedGrantNotADelegatedGrant",qe.RecordsProtocolContextDerivationSchemeMissingContextId="RecordsProtocolContextDerivationSchemeMissingContextId",qe.RecordsProtocolPathDerivationSchemeMissingProtocol="RecordsProtocolPathDerivationSchemeMissingProtocol",qe.RecordsQueryFilterMissingRequiredProperties="RecordsQueryFilterMissingRequiredProperties",qe.RecordsReadReturnedMultiple="RecordsReadReturnedMultiple",qe.RecordsReadAuthorizationFailed="RecordsReadAuthorizationFailed",qe.RecordsSubscribeEventStreamUnimplemented="RecordsSubscribeEventStreamUnimplemented",qe.RecordsSubscribeFilterMissingRequiredProperties="RecordsSubscribeFilterMissingRequiredProperties",qe.RecordsSchemasDerivationSchemeMissingSchema="RecordsSchemasDerivationSchemeMissingSchema",qe.RecordsWriteAttestationIntegrityMoreThanOneSignature="RecordsWriteAttestationIntegrityMoreThanOneSignature",qe.RecordsWriteAttestationIntegrityDescriptorCidMismatch="RecordsWriteAttestationIntegrityDescriptorCidMismatch",qe.RecordsWriteAttestationIntegrityInvalidPayloadProperty="RecordsWriteAttestationIntegrityInvalidPayloadProperty",qe.RecordsWriteAuthorizationFailed="RecordsWriteAuthorizationFailed",qe.RecordsWriteCreateMissingSigner="RecordsWriteCreateMissingSigner",qe.RecordsWriteCreateDataAndDataCidMutuallyExclusive="RecordsWriteCreateDataAndDataCidMutuallyExclusive",qe.RecordsWriteCreateDataCidAndDataSizeMutuallyInclusive="RecordsWriteCreateDataCidAndDataSizeMutuallyInclusive",qe.RecordsWriteCreateProtocolAndProtocolPathMutuallyInclusive="RecordsWriteCreateProtocolAndProtocolPathMutuallyInclusive",qe.RecordsWriteDataCidMismatch="RecordsWriteDataCidMismatch",qe.RecordsWriteDataSizeMismatch="RecordsWriteDataSizeMismatch",qe.RecordsWriteGetEntryIdUndefinedAuthor="RecordsWriteGetEntryIdUndefinedAuthor",qe.RecordsWriteGetNewestWriteRecordNotFound="RecordsWriteGetNewestWriteRecordNotFound",qe.RecordsWriteGetInitialWriteNotFound="RecordsWriteGetInitialWriteNotFound",qe.RecordsWriteImmutablePropertyChanged="RecordsWriteImmutablePropertyChanged",qe.RecordsWriteMissingSigner="RecordsWriteMissingSigner",qe.RecordsWriteMissingDataInPrevious="RecordsWriteMissingDataInPrevious",qe.RecordsWriteMissingEncodedDataInPrevious="RecordsWriteMissingEncodedDataInPrevious",qe.RecordsWriteMissingProtocol="RecordsWriteMissingProtocol",qe.RecordsWriteMissingSchema="RecordsWriteMissingSchema",qe.RecordsWriteNotAllowedAfterDelete="RecordsWriteNotAllowedAfterDelete",qe.RecordsWriteOwnerAndTenantMismatch="RecordsWriteOwnerAndTenantMismatch",qe.RecordsWriteSignAsOwnerDelegateUnknownAuthor="RecordsWriteSignAsOwnerDelegateUnknownAuthor",qe.RecordsWriteSignAsOwnerUnknownAuthor="RecordsWriteSignAsOwnerUnknownAuthor",qe.RecordsWriteValidateIntegrityAttestationMismatch="RecordsWriteValidateIntegrityAttestationMismatch",qe.RecordsWriteValidateIntegrityContextIdMismatch="RecordsWriteValidateIntegrityContextIdMismatch",qe.RecordsWriteValidateIntegrityContextIdNotInSignerSignaturePayload="RecordsWriteValidateIntegrityContextIdNotInSignerSignaturePayload",qe.RecordsWriteValidateIntegrityDateCreatedMismatch="RecordsWriteValidateIntegrityDateCreatedMismatch",qe.RecordsWriteValidateIntegrityEncryptionCidMismatch="RecordsWriteValidateIntegrityEncryptionCidMismatch",qe.RecordsWriteValidateIntegrityRecordIdUnauthorized="RecordsWriteValidateIntegrityRecordIdUnauthorized",qe.SchemaValidatorAdditionalPropertyNotAllowed="SchemaValidatorAdditionalPropertyNotAllowed",qe.SchemaValidatorFailure="SchemaValidatorFailure",qe.SchemaValidatorSchemaNotFound="SchemaValidatorSchemaNotFound",qe.SchemaValidatorUnevaluatedPropertyNotAllowed="SchemaValidatorUnevaluatedPropertyNotAllowed",qe.Secp256k1KeyNotValid="Secp256k1KeyNotValid",qe.Secp256r1KeyNotValid="Secp256r1KeyNotValid",qe.TimestampInvalid="TimestampInvalid",qe.UrlProtocolNotNormalized="UrlProtocolNotNormalized",qe.UrlProtocolNotNormalizable="UrlProtocolNotNormalizable",qe.UrlSchemaNotNormalized="UrlSchemaNotNormalized",qe))(Or||{});function hH(t){if(t.kty!=="OKP"||t.crv!=="Ed25519")throw new be("Ed25519InvalidJwk","invalid jwk. kty MUST be OKP. crv MUST be Ed25519")}function pH(t){return{alg:"EdDSA",kty:"OKP",crv:"Ed25519",x:Je.bytesToBase64Url(t)}}var b_={sign:async(t,e)=>{hH(e);let r=Je.base64UrlToBytes(e.d);return uH(t,r)},verify:async(t,e,r)=>{hH(r);let n=Je.base64UrlToBytes(r.x);return lH(e,t,n)},generateKeyPair:async()=>{let t=zk.randomPrivateKey(),e=await Fk(t),r=Je.bytesToBase64Url(t),n=pH(e),i={...n,d:r};return{publicJwk:n,privateJwk:i}},publicKeyToJwk:async t=>pH(t)};_();_();var Gk=2n**256n,Ap=Gk-0x1000003d1n,_o=Gk-0x14551231950b75fc4402da1732fc9bebfn,wH=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,_H=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,xH={p:Ap,n:_o,a:0n,b:7n,Gx:wH,Gy:_H},qs=32,mH=t=>rt(rt(t*t)*t+xH.b),gn=(t="")=>{throw new Error(t)},fM=t=>typeof t=="bigint",EH=t=>typeof t=="string",Kk=t=>fM(t)&&0n<t&&t<Ap,__=t=>fM(t)&&0n<t&&t<_o,SH=(t,e)=>!(t instanceof Uint8Array)||typeof e=="number"&&e>0&&t.length!==e?gn("Uint8Array expected"):t,lc=t=>new Uint8Array(t),zd=(t,e)=>SH(EH(t)?x_(t):lc(t),e),rt=(t,e=Ap)=>{let r=t%e;return r>=0n?r:e+r},yH=t=>t instanceof Si?t:gn("Point expected"),gH,Si=class{constructor(e,r,n){this.px=e,this.py=r,this.pz=n}static fromAffine(e){return new Si(e.x,e.y,1n)}static fromHex(e){e=zd(e);let r,n=e[0],i=e.subarray(1),o=aM(i,0,qs),s=e.length;if(s===33&&[2,3].includes(n)){Kk(o)||gn("Point hex invalid: x not FE");let a=i8e(mH(o)),u=(a&1n)===1n;(n&1)===1!==u&&(a=rt(-a)),r=new Si(o,a,1n)}return s===65&&n===4&&(r=new Si(o,aM(i,qs,2*qs),1n)),r?r.ok():gn("Point is not on curve")}static fromPrivateKey(e){return Fd.mul(cM(e))}get x(){return this.aff().x}get y(){return this.aff().y}equals(e){let{px:r,py:n,pz:i}=this,{px:o,py:s,pz:a}=yH(e),u=rt(r*a),m=rt(o*i),p=rt(n*a),b=rt(s*i);return u===m&&p===b}negate(){return new Si(this.px,rt(-this.py),this.pz)}double(){return this.add(this)}add(e){let{px:r,py:n,pz:i}=this,{px:o,py:s,pz:a}=yH(e),{a:u,b:m}=xH,p=0n,b=0n,A=0n,M=rt(m*3n),S=rt(r*o),P=rt(n*s),k=rt(i*a),R=rt(r+n),B=rt(o+s);R=rt(R*B),B=rt(S+P),R=rt(R-B),B=rt(r+i);let I=rt(o+a);return B=rt(B*I),I=rt(S+k),B=rt(B-I),I=rt(n+i),p=rt(s+a),I=rt(I*p),p=rt(P+k),I=rt(I-p),A=rt(u*B),p=rt(M*k),A=rt(p+A),p=rt(P-A),A=rt(P+A),b=rt(p*A),P=rt(S+S),P=rt(P+S),k=rt(u*k),B=rt(M*B),P=rt(P+k),k=rt(S-k),k=rt(u*k),B=rt(B+k),S=rt(P*B),b=rt(b+S),S=rt(I*B),p=rt(R*p),p=rt(p-S),S=rt(R*P),A=rt(I*A),A=rt(A+S),new Si(p,b,A)}mul(e,r=!0){if(!r&&e===0n)return sM;if(__(e)||gn("invalid scalar"),this.equals(Fd))return f8e(e).p;let n=sM,i=Fd;for(let o=this;e>0n;o=o.double(),e>>=1n)e&1n?n=n.add(o):r&&(i=i.add(o));return n}mulAddQUns(e,r,n){return this.mul(r,!1).add(e.mul(n,!1)).ok()}toAffine(){let{px:e,py:r,pz:n}=this;if(this.equals(sM))return{x:0n,y:0n};if(n===1n)return{x:e,y:r};let i=S_(n);return rt(n*i)!==1n&&gn("invalid inverse"),{x:rt(e*i),y:rt(r*i)}}assertValidity(){let{x:e,y:r}=this.aff();return(!Kk(e)||!Kk(r))&&gn("Point invalid: x or y"),rt(r*r)===mH(e)?this:gn("Point invalid: not on curve")}multiply(e){return this.mul(e)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(e=!0){let{x:r,y:n}=this.aff();return(e?(n&1n)===0n?"02":"03":"04")+v_(r)+(e?"":v_(n))}toRawBytes(e=!0){return x_(this.toHex(e))}};Si.BASE=new Si(wH,_H,1n);Si.ZERO=new Si(0n,1n,0n);var{BASE:Fd,ZERO:sM}=Si,MH=(t,e)=>t.toString(16).padStart(e,"0"),Vk=t=>Array.from(t).map(e=>MH(e,2)).join(""),x_=t=>{let e=t.length;(!EH(t)||e%2)&&gn("hex invalid 1");let r=lc(e/2);for(let n=0;n<r.length;n++){let i=n*2,o=t.slice(i,i+2),s=Number.parseInt(o,16);(Number.isNaN(s)||s<0)&&gn("hex invalid 2"),r[n]=s}return r},E_=t=>BigInt("0x"+(Vk(t)||"0")),aM=(t,e,r)=>E_(t.slice(e,r)),uM=t=>fM(t)&&t>=0n&&t<Gk?x_(MH(t,2*qs)):gn("bigint expected"),v_=t=>Vk(uM(t)),Wk=(...t)=>{let e=lc(t.reduce((n,i)=>n+SH(i).length,0)),r=0;return t.forEach(n=>{e.set(n,r),r+=n.length}),e},S_=(t,e=Ap)=>{(t===0n||e<=0n)&&gn("no inverse n="+t+" mod="+e);let r=rt(t,e),n=e,i=0n,o=1n,s=1n,a=0n;for(;r!==0n;){let u=n/r,m=n%r,p=i-s*u,b=o-a*u;n=r,r=m,i=s,o=a,s=p,a=b}return n===1n?rt(i,e):gn("no inverse")},i8e=t=>{let e=1n;for(let r=t,n=(Ap+1n)/4n;n>0n;n>>=1n)n&1n&&(e=e*r%Ap),r=r*r%Ap;return rt(e*e)===t?e:gn("sqrt invalid")},cM=t=>(fM(t)||(t=E_(zd(t,qs))),__(t)?t:gn("private key out of range")),Hk=t=>t>_o>>1n;function M_(t,e=!0){return Si.fromPrivateKey(t).toRawBytes(e)}var Pp=class{constructor(e,r,n){this.r=e,this.s=r,this.recovery=n,this.assertValidity()}static fromCompact(e){return e=zd(e,64),new Pp(aM(e,0,qs),aM(e,qs,2*qs))}assertValidity(){return __(this.r)&&__(this.s)?this:gn()}addRecoveryBit(e){return new Pp(this.r,this.s,e)}hasHighS(){return Hk(this.s)}recoverPublicKey(e){let{r,s:n,recovery:i}=this;[0,1,2,3].includes(i)||gn("recovery id invalid");let o=Zk(zd(e,32)),s=i===2||i===3?r+_o:r;s>=Ap&&gn("q.x invalid");let a=i&1?"03":"02",u=Si.fromHex(a+v_(s)),m=S_(s,_o),p=rt(-o*m,_o),b=rt(n*m,_o);return Fd.mulAddQUns(u,p,b)}toCompactRawBytes(){return x_(this.toCompactHex())}toCompactHex(){return v_(this.r)+v_(this.s)}},AH=t=>{let e=t.length*8-256,r=E_(t);return e>0?r>>BigInt(e):r},Zk=t=>rt(AH(t),_o),bH=t=>uM(t),vH=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,w_,PH={lowS:!0},o8e={lowS:!0};function s8e(t,e,r=PH){["der","recovered","canonical"].some(b=>b in r)&&gn("sign() legacy options not supported");let{lowS:n}=r;n==null&&(n=!0);let i=Zk(zd(t)),o=bH(i),s=cM(e),a=[bH(s),o],u=r.extraEntropy;if(u){u===!0&&(u=Tp.randomBytes(qs));let b=zd(u);b.length!==qs&&gn(),a.push(b)}let m=i,p=b=>{let A=AH(b);if(!__(A))return;let M=S_(A,_o),S=Fd.mul(A).aff(),P=rt(S.x,_o);if(P===0n)return;let k=rt(M*rt(m+rt(s*P,_o),_o),_o);if(k===0n)return;let R=k,B=(S.x===P?0:2)|Number(S.y&1n);return n&&Hk(k)&&(R=rt(-k,_o),B^=1),new Pp(P,R,B)};return{seed:Wk(...a),k2sig:p}}function a8e(t){let e=lc(qs),r=lc(qs),n=0,i=()=>{e.fill(1),r.fill(0),n=0},o="drbg: tried 1000 values";if(t){let s=(...m)=>Tp.hmacSha256Async(r,e,...m),a=async(m=lc())=>{r=await s(lc([0]),m),e=await s(),m.length!==0&&(r=await s(lc([1]),m),e=await s())},u=async()=>(n++>=1e3&&gn(o),e=await s(),e);return async(m,p)=>{i(),await a(m);let b;for(;!(b=p(await u()));)await a();return i(),b}}else{let s=(...m)=>{let p=w_;return p||gn("etc.hmacSha256Sync not set"),p(r,e,...m)},a=(m=lc())=>{r=s(lc([0]),m),e=s(),m.length!==0&&(r=s(lc([1]),m),e=s())},u=()=>(n++>=1e3&&gn(o),e=s(),e);return(m,p)=>{i(),a(m);let b;for(;!(b=p(u()));)a();return i(),b}}}async function Jk(t,e,r=PH){let{seed:n,k2sig:i}=s8e(t,e,r);return a8e(!0)(n,i)}function TH(t,e,r,n=o8e){let{lowS:i}=n;i==null&&(i=!0),"strict"in n&&gn("verify() legacy options not supported");let o,s,a,u=t&&typeof t=="object"&&"r"in t;!u&&zd(t).length!==2*qs&&gn("signature must be 64 bytes");try{o=u?new Pp(t.r,t.s).assertValidity():Pp.fromCompact(t),s=Zk(zd(e,qs)),a=r instanceof Si?r.ok():Si.fromHex(r)}catch{return!1}if(!o)return!1;let{r:m,s:p}=o;if(i&&Hk(p))return!1;let b;try{let M=S_(p,_o),S=rt(s*M,_o),P=rt(m*M,_o);b=Fd.mulAddQUns(a,S,P).aff()}catch{return!1}return b?rt(b.x,_o)===m:!1}function RH(t){t=zd(t);let e=qs+8;(t.length<e||t.length>1024)&&gn("expected proper params");let r=rt(E_(t),_o-1n)+1n;return uM(r)}var Tp={hexToBytes:x_,bytesToHex:Vk,concatBytes:Wk,bytesToNumberBE:E_,numberToBytesBE:uM,mod:rt,invert:S_,hmacSha256Async:async(t,...e)=>{let r=vH();if(!r)return gn("etc.hmacSha256Async not set");let n=r.subtle,i=await n.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return lc(await n.sign("HMAC",i,Wk(...e)))},hmacSha256Sync:w_,hashToPrivateKey:RH,randomBytes:t=>{let e=vH();return e||gn("crypto.getRandomValues must be defined"),e.getRandomValues(lc(t))}},lM={normPrivateKeyToScalar:cM,isValidPrivateKey:t=>{try{return!!cM(t)}catch{return!1}},randomPrivateKey:()=>RH(Tp.randomBytes(qs+8)),precompute(t=8,e=Fd){return e.multiply(3n),e}};Object.defineProperties(Tp,{hmacSha256Sync:{configurable:!1,get(){return w_},set(t){w_||(w_=t)}}});var Lm=8,c8e=()=>{let t=[],e=256/Lm+1,r=Fd,n=r;for(let i=0;i<e;i++){n=r,t.push(n);for(let o=1;o<2**(Lm-1);o++)n=n.add(r),t.push(n);r=n.double()}return t},f8e=t=>{let e=gH||(gH=c8e()),r=(p,b)=>{let A=b.negate();return p?A:b},n=sM,i=Fd,o=1+256/Lm,s=2**(Lm-1),a=BigInt(2**Lm-1),u=2**Lm,m=BigInt(Lm);for(let p=0;p<o;p++){let b=p*s,A=Number(t&a);t>>=m,A>s&&(A-=u,t+=1n);let M=b,S=b+Math.abs(A)-1,P=p%2!==0,k=A<0;A===0?i=i.add(r(P,e[M])):n=n.add(r(k,e[S]))}return{p:n,f:i}};_();_();_();var Kd={};zt(Kd,{decode:()=>iv,encodeTo:()=>Um,encodingLength:()=>Fm});_();_();var u8e=OH,IH=128,l8e=127,d8e=~l8e,h8e=Math.pow(2,31);function OH(t,e,r){e=e||[],r=r||0;for(var n=r;t>=h8e;)e[r++]=t&255|IH,t/=128;for(;t&d8e;)e[r++]=t&255|IH,t>>>=7;return e[r]=t|0,OH.bytes=r-n+1,e}var p8e=Qk,m8e=128,kH=127;function Qk(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw Qk.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&kH)<<i:(s&kH)*Math.pow(2,i),i+=7}while(s>=m8e);return Qk.bytes=o-n,r}var y8e=Math.pow(2,7),g8e=Math.pow(2,14),b8e=Math.pow(2,21),v8e=Math.pow(2,28),w8e=Math.pow(2,35),_8e=Math.pow(2,42),x8e=Math.pow(2,49),E8e=Math.pow(2,56),S8e=Math.pow(2,63),M8e=function(t){return t<y8e?1:t<g8e?2:t<b8e?3:t<v8e?4:t<w8e?5:t<_8e?6:t<x8e?7:t<E8e?8:t<S8e?9:10},A8e={encode:u8e,decode:p8e,encodingLength:M8e},P8e=A8e,A_=P8e;var iv=(t,e=0)=>[A_.decode(t,e),A_.decode.bytes],Um=(t,e,r=0)=>(A_.encode(t,e,r),e),Fm=t=>A_.encodingLength(t);var zm=(t,e)=>{let r=e.byteLength,n=Fm(t),i=n+Fm(r),o=new Uint8Array(i+r);return Um(t,o,0),Um(r,o,n),o.set(e,i),new ov(t,r,e,o)},dM=t=>{let e=Vf(t),[r,n]=iv(e),[i,o]=iv(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new ov(r,i,s,e)},BH=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&ZV(t.bytes,r.bytes)}},ov=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var e7=({name:t,code:e,encode:r})=>new Xk(t,e,r),Xk=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?zm(this.code,r):r.then(n=>zm(this.code,n))}else throw Error("Unknown type, must be binary type")}};var DH=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),ss=e7({name:"sha2-256",code:18,encode:DH("SHA-256")}),Twt=e7({name:"sha2-512",code:19,encode:DH("SHA-512")});var fn=class{static validateKey(e){if(e.kty!=="EC"||e.crv!=="secp256k1")throw new be("Secp256k1KeyNotValid","Invalid SECP256K1 JWK: `kty` MUST be `EC`. `crv` MUST be `secp256k1`")}static async publicKeyToJwk(e){let r;e.byteLength===33?r=Si.fromHex(e).toRawBytes(!1):r=e;let n=Je.bytesToBase64Url(r.subarray(1,33)),i=Je.bytesToBase64Url(r.subarray(33,65));return{alg:"ES256K",kty:"EC",crv:"secp256k1",x:n,y:i}}static async privateKeyToJwk(e){let r=await fn.getPublicKey(e),n=await fn.publicKeyToJwk(r);return n.d=Je.bytesToBase64Url(e),n}static publicJwkToBytes(e){let r=Je.base64UrlToBytes(e.x),n=Je.base64UrlToBytes(e.y);return Si.fromAffine({x:Tp.bytesToNumberBE(r),y:Tp.bytesToNumberBE(n)}).toRawBytes(!0)}static privateJwkToBytes(e){return Je.base64UrlToBytes(e.d)}static async sign(e,r){fn.validateKey(r);let n=await ss.encode(e),i=fn.privateJwkToBytes(r);return(await Jk(n,i)).toCompactRawBytes()}static async verify(e,r,n){fn.validateKey(n);let i=fn.publicJwkToBytes(n),o=await ss.encode(e);return TH(r,o,i)}static async generateKeyPair(){let e=lM.randomPrivateKey(),r=M_(e,!1),n=Je.bytesToBase64Url(e),i=await fn.publicKeyToJwk(r),o={...i,d:n};return{publicJwk:i,privateJwk:o}}static async generateKeyPairRaw(){let e=lM.randomPrivateKey();return{publicKey:M_(e,!0),privateKey:e}}static async getPublicKey(e){return M_(e,!0)}static async getPublicJwk(e){let{d:r,...n}=e;return n}};_();_();_();_();_();function CH(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function R8e(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function sv(t,...e){if(!R8e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function NH(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");CH(t.outputLen),CH(t.blockLen)}function av(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function jH(t,e){sv(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}_();_();var hM=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var pM=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Hf=(t,e)=>t<<32-e|t>>>e;var Fwt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function I8e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function T_(t){return typeof t=="string"&&(t=I8e(t)),sv(t),t}function qH(...t){let e=0;for(let n=0;n<t.length;n++){let i=t[n];sv(i),e+=i.length}let r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}var cv=class{clone(){return this._cloneInto()}},zwt={}.toString;function $H(t){let e=n=>t().update(T_(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function LH(t=32){if(hM&&typeof hM.getRandomValues=="function")return hM.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function k8e(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,m=n?0:4;t.setUint32(e+u,s,n),t.setUint32(e+m,a,n)}var UH=(t,e,r)=>t&e^~t&r,FH=(t,e,r)=>t&e^t&r^e&r,mM=class extends cv{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=pM(this.buffer)}update(e){av(this);let{view:r,buffer:n,blockLen:i}=this;e=T_(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let u=pM(e);for(;i<=o-s;s+=i)this.process(u,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){av(this),jH(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let b=s;b<i;b++)r[b]=0;k8e(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=pM(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let m=u/4,p=this.get();if(m>p.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<m;b++)a.setUint32(4*b,p[b],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};var O8e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Rp=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ip=new Uint32Array(64),t7=class extends mM{constructor(){super(64,32,8,!1),this.A=Rp[0]|0,this.B=Rp[1]|0,this.C=Rp[2]|0,this.D=Rp[3]|0,this.E=Rp[4]|0,this.F=Rp[5]|0,this.G=Rp[6]|0,this.H=Rp[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:u}=this;return[e,r,n,i,o,s,a,u]}set(e,r,n,i,o,s,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=u|0}process(e,r){for(let b=0;b<16;b++,r+=4)Ip[b]=e.getUint32(r,!1);for(let b=16;b<64;b++){let A=Ip[b-15],M=Ip[b-2],S=Hf(A,7)^Hf(A,18)^A>>>3,P=Hf(M,17)^Hf(M,19)^M>>>10;Ip[b]=P+Ip[b-7]+S+Ip[b-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:u,G:m,H:p}=this;for(let b=0;b<64;b++){let A=Hf(a,6)^Hf(a,11)^Hf(a,25),M=p+A+UH(a,u,m)+O8e[b]+Ip[b]|0,P=(Hf(n,2)^Hf(n,13)^Hf(n,22))+FH(n,i,o)|0;p=m,m=u,u=a,a=s+M|0,s=o,o=i,i=n,n=M+P|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,u=u+this.F|0,m=m+this.G|0,p=p+this.H|0,this.set(n,i,o,s,a,u,m,p)}roundClean(){Ip.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var zH=$H(()=>new t7);_();_();var yM=class extends cv{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,NH(e);let n=T_(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return av(this),this.iHash.update(e),this}digestInto(e){av(this),sv(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},r7=(t,e,r)=>new yM(t,e).update(r).digest();r7.create=(t,e)=>new yM(t,e);_();_();_();var s7={};zt(s7,{abytes:()=>fv,bitGet:()=>$8e,bitLen:()=>q8e,bitMask:()=>R_,bitSet:()=>L8e,bytesToHex:()=>Km,bytesToNumberBE:()=>Gd,bytesToNumberLE:()=>bM,concatBytes:()=>uv,createHmacDrbg:()=>o7,ensureBytes:()=>dc,equalBytes:()=>N8e,hexToBytes:()=>Wm,hexToNumber:()=>i7,isBytes:()=>kp,numberToBytesBE:()=>Op,numberToBytesLE:()=>vM,numberToHexUnpadded:()=>VH,numberToVarBytesBE:()=>C8e,utf8ToBytes:()=>j8e,validateObject:()=>Bp});_();var GH=BigInt(0),gM=BigInt(1),B8e=BigInt(2);function kp(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function fv(t){if(!kp(t))throw new Error("Uint8Array expected")}var D8e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Km(t){fv(t);let e="";for(let r=0;r<t.length;r++)e+=D8e[t[r]];return e}function VH(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function i7(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var Wd={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function KH(t){if(t>=Wd._0&&t<=Wd._9)return t-Wd._0;if(t>=Wd._A&&t<=Wd._F)return t-(Wd._A-10);if(t>=Wd._a&&t<=Wd._f)return t-(Wd._a-10)}function Wm(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=KH(t.charCodeAt(o)),a=KH(t.charCodeAt(o+1));if(s===void 0||a===void 0){let u=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+o)}n[i]=s*16+a}return n}function Gd(t){return i7(Km(t))}function bM(t){return fv(t),i7(Km(Uint8Array.from(t).reverse()))}function Op(t,e){return Wm(t.toString(16).padStart(e*2,"0"))}function vM(t,e){return Op(t,e).reverse()}function C8e(t){return Wm(VH(t))}function dc(t,e,r){let n;if(typeof e=="string")try{n=Wm(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else if(kp(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function uv(...t){let e=0;for(let n=0;n<t.length;n++){let i=t[n];fv(i),e+=i.length}let r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}function N8e(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function j8e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function q8e(t){let e;for(e=0;t>GH;t>>=gM,e+=1);return e}function $8e(t,e){return t>>BigInt(e)&gM}function L8e(t,e,r){return t|(r?gM:GH)<<BigInt(e)}var R_=t=>(B8e<<BigInt(t-1))-gM,n7=t=>new Uint8Array(t),WH=t=>Uint8Array.from(t);function o7(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=n7(t),i=n7(t),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...b)=>r(i,n,...b),u=(b=n7())=>{i=a(WH([0]),b),n=a(),b.length!==0&&(i=a(WH([1]),b),n=a())},m=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let b=0,A=[];for(;b<e;){n=a();let M=n.slice();A.push(M),b+=n.length}return uv(...A)};return(b,A)=>{s(),u(b);let M;for(;!(M=A(m()));)u();return s(),M}}var U8e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||kp(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Bp(t,e,r={}){let n=(i,o,s)=>{let a=U8e[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let u=t[i];if(!(s&&u===void 0)&&!a(u,t))throw new Error(`Invalid param ${String(i)}=${u} (${typeof u}), expected ${o}`)};for(let[i,o]of Object.entries(e))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return t}var qo=BigInt(0),Mi=BigInt(1),Gm=BigInt(2),F8e=BigInt(3),a7=BigInt(4),HH=BigInt(5),ZH=BigInt(8),z8e=BigInt(9),K8e=BigInt(16);function hc(t,e){let r=t%e;return r>=qo?r:e+r}function W8e(t,e,r){if(r<=qo||e<qo)throw new Error("Expected power/modulo > 0");if(r===Mi)return qo;let n=Mi;for(;e>qo;)e&Mi&&(n=n*t%r),t=t*t%r,e>>=Mi;return n}function wM(t,e){if(t===qo||e<=qo)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=hc(t,e),n=e,i=qo,o=Mi,s=Mi,a=qo;for(;r!==qo;){let m=n/r,p=n%r,b=i-s*m,A=o-a*m;n=r,r=p,i=s,o=a,s=b,a=A}if(n!==Mi)throw new Error("invert: does not exist");return hc(i,e)}function G8e(t){let e=(t-Mi)/Gm,r,n,i;for(r=t-Mi,n=0;r%Gm===qo;r/=Gm,n++);for(i=Gm;i<t&&W8e(i,e,t)!==t-Mi;i++);if(n===1){let s=(t+Mi)/a7;return function(u,m){let p=u.pow(m,s);if(!u.eql(u.sqr(p),m))throw new Error("Cannot find square root");return p}}let o=(r+Mi)/Gm;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let m=n,p=a.pow(a.mul(a.ONE,i),r),b=a.pow(u,o),A=a.pow(u,r);for(;!a.eql(A,a.ONE);){if(a.eql(A,a.ZERO))return a.ZERO;let M=1;for(let P=a.sqr(A);M<m&&!a.eql(P,a.ONE);M++)P=a.sqr(P);let S=a.pow(p,Mi<<BigInt(m-M-1));p=a.sqr(S),b=a.mul(b,S),A=a.mul(A,p),m=M}return b}}function V8e(t){if(t%a7===F8e){let e=(t+Mi)/a7;return function(n,i){let o=n.pow(i,e);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(t%ZH===HH){let e=(t-HH)/ZH;return function(n,i){let o=n.mul(i,Gm),s=n.pow(o,e),a=n.mul(i,s),u=n.mul(n.mul(a,Gm),s),m=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(m),i))throw new Error("Cannot find square root");return m}}return t%K8e,G8e(t)}var H8e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function c7(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=H8e.reduce((n,i)=>(n[i]="function",n),e);return Bp(t,r)}function Z8e(t,e,r){if(r<qo)throw new Error("Expected power > 0");if(r===qo)return t.ONE;if(r===Mi)return e;let n=t.ONE,i=e;for(;r>qo;)r&Mi&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Mi;return n}function J8e(t,e){let r=new Array(e.length),n=e.reduce((o,s,a)=>t.is0(s)?o:(r[a]=o,t.mul(o,s)),t.ONE),i=t.inv(n);return e.reduceRight((o,s,a)=>t.is0(s)?o:(r[a]=t.mul(o,r[a]),t.mul(o,s)),i),r}function f7(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function JH(t,e,r=!1,n={}){if(t<=qo)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:i,nByteLength:o}=f7(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=V8e(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:R_(i),ZERO:qo,ONE:Mi,create:u=>hc(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return qo<=u&&u<t},is0:u=>u===qo,isOdd:u=>(u&Mi)===Mi,neg:u=>hc(-u,t),eql:(u,m)=>u===m,sqr:u=>hc(u*u,t),add:(u,m)=>hc(u+m,t),sub:(u,m)=>hc(u-m,t),mul:(u,m)=>hc(u*m,t),pow:(u,m)=>Z8e(a,u,m),div:(u,m)=>hc(u*wM(m,t),t),sqrN:u=>u*u,addN:(u,m)=>u+m,subN:(u,m)=>u-m,mulN:(u,m)=>u*m,inv:u=>wM(u,t),sqrt:n.sqrt||(u=>s(a,u)),invertBatch:u=>J8e(a,u),cmov:(u,m,p)=>p?m:u,toBytes:u=>r?vM(u,o):Op(u,o),fromBytes:u=>{if(u.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${u.length}`);return r?bM(u):Gd(u)}});return Object.freeze(a)}function YH(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function u7(t){let e=YH(t);return e+Math.ceil(e/2)}function QH(t,e,r=!1){let n=t.length,i=YH(e),o=u7(e);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?Gd(t):bM(t),a=hc(s,e-Mi)+Mi;return r?vM(a,i):Op(a,i)}var Q8e=BigInt(0),l7=BigInt(1);function XH(t,e){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(e/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=t.ZERO,a=i;for(;o>Q8e;)o&l7&&(s=s.add(a)),a=a.double(),o>>=l7;return s},precomputeWindow(i,o){let{windows:s,windowSize:a}=n(o),u=[],m=i,p=m;for(let b=0;b<s;b++){p=m,u.push(p);for(let A=1;A<a;A++)p=p.add(m),u.push(p);m=p.double()}return u},wNAF(i,o,s){let{windows:a,windowSize:u}=n(i),m=t.ZERO,p=t.BASE,b=BigInt(2**i-1),A=2**i,M=BigInt(i);for(let S=0;S<a;S++){let P=S*u,k=Number(s&b);s>>=M,k>u&&(k-=A,s+=l7);let R=P,B=P+Math.abs(k)-1,I=S%2!==0,q=k<0;k===0?p=p.add(r(I,o[R])):m=m.add(r(q,o[B]))}return{p:m,f:p}},wNAFCached(i,o,s,a){let u=i._WINDOW_SIZE||1,m=o.get(i);return m||(m=this.precomputeWindow(i,u),u!==1&&o.set(i,a(m))),this.wNAF(u,m,s)}}}function d7(t){return c7(t.Fp),Bp(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...f7(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function X8e(t){let e=d7(t);Bp(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:e5e,hexToBytes:t5e}=s7,Vm={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=Vm;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:e5e(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=Vm,r=typeof t=="string"?t5e(t):t;fv(r);let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:i,l:o}=Vm._parseInt(r.subarray(2)),{d:s,l:a}=Vm._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){let e=m=>Number.parseInt(m[0],16)&8?"00"+m:m,r=m=>{let p=m.toString(16);return p.length&1?`0${p}`:p},n=e(r(t.s)),i=e(r(t.r)),o=n.length/2,s=i.length/2,a=r(o),u=r(s);return`30${r(s+o+4)}02${u}${i}02${a}${n}`}},Vd=BigInt(0),Vc=BigInt(1),p1t=BigInt(2),eZ=BigInt(3),m1t=BigInt(4);function r5e(t){let e=X8e(t),{Fp:r}=e,n=e.toBytes||((S,P,k)=>{let R=P.toAffine();return uv(Uint8Array.from([4]),r.toBytes(R.x),r.toBytes(R.y))}),i=e.fromBytes||(S=>{let P=S.subarray(1),k=r.fromBytes(P.subarray(0,r.BYTES)),R=r.fromBytes(P.subarray(r.BYTES,2*r.BYTES));return{x:k,y:R}});function o(S){let{a:P,b:k}=e,R=r.sqr(S),B=r.mul(R,S);return r.add(r.add(B,r.mul(S,P)),k)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(S){return typeof S=="bigint"&&Vd<S&&S<e.n}function a(S){if(!s(S))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(S){let{allowedPrivateKeyLengths:P,nByteLength:k,wrapPrivateKey:R,n:B}=e;if(P&&typeof S!="bigint"){if(kp(S)&&(S=Km(S)),typeof S!="string"||!P.includes(S.length))throw new Error("Invalid key");S=S.padStart(k*2,"0")}let I;try{I=typeof S=="bigint"?S:Gd(dc("private key",S,k))}catch{throw new Error(`private key must be ${k} bytes, hex or bigint, not ${typeof S}`)}return R&&(I=hc(I,B)),a(I),I}let m=new Map;function p(S){if(!(S instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(P,k,R){if(this.px=P,this.py=k,this.pz=R,P==null||!r.isValid(P))throw new Error("x required");if(k==null||!r.isValid(k))throw new Error("y required");if(R==null||!r.isValid(R))throw new Error("z required")}static fromAffine(P){let{x:k,y:R}=P||{};if(!P||!r.isValid(k)||!r.isValid(R))throw new Error("invalid affine point");if(P instanceof b)throw new Error("projective point not allowed");let B=I=>r.eql(I,r.ZERO);return B(k)&&B(R)?b.ZERO:new b(k,R,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(P){let k=r.invertBatch(P.map(R=>R.pz));return P.map((R,B)=>R.toAffine(k[B])).map(b.fromAffine)}static fromHex(P){let k=b.fromAffine(i(dc("pointHex",P)));return k.assertValidity(),k}static fromPrivateKey(P){return b.BASE.multiply(u(P))}_setWindowSize(P){this._WINDOW_SIZE=P,m.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:P,y:k}=this.toAffine();if(!r.isValid(P)||!r.isValid(k))throw new Error("bad point: x or y not FE");let R=r.sqr(k),B=o(P);if(!r.eql(R,B))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:P}=this.toAffine();if(r.isOdd)return!r.isOdd(P);throw new Error("Field doesn't support isOdd")}equals(P){p(P);let{px:k,py:R,pz:B}=this,{px:I,py:q,pz:$}=P,U=r.eql(r.mul(k,$),r.mul(I,B)),F=r.eql(r.mul(R,$),r.mul(q,B));return U&&F}negate(){return new b(this.px,r.neg(this.py),this.pz)}double(){let{a:P,b:k}=e,R=r.mul(k,eZ),{px:B,py:I,pz:q}=this,$=r.ZERO,U=r.ZERO,F=r.ZERO,L=r.mul(B,B),W=r.mul(I,I),E=r.mul(q,q),c=r.mul(B,I);return c=r.add(c,c),F=r.mul(B,q),F=r.add(F,F),$=r.mul(P,F),U=r.mul(R,E),U=r.add($,U),$=r.sub(W,U),U=r.add(W,U),U=r.mul($,U),$=r.mul(c,$),F=r.mul(R,F),E=r.mul(P,E),c=r.sub(L,E),c=r.mul(P,c),c=r.add(c,F),F=r.add(L,L),L=r.add(F,L),L=r.add(L,E),L=r.mul(L,c),U=r.add(U,L),E=r.mul(I,q),E=r.add(E,E),L=r.mul(E,c),$=r.sub($,L),F=r.mul(E,W),F=r.add(F,F),F=r.add(F,F),new b($,U,F)}add(P){p(P);let{px:k,py:R,pz:B}=this,{px:I,py:q,pz:$}=P,U=r.ZERO,F=r.ZERO,L=r.ZERO,W=e.a,E=r.mul(e.b,eZ),c=r.mul(k,I),l=r.mul(R,q),y=r.mul(B,$),d=r.add(k,R),h=r.add(I,q);d=r.mul(d,h),h=r.add(c,l),d=r.sub(d,h),h=r.add(k,B);let v=r.add(I,$);return h=r.mul(h,v),v=r.add(c,y),h=r.sub(h,v),v=r.add(R,B),U=r.add(q,$),v=r.mul(v,U),U=r.add(l,y),v=r.sub(v,U),L=r.mul(W,h),U=r.mul(E,y),L=r.add(U,L),U=r.sub(l,L),L=r.add(l,L),F=r.mul(U,L),l=r.add(c,c),l=r.add(l,c),y=r.mul(W,y),h=r.mul(E,h),l=r.add(l,y),y=r.sub(c,y),y=r.mul(W,y),h=r.add(h,y),c=r.mul(l,h),F=r.add(F,c),c=r.mul(v,h),U=r.mul(d,U),U=r.sub(U,c),c=r.mul(d,l),L=r.mul(v,L),L=r.add(L,c),new b(U,F,L)}subtract(P){return this.add(P.negate())}is0(){return this.equals(b.ZERO)}wNAF(P){return M.wNAFCached(this,m,P,k=>{let R=r.invertBatch(k.map(B=>B.pz));return k.map((B,I)=>B.toAffine(R[I])).map(b.fromAffine)})}multiplyUnsafe(P){let k=b.ZERO;if(P===Vd)return k;if(a(P),P===Vc)return this;let{endo:R}=e;if(!R)return M.unsafeLadder(this,P);let{k1neg:B,k1:I,k2neg:q,k2:$}=R.splitScalar(P),U=k,F=k,L=this;for(;I>Vd||$>Vd;)I&Vc&&(U=U.add(L)),$&Vc&&(F=F.add(L)),L=L.double(),I>>=Vc,$>>=Vc;return B&&(U=U.negate()),q&&(F=F.negate()),F=new b(r.mul(F.px,R.beta),F.py,F.pz),U.add(F)}multiply(P){a(P);let k=P,R,B,{endo:I}=e;if(I){let{k1neg:q,k1:$,k2neg:U,k2:F}=I.splitScalar(k),{p:L,f:W}=this.wNAF($),{p:E,f:c}=this.wNAF(F);L=M.constTimeNegate(q,L),E=M.constTimeNegate(U,E),E=new b(r.mul(E.px,I.beta),E.py,E.pz),R=L.add(E),B=W.add(c)}else{let{p:q,f:$}=this.wNAF(k);R=q,B=$}return b.normalizeZ([R,B])[0]}multiplyAndAddUnsafe(P,k,R){let B=b.BASE,I=($,U)=>U===Vd||U===Vc||!$.equals(B)?$.multiplyUnsafe(U):$.multiply(U),q=I(this,k).add(I(P,R));return q.is0()?void 0:q}toAffine(P){let{px:k,py:R,pz:B}=this,I=this.is0();P==null&&(P=I?r.ONE:r.inv(B));let q=r.mul(k,P),$=r.mul(R,P),U=r.mul(B,P);if(I)return{x:r.ZERO,y:r.ZERO};if(!r.eql(U,r.ONE))throw new Error("invZ was invalid");return{x:q,y:$}}isTorsionFree(){let{h:P,isTorsionFree:k}=e;if(P===Vc)return!0;if(k)return k(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:P,clearCofactor:k}=e;return P===Vc?this:k?k(b,this):this.multiplyUnsafe(e.h)}toRawBytes(P=!0){return this.assertValidity(),n(b,this,P)}toHex(P=!0){return Km(this.toRawBytes(P))}}b.BASE=new b(e.Gx,e.Gy,r.ONE),b.ZERO=new b(r.ZERO,r.ONE,r.ZERO);let A=e.nBitLength,M=XH(b,e.endo?Math.ceil(A/2):A);return{CURVE:e,ProjectivePoint:b,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:s}}function n5e(t){let e=d7(t);return Bp(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function tZ(t){let e=n5e(t),{Fp:r,n}=e,i=r.BYTES+1,o=2*r.BYTES+1;function s(h){return Vd<h&&h<r.ORDER}function a(h){return hc(h,n)}function u(h){return wM(h,n)}let{ProjectivePoint:m,normPrivateKeyToScalar:p,weierstrassEquation:b,isWithinCurveOrder:A}=r5e({...e,toBytes(h,v,x){let g=v.toAffine(),f=r.toBytes(g.x),w=uv;return x?w(Uint8Array.from([v.hasEvenY()?2:3]),f):w(Uint8Array.from([4]),f,r.toBytes(g.y))},fromBytes(h){let v=h.length,x=h[0],g=h.subarray(1);if(v===i&&(x===2||x===3)){let f=Gd(g);if(!s(f))throw new Error("Point is not on curve");let w=b(f),D;try{D=r.sqrt(w)}catch(z){let G=z instanceof Error?": "+z.message:"";throw new Error("Point is not on curve"+G)}let T=(D&Vc)===Vc;return(x&1)===1!==T&&(D=r.neg(D)),{x:f,y:D}}else if(v===o&&x===4){let f=r.fromBytes(g.subarray(0,r.BYTES)),w=r.fromBytes(g.subarray(r.BYTES,2*r.BYTES));return{x:f,y:w}}else throw new Error(`Point of length ${v} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),M=h=>Km(Op(h,e.nByteLength));function S(h){let v=n>>Vc;return h>v}function P(h){return S(h)?a(-h):h}let k=(h,v,x)=>Gd(h.slice(v,x));class R{constructor(v,x,g){this.r=v,this.s=x,this.recovery=g,this.assertValidity()}static fromCompact(v){let x=e.nByteLength;return v=dc("compactSignature",v,x*2),new R(k(v,0,x),k(v,x,2*x))}static fromDER(v){let{r:x,s:g}=Vm.toSig(dc("DER",v));return new R(x,g)}assertValidity(){if(!A(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!A(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(v){return new R(this.r,this.s,v)}recoverPublicKey(v){let{r:x,s:g,recovery:f}=this,w=F(dc("msgHash",v));if(f==null||![0,1,2,3].includes(f))throw new Error("recovery id invalid");let D=f===2||f===3?x+e.n:x;if(D>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let T=f&1?"03":"02",C=m.fromHex(T+M(D)),z=u(D),G=a(-w*z),V=a(g*z),Z=m.BASE.multiplyAndAddUnsafe(C,G,V);if(!Z)throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return S(this.s)}normalizeS(){return this.hasHighS()?new R(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Wm(this.toDERHex())}toDERHex(){return Vm.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Wm(this.toCompactHex())}toCompactHex(){return M(this.r)+M(this.s)}}let B={isValidPrivateKey(h){try{return p(h),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{let h=u7(e.n);return QH(e.randomBytes(h),e.n)},precompute(h=8,v=m.BASE){return v._setWindowSize(h),v.multiply(BigInt(3)),v}};function I(h,v=!0){return m.fromPrivateKey(h).toRawBytes(v)}function q(h){let v=kp(h),x=typeof h=="string",g=(v||x)&&h.length;return v?g===i||g===o:x?g===2*i||g===2*o:h instanceof m}function $(h,v,x=!0){if(q(h))throw new Error("first arg must be private key");if(!q(v))throw new Error("second arg must be public key");return m.fromHex(v).multiply(p(h)).toRawBytes(x)}let U=e.bits2int||function(h){let v=Gd(h),x=h.length*8-e.nBitLength;return x>0?v>>BigInt(x):v},F=e.bits2int_modN||function(h){return a(U(h))},L=R_(e.nBitLength);function W(h){if(typeof h!="bigint")throw new Error("bigint expected");if(!(Vd<=h&&h<L))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Op(h,e.nByteLength)}function E(h,v,x=c){if(["recovered","canonical"].some(X=>X in x))throw new Error("sign() legacy options not supported");let{hash:g,randomBytes:f}=e,{lowS:w,prehash:D,extraEntropy:T}=x;w==null&&(w=!0),h=dc("msgHash",h),D&&(h=dc("prehashed msgHash",g(h)));let C=F(h),z=p(v),G=[W(z),W(C)];if(T!=null&&T!==!1){let X=T===!0?f(r.BYTES):T;G.push(dc("extraEntropy",X))}let V=uv(...G),Z=C;function J(X){let se=U(X);if(!A(se))return;let Q=u(se),te=m.BASE.multiply(se).toAffine(),de=a(te.x);if(de===Vd)return;let ie=a(Q*a(Z+de*z));if(ie===Vd)return;let ae=(te.x===de?0:2)|Number(te.y&Vc),fe=ie;return w&&S(ie)&&(fe=P(ie),ae^=1),new R(de,fe,ae)}return{seed:V,k2sig:J}}let c={lowS:e.lowS,prehash:!1},l={lowS:e.lowS,prehash:!1};function y(h,v,x=c){let{seed:g,k2sig:f}=E(h,v,x),w=e;return o7(w.hash.outputLen,w.nByteLength,w.hmac)(g,f)}m.BASE._setWindowSize(8);function d(h,v,x,g=l){let f=h;if(v=dc("msgHash",v),x=dc("publicKey",x),"strict"in g)throw new Error("options.strict was renamed to lowS");let{lowS:w,prehash:D}=g,T,C;try{if(typeof f=="string"||kp(f))try{T=R.fromDER(f)}catch(te){if(!(te instanceof Vm.Err))throw te;T=R.fromCompact(f)}else if(typeof f=="object"&&typeof f.r=="bigint"&&typeof f.s=="bigint"){let{r:te,s:de}=f;T=new R(te,de)}else throw new Error("PARSE");C=m.fromHex(x)}catch(te){if(te.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(w&&T.hasHighS())return!1;D&&(v=e.hash(v));let{r:z,s:G}=T,V=F(v),Z=u(G),J=a(V*Z),X=a(z*Z),se=m.BASE.multiplyAndAddUnsafe(C,J,X)?.toAffine();return se?a(se.x)===z:!1}return{CURVE:e,getPublicKey:I,getSharedSecret:$,sign:y,verify:d,ProjectivePoint:m,Signature:R,utils:B}}function i5e(t){return{hash:t,hmac:(e,...r)=>r7(t,e,qH(...r)),randomBytes:LH}}function rZ(t,e){let r=n=>tZ({...t,...i5e(n)});return Object.freeze({...r(e),create:r})}var nZ=JH(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),o5e=nZ.create(BigInt("-3")),s5e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Hd=rZ({a:o5e,b:s5e,Fp:nZ,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},zH),iZ=Hd;_();_();_();_();function _M(t=0){return new Uint8Array(t)}_();_();_();_();_();_();var g7={};zt(g7,{base10:()=>h5e});_();_();_();var K1t=new Uint8Array(0);function oZ(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Zd(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function sZ(t){return new TextEncoder().encode(t)}function aZ(t){return new TextDecoder().decode(t)}_();function c5e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,u=t.charAt(0),m=Math.log(a)/Math.log(256),p=Math.log(256)/Math.log(a);function b(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var P=0,k=0,R=0,B=S.length;R!==B&&S[R]===0;)R++,P++;for(var I=(B-R)*p+1>>>0,q=new Uint8Array(I);R!==B;){for(var $=S[R],U=0,F=I-1;($!==0||U<k)&&F!==-1;F--,U++)$+=256*q[F]>>>0,q[F]=$%a>>>0,$=$/a>>>0;if($!==0)throw new Error("Non-zero carry");k=U,R++}for(var L=I-k;L!==I&&q[L]===0;)L++;for(var W=u.repeat(P);L<I;++L)W+=t.charAt(q[L]);return W}function A(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var P=0;if(S[P]!==" "){for(var k=0,R=0;S[P]===u;)k++,P++;for(var B=(S.length-P)*m+1>>>0,I=new Uint8Array(B);S[P];){var q=r[S.charCodeAt(P)];if(q===255)return;for(var $=0,U=B-1;(q!==0||$<R)&&U!==-1;U--,$++)q+=a*I[U]>>>0,I[U]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");R=$,P++}if(S[P]!==" "){for(var F=B-R;F!==B&&I[F]===0;)F++;for(var L=new Uint8Array(k+(B-F)),W=k;F!==B;)L[W++]=I[F++];return L}}}function M(S){var P=A(S);if(P)return P;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:A,decode:M}}var f5e=c5e,u5e=f5e,fZ=u5e;var h7=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},p7=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return uZ(this,e)}},m7=class{decoders;constructor(e){this.decoders=e}or(e){return uZ(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function uZ(t,e){return new m7({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}var y7=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new h7(e,r,n),this.decoder=new p7(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function lv({name:t,prefix:e,encode:r,decode:n}){return new y7(t,e,r,n)}function Dp({name:t,prefix:e,alphabet:r}){let{encode:n,decode:i}=fZ(r,t);return lv({prefix:e,name:t,encode:n,decode:o=>Zd(i(o))})}function l5e(t,e,r,n){let i={};for(let p=0;p<e.length;++p)i[e[p]]=p;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,u=0,m=0;for(let p=0;p<o;++p){let b=i[t[p]];if(b===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|b,a+=r,a>=8&&(a-=8,s[m++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s}function d5e(t,e,r){let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s!==0&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o}function Ai({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return lv({prefix:e,name:t,encode(i){return d5e(i,n,r)},decode(i){return l5e(i,n,r,t)}})}var h5e=Dp({prefix:"9",name:"base10",alphabet:"0123456789"});var b7={};zt(b7,{base16:()=>p5e,base16upper:()=>m5e});_();var p5e=Ai({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),m5e=Ai({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var v7={};zt(v7,{base2:()=>y5e});_();var y5e=Ai({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var w7={};zt(w7,{base256emoji:()=>_5e});_();var lZ=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),g5e=lZ.reduce((t,e,r)=>(t[r]=e,t),[]),b5e=lZ.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function v5e(t){return t.reduce((e,r)=>(e+=g5e[r],e),"")}function w5e(t){let e=[];for(let r of t){let n=b5e[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var _5e=lv({prefix:"\u{1F680}",name:"base256emoji",encode:v5e,decode:w5e});var _7={};zt(_7,{base32:()=>dv,base32hex:()=>M5e,base32hexpad:()=>P5e,base32hexpadupper:()=>T5e,base32hexupper:()=>A5e,base32pad:()=>E5e,base32padupper:()=>S5e,base32upper:()=>x5e,base32z:()=>R5e});_();var dv=Ai({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),x5e=Ai({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),E5e=Ai({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),S5e=Ai({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),M5e=Ai({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),A5e=Ai({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),P5e=Ai({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),T5e=Ai({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),R5e=Ai({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var x7={};zt(x7,{base36:()=>I5e,base36upper:()=>k5e});_();var I5e=Dp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),k5e=Dp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var E7={};zt(E7,{base58btc:()=>al,base58flickr:()=>O5e});_();var al=Dp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),O5e=Dp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var S7={};zt(S7,{base64:()=>B5e,base64pad:()=>D5e,base64url:()=>C5e,base64urlpad:()=>N5e});_();var B5e=Ai({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),D5e=Ai({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),C5e=Ai({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),N5e=Ai({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var M7={};zt(M7,{base8:()=>j5e});_();var j5e=Ai({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var A7={};zt(A7,{identity:()=>q5e});_();var q5e=lv({prefix:"\0",name:"identity",encode:t=>aZ(t),decode:t=>sZ(t)});_();var v2t=new TextEncoder,w2t=new TextDecoder;_();var T7={};zt(T7,{identity:()=>a4e});_();_();_();_();var U5e=pZ,dZ=128,F5e=127,z5e=~F5e,K5e=Math.pow(2,31);function pZ(t,e,r){e=e||[],r=r||0;for(var n=r;t>=K5e;)e[r++]=t&255|dZ,t/=128;for(;t&z5e;)e[r++]=t&255|dZ,t>>>=7;return e[r]=t|0,pZ.bytes=r-n+1,e}var W5e=P7,G5e=128,hZ=127;function P7(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw P7.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&hZ)<<i:(s&hZ)*Math.pow(2,i),i+=7}while(s>=G5e);return P7.bytes=o-n,r}var V5e=Math.pow(2,7),H5e=Math.pow(2,14),Z5e=Math.pow(2,21),J5e=Math.pow(2,28),Y5e=Math.pow(2,35),Q5e=Math.pow(2,42),X5e=Math.pow(2,49),e4e=Math.pow(2,56),t4e=Math.pow(2,63),r4e=function(t){return t<V5e?1:t<H5e?2:t<Z5e?3:t<J5e?4:t<Y5e?5:t<Q5e?6:t<X5e?7:t<e4e?8:t<t4e?9:10},n4e={encode:U5e,decode:W5e,encodingLength:r4e},i4e=n4e,I_=i4e;function k_(t,e=0){return[I_.decode(t,e),I_.decode.bytes]}function hv(t,e,r=0){return I_.encode(t,e,r),e}function pv(t){return I_.encodingLength(t)}function Hm(t,e){let r=e.byteLength,n=pv(t),i=n+pv(r),o=new Uint8Array(i+r);return hv(t,o,0),hv(r,o,n),o.set(e,i),new mv(t,r,e,o)}function mZ(t){let e=Zd(t),[r,n]=k_(e),[i,o]=k_(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new mv(r,i,s,e)}function yZ(t,e){if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&oZ(t.bytes,r.bytes)}}var mv=class{code;size;digest;bytes;constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var gZ=0,o4e="identity",bZ=Zd;function s4e(t){return Hm(gZ,bZ(t))}var a4e={code:gZ,name:o4e,encode:bZ,digest:s4e};var k7={};zt(k7,{sha256:()=>c4e,sha512:()=>f4e});_();_();function I7({name:t,code:e,encode:r}){return new R7(t,e,r)}var R7=class{name;code;encode;constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Hm(this.code,r):r.then(n=>Hm(this.code,n))}else throw Error("Unknown type, must be binary type")}};function wZ(t){return async e=>new Uint8Array(await crypto.subtle.digest(t,e))}var c4e=I7({name:"sha2-256",code:18,encode:wZ("SHA-256")}),f4e=I7({name:"sha2-512",code:19,encode:wZ("SHA-512")});_();_();_();function _Z(t,e){let{bytes:r,version:n}=t;switch(n){case 0:return l4e(r,O7(t),e??al.encoder);default:return d4e(r,O7(t),e??dv.encoder)}}var xZ=new WeakMap;function O7(t){let e=xZ.get(t);if(e==null){let r=new Map;return xZ.set(t,r),r}return e}var io=class{code;version;multihash;bytes;"/";constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==B_)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==h4e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return io.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Hm(e,r);return io.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return io.equals(this,e)}static equals(e,r){let n=r;return n!=null&&e.code===n.code&&e.version===n.version&&yZ(e.multihash,n.multihash)}toString(e){return _Z(this,e)}toJSON(){return{"/":_Z(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof io)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new io(n,i,o,s??EZ(n,i,o.bytes))}else if(r[p4e]===!0){let{version:n,multihash:i,code:o}=r,s=mZ(i);return io.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==B_)throw new Error(`Version 0 CID must use dag-pb (code: ${B_}) block encoding`);return new io(e,r,n,n.bytes)}case 1:{let i=EZ(e,r,n.bytes);return new io(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return io.create(0,B_,e)}static createV1(e,r){return io.create(1,e,r)}static decode(e){let[r,n]=io.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=io.inspectBytes(e),n=r.size-r.multihashSize,i=Zd(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new mv(r.multihashCode,r.digestSize,o,i);return[r.version===0?io.createV0(s):io.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[b,A]=k_(e.subarray(r));return r+=A,b},i=n(),o=B_;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),u=n(),m=r+u,p=m-s;return{version:i,codec:o,multihashCode:a,digestSize:u,multihashSize:p,size:m}}static parse(e,r){let[n,i]=u4e(e,r),o=io.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return O7(o).set(n,e),o}};function u4e(t,e){switch(t[0]){case"Q":{let r=e??al;return[al.prefix,r.decode(`${al.prefix}${t}`)]}case al.prefix:{let r=e??al;return[al.prefix,r.decode(t)]}case dv.prefix:{let r=e??dv;return[dv.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function l4e(t,e,r){let{prefix:n}=r;if(n!==al.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i}function d4e(t,e,r){let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i}var B_=112,h4e=18;function EZ(t,e,r){let n=pv(t),i=n+pv(e),o=new Uint8Array(i+r.byteLength);return hv(t,o,0),hv(e,o,n),o.set(r,i),o}var p4e=Symbol.for("@ipld/js-cid/CID");_();_();_();_();_();var B7={...A7,...v7,...M7,...g7,...b7,..._7,...x7,...E7,...S7,...w7},n_t={...k7,...T7};function MZ(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var SZ=MZ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),D7=MZ("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=_M(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),m4e={utf8:SZ,"utf-8":SZ,hex:B7.base16,latin1:D7,ascii:D7,binary:D7,...B7},EM=m4e;function C7(t,e="utf8"){let r=EM[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}_();function N7(t,e="utf8"){let r=EM[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var y4e={toString:N7,fromString:C7},pa=class{static validateKey(e){if(e.kty!=="EC"||e.crv!=="P-256")throw new be("Secp256r1KeyNotValid","Invalid SECP256R1 JWK: `kty` MUST be `EC`. `crv` MUST be `P-256`")}static async publicKeyToJwk(e){let r;e.byteLength===33?r=Hd.ProjectivePoint.fromHex(e).toRawBytes(!1):r=e;let n=Je.bytesToBase64Url(r.subarray(1,33)),i=Je.bytesToBase64Url(r.subarray(33,65));return{alg:"ES256",kty:"EC",crv:"P-256",x:n,y:i}}static privateJwkToBytes(e){return Je.base64UrlToBytes(e.d)}static async sign(e,r){pa.validateKey(r);let n=await ss.encode(e),i=pa.privateJwkToBytes(r);return Promise.resolve(Hd.sign(n,i).toCompactRawBytes())}static async verify(e,r,n){pa.validateKey(n);let i;r.length===64?i=Hd.Signature.fromCompact(r):i=Hd.Signature.fromDER(r);let o=await ss.encode(e),s=Hd.ProjectivePoint.fromAffine({x:pa.bytesToBigInt(Je.base64UrlToBytes(n.x)),y:pa.bytesToBigInt(Je.base64UrlToBytes(n.y))}).toRawBytes(!1);return Hd.verify(i,o,s)}static async generateKeyPair(){let e=Hd.utils.randomPrivateKey(),r=iZ.getPublicKey(e,!1),n=Je.bytesToBase64Url(e),i=await pa.publicKeyToJwk(r),o={...i,d:n};return{publicJwk:i,privateJwk:o}}static bytesToBigInt(e){return BigInt("0x"+y4e.toString(e,"base16"))}};var yv={Ed25519:b_,secp256k1:{sign:fn.sign,verify:fn.verify,generateKeyPair:fn.generateKeyPair,publicKeyToJwk:fn.publicKeyToJwk},"P-256":{sign:pa.sign,verify:pa.verify,generateKeyPair:pa.generateKeyPair,publicKeyToJwk:pa.publicKeyToJwk}};var Cp=class{constructor(e){if(e.keyId===void 0&&e.privateJwk.kid===void 0)throw new be("PrivateKeySignerUnableToDeduceKeyId","Unable to deduce the key ID");if(e.algorithm===void 0&&e.privateJwk.alg===void 0)throw new be("PrivateKeySignerUnableToDeduceAlgorithm","Unable to deduce the signature algorithm");if(this.keyId=e.keyId??e.privateJwk.kid,this.algorithm=e.algorithm??e.privateJwk.alg,this.privateJwk=e.privateJwk,this.signatureAlgorithm=yv[e.privateJwk.crv],!this.signatureAlgorithm)throw new be("PrivateKeySignerUnsupportedCurve",`Unsupported crv ${e.privateJwk.crv}, crv must be one of ${Object.keys(yv)}`)}async sign(e){return await this.signatureAlgorithm.sign(e,this.privateJwk)}};var Kt=class{static getKid(e){let{kid:r}=Je.base64UrlToObject(e.protected);return r}static getSignerDid(e){let r=Kt.getKid(e);return Kt.extractDid(r)}static async verifySignature(e,r,n){let i=yv[n.crv];if(!i)throw new be("JwsVerifySignatureUnsupportedCrv",`unsupported crv. crv must be one of ${Object.keys(yv)}`);let o=Je.stringToBytes(`${r.protected}.${e}`),s=Je.base64UrlToBytes(r.signature);return await i.verify(o,s,n)}static decodePlainObjectPayload(e){let r;try{r=Je.base64UrlToObject(e.payload)}catch{throw new be("JwsDecodePlainObjectPayloadInvalid","payload is not a JSON object")}if(!(0,AZ.default)(r))throw new be("JwsDecodePlainObjectPayloadInvalid","signed payload must be a plain object");return r}static extractDid(e){let[r]=e.split("#");return r}static createSigners(e){return e.map(n=>Kt.createSigner(n))}static createSigner(e){let r=e.keyPair.privateJwk,n=e.keyId;return new Cp({privateJwk:r,keyId:n})}};_();_();var D_=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,TZ=new Set,j7=typeof O.default=="object"&&O.default?O.default:{},RZ=(t,e,r,n)=>{typeof j7.emitWarning=="function"?j7.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},MM=globalThis.AbortController,PZ=globalThis.AbortSignal;if(typeof MM>"u"){PZ=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},MM=class{constructor(){e()}signal=new PZ;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=j7.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,RZ("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var g4e=t=>!TZ.has(t),Q_t=Symbol("type"),Np=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),IZ=t=>Np(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?bv:null:null,bv=class extends Array{constructor(e){super(e),this.fill(0)}},vv,gv=class{heap;length;static create(e){let r=IZ(e);if(!r)return[];yk(gv,vv,!0);let n=new gv(e,r);return yk(gv,vv,!1),n}constructor(e,r){if(!rV(gv,vv))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},SM=gv;vv=new WeakMap,nV(SM,vv,!1);var wv=class{#h;#u;#b;#p;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#m;#i;#r;#e;#c;#l;#a;#o;#y;#s;#x;#E;#g;#v;#M;#f;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#g,sizes:e.#x,keyMap:e.#i,keyList:e.#r,valList:e.#e,next:e.#c,prev:e.#l,get head(){return e.#a},get tail(){return e.#o},free:e.#y,isBackgroundFetch:r=>e.#t(r),backgroundFetch:(r,n,i,o)=>e.#O(r,n,i,o),moveToTail:r=>e.#T(r),indexes:r=>e.#w(r),rindexes:r=>e.#_(r),isStale:r=>e.#d(r)}}get max(){return this.#h}get maxSize(){return this.#u}get calculatedSize(){return this.#m}get size(){return this.#n}get fetchMethod(){return this.#R}get dispose(){return this.#b}get disposeAfter(){return this.#p}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:u,dispose:m,disposeAfter:p,noDisposeOnSet:b,noUpdateTTL:A,maxSize:M=0,maxEntrySize:S=0,sizeCalculation:P,fetchMethod:k,noDeleteOnFetchRejection:R,noDeleteOnStaleGet:B,allowStaleOnFetchRejection:I,allowStaleOnFetchAbort:q,ignoreFetchAbort:$}=e;if(r!==0&&!Np(r))throw new TypeError("max option must be a nonnegative integer");let U=r?IZ(r):Array;if(!U)throw new Error("invalid max value: "+r);if(this.#h=r,this.#u=M,this.maxEntrySize=S||this.#u,this.sizeCalculation=P,this.sizeCalculation){if(!this.#u&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(k!==void 0&&typeof k!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#R=k,this.#M=!!k,this.#i=new Map,this.#r=new Array(r).fill(void 0),this.#e=new Array(r).fill(void 0),this.#c=new U(r),this.#l=new U(r),this.#a=0,this.#o=0,this.#y=SM.create(r),this.#n=0,this.#m=0,typeof m=="function"&&(this.#b=m),typeof p=="function"?(this.#p=p,this.#s=[]):(this.#p=void 0,this.#s=void 0),this.#v=!!this.#b,this.#f=!!this.#p,this.noDisposeOnSet=!!b,this.noUpdateTTL=!!A,this.noDeleteOnFetchRejection=!!R,this.allowStaleOnFetchRejection=!!I,this.allowStaleOnFetchAbort=!!q,this.ignoreFetchAbort=!!$,this.maxEntrySize!==0){if(this.#u!==0&&!Np(this.#u))throw new TypeError("maxSize must be a positive integer if specified");if(!Np(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#q()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!B,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=Np(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Np(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#B()}if(this.#h===0&&this.ttl===0&&this.#u===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#h&&!this.#u){let F="LRU_CACHE_UNBOUNDED";g4e(F)&&(TZ.add(F),RZ("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",F,wv))}}getRemainingTTL(e){return this.#i.has(e)?1/0:0}#B(){let e=new bv(this.#h),r=new bv(this.#h);this.#g=e,this.#E=r,this.#D=(o,s,a=D_.now())=>{if(r[o]=s!==0?a:0,e[o]=s,s!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#d(o)&&this.delete(this.#r[o])},s+1);u.unref&&u.unref()}},this.#A=o=>{r[o]=e[o]!==0?D_.now():0},this.#S=(o,s)=>{if(e[s]){let a=e[s],u=r[s];o.ttl=a,o.start=u,o.now=n||i();let m=o.now-u;o.remainingTTL=a-m}};let n=0,i=()=>{let o=D_.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#i.get(o);if(s===void 0)return 0;let a=e[s],u=r[s];if(a===0||u===0)return 1/0;let m=(n||i())-u;return a-m},this.#d=o=>e[o]!==0&&r[o]!==0&&(n||i())-r[o]>e[o]}#A=()=>{};#S=()=>{};#D=()=>{};#d=()=>!1;#q(){let e=new bv(this.#h);this.#m=0,this.#x=e,this.#P=r=>{this.#m-=e[r],e[r]=0},this.#C=(r,n,i,o)=>{if(this.#t(n))return 0;if(!Np(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Np(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#I=(r,n,i)=>{if(e[r]=n,this.#u){let o=this.#u-e[r];for(;this.#m>o;)this.#k(!0)}this.#m+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#m)}}#P=e=>{};#I=(e,r,n)=>{};#C=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#w({allowStale:e=this.allowStale}={}){if(this.#n)for(let r=this.#o;!(!this.#N(r)||((e||!this.#d(r))&&(yield r),r===this.#a));)r=this.#l[r]}*#_({allowStale:e=this.allowStale}={}){if(this.#n)for(let r=this.#a;!(!this.#N(r)||((e||!this.#d(r))&&(yield r),r===this.#o));)r=this.#c[r]}#N(e){return e!==void 0&&this.#i.get(this.#r[e])===e}*entries(){for(let e of this.#w())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*rentries(){for(let e of this.#_())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*keys(){for(let e of this.#w()){let r=this.#r[e];r!==void 0&&!this.#t(this.#e[e])&&(yield r)}}*rkeys(){for(let e of this.#_()){let r=this.#r[e];r!==void 0&&!this.#t(this.#e[e])&&(yield r)}}*values(){for(let e of this.#w())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#_())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.#w()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#r[n],this))return this.get(this.#r[n],r)}}forEach(e,r=this){for(let n of this.#w()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#r[n],this)}}rforEach(e,r=this){for(let n of this.#_()){let i=this.#e[n],o=this.#t(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#r[n],this)}}purgeStale(){let e=!1;for(let r of this.#_({allowStale:!0}))this.#d(r)&&(this.delete(this.#r[r]),e=!0);return e}dump(){let e=[];for(let r of this.#w({allowStale:!0})){let n=this.#r[r],i=this.#e[r],o=this.#t(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#g&&this.#E){s.ttl=this.#g[r];let a=D_.now()-this.#E[r];s.start=Math.floor(Date.now()-a)}this.#x&&(s.size=this.#x[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=D_.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:u}=n,{noUpdateTTL:m=this.noUpdateTTL}=n,p=this.#C(e,r,n.size||0,a);if(this.maxEntrySize&&p>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.delete(e),this;let b=this.#n===0?void 0:this.#i.get(e);if(b===void 0)b=this.#n===0?this.#o:this.#y.length!==0?this.#y.pop():this.#n===this.#h?this.#k(!1):this.#n,this.#r[b]=e,this.#e[b]=r,this.#i.set(e,b),this.#c[this.#o]=b,this.#l[b]=this.#o,this.#o=b,this.#n++,this.#I(b,p,u),u&&(u.set="add"),m=!1;else{this.#T(b);let A=this.#e[b];if(r!==A){if(this.#M&&this.#t(A)?A.__abortController.abort(new Error("replaced")):s||(this.#v&&this.#b?.(A,e,"set"),this.#f&&this.#s?.push([A,e,"set"])),this.#P(b),this.#I(b,p,u),this.#e[b]=r,u){u.set="replace";let M=A&&this.#t(A)?A.__staleWhileFetching:A;M!==void 0&&(u.oldValue=M)}}else u&&(u.set="update")}if(i!==0&&!this.#g&&this.#B(),this.#g&&(m||this.#D(b,i,o),u&&this.#S(u,b)),!s&&this.#f&&this.#s){let A=this.#s,M;for(;M=A?.shift();)this.#p?.(...M)}return this}pop(){try{for(;this.#n;){let e=this.#e[this.#a];if(this.#k(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#f&&this.#s){let e=this.#s,r;for(;r=e?.shift();)this.#p?.(...r)}}}#k(e){let r=this.#a,n=this.#r[r],i=this.#e[r];return this.#M&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#f)&&(this.#v&&this.#b?.(i,n,"evict"),this.#f&&this.#s?.push([i,n,"evict"])),this.#P(r),e&&(this.#r[r]=void 0,this.#e[r]=void 0,this.#y.push(r)),this.#n===1?(this.#a=this.#o=0,this.#y.length=0):this.#a=this.#c[r],this.#i.delete(n),this.#n--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#i.get(e);if(o!==void 0){let s=this.#e[o];if(this.#t(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#d(o))i&&(i.has="stale",this.#S(i,o));else return n&&this.#A(o),i&&(i.has="hit",this.#S(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#i.get(e);if(i!==void 0&&(n||!this.#d(i))){let o=this.#e[i];return this.#t(o)?o.__staleWhileFetching:o}}#O(e,r,n,i){let o=r===void 0?void 0:this.#e[r];if(this.#t(o))return o;let s=new MM,{signal:a}=n;a?.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal});let u={signal:s.signal,options:n,context:i},m=(P,k=!1)=>{let{aborted:R}=s.signal,B=n.ignoreFetchAbort&&P!==void 0;if(n.status&&(R&&!k?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,B&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),R&&!B&&!k)return b(s.signal.reason);let I=M;return this.#e[r]===M&&(P===void 0?I.__staleWhileFetching?this.#e[r]=I.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,P,u.options))),P},p=P=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=P),b(P)),b=P=>{let{aborted:k}=s.signal,R=k&&n.allowStaleOnFetchAbort,B=R||n.allowStaleOnFetchRejection,I=B||n.noDeleteOnFetchRejection,q=M;if(this.#e[r]===M&&(!I||q.__staleWhileFetching===void 0?this.delete(e):R||(this.#e[r]=q.__staleWhileFetching)),B)return n.status&&q.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),q.__staleWhileFetching;if(q.__returned===q)throw P},A=(P,k)=>{let R=this.#R?.(e,o,u);R&&R instanceof Promise&&R.then(B=>P(B),k),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(P(),n.allowStaleOnFetchAbort&&(P=B=>m(B,!0)))})};n.status&&(n.status.fetchDispatched=!0);let M=new Promise(A).then(m,p),S=Object.assign(M,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,S,{...u.options,status:void 0}),r=this.#i.get(e)):this.#e[r]=S,S}#t(e){if(!this.#M)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof MM}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:u=0,sizeCalculation:m=this.sizeCalculation,noUpdateTTL:p=this.noUpdateTTL,noDeleteOnFetchRejection:b=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:A=this.allowStaleOnFetchRejection,ignoreFetchAbort:M=this.ignoreFetchAbort,allowStaleOnFetchAbort:S=this.allowStaleOnFetchAbort,context:P,forceRefresh:k=!1,status:R,signal:B}=r;if(!this.#M)return R&&(R.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:R});let I={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:a,size:u,sizeCalculation:m,noUpdateTTL:p,noDeleteOnFetchRejection:b,allowStaleOnFetchRejection:A,allowStaleOnFetchAbort:S,ignoreFetchAbort:M,status:R,signal:B},q=this.#i.get(e);if(q===void 0){R&&(R.fetch="miss");let $=this.#O(e,q,I,P);return $.__returned=$}else{let $=this.#e[q];if(this.#t($)){let E=n&&$.__staleWhileFetching!==void 0;return R&&(R.fetch="inflight",E&&(R.returnedStale=!0)),E?$.__staleWhileFetching:$.__returned=$}let U=this.#d(q);if(!k&&!U)return R&&(R.fetch="hit"),this.#T(q),i&&this.#A(q),R&&this.#S(R,q),$;let F=this.#O(e,q,I,P),W=F.__staleWhileFetching!==void 0&&n;return R&&(R.fetch=U?"stale":"refresh",W&&U&&(R.returnedStale=!0)),W?F.__staleWhileFetching:F.__returned=F}}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,a=this.#i.get(e);if(a!==void 0){let u=this.#e[a],m=this.#t(u);return s&&this.#S(s,a),this.#d(a)?(s&&(s.get="stale"),m?(s&&n&&u.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?u.__staleWhileFetching:void 0):(o||this.delete(e),s&&n&&(s.returnedStale=!0),n?u:void 0)):(s&&(s.get="hit"),m?u.__staleWhileFetching:(this.#T(a),i&&this.#A(a),u))}else s&&(s.get="miss")}#j(e,r){this.#l[r]=e,this.#c[e]=r}#T(e){e!==this.#o&&(e===this.#a?this.#a=this.#c[e]:this.#j(this.#l[e],this.#c[e]),this.#j(this.#o,e),this.#o=e)}delete(e){let r=!1;if(this.#n!==0){let n=this.#i.get(e);if(n!==void 0)if(r=!0,this.#n===1)this.clear();else{this.#P(n);let i=this.#e[n];this.#t(i)?i.__abortController.abort(new Error("deleted")):(this.#v||this.#f)&&(this.#v&&this.#b?.(i,e,"delete"),this.#f&&this.#s?.push([i,e,"delete"])),this.#i.delete(e),this.#r[n]=void 0,this.#e[n]=void 0,n===this.#o?this.#o=this.#l[n]:n===this.#a?this.#a=this.#c[n]:(this.#c[this.#l[n]]=this.#c[n],this.#l[this.#c[n]]=this.#l[n]),this.#n--,this.#y.push(n)}}if(this.#f&&this.#s?.length){let n=this.#s,i;for(;i=n?.shift();)this.#p?.(...i)}return r}clear(){for(let e of this.#_({allowStale:!0})){let r=this.#e[e];if(this.#t(r))r.__abortController.abort(new Error("deleted"));else{let n=this.#r[e];this.#v&&this.#b?.(r,n,"delete"),this.#f&&this.#s?.push([r,n,"delete"])}}if(this.#i.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#g&&this.#E&&(this.#g.fill(0),this.#E.fill(0)),this.#x&&this.#x.fill(0),this.#a=0,this.#o=0,this.#y.length=0,this.#m=0,this.#n=0,this.#f&&this.#s){let e=this.#s,r;for(;r=e?.shift();)this.#p?.(...r)}}};var AM=class{constructor(e){this.timeToLiveInSeconds=e;this.cache=new wv({max:1e5,ttl:e*1e3})}async set(e,r){try{this.cache.set(e,r)}catch{}}async get(e){return this.cache.get(e)}};_();var U7={};zt(U7,{Authorization:()=>b4e,AuthorizationDelegatedGrant:()=>v4e,AuthorizationOwner:()=>x4e,Definitions:()=>R4e,GeneralJwk:()=>I4e,GeneralJws:()=>k4e,GenericSignaturePayload:()=>eAe,JwkVerificationMethod:()=>O4e,MessagesFilter:()=>D4e,MessagesQuery:()=>C4e,MessagesRead:()=>N4e,MessagesSubscribe:()=>j4e,NumberRangeFilter:()=>q4e,PaginationCursor:()=>$4e,PermissionGrantData:()=>L4e,PermissionRequestData:()=>U4e,PermissionRevocationData:()=>F4e,PermissionsDefinitions:()=>z4e,PermissionsScopes:()=>K4e,ProtocolDefinition:()=>W4e,ProtocolRuleSet:()=>H4e,ProtocolsConfigure:()=>Z4e,ProtocolsQuery:()=>J4e,PublicJwk:()=>X4e,RecordsDelete:()=>E4e,RecordsFilter:()=>Q4e,RecordsQuery:()=>S4e,RecordsRead:()=>Y4e,RecordsSubscribe:()=>M4e,RecordsWrite:()=>A4e,RecordsWriteDataEncoded:()=>P4e,RecordsWriteSignaturePayload:()=>tAe,RecordsWriteUnidentified:()=>T4e,StringRangeFilter:()=>rAe});_();var b4e=Fi;var Ym=new RegExp("^[A-Za-z0-9_-]+$","u");function ln(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=ln.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let A=a;for(let M in t)if(!(M==="payload"||M==="signatures")){return ln.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:M},message:"must NOT have additional properties"}],!1;break}if(A===a){if(t.payload!==void 0){let M=t.payload,S=a;if(a===a)if(typeof M=="string"){if(!Ym.test(M))return ln.errors=[{instancePath:e+"/payload",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return ln.errors=[{instancePath:e+"/payload",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=S===a}else var m=!0;if(m)if(t.signatures!==void 0){let M=t.signatures,S=a;if(a===S)if(Array.isArray(M)){if(M.length<1)return ln.errors=[{instancePath:e+"/signatures",schemaPath:"#/properties/signatures/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var p=!0;let k=M.length;for(let R=0;R<k;R++){let B=M[R],I=a;if(a===I)if(B&&typeof B=="object"&&!Array.isArray(B)){if(B.protected!==void 0){let $=B.protected,U=a;if(a===a)if(typeof $=="string"){if(!Ym.test($))return ln.errors=[{instancePath:e+"/signatures/"+R+"/protected",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return ln.errors=[{instancePath:e+"/signatures/"+R+"/protected",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var b=U===a}else var b=!0;if(b)if(B.signature!==void 0){let $=B.signature,U=a;if(a===a)if(typeof $=="string"){if(!Ym.test($))return ln.errors=[{instancePath:e+"/signatures/"+R+"/signature",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return ln.errors=[{instancePath:e+"/signatures/"+R+"/signature",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var b=U===a}else var b=!0}else return ln.errors=[{instancePath:e+"/signatures/"+R,schemaPath:"#/properties/signatures/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=I===a;if(!p)break}}}else return ln.errors=[{instancePath:e+"/signatures",schemaPath:"#/properties/signatures/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var m=S===a}else var m=!0}}else return ln.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ln.errors=s,a===0}ln.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function Fi(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=Fi.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let m=a;for(let p in t)if(p!=="signature"){return Fi.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties"}],!1;break}m===a&&t.signature!==void 0&&(ln(t.signature,{instancePath:e+"/signature",parentData:t,parentDataProperty:"signature",rootData:i,dynamicAnchors:o})||(s=s===null?ln.errors:s.concat(ln.errors),a=s.length))}else return Fi.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Fi.errors=s,a===0}Fi.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var v4e=Lo;var jp={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-write-unidentified.json",type:"object",required:["descriptor"],properties:{recordId:{type:"string"},contextId:{type:"string",pattern:"^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$"},attestation:{$ref:"https://identity.foundation/dwn/json-schemas/general-jws.json"},authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-owner.json"},encryption:{type:"object",properties:{algorithm:{type:"string",enum:["A256CTR"]},initializationVector:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"},keyEncryption:{type:"array",minItems:1,items:{type:"object",properties:{rootKeyId:{type:"string"},derivationScheme:{type:"string",enum:["dataFormats","protocolContext","protocolPath","schemas"]},derivedPublicKey:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"},algorithm:{type:"string",enum:["ECIES-ES256K"]},encryptedKey:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"},initializationVector:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"},ephemeralPublicKey:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"},messageAuthenticationCode:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"}},additionalProperties:!1,required:["rootKeyId","derivationScheme","algorithm","encryptedKey","initializationVector","ephemeralPublicKey","messageAuthenticationCode"]}}},additionalProperties:!1,required:["algorithm","initializationVector","keyEncryption"]},descriptor:{type:"object",properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Write"],type:"string"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},protocol:{type:"string"},protocolPath:{type:"string",pattern:"^[a-zA-Z]+(/[a-zA-Z]+)*$"},schema:{type:"string"},tags:{type:"object",minProperties:1,maxProperties:10,additionalProperties:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"array",minItems:1,maxItems:10,items:{type:"string"}},{type:"array",minItems:1,maxItems:10,items:{type:"number"}}]}},parentId:{type:"string"},dataCid:{type:"string"},dataSize:{type:"number"},dateCreated:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},published:{type:"boolean"},datePublished:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},dataFormat:{type:"string"}},additionalProperties:!1,required:["interface","method","dataCid","dataSize","dateCreated","messageTimestamp","dataFormat"],dependencies:{parentId:["protocol"]},allOf:[{$comment:"rule defining `published` and `datePublished` relationship",anyOf:[{properties:{published:{type:"boolean",enum:[!0]}},required:["published","datePublished"]},{properties:{published:{type:"boolean",enum:[!1]}},not:{required:["datePublished"]}},{allOf:[{not:{required:["published"]}},{not:{required:["datePublished"]}}]}]}]}},$comment:"rule defining `protocol` and `contextId` relationship",anyOf:[{properties:{descriptor:{type:"object",required:["protocol","protocolPath"]}},required:["contextId"]},{allOf:[{not:{required:["contextId"]}},{properties:{descriptor:{type:"object",not:{required:["protocol"]}}}},{properties:{descriptor:{type:"object",not:{required:["protocolPath"]}}}}]}]};var w4e=new RegExp("^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$","u"),qp=new RegExp("^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$","u"),_4e=new RegExp("^[a-zA-Z]+(/[a-zA-Z]+)*$","u"),so=new RegExp("^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$","u");var _v={validate:Hc};function fl(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=fl.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let p=a;for(let b in t)if(!(b==="signature"||b==="authorDelegatedGrant"||b==="ownerSignature"||b==="ownerDelegatedGrant")){return fl.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:b},message:"must NOT have additional properties"}],!1;break}if(p===a){let b;if(t.ownerSignature!==void 0&&t.signature===void 0&&(b="signature"))return fl.errors=[{instancePath:e,schemaPath:"#/dependencies",keyword:"dependencies",params:{property:"ownerSignature",missingProperty:b,depsCount:1,deps:"signature"},message:"must have property signature when property ownerSignature is present"}],!1;if(t.signature!==void 0){let A=a;ln(t.signature,{instancePath:e+"/signature",parentData:t,parentDataProperty:"signature",rootData:i,dynamicAnchors:o})||(s=s===null?ln.errors:s.concat(ln.errors),a=s.length);var m=A===a}else var m=!0;if(m){if(t.authorDelegatedGrant!==void 0){let A=a;_v.validate(t.authorDelegatedGrant,{instancePath:e+"/authorDelegatedGrant",parentData:t,parentDataProperty:"authorDelegatedGrant",rootData:i,dynamicAnchors:o})||(s=s===null?_v.validate.errors:s.concat(_v.validate.errors),a=s.length);var m=A===a}else var m=!0;if(m){if(t.ownerSignature!==void 0){let A=a;ln(t.ownerSignature,{instancePath:e+"/ownerSignature",parentData:t,parentDataProperty:"ownerSignature",rootData:i,dynamicAnchors:o})||(s=s===null?ln.errors:s.concat(ln.errors),a=s.length);var m=A===a}else var m=!0;if(m)if(t.ownerDelegatedGrant!==void 0){let A=a;_v.validate(t.ownerDelegatedGrant,{instancePath:e+"/ownerDelegatedGrant",parentData:t,parentDataProperty:"ownerDelegatedGrant",rootData:i,dynamicAnchors:o})||(s=s===null?_v.validate.errors:s.concat(_v.validate.errors),a=s.length);var m=A===a}else var m=!0}}}}else return fl.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return fl.errors=s,a===0}fl.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var KZ={$id:"https://identity.foundation/dwn/json-schemas/general-jwk.json",$schema:"https://json-schema.org/draft/2020-12/schema",type:"object",required:["kty"],properties:{alg:{type:"string"},kid:{type:"string"},kty:{enum:["EC","RSA","oct","OKP"]},crv:{type:"string"},use:{type:"string"},key_ops:{type:"string"},x5u:{type:"string"},x5c:{type:"string"},x5t:{type:"string"},"x5t#S256":{type:"string"}},oneOf:[{properties:{kty:{const:"EC"},crv:{type:"string"},x:{type:"string"},y:{type:"string"},d:{type:"string"}},required:["crv","x"]},{properties:{kty:{const:"OKP"},crv:{type:"string"},x:{type:"string"},d:{type:"string"}},required:["crv","x"]},{properties:{kty:{const:"RSA"},n:{type:"string"},e:{type:"string"},d:{type:"string"},p:{type:"string"},q:{type:"string"},dp:{type:"string"},dq:{type:"string"},qi:{type:"string"},oth:{type:"object"}},required:["n","e"]},{properties:{kty:{const:"oct"},k:{type:"string"}},required:["k"]}]};function un(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=un.evaluated;u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0);let m=a,p=a,b=!1,A=null,M=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let d;if(t.crv===void 0&&(d="crv")||t.x===void 0&&(d="x")){let h={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"};s===null?s=[h]:s.push(h),a++}else{if(t.kty!==void 0){let h=a;if(t.kty!=="EC"){let v={instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/kty/const",keyword:"const",params:{allowedValue:"EC"},message:"must be equal to constant"};s===null?s=[v]:s.push(v),a++}var S=h===a}else var S=!0;if(S){if(t.crv!==void 0){let h=a;if(typeof t.crv!="string"){let x={instancePath:e+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[x]:s.push(x),a++}var S=h===a}else var S=!0;if(S){if(t.x!==void 0){let h=a;if(typeof t.x!="string"){let x={instancePath:e+"/x",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[x]:s.push(x),a++}var S=h===a}else var S=!0;if(S){if(t.y!==void 0){let h=a;if(typeof t.y!="string"){let x={instancePath:e+"/y",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/y/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[x]:s.push(x),a++}var S=h===a}else var S=!0;if(S)if(t.d!==void 0){let h=a;if(typeof t.d!="string"){let x={instancePath:e+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[x]:s.push(x),a++}var S=h===a}else var S=!0}}}}}var B=M===a;if(B){b=!0,A=0;var P={};P.kty=!0,P.crv=!0,P.x=!0,P.y=!0,P.d=!0}let k=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let d;if(t.crv===void 0&&(d="crv")||t.x===void 0&&(d="x")){let h={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"};s===null?s=[h]:s.push(h),a++}else{if(t.kty!==void 0){let h=a;if(t.kty!=="OKP"){let v={instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/kty/const",keyword:"const",params:{allowedValue:"OKP"},message:"must be equal to constant"};s===null?s=[v]:s.push(v),a++}var R=h===a}else var R=!0;if(R){if(t.crv!==void 0){let h=a;if(typeof t.crv!="string"){let x={instancePath:e+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[x]:s.push(x),a++}var R=h===a}else var R=!0;if(R){if(t.x!==void 0){let h=a;if(typeof t.x!="string"){let x={instancePath:e+"/x",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[x]:s.push(x),a++}var R=h===a}else var R=!0;if(R)if(t.d!==void 0){let h=a;if(typeof t.d!="string"){let x={instancePath:e+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[x]:s.push(x),a++}var R=h===a}else var R=!0}}}}var B=k===a;if(B&&b)b=!1,A=[A,1];else{B&&(b=!0,A=1,P!==!0&&(P=P||{},P.kty=!0,P.crv=!0,P.x=!0,P.d=!0));let d=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let v;if(t.n===void 0&&(v="n")||t.e===void 0&&(v="e")){let x={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/required",keyword:"required",params:{missingProperty:v},message:"must have required property '"+v+"'"};s===null?s=[x]:s.push(x),a++}else{if(t.kty!==void 0){let x=a;if(t.kty!=="RSA"){let g={instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/kty/const",keyword:"const",params:{allowedValue:"RSA"},message:"must be equal to constant"};s===null?s=[g]:s.push(g),a++}var I=x===a}else var I=!0;if(I){if(t.n!==void 0){let x=a;if(typeof t.n!="string"){let f={instancePath:e+"/n",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/n/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[f]:s.push(f),a++}var I=x===a}else var I=!0;if(I){if(t.e!==void 0){let x=a;if(typeof t.e!="string"){let f={instancePath:e+"/e",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/e/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[f]:s.push(f),a++}var I=x===a}else var I=!0;if(I){if(t.d!==void 0){let x=a;if(typeof t.d!="string"){let f={instancePath:e+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[f]:s.push(f),a++}var I=x===a}else var I=!0;if(I){if(t.p!==void 0){let x=a;if(typeof t.p!="string"){let f={instancePath:e+"/p",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/p/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[f]:s.push(f),a++}var I=x===a}else var I=!0;if(I){if(t.q!==void 0){let x=a;if(typeof t.q!="string"){let f={instancePath:e+"/q",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/q/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[f]:s.push(f),a++}var I=x===a}else var I=!0;if(I){if(t.dp!==void 0){let x=a;if(typeof t.dp!="string"){let f={instancePath:e+"/dp",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/dp/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[f]:s.push(f),a++}var I=x===a}else var I=!0;if(I){if(t.dq!==void 0){let x=a;if(typeof t.dq!="string"){let f={instancePath:e+"/dq",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/dq/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[f]:s.push(f),a++}var I=x===a}else var I=!0;if(I){if(t.qi!==void 0){let x=a;if(typeof t.qi!="string"){let f={instancePath:e+"/qi",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/qi/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[f]:s.push(f),a++}var I=x===a}else var I=!0;if(I)if(t.oth!==void 0){let x=t.oth,g=a;if(!(x&&typeof x=="object"&&!Array.isArray(x))){let w={instancePath:e+"/oth",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/oth/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[w]:s.push(w),a++}var I=g===a}else var I=!0}}}}}}}}}}var B=d===a;if(B&&b)b=!1,A=[A,2];else{B&&(b=!0,A=2,P!==!0&&(P=P||{},P.kty=!0,P.n=!0,P.e=!0,P.d=!0,P.p=!0,P.q=!0,P.dp=!0,P.dq=!0,P.qi=!0,P.oth=!0));let v=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let g;if(t.k===void 0&&(g="k")){let f={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/required",keyword:"required",params:{missingProperty:g},message:"must have required property '"+g+"'"};s===null?s=[f]:s.push(f),a++}else{if(t.kty!==void 0){let f=a;if(t.kty!=="oct"){let w={instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/properties/kty/const",keyword:"const",params:{allowedValue:"oct"},message:"must be equal to constant"};s===null?s=[w]:s.push(w),a++}var q=f===a}else var q=!0;if(q)if(t.k!==void 0){let f=a;if(typeof t.k!="string"){let D={instancePath:e+"/k",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/properties/k/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[D]:s.push(D),a++}var q=f===a}else var q=!0}}var B=v===a;B&&b?(b=!1,A=[A,3]):B&&(b=!0,A=3,P!==!0&&(P=P||{},P.kty=!0,P.k=!0))}}if(b)a=p,s!==null&&(p?s.length=p:s=null);else{let d={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf",keyword:"oneOf",params:{passingSchemas:A},message:"must match exactly one schema in oneOf"};return s===null?s=[d]:s.push(d),a++,un.errors=s,!1}if(a===m)if(t&&typeof t=="object"&&!Array.isArray(t)){let d;if(t.kty===void 0&&(d="kty"))return un.errors=[{instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;if(P!==!0&&(P=P||{},P.alg=!0,P.kid=!0,P.kty=!0,P.crv=!0,P.use=!0,P.key_ops=!0,P.x5u=!0,P.x5c=!0,P.x5t=!0,P["x5t#S256"]=!0),t.alg!==void 0){let h=a;if(typeof t.alg!="string")return un.errors=[{instancePath:e+"/alg",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/alg/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=h===a}else var $=!0;if($){if(t.kid!==void 0){let h=a;if(typeof t.kid!="string")return un.errors=[{instancePath:e+"/kid",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/kid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=h===a}else var $=!0;if($){if(t.kty!==void 0){let h=t.kty,v=a;if(!(h==="EC"||h==="RSA"||h==="oct"||h==="OKP"))return un.errors=[{instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/kty/enum",keyword:"enum",params:{allowedValues:KZ.properties.kty.enum},message:"must be equal to one of the allowed values"}],!1;var $=v===a}else var $=!0;if($){if(t.crv!==void 0){let h=a;if(typeof t.crv!="string")return un.errors=[{instancePath:e+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=h===a}else var $=!0;if($){if(t.use!==void 0){let h=a;if(typeof t.use!="string")return un.errors=[{instancePath:e+"/use",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/use/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=h===a}else var $=!0;if($){if(t.key_ops!==void 0){let h=a;if(typeof t.key_ops!="string")return un.errors=[{instancePath:e+"/key_ops",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/key_ops/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=h===a}else var $=!0;if($){if(t.x5u!==void 0){let h=a;if(typeof t.x5u!="string")return un.errors=[{instancePath:e+"/x5u",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5u/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=h===a}else var $=!0;if($){if(t.x5c!==void 0){let h=a;if(typeof t.x5c!="string")return un.errors=[{instancePath:e+"/x5c",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5c/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=h===a}else var $=!0;if($){if(t.x5t!==void 0){let h=a;if(typeof t.x5t!="string")return un.errors=[{instancePath:e+"/x5t",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5t/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=h===a}else var $=!0;if($)if(t["x5t#S256"]!==void 0){let h=a;if(typeof t["x5t#S256"]!="string")return un.errors=[{instancePath:e+"/x5t#S256",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5t%23S256/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $=h===a}else var $=!0}}}}}}}}}else return un.errors=[{instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var U=m===a;if(U){let d=a,h=a,v=a,x=!1,g=a,f=a,w=!1,D=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let fe;if(t.d===void 0&&(fe="d")){let oe={};s===null?s=[oe]:s.push(oe),a++}}var F=D===a;if(w=w||F,w)a=f,s!==null&&(f?s.length=f:s=null);else{let fe={};s===null?s=[fe]:s.push(fe),a++}if(a===g)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.kty!==void 0&&t.kty!=="EC"){let fe={};s===null?s=[fe]:s.push(fe),a++}}else{let fe={};s===null?s=[fe]:s.push(fe),a++}var l=g===a;if(x=x||l,l){var L={};L.kty=!0}let T=a,C=a,z=!1,G=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let fe;if(t.d===void 0&&(fe="d")){let oe={};s===null?s=[oe]:s.push(oe),a++}}var W=G===a;if(z=z||W,z)a=C,s!==null&&(C?s.length=C:s=null);else{let fe={};s===null?s=[fe]:s.push(fe),a++}if(a===T)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.kty!==void 0&&t.kty!=="OKP"){let fe={};s===null?s=[fe]:s.push(fe),a++}}else{let fe={};s===null?s=[fe]:s.push(fe),a++}var l=T===a;x=x||l,l&&L!==!0&&(L=L||{},L.kty=!0);let V=a,Z=a,J=!1,X=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let fe;if(t.d===void 0&&(fe="d")){let oe={};s===null?s=[oe]:s.push(oe),a++}}var E=X===a;J=J||E;let se=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let fe;if(t.p===void 0&&(fe="p")){let oe={};s===null?s=[oe]:s.push(oe),a++}}var E=se===a;J=J||E;let Q=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let fe;if(t.q===void 0&&(fe="q")){let oe={};s===null?s=[oe]:s.push(oe),a++}}var E=Q===a;J=J||E;let te=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let fe;if(t.dp===void 0&&(fe="dp")){let oe={};s===null?s=[oe]:s.push(oe),a++}}var E=te===a;J=J||E;let de=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let fe;if(t.dq===void 0&&(fe="dq")){let oe={};s===null?s=[oe]:s.push(oe),a++}}var E=de===a;J=J||E;let ie=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let fe;if(t.qi===void 0&&(fe="qi")){let oe={};s===null?s=[oe]:s.push(oe),a++}}var E=ie===a;J=J||E;let ae=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let fe;if(t.oth===void 0&&(fe="oth")){let oe={};s===null?s=[oe]:s.push(oe),a++}}var E=ae===a;if(J=J||E,J)a=Z,s!==null&&(Z?s.length=Z:s=null);else{let fe={};s===null?s=[fe]:s.push(fe),a++}if(a===V)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.kty!==void 0){let fe=a;if(t.kty!=="RSA"){let oe={};s===null?s=[oe]:s.push(oe),a++}var c=fe===a}else var c=!0;if(c)if(t.oth!==void 0){let fe=t.oth,oe=a;if(!(fe&&typeof fe=="object"&&!Array.isArray(fe))){let Ke={};s===null?s=[Ke]:s.push(Ke),a++}var c=oe===a}else var c=!0}else{let fe={};s===null?s=[fe]:s.push(fe),a++}var l=V===a;if(x=x||l,l&&L!==!0&&(L=L||{},L.kty=!0,L.d=!0,L.p=!0,L.q=!0,L.dp=!0,L.dq=!0,L.qi=!0,L.oth=!0),x)a=v,s!==null&&(v?s.length=v:s=null);else{let fe={};s===null?s=[fe]:s.push(fe),a++}var y=h===a;if(y)return un.errors=[{instancePath:e,schemaPath:"#/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=d,s!==null&&(d?s.length=d:s=null)}return un.errors=s,u.props=P,a===0}un.evaluated={dynamicProps:!0,dynamicItems:!1};var WZ=Object.prototype.hasOwnProperty;function Xe(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=Xe.evaluated;u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0);let m=a,p=!1,b=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let T;if(t.contextId===void 0&&(T="contextId")){let C={instancePath:e,schemaPath:"#/anyOf/0/required",keyword:"required",params:{missingProperty:T},message:"must have required property '"+T+"'"};s===null?s=[C]:s.push(C),a++}else if(t.descriptor!==void 0){let C=t.descriptor;if(a===a)if(C&&typeof C=="object"&&!Array.isArray(C)){let G;if(C.protocol===void 0&&(G="protocol")||C.protocolPath===void 0&&(G="protocolPath")){let V={instancePath:e+"/descriptor",schemaPath:"#/anyOf/0/properties/descriptor/required",keyword:"required",params:{missingProperty:G},message:"must have required property '"+G+"'"};s===null?s=[V]:s.push(V),a++}}else{let G={instancePath:e+"/descriptor",schemaPath:"#/anyOf/0/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[G]:s.push(G),a++}}}var $=b===a;if(p=p||$,$){var A={};A.descriptor=!0}let M=a,S=a,P=a,k=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let T;if(t.contextId===void 0&&(T="contextId")){let C={};s===null?s=[C]:s.push(C),a++}}var R=k===a;if(R){let T={instancePath:e,schemaPath:"#/anyOf/1/allOf/0/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[T]:s.push(T),a++}else a=P,s!==null&&(P?s.length=P:s=null);var B=S===a;if(B){let T=a;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.descriptor!==void 0){let z=t.descriptor;if(!(z&&typeof z=="object"&&!Array.isArray(z))){let Z={instancePath:e+"/descriptor",schemaPath:"#/anyOf/1/allOf/1/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[Z]:s.push(Z),a++}let G=a,V=a;if(z&&typeof z=="object"&&!Array.isArray(z)){let Z;if(z.protocol===void 0&&(Z="protocol")){let J={};s===null?s=[J]:s.push(J),a++}}var I=V===a;if(I){let Z={instancePath:e+"/descriptor",schemaPath:"#/anyOf/1/allOf/1/properties/descriptor/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[Z]:s.push(Z),a++}else a=G,s!==null&&(G?s.length=G:s=null)}var B=T===a;if(B){let z=a;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.descriptor!==void 0){let V=t.descriptor;if(!(V&&typeof V=="object"&&!Array.isArray(V))){let X={instancePath:e+"/descriptor",schemaPath:"#/anyOf/1/allOf/2/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[X]:s.push(X),a++}let Z=a,J=a;if(V&&typeof V=="object"&&!Array.isArray(V)){let X;if(V.protocolPath===void 0&&(X="protocolPath")){let se={};s===null?s=[se]:s.push(se),a++}}var q=J===a;if(q){let X={instancePath:e+"/descriptor",schemaPath:"#/anyOf/1/allOf/2/properties/descriptor/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[X]:s.push(X),a++}else a=Z,s!==null&&(Z?s.length=Z:s=null)}var B=z===a}}var $=M===a;if(p=p||$,$&&A!==!0&&(A=A||{},A.descriptor=!0),p)a=m,s!==null&&(m?s.length=m:s=null);else{let T={instancePath:e,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[T]:s.push(T),a++,Xe.errors=s,!1}if(a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let T;if(t.descriptor===void 0&&(T="descriptor"))return Xe.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:T},message:"must have required property '"+T+"'"}],!1;if(A!==!0&&(A=A||{},A.recordId=!0,A.contextId=!0,A.attestation=!0,A.authorization=!0,A.encryption=!0,A.descriptor=!0),t.recordId!==void 0){let C=a;if(typeof t.recordId!="string")return Xe.errors=[{instancePath:e+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var U=C===a}else var U=!0;if(U){if(t.contextId!==void 0){let C=t.contextId,z=a;if(a===z)if(typeof C=="string"){if(!w4e.test(C))return Xe.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/pattern",keyword:"pattern",params:{pattern:"^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$"},message:'must match pattern "^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$"'}],!1}else return Xe.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var U=z===a}else var U=!0;if(U){if(t.attestation!==void 0){let C=a;ln(t.attestation,{instancePath:e+"/attestation",parentData:t,parentDataProperty:"attestation",rootData:i,dynamicAnchors:o})||(s=s===null?ln.errors:s.concat(ln.errors),a=s.length);var U=C===a}else var U=!0;if(U){if(t.authorization!==void 0){let C=a;fl(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?fl.errors:s.concat(fl.errors),a=s.length);var U=C===a}else var U=!0;if(U){if(t.encryption!==void 0){let C=t.encryption,z=a;if(a===z)if(C&&typeof C=="object"&&!Array.isArray(C)){let V;if(C.algorithm===void 0&&(V="algorithm")||C.initializationVector===void 0&&(V="initializationVector")||C.keyEncryption===void 0&&(V="keyEncryption"))return Xe.errors=[{instancePath:e+"/encryption",schemaPath:"#/properties/encryption/required",keyword:"required",params:{missingProperty:V},message:"must have required property '"+V+"'"}],!1;{let Z=a;for(let J in C)if(!(J==="algorithm"||J==="initializationVector"||J==="keyEncryption")){return Xe.errors=[{instancePath:e+"/encryption",schemaPath:"#/properties/encryption/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:J},message:"must NOT have additional properties"}],!1;break}if(Z===a){if(C.algorithm!==void 0){let J=C.algorithm,X=a;if(typeof J!="string")return Xe.errors=[{instancePath:e+"/encryption/algorithm",schemaPath:"#/properties/encryption/properties/algorithm/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(J!=="A256CTR")return Xe.errors=[{instancePath:e+"/encryption/algorithm",schemaPath:"#/properties/encryption/properties/algorithm/enum",keyword:"enum",params:{allowedValues:jp.properties.encryption.properties.algorithm.enum},message:"must be equal to one of the allowed values"}],!1;var F=X===a}else var F=!0;if(F){if(C.initializationVector!==void 0){let J=C.initializationVector,X=a;if(a===a)if(typeof J=="string"){if(!Ym.test(J))return Xe.errors=[{instancePath:e+"/encryption/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return Xe.errors=[{instancePath:e+"/encryption/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var F=X===a}else var F=!0;if(F)if(C.keyEncryption!==void 0){let J=C.keyEncryption,X=a;if(a===X)if(Array.isArray(J)){if(J.length<1)return Xe.errors=[{instancePath:e+"/encryption/keyEncryption",schemaPath:"#/properties/encryption/properties/keyEncryption/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var L=!0;let Q=J.length;for(let te=0;te<Q;te++){let de=J[te],ie=a;if(a===ie)if(de&&typeof de=="object"&&!Array.isArray(de)){let fe;if(de.rootKeyId===void 0&&(fe="rootKeyId")||de.derivationScheme===void 0&&(fe="derivationScheme")||de.algorithm===void 0&&(fe="algorithm")||de.encryptedKey===void 0&&(fe="encryptedKey")||de.initializationVector===void 0&&(fe="initializationVector")||de.ephemeralPublicKey===void 0&&(fe="ephemeralPublicKey")||de.messageAuthenticationCode===void 0&&(fe="messageAuthenticationCode"))return Xe.errors=[{instancePath:e+"/encryption/keyEncryption/"+te,schemaPath:"#/properties/encryption/properties/keyEncryption/items/required",keyword:"required",params:{missingProperty:fe},message:"must have required property '"+fe+"'"}],!1;{let oe=a;for(let ce in de)if(!(ce==="rootKeyId"||ce==="derivationScheme"||ce==="derivedPublicKey"||ce==="algorithm"||ce==="encryptedKey"||ce==="initializationVector"||ce==="ephemeralPublicKey"||ce==="messageAuthenticationCode")){return Xe.errors=[{instancePath:e+"/encryption/keyEncryption/"+te,schemaPath:"#/properties/encryption/properties/keyEncryption/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ce},message:"must NOT have additional properties"}],!1;break}if(oe===a){if(de.rootKeyId!==void 0){let ce=a;if(typeof de.rootKeyId!="string")return Xe.errors=[{instancePath:e+"/encryption/keyEncryption/"+te+"/rootKeyId",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/rootKeyId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var W=ce===a}else var W=!0;if(W){if(de.derivationScheme!==void 0){let ce=de.derivationScheme,Ke=a;if(typeof ce!="string")return Xe.errors=[{instancePath:e+"/encryption/keyEncryption/"+te+"/derivationScheme",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/derivationScheme/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(ce==="dataFormats"||ce==="protocolContext"||ce==="protocolPath"||ce==="schemas"))return Xe.errors=[{instancePath:e+"/encryption/keyEncryption/"+te+"/derivationScheme",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/derivationScheme/enum",keyword:"enum",params:{allowedValues:jp.properties.encryption.properties.keyEncryption.items.properties.derivationScheme.enum},message:"must be equal to one of the allowed values"}],!1;var W=Ke===a}else var W=!0;if(W){if(de.derivedPublicKey!==void 0){let ce=a;un(de.derivedPublicKey,{instancePath:e+"/encryption/keyEncryption/"+te+"/derivedPublicKey",parentData:de,parentDataProperty:"derivedPublicKey",rootData:i,dynamicAnchors:o})||(s=s===null?un.errors:s.concat(un.errors),a=s.length);var W=ce===a}else var W=!0;if(W){if(de.algorithm!==void 0){let ce=de.algorithm,Ke=a;if(typeof ce!="string")return Xe.errors=[{instancePath:e+"/encryption/keyEncryption/"+te+"/algorithm",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/algorithm/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(ce!=="ECIES-ES256K")return Xe.errors=[{instancePath:e+"/encryption/keyEncryption/"+te+"/algorithm",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/algorithm/enum",keyword:"enum",params:{allowedValues:jp.properties.encryption.properties.keyEncryption.items.properties.algorithm.enum},message:"must be equal to one of the allowed values"}],!1;var W=Ke===a}else var W=!0;if(W){if(de.encryptedKey!==void 0){let ce=de.encryptedKey,Ke=a;if(a===a)if(typeof ce=="string"){if(!Ym.test(ce))return Xe.errors=[{instancePath:e+"/encryption/keyEncryption/"+te+"/encryptedKey",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return Xe.errors=[{instancePath:e+"/encryption/keyEncryption/"+te+"/encryptedKey",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var W=Ke===a}else var W=!0;if(W){if(de.initializationVector!==void 0){let ce=de.initializationVector,Ke=a;if(a===a)if(typeof ce=="string"){if(!Ym.test(ce))return Xe.errors=[{instancePath:e+"/encryption/keyEncryption/"+te+"/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return Xe.errors=[{instancePath:e+"/encryption/keyEncryption/"+te+"/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var W=Ke===a}else var W=!0;if(W){if(de.ephemeralPublicKey!==void 0){let ce=a;un(de.ephemeralPublicKey,{instancePath:e+"/encryption/keyEncryption/"+te+"/ephemeralPublicKey",parentData:de,parentDataProperty:"ephemeralPublicKey",rootData:i,dynamicAnchors:o})||(s=s===null?un.errors:s.concat(un.errors),a=s.length);var W=ce===a}else var W=!0;if(W)if(de.messageAuthenticationCode!==void 0){let ce=de.messageAuthenticationCode,Ke=a;if(a===a)if(typeof ce=="string"){if(!Ym.test(ce))return Xe.errors=[{instancePath:e+"/encryption/keyEncryption/"+te+"/messageAuthenticationCode",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return Xe.errors=[{instancePath:e+"/encryption/keyEncryption/"+te+"/messageAuthenticationCode",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var W=Ke===a}else var W=!0}}}}}}}}}else return Xe.errors=[{instancePath:e+"/encryption/keyEncryption/"+te,schemaPath:"#/properties/encryption/properties/keyEncryption/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var L=ie===a;if(!L)break}}}else return Xe.errors=[{instancePath:e+"/encryption/keyEncryption",schemaPath:"#/properties/encryption/properties/keyEncryption/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var F=X===a}else var F=!0}}}}else return Xe.errors=[{instancePath:e+"/encryption",schemaPath:"#/properties/encryption/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var U=z===a}else var U=!0;if(U)if(t.descriptor!==void 0){let C=t.descriptor,z=a,G=a,V=!1,Z=a;if(C&&typeof C=="object"&&!Array.isArray(C)){let fe;if(C.published===void 0&&(fe="published")||C.datePublished===void 0&&(fe="datePublished")){let oe={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/required",keyword:"required",params:{missingProperty:fe},message:"must have required property '"+fe+"'"};s===null?s=[oe]:s.push(oe),a++}else if(C.published!==void 0){let oe=C.published;if(typeof oe!="boolean"){let ce={instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[ce]:s.push(ce),a++}if(oe!==!0){let ce={instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/properties/published/enum",keyword:"enum",params:{allowedValues:jp.properties.descriptor.allOf[0].anyOf[0].properties.published.enum},message:"must be equal to one of the allowed values"};s===null?s=[ce]:s.push(ce),a++}}}var h=Z===a;if(V=V||h,h){var E={};E.published=!0}let J=a,X=a,se=a;if(C&&typeof C=="object"&&!Array.isArray(C)){let fe;if(C.datePublished===void 0&&(fe="datePublished")){let oe={};s===null?s=[oe]:s.push(oe),a++}}var c=se===a;if(c){let fe={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[fe]:s.push(fe),a++}else a=X,s!==null&&(X?s.length=X:s=null);if(a===J&&C&&typeof C=="object"&&!Array.isArray(C)&&C.published!==void 0){let fe=C.published;if(typeof fe!="boolean"){let oe={instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[oe]:s.push(oe),a++}if(fe!==!1){let oe={instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/properties/published/enum",keyword:"enum",params:{allowedValues:jp.properties.descriptor.allOf[0].anyOf[1].properties.published.enum},message:"must be equal to one of the allowed values"};s===null?s=[oe]:s.push(oe),a++}}var h=J===a;V=V||h,h&&E!==!0&&(E=E||{},E.published=!0);let Q=a,te=a,de=a,ie=a;if(C&&typeof C=="object"&&!Array.isArray(C)){let fe;if(C.published===void 0&&(fe="published")){let oe={};s===null?s=[oe]:s.push(oe),a++}}var l=ie===a;if(l){let fe={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/2/allOf/0/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[fe]:s.push(fe),a++}else a=de,s!==null&&(de?s.length=de:s=null);var y=te===a;if(y){let fe=a,oe=a,ce=a;if(C&&typeof C=="object"&&!Array.isArray(C)){let pe;if(C.datePublished===void 0&&(pe="datePublished")){let Me={};s===null?s=[Me]:s.push(Me),a++}}var d=ce===a;if(d){let pe={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/2/allOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[pe]:s.push(pe),a++}else a=oe,s!==null&&(oe?s.length=oe:s=null);var y=fe===a}var h=Q===a;if(V=V||h,V)a=G,s!==null&&(G?s.length=G:s=null);else{let fe={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[fe]:s.push(fe),a++,Xe.errors=s,!1}if(a===z)if(C&&typeof C=="object"&&!Array.isArray(C)){let fe;if(C.interface===void 0&&(fe="interface")||C.method===void 0&&(fe="method")||C.dataCid===void 0&&(fe="dataCid")||C.dataSize===void 0&&(fe="dataSize")||C.dateCreated===void 0&&(fe="dateCreated")||C.messageTimestamp===void 0&&(fe="messageTimestamp")||C.dataFormat===void 0&&(fe="dataFormat"))return Xe.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:fe},message:"must have required property '"+fe+"'"}],!1;{let oe=a;for(let ce in C)if(!WZ.call(jp.properties.descriptor.properties,ce)){return Xe.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ce},message:"must NOT have additional properties"}],!1;break}if(oe===a){let ce;if(C.parentId!==void 0&&C.protocol===void 0&&(ce="protocol"))return Xe.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/dependencies",keyword:"dependencies",params:{property:"parentId",missingProperty:ce,depsCount:1,deps:"protocol"},message:"must have property protocol when property parentId is present"}],!1;if(C.interface!==void 0){let Ke=C.interface,pe=a;if(typeof Ke!="string")return Xe.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Ke!=="Records")return Xe.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:jp.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var v=pe===a}else var v=!0;if(v){if(C.method!==void 0){let Ke=C.method,pe=a;if(typeof Ke!="string")return Xe.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Ke!=="Write")return Xe.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:jp.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var v=pe===a}else var v=!0;if(v){if(C.recipient!==void 0){let Ke=C.recipient,pe=a;if(a===a)if(typeof Ke=="string"){if(!qp.test(Ke))return Xe.errors=[{instancePath:e+"/descriptor/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return Xe.errors=[{instancePath:e+"/descriptor/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=pe===a}else var v=!0;if(v){if(C.protocol!==void 0){let Ke=a;if(typeof C.protocol!="string")return Xe.errors=[{instancePath:e+"/descriptor/protocol",schemaPath:"#/properties/descriptor/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=Ke===a}else var v=!0;if(v){if(C.protocolPath!==void 0){let Ke=C.protocolPath,pe=a;if(a===pe)if(typeof Ke=="string"){if(!_4e.test(Ke))return Xe.errors=[{instancePath:e+"/descriptor/protocolPath",schemaPath:"#/properties/descriptor/properties/protocolPath/pattern",keyword:"pattern",params:{pattern:"^[a-zA-Z]+(/[a-zA-Z]+)*$"},message:'must match pattern "^[a-zA-Z]+(/[a-zA-Z]+)*$"'}],!1}else return Xe.errors=[{instancePath:e+"/descriptor/protocolPath",schemaPath:"#/properties/descriptor/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=pe===a}else var v=!0;if(v){if(C.schema!==void 0){let Ke=a;if(typeof C.schema!="string")return Xe.errors=[{instancePath:e+"/descriptor/schema",schemaPath:"#/properties/descriptor/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=Ke===a}else var v=!0;if(v){if(C.tags!==void 0){let Ke=C.tags,pe=a;if(a===pe)if(Ke&&typeof Ke=="object"&&!Array.isArray(Ke)){if(Object.keys(Ke).length>10)return Xe.errors=[{instancePath:e+"/descriptor/tags",schemaPath:"#/properties/descriptor/properties/tags/maxProperties",keyword:"maxProperties",params:{limit:10},message:"must NOT have more than 10 properties"}],!1;if(Object.keys(Ke).length<1)return Xe.errors=[{instancePath:e+"/descriptor/tags",schemaPath:"#/properties/descriptor/properties/tags/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;for(let it in Ke){let we=Ke[it],Ae=a,er=a,me=!1,he=null,mt=a;if(typeof we!="string"){let le={instancePath:e+"/descriptor/tags/"+it.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[le]:s.push(le),a++}var x=mt===a;x&&(me=!0,he=0);let ye=a;if(!(typeof we=="number"&&isFinite(we))){let le={instancePath:e+"/descriptor/tags/"+it.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/1/type",keyword:"type",params:{type:"number"},message:"must be number"};s===null?s=[le]:s.push(le),a++}var x=ye===a;if(x&&me)me=!1,he=[he,1];else{x&&(me=!0,he=1);let le=a;if(typeof we!="boolean"){let _e={instancePath:e+"/descriptor/tags/"+it.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[_e]:s.push(_e),a++}var x=le===a;if(x&&me)me=!1,he=[he,2];else{x&&(me=!0,he=2);let _e=a;if(a===_e)if(Array.isArray(we))if(we.length>10){let Ht={instancePath:e+"/descriptor/tags/"+it.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/maxItems",keyword:"maxItems",params:{limit:10},message:"must NOT have more than 10 items"};s===null?s=[Ht]:s.push(Ht),a++}else if(we.length<1){let Ht={instancePath:e+"/descriptor/tags/"+it.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};s===null?s=[Ht]:s.push(Ht),a++}else{var g=!0;let Ht=we.length;for(let Pe=0;Pe<Ht;Pe++){let Se=a;if(typeof we[Pe]!="string"){let Te={instancePath:e+"/descriptor/tags/"+it.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+Pe,schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/items/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Te]:s.push(Te),a++}var g=Se===a;if(!g)break}}else{let Ht={instancePath:e+"/descriptor/tags/"+it.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[Ht]:s.push(Ht),a++}var x=_e===a;if(x&&me)me=!1,he=[he,3];else{if(x){me=!0,he=3;var f=!0}let Ht=a;if(a===Ht)if(Array.isArray(we))if(we.length>10){let Se={instancePath:e+"/descriptor/tags/"+it.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/maxItems",keyword:"maxItems",params:{limit:10},message:"must NOT have more than 10 items"};s===null?s=[Se]:s.push(Se),a++}else if(we.length<1){let Se={instancePath:e+"/descriptor/tags/"+it.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};s===null?s=[Se]:s.push(Se),a++}else{var w=!0;let Se=we.length;for(let Pn=0;Pn<Se;Pn++){let Te=we[Pn],Ie=a;if(!(typeof Te=="number"&&isFinite(Te))){let Re={instancePath:e+"/descriptor/tags/"+it.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+Pn,schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/items/type",keyword:"type",params:{type:"number"},message:"must be number"};s===null?s=[Re]:s.push(Re),a++}var w=Ie===a;if(!w)break}}else{let Se={instancePath:e+"/descriptor/tags/"+it.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[Se]:s.push(Se),a++}var x=Ht===a;x&&me?(me=!1,he=[he,4]):x&&(me=!0,he=4,f!==!0&&(f=!0))}}}if(me)a=er,s!==null&&(er?s.length=er:s=null);else{let le={instancePath:e+"/descriptor/tags/"+it.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf",keyword:"oneOf",params:{passingSchemas:he},message:"must match exactly one schema in oneOf"};return s===null?s=[le]:s.push(le),a++,Xe.errors=s,!1}var D=Ae===a;if(!D)break}}else return Xe.errors=[{instancePath:e+"/descriptor/tags",schemaPath:"#/properties/descriptor/properties/tags/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var v=pe===a}else var v=!0;if(v){if(C.parentId!==void 0){let Ke=a;if(typeof C.parentId!="string")return Xe.errors=[{instancePath:e+"/descriptor/parentId",schemaPath:"#/properties/descriptor/properties/parentId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=Ke===a}else var v=!0;if(v){if(C.dataCid!==void 0){let Ke=a;if(typeof C.dataCid!="string")return Xe.errors=[{instancePath:e+"/descriptor/dataCid",schemaPath:"#/properties/descriptor/properties/dataCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=Ke===a}else var v=!0;if(v){if(C.dataSize!==void 0){let Ke=C.dataSize,pe=a;if(!(typeof Ke=="number"&&isFinite(Ke)))return Xe.errors=[{instancePath:e+"/descriptor/dataSize",schemaPath:"#/properties/descriptor/properties/dataSize/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var v=pe===a}else var v=!0;if(v){if(C.dateCreated!==void 0){let Ke=C.dateCreated,pe=a;if(a===a)if(typeof Ke=="string"){if(!so.test(Ke))return Xe.errors=[{instancePath:e+"/descriptor/dateCreated",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Xe.errors=[{instancePath:e+"/descriptor/dateCreated",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=pe===a}else var v=!0;if(v){if(C.messageTimestamp!==void 0){let Ke=C.messageTimestamp,pe=a;if(a===a)if(typeof Ke=="string"){if(!so.test(Ke))return Xe.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Xe.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=pe===a}else var v=!0;if(v){if(C.published!==void 0){let Ke=a;if(typeof C.published!="boolean")return Xe.errors=[{instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var v=Ke===a}else var v=!0;if(v){if(C.datePublished!==void 0){let Ke=C.datePublished,pe=a;if(a===a)if(typeof Ke=="string"){if(!so.test(Ke))return Xe.errors=[{instancePath:e+"/descriptor/datePublished",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Xe.errors=[{instancePath:e+"/descriptor/datePublished",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=pe===a}else var v=!0;if(v)if(C.dataFormat!==void 0){let Ke=a;if(typeof C.dataFormat!="string")return Xe.errors=[{instancePath:e+"/descriptor/dataFormat",schemaPath:"#/properties/descriptor/properties/dataFormat/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=Ke===a}else var v=!0}}}}}}}}}}}}}}}}else return Xe.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var U=z===a}else var U=!0}}}}}else return Xe.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Xe.errors=s,u.props=A,a===0}Xe.evaluated={dynamicProps:!0,dynamicItems:!1};function Hc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=Hc.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),!Xe(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:i,dynamicAnchors:o}))s=s===null?Xe.errors:s.concat(Xe.errors),a=s.length;else var m=Xe.evaluated.props;if(a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let b;if(t.recordId===void 0&&(b="recordId")||t.authorization===void 0&&(b="authorization")||t.encodedData===void 0&&(b="encodedData"))return Hc.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:b},message:"must have required property '"+b+"'"}],!1;if(m!==!0&&(m=m||{},m.encodedData=!0),t.encodedData!==void 0){let A=a;if(typeof t.encodedData!="string")return Hc.errors=[{instancePath:e+"/encodedData",schemaPath:"#/properties/encodedData/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=A===a}else var p=!0;if(p&&m!==!0){for(let A in t)if(!m||!m[A]){return Hc.errors=[{instancePath:e,schemaPath:"#/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty:A},message:"must NOT have unevaluated properties"}],!1;break}}}else return Hc.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Hc.errors=s,a===0}Hc.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function Lo(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=Lo.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let p=a;for(let b in t)if(!(b==="signature"||b==="authorDelegatedGrant")){return Lo.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:b},message:"must NOT have additional properties"}],!1;break}if(p===a){if(t.signature!==void 0){let b=a;ln(t.signature,{instancePath:e+"/signature",parentData:t,parentDataProperty:"signature",rootData:i,dynamicAnchors:o})||(s=s===null?ln.errors:s.concat(ln.errors),a=s.length);var m=b===a}else var m=!0;if(m)if(t.authorDelegatedGrant!==void 0){let b=a;Hc(t.authorDelegatedGrant,{instancePath:e+"/authorDelegatedGrant",parentData:t,parentDataProperty:"authorDelegatedGrant",rootData:i,dynamicAnchors:o})||(s=s===null?Hc.errors:s.concat(Hc.errors),a=s.length);var m=b===a}else var m=!0}}else return Lo.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Lo.errors=s,a===0}Lo.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var x4e=fl,E4e=$o,kZ={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-delete.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","recordId","prune"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Delete"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},recordId:{type:"string"},prune:{type:"boolean"}}}}};function $o(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=$o.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let b;if(t.authorization===void 0&&(b="authorization")||t.descriptor===void 0&&(b="descriptor"))return $o.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:b},message:"must have required property '"+b+"'"}],!1;{let A=a;for(let M in t)if(!(M==="authorization"||M==="descriptor")){return $o.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:M},message:"must NOT have additional properties"}],!1;break}if(A===a){if(t.authorization!==void 0){let M=a;Lo(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?Lo.errors:s.concat(Lo.errors),a=s.length);var m=M===a}else var m=!0;if(m)if(t.descriptor!==void 0){let M=t.descriptor,S=a;if(a===S)if(M&&typeof M=="object"&&!Array.isArray(M)){let k;if(M.interface===void 0&&(k="interface")||M.method===void 0&&(k="method")||M.messageTimestamp===void 0&&(k="messageTimestamp")||M.recordId===void 0&&(k="recordId")||M.prune===void 0&&(k="prune"))return $o.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:k},message:"must have required property '"+k+"'"}],!1;{let R=a;for(let B in M)if(!(B==="interface"||B==="method"||B==="messageTimestamp"||B==="recordId"||B==="prune")){return $o.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:B},message:"must NOT have additional properties"}],!1;break}if(R===a){if(M.interface!==void 0){let B=M.interface,I=a;if(typeof B!="string")return $o.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(B!=="Records")return $o.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:kZ.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var p=I===a}else var p=!0;if(p){if(M.method!==void 0){let B=M.method,I=a;if(typeof B!="string")return $o.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(B!=="Delete")return $o.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:kZ.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var p=I===a}else var p=!0;if(p){if(M.messageTimestamp!==void 0){let B=M.messageTimestamp,I=a;if(a===a)if(typeof B=="string"){if(!so.test(B))return $o.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return $o.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=I===a}else var p=!0;if(p){if(M.recordId!==void 0){let B=a;if(typeof M.recordId!="string")return $o.errors=[{instancePath:e+"/descriptor/recordId",schemaPath:"#/properties/descriptor/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=B===a}else var p=!0;if(p)if(M.prune!==void 0){let B=a;if(typeof M.prune!="boolean")return $o.errors=[{instancePath:e+"/descriptor/prune",schemaPath:"#/properties/descriptor/properties/prune/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var p=B===a}else var p=!0}}}}}}else return $o.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===a}else var m=!0}}}else return $o.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return $o.errors=s,a===0}$o.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var S4e=bn,q7={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-query.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"},pagination:{type:"object",additionalProperties:!1,properties:{limit:{type:"number",minimum:1},cursor:{$ref:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json"}}},dateSort:{enum:["createdAscending","createdDescending","publishedAscending","publishedDescending"],type:"string"}}}}},L7={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json",type:"object",minProperties:1,additionalProperties:!1,required:["messageCid","value"],properties:{messageCid:{type:"string"},value:{type:["string","number"]}}},OZ={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-filter.json",type:"object",minProperties:1,additionalProperties:!1,properties:{protocol:{type:"string"},protocolPath:{type:"string"},author:{oneOf:[{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},{type:"array",items:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"}}]},attester:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},recipient:{oneOf:[{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},{type:"array",items:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"}}]},contextId:{type:"string"},schema:{type:"string"},tags:{type:"object",minProperties:1,additionalProperties:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"object",minProperties:1,additionalProperties:!1,properties:{startsWith:{type:"string"}}},{$ref:"https://identity.foundation/dwn/json-schemas/string-range-filter.json"},{$ref:"https://identity.foundation/dwn/json-schemas/number-range-filter.json"}]}},recordId:{type:"string"},parentId:{type:"string"},published:{type:"boolean"},dataFormat:{type:"string"},dataSize:{$ref:"https://identity.foundation/dwn/json-schemas/number-range-filter.json"},dataCid:{type:"string"},dateCreated:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}},datePublished:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}},dateUpdated:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}}},dependencies:{datePublished:{oneOf:[{properties:{published:{enum:[!0]}},required:["published"]},{not:{required:["published"]}}]}}};function st(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=st.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(Object.keys(t).length<1)return st.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let V=a;for(let Z in t)if(!WZ.call(OZ.properties,Z)){return st.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Z},message:"must NOT have additional properties"}],!1;break}if(V===a){if(t.datePublished!==void 0){let Z=a,J=a,X=!1,se=null,Q=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let ae;if(t.published===void 0&&(ae="published")){let fe={instancePath:e,schemaPath:"#/dependencies/datePublished/oneOf/0/required",keyword:"required",params:{missingProperty:ae},message:"must have required property '"+ae+"'"};s===null?s=[fe]:s.push(fe),a++}else if(t.published!==void 0&&t.published!==!0){let fe={instancePath:e+"/published",schemaPath:"#/dependencies/datePublished/oneOf/0/properties/published/enum",keyword:"enum",params:{allowedValues:OZ.dependencies.datePublished.oneOf[0].properties.published.enum},message:"must be equal to one of the allowed values"};s===null?s=[fe]:s.push(fe),a++}}var b=Q===a;if(b){X=!0,se=0;var m={};m.published=!0}let te=a,de=a,ie=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let ae;if(t.published===void 0&&(ae="published")){let fe={};s===null?s=[fe]:s.push(fe),a++}}var p=ie===a;if(p){let ae={instancePath:e,schemaPath:"#/dependencies/datePublished/oneOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[ae]:s.push(ae),a++}else a=de,s!==null&&(de?s.length=de:s=null);var b=te===a;if(b&&X?(X=!1,se=[se,1]):b&&(X=!0,se=1),X)a=J,s!==null&&(J?s.length=J:s=null);else{let ae={instancePath:e,schemaPath:"#/dependencies/datePublished/oneOf",keyword:"oneOf",params:{passingSchemas:se},message:"must match exactly one schema in oneOf"};return s===null?s=[ae]:s.push(ae),a++,st.errors=s,!1}var A=Z===a}else var A=!0;if(A){if(t.protocol!==void 0){let Z=a;if(typeof t.protocol!="string")return st.errors=[{instancePath:e+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=Z===a}else var M=!0;if(M){if(t.protocolPath!==void 0){let Z=a;if(typeof t.protocolPath!="string")return st.errors=[{instancePath:e+"/protocolPath",schemaPath:"#/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=Z===a}else var M=!0;if(M){if(t.author!==void 0){let Z=t.author,J=a,X=a,se=!1,Q=null,te=a;if(a===a)if(typeof Z=="string"){if(!qp.test(Z)){let fe={instancePath:e+"/author",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'};s===null?s=[fe]:s.push(fe),a++}}else{let fe={instancePath:e+"/author",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[fe]:s.push(fe),a++}var P=te===a;P&&(se=!0,Q=0);let ie=a;if(a===ie)if(Array.isArray(Z)){var S=!0;let fe=Z.length;for(let oe=0;oe<fe;oe++){let ce=Z[oe],Ke=a;if(a===a)if(typeof ce=="string"){if(!qp.test(ce)){let it={instancePath:e+"/author/"+oe,schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'};s===null?s=[it]:s.push(it),a++}}else{let it={instancePath:e+"/author/"+oe,schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[it]:s.push(it),a++}var S=Ke===a;if(!S)break}}else{let fe={instancePath:e+"/author",schemaPath:"#/properties/author/oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[fe]:s.push(fe),a++}var P=ie===a;if(P&&se?(se=!1,Q=[Q,1]):P&&(se=!0,Q=1),se)a=X,s!==null&&(X?s.length=X:s=null);else{let fe={instancePath:e+"/author",schemaPath:"#/properties/author/oneOf",keyword:"oneOf",params:{passingSchemas:Q},message:"must match exactly one schema in oneOf"};return s===null?s=[fe]:s.push(fe),a++,st.errors=s,!1}var M=J===a}else var M=!0;if(M){if(t.attester!==void 0){let Z=t.attester,J=a;if(a===a)if(typeof Z=="string"){if(!qp.test(Z))return st.errors=[{instancePath:e+"/attester",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return st.errors=[{instancePath:e+"/attester",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=J===a}else var M=!0;if(M){if(t.recipient!==void 0){let Z=t.recipient,J=a,X=a,se=!1,Q=null,te=a;if(a===a)if(typeof Z=="string"){if(!qp.test(Z)){let fe={instancePath:e+"/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'};s===null?s=[fe]:s.push(fe),a++}}else{let fe={instancePath:e+"/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[fe]:s.push(fe),a++}var R=te===a;R&&(se=!0,Q=0);let ie=a;if(a===ie)if(Array.isArray(Z)){var k=!0;let fe=Z.length;for(let oe=0;oe<fe;oe++){let ce=Z[oe],Ke=a;if(a===a)if(typeof ce=="string"){if(!qp.test(ce)){let it={instancePath:e+"/recipient/"+oe,schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'};s===null?s=[it]:s.push(it),a++}}else{let it={instancePath:e+"/recipient/"+oe,schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[it]:s.push(it),a++}var k=Ke===a;if(!k)break}}else{let fe={instancePath:e+"/recipient",schemaPath:"#/properties/recipient/oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[fe]:s.push(fe),a++}var R=ie===a;if(R&&se?(se=!1,Q=[Q,1]):R&&(se=!0,Q=1),se)a=X,s!==null&&(X?s.length=X:s=null);else{let fe={instancePath:e+"/recipient",schemaPath:"#/properties/recipient/oneOf",keyword:"oneOf",params:{passingSchemas:Q},message:"must match exactly one schema in oneOf"};return s===null?s=[fe]:s.push(fe),a++,st.errors=s,!1}var M=J===a}else var M=!0;if(M){if(t.contextId!==void 0){let Z=a;if(typeof t.contextId!="string")return st.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=Z===a}else var M=!0;if(M){if(t.schema!==void 0){let Z=a;if(typeof t.schema!="string")return st.errors=[{instancePath:e+"/schema",schemaPath:"#/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=Z===a}else var M=!0;if(M){if(t.tags!==void 0){let Z=t.tags,J=a;if(a===J)if(Z&&typeof Z=="object"&&!Array.isArray(Z)){if(Object.keys(Z).length<1)return st.errors=[{instancePath:e+"/tags",schemaPath:"#/properties/tags/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;for(let se in Z){let Q=Z[se],te=a,de=a,ie=!1,ae=null,fe=a;if(typeof Q!="string"){let ce={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[ce]:s.push(ce),a++}var B=fe===a;B&&(ie=!0,ae=0);let oe=a;if(!(typeof Q=="number"&&isFinite(Q))){let ce={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/1/type",keyword:"type",params:{type:"number"},message:"must be number"};s===null?s=[ce]:s.push(ce),a++}var B=oe===a;if(B&&ie)ie=!1,ae=[ae,1];else{B&&(ie=!0,ae=1);let ce=a;if(typeof Q!="boolean"){let pe={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[pe]:s.push(pe),a++}var B=ce===a;if(B&&ie)ie=!1,ae=[ae,2];else{B&&(ie=!0,ae=2);let pe=a;if(a===pe)if(Q&&typeof Q=="object"&&!Array.isArray(Q))if(Object.keys(Q).length<1){let it={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/3/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};s===null?s=[it]:s.push(it),a++}else{let it=a;for(let we in Q)if(we!=="startsWith"){let Ae={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/3/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:we},message:"must NOT have additional properties"};s===null?s=[Ae]:s.push(Ae),a++;break}if(it===a&&Q.startsWith!==void 0&&typeof Q.startsWith!="string"){let we={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1")+"/startsWith",schemaPath:"#/properties/tags/additionalProperties/oneOf/3/properties/startsWith/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[we]:s.push(we),a++}}else{let it={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/3/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[it]:s.push(it),a++}var B=pe===a;if(B&&ie)ie=!1,ae=[ae,3];else{if(B){ie=!0,ae=3;var I=!0}let it=a;if(a===a)if(Q&&typeof Q=="object"&&!Array.isArray(Q))if(Object.keys(Q).length<1){let er={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};s===null?s=[er]:s.push(er),a++}else{let er=a;for(let me in Q)if(!(me==="gt"||me==="gte"||me==="lt"||me==="lte")){let he={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:me},message:"must NOT have additional properties"};s===null?s=[he]:s.push(he),a++;break}if(er===a){if(Q.gt!==void 0){let me=a,he=a,mt=a;if(Q&&typeof Q=="object"&&!Array.isArray(Q)){let ye;if(Q.gte===void 0&&(ye="gte")){let le={};s===null?s=[le]:s.push(le),a++}}var q=mt===a;if(q){let ye={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[ye]:s.push(ye),a++}else a=he,s!==null&&(he?s.length=he:s=null);var $=me===a}else var $=!0;if($){if(Q.gte!==void 0){let me=a,he=a,mt=a;if(Q&&typeof Q=="object"&&!Array.isArray(Q)){let le;if(Q.gt===void 0&&(le="gt")){let kt={};s===null?s=[kt]:s.push(kt),a++}}var U=mt===a;if(U){let le={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[le]:s.push(le),a++}else a=he,s!==null&&(he?s.length=he:s=null);var $=me===a}else var $=!0;if($){if(Q.lt!==void 0){let me=a,he=a,mt=a;if(Q&&typeof Q=="object"&&!Array.isArray(Q)){let le;if(Q.lte===void 0&&(le="lte")){let kt={};s===null?s=[kt]:s.push(kt),a++}}var F=mt===a;if(F){let le={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[le]:s.push(le),a++}else a=he,s!==null&&(he?s.length=he:s=null);var $=me===a}else var $=!0;if($){if(Q.lte!==void 0){let me=a,he=a,mt=a;if(Q&&typeof Q=="object"&&!Array.isArray(Q)){let le;if(Q.lt===void 0&&(le="lt")){let kt={};s===null?s=[kt]:s.push(kt),a++}}var L=mt===a;if(L){let le={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[le]:s.push(le),a++}else a=he,s!==null&&(he?s.length=he:s=null);var $=me===a}else var $=!0;if($){if(Q.gt!==void 0){let me=a;if(typeof Q.gt!="string"){let he={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1")+"/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/gt/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[he]:s.push(he),a++}var W=me===a}else var W=!0;if(W){if(Q.gte!==void 0){let me=a;if(typeof Q.gte!="string"){let mt={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1")+"/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/gte/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[mt]:s.push(mt),a++}var W=me===a}else var W=!0;if(W){if(Q.lt!==void 0){let me=a;if(typeof Q.lt!="string"){let mt={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1")+"/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/lt/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[mt]:s.push(mt),a++}var W=me===a}else var W=!0;if(W)if(Q.lte!==void 0){let me=a;if(typeof Q.lte!="string"){let mt={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1")+"/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/lte/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[mt]:s.push(mt),a++}var W=me===a}else var W=!0}}}}}}}}else{let er={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[er]:s.push(er),a++}var B=it===a;if(B&&ie)ie=!1,ae=[ae,4];else{B&&(ie=!0,ae=4,I!==!0&&(I=!0));let er=a;if(a===a)if(Q&&typeof Q=="object"&&!Array.isArray(Q))if(Object.keys(Q).length<1){let mt={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};s===null?s=[mt]:s.push(mt),a++}else{let mt=a;for(let ye in Q)if(!(ye==="gt"||ye==="gte"||ye==="lt"||ye==="lte")){let le={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ye},message:"must NOT have additional properties"};s===null?s=[le]:s.push(le),a++;break}if(mt===a){if(Q.gt!==void 0){let ye=a,le=a,kt=a;if(Q&&typeof Q=="object"&&!Array.isArray(Q)){let _e;if(Q.gte===void 0&&(_e="gte")){let Ee={};s===null?s=[Ee]:s.push(Ee),a++}}var E=kt===a;if(E){let _e={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[_e]:s.push(_e),a++}else a=le,s!==null&&(le?s.length=le:s=null);var c=ye===a}else var c=!0;if(c){if(Q.gte!==void 0){let ye=a,le=a,kt=a;if(Q&&typeof Q=="object"&&!Array.isArray(Q)){let Ee;if(Q.gt===void 0&&(Ee="gt")){let Ht={};s===null?s=[Ht]:s.push(Ht),a++}}var l=kt===a;if(l){let Ee={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[Ee]:s.push(Ee),a++}else a=le,s!==null&&(le?s.length=le:s=null);var c=ye===a}else var c=!0;if(c){if(Q.lt!==void 0){let ye=a,le=a,kt=a;if(Q&&typeof Q=="object"&&!Array.isArray(Q)){let Ee;if(Q.lte===void 0&&(Ee="lte")){let Ht={};s===null?s=[Ht]:s.push(Ht),a++}}var y=kt===a;if(y){let Ee={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[Ee]:s.push(Ee),a++}else a=le,s!==null&&(le?s.length=le:s=null);var c=ye===a}else var c=!0;if(c){if(Q.lte!==void 0){let ye=a,le=a,kt=a;if(Q&&typeof Q=="object"&&!Array.isArray(Q)){let Ee;if(Q.lt===void 0&&(Ee="lt")){let Ht={};s===null?s=[Ht]:s.push(Ht),a++}}var d=kt===a;if(d){let Ee={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"};s===null?s=[Ee]:s.push(Ee),a++}else a=le,s!==null&&(le?s.length=le:s=null);var c=ye===a}else var c=!0;if(c){if(Q.gt!==void 0){let ye=Q.gt,le=a;if(!(typeof ye=="number"&&isFinite(ye))){let kt={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1")+"/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"};s===null?s=[kt]:s.push(kt),a++}var h=le===a}else var h=!0;if(h){if(Q.gte!==void 0){let ye=Q.gte,le=a;if(!(typeof ye=="number"&&isFinite(ye))){let _e={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1")+"/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"};s===null?s=[_e]:s.push(_e),a++}var h=le===a}else var h=!0;if(h){if(Q.lt!==void 0){let ye=Q.lt,le=a;if(!(typeof ye=="number"&&isFinite(ye))){let _e={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1")+"/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"};s===null?s=[_e]:s.push(_e),a++}var h=le===a}else var h=!0;if(h)if(Q.lte!==void 0){let ye=Q.lte,le=a;if(!(typeof ye=="number"&&isFinite(ye))){let _e={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1")+"/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"};s===null?s=[_e]:s.push(_e),a++}var h=le===a}else var h=!0}}}}}}}}else{let mt={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[mt]:s.push(mt),a++}var B=er===a;B&&ie?(ie=!1,ae=[ae,5]):B&&(ie=!0,ae=5,I!==!0&&(I=!0))}}}}if(ie)a=de,s!==null&&(de?s.length=de:s=null);else{let ce={instancePath:e+"/tags/"+se.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf",keyword:"oneOf",params:{passingSchemas:ae},message:"must match exactly one schema in oneOf"};return s===null?s=[ce]:s.push(ce),a++,st.errors=s,!1}var v=te===a;if(!v)break}}else return st.errors=[{instancePath:e+"/tags",schemaPath:"#/properties/tags/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var M=J===a}else var M=!0;if(M){if(t.recordId!==void 0){let Z=a;if(typeof t.recordId!="string")return st.errors=[{instancePath:e+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=Z===a}else var M=!0;if(M){if(t.parentId!==void 0){let Z=a;if(typeof t.parentId!="string")return st.errors=[{instancePath:e+"/parentId",schemaPath:"#/properties/parentId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=Z===a}else var M=!0;if(M){if(t.published!==void 0){let Z=a;if(typeof t.published!="boolean")return st.errors=[{instancePath:e+"/published",schemaPath:"#/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var M=Z===a}else var M=!0;if(M){if(t.dataFormat!==void 0){let Z=a;if(typeof t.dataFormat!="string")return st.errors=[{instancePath:e+"/dataFormat",schemaPath:"#/properties/dataFormat/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=Z===a}else var M=!0;if(M){if(t.dataSize!==void 0){let Z=t.dataSize,J=a;if(a===a)if(Z&&typeof Z=="object"&&!Array.isArray(Z)){if(Object.keys(Z).length<1)return st.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let Q=a;for(let te in Z)if(!(te==="gt"||te==="gte"||te==="lt"||te==="lte")){return st.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:te},message:"must NOT have additional properties"}],!1;break}if(Q===a){if(Z.gt!==void 0){let te=a,de=a,ie=a;if(Z&&typeof Z=="object"&&!Array.isArray(Z)){let ae;if(Z.gte===void 0&&(ae="gte")){let fe={};s===null?s=[fe]:s.push(fe),a++}}var x=ie===a;if(x)return st.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=de,s!==null&&(de?s.length=de:s=null);var g=te===a}else var g=!0;if(g){if(Z.gte!==void 0){let te=a,de=a,ie=a;if(Z&&typeof Z=="object"&&!Array.isArray(Z)){let fe;if(Z.gt===void 0&&(fe="gt")){let oe={};s===null?s=[oe]:s.push(oe),a++}}var f=ie===a;if(f)return st.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=de,s!==null&&(de?s.length=de:s=null);var g=te===a}else var g=!0;if(g){if(Z.lt!==void 0){let te=a,de=a,ie=a;if(Z&&typeof Z=="object"&&!Array.isArray(Z)){let fe;if(Z.lte===void 0&&(fe="lte")){let oe={};s===null?s=[oe]:s.push(oe),a++}}var w=ie===a;if(w)return st.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=de,s!==null&&(de?s.length=de:s=null);var g=te===a}else var g=!0;if(g){if(Z.lte!==void 0){let te=a,de=a,ie=a;if(Z&&typeof Z=="object"&&!Array.isArray(Z)){let fe;if(Z.lt===void 0&&(fe="lt")){let oe={};s===null?s=[oe]:s.push(oe),a++}}var D=ie===a;if(D)return st.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=de,s!==null&&(de?s.length=de:s=null);var g=te===a}else var g=!0;if(g){if(Z.gt!==void 0){let te=Z.gt,de=a;if(!(typeof te=="number"&&isFinite(te)))return st.errors=[{instancePath:e+"/dataSize/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var T=de===a}else var T=!0;if(T){if(Z.gte!==void 0){let te=Z.gte,de=a;if(!(typeof te=="number"&&isFinite(te)))return st.errors=[{instancePath:e+"/dataSize/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var T=de===a}else var T=!0;if(T){if(Z.lt!==void 0){let te=Z.lt,de=a;if(!(typeof te=="number"&&isFinite(te)))return st.errors=[{instancePath:e+"/dataSize/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var T=de===a}else var T=!0;if(T)if(Z.lte!==void 0){let te=Z.lte,de=a;if(!(typeof te=="number"&&isFinite(te)))return st.errors=[{instancePath:e+"/dataSize/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var T=de===a}else var T=!0}}}}}}}}}else return st.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var M=J===a}else var M=!0;if(M){if(t.dataCid!==void 0){let Z=a;if(typeof t.dataCid!="string")return st.errors=[{instancePath:e+"/dataCid",schemaPath:"#/properties/dataCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=Z===a}else var M=!0;if(M){if(t.dateCreated!==void 0){let Z=t.dateCreated,J=a;if(a===J)if(Z&&typeof Z=="object"&&!Array.isArray(Z)){if(Object.keys(Z).length<1)return st.errors=[{instancePath:e+"/dateCreated",schemaPath:"#/properties/dateCreated/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let se=a;for(let Q in Z)if(!(Q==="from"||Q==="to")){return st.errors=[{instancePath:e+"/dateCreated",schemaPath:"#/properties/dateCreated/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Q},message:"must NOT have additional properties"}],!1;break}if(se===a){if(Z.from!==void 0){let Q=Z.from,te=a;if(a===a)if(typeof Q=="string"){if(!so.test(Q))return st.errors=[{instancePath:e+"/dateCreated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return st.errors=[{instancePath:e+"/dateCreated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var C=te===a}else var C=!0;if(C)if(Z.to!==void 0){let Q=Z.to,te=a;if(a===a)if(typeof Q=="string"){if(!so.test(Q))return st.errors=[{instancePath:e+"/dateCreated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return st.errors=[{instancePath:e+"/dateCreated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var C=te===a}else var C=!0}}}else return st.errors=[{instancePath:e+"/dateCreated",schemaPath:"#/properties/dateCreated/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var M=J===a}else var M=!0;if(M){if(t.datePublished!==void 0){let Z=t.datePublished,J=a;if(a===J)if(Z&&typeof Z=="object"&&!Array.isArray(Z)){if(Object.keys(Z).length<1)return st.errors=[{instancePath:e+"/datePublished",schemaPath:"#/properties/datePublished/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let se=a;for(let Q in Z)if(!(Q==="from"||Q==="to")){return st.errors=[{instancePath:e+"/datePublished",schemaPath:"#/properties/datePublished/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Q},message:"must NOT have additional properties"}],!1;break}if(se===a){if(Z.from!==void 0){let Q=Z.from,te=a;if(a===a)if(typeof Q=="string"){if(!so.test(Q))return st.errors=[{instancePath:e+"/datePublished/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return st.errors=[{instancePath:e+"/datePublished/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var z=te===a}else var z=!0;if(z)if(Z.to!==void 0){let Q=Z.to,te=a;if(a===a)if(typeof Q=="string"){if(!so.test(Q))return st.errors=[{instancePath:e+"/datePublished/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return st.errors=[{instancePath:e+"/datePublished/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var z=te===a}else var z=!0}}}else return st.errors=[{instancePath:e+"/datePublished",schemaPath:"#/properties/datePublished/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var M=J===a}else var M=!0;if(M)if(t.dateUpdated!==void 0){let Z=t.dateUpdated,J=a;if(a===J)if(Z&&typeof Z=="object"&&!Array.isArray(Z)){if(Object.keys(Z).length<1)return st.errors=[{instancePath:e+"/dateUpdated",schemaPath:"#/properties/dateUpdated/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let se=a;for(let Q in Z)if(!(Q==="from"||Q==="to")){return st.errors=[{instancePath:e+"/dateUpdated",schemaPath:"#/properties/dateUpdated/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Q},message:"must NOT have additional properties"}],!1;break}if(se===a){if(Z.from!==void 0){let Q=Z.from,te=a;if(a===a)if(typeof Q=="string"){if(!so.test(Q))return st.errors=[{instancePath:e+"/dateUpdated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return st.errors=[{instancePath:e+"/dateUpdated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var G=te===a}else var G=!0;if(G)if(Z.to!==void 0){let Q=Z.to,te=a;if(a===a)if(typeof Q=="string"){if(!so.test(Q))return st.errors=[{instancePath:e+"/dateUpdated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return st.errors=[{instancePath:e+"/dateUpdated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var G=te===a}else var G=!0}}}else return st.errors=[{instancePath:e+"/dateUpdated",schemaPath:"#/properties/dateUpdated/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var M=J===a}else var M=!0}}}}}}}}}}}}}}}}}}}else return st.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return st.errors=s,a===0}st.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function bn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=bn.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let M;if(t.descriptor===void 0&&(M="descriptor"))return bn.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:M},message:"must have required property '"+M+"'"}],!1;{let S=a;for(let P in t)if(!(P==="authorization"||P==="descriptor")){return bn.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:P},message:"must NOT have additional properties"}],!1;break}if(S===a){if(t.authorization!==void 0){let P=a;Lo(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?Lo.errors:s.concat(Lo.errors),a=s.length);var m=P===a}else var m=!0;if(m)if(t.descriptor!==void 0){let P=t.descriptor,k=a;if(a===k)if(P&&typeof P=="object"&&!Array.isArray(P)){let B;if(P.interface===void 0&&(B="interface")||P.method===void 0&&(B="method")||P.messageTimestamp===void 0&&(B="messageTimestamp")||P.filter===void 0&&(B="filter"))return bn.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:B},message:"must have required property '"+B+"'"}],!1;{let I=a;for(let q in P)if(!(q==="interface"||q==="method"||q==="messageTimestamp"||q==="filter"||q==="pagination"||q==="dateSort")){return bn.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:q},message:"must NOT have additional properties"}],!1;break}if(I===a){if(P.interface!==void 0){let q=P.interface,$=a;if(typeof q!="string")return bn.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(q!=="Records")return bn.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:q7.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var p=$===a}else var p=!0;if(p){if(P.method!==void 0){let q=P.method,$=a;if(typeof q!="string")return bn.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(q!=="Query")return bn.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:q7.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var p=$===a}else var p=!0;if(p){if(P.messageTimestamp!==void 0){let q=P.messageTimestamp,$=a;if(a===a)if(typeof q=="string"){if(!so.test(q))return bn.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return bn.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=$===a}else var p=!0;if(p){if(P.filter!==void 0){let q=a;st(P.filter,{instancePath:e+"/descriptor/filter",parentData:P,parentDataProperty:"filter",rootData:i,dynamicAnchors:o})||(s=s===null?st.errors:s.concat(st.errors),a=s.length);var p=q===a}else var p=!0;if(p){if(P.pagination!==void 0){let q=P.pagination,$=a;if(a===$)if(q&&typeof q=="object"&&!Array.isArray(q)){let F=a;for(let L in q)if(!(L==="limit"||L==="cursor")){return bn.errors=[{instancePath:e+"/descriptor/pagination",schemaPath:"#/properties/descriptor/properties/pagination/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:L},message:"must NOT have additional properties"}],!1;break}if(F===a){if(q.limit!==void 0){let L=q.limit,W=a;if(a===W)if(typeof L=="number"&&isFinite(L)){if(L<1||isNaN(L))return bn.errors=[{instancePath:e+"/descriptor/pagination/limit",schemaPath:"#/properties/descriptor/properties/pagination/properties/limit/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"}],!1}else return bn.errors=[{instancePath:e+"/descriptor/pagination/limit",schemaPath:"#/properties/descriptor/properties/pagination/properties/limit/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var b=W===a}else var b=!0;if(b)if(q.cursor!==void 0){let L=q.cursor,W=a;if(a===a)if(L&&typeof L=="object"&&!Array.isArray(L)){if(Object.keys(L).length<1)return bn.errors=[{instancePath:e+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let l;if(L.messageCid===void 0&&(l="messageCid")||L.value===void 0&&(l="value"))return bn.errors=[{instancePath:e+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/required",keyword:"required",params:{missingProperty:l},message:"must have required property '"+l+"'"}],!1;{let y=a;for(let d in L)if(!(d==="messageCid"||d==="value")){return bn.errors=[{instancePath:e+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:d},message:"must NOT have additional properties"}],!1;break}if(y===a){if(L.messageCid!==void 0){let d=a;if(typeof L.messageCid!="string")return bn.errors=[{instancePath:e+"/descriptor/pagination/cursor/messageCid",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var A=d===a}else var A=!0;if(A)if(L.value!==void 0){let d=L.value,h=a;if(typeof d!="string"&&!(typeof d=="number"&&isFinite(d)))return bn.errors=[{instancePath:e+"/descriptor/pagination/cursor/value",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/value/type",keyword:"type",params:{type:L7.properties.value.type},message:"must be string,number"}],!1;var A=h===a}else var A=!0}}}}else return bn.errors=[{instancePath:e+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var b=W===a}else var b=!0}}else return bn.errors=[{instancePath:e+"/descriptor/pagination",schemaPath:"#/properties/descriptor/properties/pagination/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=$===a}else var p=!0;if(p)if(P.dateSort!==void 0){let q=P.dateSort,$=a;if(typeof q!="string")return bn.errors=[{instancePath:e+"/descriptor/dateSort",schemaPath:"#/properties/descriptor/properties/dateSort/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(q==="createdAscending"||q==="createdDescending"||q==="publishedAscending"||q==="publishedDescending"))return bn.errors=[{instancePath:e+"/descriptor/dateSort",schemaPath:"#/properties/descriptor/properties/dateSort/enum",keyword:"enum",params:{allowedValues:q7.properties.descriptor.properties.dateSort.enum},message:"must be equal to one of the allowed values"}],!1;var p=$===a}else var p=!0}}}}}}}else return bn.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=k===a}else var m=!0}}}else return bn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return bn.errors=s,a===0}bn.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var M4e=$s,BZ={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-subscribe.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Subscribe"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"}}}}};function $s(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=$s.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let b;if(t.descriptor===void 0&&(b="descriptor"))return $s.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:b},message:"must have required property '"+b+"'"}],!1;{let A=a;for(let M in t)if(!(M==="authorization"||M==="descriptor")){return $s.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:M},message:"must NOT have additional properties"}],!1;break}if(A===a){if(t.authorization!==void 0){let M=a;Lo(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?Lo.errors:s.concat(Lo.errors),a=s.length);var m=M===a}else var m=!0;if(m)if(t.descriptor!==void 0){let M=t.descriptor,S=a;if(a===S)if(M&&typeof M=="object"&&!Array.isArray(M)){let k;if(M.interface===void 0&&(k="interface")||M.method===void 0&&(k="method")||M.messageTimestamp===void 0&&(k="messageTimestamp")||M.filter===void 0&&(k="filter"))return $s.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:k},message:"must have required property '"+k+"'"}],!1;{let R=a;for(let B in M)if(!(B==="interface"||B==="method"||B==="messageTimestamp"||B==="filter")){return $s.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:B},message:"must NOT have additional properties"}],!1;break}if(R===a){if(M.interface!==void 0){let B=M.interface,I=a;if(typeof B!="string")return $s.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(B!=="Records")return $s.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:BZ.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var p=I===a}else var p=!0;if(p){if(M.method!==void 0){let B=M.method,I=a;if(typeof B!="string")return $s.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(B!=="Subscribe")return $s.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:BZ.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var p=I===a}else var p=!0;if(p){if(M.messageTimestamp!==void 0){let B=M.messageTimestamp,I=a;if(a===a)if(typeof B=="string"){if(!so.test(B))return $s.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return $s.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=I===a}else var p=!0;if(p)if(M.filter!==void 0){let B=a;st(M.filter,{instancePath:e+"/descriptor/filter",parentData:M,parentDataProperty:"filter",rootData:i,dynamicAnchors:o})||(s=s===null?st.errors:s.concat(st.errors),a=s.length);var p=B===a}else var p=!0}}}}}else return $s.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===a}else var m=!0}}}else return $s.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return $s.errors=s,a===0}$s.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var A4e=Zm;function Zm(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=Zm.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),!Xe(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:i,dynamicAnchors:o}))s=s===null?Xe.errors:s.concat(Xe.errors),a=s.length;else var m=Xe.evaluated.props;if(a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let p;if(t.recordId===void 0&&(p="recordId")||t.authorization===void 0&&(p="authorization"))return Zm.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;if(m!==!0){for(let b in t)if(!m||!m[b]){return Zm.errors=[{instancePath:e,schemaPath:"#/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty:b},message:"must NOT have unevaluated properties"}],!1;break}}}else return Zm.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Zm.errors=s,a===0}Zm.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var P4e=Hc,T4e=Xe,R4e=C_;function C_(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=C_.evaluated;return u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),t&&typeof t=="object"&&!Array.isArray(t)?(C_.errors=s,a===0):(C_.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}C_.evaluated={dynamicProps:!1,dynamicItems:!1};var I4e=as;function as(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=as.evaluated;u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0);let m=a,p=!1,b=null,A=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let $;if(t.crv===void 0&&($="crv")||t.x===void 0&&($="x")){let U={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:$},message:"must have required property '"+$+"'"};s===null?s=[U]:s.push(U),a++}else{if(t.kty!==void 0){let U=a;if(t.kty!=="EC"){let F={instancePath:e+"/kty",schemaPath:"#/oneOf/0/properties/kty/const",keyword:"const",params:{allowedValue:"EC"},message:"must be equal to constant"};s===null?s=[F]:s.push(F),a++}var M=U===a}else var M=!0;if(M){if(t.crv!==void 0){let U=a;if(typeof t.crv!="string"){let L={instancePath:e+"/crv",schemaPath:"#/oneOf/0/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[L]:s.push(L),a++}var M=U===a}else var M=!0;if(M){if(t.x!==void 0){let U=a;if(typeof t.x!="string"){let L={instancePath:e+"/x",schemaPath:"#/oneOf/0/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[L]:s.push(L),a++}var M=U===a}else var M=!0;if(M){if(t.y!==void 0){let U=a;if(typeof t.y!="string"){let L={instancePath:e+"/y",schemaPath:"#/oneOf/0/properties/y/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[L]:s.push(L),a++}var M=U===a}else var M=!0;if(M)if(t.d!==void 0){let U=a;if(typeof t.d!="string"){let L={instancePath:e+"/d",schemaPath:"#/oneOf/0/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[L]:s.push(L),a++}var M=U===a}else var M=!0}}}}}var R=A===a;if(R){p=!0,b=0;var S={};S.kty=!0,S.crv=!0,S.x=!0,S.y=!0,S.d=!0}let P=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let $;if(t.crv===void 0&&($="crv")||t.x===void 0&&($="x")){let U={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:$},message:"must have required property '"+$+"'"};s===null?s=[U]:s.push(U),a++}else{if(t.kty!==void 0){let U=a;if(t.kty!=="OKP"){let F={instancePath:e+"/kty",schemaPath:"#/oneOf/1/properties/kty/const",keyword:"const",params:{allowedValue:"OKP"},message:"must be equal to constant"};s===null?s=[F]:s.push(F),a++}var k=U===a}else var k=!0;if(k){if(t.crv!==void 0){let U=a;if(typeof t.crv!="string"){let L={instancePath:e+"/crv",schemaPath:"#/oneOf/1/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[L]:s.push(L),a++}var k=U===a}else var k=!0;if(k){if(t.x!==void 0){let U=a;if(typeof t.x!="string"){let L={instancePath:e+"/x",schemaPath:"#/oneOf/1/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[L]:s.push(L),a++}var k=U===a}else var k=!0;if(k)if(t.d!==void 0){let U=a;if(typeof t.d!="string"){let L={instancePath:e+"/d",schemaPath:"#/oneOf/1/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[L]:s.push(L),a++}var k=U===a}else var k=!0}}}}var R=P===a;if(R&&p)p=!1,b=[b,1];else{R&&(p=!0,b=1,S!==!0&&(S=S||{},S.kty=!0,S.crv=!0,S.x=!0,S.d=!0));let $=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let F;if(t.n===void 0&&(F="n")||t.e===void 0&&(F="e")){let L={instancePath:e,schemaPath:"#/oneOf/2/required",keyword:"required",params:{missingProperty:F},message:"must have required property '"+F+"'"};s===null?s=[L]:s.push(L),a++}else{if(t.kty!==void 0){let L=a;if(t.kty!=="RSA"){let W={instancePath:e+"/kty",schemaPath:"#/oneOf/2/properties/kty/const",keyword:"const",params:{allowedValue:"RSA"},message:"must be equal to constant"};s===null?s=[W]:s.push(W),a++}var B=L===a}else var B=!0;if(B){if(t.n!==void 0){let L=a;if(typeof t.n!="string"){let E={instancePath:e+"/n",schemaPath:"#/oneOf/2/properties/n/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[E]:s.push(E),a++}var B=L===a}else var B=!0;if(B){if(t.e!==void 0){let L=a;if(typeof t.e!="string"){let E={instancePath:e+"/e",schemaPath:"#/oneOf/2/properties/e/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[E]:s.push(E),a++}var B=L===a}else var B=!0;if(B){if(t.d!==void 0){let L=a;if(typeof t.d!="string"){let E={instancePath:e+"/d",schemaPath:"#/oneOf/2/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[E]:s.push(E),a++}var B=L===a}else var B=!0;if(B){if(t.p!==void 0){let L=a;if(typeof t.p!="string"){let E={instancePath:e+"/p",schemaPath:"#/oneOf/2/properties/p/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[E]:s.push(E),a++}var B=L===a}else var B=!0;if(B){if(t.q!==void 0){let L=a;if(typeof t.q!="string"){let E={instancePath:e+"/q",schemaPath:"#/oneOf/2/properties/q/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[E]:s.push(E),a++}var B=L===a}else var B=!0;if(B){if(t.dp!==void 0){let L=a;if(typeof t.dp!="string"){let E={instancePath:e+"/dp",schemaPath:"#/oneOf/2/properties/dp/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[E]:s.push(E),a++}var B=L===a}else var B=!0;if(B){if(t.dq!==void 0){let L=a;if(typeof t.dq!="string"){let E={instancePath:e+"/dq",schemaPath:"#/oneOf/2/properties/dq/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[E]:s.push(E),a++}var B=L===a}else var B=!0;if(B){if(t.qi!==void 0){let L=a;if(typeof t.qi!="string"){let E={instancePath:e+"/qi",schemaPath:"#/oneOf/2/properties/qi/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[E]:s.push(E),a++}var B=L===a}else var B=!0;if(B)if(t.oth!==void 0){let L=t.oth,W=a;if(!(L&&typeof L=="object"&&!Array.isArray(L))){let c={instancePath:e+"/oth",schemaPath:"#/oneOf/2/properties/oth/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[c]:s.push(c),a++}var B=W===a}else var B=!0}}}}}}}}}}var R=$===a;if(R&&p)p=!1,b=[b,2];else{R&&(p=!0,b=2,S!==!0&&(S=S||{},S.kty=!0,S.n=!0,S.e=!0,S.d=!0,S.p=!0,S.q=!0,S.dp=!0,S.dq=!0,S.qi=!0,S.oth=!0));let F=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let W;if(t.k===void 0&&(W="k")){let E={instancePath:e,schemaPath:"#/oneOf/3/required",keyword:"required",params:{missingProperty:W},message:"must have required property '"+W+"'"};s===null?s=[E]:s.push(E),a++}else{if(t.kty!==void 0){let E=a;if(t.kty!=="oct"){let c={instancePath:e+"/kty",schemaPath:"#/oneOf/3/properties/kty/const",keyword:"const",params:{allowedValue:"oct"},message:"must be equal to constant"};s===null?s=[c]:s.push(c),a++}var I=E===a}else var I=!0;if(I)if(t.k!==void 0){let E=a;if(typeof t.k!="string"){let l={instancePath:e+"/k",schemaPath:"#/oneOf/3/properties/k/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[l]:s.push(l),a++}var I=E===a}else var I=!0}}var R=F===a;R&&p?(p=!1,b=[b,3]):R&&(p=!0,b=3,S!==!0&&(S=S||{},S.kty=!0,S.k=!0))}}if(p)a=m,s!==null&&(m?s.length=m:s=null);else{let $={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:b},message:"must match exactly one schema in oneOf"};return s===null?s=[$]:s.push($),a++,as.errors=s,!1}if(a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let $;if(t.kty===void 0&&($="kty"))return as.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:$},message:"must have required property '"+$+"'"}],!1;if(S!==!0&&(S=S||{},S.alg=!0,S.kid=!0,S.kty=!0,S.crv=!0,S.use=!0,S.key_ops=!0,S.x5u=!0,S.x5c=!0,S.x5t=!0,S["x5t#S256"]=!0),t.alg!==void 0){let U=a;if(typeof t.alg!="string")return as.errors=[{instancePath:e+"/alg",schemaPath:"#/properties/alg/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var q=U===a}else var q=!0;if(q){if(t.kid!==void 0){let U=a;if(typeof t.kid!="string")return as.errors=[{instancePath:e+"/kid",schemaPath:"#/properties/kid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var q=U===a}else var q=!0;if(q){if(t.kty!==void 0){let U=t.kty,F=a;if(!(U==="EC"||U==="RSA"||U==="oct"||U==="OKP"))return as.errors=[{instancePath:e+"/kty",schemaPath:"#/properties/kty/enum",keyword:"enum",params:{allowedValues:KZ.properties.kty.enum},message:"must be equal to one of the allowed values"}],!1;var q=F===a}else var q=!0;if(q){if(t.crv!==void 0){let U=a;if(typeof t.crv!="string")return as.errors=[{instancePath:e+"/crv",schemaPath:"#/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var q=U===a}else var q=!0;if(q){if(t.use!==void 0){let U=a;if(typeof t.use!="string")return as.errors=[{instancePath:e+"/use",schemaPath:"#/properties/use/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var q=U===a}else var q=!0;if(q){if(t.key_ops!==void 0){let U=a;if(typeof t.key_ops!="string")return as.errors=[{instancePath:e+"/key_ops",schemaPath:"#/properties/key_ops/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var q=U===a}else var q=!0;if(q){if(t.x5u!==void 0){let U=a;if(typeof t.x5u!="string")return as.errors=[{instancePath:e+"/x5u",schemaPath:"#/properties/x5u/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var q=U===a}else var q=!0;if(q){if(t.x5c!==void 0){let U=a;if(typeof t.x5c!="string")return as.errors=[{instancePath:e+"/x5c",schemaPath:"#/properties/x5c/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var q=U===a}else var q=!0;if(q){if(t.x5t!==void 0){let U=a;if(typeof t.x5t!="string")return as.errors=[{instancePath:e+"/x5t",schemaPath:"#/properties/x5t/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var q=U===a}else var q=!0;if(q)if(t["x5t#S256"]!==void 0){let U=a;if(typeof t["x5t#S256"]!="string")return as.errors=[{instancePath:e+"/x5t#S256",schemaPath:"#/properties/x5t%23S256/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var q=U===a}else var q=!0}}}}}}}}}else return as.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return as.errors=s,u.props=S,a===0}as.evaluated={dynamicProps:!0,dynamicItems:!1};var k4e=ln,O4e=Zf,B4e={$id:"https://identity.foundation/dwn/json-schemas/jwk-verification-method.json",$schema:"https://json-schema.org/draft/2020-12/schema",type:"object",additionalProperties:!1,required:["id","type","controller","publicKeyJwk"],properties:{id:{type:"string"},type:{enum:["JsonWebKey","JsonWebKey2020"]},controller:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},publicKeyJwk:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"}}};function Zf(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=Zf.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let p;if(t.id===void 0&&(p="id")||t.type===void 0&&(p="type")||t.controller===void 0&&(p="controller")||t.publicKeyJwk===void 0&&(p="publicKeyJwk"))return Zf.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{let b=a;for(let A in t)if(!(A==="id"||A==="type"||A==="controller"||A==="publicKeyJwk")){return Zf.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:A},message:"must NOT have additional properties"}],!1;break}if(b===a){if(t.id!==void 0){let A=a;if(typeof t.id!="string")return Zf.errors=[{instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0;if(m){if(t.type!==void 0){let A=t.type,M=a;if(!(A==="JsonWebKey"||A==="JsonWebKey2020"))return Zf.errors=[{instancePath:e+"/type",schemaPath:"#/properties/type/enum",keyword:"enum",params:{allowedValues:B4e.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var m=M===a}else var m=!0;if(m){if(t.controller!==void 0){let A=t.controller,M=a;if(a===a)if(typeof A=="string"){if(!qp.test(A))return Zf.errors=[{instancePath:e+"/controller",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return Zf.errors=[{instancePath:e+"/controller",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=M===a}else var m=!0;if(m)if(t.publicKeyJwk!==void 0){let A=a;un(t.publicKeyJwk,{instancePath:e+"/publicKeyJwk",parentData:t,parentDataProperty:"publicKeyJwk",rootData:i,dynamicAnchors:o})||(s=s===null?un.errors:s.concat(un.errors),a=s.length);var m=A===a}else var m=!0}}}}}else return Zf.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Zf.errors=s,a===0}Zf.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var D4e=Kn,DZ={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/messages-filter.json",type:"object",additionalProperties:!1,minProperties:1,properties:{interface:{enum:["Protocols","Records"],type:"string"},method:{enum:["Configure","Delete","Write"],type:"string"},protocol:{type:"string"},messageTimestamp:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}}}};function Kn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=Kn.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(Object.keys(t).length<1)return Kn.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let b=a;for(let A in t)if(!(A==="interface"||A==="method"||A==="protocol"||A==="messageTimestamp")){return Kn.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:A},message:"must NOT have additional properties"}],!1;break}if(b===a){if(t.interface!==void 0){let A=t.interface,M=a;if(typeof A!="string")return Kn.errors=[{instancePath:e+"/interface",schemaPath:"#/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(A==="Protocols"||A==="Records"))return Kn.errors=[{instancePath:e+"/interface",schemaPath:"#/properties/interface/enum",keyword:"enum",params:{allowedValues:DZ.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var m=M===a}else var m=!0;if(m){if(t.method!==void 0){let A=t.method,M=a;if(typeof A!="string")return Kn.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(A==="Configure"||A==="Delete"||A==="Write"))return Kn.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:DZ.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var m=M===a}else var m=!0;if(m){if(t.protocol!==void 0){let A=a;if(typeof t.protocol!="string")return Kn.errors=[{instancePath:e+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0;if(m)if(t.messageTimestamp!==void 0){let A=t.messageTimestamp,M=a;if(a===M)if(A&&typeof A=="object"&&!Array.isArray(A)){if(Object.keys(A).length<1)return Kn.errors=[{instancePath:e+"/messageTimestamp",schemaPath:"#/properties/messageTimestamp/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let P=a;for(let k in A)if(!(k==="from"||k==="to")){return Kn.errors=[{instancePath:e+"/messageTimestamp",schemaPath:"#/properties/messageTimestamp/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:k},message:"must NOT have additional properties"}],!1;break}if(P===a){if(A.from!==void 0){let k=A.from,R=a;if(a===a)if(typeof k=="string"){if(!so.test(k))return Kn.errors=[{instancePath:e+"/messageTimestamp/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Kn.errors=[{instancePath:e+"/messageTimestamp/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=R===a}else var p=!0;if(p)if(A.to!==void 0){let k=A.to,R=a;if(a===a)if(typeof k=="string"){if(!so.test(k))return Kn.errors=[{instancePath:e+"/messageTimestamp/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Kn.errors=[{instancePath:e+"/messageTimestamp/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=R===a}else var p=!0}}}else return Kn.errors=[{instancePath:e+"/messageTimestamp",schemaPath:"#/properties/messageTimestamp/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=M===a}else var m=!0}}}}}else return Kn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Kn.errors=s,a===0}Kn.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var C4e=ci,CZ={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/messages-query.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filters"],properties:{interface:{enum:["Messages"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filters:{type:"array",items:{$ref:"https://identity.foundation/dwn/json-schemas/messages-filter.json"}},cursor:{$ref:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json"}}}}};function ci(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=ci.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let M;if(t.authorization===void 0&&(M="authorization")||t.descriptor===void 0&&(M="descriptor"))return ci.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:M},message:"must have required property '"+M+"'"}],!1;{let S=a;for(let P in t)if(!(P==="authorization"||P==="descriptor")){return ci.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:P},message:"must NOT have additional properties"}],!1;break}if(S===a){if(t.authorization!==void 0){let P=a;Fi(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?Fi.errors:s.concat(Fi.errors),a=s.length);var m=P===a}else var m=!0;if(m)if(t.descriptor!==void 0){let P=t.descriptor,k=a;if(a===k)if(P&&typeof P=="object"&&!Array.isArray(P)){let B;if(P.interface===void 0&&(B="interface")||P.method===void 0&&(B="method")||P.messageTimestamp===void 0&&(B="messageTimestamp")||P.filters===void 0&&(B="filters"))return ci.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:B},message:"must have required property '"+B+"'"}],!1;{let I=a;for(let q in P)if(!(q==="interface"||q==="method"||q==="messageTimestamp"||q==="filters"||q==="cursor")){return ci.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:q},message:"must NOT have additional properties"}],!1;break}if(I===a){if(P.interface!==void 0){let q=P.interface,$=a;if(typeof q!="string")return ci.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(q!=="Messages")return ci.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:CZ.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var p=$===a}else var p=!0;if(p){if(P.method!==void 0){let q=P.method,$=a;if(typeof q!="string")return ci.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(q!=="Query")return ci.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:CZ.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var p=$===a}else var p=!0;if(p){if(P.messageTimestamp!==void 0){let q=P.messageTimestamp,$=a;if(a===a)if(typeof q=="string"){if(!so.test(q))return ci.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return ci.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=$===a}else var p=!0;if(p){if(P.filters!==void 0){let q=P.filters,$=a;if(a===$)if(Array.isArray(q)){var b=!0;let F=q.length;for(let L=0;L<F;L++){let W=a;Kn(q[L],{instancePath:e+"/descriptor/filters/"+L,parentData:q,parentDataProperty:L,rootData:i,dynamicAnchors:o})||(s=s===null?Kn.errors:s.concat(Kn.errors),a=s.length);var b=W===a;if(!b)break}}else return ci.errors=[{instancePath:e+"/descriptor/filters",schemaPath:"#/properties/descriptor/properties/filters/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var p=$===a}else var p=!0;if(p)if(P.cursor!==void 0){let q=P.cursor,$=a;if(a===a)if(q&&typeof q=="object"&&!Array.isArray(q)){if(Object.keys(q).length<1)return ci.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let L;if(q.messageCid===void 0&&(L="messageCid")||q.value===void 0&&(L="value"))return ci.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/required",keyword:"required",params:{missingProperty:L},message:"must have required property '"+L+"'"}],!1;{let W=a;for(let E in q)if(!(E==="messageCid"||E==="value")){return ci.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:E},message:"must NOT have additional properties"}],!1;break}if(W===a){if(q.messageCid!==void 0){let E=a;if(typeof q.messageCid!="string")return ci.errors=[{instancePath:e+"/descriptor/cursor/messageCid",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var A=E===a}else var A=!0;if(A)if(q.value!==void 0){let E=q.value,c=a;if(typeof E!="string"&&!(typeof E=="number"&&isFinite(E)))return ci.errors=[{instancePath:e+"/descriptor/cursor/value",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/value/type",keyword:"type",params:{type:L7.properties.value.type},message:"must be string,number"}],!1;var A=c===a}else var A=!0}}}}else return ci.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=$===a}else var p=!0}}}}}}else return ci.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=k===a}else var m=!0}}}else return ci.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ci.errors=s,a===0}ci.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var N4e=cs,NZ={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/messages-read.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp"],properties:{interface:{enum:["Messages"],type:"string"},method:{enum:["Read"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},messageCid:{type:"string"}}}}};function cs(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=cs.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let b;if(t.authorization===void 0&&(b="authorization")||t.descriptor===void 0&&(b="descriptor"))return cs.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:b},message:"must have required property '"+b+"'"}],!1;{let A=a;for(let M in t)if(!(M==="authorization"||M==="descriptor")){return cs.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:M},message:"must NOT have additional properties"}],!1;break}if(A===a){if(t.authorization!==void 0){let M=a;Fi(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?Fi.errors:s.concat(Fi.errors),a=s.length);var m=M===a}else var m=!0;if(m)if(t.descriptor!==void 0){let M=t.descriptor,S=a;if(a===S)if(M&&typeof M=="object"&&!Array.isArray(M)){let k;if(M.interface===void 0&&(k="interface")||M.method===void 0&&(k="method")||M.messageTimestamp===void 0&&(k="messageTimestamp"))return cs.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:k},message:"must have required property '"+k+"'"}],!1;{let R=a;for(let B in M)if(!(B==="interface"||B==="method"||B==="messageTimestamp"||B==="messageCid")){return cs.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:B},message:"must NOT have additional properties"}],!1;break}if(R===a){if(M.interface!==void 0){let B=M.interface,I=a;if(typeof B!="string")return cs.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(B!=="Messages")return cs.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:NZ.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var p=I===a}else var p=!0;if(p){if(M.method!==void 0){let B=M.method,I=a;if(typeof B!="string")return cs.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(B!=="Read")return cs.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:NZ.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var p=I===a}else var p=!0;if(p){if(M.messageTimestamp!==void 0){let B=M.messageTimestamp,I=a;if(a===a)if(typeof B=="string"){if(!so.test(B))return cs.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return cs.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=I===a}else var p=!0;if(p)if(M.messageCid!==void 0){let B=a;if(typeof M.messageCid!="string")return cs.errors=[{instancePath:e+"/descriptor/messageCid",schemaPath:"#/properties/descriptor/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=B===a}else var p=!0}}}}}else return cs.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===a}else var m=!0}}}else return cs.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return cs.errors=s,a===0}cs.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var j4e=Ls,jZ={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/messages-subscribe.json",type:"object",additionalProperties:!1,required:["descriptor","authorization"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filters"],properties:{interface:{enum:["Messages"],type:"string"},method:{enum:["Subscribe"],type:"string"},messageTimestamp:{type:"string"},filters:{type:"array",items:{$ref:"https://identity.foundation/dwn/json-schemas/messages-filter.json"}}}}}};function Ls(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=Ls.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let A;if(t.descriptor===void 0&&(A="descriptor")||t.authorization===void 0&&(A="authorization"))return Ls.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:A},message:"must have required property '"+A+"'"}],!1;{let M=a;for(let S in t)if(!(S==="authorization"||S==="descriptor")){return Ls.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:S},message:"must NOT have additional properties"}],!1;break}if(M===a){if(t.authorization!==void 0){let S=a;Fi(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?Fi.errors:s.concat(Fi.errors),a=s.length);var m=S===a}else var m=!0;if(m)if(t.descriptor!==void 0){let S=t.descriptor,P=a;if(a===P)if(S&&typeof S=="object"&&!Array.isArray(S)){let R;if(S.interface===void 0&&(R="interface")||S.method===void 0&&(R="method")||S.messageTimestamp===void 0&&(R="messageTimestamp")||S.filters===void 0&&(R="filters"))return Ls.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:R},message:"must have required property '"+R+"'"}],!1;{let B=a;for(let I in S)if(!(I==="interface"||I==="method"||I==="messageTimestamp"||I==="filters")){return Ls.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:I},message:"must NOT have additional properties"}],!1;break}if(B===a){if(S.interface!==void 0){let I=S.interface,q=a;if(typeof I!="string")return Ls.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(I!=="Messages")return Ls.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:jZ.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var p=q===a}else var p=!0;if(p){if(S.method!==void 0){let I=S.method,q=a;if(typeof I!="string")return Ls.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(I!=="Subscribe")return Ls.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:jZ.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var p=q===a}else var p=!0;if(p){if(S.messageTimestamp!==void 0){let I=a;if(typeof S.messageTimestamp!="string")return Ls.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"#/properties/descriptor/properties/messageTimestamp/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=I===a}else var p=!0;if(p)if(S.filters!==void 0){let I=S.filters,q=a;if(a===q)if(Array.isArray(I)){var b=!0;let U=I.length;for(let F=0;F<U;F++){let L=a;Kn(I[F],{instancePath:e+"/descriptor/filters/"+F,parentData:I,parentDataProperty:F,rootData:i,dynamicAnchors:o})||(s=s===null?Kn.errors:s.concat(Kn.errors),a=s.length);var b=L===a;if(!b)break}}else return Ls.errors=[{instancePath:e+"/descriptor/filters",schemaPath:"#/properties/descriptor/properties/filters/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var p=q===a}else var p=!0}}}}}else return Ls.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=P===a}else var m=!0}}}else return Ls.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Ls.errors=s,a===0}Ls.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var q4e=ma;function ma(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=ma.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(Object.keys(t).length<1)return ma.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let P=a;for(let k in t)if(!(k==="gt"||k==="gte"||k==="lt"||k==="lte")){return ma.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:k},message:"must NOT have additional properties"}],!1;break}if(P===a){if(t.gt!==void 0){let k=a,R=a,B=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let I;if(t.gte===void 0&&(I="gte")){let q={};s===null?s=[q]:s.push(q),a++}}var m=B===a;if(m)return ma.errors=[{instancePath:e,schemaPath:"#/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=R,s!==null&&(R?s.length=R:s=null);var p=k===a}else var p=!0;if(p){if(t.gte!==void 0){let k=a,R=a,B=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let q;if(t.gt===void 0&&(q="gt")){let $={};s===null?s=[$]:s.push($),a++}}var b=B===a;if(b)return ma.errors=[{instancePath:e,schemaPath:"#/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=R,s!==null&&(R?s.length=R:s=null);var p=k===a}else var p=!0;if(p){if(t.lt!==void 0){let k=a,R=a,B=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let q;if(t.lte===void 0&&(q="lte")){let $={};s===null?s=[$]:s.push($),a++}}var A=B===a;if(A)return ma.errors=[{instancePath:e,schemaPath:"#/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=R,s!==null&&(R?s.length=R:s=null);var p=k===a}else var p=!0;if(p){if(t.lte!==void 0){let k=a,R=a,B=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let q;if(t.lt===void 0&&(q="lt")){let $={};s===null?s=[$]:s.push($),a++}}var M=B===a;if(M)return ma.errors=[{instancePath:e,schemaPath:"#/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=R,s!==null&&(R?s.length=R:s=null);var p=k===a}else var p=!0;if(p){if(t.gt!==void 0){let k=t.gt,R=a;if(!(typeof k=="number"&&isFinite(k)))return ma.errors=[{instancePath:e+"/gt",schemaPath:"#/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var S=R===a}else var S=!0;if(S){if(t.gte!==void 0){let k=t.gte,R=a;if(!(typeof k=="number"&&isFinite(k)))return ma.errors=[{instancePath:e+"/gte",schemaPath:"#/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var S=R===a}else var S=!0;if(S){if(t.lt!==void 0){let k=t.lt,R=a;if(!(typeof k=="number"&&isFinite(k)))return ma.errors=[{instancePath:e+"/lt",schemaPath:"#/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var S=R===a}else var S=!0;if(S)if(t.lte!==void 0){let k=t.lte,R=a;if(!(typeof k=="number"&&isFinite(k)))return ma.errors=[{instancePath:e+"/lte",schemaPath:"#/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var S=R===a}else var S=!0}}}}}}}}}else return ma.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ma.errors=s,a===0}ma.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var $4e=cl;function cl(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=cl.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(Object.keys(t).length<1)return cl.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let p;if(t.messageCid===void 0&&(p="messageCid")||t.value===void 0&&(p="value"))return cl.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{let b=a;for(let A in t)if(!(A==="messageCid"||A==="value")){return cl.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:A},message:"must NOT have additional properties"}],!1;break}if(b===a){if(t.messageCid!==void 0){let A=a;if(typeof t.messageCid!="string")return cl.errors=[{instancePath:e+"/messageCid",schemaPath:"#/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0;if(m)if(t.value!==void 0){let A=t.value,M=a;if(typeof A!="string"&&!(typeof A=="number"&&isFinite(A)))return cl.errors=[{instancePath:e+"/value",schemaPath:"#/properties/value/type",keyword:"type",params:{type:L7.properties.value.type},message:"must be string,number"}],!1;var m=M===a}else var m=!0}}}}else return cl.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return cl.errors=s,a===0}cl.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var L4e=Us;var GZ={type:"object",additionalProperties:!1,properties:{publication:{enum:["Required","Prohibited"],type:"string"}}};function Qm(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=Qm.evaluated;u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0);let m=a,p=!1,b=null,A=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.interface===void 0&&(c="interface")||t.method===void 0&&(c="method")){let l={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"};s===null?s=[l]:s.push(l),a++}else{let l=a;for(let y in t)if(!(y==="interface"||y==="method"||y==="protocol")){let d={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"};s===null?s=[d]:s.push(d),a++;break}if(l===a){if(t.interface!==void 0){let y=a;if(t.interface!=="Messages"){let d={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};s===null?s=[d]:s.push(d),a++}var S=y===a}else var S=!0;if(S){if(t.method!==void 0){let y=a;if(t.method!=="Query"){let h={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};s===null?s=[h]:s.push(h),a++}var S=y===a}else var S=!0;if(S)if(t.protocol!==void 0){let y=a;if(typeof t.protocol!="string"){let h={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[h]:s.push(h),a++}var S=y===a}else var S=!0}}}}else{let c={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[c]:s.push(c),a++}var I=A===a;if(I){p=!0,b=0;var P=!0}let k=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.interface===void 0&&(c="interface")||t.method===void 0&&(c="method")){let l={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"};s===null?s=[l]:s.push(l),a++}else{let l=a;for(let y in t)if(!(y==="interface"||y==="method"||y==="protocol")){let d={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"};s===null?s=[d]:s.push(d),a++;break}if(l===a){if(t.interface!==void 0){let y=a;if(t.interface!=="Messages"){let d={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};s===null?s=[d]:s.push(d),a++}var B=y===a}else var B=!0;if(B){if(t.method!==void 0){let y=a;if(t.method!=="Read"){let h={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};s===null?s=[h]:s.push(h),a++}var B=y===a}else var B=!0;if(B)if(t.protocol!==void 0){let y=a;if(typeof t.protocol!="string"){let h={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[h]:s.push(h),a++}var B=y===a}else var B=!0}}}}else{let c={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[c]:s.push(c),a++}var I=k===a;if(I&&p)p=!1,b=[b,1];else{I&&(p=!0,b=1,P!==!0&&(P=!0));let c=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let d;if(t.interface===void 0&&(d="interface")||t.method===void 0&&(d="method")){let h={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"};s===null?s=[h]:s.push(h),a++}else{let h=a;for(let v in t)if(!(v==="interface"||v==="method"||v==="protocol")){let x={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:v},message:"must NOT have additional properties"};s===null?s=[x]:s.push(x),a++;break}if(h===a){if(t.interface!==void 0){let v=a;if(t.interface!=="Messages"){let x={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};s===null?s=[x]:s.push(x),a++}var q=v===a}else var q=!0;if(q){if(t.method!==void 0){let v=a;if(t.method!=="Subscribe"){let g={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/method/const",keyword:"const",params:{allowedValue:"Subscribe"},message:"must be equal to constant"};s===null?s=[g]:s.push(g),a++}var q=v===a}else var q=!0;if(q)if(t.protocol!==void 0){let v=a;if(typeof t.protocol!="string"){let g={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[g]:s.push(g),a++}var q=v===a}else var q=!0}}}}else{let d={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[d]:s.push(d),a++}var I=c===a;if(I&&p)p=!1,b=[b,2];else{I&&(p=!0,b=2,P!==!0&&(P=!0));let d=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let x;if(t.interface===void 0&&(x="interface")||t.method===void 0&&(x="method")){let g={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"};s===null?s=[g]:s.push(g),a++}else{let g=a;for(let f in t)if(!(f==="interface"||f==="method")){let w={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties"};s===null?s=[w]:s.push(w),a++;break}if(g===a){if(t.interface!==void 0){let f=a;if(t.interface!=="Protocols"){let w={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Protocols"},message:"must be equal to constant"};s===null?s=[w]:s.push(w),a++}var $=f===a}else var $=!0;if($)if(t.method!==void 0){let f=a;if(t.method!=="Query"){let D={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};s===null?s=[D]:s.push(D),a++}var $=f===a}else var $=!0}}}else{let x={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[x]:s.push(x),a++}var I=d===a;if(I&&p)p=!1,b=[b,3];else{I&&(p=!0,b=3,P!==!0&&(P=!0));let x=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let w;if(t.interface===void 0&&(w="interface")||t.method===void 0&&(w="method")){let D={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/required",keyword:"required",params:{missingProperty:w},message:"must have required property '"+w+"'"};s===null?s=[D]:s.push(D),a++}else{let D=a;for(let T in t)if(!(T==="interface"||T==="method"||T==="protocol"||T==="contextId"||T==="protocolPath")){let C={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:T},message:"must NOT have additional properties"};s===null?s=[C]:s.push(C),a++;break}if(D===a){if(t.interface!==void 0){let T=a;if(t.interface!=="Records"){let C={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[C]:s.push(C),a++}var U=T===a}else var U=!0;if(U){if(t.method!==void 0){let T=a;if(t.method!=="Read"){let z={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};s===null?s=[z]:s.push(z),a++}var U=T===a}else var U=!0;if(U){if(t.protocol!==void 0){let T=a;if(typeof t.protocol!="string"){let z={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[z]:s.push(z),a++}var U=T===a}else var U=!0;if(U){if(t.contextId!==void 0){let T=a;if(typeof t.contextId!="string"){let z={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[z]:s.push(z),a++}var U=T===a}else var U=!0;if(U)if(t.protocolPath!==void 0){let T=a;if(typeof t.protocolPath!="string"){let z={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[z]:s.push(z),a++}var U=T===a}else var U=!0}}}}}}else{let w={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[w]:s.push(w),a++}var I=x===a;if(I&&p)p=!1,b=[b,4];else{I&&(p=!0,b=4,P!==!0&&(P=!0));let w=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let C;if(t.interface===void 0&&(C="interface")||t.method===void 0&&(C="method")){let z={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/required",keyword:"required",params:{missingProperty:C},message:"must have required property '"+C+"'"};s===null?s=[z]:s.push(z),a++}else{let z=a;for(let G in t)if(!(G==="interface"||G==="method"||G==="protocol"||G==="contextId"||G==="protocolPath")){let V={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:G},message:"must NOT have additional properties"};s===null?s=[V]:s.push(V),a++;break}if(z===a){if(t.interface!==void 0){let G=a;if(t.interface!=="Records"){let V={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[V]:s.push(V),a++}var F=G===a}else var F=!0;if(F){if(t.method!==void 0){let G=a;if(t.method!=="Delete"){let Z={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/method/const",keyword:"const",params:{allowedValue:"Delete"},message:"must be equal to constant"};s===null?s=[Z]:s.push(Z),a++}var F=G===a}else var F=!0;if(F){if(t.protocol!==void 0){let G=a;if(typeof t.protocol!="string"){let Z={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Z]:s.push(Z),a++}var F=G===a}else var F=!0;if(F){if(t.contextId!==void 0){let G=a;if(typeof t.contextId!="string"){let Z={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Z]:s.push(Z),a++}var F=G===a}else var F=!0;if(F)if(t.protocolPath!==void 0){let G=a;if(typeof t.protocolPath!="string"){let Z={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Z]:s.push(Z),a++}var F=G===a}else var F=!0}}}}}}else{let C={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[C]:s.push(C),a++}var I=w===a;if(I&&p)p=!1,b=[b,5];else{I&&(p=!0,b=5,P!==!0&&(P=!0));let C=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let V;if(t.interface===void 0&&(V="interface")||t.method===void 0&&(V="method")){let Z={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/required",keyword:"required",params:{missingProperty:V},message:"must have required property '"+V+"'"};s===null?s=[Z]:s.push(Z),a++}else{let Z=a;for(let J in t)if(!(J==="interface"||J==="method"||J==="protocol"||J==="contextId"||J==="protocolPath")){let X={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:J},message:"must NOT have additional properties"};s===null?s=[X]:s.push(X),a++;break}if(Z===a){if(t.interface!==void 0){let J=a;if(t.interface!=="Records"){let X={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[X]:s.push(X),a++}var L=J===a}else var L=!0;if(L){if(t.method!==void 0){let J=a;if(t.method!=="Write"){let se={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/method/const",keyword:"const",params:{allowedValue:"Write"},message:"must be equal to constant"};s===null?s=[se]:s.push(se),a++}var L=J===a}else var L=!0;if(L){if(t.protocol!==void 0){let J=a;if(typeof t.protocol!="string"){let se={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[se]:s.push(se),a++}var L=J===a}else var L=!0;if(L){if(t.contextId!==void 0){let J=a;if(typeof t.contextId!="string"){let se={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[se]:s.push(se),a++}var L=J===a}else var L=!0;if(L)if(t.protocolPath!==void 0){let J=a;if(typeof t.protocolPath!="string"){let se={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[se]:s.push(se),a++}var L=J===a}else var L=!0}}}}}}else{let V={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[V]:s.push(V),a++}var I=C===a;if(I&&p)p=!1,b=[b,6];else{I&&(p=!0,b=6,P!==!0&&(P=!0));let V=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let X;if(t.interface===void 0&&(X="interface")||t.method===void 0&&(X="method")){let se={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/required",keyword:"required",params:{missingProperty:X},message:"must have required property '"+X+"'"};s===null?s=[se]:s.push(se),a++}else{let se=a;for(let Q in t)if(!(Q==="interface"||Q==="method"||Q==="protocol"||Q==="contextId"||Q==="protocolPath")){let te={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Q},message:"must NOT have additional properties"};s===null?s=[te]:s.push(te),a++;break}if(se===a){if(t.interface!==void 0){let Q=a;if(t.interface!=="Records"){let te={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[te]:s.push(te),a++}var W=Q===a}else var W=!0;if(W){if(t.method!==void 0){let Q=a;if(t.method!=="Query"){let de={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};s===null?s=[de]:s.push(de),a++}var W=Q===a}else var W=!0;if(W){if(t.protocol!==void 0){let Q=a;if(typeof t.protocol!="string"){let de={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[de]:s.push(de),a++}var W=Q===a}else var W=!0;if(W){if(t.contextId!==void 0){let Q=a;if(typeof t.contextId!="string"){let de={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[de]:s.push(de),a++}var W=Q===a}else var W=!0;if(W)if(t.protocolPath!==void 0){let Q=a;if(typeof t.protocolPath!="string"){let de={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[de]:s.push(de),a++}var W=Q===a}else var W=!0}}}}}}else{let X={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[X]:s.push(X),a++}var I=V===a;if(I&&p)p=!1,b=[b,7];else{I&&(p=!0,b=7,P!==!0&&(P=!0));let X=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let te;if(t.interface===void 0&&(te="interface")||t.method===void 0&&(te="method")){let de={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/required",keyword:"required",params:{missingProperty:te},message:"must have required property '"+te+"'"};s===null?s=[de]:s.push(de),a++}else{let de=a;for(let ie in t)if(!(ie==="interface"||ie==="method"||ie==="protocol"||ie==="contextId"||ie==="protocolPath")){let ae={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ie},message:"must NOT have additional properties"};s===null?s=[ae]:s.push(ae),a++;break}if(de===a){if(t.interface!==void 0){let ie=a;if(t.interface!=="Records"){let ae={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[ae]:s.push(ae),a++}var E=ie===a}else var E=!0;if(E){if(t.method!==void 0){let ie=a;if(t.method!=="Subscribe"){let fe={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/method/const",keyword:"const",params:{allowedValue:"Subscribe"},message:"must be equal to constant"};s===null?s=[fe]:s.push(fe),a++}var E=ie===a}else var E=!0;if(E){if(t.protocol!==void 0){let ie=a;if(typeof t.protocol!="string"){let fe={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[fe]:s.push(fe),a++}var E=ie===a}else var E=!0;if(E){if(t.contextId!==void 0){let ie=a;if(typeof t.contextId!="string"){let fe={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[fe]:s.push(fe),a++}var E=ie===a}else var E=!0;if(E)if(t.protocolPath!==void 0){let ie=a;if(typeof t.protocolPath!="string"){let fe={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[fe]:s.push(fe),a++}var E=ie===a}else var E=!0}}}}}}else{let te={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[te]:s.push(te),a++}var I=X===a;I&&p?(p=!1,b=[b,8]):I&&(p=!0,b=8,P!==!0&&(P=!0))}}}}}}}if(p)a=m,s!==null&&(m?s.length=m:s=null);else{let c={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:b},message:"must match exactly one schema in oneOf"};return s===null?s=[c]:s.push(c),a++,Qm.errors=s,!1}return Qm.errors=s,u.props=P,a===0}Qm.evaluated={dynamicProps:!0,dynamicItems:!1};function Us(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=Us.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let p;if(t.dateExpires===void 0&&(p="dateExpires")||t.scope===void 0&&(p="scope"))return Us.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{let b=a;for(let A in t)if(!(A==="description"||A==="dateExpires"||A==="requestId"||A==="delegated"||A==="scope"||A==="conditions")){return Us.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:A},message:"must NOT have additional properties"}],!1;break}if(b===a){if(t.description!==void 0){let A=a;if(typeof t.description!="string")return Us.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0;if(m){if(t.dateExpires!==void 0){let A=t.dateExpires,M=a;if(a===a)if(typeof A=="string"){if(!so.test(A))return Us.errors=[{instancePath:e+"/dateExpires",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Us.errors=[{instancePath:e+"/dateExpires",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=M===a}else var m=!0;if(m){if(t.requestId!==void 0){let A=a;if(typeof t.requestId!="string")return Us.errors=[{instancePath:e+"/requestId",schemaPath:"#/properties/requestId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0;if(m){if(t.delegated!==void 0){let A=a;if(typeof t.delegated!="boolean")return Us.errors=[{instancePath:e+"/delegated",schemaPath:"#/properties/delegated/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var m=A===a}else var m=!0;if(m){if(t.scope!==void 0){let A=a;Qm(t.scope,{instancePath:e+"/scope",parentData:t,parentDataProperty:"scope",rootData:i,dynamicAnchors:o})||(s=s===null?Qm.errors:s.concat(Qm.errors),a=s.length);var m=A===a}else var m=!0;if(m)if(t.conditions!==void 0){let A=t.conditions,M=a;if(a===a)if(A&&typeof A=="object"&&!Array.isArray(A)){let k=a;for(let R in A)if(R!=="publication"){return Us.errors=[{instancePath:e+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:R},message:"must NOT have additional properties"}],!1;break}if(k===a&&A.publication!==void 0){let R=A.publication;if(typeof R!="string")return Us.errors=[{instancePath:e+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(R==="Required"||R==="Prohibited"))return Us.errors=[{instancePath:e+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/enum",keyword:"enum",params:{allowedValues:GZ.properties.publication.enum},message:"must be equal to one of the allowed values"}],!1}}else return Us.errors=[{instancePath:e+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=M===a}else var m=!0}}}}}}}else return Us.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Us.errors=s,a===0}Us.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var U4e=pc;function Xm(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=Xm.evaluated;u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0);let m=a,p=!1,b=null,A=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.interface===void 0&&(c="interface")||t.method===void 0&&(c="method")){let l={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"};s===null?s=[l]:s.push(l),a++}else{let l=a;for(let y in t)if(!(y==="interface"||y==="method"||y==="protocol")){let d={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"};s===null?s=[d]:s.push(d),a++;break}if(l===a){if(t.interface!==void 0){let y=a;if(t.interface!=="Messages"){let d={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};s===null?s=[d]:s.push(d),a++}var S=y===a}else var S=!0;if(S){if(t.method!==void 0){let y=a;if(t.method!=="Query"){let h={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};s===null?s=[h]:s.push(h),a++}var S=y===a}else var S=!0;if(S)if(t.protocol!==void 0){let y=a;if(typeof t.protocol!="string"){let h={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[h]:s.push(h),a++}var S=y===a}else var S=!0}}}}else{let c={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[c]:s.push(c),a++}var I=A===a;if(I){p=!0,b=0;var P=!0}let k=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.interface===void 0&&(c="interface")||t.method===void 0&&(c="method")){let l={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"};s===null?s=[l]:s.push(l),a++}else{let l=a;for(let y in t)if(!(y==="interface"||y==="method"||y==="protocol")){let d={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"};s===null?s=[d]:s.push(d),a++;break}if(l===a){if(t.interface!==void 0){let y=a;if(t.interface!=="Messages"){let d={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};s===null?s=[d]:s.push(d),a++}var B=y===a}else var B=!0;if(B){if(t.method!==void 0){let y=a;if(t.method!=="Read"){let h={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};s===null?s=[h]:s.push(h),a++}var B=y===a}else var B=!0;if(B)if(t.protocol!==void 0){let y=a;if(typeof t.protocol!="string"){let h={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[h]:s.push(h),a++}var B=y===a}else var B=!0}}}}else{let c={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[c]:s.push(c),a++}var I=k===a;if(I&&p)p=!1,b=[b,1];else{I&&(p=!0,b=1,P!==!0&&(P=!0));let c=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let d;if(t.interface===void 0&&(d="interface")||t.method===void 0&&(d="method")){let h={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"};s===null?s=[h]:s.push(h),a++}else{let h=a;for(let v in t)if(!(v==="interface"||v==="method"||v==="protocol")){let x={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:v},message:"must NOT have additional properties"};s===null?s=[x]:s.push(x),a++;break}if(h===a){if(t.interface!==void 0){let v=a;if(t.interface!=="Messages"){let x={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};s===null?s=[x]:s.push(x),a++}var q=v===a}else var q=!0;if(q){if(t.method!==void 0){let v=a;if(t.method!=="Subscribe"){let g={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/method/const",keyword:"const",params:{allowedValue:"Subscribe"},message:"must be equal to constant"};s===null?s=[g]:s.push(g),a++}var q=v===a}else var q=!0;if(q)if(t.protocol!==void 0){let v=a;if(typeof t.protocol!="string"){let g={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[g]:s.push(g),a++}var q=v===a}else var q=!0}}}}else{let d={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[d]:s.push(d),a++}var I=c===a;if(I&&p)p=!1,b=[b,2];else{I&&(p=!0,b=2,P!==!0&&(P=!0));let d=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let x;if(t.interface===void 0&&(x="interface")||t.method===void 0&&(x="method")){let g={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"};s===null?s=[g]:s.push(g),a++}else{let g=a;for(let f in t)if(!(f==="interface"||f==="method")){let w={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties"};s===null?s=[w]:s.push(w),a++;break}if(g===a){if(t.interface!==void 0){let f=a;if(t.interface!=="Protocols"){let w={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Protocols"},message:"must be equal to constant"};s===null?s=[w]:s.push(w),a++}var $=f===a}else var $=!0;if($)if(t.method!==void 0){let f=a;if(t.method!=="Query"){let D={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};s===null?s=[D]:s.push(D),a++}var $=f===a}else var $=!0}}}else{let x={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[x]:s.push(x),a++}var I=d===a;if(I&&p)p=!1,b=[b,3];else{I&&(p=!0,b=3,P!==!0&&(P=!0));let x=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let w;if(t.interface===void 0&&(w="interface")||t.method===void 0&&(w="method")){let D={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/required",keyword:"required",params:{missingProperty:w},message:"must have required property '"+w+"'"};s===null?s=[D]:s.push(D),a++}else{let D=a;for(let T in t)if(!(T==="interface"||T==="method"||T==="protocol"||T==="contextId"||T==="protocolPath")){let C={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:T},message:"must NOT have additional properties"};s===null?s=[C]:s.push(C),a++;break}if(D===a){if(t.interface!==void 0){let T=a;if(t.interface!=="Records"){let C={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[C]:s.push(C),a++}var U=T===a}else var U=!0;if(U){if(t.method!==void 0){let T=a;if(t.method!=="Read"){let z={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};s===null?s=[z]:s.push(z),a++}var U=T===a}else var U=!0;if(U){if(t.protocol!==void 0){let T=a;if(typeof t.protocol!="string"){let z={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[z]:s.push(z),a++}var U=T===a}else var U=!0;if(U){if(t.contextId!==void 0){let T=a;if(typeof t.contextId!="string"){let z={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[z]:s.push(z),a++}var U=T===a}else var U=!0;if(U)if(t.protocolPath!==void 0){let T=a;if(typeof t.protocolPath!="string"){let z={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[z]:s.push(z),a++}var U=T===a}else var U=!0}}}}}}else{let w={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[w]:s.push(w),a++}var I=x===a;if(I&&p)p=!1,b=[b,4];else{I&&(p=!0,b=4,P!==!0&&(P=!0));let w=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let C;if(t.interface===void 0&&(C="interface")||t.method===void 0&&(C="method")){let z={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/required",keyword:"required",params:{missingProperty:C},message:"must have required property '"+C+"'"};s===null?s=[z]:s.push(z),a++}else{let z=a;for(let G in t)if(!(G==="interface"||G==="method"||G==="protocol"||G==="contextId"||G==="protocolPath")){let V={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:G},message:"must NOT have additional properties"};s===null?s=[V]:s.push(V),a++;break}if(z===a){if(t.interface!==void 0){let G=a;if(t.interface!=="Records"){let V={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[V]:s.push(V),a++}var F=G===a}else var F=!0;if(F){if(t.method!==void 0){let G=a;if(t.method!=="Delete"){let Z={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/method/const",keyword:"const",params:{allowedValue:"Delete"},message:"must be equal to constant"};s===null?s=[Z]:s.push(Z),a++}var F=G===a}else var F=!0;if(F){if(t.protocol!==void 0){let G=a;if(typeof t.protocol!="string"){let Z={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Z]:s.push(Z),a++}var F=G===a}else var F=!0;if(F){if(t.contextId!==void 0){let G=a;if(typeof t.contextId!="string"){let Z={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Z]:s.push(Z),a++}var F=G===a}else var F=!0;if(F)if(t.protocolPath!==void 0){let G=a;if(typeof t.protocolPath!="string"){let Z={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Z]:s.push(Z),a++}var F=G===a}else var F=!0}}}}}}else{let C={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[C]:s.push(C),a++}var I=w===a;if(I&&p)p=!1,b=[b,5];else{I&&(p=!0,b=5,P!==!0&&(P=!0));let C=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let V;if(t.interface===void 0&&(V="interface")||t.method===void 0&&(V="method")){let Z={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/required",keyword:"required",params:{missingProperty:V},message:"must have required property '"+V+"'"};s===null?s=[Z]:s.push(Z),a++}else{let Z=a;for(let J in t)if(!(J==="interface"||J==="method"||J==="protocol"||J==="contextId"||J==="protocolPath")){let X={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:J},message:"must NOT have additional properties"};s===null?s=[X]:s.push(X),a++;break}if(Z===a){if(t.interface!==void 0){let J=a;if(t.interface!=="Records"){let X={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[X]:s.push(X),a++}var L=J===a}else var L=!0;if(L){if(t.method!==void 0){let J=a;if(t.method!=="Write"){let se={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/method/const",keyword:"const",params:{allowedValue:"Write"},message:"must be equal to constant"};s===null?s=[se]:s.push(se),a++}var L=J===a}else var L=!0;if(L){if(t.protocol!==void 0){let J=a;if(typeof t.protocol!="string"){let se={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[se]:s.push(se),a++}var L=J===a}else var L=!0;if(L){if(t.contextId!==void 0){let J=a;if(typeof t.contextId!="string"){let se={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[se]:s.push(se),a++}var L=J===a}else var L=!0;if(L)if(t.protocolPath!==void 0){let J=a;if(typeof t.protocolPath!="string"){let se={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[se]:s.push(se),a++}var L=J===a}else var L=!0}}}}}}else{let V={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[V]:s.push(V),a++}var I=C===a;if(I&&p)p=!1,b=[b,6];else{I&&(p=!0,b=6,P!==!0&&(P=!0));let V=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let X;if(t.interface===void 0&&(X="interface")||t.method===void 0&&(X="method")){let se={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/required",keyword:"required",params:{missingProperty:X},message:"must have required property '"+X+"'"};s===null?s=[se]:s.push(se),a++}else{let se=a;for(let Q in t)if(!(Q==="interface"||Q==="method"||Q==="protocol"||Q==="contextId"||Q==="protocolPath")){let te={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Q},message:"must NOT have additional properties"};s===null?s=[te]:s.push(te),a++;break}if(se===a){if(t.interface!==void 0){let Q=a;if(t.interface!=="Records"){let te={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[te]:s.push(te),a++}var W=Q===a}else var W=!0;if(W){if(t.method!==void 0){let Q=a;if(t.method!=="Query"){let de={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};s===null?s=[de]:s.push(de),a++}var W=Q===a}else var W=!0;if(W){if(t.protocol!==void 0){let Q=a;if(typeof t.protocol!="string"){let de={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[de]:s.push(de),a++}var W=Q===a}else var W=!0;if(W){if(t.contextId!==void 0){let Q=a;if(typeof t.contextId!="string"){let de={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[de]:s.push(de),a++}var W=Q===a}else var W=!0;if(W)if(t.protocolPath!==void 0){let Q=a;if(typeof t.protocolPath!="string"){let de={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[de]:s.push(de),a++}var W=Q===a}else var W=!0}}}}}}else{let X={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[X]:s.push(X),a++}var I=V===a;if(I&&p)p=!1,b=[b,7];else{I&&(p=!0,b=7,P!==!0&&(P=!0));let X=a;if(a===a)if(t&&typeof t=="object"&&!Array.isArray(t)){let te;if(t.interface===void 0&&(te="interface")||t.method===void 0&&(te="method")){let de={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/required",keyword:"required",params:{missingProperty:te},message:"must have required property '"+te+"'"};s===null?s=[de]:s.push(de),a++}else{let de=a;for(let ie in t)if(!(ie==="interface"||ie==="method"||ie==="protocol"||ie==="contextId"||ie==="protocolPath")){let ae={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ie},message:"must NOT have additional properties"};s===null?s=[ae]:s.push(ae),a++;break}if(de===a){if(t.interface!==void 0){let ie=a;if(t.interface!=="Records"){let ae={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};s===null?s=[ae]:s.push(ae),a++}var E=ie===a}else var E=!0;if(E){if(t.method!==void 0){let ie=a;if(t.method!=="Subscribe"){let fe={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/method/const",keyword:"const",params:{allowedValue:"Subscribe"},message:"must be equal to constant"};s===null?s=[fe]:s.push(fe),a++}var E=ie===a}else var E=!0;if(E){if(t.protocol!==void 0){let ie=a;if(typeof t.protocol!="string"){let fe={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[fe]:s.push(fe),a++}var E=ie===a}else var E=!0;if(E){if(t.contextId!==void 0){let ie=a;if(typeof t.contextId!="string"){let fe={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[fe]:s.push(fe),a++}var E=ie===a}else var E=!0;if(E)if(t.protocolPath!==void 0){let ie=a;if(typeof t.protocolPath!="string"){let fe={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[fe]:s.push(fe),a++}var E=ie===a}else var E=!0}}}}}}else{let te={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[te]:s.push(te),a++}var I=X===a;I&&p?(p=!1,b=[b,8]):I&&(p=!0,b=8,P!==!0&&(P=!0))}}}}}}}if(p)a=m,s!==null&&(m?s.length=m:s=null);else{let c={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:b},message:"must match exactly one schema in oneOf"};return s===null?s=[c]:s.push(c),a++,Xm.errors=s,!1}return Xm.errors=s,u.props=P,a===0}Xm.evaluated={dynamicProps:!0,dynamicItems:!1};function pc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=pc.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let p;if(t.delegated===void 0&&(p="delegated")||t.scope===void 0&&(p="scope"))return pc.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{let b=a;for(let A in t)if(!(A==="description"||A==="delegated"||A==="scope"||A==="conditions")){return pc.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:A},message:"must NOT have additional properties"}],!1;break}if(b===a){if(t.description!==void 0){let A=a;if(typeof t.description!="string")return pc.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0;if(m){if(t.delegated!==void 0){let A=a;if(typeof t.delegated!="boolean")return pc.errors=[{instancePath:e+"/delegated",schemaPath:"#/properties/delegated/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var m=A===a}else var m=!0;if(m){if(t.scope!==void 0){let A=a;Xm(t.scope,{instancePath:e+"/scope",parentData:t,parentDataProperty:"scope",rootData:i,dynamicAnchors:o})||(s=s===null?Xm.errors:s.concat(Xm.errors),a=s.length);var m=A===a}else var m=!0;if(m)if(t.conditions!==void 0){let A=t.conditions,M=a;if(a===a)if(A&&typeof A=="object"&&!Array.isArray(A)){let k=a;for(let R in A)if(R!=="publication"){return pc.errors=[{instancePath:e+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:R},message:"must NOT have additional properties"}],!1;break}if(k===a&&A.publication!==void 0){let R=A.publication;if(typeof R!="string")return pc.errors=[{instancePath:e+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(R==="Required"||R==="Prohibited"))return pc.errors=[{instancePath:e+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/enum",keyword:"enum",params:{allowedValues:GZ.properties.publication.enum},message:"must be equal to one of the allowed values"}],!1}}else return pc.errors=[{instancePath:e+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=M===a}else var m=!0}}}}}else return pc.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return pc.errors=s,a===0}pc.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var F4e=Jm;function Jm(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=Jm.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let m=a;for(let p in t)if(p!=="description"){return Jm.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties"}],!1;break}if(m===a&&t.description!==void 0&&typeof t.description!="string")return Jm.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1}else return Jm.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Jm.errors=s,a===0}Jm.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var z4e=N_;function N_(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=N_.evaluated;return u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),t&&typeof t=="object"&&!Array.isArray(t)?(N_.errors=s,a===0):(N_.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}N_.evaluated={dynamicProps:!1,dynamicItems:!1};var K4e=j_;function j_(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=j_.evaluated;return u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),t&&typeof t=="object"&&!Array.isArray(t)?(j_.errors=s,a===0):(j_.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}j_.evaluated={dynamicProps:!1,dynamicItems:!1};var W4e=oo;var qZ=new RegExp(".*","u"),xv={$id:"https://identity.foundation/dwn/json-schemas/protocol-rule-set.json",$schema:"https://json-schema.org/draft/2020-12/schema",type:"object",additionalProperties:!1,properties:{$encryption:{type:"object",additionalProperties:!1,properties:{rootKeyId:{type:"string"},publicKeyJwk:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"}},required:["rootKeyId","publicKeyJwk"]},$actions:{type:"array",minItems:1,items:{type:"object",oneOf:[{required:["who","can"],additionalProperties:!1,properties:{who:{type:"string",enum:["anyone","author","recipient"]},of:{type:"string"},can:{type:"array",minItems:1,items:{type:"string",enum:["co-delete","co-prune","co-update","create","delete","prune","read","update"]}}}},{required:["role","can"],properties:{role:{$comment:"Must be the protocol path of a role record type",type:"string"},can:{type:"array",minItems:1,items:{type:"string",enum:["co-delete","co-update","create","delete","query","subscribe","read","update"]}}}}]}},$role:{$comment:"When `true`, this turns a record into `role` that may be used within a context/sub-context",type:"boolean"},$size:{type:"object",additionalProperties:!1,properties:{min:{type:"number",minimum:0},max:{type:"number",minimum:0}}},$tags:{type:"object",minProperties:1,properties:{$requiredTags:{type:"array",items:{type:"string"}},$allowUndefinedTags:{type:"boolean"}},patternProperties:{"^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$":{type:"object",additionalProperties:!1,properties:{type:{enum:["string","number","integer","boolean","array"]},items:{type:"object",properties:{type:{enum:["string","number","integer"]}},patternProperties:{"^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength)$":{}}},contains:{type:"object",properties:{type:{enum:["string","number","integer"]}},patternProperties:{"^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength)$":{}}}},patternProperties:{"^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength|minItems|maxItems|uniqueItems|minContains|maxContains)$":{}}}}}},patternProperties:{"^[^$].*$":{$ref:"https://identity.foundation/dwn/json-schemas/protocol-rule-set.json"}}},$Z=new RegExp("^[^$].*$","u"),G4e=new RegExp("^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$","u"),V4e=new RegExp("^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength|minItems|maxItems|uniqueItems|minContains|maxContains)$","u"),LZ=new RegExp("^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength)$","u"),$7={validate:Br};function Br(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=Br.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let l=a;for(let y in t)if(!(y==="$encryption"||y==="$actions"||y==="$role"||y==="$size"||y==="$tags"||$Z.test(y))){return Br.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;break}if(l===a){if(t.$encryption!==void 0){let y=t.$encryption,d=a;if(a===d)if(y&&typeof y=="object"&&!Array.isArray(y)){let h;if(y.rootKeyId===void 0&&(h="rootKeyId")||y.publicKeyJwk===void 0&&(h="publicKeyJwk"))return Br.errors=[{instancePath:e+"/$encryption",schemaPath:"#/properties/%24encryption/required",keyword:"required",params:{missingProperty:h},message:"must have required property '"+h+"'"}],!1;{let v=a;for(let x in y)if(!(x==="rootKeyId"||x==="publicKeyJwk")){return Br.errors=[{instancePath:e+"/$encryption",schemaPath:"#/properties/%24encryption/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:x},message:"must NOT have additional properties"}],!1;break}if(v===a){if(y.rootKeyId!==void 0){let x=a;if(typeof y.rootKeyId!="string")return Br.errors=[{instancePath:e+"/$encryption/rootKeyId",schemaPath:"#/properties/%24encryption/properties/rootKeyId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=x===a}else var m=!0;if(m)if(y.publicKeyJwk!==void 0){let x=a;un(y.publicKeyJwk,{instancePath:e+"/$encryption/publicKeyJwk",parentData:y,parentDataProperty:"publicKeyJwk",rootData:i,dynamicAnchors:o})||(s=s===null?un.errors:s.concat(un.errors),a=s.length);var m=x===a}else var m=!0}}}else return Br.errors=[{instancePath:e+"/$encryption",schemaPath:"#/properties/%24encryption/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=d===a}else var p=!0;if(p){if(t.$actions!==void 0){let y=t.$actions,d=a;if(a===d)if(Array.isArray(y)){if(y.length<1)return Br.errors=[{instancePath:e+"/$actions",schemaPath:"#/properties/%24actions/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var b=!0;let v=y.length;for(let x=0;x<v;x++){let g=y[x],f=a;if(!(g&&typeof g=="object"&&!Array.isArray(g)))return Br.errors=[{instancePath:e+"/$actions/"+x,schemaPath:"#/properties/%24actions/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;let w=a,D=!1,T=null,C=a;if(g&&typeof g=="object"&&!Array.isArray(g)){let V;if(g.who===void 0&&(V="who")||g.can===void 0&&(V="can")){let Z={instancePath:e+"/$actions/"+x,schemaPath:"#/properties/%24actions/items/oneOf/0/required",keyword:"required",params:{missingProperty:V},message:"must have required property '"+V+"'"};s===null?s=[Z]:s.push(Z),a++}else{let Z=a;for(let J in g)if(!(J==="who"||J==="of"||J==="can")){let X={instancePath:e+"/$actions/"+x,schemaPath:"#/properties/%24actions/items/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:J},message:"must NOT have additional properties"};s===null?s=[X]:s.push(X),a++;break}if(Z===a){if(g.who!==void 0){let J=g.who,X=a;if(typeof J!="string"){let se={instancePath:e+"/$actions/"+x+"/who",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/who/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[se]:s.push(se),a++}if(!(J==="anyone"||J==="author"||J==="recipient")){let se={instancePath:e+"/$actions/"+x+"/who",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/who/enum",keyword:"enum",params:{allowedValues:xv.properties.$actions.items.oneOf[0].properties.who.enum},message:"must be equal to one of the allowed values"};s===null?s=[se]:s.push(se),a++}var A=X===a}else var A=!0;if(A){if(g.of!==void 0){let J=a;if(typeof g.of!="string"){let se={instancePath:e+"/$actions/"+x+"/of",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/of/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[se]:s.push(se),a++}var A=J===a}else var A=!0;if(A)if(g.can!==void 0){let J=g.can,X=a;if(a===X)if(Array.isArray(J))if(J.length<1){let Q={instancePath:e+"/$actions/"+x+"/can",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};s===null?s=[Q]:s.push(Q),a++}else{var M=!0;let Q=J.length;for(let te=0;te<Q;te++){let de=J[te],ie=a;if(typeof de!="string"){let fe={instancePath:e+"/$actions/"+x+"/can/"+te,schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/items/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[fe]:s.push(fe),a++}if(!(de==="co-delete"||de==="co-prune"||de==="co-update"||de==="create"||de==="delete"||de==="prune"||de==="read"||de==="update")){let fe={instancePath:e+"/$actions/"+x+"/can/"+te,schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/items/enum",keyword:"enum",params:{allowedValues:xv.properties.$actions.items.oneOf[0].properties.can.items.enum},message:"must be equal to one of the allowed values"};s===null?s=[fe]:s.push(fe),a++}var M=ie===a;if(!M)break}}else{let Q={instancePath:e+"/$actions/"+x+"/can",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[Q]:s.push(Q),a++}var A=X===a}else var A=!0}}}}var R=C===a;if(R){D=!0,T=0;var S=!0}let z=a;if(g&&typeof g=="object"&&!Array.isArray(g)){let V;if(g.role===void 0&&(V="role")||g.can===void 0&&(V="can")){let Z={instancePath:e+"/$actions/"+x,schemaPath:"#/properties/%24actions/items/oneOf/1/required",keyword:"required",params:{missingProperty:V},message:"must have required property '"+V+"'"};s===null?s=[Z]:s.push(Z),a++}else{if(g.role!==void 0){let Z=a;if(typeof g.role!="string"){let J={instancePath:e+"/$actions/"+x+"/role",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/role/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[J]:s.push(J),a++}var P=Z===a}else var P=!0;if(P)if(g.can!==void 0){let Z=g.can,J=a;if(a===J)if(Array.isArray(Z))if(Z.length<1){let se={instancePath:e+"/$actions/"+x+"/can",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};s===null?s=[se]:s.push(se),a++}else{var k=!0;let se=Z.length;for(let Q=0;Q<se;Q++){let te=Z[Q],de=a;if(typeof te!="string"){let ae={instancePath:e+"/$actions/"+x+"/can/"+Q,schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/items/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[ae]:s.push(ae),a++}if(!(te==="co-delete"||te==="co-update"||te==="create"||te==="delete"||te==="query"||te==="subscribe"||te==="read"||te==="update")){let ae={instancePath:e+"/$actions/"+x+"/can/"+Q,schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/items/enum",keyword:"enum",params:{allowedValues:xv.properties.$actions.items.oneOf[1].properties.can.items.enum},message:"must be equal to one of the allowed values"};s===null?s=[ae]:s.push(ae),a++}var k=de===a;if(!k)break}}else{let se={instancePath:e+"/$actions/"+x+"/can",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[se]:s.push(se),a++}var P=J===a}else var P=!0}}var R=z===a;if(R&&D?(D=!1,T=[T,1]):R&&(D=!0,T=1,S!==!0&&(S=S||{},S.role=!0,S.can=!0)),D)a=w,s!==null&&(w?s.length=w:s=null);else{let V={instancePath:e+"/$actions/"+x,schemaPath:"#/properties/%24actions/items/oneOf",keyword:"oneOf",params:{passingSchemas:T},message:"must match exactly one schema in oneOf"};return s===null?s=[V]:s.push(V),a++,Br.errors=s,!1}var b=f===a;if(!b)break}}}else return Br.errors=[{instancePath:e+"/$actions",schemaPath:"#/properties/%24actions/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var p=d===a}else var p=!0;if(p){if(t.$role!==void 0){let y=a;if(typeof t.$role!="boolean")return Br.errors=[{instancePath:e+"/$role",schemaPath:"#/properties/%24role/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var p=y===a}else var p=!0;if(p){if(t.$size!==void 0){let y=t.$size,d=a;if(a===d)if(y&&typeof y=="object"&&!Array.isArray(y)){let v=a;for(let x in y)if(!(x==="min"||x==="max")){return Br.errors=[{instancePath:e+"/$size",schemaPath:"#/properties/%24size/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:x},message:"must NOT have additional properties"}],!1;break}if(v===a){if(y.min!==void 0){let x=y.min,g=a;if(a===g)if(typeof x=="number"&&isFinite(x)){if(x<0||isNaN(x))return Br.errors=[{instancePath:e+"/$size/min",schemaPath:"#/properties/%24size/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1}else return Br.errors=[{instancePath:e+"/$size/min",schemaPath:"#/properties/%24size/properties/min/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var B=g===a}else var B=!0;if(B)if(y.max!==void 0){let x=y.max,g=a;if(a===g)if(typeof x=="number"&&isFinite(x)){if(x<0||isNaN(x))return Br.errors=[{instancePath:e+"/$size/max",schemaPath:"#/properties/%24size/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1}else return Br.errors=[{instancePath:e+"/$size/max",schemaPath:"#/properties/%24size/properties/max/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var B=g===a}else var B=!0}}else return Br.errors=[{instancePath:e+"/$size",schemaPath:"#/properties/%24size/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=d===a}else var p=!0;if(p){if(t.$tags!==void 0){let y=t.$tags,d=a;if(a===d)if(y&&typeof y=="object"&&!Array.isArray(y)){if(Object.keys(y).length<1)return Br.errors=[{instancePath:e+"/$tags",schemaPath:"#/properties/%24tags/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;if(y.$requiredTags!==void 0){let v=y.$requiredTags,x=a;if(a===x)if(Array.isArray(v)){var I=!0;let g=v.length;for(let f=0;f<g;f++){let w=a;if(typeof v[f]!="string")return Br.errors=[{instancePath:e+"/$tags/$requiredTags/"+f,schemaPath:"#/properties/%24tags/properties/%24requiredTags/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var I=w===a;if(!I)break}}else return Br.errors=[{instancePath:e+"/$tags/$requiredTags",schemaPath:"#/properties/%24tags/properties/%24requiredTags/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var q=x===a}else var q=!0;if(q){if(y.$allowUndefinedTags!==void 0){let v=a;if(typeof y.$allowUndefinedTags!="boolean")return Br.errors=[{instancePath:e+"/$tags/$allowUndefinedTags",schemaPath:"#/properties/%24tags/properties/%24allowUndefinedTags/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var q=v===a}else var q=!0;if(q){var $={};$.$requiredTags=!0,$.$allowUndefinedTags=!0;for(let v in y)if(G4e.test(v)){let x=y[v];if(a===a)if(x&&typeof x=="object"&&!Array.isArray(x)){let f=a;for(let w in x)if(!(w==="type"||w==="items"||w==="contains"||V4e.test(w))){return Br.errors=[{instancePath:e+"/$tags/"+v.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:w},message:"must NOT have additional properties"}],!1;break}if(f===a){if(x.type!==void 0){let w=x.type,D=a;if(!(w==="string"||w==="number"||w==="integer"||w==="boolean"||w==="array"))return Br.errors=[{instancePath:e+"/$tags/"+v.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/type/enum",keyword:"enum",params:{allowedValues:xv.properties.$tags.patternProperties["^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$"].properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var U=D===a}else var U=!0;if(U){if(x.items!==void 0){let w=x.items,D=a;if(a===D)if(w&&typeof w=="object"&&!Array.isArray(w)){if(w.type!==void 0){let C=w.type,z=a;if(!(C==="string"||C==="number"||C==="integer"))return Br.errors=[{instancePath:e+"/$tags/"+v.replace(/~/g,"~0").replace(/\//g,"~1")+"/items/type",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/items/properties/type/enum",keyword:"enum",params:{allowedValues:xv.properties.$tags.patternProperties["^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$"].properties.items.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var F=z===a}else var F=!0;if(F){var L={};L.type=!0;for(let C in w)LZ.test(C)&&(L[C]=!0)}}else return Br.errors=[{instancePath:e+"/$tags/"+v.replace(/~/g,"~0").replace(/\//g,"~1")+"/items",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var U=D===a}else var U=!0;if(U)if(x.contains!==void 0){let w=x.contains,D=a;if(a===D)if(w&&typeof w=="object"&&!Array.isArray(w)){if(w.type!==void 0){let C=w.type,z=a;if(!(C==="string"||C==="number"||C==="integer"))return Br.errors=[{instancePath:e+"/$tags/"+v.replace(/~/g,"~0").replace(/\//g,"~1")+"/contains/type",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/contains/properties/type/enum",keyword:"enum",params:{allowedValues:xv.properties.$tags.patternProperties["^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$"].properties.contains.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var W=z===a}else var W=!0;if(W){var E={};E.type=!0;for(let C in w)LZ.test(C)&&(E[C]=!0)}}else return Br.errors=[{instancePath:e+"/$tags/"+v.replace(/~/g,"~0").replace(/\//g,"~1")+"/contains",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/contains/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var U=D===a}else var U=!0}}}else return Br.errors=[{instancePath:e+"/$tags/"+v.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;$[v]=!0}}}}else return Br.errors=[{instancePath:e+"/$tags",schemaPath:"#/properties/%24tags/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=d===a}else var p=!0;if(p){var c=!0;for(let y in t)if($Z.test(y)){let d=a;$7.validate(t[y],{instancePath:e+"/"+y.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:t,parentDataProperty:y,rootData:i,dynamicAnchors:o})||(s=s===null?$7.validate.errors:s.concat($7.validate.errors),a=s.length);var c=d===a;if(!c)break}}}}}}}}else return Br.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Br.errors=s,a===0}Br.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function oo(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=oo.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let S;if(t.protocol===void 0&&(S="protocol")||t.published===void 0&&(S="published")||t.types===void 0&&(S="types")||t.structure===void 0&&(S="structure"))return oo.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"}],!1;{let P=a;for(let k in t)if(!(k==="protocol"||k==="published"||k==="types"||k==="structure")){return oo.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:k},message:"must NOT have additional properties"}],!1;break}if(P===a){if(t.protocol!==void 0){let k=a;if(typeof t.protocol!="string")return oo.errors=[{instancePath:e+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=k===a}else var m=!0;if(m){if(t.published!==void 0){let k=a;if(typeof t.published!="boolean")return oo.errors=[{instancePath:e+"/published",schemaPath:"#/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var m=k===a}else var m=!0;if(m){if(t.types!==void 0){let k=t.types,R=a;if(a===R)if(k&&typeof k=="object"&&!Array.isArray(k)){var p={};for(let I in k)if(qZ.test(I)){let q=k[I];if(a===a)if(q&&typeof q=="object"&&!Array.isArray(q)){let U=a;for(let F in q)if(!(F==="schema"||F==="dataFormats")){return oo.errors=[{instancePath:e+"/types/"+I.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/types/patternProperties/.*/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:F},message:"must NOT have additional properties"}],!1;break}if(U===a){if(q.schema!==void 0){let F=a;if(typeof q.schema!="string")return oo.errors=[{instancePath:e+"/types/"+I.replace(/~/g,"~0").replace(/\//g,"~1")+"/schema",schemaPath:"#/properties/types/patternProperties/.*/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var b=F===a}else var b=!0;if(b)if(q.dataFormats!==void 0){let F=q.dataFormats,L=a;if(a===L)if(Array.isArray(F)){if(F.length<1)return oo.errors=[{instancePath:e+"/types/"+I.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats",schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var A=!0;let E=F.length;for(let c=0;c<E;c++){let l=a;if(typeof F[c]!="string")return oo.errors=[{instancePath:e+"/types/"+I.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats/"+c,schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var A=l===a;if(!A)break}}}else return oo.errors=[{instancePath:e+"/types/"+I.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats",schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var b=L===a}else var b=!0}}else return oo.errors=[{instancePath:e+"/types/"+I.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/types/patternProperties/.*/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;p[I]=!0}}else return oo.errors=[{instancePath:e+"/types",schemaPath:"#/properties/types/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=R===a}else var m=!0;if(m)if(t.structure!==void 0){let k=t.structure,R=a;if(a===R)if(k&&typeof k=="object"&&!Array.isArray(k)){var M={};for(let I in k)qZ.test(I)&&(Br(k[I],{instancePath:e+"/structure/"+I.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:k,parentDataProperty:I,rootData:i,dynamicAnchors:o})||(s=s===null?Br.errors:s.concat(Br.errors),a=s.length),M[I]=!0)}else return oo.errors=[{instancePath:e+"/structure",schemaPath:"#/properties/structure/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=R===a}else var m=!0}}}}}else return oo.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return oo.errors=s,a===0}oo.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var H4e=Br,Z4e=Fs,UZ={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/protocols-configure.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","definition"],properties:{interface:{enum:["Protocols"],type:"string"},method:{enum:["Configure"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},definition:{$ref:"https://identity.foundation/dwn/json-schemas/protocol-definition.json"}}}}};function Fs(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=Fs.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let b;if(t.authorization===void 0&&(b="authorization")||t.descriptor===void 0&&(b="descriptor"))return Fs.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:b},message:"must have required property '"+b+"'"}],!1;{let A=a;for(let M in t)if(!(M==="authorization"||M==="descriptor")){return Fs.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:M},message:"must NOT have additional properties"}],!1;break}if(A===a){if(t.authorization!==void 0){let M=a;Fi(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?Fi.errors:s.concat(Fi.errors),a=s.length);var m=M===a}else var m=!0;if(m)if(t.descriptor!==void 0){let M=t.descriptor,S=a;if(a===S)if(M&&typeof M=="object"&&!Array.isArray(M)){let k;if(M.interface===void 0&&(k="interface")||M.method===void 0&&(k="method")||M.messageTimestamp===void 0&&(k="messageTimestamp")||M.definition===void 0&&(k="definition"))return Fs.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:k},message:"must have required property '"+k+"'"}],!1;{let R=a;for(let B in M)if(!(B==="interface"||B==="method"||B==="messageTimestamp"||B==="definition")){return Fs.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:B},message:"must NOT have additional properties"}],!1;break}if(R===a){if(M.interface!==void 0){let B=M.interface,I=a;if(typeof B!="string")return Fs.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(B!=="Protocols")return Fs.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:UZ.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var p=I===a}else var p=!0;if(p){if(M.method!==void 0){let B=M.method,I=a;if(typeof B!="string")return Fs.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(B!=="Configure")return Fs.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:UZ.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var p=I===a}else var p=!0;if(p){if(M.messageTimestamp!==void 0){let B=M.messageTimestamp,I=a;if(a===a)if(typeof B=="string"){if(!so.test(B))return Fs.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Fs.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=I===a}else var p=!0;if(p)if(M.definition!==void 0){let B=a;oo(M.definition,{instancePath:e+"/descriptor/definition",parentData:M,parentDataProperty:"definition",rootData:i,dynamicAnchors:o})||(s=s===null?oo.errors:s.concat(oo.errors),a=s.length);var p=B===a}else var p=!0}}}}}else return Fs.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===a}else var m=!0}}}else return Fs.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Fs.errors=s,a===0}Fs.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var J4e=Pi,FZ={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/protocols-query.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp"],properties:{interface:{enum:["Protocols"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{type:"object",minProperties:1,additionalProperties:!1,properties:{protocol:{type:"string"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"}}}}}}};function Pi(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=Pi.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let A;if(t.descriptor===void 0&&(A="descriptor"))return Pi.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:A},message:"must have required property '"+A+"'"}],!1;{let M=a;for(let S in t)if(!(S==="authorization"||S==="descriptor")){return Pi.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:S},message:"must NOT have additional properties"}],!1;break}if(M===a){if(t.authorization!==void 0){let S=a;Fi(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?Fi.errors:s.concat(Fi.errors),a=s.length);var m=S===a}else var m=!0;if(m)if(t.descriptor!==void 0){let S=t.descriptor,P=a;if(a===P)if(S&&typeof S=="object"&&!Array.isArray(S)){let R;if(S.interface===void 0&&(R="interface")||S.method===void 0&&(R="method")||S.messageTimestamp===void 0&&(R="messageTimestamp"))return Pi.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:R},message:"must have required property '"+R+"'"}],!1;{let B=a;for(let I in S)if(!(I==="interface"||I==="method"||I==="messageTimestamp"||I==="filter")){return Pi.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:I},message:"must NOT have additional properties"}],!1;break}if(B===a){if(S.interface!==void 0){let I=S.interface,q=a;if(typeof I!="string")return Pi.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(I!=="Protocols")return Pi.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:FZ.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var p=q===a}else var p=!0;if(p){if(S.method!==void 0){let I=S.method,q=a;if(typeof I!="string")return Pi.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(I!=="Query")return Pi.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:FZ.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var p=q===a}else var p=!0;if(p){if(S.messageTimestamp!==void 0){let I=S.messageTimestamp,q=a;if(a===a)if(typeof I=="string"){if(!so.test(I))return Pi.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Pi.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=q===a}else var p=!0;if(p)if(S.filter!==void 0){let I=S.filter,q=a;if(a===q)if(I&&typeof I=="object"&&!Array.isArray(I)){if(Object.keys(I).length<1)return Pi.errors=[{instancePath:e+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let U=a;for(let F in I)if(!(F==="protocol"||F==="recipient")){return Pi.errors=[{instancePath:e+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:F},message:"must NOT have additional properties"}],!1;break}if(U===a){if(I.protocol!==void 0){let F=a;if(typeof I.protocol!="string")return Pi.errors=[{instancePath:e+"/descriptor/filter/protocol",schemaPath:"#/properties/descriptor/properties/filter/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var b=F===a}else var b=!0;if(b)if(I.recipient!==void 0){let F=I.recipient,L=a;if(a===a)if(typeof F=="string"){if(!qp.test(F))return Pi.errors=[{instancePath:e+"/descriptor/filter/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return Pi.errors=[{instancePath:e+"/descriptor/filter/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var b=L===a}else var b=!0}}}else return Pi.errors=[{instancePath:e+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=q===a}else var p=!0}}}}}else return Pi.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=P===a}else var m=!0}}}else return Pi.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Pi.errors=s,a===0}Pi.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Y4e=zs,zZ={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-read.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Read"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"}}}}};function zs(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=zs.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let b;if(t.descriptor===void 0&&(b="descriptor"))return zs.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:b},message:"must have required property '"+b+"'"}],!1;{let A=a;for(let M in t)if(!(M==="authorization"||M==="descriptor")){return zs.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:M},message:"must NOT have additional properties"}],!1;break}if(A===a){if(t.authorization!==void 0){let M=a;Lo(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:o})||(s=s===null?Lo.errors:s.concat(Lo.errors),a=s.length);var m=M===a}else var m=!0;if(m)if(t.descriptor!==void 0){let M=t.descriptor,S=a;if(a===S)if(M&&typeof M=="object"&&!Array.isArray(M)){let k;if(M.interface===void 0&&(k="interface")||M.method===void 0&&(k="method")||M.messageTimestamp===void 0&&(k="messageTimestamp")||M.filter===void 0&&(k="filter"))return zs.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:k},message:"must have required property '"+k+"'"}],!1;{let R=a;for(let B in M)if(!(B==="interface"||B==="method"||B==="messageTimestamp"||B==="filter")){return zs.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:B},message:"must NOT have additional properties"}],!1;break}if(R===a){if(M.interface!==void 0){let B=M.interface,I=a;if(typeof B!="string")return zs.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(B!=="Records")return zs.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:zZ.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var p=I===a}else var p=!0;if(p){if(M.method!==void 0){let B=M.method,I=a;if(typeof B!="string")return zs.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(B!=="Read")return zs.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:zZ.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var p=I===a}else var p=!0;if(p){if(M.messageTimestamp!==void 0){let B=M.messageTimestamp,I=a;if(a===a)if(typeof B=="string"){if(!so.test(B))return zs.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return zs.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=I===a}else var p=!0;if(p)if(M.filter!==void 0){let B=a;st(M.filter,{instancePath:e+"/descriptor/filter",parentData:M,parentDataProperty:"filter",rootData:i,dynamicAnchors:o})||(s=s===null?st.errors:s.concat(st.errors),a=s.length);var p=B===a}else var p=!0}}}}}else return zs.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=S===a}else var m=!0}}}else return zs.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return zs.errors=s,a===0}zs.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Q4e=st,X4e=un,eAe=Jf;function Jf(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=Jf.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let p;if(t.descriptorCid===void 0&&(p="descriptorCid"))return Jf.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{let b=a;for(let A in t)if(!(A==="descriptorCid"||A==="delegatedGrantId"||A==="permissionGrantId"||A==="protocolRole")){return Jf.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:A},message:"must NOT have additional properties"}],!1;break}if(b===a){if(t.descriptorCid!==void 0){let A=a;if(typeof t.descriptorCid!="string")return Jf.errors=[{instancePath:e+"/descriptorCid",schemaPath:"#/properties/descriptorCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0;if(m){if(t.delegatedGrantId!==void 0){let A=a;if(typeof t.delegatedGrantId!="string")return Jf.errors=[{instancePath:e+"/delegatedGrantId",schemaPath:"#/properties/delegatedGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0;if(m){if(t.permissionGrantId!==void 0){let A=a;if(typeof t.permissionGrantId!="string")return Jf.errors=[{instancePath:e+"/permissionGrantId",schemaPath:"#/properties/permissionGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0;if(m)if(t.protocolRole!==void 0){let A=a;if(typeof t.protocolRole!="string")return Jf.errors=[{instancePath:e+"/protocolRole",schemaPath:"#/properties/protocolRole/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0}}}}}else return Jf.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Jf.errors=s,a===0}Jf.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var tAe=ya;function ya(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=ya.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let p;if(t.descriptorCid===void 0&&(p="descriptorCid")||t.recordId===void 0&&(p="recordId"))return ya.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{let b=a;for(let A in t)if(!(A==="descriptorCid"||A==="recordId"||A==="contextId"||A==="attestationCid"||A==="encryptionCid"||A==="delegatedGrantId"||A==="permissionGrantId"||A==="protocolRole")){return ya.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:A},message:"must NOT have additional properties"}],!1;break}if(b===a){if(t.descriptorCid!==void 0){let A=a;if(typeof t.descriptorCid!="string")return ya.errors=[{instancePath:e+"/descriptorCid",schemaPath:"#/properties/descriptorCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0;if(m){if(t.recordId!==void 0){let A=a;if(typeof t.recordId!="string")return ya.errors=[{instancePath:e+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0;if(m){if(t.contextId!==void 0){let A=a;if(typeof t.contextId!="string")return ya.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0;if(m){if(t.attestationCid!==void 0){let A=a;if(typeof t.attestationCid!="string")return ya.errors=[{instancePath:e+"/attestationCid",schemaPath:"#/properties/attestationCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0;if(m){if(t.encryptionCid!==void 0){let A=a;if(typeof t.encryptionCid!="string")return ya.errors=[{instancePath:e+"/encryptionCid",schemaPath:"#/properties/encryptionCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0;if(m){if(t.delegatedGrantId!==void 0){let A=a;if(typeof t.delegatedGrantId!="string")return ya.errors=[{instancePath:e+"/delegatedGrantId",schemaPath:"#/properties/delegatedGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0;if(m){if(t.permissionGrantId!==void 0){let A=a;if(typeof t.permissionGrantId!="string")return ya.errors=[{instancePath:e+"/permissionGrantId",schemaPath:"#/properties/permissionGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0;if(m)if(t.protocolRole!==void 0){let A=a;if(typeof t.protocolRole!="string")return ya.errors=[{instancePath:e+"/protocolRole",schemaPath:"#/properties/protocolRole/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=A===a}else var m=!0}}}}}}}}}else return ya.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ya.errors=s,a===0}ya.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var rAe=ga;function ga(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:o={}}={}){let s=null,a=0,u=ga.evaluated;if(u.dynamicProps&&(u.props=void 0),u.dynamicItems&&(u.items=void 0),a===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(Object.keys(t).length<1)return ga.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let P=a;for(let k in t)if(!(k==="gt"||k==="gte"||k==="lt"||k==="lte")){return ga.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:k},message:"must NOT have additional properties"}],!1;break}if(P===a){if(t.gt!==void 0){let k=a,R=a,B=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let I;if(t.gte===void 0&&(I="gte")){let q={};s===null?s=[q]:s.push(q),a++}}var m=B===a;if(m)return ga.errors=[{instancePath:e,schemaPath:"#/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=R,s!==null&&(R?s.length=R:s=null);var p=k===a}else var p=!0;if(p){if(t.gte!==void 0){let k=a,R=a,B=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let q;if(t.gt===void 0&&(q="gt")){let $={};s===null?s=[$]:s.push($),a++}}var b=B===a;if(b)return ga.errors=[{instancePath:e,schemaPath:"#/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=R,s!==null&&(R?s.length=R:s=null);var p=k===a}else var p=!0;if(p){if(t.lt!==void 0){let k=a,R=a,B=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let q;if(t.lte===void 0&&(q="lte")){let $={};s===null?s=[$]:s.push($),a++}}var A=B===a;if(A)return ga.errors=[{instancePath:e,schemaPath:"#/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=R,s!==null&&(R?s.length=R:s=null);var p=k===a}else var p=!0;if(p){if(t.lte!==void 0){let k=a,R=a,B=a;if(t&&typeof t=="object"&&!Array.isArray(t)){let q;if(t.lt===void 0&&(q="lt")){let $={};s===null?s=[$]:s.push($),a++}}var M=B===a;if(M)return ga.errors=[{instancePath:e,schemaPath:"#/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;a=R,s!==null&&(R?s.length=R:s=null);var p=k===a}else var p=!0;if(p){if(t.gt!==void 0){let k=a;if(typeof t.gt!="string")return ga.errors=[{instancePath:e+"/gt",schemaPath:"#/properties/gt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=k===a}else var S=!0;if(S){if(t.gte!==void 0){let k=a;if(typeof t.gte!="string")return ga.errors=[{instancePath:e+"/gte",schemaPath:"#/properties/gte/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=k===a}else var S=!0;if(S){if(t.lt!==void 0){let k=a;if(typeof t.lt!="string")return ga.errors=[{instancePath:e+"/lt",schemaPath:"#/properties/lt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=k===a}else var S=!0;if(S)if(t.lte!==void 0){let k=a;if(typeof t.lte!="string")return ga.errors=[{instancePath:e+"/lte",schemaPath:"#/properties/lte/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=k===a}else var S=!0}}}}}}}}}else return ga.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ga.errors=s,a===0}ga.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function Jd(t,e){let r=U7[t];if(!r)throw new be("SchemaValidatorSchemaNotFound",`schema for ${t} not found.`);if(r(e),!r.errors)return;let[n]=r.errors,{instancePath:i,message:o,keyword:s}=n;if(i||(i=t),s==="additionalProperties"){let a=n.params.additionalProperty;throw new be("SchemaValidatorAdditionalPropertyNotAllowed",`${o}: ${i}: ${a}`)}if(s==="unevaluatedProperties"){let a=n.params.unevaluatedProperty;throw new be("SchemaValidatorUnevaluatedPropertyNotAllowed",`${o}: ${i}: ${a}`)}throw new be("SchemaValidatorFailure",`${i}: ${o}`)}var Fa=class{constructor(e){this.cache=e||new AM(600)}static get singleton(){return Fa._singleton===void 0&&(Fa._singleton=new Fa),Fa._singleton}static async verifySignatures(e,r){return await Fa.singleton.verifySignatures(e,r)}async verifySignatures(e,r){let n=[];for(let i of e.signatures){let o,s=Kt.getKid(i),a=`${i.protected}.${e.payload}.${i.signature}`,u=await this.cache.get(a);if(u===void 0){let p=await Fa.getPublicKey(s,r);o=await Kt.verifySignature(e.payload,i,p),await this.cache.set(a,o)}else o=u;let m=Kt.extractDid(s);if(o)n.push(m);else throw new be("GeneralJwsVerifierInvalidSignature",`Signature verification failed for ${m}`)}return{signers:n}}static async getPublicKey(e,r){let n=Kt.extractDid(e),{didDocument:i}=await r.resolve(n),{verificationMethod:o=[]}=i||{},s;for(let u of o)if(e.endsWith(u.id)){s=u;break}if(!s)throw new be("GeneralJwsVerifierGetPublicKeyNotFound","public key needed to verify signature not found in DID Document");Jd("JwkVerificationMethod",s);let{publicKeyJwk:a}=s;return a}};_();_();var Xd={};zt(Xd,{code:()=>Up,decode:()=>o9,encode:()=>pPe,name:()=>hPe});_();_();_();_();var nAe=["string","number","bigint","symbol"],iAe=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function VZ(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(nAe.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(oAe(t))return"Buffer";let r=sAe(t);return r||"Object"}function oAe(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function sAe(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(iAe.includes(e))return e}_();var $e=class{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};$e.uint=new $e(0,"uint",!0);$e.negint=new $e(1,"negint",!0);$e.bytes=new $e(2,"bytes",!0);$e.string=new $e(3,"string",!0);$e.array=new $e(4,"array",!1);$e.map=new $e(5,"map",!1);$e.tag=new $e(6,"tag",!1);$e.float=new $e(7,"float",!0);$e.false=new $e(7,"false",!0);$e.true=new $e(7,"true",!0);$e.null=new $e(7,"null",!0);$e.undefined=new $e(7,"undefined",!0);$e.break=new $e(7,"break",!0);var tt=class{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};_();_();var Ev=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",aAe=new TextDecoder,cAe=new TextEncoder;function PM(t){return Ev&&globalThis.Buffer.isBuffer(t)}function F7(t){return t instanceof Uint8Array?PM(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var YZ=Ev?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):ZZ(t,e,r):(t,e,r)=>r-e>64?aAe.decode(t.subarray(e,r)):ZZ(t,e,r),QZ=Ev?t=>t.length>64?globalThis.Buffer.from(t):HZ(t):t=>t.length>64?cAe.encode(t):HZ(t),ul=t=>Uint8Array.from(t),Sv=Ev?(t,e,r)=>PM(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),XZ=Ev?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),F7(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),n=0;for(let i of t)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},eJ=Ev?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function tJ(t,e){if(PM(t)&&PM(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function HZ(t,e=1/0){let r,n=t.length,i=null,o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function ZZ(t,e,r){let n=[];for(;e<r;){let i=t[e],o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=r){let a,u,m,p;switch(s){case 1:i<128&&(o=i);break;case 2:a=t[e+1],(a&192)===128&&(p=(i&31)<<6|a&63,p>127&&(o=p));break;case 3:a=t[e+1],u=t[e+2],(a&192)===128&&(u&192)===128&&(p=(i&15)<<12|(a&63)<<6|u&63,p>2047&&(p<55296||p>57343)&&(o=p));break;case 4:a=t[e+1],u=t[e+2],m=t[e+3],(a&192)===128&&(u&192)===128&&(m&192)===128&&(p=(i&15)<<18|(a&63)<<12|(u&63)<<6|m&63,p>65535&&p<1114112&&(o=p))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=s}return fAe(n)}var JZ=4096;function fAe(t){let e=t.length;if(e<=JZ)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=JZ));return r}var uAe=256,q_=class{constructor(e=uAe){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=r.length-(this.maxCursor-this.cursor)-1;r.set(e,i)}else{if(r){let i=r.length-(this.maxCursor-this.cursor)-1;i<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=eJ(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=Sv(n,0,this.cursor)}else r=XZ(this.chunks,this.cursor);return e&&this.reset(),r}};_();var Jt="CBOR decode error:",z7="CBOR encode error:",$_=[];$_[23]=1;$_[24]=2;$_[25]=3;$_[26]=5;$_[27]=9;function Yd(t,e,r){if(t.length-e<r)throw new Error(`${Jt} not enough data for type`)}_();_();var Uo=[24,256,65536,4294967296,BigInt("18446744073709551616")];function mc(t,e,r){Yd(t,e,1);let n=t[e];if(r.strict===!0&&n<Uo[0])throw new Error(`${Jt} integer encoded in more bytes than necessary (strict decode)`);return n}function yc(t,e,r){Yd(t,e,2);let n=t[e]<<8|t[e+1];if(r.strict===!0&&n<Uo[1])throw new Error(`${Jt} integer encoded in more bytes than necessary (strict decode)`);return n}function gc(t,e,r){Yd(t,e,4);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<Uo[2])throw new Error(`${Jt} integer encoded in more bytes than necessary (strict decode)`);return n}function bc(t,e,r){Yd(t,e,8);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&o<Uo[3])throw new Error(`${Jt} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(r.allowBigInt===!0)return o;throw new Error(`${Jt} integers outside of the safe integer range are not supported`)}function rJ(t,e,r,n){return new tt($e.uint,mc(t,e+1,n),2)}function nJ(t,e,r,n){return new tt($e.uint,yc(t,e+1,n),3)}function iJ(t,e,r,n){return new tt($e.uint,gc(t,e+1,n),5)}function oJ(t,e,r,n){return new tt($e.uint,bc(t,e+1,n),9)}function Zc(t,e){return fs(t,0,e.value)}function fs(t,e,r){if(r<Uo[0]){let n=Number(r);t.push([e|n])}else if(r<Uo[1]){let n=Number(r);t.push([e|24,n])}else if(r<Uo[2]){let n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<Uo[3]){let n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<Uo[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,t.push(i)}else throw new Error(`${Jt} encountered BigInt larger than allowable range`)}}Zc.encodedSize=function(e){return fs.encodedSize(e.value)};fs.encodedSize=function(e){return e<Uo[0]?1:e<Uo[1]?2:e<Uo[2]?3:e<Uo[3]?5:9};Zc.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};_();function sJ(t,e,r,n){return new tt($e.negint,-1-mc(t,e+1,n),2)}function aJ(t,e,r,n){return new tt($e.negint,-1-yc(t,e+1,n),3)}function cJ(t,e,r,n){return new tt($e.negint,-1-gc(t,e+1,n),5)}var K7=BigInt(-1),fJ=BigInt(1);function uJ(t,e,r,n){let i=bc(t,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new tt($e.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${Jt} integers outside of the safe integer range are not supported`);return new tt($e.negint,K7-BigInt(i),9)}function TM(t,e){let r=e.value,n=typeof r=="bigint"?r*K7-fJ:r*-1-1;fs(t,e.type.majorEncoded,n)}TM.encodedSize=function(e){let r=e.value,n=typeof r=="bigint"?r*K7-fJ:r*-1-1;return n<Uo[0]?1:n<Uo[1]?2:n<Uo[2]?3:n<Uo[3]?5:9};TM.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};_();function L_(t,e,r,n){Yd(t,e,r+n);let i=Sv(t,e+r,e+r+n);return new tt($e.bytes,i,r+n)}function lJ(t,e,r,n){return L_(t,e,1,r)}function dJ(t,e,r,n){return L_(t,e,2,mc(t,e+1,n))}function hJ(t,e,r,n){return L_(t,e,3,yc(t,e+1,n))}function pJ(t,e,r,n){return L_(t,e,5,gc(t,e+1,n))}function mJ(t,e,r,n){let i=bc(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Jt} 64-bit integer bytes lengths not supported`);return L_(t,e,9,i)}function RM(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===$e.string?QZ(t.value):t.value),t.encodedBytes}function Mv(t,e){let r=RM(e);fs(t,e.type.majorEncoded,r.length),t.push(r)}Mv.encodedSize=function(e){let r=RM(e);return fs.encodedSize(r.length)+r.length};Mv.compareTokens=function(e,r){return dAe(RM(e),RM(r))};function dAe(t,e){return t.length<e.length?-1:t.length>e.length?1:tJ(t,e)}_();function U_(t,e,r,n,i){let o=r+n;Yd(t,e,o);let s=new tt($e.string,YZ(t,e+r,e+o),o);return i.retainStringBytes===!0&&(s.byteValue=Sv(t,e+r,e+o)),s}function yJ(t,e,r,n){return U_(t,e,1,r,n)}function gJ(t,e,r,n){return U_(t,e,2,mc(t,e+1,n),n)}function bJ(t,e,r,n){return U_(t,e,3,yc(t,e+1,n),n)}function vJ(t,e,r,n){return U_(t,e,5,gc(t,e+1,n),n)}function wJ(t,e,r,n){let i=bc(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Jt} 64-bit integer string lengths not supported`);return U_(t,e,9,i,n)}var _J=Mv;_();function Av(t,e,r,n){return new tt($e.array,n,r)}function xJ(t,e,r,n){return Av(t,e,1,r)}function EJ(t,e,r,n){return Av(t,e,2,mc(t,e+1,n))}function SJ(t,e,r,n){return Av(t,e,3,yc(t,e+1,n))}function MJ(t,e,r,n){return Av(t,e,5,gc(t,e+1,n))}function AJ(t,e,r,n){let i=bc(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Jt} 64-bit integer array lengths not supported`);return Av(t,e,9,i)}function PJ(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Jt} indefinite length items not allowed`);return Av(t,e,1,1/0)}function IM(t,e){fs(t,$e.array.majorEncoded,e.value)}IM.compareTokens=Zc.compareTokens;IM.encodedSize=function(e){return fs.encodedSize(e.value)};_();function Pv(t,e,r,n){return new tt($e.map,n,r)}function TJ(t,e,r,n){return Pv(t,e,1,r)}function RJ(t,e,r,n){return Pv(t,e,2,mc(t,e+1,n))}function IJ(t,e,r,n){return Pv(t,e,3,yc(t,e+1,n))}function kJ(t,e,r,n){return Pv(t,e,5,gc(t,e+1,n))}function OJ(t,e,r,n){let i=bc(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Jt} 64-bit integer map lengths not supported`);return Pv(t,e,9,i)}function BJ(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Jt} indefinite length items not allowed`);return Pv(t,e,1,1/0)}function kM(t,e){fs(t,$e.map.majorEncoded,e.value)}kM.compareTokens=Zc.compareTokens;kM.encodedSize=function(e){return fs.encodedSize(e.value)};_();function DJ(t,e,r,n){return new tt($e.tag,r,1)}function CJ(t,e,r,n){return new tt($e.tag,mc(t,e+1,n),2)}function NJ(t,e,r,n){return new tt($e.tag,yc(t,e+1,n),3)}function jJ(t,e,r,n){return new tt($e.tag,gc(t,e+1,n),5)}function qJ(t,e,r,n){return new tt($e.tag,bc(t,e+1,n),9)}function OM(t,e){fs(t,$e.tag.majorEncoded,e.value)}OM.compareTokens=Zc.compareTokens;OM.encodedSize=function(e){return fs.encodedSize(e.value)};_();var bAe=20,vAe=21,wAe=22,_Ae=23;function $J(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${Jt} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new tt($e.null,null,1):new tt($e.undefined,void 0,1)}function LJ(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Jt} indefinite length items not allowed`);return new tt($e.break,void 0,1)}function W7(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${Jt} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${Jt} Infinity values are not supported`)}return new tt($e.float,t,e)}function UJ(t,e,r,n){return W7(G7(t,e+1),3,n)}function FJ(t,e,r,n){return W7(V7(t,e+1),5,n)}function zJ(t,e,r,n){return W7(VJ(t,e+1),9,n)}function BM(t,e,r){let n=e.value;if(n===!1)t.push([$e.float.majorEncoded|bAe]);else if(n===!0)t.push([$e.float.majorEncoded|vAe]);else if(n===null)t.push([$e.float.majorEncoded|wAe]);else if(n===void 0)t.push([$e.float.majorEncoded|_Ae]);else{let i,o=!1;(!r||r.float64!==!0)&&(WJ(n),i=G7(Yf,1),n===i||Number.isNaN(n)?(Yf[0]=249,t.push(Yf.slice(0,3)),o=!0):(GJ(n),i=V7(Yf,1),n===i&&(Yf[0]=250,t.push(Yf.slice(0,5)),o=!0))),o||(xAe(n),i=VJ(Yf,1),Yf[0]=251,t.push(Yf.slice(0,9)))}}BM.encodedSize=function(e,r){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){WJ(n);let i=G7(Yf,1);if(n===i||Number.isNaN(n))return 3;if(GJ(n),i=V7(Yf,1),n===i)return 5}return 9};var KJ=new ArrayBuffer(9),Jc=new DataView(KJ,1),Yf=new Uint8Array(KJ,0);function WJ(t){if(t===1/0)Jc.setUint16(0,31744,!1);else if(t===-1/0)Jc.setUint16(0,64512,!1);else if(Number.isNaN(t))Jc.setUint16(0,32256,!1);else{Jc.setFloat32(0,t);let e=Jc.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)Jc.setUint16(0,31744,!1);else if(r===0)Jc.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{let i=r-127;i<-24?Jc.setUint16(0,0):i<-14?Jc.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):Jc.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function G7(t,e){if(t.length-e<2)throw new Error(`${Jt} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,i=r&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,r&32768?-o:o}function GJ(t){Jc.setFloat32(0,t,!1)}function V7(t,e){if(t.length-e<4)throw new Error(`${Jt} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function xAe(t){Jc.setFloat64(0,t,!1)}function VJ(t,e){if(t.length-e<8)throw new Error(`${Jt} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}BM.compareTokens=Zc.compareTokens;function nn(t,e,r){throw new Error(`${Jt} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function DM(t){return()=>{throw new Error(`${Jt} ${t}`)}}var He=[];for(let t=0;t<=23;t++)He[t]=nn;He[24]=rJ;He[25]=nJ;He[26]=iJ;He[27]=oJ;He[28]=nn;He[29]=nn;He[30]=nn;He[31]=nn;for(let t=32;t<=55;t++)He[t]=nn;He[56]=sJ;He[57]=aJ;He[58]=cJ;He[59]=uJ;He[60]=nn;He[61]=nn;He[62]=nn;He[63]=nn;for(let t=64;t<=87;t++)He[t]=lJ;He[88]=dJ;He[89]=hJ;He[90]=pJ;He[91]=mJ;He[92]=nn;He[93]=nn;He[94]=nn;He[95]=DM("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)He[t]=yJ;He[120]=gJ;He[121]=bJ;He[122]=vJ;He[123]=wJ;He[124]=nn;He[125]=nn;He[126]=nn;He[127]=DM("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)He[t]=xJ;He[152]=EJ;He[153]=SJ;He[154]=MJ;He[155]=AJ;He[156]=nn;He[157]=nn;He[158]=nn;He[159]=PJ;for(let t=160;t<=183;t++)He[t]=TJ;He[184]=RJ;He[185]=IJ;He[186]=kJ;He[187]=OJ;He[188]=nn;He[189]=nn;He[190]=nn;He[191]=BJ;for(let t=192;t<=215;t++)He[t]=DJ;He[216]=CJ;He[217]=NJ;He[218]=jJ;He[219]=qJ;He[220]=nn;He[221]=nn;He[222]=nn;He[223]=nn;for(let t=224;t<=243;t++)He[t]=DM("simple values are not supported");He[244]=nn;He[245]=nn;He[246]=nn;He[247]=$J;He[248]=DM("simple values are not supported");He[249]=UJ;He[250]=FJ;He[251]=zJ;He[252]=nn;He[253]=nn;He[254]=nn;He[255]=LJ;var Qf=[];for(let t=0;t<24;t++)Qf[t]=new tt($e.uint,t,1);for(let t=-1;t>=-24;t--)Qf[31-t]=new tt($e.negint,t,1);Qf[64]=new tt($e.bytes,new Uint8Array(0),1);Qf[96]=new tt($e.string,"",1);Qf[128]=new tt($e.array,0,1);Qf[160]=new tt($e.map,0,1);Qf[244]=new tt($e.false,!1,1);Qf[245]=new tt($e.true,!0,1);Qf[246]=new tt($e.null,null,1);function HJ(t){switch(t.type){case $e.false:return ul([244]);case $e.true:return ul([245]);case $e.null:return ul([246]);case $e.bytes:return t.value.length?void 0:ul([64]);case $e.string:return t.value===""?ul([96]):void 0;case $e.array:return t.value===0?ul([128]):void 0;case $e.map:return t.value===0?ul([160]):void 0;case $e.uint:return t.value<24?ul([Number(t.value)]):void 0;case $e.negint:if(t.value>=-24)return ul([31-Number(t.value)])}}var SAe={float64:!1,mapSorter:PAe,quickEncodeToken:HJ};function MAe(){let t=[];return t[$e.uint.major]=Zc,t[$e.negint.major]=TM,t[$e.bytes.major]=Mv,t[$e.string.major]=_J,t[$e.array.major]=IM,t[$e.map.major]=kM,t[$e.tag.major]=OM,t[$e.float.major]=BM,t}var ZJ=MAe(),H7=new q_,Tv=class{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${z7} object contains circular references`);return new Tv(r,e)}},$p={null:new tt($e.null,null),undefined:new tt($e.undefined,void 0),true:new tt($e.true,!0),false:new tt($e.false,!1),emptyArray:new tt($e.array,0),emptyMap:new tt($e.map,0)},Lp={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new tt($e.float,t):t>=0?new tt($e.uint,t):new tt($e.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new tt($e.uint,t):new tt($e.negint,t)},Uint8Array(t,e,r,n){return new tt($e.bytes,t)},string(t,e,r,n){return new tt($e.string,t)},boolean(t,e,r,n){return t?$p.true:$p.false},null(t,e,r,n){return $p.null},undefined(t,e,r,n){return $p.undefined},ArrayBuffer(t,e,r,n){return new tt($e.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new tt($e.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[$p.emptyArray,new tt($e.break)]:$p.emptyArray;n=Tv.createCheck(n,t);let i=[],o=0;for(let s of t)i[o++]=CM(s,r,n);return r.addBreakTokens?[new tt($e.array,t.length),i,new tt($e.break)]:[new tt($e.array,t.length),i]},Object(t,e,r,n){let i=e!=="Object",o=i?t.keys():Object.keys(t),s=i?t.size:o.length;if(!s)return r.addBreakTokens===!0?[$p.emptyMap,new tt($e.break)]:$p.emptyMap;n=Tv.createCheck(n,t);let a=[],u=0;for(let m of o)a[u++]=[CM(m,r,n),CM(i?t.get(m):t[m],r,n)];return AAe(a,r),r.addBreakTokens?[new tt($e.map,s),a,new tt($e.break)]:[new tt($e.map,s),a]}};Lp.Map=Lp.Object;Lp.Buffer=Lp.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Lp[`${t}Array`]=Lp.DataView;function CM(t,e={},r){let n=VZ(t),i=e&&e.typeEncoders&&e.typeEncoders[n]||Lp[n];if(typeof i=="function"){let s=i(t,n,e,r);if(s!=null)return s}let o=Lp[n];if(!o)throw new Error(`${z7} unsupported type: ${n}`);return o(t,n,e,r)}function AAe(t,e){e.mapSorter&&t.sort(e.mapSorter)}function PAe(t,e){let r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);let i=r.type.major,o=ZJ[i].compareTokens(r,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function JJ(t,e,r,n){if(Array.isArray(e))for(let i of e)JJ(t,i,r,n);else r[e.type.major](t,e,n)}function TAe(t,e,r){let n=CM(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){let i=r.quickEncodeToken(n);if(i)return i;let o=e[n.type.major];if(o.encodedSize){let s=o.encodedSize(n,r),a=new q_(s);if(o(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return F7(a.chunks[0])}}return H7.reset(),JJ(H7,n,e,r),H7.toBytes(!0)}function Z7(t,e){return e=Object.assign({},SAe,e),TAe(t,ZJ,e)}_();var RAe={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},J7=class{constructor(e,r={}){this.pos=0,this.data=e,this.options=r}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],r=Qf[e];if(r===void 0){let n=He[e];if(!n)throw new Error(`${Jt} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;r=n(this.data,this.pos,i,this.options)}return this.pos+=r.encodedLength,r}},F_=Symbol.for("DONE"),NM=Symbol.for("BREAK");function IAe(t,e,r){let n=[];for(let i=0;i<t.value;i++){let o=z_(e,r);if(o===NM){if(t.value===1/0)break;throw new Error(`${Jt} got unexpected break to lengthed array`)}if(o===F_)throw new Error(`${Jt} found array but not enough entries (got ${i}, expected ${t.value})`);n[i]=o}return n}function kAe(t,e,r){let n=r.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<t.value;s++){let a=z_(e,r);if(a===NM){if(t.value===1/0)break;throw new Error(`${Jt} got unexpected break to lengthed map`)}if(a===F_)throw new Error(`${Jt} found map but not enough entries (got ${s} [no key], expected ${t.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${Jt} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&o.has(a)||!n&&a in i))throw new Error(`${Jt} found repeat map key "${a}"`);let u=z_(e,r);if(u===F_)throw new Error(`${Jt} found map but not enough entries (got ${s} [no value], expected ${t.value})`);n?o.set(a,u):i[a]=u}return n?o:i}function z_(t,e){if(t.done())return F_;let r=t.next();if(r.type===$e.break)return NM;if(r.type.terminal)return r.value;if(r.type===$e.array)return IAe(r,t,e);if(r.type===$e.map)return kAe(r,t,e);if(r.type===$e.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let n=z_(t,e);return e.tags[r.value](n)}throw new Error(`${Jt} tag not supported (${r.value})`)}throw new Error("unsupported")}function Y7(t,e){if(!(t instanceof Uint8Array))throw new Error(`${Jt} data to decode must be a Uint8Array`);e=Object.assign({},RAe,e);let r=e.tokenizer||new J7(t,e),n=z_(r,e);if(n===F_)throw new Error(`${Jt} did not find any content to decode`);if(n===NM)throw new Error(`${Jt} got unexpected break`);if(!r.done())throw new Error(`${Jt} too many terminals, data makes no sense`);return n}_();_();_();var BAe=XJ,YJ=128,DAe=127,CAe=~DAe,NAe=Math.pow(2,31);function XJ(t,e,r){e=e||[],r=r||0;for(var n=r;t>=NAe;)e[r++]=t&255|YJ,t/=128;for(;t&CAe;)e[r++]=t&255|YJ,t>>>=7;return e[r]=t|0,XJ.bytes=r-n+1,e}var jAe=Q7,qAe=128,QJ=127;function Q7(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw Q7.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&QJ)<<i:(s&QJ)*Math.pow(2,i),i+=7}while(s>=qAe);return Q7.bytes=o-n,r}var $Ae=Math.pow(2,7),LAe=Math.pow(2,14),UAe=Math.pow(2,21),FAe=Math.pow(2,28),zAe=Math.pow(2,35),KAe=Math.pow(2,42),WAe=Math.pow(2,49),GAe=Math.pow(2,56),VAe=Math.pow(2,63),HAe=function(t){return t<$Ae?1:t<LAe?2:t<UAe?3:t<FAe?4:t<zAe?5:t<KAe?6:t<WAe?7:t<GAe?8:t<VAe?9:10},ZAe={encode:BAe,decode:jAe,encodingLength:HAe},JAe=ZAe,K_=JAe;var W_=(t,e=0)=>[K_.decode(t,e),K_.decode.bytes],Rv=(t,e,r=0)=>(K_.encode(t,e,r),e),Iv=t=>K_.encodingLength(t);_();_();var BEt=new Uint8Array(0);var tY=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},kv=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var rY=(t,e)=>{let r=e.byteLength,n=Iv(t),i=n+Iv(r),o=new Uint8Array(i+r);return Rv(t,o,0),Rv(r,o,n),o.set(e,i),new Ov(t,r,e,o)},nY=t=>{let e=kv(t),[r,n]=W_(e),[i,o]=W_(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new Ov(r,i,s,e)},iY=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&tY(t.bytes,r.bytes)}},Ov=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};_();_();_();function QAe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,u=t.charAt(0),m=Math.log(a)/Math.log(256),p=Math.log(256)/Math.log(a);function b(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var P=0,k=0,R=0,B=S.length;R!==B&&S[R]===0;)R++,P++;for(var I=(B-R)*p+1>>>0,q=new Uint8Array(I);R!==B;){for(var $=S[R],U=0,F=I-1;($!==0||U<k)&&F!==-1;F--,U++)$+=256*q[F]>>>0,q[F]=$%a>>>0,$=$/a>>>0;if($!==0)throw new Error("Non-zero carry");k=U,R++}for(var L=I-k;L!==I&&q[L]===0;)L++;for(var W=u.repeat(P);L<I;++L)W+=t.charAt(q[L]);return W}function A(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var P=0;if(S[P]!==" "){for(var k=0,R=0;S[P]===u;)k++,P++;for(var B=(S.length-P)*m+1>>>0,I=new Uint8Array(B);S[P];){var q=r[S.charCodeAt(P)];if(q===255)return;for(var $=0,U=B-1;(q!==0||$<R)&&U!==-1;U--,$++)q+=a*I[U]>>>0,I[U]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");R=$,P++}if(S[P]!==" "){for(var F=B-R;F!==B&&I[F]===0;)F++;for(var L=new Uint8Array(k+(B-F)),W=k;F!==B;)L[W++]=I[F++];return L}}}function M(S){var P=A(S);if(P)return P;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:A,decode:M}}var XAe=QAe,ePe=XAe,oY=ePe;_();var X7=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},e9=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return sY(this,e)}},t9=class{constructor(e){this.decoders=e}or(e){return sY(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},sY=(t,e)=>new t9({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),r9=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new X7(e,r,n),this.decoder=new e9(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},aY=({name:t,prefix:e,encode:r,decode:n})=>new r9(t,e,r,n),n9=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=oY(r,e);return aY({prefix:t,name:e,encode:n,decode:o=>kv(i(o))})},tPe=(t,e,r,n)=>{let i={};for(let p=0;p<e.length;++p)i[e[p]]=p;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,u=0,m=0;for(let p=0;p<o;++p){let b=i[t[p]];if(b===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|b,a+=r,a>=8&&(a-=8,s[m++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s},rPe=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},ll=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>aY({prefix:e,name:t,encode(i){return rPe(i,n,r)},decode(i){return tPe(i,n,r,t)}});var Qd=n9({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),VEt=n9({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});_();var G_=ll({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),YEt=ll({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),QEt=ll({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),XEt=ll({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),eSt=ll({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),tSt=ll({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),rSt=ll({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),nSt=ll({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),iSt=ll({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});_();var cY=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return iPe(r,i9(t),e||Qd.encoder);default:return oPe(r,i9(t),e||G_.encoder)}};var fY=new WeakMap,i9=t=>{let e=fY.get(t);if(e==null){let r=new Map;return fY.set(t,r),r}return e},zi=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==V_)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==sPe)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return zi.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=rY(e,r);return zi.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return zi.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&iY(e.multihash,n.multihash)}toString(e){return cY(this,e)}toJSON(){return{"/":cY(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof zi)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new zi(n,i,o,s||uY(n,i,o.bytes))}else if(r[aPe]===!0){let{version:n,multihash:i,code:o}=r,s=nY(i);return zi.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==V_)throw new Error(`Version 0 CID must use dag-pb (code: ${V_}) block encoding`);return new zi(e,r,n,n.bytes)}case 1:{let i=uY(e,r,n.bytes);return new zi(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return zi.create(0,V_,e)}static createV1(e,r){return zi.create(1,e,r)}static decode(e){let[r,n]=zi.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=zi.inspectBytes(e),n=r.size-r.multihashSize,i=kv(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new Ov(r.multihashCode,r.digestSize,o,i);return[r.version===0?zi.createV0(s):zi.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[b,A]=W_(e.subarray(r));return r+=A,b},i=n(),o=V_;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),u=n(),m=r+u,p=m-s;return{version:i,codec:o,multihashCode:a,digestSize:u,multihashSize:p,size:m}}static parse(e,r){let[n,i]=nPe(e,r),o=zi.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return i9(o).set(n,e),o}},nPe=(t,e)=>{switch(t[0]){case"Q":{let r=e||Qd;return[Qd.prefix,r.decode(`${Qd.prefix}${t}`)]}case Qd.prefix:{let r=e||Qd;return[Qd.prefix,r.decode(t)]}case G_.prefix:{let r=e||G_;return[G_.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},iPe=(t,e,r)=>{let{prefix:n}=r;if(n!==Qd.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},oPe=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},V_=112,sPe=18,uY=(t,e,r)=>{let n=Iv(t),i=n+Iv(e),o=new Uint8Array(i+r.byteLength);return Rv(t,o,0),Rv(e,o,n),o.set(r,i),o},aPe=Symbol.for("@ipld/js-cid/CID");var lY=42;function cPe(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;let e=zi.asCID(t);if(!e)return null;let r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new tt($e.tag,lY),new tt($e.bytes,r)]}function fPe(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function uPe(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var lPe={float64:!0,typeEncoders:{Object:cPe,undefined:fPe,number:uPe}};function dPe(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return zi.decode(t.subarray(1))}var dY={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};dY.tags[lY]=dPe;var hPe="dag-cbor",Up=113,pPe=t=>Z7(t,lPe),o9=t=>Y7(t,dY);_();_();_();_();var za=Bk({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bSt=Bk({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});_();var H_=la({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),xSt=la({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ESt=la({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),SSt=la({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),MSt=la({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ASt=la({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),PSt=la({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),TSt=la({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),s9=la({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});_();var hY=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return yPe(r,a9(t),e||za.encoder);default:return gPe(r,a9(t),e||H_.encoder)}};var pY=new WeakMap,a9=t=>{let e=pY.get(t);if(e==null){let r=new Map;return pY.set(t,r),r}return e},Mt=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==Z_)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==bPe)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Mt.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=zm(e,r);return Mt.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Mt.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&BH(e.multihash,n.multihash)}toString(e){return hY(this,e)}toJSON(){return{"/":hY(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof Mt)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new Mt(n,i,o,s||mY(n,i,o.bytes))}else if(r[vPe]===!0){let{version:n,multihash:i,code:o}=r,s=dM(i);return Mt.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Z_)throw new Error(`Version 0 CID must use dag-pb (code: ${Z_}) block encoding`);return new Mt(e,r,n,n.bytes)}case 1:{let i=mY(e,r,n.bytes);return new Mt(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Mt.create(0,Z_,e)}static createV1(e,r){return Mt.create(1,e,r)}static decode(e){let[r,n]=Mt.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=Mt.inspectBytes(e),n=r.size-r.multihashSize,i=Vf(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new ov(r.multihashCode,r.digestSize,o,i);return[r.version===0?Mt.createV0(s):Mt.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[b,A]=iv(e.subarray(r));return r+=A,b},i=n(),o=Z_;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),u=n(),m=r+u,p=m-s;return{version:i,codec:o,multihashCode:a,digestSize:u,multihashSize:p,size:m}}static parse(e,r){let[n,i]=mPe(e,r),o=Mt.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return a9(o).set(n,e),o}},mPe=(t,e)=>{switch(t[0]){case"Q":{let r=e||za;return[za.prefix,r.decode(`${za.prefix}${t}`)]}case za.prefix:{let r=e||za;return[za.prefix,r.decode(t)]}case H_.prefix:{let r=e||H_;return[H_.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},yPe=(t,e,r)=>{let{prefix:n}=r;if(n!==za.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},gPe=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},Z_=112,bPe=18,mY=(t,e,r)=>{let n=Fm(t),i=n+Fm(e),o=new Uint8Array(i+r.byteLength);return Um(t,o,0),Um(e,o,n),o.set(r,i),o},vPe=Symbol.for("@ipld/js-cid/CID");_();var J_=class{async open(){}async close(){}async put(e,r,n){return e}async get(e,r){return new Uint8Array}async has(e,r){return!1}async delete(e,r){}async isEmpty(e){return!0}async*putMany(e,r){for await(let n of e)await this.put(n.cid,n.block,r),yield n.cid}async*getMany(e,r){for await(let n of e)yield{cid:n,block:await this.get(n,r)}}async*getAll(e){let r=this.db.iterator({keys:!0,keyEncoding:"buffer"},e);for await(let[n,i]of r)yield{cid:Mt.decode(n),block:i}}async*deleteMany(e,r){for await(let n of e)await this.delete(n,r),yield n}async clear(){}};_();var zke=Zt(vc(),1);_();_();_();function _Pe(t){return t[Symbol.asyncIterator]!=null}function xPe(t,e=1){return e=Number(e),_Pe(t)?async function*(){let r=[];if(e<1&&(e=1),e!==Math.round(e))throw new Error("Batch size must be an integer");for await(let n of t)for(r.push(n);r.length>=e;)yield r.slice(0,e),r=r.slice(e);for(;r.length>0;)yield r.slice(0,e),r=r.slice(e)}():function*(){let r=[];if(e<1&&(e=1),e!==Math.round(e))throw new Error("Batch size must be an integer");for(let n of t)for(r.push(n);r.length>=e;)yield r.slice(0,e),r=r.slice(e);for(;r.length>0;)yield r.slice(0,e),r=r.slice(e)}()}var Y_=xPe;async function*Q_(t,e=1){for await(let r of Y_(t,e)){let n=r.map(async i=>i().then(o=>({ok:!0,value:o}),o=>({ok:!1,err:o})));for(let i=0;i<n.length;i++){let o=await n[i];if(o.ok)yield o.value;else throw o.err}}}_();_();_();_();_();function X_(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function eh(t=0){return globalThis.Buffer?.alloc!=null?X_(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function ex(t=0){return globalThis.Buffer?.allocUnsafe!=null?X_(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function c9(t,e){e==null&&(e=t.reduce((i,o)=>i+o.length,0));let r=ex(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return X_(r)}_();function bY(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var wY=Symbol.for("@achingbrain/uint8arraylist");function vY(t,e){if(e==null||e<0)throw new RangeError("index is out of bounds");let r=0;for(let n of t){let i=r+n.byteLength;if(e<i)return{buf:n,index:e-r};r=i}throw new RangeError("index is out of bounds")}function jM(t){return Boolean(t?.[wY])}var dl=class{constructor(...e){Object.defineProperty(this,wY,{value:!0}),this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let r=0;for(let n of e)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(jM(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...e){this.prependAll(e)}prependAll(e){let r=0;for(let n of e.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(jM(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(e){let r=vY(this.bufs,e);return r.buf[r.index]}set(e,r){let n=vY(this.bufs,e);n.buf[n.index]=r}write(e,r=0){if(e instanceof Uint8Array)for(let n=0;n<e.length;n++)this.set(r+n,e[n]);else if(jM(e))for(let n=0;n<e.length;n++)this.set(r+n,e.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,r){let{bufs:n,length:i}=this._subList(e,r);return c9(n,i)}subarray(e,r){let{bufs:n,length:i}=this._subList(e,r);return n.length===1?n[0]:c9(n,i)}sublist(e,r){let{bufs:n,length:i}=this._subList(e,r),o=new dl;return o.length=i,o.bufs=n,o}_subList(e,r){if(e=e??0,r=r??this.length,e<0&&(e=this.length+e),r<0&&(r=this.length+r),e<0||r>this.length)throw new RangeError("index is out of bounds");if(e===r)return{bufs:[],length:0};if(e===0&&r===this.length)return{bufs:[...this.bufs],length:this.length};let n=[],i=0;for(let o=0;o<this.bufs.length;o++){let s=this.bufs[o],a=i,u=a+s.byteLength;if(i=u,e>=u)continue;let m=e>=a&&e<u,p=r>a&&r<=u;if(m&&p){if(e===a&&r===u){n.push(s);break}let b=e-a;n.push(s.subarray(b,b+(r-e)));break}if(m){if(e===0){n.push(s);continue}n.push(s.subarray(e-a));continue}if(p){if(r===u){n.push(s);break}n.push(s.subarray(0,r-a));break}n.push(s)}return{bufs:n,length:r-e}}indexOf(e,r=0){if(!jM(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=e instanceof Uint8Array?e:e.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),e.length===0)return r>this.length?this.length:r;let i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");let o=256,s=new Int32Array(o);for(let b=0;b<o;b++)s[b]=-1;for(let b=0;b<i;b++)s[n[b]]=b;let a=s,u=this.byteLength-n.byteLength,m=n.byteLength-1,p;for(let b=r;b<=u;b+=p){p=0;for(let A=m;A>=0;A--){let M=this.get(b+A);if(n[A]!==M){p=Math.max(1,A-a[M]);break}}if(p===0)return b}return-1}getInt8(e){let r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(e,r){let n=ex(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,e)}getInt16(e,r){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(e,r,n){let i=eh(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,r,n),this.write(i,e)}getInt32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(e,r,n){let i=eh(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,r,n),this.write(i,e)}getBigInt64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(e,r,n){let i=eh(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,r,n),this.write(i,e)}getUint8(e){let r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(e,r){let n=ex(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,e)}getUint16(e,r){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(e,r,n){let i=eh(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,r,n),this.write(i,e)}getUint32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(e,r,n){let i=eh(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,r,n),this.write(i,e)}getBigUint64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(e,r,n){let i=eh(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,r,n),this.write(i,e)}getFloat32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(e,r,n){let i=eh(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,r,n),this.write(i,e)}getFloat64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(e,r,n){let i=eh(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,r,n),this.write(i,e)}equals(e){if(e==null||!(e instanceof dl)||e.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!bY(this.bufs[r],e.bufs[r]))return!1;return!0}static fromUint8Arrays(e,r){let n=new dl;return n.bufs=e,r==null&&(r=e.reduce((i,o)=>i+o.byteLength,0)),n.length=r,n}};var EPe=262144,_Y=(t={})=>{let e=t.chunkSize??EPe;return async function*(n){let i=new dl,o=0,s=!1;for await(let a of n)for(i.append(a),o+=a.length;o>=e;)if(yield i.slice(0,e),s=!0,e===i.length)i=new dl,o=0;else{let u=new dl;u.append(i.sublist(e)),i=u,o-=e}(!s||o>0)&&(yield i.subarray(0,o))}};_();var ty={};zt(ty,{code:()=>sx,createLink:()=>WY,createNode:()=>KY,decode:()=>rh,encode:()=>_c,name:()=>fTe,prepare:()=>wc,validate:()=>b9});_();_();_();_();var SPe=SY,xY=128,MPe=127,APe=~MPe,PPe=Math.pow(2,31);function SY(t,e,r){e=e||[],r=r||0;for(var n=r;t>=PPe;)e[r++]=t&255|xY,t/=128;for(;t&APe;)e[r++]=t&255|xY,t>>>=7;return e[r]=t|0,SY.bytes=r-n+1,e}var TPe=f9,RPe=128,EY=127;function f9(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw f9.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&EY)<<i:(s&EY)*Math.pow(2,i),i+=7}while(s>=RPe);return f9.bytes=o-n,r}var IPe=Math.pow(2,7),kPe=Math.pow(2,14),OPe=Math.pow(2,21),BPe=Math.pow(2,28),DPe=Math.pow(2,35),CPe=Math.pow(2,42),NPe=Math.pow(2,49),jPe=Math.pow(2,56),qPe=Math.pow(2,63),$Pe=function(t){return t<IPe?1:t<kPe?2:t<OPe?3:t<BPe?4:t<DPe?5:t<CPe?6:t<NPe?7:t<jPe?8:t<qPe?9:10},LPe={encode:SPe,decode:TPe,encodingLength:$Pe},UPe=LPe,tx=UPe;var rx=(t,e=0)=>[tx.decode(t,e),tx.decode.bytes],Bv=(t,e,r=0)=>(tx.encode(t,e,r),e),Dv=t=>tx.encodingLength(t);_();_();var M3t=new Uint8Array(0);var AY=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Cv=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var PY=(t,e)=>{let r=e.byteLength,n=Dv(t),i=n+Dv(r),o=new Uint8Array(i+r);return Bv(t,o,0),Bv(r,o,n),o.set(e,i),new Nv(t,r,e,o)},TY=t=>{let e=Cv(t),[r,n]=rx(e),[i,o]=rx(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new Nv(r,i,s,e)},RY=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&AY(t.bytes,r.bytes)}},Nv=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};_();_();_();function zPe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,u=t.charAt(0),m=Math.log(a)/Math.log(256),p=Math.log(256)/Math.log(a);function b(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var P=0,k=0,R=0,B=S.length;R!==B&&S[R]===0;)R++,P++;for(var I=(B-R)*p+1>>>0,q=new Uint8Array(I);R!==B;){for(var $=S[R],U=0,F=I-1;($!==0||U<k)&&F!==-1;F--,U++)$+=256*q[F]>>>0,q[F]=$%a>>>0,$=$/a>>>0;if($!==0)throw new Error("Non-zero carry");k=U,R++}for(var L=I-k;L!==I&&q[L]===0;)L++;for(var W=u.repeat(P);L<I;++L)W+=t.charAt(q[L]);return W}function A(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var P=0;if(S[P]!==" "){for(var k=0,R=0;S[P]===u;)k++,P++;for(var B=(S.length-P)*m+1>>>0,I=new Uint8Array(B);S[P];){var q=r[S.charCodeAt(P)];if(q===255)return;for(var $=0,U=B-1;(q!==0||$<R)&&U!==-1;U--,$++)q+=a*I[U]>>>0,I[U]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");R=$,P++}if(S[P]!==" "){for(var F=B-R;F!==B&&I[F]===0;)F++;for(var L=new Uint8Array(k+(B-F)),W=k;F!==B;)L[W++]=I[F++];return L}}}function M(S){var P=A(S);if(P)return P;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:A,decode:M}}var KPe=zPe,WPe=KPe,IY=WPe;_();var u9=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},l9=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return kY(this,e)}},d9=class{constructor(e){this.decoders=e}or(e){return kY(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},kY=(t,e)=>new d9({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),h9=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new u9(e,r,n),this.decoder=new l9(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},OY=({name:t,prefix:e,encode:r,decode:n})=>new h9(t,e,r,n),p9=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=IY(r,e);return OY({prefix:t,name:e,encode:n,decode:o=>Cv(i(o))})},GPe=(t,e,r,n)=>{let i={};for(let p=0;p<e.length;++p)i[e[p]]=p;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,u=0,m=0;for(let p=0;p<o;++p){let b=i[t[p]];if(b===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|b,a+=r,a>=8&&(a-=8,s[m++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s},VPe=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},hl=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>OY({prefix:e,name:t,encode(i){return VPe(i,n,r)},decode(i){return GPe(i,n,r,t)}});var th=p9({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),$3t=p9({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});_();var nx=hl({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),z3t=hl({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),K3t=hl({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),W3t=hl({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),G3t=hl({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),V3t=hl({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),H3t=hl({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Z3t=hl({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),J3t=hl({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});_();var BY=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return ZPe(r,m9(t),e||th.encoder);default:return JPe(r,m9(t),e||nx.encoder)}};var DY=new WeakMap,m9=t=>{let e=DY.get(t);if(e==null){let r=new Map;return DY.set(t,r),r}return e},Wn=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==ix)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==YPe)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Wn.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=PY(e,r);return Wn.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Wn.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&RY(e.multihash,n.multihash)}toString(e){return BY(this,e)}toJSON(){return{"/":BY(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof Wn)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new Wn(n,i,o,s||CY(n,i,o.bytes))}else if(r[QPe]===!0){let{version:n,multihash:i,code:o}=r,s=TY(i);return Wn.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==ix)throw new Error(`Version 0 CID must use dag-pb (code: ${ix}) block encoding`);return new Wn(e,r,n,n.bytes)}case 1:{let i=CY(e,r,n.bytes);return new Wn(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Wn.create(0,ix,e)}static createV1(e,r){return Wn.create(1,e,r)}static decode(e){let[r,n]=Wn.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=Wn.inspectBytes(e),n=r.size-r.multihashSize,i=Cv(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new Nv(r.multihashCode,r.digestSize,o,i);return[r.version===0?Wn.createV0(s):Wn.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[b,A]=rx(e.subarray(r));return r+=A,b},i=n(),o=ix;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),u=n(),m=r+u,p=m-s;return{version:i,codec:o,multihashCode:a,digestSize:u,multihashSize:p,size:m}}static parse(e,r){let[n,i]=HPe(e,r),o=Wn.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return m9(o).set(n,e),o}},HPe=(t,e)=>{switch(t[0]){case"Q":{let r=e||th;return[th.prefix,r.decode(`${th.prefix}${t}`)]}case th.prefix:{let r=e||th;return[th.prefix,r.decode(t)]}case nx.prefix:{let r=e||nx;return[nx.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},ZPe=(t,e,r)=>{let{prefix:n}=r;if(n!==th.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},JPe=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},ix=112,YPe=18,CY=(t,e,r)=>{let n=Dv(t),i=n+Dv(e),o=new Uint8Array(i+r.byteLength);return Bv(t,o,0),Bv(e,o,n),o.set(r,i),o},QPe=Symbol.for("@ipld/js-cid/CID");_();var XPe=new TextDecoder;function y9(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");let i=t[e++];if(r+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[r,e]}function qM(t,e){let r;[r,e]=y9(t,e);let n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function NY(t,e){let r;return[r,e]=y9(t,e),[r&7,r>>3,e]}function eTe(t){let e={},r=t.length,n=0;for(;n<r;){let i,o;if([i,o,n]=NY(t,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=qM(t,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let s;[s,n]=qM(t,n),e.Name=XPe.decode(s)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=y9(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function jY(t){let e=t.length,r=0,n,i=!1,o;for(;r<e;){let a,u;if([a,u,r]=NY(t,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(u===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,r]=qM(t,r),n&&(i=!0)}else if(u===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let m;[m,r]=qM(t,r),n.push(eTe(m))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${u}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");let s={};return o&&(s.Data=o),s.Links=n||[],s}_();var $Y=new TextEncoder,qY=2**32,tTe=2**31;function rTe(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=ox(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){let n=$Y.encode(t.Name);r-=n.length,e.set(n,r),r=ox(e,r,n.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=ox(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function LY(t){let e=iTe(t),r=new Uint8Array(e),n=e;if(t.Data&&(n-=t.Data.length,r.set(t.Data,n),n=ox(r,n,t.Data.length)-1,r[n]=10),t.Links)for(let i=t.Links.length-1;i>=0;i--){let o=rTe(t.Links[i],r.subarray(0,n));n-=o,n=ox(r,n,o)-1,r[n]=18}return r}function nTe(t){let e=0;if(t.Hash){let r=t.Hash.length;e+=1+r+jv(r)}if(typeof t.Name=="string"){let r=$Y.encode(t.Name).length;e+=1+r+jv(r)}return typeof t.Tsize=="number"&&(e+=1+jv(t.Tsize)),e}function iTe(t){let e=0;if(t.Data){let r=t.Data.length;e+=1+r+jv(r)}if(t.Links)for(let r of t.Links){let n=nTe(r);e+=1+n+jv(n)}return e}function ox(t,e,r){e-=jv(r);let n=e;for(;r>=tTe;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,n}function jv(t){return t%2===0&&t++,Math.floor((oTe(t)+6)/7)}function oTe(t){let e=0;return t>=qY&&(t=Math.floor(t/qY),e=32),t>=1<<16&&(t>>>=16,e+=16),t>=1<<8&&(t>>>=8,e+=8),e+sTe[t]}var sTe=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];_();var aTe=["Data","Links"],cTe=["Hash","Name","Tsize"],g9=new TextEncoder;function FY(t,e){if(t===e)return 0;let r=t.Name?g9.encode(t.Name):[],n=e.Name?g9.encode(e.Name):[],i=r.length,o=n.length;for(let s=0,a=Math.min(i,o);s<a;++s)if(r[s]!==n[s]){i=r[s],o=n[s];break}return i<o?-1:o<i?1:0}function UY(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function zY(t){if(typeof t.asCID=="object"){let r=Wn.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Hash){let r=Wn.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=Wn.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=Wn.decode(t.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function wc(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=g9.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(zY),e.Links.sort(FY);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function b9(t){if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form");if(!UY(t,aTe))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<t.Links.length;e++){let r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!UY(r,cTe))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(r.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash==null||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0){if(typeof r.Tsize!="number"||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&FY(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function KY(t,e=[]){return wc({Data:t,Links:e})}function WY(t,e,r){return zY({Hash:r,Name:t,Tsize:e})}var fTe="dag-pb",sx=112;function _c(t){b9(t);let e={};return t.Links&&(e.Links=t.Links.map(r=>{let n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),t.Data&&(e.Data=t.Data),LY(e)}function rh(t){let e=jY(t),r={};return e.Data&&(r.Data=e.Data),e.Links&&(r.Links=e.Links.map(n=>{let i={};try{i.Hash=Wn.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),r}_();var N9=Zt(vc(),1);_();_();_();_();var k9=Zt(E9(),1),OQ=Zt(SQ(),1),BQ=Zt(ny(),1),O9=Zt(I9(),1),DQ=Zt(kQ(),1);function bTe(){BQ.default._configure(),k9.default._configure(OQ.default),O9.default._configure(DQ.default)}bTe();var CQ=["uint64","int64","sint64","fixed64","sfixed64"];function vTe(t){for(let e of CQ){if(t[e]==null)continue;let r=t[e];t[e]=function(){return BigInt(r.call(this).toString())}}return t}function B9(t){return vTe(new k9.default(t))}function wTe(t){for(let e of CQ){if(t[e]==null)continue;let r=t[e];t[e]=function(n){return r.call(this,n.toString())}}return t}function D9(){return wTe(O9.default.create())}function fx(t,e){let r=B9(t instanceof Uint8Array?t:t.subarray());return e.decode(r)}_();function ux(t,e){let r=D9();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}_();_();var $v;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})($v||($v={}));function zM(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function C9(t){function e(i){if(t[i.toString()]==null)throw new Error("Invalid enum value");return t[i]}let r=function(o,s){let a=e(o);s.int32(a)},n=function(o){let s=o.int32();return e(s)};return zM("enum",$v.VARINT,r,n)}_();function lx(t,e){return zM("message",$v.LENGTH_DELIMITED,t,e)}var ru;(function(t){let e;(function(i){i.Raw="Raw",i.Directory="Directory",i.File="File",i.Metadata="Metadata",i.Symlink="Symlink",i.HAMTShard="HAMTShard"})(e=t.DataType||(t.DataType={}));let r;(function(i){i[i.Raw=0]="Raw",i[i.Directory=1]="Directory",i[i.File=2]="File",i[i.Metadata=3]="Metadata",i[i.Symlink=4]="Symlink",i[i.HAMTShard=5]="HAMTShard"})(r||(r={})),function(i){i.codec=()=>C9(r)}(e=t.DataType||(t.DataType={}));let n;t.codec=()=>(n==null&&(n=lx((i,o,s={})=>{if(s.lengthDelimited!==!1&&o.fork(),i.Type!=null&&(o.uint32(8),t.DataType.codec().encode(i.Type,o)),i.Data!=null&&(o.uint32(18),o.bytes(i.Data)),i.filesize!=null&&(o.uint32(24),o.uint64(i.filesize)),i.blocksizes!=null)for(let a of i.blocksizes)o.uint32(32),o.uint64(a);i.hashType!=null&&(o.uint32(40),o.uint64(i.hashType)),i.fanout!=null&&(o.uint32(48),o.uint64(i.fanout)),i.mode!=null&&(o.uint32(56),o.uint32(i.mode)),i.mtime!=null&&(o.uint32(66),KM.codec().encode(i.mtime,o)),s.lengthDelimited!==!1&&o.ldelim()},(i,o)=>{let s={blocksizes:[]},a=o==null?i.len:i.pos+o;for(;i.pos<a;){let u=i.uint32();switch(u>>>3){case 1:s.Type=t.DataType.codec().decode(i);break;case 2:s.Data=i.bytes();break;case 3:s.filesize=i.uint64();break;case 4:s.blocksizes.push(i.uint64());break;case 5:s.hashType=i.uint64();break;case 6:s.fanout=i.uint64();break;case 7:s.mode=i.uint32();break;case 8:s.mtime=KM.codec().decode(i,i.uint32());break;default:i.skipType(u&7);break}}return s})),n),t.encode=i=>ux(i,t.codec()),t.decode=i=>fx(i,t.codec())})(ru||(ru={}));var KM;(function(t){let e;t.codec=()=>(e==null&&(e=lx((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Seconds!=null&&(n.uint32(8),n.int64(r.Seconds)),r.FractionalNanoseconds!=null&&(n.uint32(21),n.fixed32(r.FractionalNanoseconds)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.Seconds=r.int64();break;case 2:i.FractionalNanoseconds=r.fixed32();break;default:r.skipType(s&7);break}}return i})),e),t.encode=r=>ux(r,t.codec()),t.decode=r=>fx(r,t.codec())})(KM||(KM={}));var NQ;(function(t){let e;t.codec=()=>(e==null&&(e=lx((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.MimeType!=null&&(n.uint32(10),n.string(r.MimeType)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.MimeType=r.string();break;default:r.skipType(s&7);break}}return i})),e),t.encode=r=>ux(r,t.codec()),t.decode=r=>fx(r,t.codec())})(NQ||(NQ={}));var jQ={Raw:"raw",Directory:"directory",File:"file",Metadata:"metadata",Symlink:"symlink",HAMTShard:"hamt-sharded-directory"},_Te=["directory","hamt-sharded-directory"],qQ=parseInt("0644",8),$Q=parseInt("0755",8),ao=class{static unmarshal(e){let r=ru.decode(e),n=new ao({type:jQ[r.Type!=null?r.Type.toString():"File"],data:r.Data,blockSizes:r.blocksizes,mode:r.mode,mtime:r.mtime!=null?{secs:r.mtime.Seconds??0n,nsecs:r.mtime.FractionalNanoseconds}:void 0});return n._originalMode=r.mode??0,n}type;data;blockSizes;hashType;fanout;mtime;_mode;_originalMode;constructor(e={type:"file"}){let{type:r,data:n,blockSizes:i,hashType:o,fanout:s,mtime:a,mode:u}=e;if(r!=null&&!Object.values(jQ).includes(r))throw(0,N9.default)(new Error("Type: "+r+" is not valid"),"ERR_INVALID_TYPE");this.type=r??"file",this.data=n,this.hashType=o,this.fanout=s,this.blockSizes=i??[],this._originalMode=0,this.mode=u,this.mtime=a}set mode(e){e==null?this._mode=this.isDirectory()?$Q:qQ:this._mode=e&4095}get mode(){return this._mode}isDirectory(){return _Te.includes(this.type)}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0n;let e=0n;return this.blockSizes.forEach(r=>{e+=r}),this.data!=null&&(e+=BigInt(this.data.length)),e}marshal(){let e;switch(this.type){case"raw":e=ru.DataType.Raw;break;case"directory":e=ru.DataType.Directory;break;case"file":e=ru.DataType.File;break;case"metadata":e=ru.DataType.Metadata;break;case"symlink":e=ru.DataType.Symlink;break;case"hamt-sharded-directory":e=ru.DataType.HAMTShard;break;default:throw(0,N9.default)(new Error(`Type: ${e} is not valid`),"ERR_INVALID_TYPE")}let r=this.data;(this.data==null||this.data.length===0)&&(r=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(this.mode??0),n===qQ&&!this.isDirectory()&&(n=void 0),n===$Q&&this.isDirectory()&&(n=void 0));let i;return this.mtime!=null&&(i={Seconds:this.mtime.secs,FractionalNanoseconds:this.mtime.nsecs}),ru.encode({Type:e,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:i})}};var Lv={};zt(Lv,{code:()=>Kp,decode:()=>STe,encode:()=>ETe,name:()=>xTe});_();var xTe="raw",Kp=85,ETe=t=>Vf(t),STe=t=>Vf(t);_();var Ti=class extends Event{constructor(e,r){super(e),this.detail=r}};_();var nu=async(t,e,r)=>{r.codec==null&&(r.codec=ty);let n=await ss.digest(t),i=Mt.create(r.cidVersion,r.codec.code,n);return await e.put(i,t,r),i};function LQ(t){return async function*(r,n){let i=0n;for await(let o of r.content)yield async()=>{let s,a={codec:ty,cidVersion:t.cidVersion,onProgress:t.onProgress};t.rawLeaves?(a.codec=Lv,a.cidVersion=1):(s=new ao({type:t.leafType,data:o}),o=_c({Data:s.marshal(),Links:[]}));let u=await nu(o,n,a);return i+=BigInt(o.byteLength),t.onProgress?.(new Ti("unixfs:importer:progress:file:write",{bytesWritten:i,cid:u,path:r.path})),{cid:u,unixfs:s,size:BigInt(o.length),block:o}}}}_();var j9=Zt(vc(),1);_();var UQ=async(t,e,r)=>{let n=new ao({type:"directory",mtime:t.mtime,mode:t.mode}),i=_c(wc({Data:n.marshal()})),o=await nu(i,e,r),s=t.path;return{cid:o,path:s,unixfs:n,size:BigInt(i.length),originalPath:t.originalPath,block:i}};_();async function*MTe(t,e,r){let n=-1,i;for await(let o of Q_(r.bufferImporter(t,e),r.blockWriteConcurrency)){if(n++,n===0){i={...o,single:!0};continue}else n===1&&i!=null&&(yield{...i,block:void 0,single:void 0},i=void 0);yield{...o,block:void 0}}i!=null&&(yield i)}function FQ(t){return t.single===!0}var ATe=(t,e,r)=>async function(i){if(i.length===1&&FQ(i[0])&&r.reduceSingleLeafToSelf){let p=i[0],b=p.block;return FQ(p)&&(t.mtime!==void 0||t.mode!==void 0)&&(p.unixfs=new ao({type:"file",mtime:t.mtime,mode:t.mode,data:p.block}),b={Data:p.unixfs.marshal(),Links:[]},p.block=_c(wc(b)),p.cid=await nu(p.block,e,{...r,cidVersion:r.cidVersion}),p.size=BigInt(p.block.length)),r.onProgress?.(new Ti("unixfs:importer:progress:file:layout",{cid:p.cid,path:p.originalPath})),{cid:p.cid,path:t.path,unixfs:p.unixfs,size:p.size,originalPath:p.originalPath}}let o=new ao({type:"file",mtime:t.mtime,mode:t.mode}),s=i.filter(p=>p.cid.code===Kp&&p.size>0||p.unixfs!=null&&p.unixfs.data==null&&p.unixfs.fileSize()>0n?!0:Boolean(p.unixfs?.data?.length)).map(p=>p.cid.code===Kp?(o.addBlockSize(p.size),{Name:"",Tsize:Number(p.size),Hash:p.cid}):(p.unixfs==null||p.unixfs.data==null?o.addBlockSize(p.unixfs?.fileSize()??0n):o.addBlockSize(BigInt(p.unixfs.data.length)),{Name:"",Tsize:Number(p.size),Hash:p.cid})),a={Data:o.marshal(),Links:s},u=_c(wc(a)),m=await nu(u,e,r);return r.onProgress?.(new Ti("unixfs:importer:progress:file:layout",{cid:m,path:t.originalPath})),{cid:m,path:t.path,unixfs:o,size:BigInt(u.length+a.Links.reduce((p,b)=>p+(b.Tsize??0),0)),originalPath:t.originalPath,block:u}},zQ=async(t,e,r)=>r.layout(MTe(t,e,r),ATe(t,e,r));function PTe(t){return Symbol.iterator in t}function TTe(t){return Symbol.asyncIterator in t}function RTe(t){try{if(t instanceof Uint8Array)return async function*(){yield t}();if(PTe(t))return async function*(){yield*t}();if(TTe(t))return t}catch{throw(0,j9.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw(0,j9.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}function KQ(t){return async function*(r,n){for await(let i of r){let o;if(i.path!=null&&(o=i.path,i.path=i.path.split("/").filter(s=>s!=null&&s!==".").join("/")),ITe(i)){let s={path:i.path,mtime:i.mtime,mode:i.mode,content:async function*(){let a=0n;for await(let u of t.chunker(t.chunkValidator(RTe(i.content)))){let m=BigInt(u.byteLength);a+=m,t.onProgress?.(new Ti("unixfs:importer:progress:file:read",{bytesRead:a,chunkSize:m,path:i.path})),yield u}}(),originalPath:o};yield async()=>zQ(s,n,t)}else if(i.path!=null){let s={path:i.path,mtime:i.mtime,mode:i.mode,originalPath:o};yield async()=>UQ(s,n,t)}else throw new Error("Import candidate must have content or path or both")}}}function ITe(t){return t.content!=null}_();var sO=Zt(vc(),1);_();_();function WM(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}_();_();var F9={};zt(F9,{base10:()=>NTe});_();_();_();function kTe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,u=t.charAt(0),m=Math.log(a)/Math.log(256),p=Math.log(256)/Math.log(a);function b(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var P=0,k=0,R=0,B=S.length;R!==B&&S[R]===0;)R++,P++;for(var I=(B-R)*p+1>>>0,q=new Uint8Array(I);R!==B;){for(var $=S[R],U=0,F=I-1;($!==0||U<k)&&F!==-1;F--,U++)$+=256*q[F]>>>0,q[F]=$%a>>>0,$=$/a>>>0;if($!==0)throw new Error("Non-zero carry");k=U,R++}for(var L=I-k;L!==I&&q[L]===0;)L++;for(var W=u.repeat(P);L<I;++L)W+=t.charAt(q[L]);return W}function A(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var P=0;if(S[P]!==" "){for(var k=0,R=0;S[P]===u;)k++,P++;for(var B=(S.length-P)*m+1>>>0,I=new Uint8Array(B);S[P];){var q=r[S.charCodeAt(P)];if(q===255)return;for(var $=0,U=B-1;(q!==0||$<R)&&U!==-1;U--,$++)q+=a*I[U]>>>0,I[U]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");R=$,P++}if(S[P]!==" "){for(var F=B-R;F!==B&&I[F]===0;)F++;for(var L=new Uint8Array(k+(B-F)),W=k;F!==B;)L[W++]=I[F++];return L}}}function M(S){var P=A(S);if(P)return P;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:A,decode:M}}var OTe=kTe,BTe=OTe,WQ=BTe;_();var XMt=new Uint8Array(0);var GQ=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},nh=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var VQ=t=>new TextEncoder().encode(t),HQ=t=>new TextDecoder().decode(t);_();var q9=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},$9=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return JQ(this,e)}},L9=class{constructor(e){this.decoders=e}or(e){return JQ(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},JQ=(t,e)=>new L9({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),U9=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new q9(e,r,n),this.decoder=new $9(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Uv=({name:t,prefix:e,encode:r,decode:n})=>new U9(t,e,r,n),Wp=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=WQ(r,e);return Uv({prefix:t,name:e,encode:n,decode:o=>nh(i(o))})},DTe=(t,e,r,n)=>{let i={};for(let p=0;p<e.length;++p)i[e[p]]=p;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,u=0,m=0;for(let p=0;p<o;++p){let b=i[t[p]];if(b===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|b,a+=r,a>=8&&(a-=8,s[m++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s},CTe=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},Ri=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Uv({prefix:e,name:t,encode(i){return CTe(i,n,r)},decode(i){return DTe(i,n,r,t)}});var NTe=Wp({prefix:"9",name:"base10",alphabet:"0123456789"});var z9={};zt(z9,{base16:()=>jTe,base16upper:()=>qTe});_();var jTe=Ri({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),qTe=Ri({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var K9={};zt(K9,{base2:()=>$Te});_();var $Te=Ri({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var W9={};zt(W9,{base256emoji:()=>KTe});_();var YQ=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),LTe=YQ.reduce((t,e,r)=>(t[r]=e,t),[]),UTe=YQ.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function FTe(t){return t.reduce((e,r)=>(e+=LTe[r],e),"")}function zTe(t){let e=[];for(let r of t){let n=UTe[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var KTe=Uv({prefix:"\u{1F680}",name:"base256emoji",encode:FTe,decode:zTe});var G9={};zt(G9,{base32:()=>Fv,base32hex:()=>HTe,base32hexpad:()=>JTe,base32hexpadupper:()=>YTe,base32hexupper:()=>ZTe,base32pad:()=>GTe,base32padupper:()=>VTe,base32upper:()=>WTe,base32z:()=>QTe});_();var Fv=Ri({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),WTe=Ri({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),GTe=Ri({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),VTe=Ri({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),HTe=Ri({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ZTe=Ri({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),JTe=Ri({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),YTe=Ri({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),QTe=Ri({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var V9={};zt(V9,{base36:()=>XTe,base36upper:()=>eRe});_();var XTe=Wp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),eRe=Wp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var H9={};zt(H9,{base58btc:()=>ml,base58flickr:()=>tRe});_();var ml=Wp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),tRe=Wp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Z9={};zt(Z9,{base64:()=>rRe,base64pad:()=>nRe,base64url:()=>iRe,base64urlpad:()=>oRe});_();var rRe=Ri({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),nRe=Ri({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),iRe=Ri({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),oRe=Ri({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var J9={};zt(J9,{base8:()=>sRe});_();var sRe=Ri({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Y9={};zt(Y9,{identity:()=>aRe});_();var aRe=Uv({prefix:"\0",name:"identity",encode:t=>HQ(t),decode:t=>VQ(t)});_();var T8t=new TextEncoder,R8t=new TextDecoder;_();var X9={};zt(X9,{identity:()=>IRe});_();_();_();_();var uRe=eX,QQ=128,lRe=127,dRe=~lRe,hRe=Math.pow(2,31);function eX(t,e,r){e=e||[],r=r||0;for(var n=r;t>=hRe;)e[r++]=t&255|QQ,t/=128;for(;t&dRe;)e[r++]=t&255|QQ,t>>>=7;return e[r]=t|0,eX.bytes=r-n+1,e}var pRe=Q9,mRe=128,XQ=127;function Q9(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw Q9.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&XQ)<<i:(s&XQ)*Math.pow(2,i),i+=7}while(s>=mRe);return Q9.bytes=o-n,r}var yRe=Math.pow(2,7),gRe=Math.pow(2,14),bRe=Math.pow(2,21),vRe=Math.pow(2,28),wRe=Math.pow(2,35),_Re=Math.pow(2,42),xRe=Math.pow(2,49),ERe=Math.pow(2,56),SRe=Math.pow(2,63),MRe=function(t){return t<yRe?1:t<gRe?2:t<bRe?3:t<vRe?4:t<wRe?5:t<_Re?6:t<xRe?7:t<ERe?8:t<SRe?9:10},ARe={encode:uRe,decode:pRe,encodingLength:MRe},PRe=ARe,dx=PRe;var hx=(t,e=0)=>[dx.decode(t,e),dx.decode.bytes],zv=(t,e,r=0)=>(dx.encode(t,e,r),e),Kv=t=>dx.encodingLength(t);var oy=(t,e)=>{let r=e.byteLength,n=Kv(t),i=n+Kv(r),o=new Uint8Array(i+r);return zv(t,o,0),zv(r,o,n),o.set(e,i),new Wv(t,r,e,o)},tX=t=>{let e=nh(t),[r,n]=hx(e),[i,o]=hx(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new Wv(r,i,s,e)},rX=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&GQ(t.bytes,r.bytes)}},Wv=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var nX=0,TRe="identity",iX=nh,RRe=t=>oy(nX,iX(t)),IRe={code:nX,name:TRe,encode:iX,digest:RRe};var rO={};zt(rO,{sha256:()=>kRe,sha512:()=>ORe});_();_();var tO=({name:t,code:e,encode:r})=>new eO(t,e,r),eO=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?oy(this.code,r):r.then(n=>oy(this.code,n))}else throw Error("Unknown type, must be binary type")}};var sX=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),kRe=tO({name:"sha2-256",code:18,encode:sX("SHA-256")}),ORe=tO({name:"sha2-512",code:19,encode:sX("SHA-512")});_();_();_();var aX=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return DRe(r,nO(t),e||ml.encoder);default:return CRe(r,nO(t),e||Fv.encoder)}};var cX=new WeakMap,nO=t=>{let e=cX.get(t);if(e==null){let r=new Map;return cX.set(t,r),r}return e},co=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==mx)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==NRe)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return co.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=oy(e,r);return co.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return co.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&rX(e.multihash,n.multihash)}toString(e){return aX(this,e)}toJSON(){return{"/":aX(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof co)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new co(n,i,o,s||fX(n,i,o.bytes))}else if(r[jRe]===!0){let{version:n,multihash:i,code:o}=r,s=tX(i);return co.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==mx)throw new Error(`Version 0 CID must use dag-pb (code: ${mx}) block encoding`);return new co(e,r,n,n.bytes)}case 1:{let i=fX(e,r,n.bytes);return new co(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return co.create(0,mx,e)}static createV1(e,r){return co.create(1,e,r)}static decode(e){let[r,n]=co.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=co.inspectBytes(e),n=r.size-r.multihashSize,i=nh(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new Wv(r.multihashCode,r.digestSize,o,i);return[r.version===0?co.createV0(s):co.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[b,A]=hx(e.subarray(r));return r+=A,b},i=n(),o=mx;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),u=n(),m=r+u,p=m-s;return{version:i,codec:o,multihashCode:a,digestSize:u,multihashSize:p,size:m}}static parse(e,r){let[n,i]=BRe(e,r),o=co.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return nO(o).set(n,e),o}},BRe=(t,e)=>{switch(t[0]){case"Q":{let r=e||ml;return[ml.prefix,r.decode(`${ml.prefix}${t}`)]}case ml.prefix:{let r=e||ml;return[ml.prefix,r.decode(t)]}case Fv.prefix:{let r=e||Fv;return[Fv.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},DRe=(t,e,r)=>{let{prefix:n}=r;if(n!==ml.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},CRe=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},mx=112,NRe=18,fX=(t,e,r)=>{let n=Kv(t),i=n+Kv(e),o=new Uint8Array(i+r.byteLength);return zv(t,o,0),zv(e,o,n),o.set(r,i),o},jRe=Symbol.for("@ipld/js-cid/CID");_();var iO={...Y9,...K9,...J9,...F9,...z9,...G9,...V9,...H9,...Z9,...W9},i5t={...rO,...X9};_();function uX(t=0){return globalThis.Buffer?.allocUnsafe!=null?WM(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function dX(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var lX=dX("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),oO=dX("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=uX(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),qRe={utf8:lX,"utf-8":lX,hex:iO.base16,latin1:oO,ascii:oO,binary:oO,...iO},hX=qRe;function pX(t,e="utf8"){let r=hX[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?WM(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var mX=()=>async function*(e){for await(let r of e){if(r.length===void 0)throw(0,sO.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if(typeof r=="string"||r instanceof String)yield pX(r.toString());else if(Array.isArray(r))yield Uint8Array.from(r);else if(r instanceof Uint8Array)yield r;else throw(0,sO.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}};_();_();var $Re=174;function aO(t){let e=t?.maxChildrenPerNode??$Re;return async function r(n,i){let o=[];for await(let s of Y_(n,e))o.push(await i(s));return o.length>1?r(o,i):o[0]}}_();_();_();_();_();_();var yl=class{options;root;dir;path;dirty;flat;parent;parentKey;unixfs;mode;mtime;cid;size;nodeSize;constructor(e,r){this.options=r??{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime}},yx=Mt.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),gx=Mt.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi");var sy=class extends yl{_children;constructor(e,r){super(e,r),this._children=new Map}async put(e,r){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,this._children.set(e,r)}async get(e){return Promise.resolve(this._children.get(e))}childCount(){return this._children.size}directChildrenCount(){return this.childCount()}onlyChild(){return this._children.values().next().value}async*eachChildSeries(){for(let[e,r]of this._children.entries())yield{key:e,child:r}}estimateNodeSize(){if(this.nodeSize!==void 0)return this.nodeSize;this.nodeSize=0;for(let[e,r]of this._children.entries())r.size!=null&&r.cid!=null&&(this.nodeSize+=e.length+(this.options.cidVersion===1?gx.bytes.byteLength:yx.bytes.byteLength));return this.nodeSize}async*flush(e){let r=[];for(let[u,m]of this._children.entries()){let p=m;if(m instanceof yl)for await(let b of m.flush(e))p=b,yield b;p.size!=null&&p.cid!=null&&r.push({Name:u,Tsize:Number(p.size),Hash:p.cid})}let n=new ao({type:"directory",mtime:this.mtime,mode:this.mode}),i={Data:n.marshal(),Links:r},o=_c(wc(i)),s=await nu(o,e,this.options),a=o.length+i.Links.reduce((u,m)=>u+(m.Tsize==null?0:m.Tsize),0);this.cid=s,this.size=a,yield{cid:s,unixfs:n,path:this.path,size:BigInt(a)}}};_();_();_();_();_();_();_();var LRe=bX,yX=128,URe=127,FRe=~URe,zRe=Math.pow(2,31);function bX(t,e,r){e=e||[],r=r||0;for(var n=r;t>=zRe;)e[r++]=t&255|yX,t/=128;for(;t&FRe;)e[r++]=t&255|yX,t>>>=7;return e[r]=t|0,bX.bytes=r-n+1,e}var KRe=cO,WRe=128,gX=127;function cO(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw cO.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&gX)<<i:(s&gX)*Math.pow(2,i),i+=7}while(s>=WRe);return cO.bytes=o-n,r}var GRe=Math.pow(2,7),VRe=Math.pow(2,14),HRe=Math.pow(2,21),ZRe=Math.pow(2,28),JRe=Math.pow(2,35),YRe=Math.pow(2,42),QRe=Math.pow(2,49),XRe=Math.pow(2,56),eIe=Math.pow(2,63),tIe=function(t){return t<GRe?1:t<VRe?2:t<HRe?3:t<ZRe?4:t<JRe?5:t<YRe?6:t<QRe?7:t<XRe?8:t<eIe?9:10},rIe={encode:LRe,decode:KRe,encodingLength:tIe},nIe=rIe,bx=nIe;var vx=(t,e=0)=>[bx.decode(t,e),bx.decode.bytes],Gv=(t,e,r=0)=>(bx.encode(t,e,r),e),Vv=t=>bx.encodingLength(t);_();var wx={};zt(wx,{coerce:()=>ay,empty:()=>vX,equals:()=>uO,fromHex:()=>oIe,fromString:()=>aIe,isBinary:()=>sIe,toHex:()=>iIe,toString:()=>cIe});_();var vX=new Uint8Array(0),iIe=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),oIe=t=>{let e=t.match(/../g);return e?new Uint8Array(e.map(r=>parseInt(r,16))):vX},uO=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},ay=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},sIe=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),aIe=t=>new TextEncoder().encode(t),cIe=t=>new TextDecoder().decode(t);var _x=(t,e)=>{let r=e.byteLength,n=Vv(t),i=n+Vv(r),o=new Uint8Array(i+r);return Gv(t,o,0),Gv(r,o,n),o.set(e,i),new Hv(t,r,e,o)},wX=t=>{let e=ay(t),[r,n]=vx(e),[i,o]=vx(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new Hv(r,i,s,e)},_X=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&uO(t.bytes,r.bytes)}},Hv=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};_();_();_();function fIe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,u=t.charAt(0),m=Math.log(a)/Math.log(256),p=Math.log(256)/Math.log(a);function b(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var P=0,k=0,R=0,B=S.length;R!==B&&S[R]===0;)R++,P++;for(var I=(B-R)*p+1>>>0,q=new Uint8Array(I);R!==B;){for(var $=S[R],U=0,F=I-1;($!==0||U<k)&&F!==-1;F--,U++)$+=256*q[F]>>>0,q[F]=$%a>>>0,$=$/a>>>0;if($!==0)throw new Error("Non-zero carry");k=U,R++}for(var L=I-k;L!==I&&q[L]===0;)L++;for(var W=u.repeat(P);L<I;++L)W+=t.charAt(q[L]);return W}function A(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var P=0;if(S[P]!==" "){for(var k=0,R=0;S[P]===u;)k++,P++;for(var B=(S.length-P)*m+1>>>0,I=new Uint8Array(B);S[P];){var q=r[S.charCodeAt(P)];if(q===255)return;for(var $=0,U=B-1;(q!==0||$<R)&&U!==-1;U--,$++)q+=a*I[U]>>>0,I[U]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");R=$,P++}if(S[P]!==" "){for(var F=B-R;F!==B&&I[F]===0;)F++;for(var L=new Uint8Array(k+(B-F)),W=k;F!==B;)L[W++]=I[F++];return L}}}function M(S){var P=A(S);if(P)return P;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:A,decode:M}}var uIe=fIe,lIe=uIe,xX=lIe;_();var dO=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},hO=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return EX(this,e)}},pO=class{constructor(e){this.decoders=e}or(e){return EX(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},EX=(t,e)=>new pO({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),mO=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new dO(e,r,n),this.decoder=new hO(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},SX=({name:t,prefix:e,encode:r,decode:n})=>new mO(t,e,r,n),yO=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=xX(r,e);return SX({prefix:t,name:e,encode:n,decode:o=>ay(i(o))})},dIe=(t,e,r,n)=>{let i={};for(let p=0;p<e.length;++p)i[e[p]]=p;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,u=0,m=0;for(let p=0;p<o;++p){let b=i[t[p]];if(b===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|b,a+=r,a>=8&&(a-=8,s[m++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s},hIe=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},gl=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>SX({prefix:e,name:t,encode(i){return hIe(i,n,r)},decode(i){return dIe(i,n,r,t)}});var ih=yO({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),l4t=yO({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});_();var xx=gl({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),m4t=gl({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),y4t=gl({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),g4t=gl({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),b4t=gl({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),v4t=gl({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),w4t=gl({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),_4t=gl({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),x4t=gl({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});_();var MX=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return mIe(r,gO(t),e||ih.encoder);default:return yIe(r,gO(t),e||xx.encoder)}};var AX=new WeakMap,gO=t=>{let e=AX.get(t);if(e==null){let r=new Map;return AX.set(t,r),r}return e},xo=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==Ex)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==gIe)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return xo.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=_x(e,r);return xo.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return xo.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&_X(e.multihash,n.multihash)}toString(e){return MX(this,e)}toJSON(){return{"/":MX(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof xo)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new xo(n,i,o,s||PX(n,i,o.bytes))}else if(r[bIe]===!0){let{version:n,multihash:i,code:o}=r,s=wX(i);return xo.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Ex)throw new Error(`Version 0 CID must use dag-pb (code: ${Ex}) block encoding`);return new xo(e,r,n,n.bytes)}case 1:{let i=PX(e,r,n.bytes);return new xo(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return xo.create(0,Ex,e)}static createV1(e,r){return xo.create(1,e,r)}static decode(e){let[r,n]=xo.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=xo.inspectBytes(e),n=r.size-r.multihashSize,i=ay(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new Hv(r.multihashCode,r.digestSize,o,i);return[r.version===0?xo.createV0(s):xo.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[b,A]=vx(e.subarray(r));return r+=A,b},i=n(),o=Ex;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),u=n(),m=r+u,p=m-s;return{version:i,codec:o,multihashCode:a,digestSize:u,multihashSize:p,size:m}}static parse(e,r){let[n,i]=pIe(e,r),o=xo.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return gO(o).set(n,e),o}},pIe=(t,e)=>{switch(t[0]){case"Q":{let r=e||ih;return[ih.prefix,r.decode(`${ih.prefix}${t}`)]}case ih.prefix:{let r=e||ih;return[ih.prefix,r.decode(t)]}case xx.prefix:{let r=e||xx;return[xx.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},mIe=(t,e,r)=>{let{prefix:n}=r;if(n!==ih.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},yIe=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},Ex=112,gIe=18,PX=(t,e,r)=>{let n=Vv(t),i=n+Vv(e),o=new Uint8Array(i+r.byteLength);return Gv(t,o,0),Gv(e,o,n),o.set(r,i),o},bIe=Symbol.for("@ipld/js-cid/CID");_();var VM=({name:t,code:e,encode:r})=>new bO(t,e,r),bO=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?_x(this.code,r):r.then(n=>_x(this.code,n))}else throw Error("Unknown type, must be binary type")}};_();var ZM=Zt(IX(),1);function wIe(t){let e=new Array(4);for(let r=0;r<4;r++)e[r]=t&255,t=t>>8;return new Uint8Array(e)}var K4t=VM({name:"murmur3-32",code:35,encode:t=>wIe(ZM.default.x86.hash32(t))}),JM=VM({name:"murmur3-128",code:34,encode:t=>wx.fromHex(ZM.default.x64.hash128(t))}),W4t=VM({name:"murmur3-x64-64",code:34,encode:t=>wx.fromHex(ZM.default.x64.hash128(t)).subarray(0,8)});_();_();var nee=Zt(BX(),1);_();_();function Zv(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}_();_();var EO={};zt(EO,{base10:()=>RIe});_();_();_();function SIe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,u=t.charAt(0),m=Math.log(a)/Math.log(256),p=Math.log(256)/Math.log(a);function b(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var P=0,k=0,R=0,B=S.length;R!==B&&S[R]===0;)R++,P++;for(var I=(B-R)*p+1>>>0,q=new Uint8Array(I);R!==B;){for(var $=S[R],U=0,F=I-1;($!==0||U<k)&&F!==-1;F--,U++)$+=256*q[F]>>>0,q[F]=$%a>>>0,$=$/a>>>0;if($!==0)throw new Error("Non-zero carry");k=U,R++}for(var L=I-k;L!==I&&q[L]===0;)L++;for(var W=u.repeat(P);L<I;++L)W+=t.charAt(q[L]);return W}function A(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var P=0;if(S[P]!==" "){for(var k=0,R=0;S[P]===u;)k++,P++;for(var B=(S.length-P)*m+1>>>0,I=new Uint8Array(B);S[P];){var q=r[S.charCodeAt(P)];if(q===255)return;for(var $=0,U=B-1;(q!==0||$<R)&&U!==-1;U--,$++)q+=a*I[U]>>>0,I[U]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");R=$,P++}if(S[P]!==" "){for(var F=B-R;F!==B&&I[F]===0;)F++;for(var L=new Uint8Array(k+(B-F)),W=k;F!==B;)L[W++]=I[F++];return L}}}function M(S){var P=A(S);if(P)return P;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:A,decode:M}}var MIe=SIe,AIe=MIe,DX=AIe;_();var tAt=new Uint8Array(0);var CX=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},oh=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var NX=t=>new TextEncoder().encode(t),jX=t=>new TextDecoder().decode(t);_();var vO=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},wO=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return $X(this,e)}},_O=class{constructor(e){this.decoders=e}or(e){return $X(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},$X=(t,e)=>new _O({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),xO=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new vO(e,r,n),this.decoder=new wO(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Jv=({name:t,prefix:e,encode:r,decode:n})=>new xO(t,e,r,n),Gp=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=DX(r,e);return Jv({prefix:t,name:e,encode:n,decode:o=>oh(i(o))})},PIe=(t,e,r,n)=>{let i={};for(let p=0;p<e.length;++p)i[e[p]]=p;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,u=0,m=0;for(let p=0;p<o;++p){let b=i[t[p]];if(b===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|b,a+=r,a>=8&&(a-=8,s[m++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s},TIe=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},Ii=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Jv({prefix:e,name:t,encode(i){return TIe(i,n,r)},decode(i){return PIe(i,n,r,t)}});var RIe=Gp({prefix:"9",name:"base10",alphabet:"0123456789"});var SO={};zt(SO,{base16:()=>IIe,base16upper:()=>kIe});_();var IIe=Ii({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),kIe=Ii({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var MO={};zt(MO,{base2:()=>OIe});_();var OIe=Ii({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var AO={};zt(AO,{base256emoji:()=>jIe});_();var LX=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),BIe=LX.reduce((t,e,r)=>(t[r]=e,t),[]),DIe=LX.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function CIe(t){return t.reduce((e,r)=>(e+=BIe[r],e),"")}function NIe(t){let e=[];for(let r of t){let n=DIe[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var jIe=Jv({prefix:"\u{1F680}",name:"base256emoji",encode:CIe,decode:NIe});var PO={};zt(PO,{base32:()=>Yv,base32hex:()=>UIe,base32hexpad:()=>zIe,base32hexpadupper:()=>KIe,base32hexupper:()=>FIe,base32pad:()=>$Ie,base32padupper:()=>LIe,base32upper:()=>qIe,base32z:()=>WIe});_();var Yv=Ii({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qIe=Ii({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),$Ie=Ii({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),LIe=Ii({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),UIe=Ii({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),FIe=Ii({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),zIe=Ii({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),KIe=Ii({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),WIe=Ii({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var TO={};zt(TO,{base36:()=>GIe,base36upper:()=>VIe});_();var GIe=Gp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),VIe=Gp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var RO={};zt(RO,{base58btc:()=>bl,base58flickr:()=>HIe});_();var bl=Gp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),HIe=Gp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var IO={};zt(IO,{base64:()=>ZIe,base64pad:()=>JIe,base64url:()=>YIe,base64urlpad:()=>QIe});_();var ZIe=Ii({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),JIe=Ii({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),YIe=Ii({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),QIe=Ii({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var kO={};zt(kO,{base8:()=>XIe});_();var XIe=Ii({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var OO={};zt(OO,{identity:()=>eke});_();var eke=Jv({prefix:"\0",name:"identity",encode:t=>jX(t),decode:t=>NX(t)});_();var IAt=new TextEncoder,kAt=new TextDecoder;_();var DO={};zt(DO,{identity:()=>Eke});_();_();_();_();var nke=zX,UX=128,ike=127,oke=~ike,ske=Math.pow(2,31);function zX(t,e,r){e=e||[],r=r||0;for(var n=r;t>=ske;)e[r++]=t&255|UX,t/=128;for(;t&oke;)e[r++]=t&255|UX,t>>>=7;return e[r]=t|0,zX.bytes=r-n+1,e}var ake=BO,cke=128,FX=127;function BO(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw BO.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&FX)<<i:(s&FX)*Math.pow(2,i),i+=7}while(s>=cke);return BO.bytes=o-n,r}var fke=Math.pow(2,7),uke=Math.pow(2,14),lke=Math.pow(2,21),dke=Math.pow(2,28),hke=Math.pow(2,35),pke=Math.pow(2,42),mke=Math.pow(2,49),yke=Math.pow(2,56),gke=Math.pow(2,63),bke=function(t){return t<fke?1:t<uke?2:t<lke?3:t<dke?4:t<hke?5:t<pke?6:t<mke?7:t<yke?8:t<gke?9:10},vke={encode:nke,decode:ake,encodingLength:bke},wke=vke,Mx=wke;var Ax=(t,e=0)=>[Mx.decode(t,e),Mx.decode.bytes],Qv=(t,e,r=0)=>(Mx.encode(t,e,r),e),Xv=t=>Mx.encodingLength(t);var cy=(t,e)=>{let r=e.byteLength,n=Xv(t),i=n+Xv(r),o=new Uint8Array(i+r);return Qv(t,o,0),Qv(r,o,n),o.set(e,i),new ew(t,r,e,o)},KX=t=>{let e=oh(t),[r,n]=Ax(e),[i,o]=Ax(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new ew(r,i,s,e)},WX=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&CX(t.bytes,r.bytes)}},ew=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var GX=0,_ke="identity",VX=oh,xke=t=>cy(GX,VX(t)),Eke={code:GX,name:_ke,encode:VX,digest:xke};var jO={};zt(jO,{sha256:()=>Ske,sha512:()=>Mke});_();_();var NO=({name:t,code:e,encode:r})=>new CO(t,e,r),CO=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?cy(this.code,r):r.then(n=>cy(this.code,n))}else throw Error("Unknown type, must be binary type")}};var ZX=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Ske=NO({name:"sha2-256",code:18,encode:ZX("SHA-256")}),Mke=NO({name:"sha2-512",code:19,encode:ZX("SHA-512")});_();_();_();var JX=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return Pke(r,qO(t),e||bl.encoder);default:return Tke(r,qO(t),e||Yv.encoder)}};var YX=new WeakMap,qO=t=>{let e=YX.get(t);if(e==null){let r=new Map;return YX.set(t,r),r}return e},fo=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==Tx)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Rke)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return fo.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=cy(e,r);return fo.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return fo.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&WX(e.multihash,n.multihash)}toString(e){return JX(this,e)}toJSON(){return{"/":JX(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof fo)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new fo(n,i,o,s||QX(n,i,o.bytes))}else if(r[Ike]===!0){let{version:n,multihash:i,code:o}=r,s=KX(i);return fo.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Tx)throw new Error(`Version 0 CID must use dag-pb (code: ${Tx}) block encoding`);return new fo(e,r,n,n.bytes)}case 1:{let i=QX(e,r,n.bytes);return new fo(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return fo.create(0,Tx,e)}static createV1(e,r){return fo.create(1,e,r)}static decode(e){let[r,n]=fo.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=fo.inspectBytes(e),n=r.size-r.multihashSize,i=oh(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new ew(r.multihashCode,r.digestSize,o,i);return[r.version===0?fo.createV0(s):fo.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[b,A]=Ax(e.subarray(r));return r+=A,b},i=n(),o=Tx;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),u=n(),m=r+u,p=m-s;return{version:i,codec:o,multihashCode:a,digestSize:u,multihashSize:p,size:m}}static parse(e,r){let[n,i]=Ake(e,r),o=fo.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return qO(o).set(n,e),o}},Ake=(t,e)=>{switch(t[0]){case"Q":{let r=e||bl;return[bl.prefix,r.decode(`${bl.prefix}${t}`)]}case bl.prefix:{let r=e||bl;return[bl.prefix,r.decode(t)]}case Yv.prefix:{let r=e||Yv;return[Yv.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Pke=(t,e,r)=>{let{prefix:n}=r;if(n!==bl.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},Tke=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},Tx=112,Rke=18,QX=(t,e,r)=>{let n=Xv(t),i=n+Xv(e),o=new Uint8Array(i+r.byteLength);return Qv(t,o,0),Qv(e,o,n),o.set(r,i),o},Ike=Symbol.for("@ipld/js-cid/CID");_();var $O={...OO,...MO,...kO,...EO,...SO,...PO,...TO,...RO,...IO,...AO},sPt={...jO,...DO};_();function QM(t=0){return globalThis.Buffer?.allocUnsafe!=null?Zv(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function eee(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var XX=eee("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),LO=eee("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=QM(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),kke={utf8:XX,"utf-8":XX,hex:$O.base16,latin1:LO,ascii:LO,binary:LO,...$O},tee=kke;function ree(t,e="utf8"){let r=tee[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Zv(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var zo=class{constructor(e,r,n=0){this._options=e,this._popCount=0,this._parent=r,this._posAtParent=n,this._children=new nee.default,this.key=null}async put(e,r){let n=await this._findNewBucketAndPos(e);await n.bucket._putAt(n,e,r)}async get(e){let r=await this._findChild(e);if(r!=null)return r.value}async del(e){let r=await this._findPlace(e),n=r.bucket._at(r.pos);n!=null&&n.key===e&&r.bucket._delAt(r.pos)}leafCount(){return this._children.compactArray().reduce((r,n)=>n instanceof zo?r+n.leafCount():r+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){let e=this._children.compactArray();for(let r of e)r instanceof zo?yield*r.eachLeafSeries():yield r}serialize(e,r){let n=[];return r(this._children.reduce((i,o,s)=>(o!=null&&(o instanceof zo?i.push(o.serialize(e,r)):i.push(e(o,s))),i),n))}async asyncTransform(e,r){return await iee(this,e,r)}toJSON(){return this.serialize(Bke,Dke)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){let r=await this._findPlace(e),n=r.bucket._at(r.pos);if(!(n instanceof zo)&&n!=null&&n.key===e)return n}async _findPlace(e){let r=this._options.hash(typeof e=="string"?ree(e):e),n=await r.take(this._options.bits),i=this._children.get(n);return i instanceof zo?await i._findPlace(r):{bucket:this,pos:n,hash:r,existingChild:i}}async _findNewBucketAndPos(e){let r=await this._findPlace(e);if(r.existingChild!=null&&r.existingChild.key!==e){let n=new zo(this._options,r.bucket,r.pos);r.bucket._putObjectAt(r.pos,n);let i=await n._findPlace(r.existingChild.hash);return i.bucket._putAt(i,r.existingChild.key,r.existingChild.value),await n._findNewBucketAndPos(r.hash)}return r}_putAt(e,r,n){this._putObjectAt(e.pos,{key:r,value:n,hash:e.hash})}_putObjectAt(e,r){this._children.get(e)==null&&this._popCount++,this._children.set(e,r)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)!=null&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent!=null&&this._popCount<=1)if(this._popCount===1){let e=this._children.find(Oke);if(e!=null&&!(e instanceof zo)){let r=e.hash;r.untake(this._options.bits);let n={pos:this._posAtParent,hash:r,bucket:this._parent};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}};function Oke(t){return Boolean(t)}function Bke(t,e){return t.key}function Dke(t){return t}async function iee(t,e,r){let n=[];for(let i of t._children.compactArray())if(i instanceof zo)await iee(i,e,r);else{let o=await e(i);n.push({bitField:t._children.bitField(),children:o})}return await r(n)}_();_();var Cke=[255,254,252,248,240,224,192,128],Nke=[1,3,7,15,31,63,127,255],XM=class{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let r=e,n=0;for(;r>0&&this._haveBits();){let i=this._value[this._currentBytePos],o=this._currentBitPos+1,s=Math.min(o,r),a=jke(i,o-s,s);n=(n<<s)+a,r-=s,this._currentBitPos-=s,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function jke(t,e,r){let n=qke(e,r);return(t&n)>>>e}function qke(t,e){return Cke[t]&Nke[Math.min(e+t-1,7)]}_();function oee(t,e){e==null&&(e=t.reduce((i,o)=>i+o.length,0));let r=QM(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return Zv(r)}function see(t){function e(r){return r instanceof e8?r:new e8(r,t)}return e}var e8=class{constructor(e,r){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let r=e;for(;this._availableBits<r;)await this._produceMoreBits();let n=0;for(;r>0;){let i=this._buffers[this._currentBufferIndex],o=Math.min(i.availableBits(),r),s=i.take(o);n=(n<<o)+s,r-=o,this._availableBits-=o,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let r=e;for(;r>0;){let n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),r);n.untake(i),r-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let e=this._depth>0?oee([this._value,Uint8Array.from([this._depth])]):this._value,r=await this._hashFn(e),n=new XM(r);this._buffers.push(n),this._availableBits+=n.availableBits()}};function t8(t){if(t==null||t.hashFn==null)throw new Error("please define an options.hashFn");let e={bits:t.bits??8,hash:see(t.hashFn)};return new zo(e)}async function $ke(t){return(await JM.encode(t)).slice(0,8).reverse()}var aee=BigInt(34),UO=class extends yl{_bucket;constructor(e,r){super(e,r),this._bucket=t8({hashFn:$ke,bits:8})}async put(e,r){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,await this._bucket.put(e,r)}async get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:e,value:r}of this._bucket.eachLeafSeries())yield{key:e,child:r}}estimateNodeSize(){return this.nodeSize!==void 0?this.nodeSize:(this.nodeSize=uee(this._bucket,this,this.options),this.nodeSize)}async*flush(e){for await(let r of fee(this._bucket,e,this,this.options))yield{...r,path:this.path}}},cee=UO;async function*fee(t,e,r,n){let i=t._children,o=[],s=0n;for(let M=0;M<i.length;M++){let S=i.get(M);if(S==null)continue;let P=M.toString(16).toUpperCase().padStart(2,"0");if(S instanceof zo){let k;for await(let R of fee(S,e,null,n))k=R;if(k==null)throw new Error("Could not flush sharded directory, no subshard found");o.push({Name:P,Tsize:Number(k.size),Hash:k.cid}),s+=k.size}else if(Lke(S.value)){let k=S.value,R;for await(let I of k.flush(e))R=I,yield R;if(R==null)throw new Error("Did not flush dir");let B=P+S.key;o.push({Name:B,Tsize:Number(R.size),Hash:R.cid}),s+=R.size}else{let k=S.value;if(k.cid==null)continue;let R=P+S.key,B=k.size;o.push({Name:R,Tsize:Number(B),Hash:k.cid}),s+=BigInt(B??0)}}let a=Uint8Array.from(i.bitField().reverse()),u=new ao({type:"hamt-sharded-directory",data:a,fanout:BigInt(t.tableSize()),hashType:aee,mtime:r?.mtime,mode:r?.mode}),m={Data:u.marshal(),Links:o},p=_c(wc(m)),b=await nu(p,e,n),A=BigInt(p.byteLength)+s;yield{cid:b,unixfs:u,size:A}}function Lke(t){return typeof t.flush=="function"}function uee(t,e,r){let n=t._children,i=[];for(let u=0;u<n.length;u++){let m=n.get(u);if(m==null)continue;let p=u.toString(16).toUpperCase().padStart(2,"0");if(m instanceof zo){let b=uee(m,null,r);i.push({Name:p,Tsize:Number(b),Hash:r.cidVersion===0?yx:gx})}else if(typeof m.value.flush=="function"){let A=m.value.nodeSize();i.push({Name:p+m.key,Tsize:Number(A),Hash:r.cidVersion===0?yx:gx})}else{let b=m.value;if(b.cid==null)continue;let A=p+m.key,M=b.size;i.push({Name:A,Tsize:Number(M),Hash:b.cid})}}let o=Uint8Array.from(n.bitField().reverse()),s=new ao({type:"hamt-sharded-directory",data:o,fanout:BigInt(t.tableSize()),hashType:aee,mtime:e?.mtime,mode:e?.mode});return _c(wc({Data:s.marshal(),Links:i})).length}async function FO(t,e,r,n){let i=e;e instanceof sy&&e.estimateNodeSize()>r&&(i=await Uke(e,n));let o=i.parent;if(o!=null){if(i!==e){if(t!=null&&(t.parent=i),i.parentKey==null)throw new Error("No parent key found");await o.put(i.parentKey,i)}return FO(i,o,r,n)}return i}async function Uke(t,e){let r=new cee({root:t.root,dir:!0,parent:t.parent,parentKey:t.parentKey,path:t.path,dirty:t.dirty,flat:!1,mtime:t.mtime,mode:t.mode},e);for await(let{key:n,child:i}of t.eachChildSeries())await r.put(n,i);return r}_();var lee=(t="")=>(t.trim().match(/([^\\/]|\\\/)+/g)??[]).filter(Boolean);async function Fke(t,e,r){let n=lee(t.path??""),i=n.length-1,o=e,s="";for(let a=0;a<n.length;a++){let u=n[a];s+=`${s!==""?"/":""}${u}`;let m=a===i;if(o.dirty=!0,o.cid=void 0,o.size=void 0,m)await o.put(u,t),e=await FO(null,o,r.shardSplitThresholdBytes,r);else{let p=await o.get(u);(p==null||!(p instanceof yl))&&(p=new sy({root:!1,dir:!0,parent:o,parentKey:u,path:s,dirty:!0,flat:!0,mtime:p?.unixfs?.mtime,mode:p?.unixfs?.mode},r)),await o.put(u,p),o=p}}return e}async function*dee(t,e){if(!(t instanceof yl)){t.unixfs?.isDirectory()===!0&&(yield t);return}yield*t.flush(e)}function hee(t){return async function*(r,n){let i=new sy({root:!0,dir:!0,path:"",dirty:!0,flat:!0},t),o,s=!1;for await(let a of r){if(a==null)continue;let u=`${a.originalPath??""}`.split("/")[0];u!=null&&u!==""&&(o==null?(o=u,s=!0):o!==u&&(s=!1)),i=await Fke(a,i,t),(a.unixfs==null||!a.unixfs.isDirectory())&&(yield a)}if(t.wrapWithDirectory||s&&i.childCount()>1)yield*dee(i,n);else for await(let a of i.eachChildSeries())a!=null&&(yield*dee(a.child,n))}}async function*Rx(t,e,r={}){let n;Symbol.asyncIterator in t||Symbol.iterator in t?n=t:n=[t];let i=r.wrapWithDirectory??!1,o=r.shardSplitThresholdBytes??262144,s=r.cidVersion??1,a=r.rawLeaves??!0,u=r.leafType??"file",m=r.fileImportConcurrency??50,p=r.blockWriteConcurrency??10,b=r.reduceSingleLeafToSelf??!0,A=r.chunker??_Y(),M=r.chunkValidator??mX(),S=r.dagBuilder??KQ({chunker:A,chunkValidator:M,wrapWithDirectory:i,layout:r.layout??aO(),bufferImporter:r.bufferImporter??LQ({cidVersion:s,rawLeaves:a,leafType:u,onProgress:r.onProgress}),blockWriteConcurrency:p,reduceSingleLeafToSelf:b,cidVersion:s,onProgress:r.onProgress}),P=r.treeBuilder??hee({wrapWithDirectory:i,shardSplitThresholdBytes:o,cidVersion:s,onProgress:r.onProgress});for await(let k of P(Q_(S(n,e),m),e))yield{cid:k.cid,path:k.path,unixfs:k.unixfs,size:k.size}}var pee={[ss.code]:ss},mee={[Up]:Xd},jn=class{static async computeCid(e,r=Up,n=ss.code){let i=mee[r];if(!i)throw new be("ComputeCidCodecNotSupported",`codec [${r}] not supported`);let o=pee[n];if(!o)throw new be("ComputeCidMultihashNotSupported",`multihash code [${n}] not supported`);let s=i.encode(e),a=await o.digest(s);return(await Mt.createV1(i.code,a)).toString()}static parseCid(e){let r=Mt.parse(e).toV1();if(!mee[r.code])throw new be("ParseCidCodecNotSupported",`codec [${r.code}] not supported`);if(!pee[r.multihash.code])throw new be("ParseCidMultihashNotSupported",`multihash code [${r.multihash.code}] not supported`);return r}static async computeDagPbCidFromBytes(e){let r=Rx([{content:e}],new J_,{cidVersion:1}),n;for await(n of r);return n?n.cid.toString():""}static async computeDagPbCidFromStream(e){let r=Rx([{content:e}],new J_,{cidVersion:1}),n;for await(n of r);return n?n.cid.toString():""}};_();var nP=Zt(j5(),1),D0=Zt(Hde(),1),n$=Zt(rP(),1);D0.ECIES_CONFIG.isEphemeralKeyCompressed=!0;var Sf=class{static async aes256CtrEncrypt(e,r,n){let i=nP.createCipheriv("aes-256-ctr",e,r),o=new n$.Readable({read(){}});return n.on("data",s=>{let a=i.update(s);o.push(a)}),n.on("end",()=>{let s=i.final();o.push(s),o.push(null)}),n.on("error",s=>{o.emit("error",s)}),o}static async aes256CtrDecrypt(e,r,n){let i=nP.createDecipheriv("aes-256-ctr",e,r),o=new n$.Readable({read(){}});return n.on("data",s=>{let a=i.update(s);o.push(a)}),n.on("end",()=>{let s=i.final();o.push(s),o.push(null)}),n.on("error",s=>{o.emit("error",s)}),o}static async eciesSecp256k1Encrypt(e,r){let n=N.Buffer.from(e),i=N.Buffer.from(r),o=D0.encrypt(n,i),s=0,a=Sf.isEphemeralKeyCompressed?33:65,u=o.subarray(s,a);s=a,a+=D0.ECIES_CONFIG.symmetricNonceLength;let m=o.subarray(s,a);s=a,a+=16;let p=o.subarray(s,a);return{ciphertext:o.subarray(a),ephemeralPublicKey:u,initializationVector:m,messageAuthenticationCode:p}}static async eciesSecp256k1Decrypt(e){let r=N.Buffer.from(e.privateKey),n=N.Buffer.concat([e.ephemeralPublicKey,e.initializationVector,e.messageAuthenticationCode,e.ciphertext]);return D0.decrypt(r,n)}static get isEphemeralKeyCompressed(){return D0.ECIES_CONFIG.isEphemeralKeyCompressed}},i$=(r=>(r.Aes256Ctr="A256CTR",r.EciesSecp256k1="ECIES-ES256K",r))(i$||{});_();var kh=class{constructor(e){this.jws=e}static async create(e,r=[]){let n={payload:Je.bytesToBase64Url(e),signatures:[]},i=new kh(n);for(let o of r)await i.addSignature(o);return i}async addSignature(e){let r={kid:e.keyId,alg:e.algorithm},n=JSON.stringify(r),i=Je.stringToBase64Url(n),o=`${i}.${this.jws.payload}`,s=Je.stringToBytes(o),a=await e.sign(s),u=Je.bytesToBase64Url(a);this.jws.signatures.push({protected:i,signature:u})}getJws(){return this.jws}};_();_();_();var iP=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function iS(){if(iP&&typeof iP.subtle=="object"&&iP.subtle!=null)return iP.subtle;throw new Error("crypto.subtle must be defined")}_();function $Qe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function oS(t,...e){if(!$Qe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}var j0e={async encrypt(t,e,r,n){let i=iS(),o=await i.importKey("raw",t,e,!0,["encrypt"]),s=await i.encrypt(r,o,n);return new Uint8Array(s)},async decrypt(t,e,r,n){let i=iS(),o=await i.importKey("raw",t,e,!0,["decrypt"]),s=await i.decrypt(r,o,n);return new Uint8Array(s)}},Kl={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function LQe(t,e,r){if(t===Kl.CBC)return{name:Kl.CBC,iv:e};if(t===Kl.CTR)return{name:Kl.CTR,counter:e,length:64};if(t===Kl.GCM)return r?{name:Kl.GCM,iv:e,additionalData:r}:{name:Kl.GCM,iv:e};throw new Error("unknown aes block mode")}function o$(t){return(e,r,n)=>{oS(e),oS(r);let i={name:t,length:e.length*8},o=LQe(t,r,n);return{encrypt(s){return oS(s),j0e.encrypt(e,i,o,s)},decrypt(s){return oS(s),j0e.decrypt(e,i,o,s)}}}}var RNt=o$(Kl.CBC),INt=o$(Kl.CTR),kNt=o$(Kl.GCM);var b1=(i=>(i.DataFormats="dataFormats",i.ProtocolContext="protocolContext",i.ProtocolPath="protocolPath",i.Schemas="schemas",i))(b1||{}),Ea=class{static async derivePrivateKey(e,r){let n=fn.privateJwkToBytes(e.derivedPrivateKey),i=e.derivationPath??[],o=await Ea.derivePrivateKeyBytes(n,r),s=await fn.privateKeyToJwk(o);return{rootKeyId:e.rootKeyId,derivationScheme:e.derivationScheme,derivationPath:[...i,...r],derivedPrivateKey:s}}static async derivePublicKey(e,r){let n=await Ea.derivePrivateKey(e,r);return await fn.getPublicJwk(n.derivedPrivateKey)}static async derivePrivateKeyBytes(e,r){Ea.validateKeyDerivationPath(r);let n=e;for(let i of r){let o=Je.stringToBytes(i);n=await Ea.deriveKeyUsingHkdf({hashAlgorithm:"SHA-256",initialKeyMaterial:n,info:o,keyLengthInBytes:32})}return n}static async deriveKeyUsingHkdf(e){let{hashAlgorithm:r,initialKeyMaterial:n,info:i,keyLengthInBytes:o}=e,a=await iS().importKey("raw",n,{name:"HKDF"},!1,["deriveBits"]),u=await crypto.subtle.deriveBits({name:"HKDF",hash:r,salt:new Uint8Array(0),info:i},a,o*8);return new Uint8Array(u)}static validateKeyDerivationPath(e){if(e.includes(""))throw new be("HdKeyDerivationPathInvalid",`Invalid key derivation path: ${e}`)}};_();_();function sS(t,e){return t>e?1:t<e?-1:0}_();function aS(t){if(typeof t!="object")return!1;for(let e in t)return!1;return!0}function sn(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&sn(t[e])})}var Ue=class{static validateJsonSchema(e){let r=e.descriptor.interface,n=e.descriptor.method,i=r+n;Jd(i,e)}static getSigner(e){return e.authorization===void 0?void 0:Kt.getSignerDid(e.authorization.signature.signatures[0])}static async getCid(e){let r={...e};return r.encodedData&&delete r.encodedData,await jn.computeCid(r)}static async compareCid(e,r){let n=await Ue.getCid(e),i=await Ue.getCid(r);return sS(n,i)}static async createAuthorization(e){let{descriptor:r,signer:n,delegatedGrant:i,permissionGrantId:o,protocolRole:s}=e,a;i!==void 0&&(a=await Ue.getCid(i));let m={signature:await Ue.createSignature(r,n,{delegatedGrantId:a,permissionGrantId:o,protocolRole:s})};return i!==void 0&&(m.authorDelegatedGrant=i),m}static async createSignature(e,r,n){let o={descriptorCid:await jn.computeCid(e),...n};sn(o);let s=Je.objectToBytes(o);return(await kh.create(s,[r])).getJws()}static async getNewestMessage(e){let r;for(let n of e)(r===void 0||await Ue.isNewer(n,r))&&(r=n);return r}static async getOldestMessage(e){let r;for(let n of e)(r===void 0||await Ue.isOlder(n,r))&&(r=n);return r}static async isNewer(e,r){return await Ue.compareMessageTimestamp(e,r)>0}static async isOlder(e,r){return await Ue.compareMessageTimestamp(e,r)<0}static isSignedByAuthorDelegate(e){return e.authorization?.authorDelegatedGrant!==void 0}static isSignedByOwnerDelegate(e){return e.authorization?.ownerDelegatedGrant!==void 0}static async compareMessageTimestamp(e,r){return e.descriptor.messageTimestamp>r.descriptor.messageTimestamp?1:e.descriptor.messageTimestamp<r.descriptor.messageTimestamp?-1:Ue.compareCid(e,r)}static async validateSignatureStructure(e,r,n="GenericSignaturePayload"){if(e.signatures.length!==1)throw new be("AuthenticationMoreThanOneSignatureNotSupported","expected no more than 1 signature for authorization purpose");let i=Kt.decodePlainObjectPayload(e);Jd(n,i);let{descriptorCid:o}=i,s=await jn.computeCid(r);if(o!==s)throw new be("AuthenticateDescriptorCidMismatch",`provided descriptorCid ${o} does not match expected CID ${s}`);return i}};_();var Ni=class{static async parse(e){return new Ni(e)}constructor(e){this.id=e.recordId,this.grantor=Ue.getSigner(e),this.grantee=e.descriptor.recipient,this.dateGranted=e.descriptor.dateCreated;let r=e.encodedData,n=Je.base64UrlToObject(r);this.dateExpires=n.dateExpires,this.delegated=n.delegated,this.description=n.description,this.requestId=n.requestId,this.scope=n.scope,this.conditions=n.conditions}};_();_();var cS=(i=>(i.CreatedAscending="createdAscending",i.CreatedDescending="createdDescending",i.PublishedAscending="publishedAscending",i.PublishedDescending="publishedDescending",i))(cS||{});_();var ei=class{static matchAnyFilter(e,r){if(r.length===0)return!0;for(let n of r)if(this.matchFilter(e,n))return!0;return!1}static matchFilter(e,r){for(let n in r){let i=r[n],o=e[n];if(o===void 0||!(Array.isArray(o)?this.matchAnyIndexValue(i,o):this.matchIndexValue(i,o)))return!1}return!0}static matchAnyIndexValue(e,r){for(let n of r)if(this.matchIndexValue(e,n))return!0;return!1}static matchIndexValue(e,r){if(typeof e=="object"){if(Array.isArray(e)){if(this.matchOneOf(e,r))return!0}else if(this.matchRange(e,r))return!0}else if(r===e)return!0;return!1}static matchOneOf(e,r){for(let n of e)if(r===n)return!0;return!1}static matchRange(e,r){return!(e.lt!==void 0&&r>=e.lt||e.lte!==void 0&&r>e.lte||e.gt!==void 0&&r<=e.gt||e.gte!==void 0&&r<e.gte)}static isEqualFilter(e){return typeof e!="object"}static isRangeFilter(e){return typeof e=="object"&&!Array.isArray(e)?"gt"in e||"lt"in e||"lte"in e||"gte"in e:!1}static isOneOfFilter(e){return!!(typeof e=="object"&&Array.isArray(e))}static convertRangeCriterion(e){let r;return e.to!==void 0&&e.from!==void 0?r={gte:e.from,lt:e.to}:e.to!==void 0?r={lt:e.to}:e.from!==void 0&&(r={gte:e.from}),r}static constructPrefixFilterAsRangeFilter(e){return{gte:e,lt:e+"\uFFFF"}}},oP=class{static reduceFilter(e){if(Object.keys(e).length<=1)return e;let{recordId:n,attester:i,parentId:o,recipient:s,contextId:a,author:u,protocolPath:m,schema:p,protocol:b,...A}=e;if(n!==void 0)return{recordId:n};if(i!==void 0)return{attester:i};if(o!==void 0)return{parentId:o};if(s!==void 0)return{recipient:s};if(a!==void 0)return{contextId:a};if(m!==void 0)return{protocolPath:m};if(p!==void 0)return{schema:p};if(b!==void 0)return{protocol:b};let S=Object.keys(A)[0],P={};return P[S]=e[S],P}};_();var $n=(n=>(n.Messages="Messages",n.Protocols="Protocols",n.Records="Records",n))($n||{}),ti=(s=>(s.Configure="Configure",s.Query="Query",s.Read="Read",s.Write="Write",s.Delete="Delete",s.Subscribe="Subscribe",s))(ti||{});_();function ra(t){let e;try{e=Ja(t)}catch{e=void 0}if(t!==e)throw new be("UrlProtocolNotNormalized",`Protocol URI ${t} must be normalized.`)}function Ja(t){return q0e(t)}function C0(t){let e;try{e=wg(t)}catch{e=void 0}if(t!==e)throw new be("UrlSchemaNotNormalized",`Schema URI ${t} must be normalized.`)}function wg(t){return q0e(t)}function q0e(t){let e;/^[^:]+:(\/{2})?[^\/].*/.test(t)?e=t:e=`http://${t}`;try{let r=new URL(e);return r.search="",r.hash="",UQe(r.href)}catch{throw new be("UrlProtocolNotNormalizable","Could not normalize protocol URI")}}function UQe(t){return t.endsWith("/")?t.slice(0,-1):t}var et=class{static isRecordsWrite(e){return e.descriptor.interface==="Records"&&e.descriptor.method==="Write"}static getAuthor(e){let r;return e.authorization.authorDelegatedGrant!==void 0?r=Ue.getSigner(e.authorization.authorDelegatedGrant):r=Ue.getSigner(e),r}static async decrypt(e,r,n){let{encryption:i}=e,o=i.keyEncryption.find(P=>P.rootKeyId===r.rootKeyId&&P.derivationScheme===r.derivationScheme);if(o===void 0)throw new be("RecordsDecryptNoMatchingKeyEncryptedFound",`Unable to find a symmetric key encrypted using key         with ID '${r.rootKeyId}' and '${r.derivationScheme}' derivation scheme.`);let s=et.constructKeyDerivationPath(o.derivationScheme,e),a=await et.derivePrivateKey(r,s),u=Je.base64UrlToBytes(o.encryptedKey),m=fn.publicJwkToBytes(o.ephemeralPublicKey),p=Je.base64UrlToBytes(o.initializationVector),b=Je.base64UrlToBytes(o.messageAuthenticationCode),A=await Sf.eciesSecp256k1Decrypt({ciphertext:u,ephemeralPublicKey:m,initializationVector:p,messageAuthenticationCode:b,privateKey:a}),M=Je.base64UrlToBytes(i.initializationVector);return await Sf.aes256CtrDecrypt(A,M,n)}static constructKeyDerivationPath(e,r){let n=r.descriptor,i=r.contextId,o;return e==="dataFormats"?o=et.constructKeyDerivationPathUsingDataFormatsScheme(n.schema,n.dataFormat):e==="protocolPath"?o=et.constructKeyDerivationPathUsingProtocolPathScheme(n):e==="protocolContext"?o=et.constructKeyDerivationPathUsingProtocolContextScheme(i):o=et.constructKeyDerivationPathUsingSchemasScheme(n.schema),o}static constructKeyDerivationPathUsingDataFormatsScheme(e,r){return e!==void 0?["dataFormats",e,r]:["dataFormats",r]}static constructKeyDerivationPathUsingProtocolPathScheme(e){if(e.protocol===void 0)throw new be("RecordsProtocolPathDerivationSchemeMissingProtocol","Unable to construct key derivation path using `protocols` scheme because `protocol` is missing.");let r=e.protocolPath.split("/");return["protocolPath",e.protocol,...r]}static constructKeyDerivationPathUsingProtocolContextScheme(e){if(e===void 0)throw new be("RecordsProtocolContextDerivationSchemeMissingContextId","Unable to construct key derivation path using `protocolContext` scheme because `contextId` is missing.");let r=e.split("/")[0];return["protocolContext",r]}static constructKeyDerivationPathUsingSchemasScheme(e){if(e===void 0)throw new be("RecordsSchemasDerivationSchemeMissingSchema","Unable to construct key derivation path using `schemas` scheme because `schema` is missing.");return["schemas",e]}static async derivePrivateKey(e,r){if(e.derivedPrivateKey.crv!=="secp256k1")throw new be("RecordsDerivePrivateKeyUnSupportedCurve",`Curve ${e.derivedPrivateKey.crv} is not supported.`);let n=e.derivationPath??[];et.validateAncestorKeyAndDescentKeyDerivationPathsMatch(n,r);let i=r.slice(n.length),o=fn.privateJwkToBytes(e.derivedPrivateKey);return await Ea.derivePrivateKeyBytes(o,i)}static validateAncestorKeyAndDescentKeyDerivationPathsMatch(e,r){for(let n=0;n<e.length;n++){let i=e[n],o=r[n];if(i!==o)throw new be("RecordsInvalidAncestorKeyDerivationSegment",`Ancestor key derivation segment '${i}' mismatches against the descendant key derivation segment '${o}'.`)}}static getParentContextFromOfContextId(e){if(e===void 0)return;let r=e.lastIndexOf("/");return r===-1?"":e.substring(0,r)}static normalizeFilter(e){let r;e.protocol===void 0?r=void 0:r=Ja(e.protocol);let n;e.schema===void 0?n=void 0:n=wg(e.schema);let i={...e,protocol:r,schema:n};return sn(i),i}static isStartsWithFilter(e){return typeof e=="object"&&"startsWith"in e&&typeof e.startsWith=="string"}static buildTagIndexes(e){let r={};for(let n in e){let i=e[n];r[`tag.${n}`]=i}return r}static convertTagsFilter(e){let r={};for(let n in e){let i=e[n];r[`tag.${n}`]=this.isStartsWithFilter(i)?ei.constructPrefixFilterAsRangeFilter(i.startsWith):i}return r}static convertFilter(e,r){let{tags:n,...i}=e,o={};n!==void 0&&(o={...this.convertTagsFilter(n)});let s={...i,...o},{dateCreated:a,datePublished:u,dateUpdated:m,contextId:p}=e,b=a?ei.convertRangeCriterion(a):void 0;b&&(s.dateCreated=b);let A=u?ei.convertRangeCriterion(u):void 0;A&&(s.published=!0,s.datePublished=A),s.published!==!0&&(r==="publishedAscending"||r==="publishedDescending")&&(s.published=!0);let M=m?ei.convertRangeCriterion(m):void 0;M&&(s.messageTimestamp=M,delete s.dateUpdated);let S=p?ei.constructPrefixFilterAsRangeFilter(p):void 0;return S&&(s.contextId=S),Array.isArray(s.author)&&s.author.length===0&&delete s.author,Array.isArray(s.recipient)&&s.recipient.length===0&&delete s.recipient,s}static async validateDelegatedGrantReferentialIntegrity(e,r,n){let i=r?.delegatedGrantId!==void 0,o=e.authorization?.authorDelegatedGrant!==void 0;if(i!==o)throw new be("RecordsAuthorDelegatedGrantAndIdExistenceMismatch",`delegatedGrantId in message (author) signature and authorDelegatedGrant must both exist or be undefined.          delegatedGrantId in message (author) signature defined: ${i},          authorDelegatedGrant defined: ${o}`);if(o){let u=e.authorization.authorDelegatedGrant;if((await Ni.parse(u)).delegated!==!0)throw new be("RecordsAuthorDelegatedGrantNotADelegatedGrant","The owner delegated grant given is not a delegated grant.");let p=u.descriptor.recipient,b=Ue.getSigner(e);if(p!==b)throw new be("RecordsAuthorDelegatedGrantGrantedToAndOwnerSignatureMismatch",`grantedTo ${p} in author delegated grant must be the same as the signer ${b} of the message signature.`);let A=await Ue.getCid(u);if(A!==r.delegatedGrantId)throw new be("RecordsAuthorDelegatedGrantCidMismatch",`CID of the author delegated grant ${A} must be the same as           the delegatedGrantId ${r.delegatedGrantId} in the message signature.`)}let s=n?.delegatedGrantId!==void 0,a=e.authorization?.ownerDelegatedGrant!==void 0;if(s!==a)throw new be("RecordsOwnerDelegatedGrantAndIdExistenceMismatch",`delegatedGrantId in owner signature and ownerDelegatedGrant must both exist or be undefined.          delegatedGrantId in owner signature defined: ${s},          ownerDelegatedGrant defined: ${a}`);if(a){let u=e.authorization.ownerDelegatedGrant;if((await Ni.parse(u)).delegated!==!0)throw new be("RecordsOwnerDelegatedGrantNotADelegatedGrant","The owner delegated grant given is not a delegated grant.");let p=u.descriptor.recipient,b=Kt.getSignerDid(e.authorization.ownerSignature.signatures[0]);if(p!==b)throw new be("RecordsOwnerDelegatedGrantGrantedToAndOwnerSignatureMismatch",`grantedTo ${p} in owner delegated grant must be the same as the signer ${b} of the owner signature.`);let A=await Ue.getCid(u);if(A!==n.delegatedGrantId)throw new be("RecordsOwnerDelegatedGrantCidMismatch",`CID of the owner delegated grant ${A} must be the same as           the delegatedGrantId ${n.delegatedGrantId} in the owner signature.`)}}static shouldProtocolAuthorize(e){return e.protocolRole!==void 0}static filterIncludesPublishedRecords(e){return e.datePublished!==void 0||e.published!==!1}static filterIncludesUnpublishedRecords(e){return e.datePublished===void 0&&e.published===void 0?!0:e.published===!1}static canPerformDeleteAgainstRecord(e,r){if(r===void 0)return!1;if(r.descriptor.method==="Delete"){if(e.descriptor.prune!==!0)return!1;if(r.descriptor.prune===!0)return!1}return!0}static shouldBuildUnpublishedRecipientFilter(e,r){let{recipient:n}=e;return Array.isArray(n)?n.length===0||n.includes(r):n===void 0||n===r}static shouldBuildUnpublishedAuthorFilter(e,r){let{author:n}=e;return Array.isArray(n)?n.length===0||n.includes(r):n===void 0||n===r}};_();_();var na=class{static async performBaseValidation(e){let{incomingMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:o,messageStore:s}=e,a=r.descriptor;na.verifyExpectedGrantorAndGrantee(n,i,o);let u=n;await na.verifyGrantActive(u,a.messageTimestamp,o,s),await na.verifyGrantScopeInterfaceAndMethod(a.interface,a.method,o)}static verifyExpectedGrantorAndGrantee(e,r,n){let i=n.grantee;if(r!==i)throw new be("GrantAuthorizationNotGrantedToAuthor",`Permission grant is granted to ${i}, but need to be granted to ${r}`);let o=n.grantor;if(e!==o)throw new be("GrantAuthorizationNotGrantedForTenant",`Permission grant is granted by ${o}, but need to be granted by ${e}`)}static async verifyGrantActive(e,r,n,i){if(r<n.dateGranted)throw new be("GrantAuthorizationGrantNotYetActive","The message has a timestamp before the associated permission grant becomes active");if(r>=n.dateExpires)throw new be("GrantAuthorizationGrantExpired","The message has timestamp after the expiry of the associated permission grant");let o={parentId:n.id,protocolPath:"grant/revocation",isLatestBaseState:!0},{messages:s}=await i.query(e,[o]),a=await Ue.getOldestMessage(s);if(a!==void 0&&a.descriptor.messageTimestamp<=r)throw new be("GrantAuthorizationGrantRevoked",`Permission grant with CID ${n.id} has been revoked`)}static async verifyGrantScopeInterfaceAndMethod(e,r,n){if(e!==n.scope.interface)throw new be("GrantAuthorizationInterfaceMismatch",`DWN Interface of incoming message is outside the scope of permission grant with ID ${n.id}`);if(r!==n.scope.method)throw new be("GrantAuthorizationMethodMismatch",`DWN Method of incoming message is outside the scope of permission grant with ID ${n.id}`)}};_();var $0e=(r=>(r.Required="Required",r.Prohibited="Prohibited",r))($0e||{});var Vi=class{static async authorizeWrite(e){let{recordsWriteMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:o,messageStore:s}=e;await na.performBaseValidation({incomingMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:o,messageStore:s}),Vi.verifyScope(r,o.scope),Vi.verifyConditions(r,o.conditions)}static async authorizeRead(e){let{recordsReadMessage:r,recordsWriteMessageToBeRead:n,expectedGrantor:i,expectedGrantee:o,permissionGrant:s,messageStore:a}=e;await na.performBaseValidation({incomingMessage:r,expectedGrantor:i,expectedGrantee:o,permissionGrant:s,messageStore:a}),Vi.verifyScope(n,s.scope)}static async authorizeQueryOrSubscribe(e){let{incomingMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:o,messageStore:s}=e;await na.performBaseValidation({incomingMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:o,messageStore:s});let u=o.scope.protocol,m=r.descriptor.filter.protocol;if(u!==void 0&&m!==u)throw new be("RecordsGrantAuthorizationQueryOrSubscribeProtocolScopeMismatch",`Grant protocol scope ${u} does not match protocol in message ${m}`)}static async authorizeDelete(e){let{recordsDeleteMessage:r,recordsWriteToDelete:n,expectedGrantor:i,expectedGrantee:o,permissionGrant:s,messageStore:a}=e;await na.performBaseValidation({incomingMessage:r,expectedGrantor:i,expectedGrantee:o,permissionGrant:s,messageStore:a});let m=s.scope.protocol,p=n.descriptor.protocol;if(m!==void 0&&p!==m)throw new be("RecordsGrantAuthorizationDeleteProtocolScopeMismatch",`Grant protocol scope ${m} does not match protocol in record to delete ${p}`)}static verifyScope(e,r){if(r.protocol!==e.descriptor.protocol)throw new be("RecordsGrantAuthorizationScopeProtocolMismatch","Grant scope specifies different protocol than what appears in the record");if(r.contextId!==void 0&&(e.contextId===void 0||!e.contextId.startsWith(r.contextId)))throw new be("RecordsGrantAuthorizationScopeContextIdMismatch","Grant scope specifies different contextId than what appears in the record");if(r.protocolPath!==void 0&&r.protocolPath!==e.descriptor.protocolPath)throw new be("RecordsGrantAuthorizationScopeProtocolPathMismatch","Grant scope specifies different protocolPath than what appears in the record")}static verifyConditions(e,r){if(r?.publication==="Required"&&!e.descriptor.published)throw new be("RecordsGrantAuthorizationConditionPublicationRequired","Permission grant requires message to be published");if(r?.publication==="Prohibited"&&e.descriptor.published)throw new be("RecordsGrantAuthorizationConditionPublicationProhibited","Permission grant prohibits message from being published")}};_();_();var K=Zt(L0e(),1),p$={};function ed(t,e){Object.defineProperty(t.prototype,Symbol.toStringTag,{value:e,writable:!1,enumerable:!1,configurable:!0});for(let r of Object.getOwnPropertyNames(t)){let n=Object.getOwnPropertyDescriptor(t,r);n.configurable&&n.enumerable&&(n.enumerable=!1,Object.defineProperty(t,r,n))}for(let r of Object.getOwnPropertyNames(t.prototype)){let n=Object.getOwnPropertyDescriptor(t.prototype,r);n.configurable&&n.enumerable&&(n.enumerable=!1,Object.defineProperty(t.prototype,r,n))}On(e,t),On(`${e}.prototype`,t.prototype)}function On(t,e){let r=`%${t}%`;if(p$[r]!==void 0)throw new Error(`intrinsic ${t} already exists`);p$[r]=e}function Fe(t){return p$[t]}var U0e,F0e,ht="slot-epochNanoSeconds",Gl="slot-timezone-identifier",We="slot-year",Ve="slot-month",Ze="slot-day",Ot="slot-hour",Bt="slot-minute",Dt="slot-second",Ct="slot-millisecond",Nt="slot-microsecond",jt="slot-nanosecond",xe="slot-calendar",Eme="slot-date-brand",Sme="slot-year-month-brand",Mme="slot-month-day-brand",Qo="slot-cached-instant",Gr="slot-time-zone",ys="slot-years",ho="slot-months",ia="slot-weeks",gs="slot-days",bs="slot-hours",vs="slot-minutes",ws="slot-seconds",_s="slot-milliseconds",xs="slot-microseconds",Es="slot-nanoseconds",kn="slot-calendar-identifier",Ame=new WeakMap,m$=Symbol.for("@@Temporal__GetSlots");(U0e=globalThis)[m$]||(U0e[m$]=function(e){return Ame.get(e)});var K$=globalThis[m$],y$=Symbol.for("@@Temporal__CreateSlots");(F0e=globalThis)[y$]||(F0e[y$]=function(e){Ame.set(e,Object.create(null))});var td=globalThis[y$];function Ji(t,...e){if(!t||typeof t!="object")return!1;let r=K$(t);return!!r&&e.every(n=>n in r)}function j(t,e){let r=K$(t)?.[e];if(r===void 0)throw new TypeError(`Missing internal slot ${e}`);return r}function Ft(t,e,r){let n=K$(t);if(n===void 0)throw new TypeError("Missing slots for the given container");if(n[e])throw new TypeError(`${e} already has set`);n[e]=r}var z0e=/\.[-A-Za-z_]|\.\.[-A-Za-z._]{1,12}|\.[-A-Za-z_][-A-Za-z._]{0,12}|[A-Za-z_][-A-Za-z._]{0,13}/,_S=new RegExp("(?:"+[`(?:${z0e.source})(?:\\/(?:${z0e.source}))*`,"Etc/GMT(?:0|[-+]\\d{1,2})","GMT[-+]?0","EST5EDT","CST6CDT","MST7MDT","PST8PDT",/(?:[+\u2212-][0-2][0-9](?::?[0-5][0-9](?::?[0-5][0-9](?:[.,]\d{1,9})?)?)?)/.source].join("|")+")"),Pme=/(?:[+\u2212-]\d{6}|\d{4})/,lP=/(?:0[1-9]|1[0-2])/,g$=/(?:0[1-9]|[12]\d|3[01])/,FQe=new RegExp(`(${Pme.source})(?:-(${lP.source})-(${g$.source})|(${lP.source})(${g$.source}))`),Tme=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,Rme=/([+\u2212-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/,Ime=new RegExp(`([zZ])|${Rme.source}?`),W0=/\[(!)?([a-z_][a-z0-9_-]*)=([A-Za-z0-9]+(?:-[A-Za-z0-9]+)*)\]/g,zQe=new RegExp([`^${FQe.source}`,`(?:(?:T|\\s+)${Tme.source}(?:${Ime.source})?)?`,`(?:\\[!?(${_S.source})\\])?`,`((?:${W0.source})*)$`].join(""),"i"),KQe=new RegExp([`^T?${Tme.source}`,`(?:${Ime.source})?`,`(?:\\[!?${_S.source}\\])?`,`((?:${W0.source})*)$`].join(""),"i"),WQe=new RegExp(`^(${Pme.source})-?(${lP.source})(?:\\[!?${_S.source}\\])?((?:${W0.source})*)$`),GQe=new RegExp(`^(?:--)?(${lP.source})-?(${g$.source})(?:\\[!?${_S.source}\\])?((?:${W0.source})*)$`),c$=/(\d+)(?:[.,](\d{1,9}))?/,VQe=new RegExp(`(?:${c$.source}H)?(?:${c$.source}M)?(?:${c$.source}S)?`),HQe=new RegExp(`^([+\u2212-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${VQe.source})?$`,"i"),ZQe=Array.prototype.includes,kme=Array.prototype.push,Ome=globalThis.Intl.DateTimeFormat,JQe=Math.min,YQe=Math.max,mn=Math.abs,Aa=Math.floor,R1=Math.sign,Eg=Math.trunc,PP=Number.isNaN,Ss=Number.isFinite,QQe=Number,xS=String,XQe=Number.MAX_SAFE_INTEGER,es=Object.create,eXe=Object.getOwnPropertyDescriptor,TP=Reflect.apply,tXe=Reflect.ownKeys,zn=K.default.BigInt(0),q1=K.default.BigInt(1),Hl=K.default.BigInt(60),Bme=K.default.BigInt(24),Ir=K.default.BigInt(1e3),Oc=K.default.BigInt(1e6),Zl=K.default.BigInt(1e9),rXe=K.default.BigInt(-1),Dme=K.default.multiply(K.default.BigInt(3600),Zl),Cme=K.default.multiply(Hl,Zl),Yl=K.default.multiply(Dme,Bme),hS=K.default.multiply(K.default.BigInt(-86400),K.default.BigInt(1e17)),I1=K.default.multiply(K.default.BigInt(86400),K.default.BigInt(1e17)),dP=-271821,hP=275760,x1=K.default.multiply(K.default.BigInt(-388152),K.default.BigInt(1e13)),nXe=K.default.multiply(Yl,K.default.BigInt(3660)),Nme=K.default.multiply(Yl,K.default.BigInt(366)),jme=K.default.multiply(Yl,K.default.BigInt(14)),iXe=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"];function Ic(t){return K.default.equal(t,zn)}function Nr(t,e){let r=t[e];if(r!==void 0)return r}function nt(t,e,r){let n=arguments.length>2?r:[];return TP(t,e,n)}function yn(t){return typeof t=="object"&&t!==null||typeof t=="function"}function k1(t){if(typeof t=="bigint")throw new TypeError("Cannot convert BigInt to number");return QQe(t)}function hi(t){let e=k1(t);if(PP(e)||e===0)return 0;if(!Ss(e))return e;let r=Aa(mn(e));return r===0?0:R1(e)*r}function Xa(t){if(typeof t!="number"||PP(t)||!Ss(t))return!1;let e=mn(t);return Aa(e)===e}function As(t){if(typeof t=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return xS(t)}function vr(t){let e=k1(t);if(e===0)return 0;if(PP(e)||!Ss(e))throw new RangeError("invalid number value");let r=Eg(e);return r===0?0:r}function K0e(t,e){let r=vr(t);if(r<=0)throw e!==void 0?new RangeError(`property '${e}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return r}function Zi(t){let e=k1(t);if(!Ss(e))throw new RangeError("infinity is out of range");if(!Xa(e))throw new RangeError(`unsupported fractional value ${t}`);return e===0?0:e}function ri(t,e){return{quotient:K.default.divide(t,e),remainder:K.default.remainder(t,e)}}function pP(t){return K.default.lessThan(t,zn)}function W0e(t){return Ic(t)?0:pP(t)?-1:1}function Mu(t){return K.default.lessThan(t,zn)?K.default.multiply(t,rXe):t}var G0e=new Map([["year",vr],["month",K0e],["monthCode",As],["day",K0e],["hour",vr],["minute",vr],["second",vr],["millisecond",vr],["microsecond",vr],["nanosecond",vr],["years",Zi],["months",Zi],["weeks",Zi],["days",Zi],["hours",Zi],["minutes",Zi],["seconds",Zi],["milliseconds",Zi],["microseconds",Zi],["nanoseconds",Zi],["era",As],["eraYear",hi],["offset",As]]),oXe=new Map([["hour",0],["minute",0],["second",0],["millisecond",0],["microsecond",0],["nanosecond",0]]),ES=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],mP=new Map(ES.map(t=>[t[0],t[1]])),sXe=new Map(ES.map(([t,e])=>[e,t])),V0e=ES.map(([,t])=>t),H0e=Array.from(mP.keys()).sort(),Z0e=new Map;function qme(t){let e=Z0e.get(t);return e===void 0&&(e=new Ome("en-us",{timeZone:xS(t),hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),Z0e.set(t,e)),e}function J0e(t){if(t==null)throw new TypeError(`Expected object not ${t}`);return Object(t)}function E1(t,e,r,n){if(e==null)return;let i=tXe(e);for(let o of i)if(!r.some(s=>Object.is(s,o))&&Object.prototype.propertyIsEnumerable.call(e,o)){let s=e[o];if(n&&n.some(a=>Object.is(a,s)))continue;t[o]=s}}function ji(t){return Ji(t,ht)&&!Ji(t,Gr,xe)}function Rc(t){return Ji(t,Gl)}function Ln(t){return Ji(t,kn)}function Un(t){return Ji(t,ys,ho,gs,bs,vs,ws,_s,xs,Es)}function Xt(t){return Ji(t,Eme)}function Fn(t){return Ji(t,Ot,Bt,Dt,Ct,Nt,jt)&&!Ji(t,We,Ve,Ze)}function It(t){return Ji(t,We,Ve,Ze,Ot,Bt,Dt,Ct,Nt,jt)}function Rr(t){return Ji(t,Sme)}function Hi(t){return Ji(t,Mme)}function Qe(t){return Ji(t,ht,Gr,xe)}function $1(t){if(Ji(t,xe)||Ji(t,Gr))throw new TypeError("with() does not support a calendar or timeZone property");if(Fn(t))throw new TypeError("with() does not accept Temporal.PlainTime, use withPlainTime() instead");if(t.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(t.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function aXe(t){let{ianaName:e,offset:r,z:n}=function(o){if(new RegExp(`^${_S.source}$`,"i").test(o))return{ianaName:o};try{let s=rd(o);if(s.z||s.offset||s.ianaName)return s}catch{}throw new RangeError(`Invalid time zone: ${o}`)}(t);return e?tL(e):n?"UTC":LP($0(r))}function W$(t,e){return e==="never"?"":G$(Io(t),e)}function G$(t,e){return e==="never"||e==="auto"&&t==="iso8601"?"":`[${e==="critical"?"!":""}u-ca=${t}]`}function rd(t){let e=zQe.exec(t);if(!e)throw new RangeError(`invalid ISO 8601 string: ${t}`);let r=e[1];if(r[0]==="\u2212"&&(r=`-${r.slice(1)}`),r==="-000000")throw new RangeError(`invalid ISO 8601 string: ${t}`);let n=hi(r),i=hi(e[2]||e[4]),o=hi(e[3]||e[5]),s=hi(e[6]),a=e[6]!==void 0,u=hi(e[7]||e[10]),m=hi(e[8]||e[11]);m===60&&(m=59);let p=(e[9]||e[12])+"000000000",b=hi(p.slice(0,3)),A=hi(p.slice(3,6)),M=hi(p.slice(6,9)),S,P=!1;if(e[13])S=void 0,P=!0;else if(e[14]&&e[15]){let I=e[14]==="-"||e[14]==="\u2212"?"-":"+",q=e[15]||"00",$=e[16]||"00",U=e[17]||"00",F=e[18]||"0";if(S=`${I}${q}:${$}`,+F){for(;F.endsWith("0");)F=F.slice(0,-1);S+=`:${U}.${F}`}else+U&&(S+=`:${U}`);S==="-00:00"&&(S="+00:00")}let k=e[19],R=e[20],B;for(let[,I,q,$]of R.matchAll(W0))if(q==="u-ca")B===void 0&&(B=$);else if(I==="!")throw new RangeError(`Unrecognized annotation: !${q}=${$}`);return iL(n,i,o,s,u,m,b,A,M),{year:n,month:i,day:o,hasTime:a,hour:s,minute:u,second:m,millisecond:b,microsecond:A,nanosecond:M,ianaName:k,offset:S,z:P,calendar:B}}function V$(t){let e=WQe.exec(t),r,n,i,o;if(e){let s=e[1];if(s[0]==="\u2212"&&(s=`-${s.slice(1)}`),s==="-000000")throw new RangeError(`invalid ISO 8601 string: ${t}`);r=hi(s),n=hi(e[2]);let a=e[3];for(let[,u,m,p]of a.matchAll(W0))if(m==="u-ca")i===void 0&&(i=p);else if(u==="!")throw new RangeError(`Unrecognized annotation: !${m}=${p}`);if(i!==void 0&&i!=="iso8601")throw new RangeError("YYYY-MM format is only valid with iso8601 calendar")}else{let s;if({year:r,month:n,calendar:i,day:o,z:s}=rd(t),s)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:r,month:n,calendar:i,referenceISODay:o}}function H$(t){let e=GQe.exec(t),r,n,i,o;if(e){r=hi(e[1]),n=hi(e[2]);let s=e[3];for(let[,a,u,m]of s.matchAll(W0))if(u==="u-ca")i===void 0&&(i=m);else if(a==="!")throw new RangeError(`Unrecognized annotation: !${u}=${m}`);if(i!==void 0&&i!=="iso8601")throw new RangeError("MM-DD format is only valid with iso8601 calendar")}else{let s;if({month:r,day:n,calendar:i,year:o,z:s}=rd(t),s)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:r,day:n,calendar:i,referenceISOYear:o}}function cXe(t){let{year:e,month:r,day:n,hour:i,minute:o,second:s,millisecond:a,microsecond:u,nanosecond:m,offset:p,z:b}=function(P){let k=rd(P);if(!k.z&&!k.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return k}(t);if(!b&&!p)throw new RangeError("Temporal.Instant requires a time zone offset");let A=b?0:$0(p);({year:e,month:r,day:n,hour:i,minute:o,second:s,millisecond:a,microsecond:u,nanosecond:m}=rL(e,r,n,i,o,s,a,u,m-A));let M=L0(e,r,n,i,o,s,a,u,m);if(M===null)throw new RangeError("DateTime outside of supported range");return M}function yP(t,e,r,n){let i=t,o=e,s=r;switch(n){case"reject":Ql(i,o,s);break;case"constrain":({year:i,month:o,day:s}=tye(i,o,s))}return{year:i,month:o,day:s}}function RP(t,e,r,n,i,o,s){let a=t,u=e,m=r,p=n,b=i,A=o;switch(s){case"reject":FP(a,u,m,p,b,A);break;case"constrain":({hour:a,minute:u,second:m,millisecond:p,microsecond:b,nanosecond:A}=function(S,P,k,R,B,I){let q=Ma(S,0,23),$=Ma(P,0,59),U=Ma(k,0,59),F=Ma(R,0,999),L=Ma(B,0,999),W=Ma(I,0,999);return{hour:q,minute:$,second:U,millisecond:F,microsecond:L,nanosecond:W}}(a,u,m,p,b,A))}return{hour:a,minute:u,second:m,millisecond:p,microsecond:b,nanosecond:A}}function Ng(t){if(!yn(t))return function(S){let P=HQe.exec(S);if(!P)throw new RangeError(`invalid duration: ${S}`);if(P.slice(2).every(x=>x===void 0))throw new RangeError(`invalid duration: ${S}`);let k=P[1]==="-"||P[1]==="\u2212"?-1:1,R=P[2]===void 0?0:vr(P[2])*k,B=P[3]===void 0?0:vr(P[3])*k,I=P[4]===void 0?0:vr(P[4])*k,q=P[5]===void 0?0:vr(P[5])*k,$=P[6]===void 0?0:vr(P[6])*k,U=P[7],F=P[8],L=P[9],W=P[10],E=P[11],c=0,l=0,y=0;if(U!==void 0){if(F??L??W??E)throw new RangeError("only the smallest unit can be fractional");y=3600*hi((U+"000000000").slice(0,9))*k}else if(c=F===void 0?0:vr(F)*k,L!==void 0){if(W??E)throw new RangeError("only the smallest unit can be fractional");y=60*hi((L+"000000000").slice(0,9))*k}else l=W===void 0?0:vr(W)*k,E!==void 0&&(y=hi((E+"000000000").slice(0,9))*k);let d=y%1e3,h=Eg(y/1e3)%1e3,v=Eg(y/1e6)%1e3;return l+=Eg(y/1e9)%60,c+=Eg(y/6e10),xP(R,B,I,q,$,c,l,v,h,d),{years:R,months:B,weeks:I,days:q,hours:$,minutes:c,seconds:l,milliseconds:v,microseconds:h,nanoseconds:d}}(As(t));if(Un(t))return{years:j(t,ys),months:j(t,ho),weeks:j(t,ia),days:j(t,gs),hours:j(t,bs),minutes:j(t,vs),seconds:j(t,ws),milliseconds:j(t,_s),microseconds:j(t,xs),nanoseconds:j(t,Es)};let e={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0},r=function(S){if(!yn(S))throw new TypeError("invalid duration-like");let P={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0},k=!1;for(let R of H0e){let B=S[R];B!==void 0&&(k=!0,P[R]=Zi(B))}if(!k)throw new TypeError("invalid duration-like");return P}(t);for(let M of H0e){let S=r[M];S!==void 0&&(e[M]=S)}let{years:n,months:i,weeks:o,days:s,hours:a,minutes:u,seconds:m,milliseconds:p,microseconds:b,nanoseconds:A}=e;return xP(n,i,o,s,a,u,m,p,b,A),{years:n,months:i,weeks:o,days:s,hours:a,minutes:u,seconds:m,milliseconds:p,microseconds:b,nanoseconds:A}}function ni(t){return t===void 0?"constrain":F0(t,"overflow",["constrain","reject"],"constrain")}function O1(t){return t===void 0?"compatible":F0(t,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function Pu(t,e){return F0(t,"roundingMode",["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"],e)}function gP(t,e){return t===void 0?e:F0(t,"offset",["prefer","use","ignore","reject"],e)}function SS(t){return F0(t,"calendarName",["auto","always","never","critical"],"auto")}function L1(t){let e=t.roundingIncrement;if(e===void 0)return 1;if(e=k1(e),!Ss(e))throw new RangeError("roundingIncrement must be finite");let r=Eg(e);if(r<1||r>1e9)throw new RangeError(`roundingIncrement must be at least 1 and at most 1e9, not ${e}`);return r}function U1(t,e,r){let n=r?e:e-1;if(t>n)throw new RangeError(`roundingIncrement must be at least 1 and less than ${n}, not ${t}`);if(e%t!=0)throw new RangeError(`Rounding increment must divide evenly into ${e}`)}function MS(t){let e=t.fractionalSecondDigits;if(e===void 0)return"auto";if(typeof e!="number"){if(As(e)!=="auto")throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`);return"auto"}let r=Aa(e);if(!Ss(r)||r<0||r>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`);return r}function AS(t,e){switch(t){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}switch(e){case"auto":return{precision:e,unit:"nanosecond",increment:1};case 0:return{precision:e,unit:"second",increment:1};case 1:case 2:case 3:return{precision:e,unit:"millisecond",increment:10**(3-e)};case 4:case 5:case 6:return{precision:e,unit:"microsecond",increment:10**(6-e)};case 7:case 8:case 9:return{precision:e,unit:"nanosecond",increment:10**(9-e)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`)}}var Tg=Symbol("~required~");function Pa(t,e,r,n,i=[]){let o=[];for(let[,m,p]of ES)r!=="datetime"&&r!==p||o.push(m);o.push(...i);let s=n;s===Tg?s=void 0:s!==void 0&&o.push(s);let a=[...o];for(let m of o){let p=sXe.get(m);p!==void 0&&a.push(p)}let u=F0(t,e,a,s);if(u===void 0&&n===Tg)throw new RangeError(`${e} is required`);return mP.has(u)?mP.get(u):u}function aP(t){let e=t.relativeTo;if(e===void 0)return e;let r,n,i,o,s,a,u,m,p,b,A,M,S="option",P=!1;if(yn(e)){if(Qe(e)||Xt(e))return e;if(It(e))return D1(e);b=IS(e);let k=pi(b,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);k.push("timeZone","offset");let R=Gt(e,k,[]),B=es(null);B.overflow="constrain",{year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:u,microsecond:m,nanosecond:p}=PS(b,R,B),M=R.offset,M===void 0&&(S="wall"),A=R.timeZone,A!==void 0&&(A=Xo(A))}else{let k,R;if({year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:u,microsecond:m,nanosecond:p,calendar:b,ianaName:k,offset:M,z:R}=rd(As(e)),k)A=Xo(k),R?S="exact":M||(S="wall"),P=!0;else if(R)throw new RangeError("Z designator not supported for PlainDate relativeTo; either remove the Z or add a bracketed time zone");if(b||(b="iso8601"),!Lh(b))throw new RangeError(`invalid calendar identifier ${b}`);b=Xl(b)}return A===void 0?Dc(r,n,i,b):Po(vP(r,n,i,o,s,a,u,m,p,S,S==="option"?$0(M):0,A,"compatible","reject",P),A,b)}function b$(t,e,r,n,i,o,s,a,u,m){for(let[p,b]of[["years",t],["months",e],["weeks",r],["days",n],["hours",i],["minutes",o],["seconds",s],["milliseconds",a],["microseconds",u],["nanoseconds",m]])if(b!==0)return mP.get(p);return"nanosecond"}function Rg(t,e){return V0e.indexOf(t)>V0e.indexOf(e)?e:t}function Gt(t,e,r,{emptySourceErrorMessage:n}={emptySourceErrorMessage:"no supported properties found"}){let i=es(null),o=!1;e.sort();for(let s of e){let a=t[s];if(a!==void 0)o=!0,G0e.has(s)&&(a=G0e.get(s)(a)),i[s]=a;else if(r!=="partial"){if(ZQe.call(r,s))throw new TypeError(`required property '${s}' missing or undefined`);a=oXe.get(s),i[s]=a}}if(r==="partial"&&!o)throw new TypeError(n);return i}function bP(t,e="complete"){let r=["hour","microsecond","millisecond","minute","nanosecond","second"],n=Gt(t,r,"partial",{emptySourceErrorMessage:"invalid time-like"}),i={};for(let o of r){let s=eXe(n,o);s!==void 0?i[o]=s.value:e==="complete"&&(i[o]=0)}return i}function Zr(t,e){let r=t;if(yn(r)){if(Xt(r))return r;if(Qe(r)&&(ni(e),r=Qa(j(r,Gr),j(r,Qo),j(r,xe))),It(r))return ni(e),Dc(j(r,We),j(r,Ve),j(r,Ze),j(r,xe));let u=IS(r);return qh(u,Gt(r,pi(u,["day","month","monthCode","year"]),[]),e)}ni(e);let{year:n,month:i,day:o,calendar:s,z:a}=function(m){return rd(m)}(As(r));if(a)throw new RangeError("Z designator not supported for PlainDate");if(s||(s="iso8601"),!Lh(s))throw new RangeError(`invalid calendar identifier ${s}`);return s=Xl(s),Dc(n,i,o,s)}function PS(t,e,r){let{hour:n,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:u}=bP(e),m=ni(r),p=qh(t,e,r),b=j(p,We),A=j(p,Ve),M=j(p,Ze);return{hour:n,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:u}=RP(n,i,o,s,a,u,m),{year:b,month:A,day:M,hour:n,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:u}}function Sg(t,e){let r,n,i,o,s,a,u,m,p,b;if(yn(t)){if(It(t))return t;if(Qe(t))return ni(e),Qa(j(t,Gr),j(t,Qo),j(t,xe));if(Xt(t))return ni(e),Sa(j(t,We),j(t,Ve),j(t,Ze),0,0,0,0,0,0,j(t,xe));b=IS(t);let A=Gt(t,pi(b,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]);({year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:u,microsecond:m,nanosecond:p}=PS(b,A,e))}else{let A;if(ni(e),{year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:u,microsecond:m,nanosecond:p,calendar:b,z:A}=function(S){return rd(S)}(As(t)),A)throw new RangeError("Z designator not supported for PlainDateTime");if(iL(r,n,i,o,s,a,u,m,p),b||(b="iso8601"),!Lh(b))throw new RangeError(`invalid calendar identifier ${b}`);b=Xl(b)}return Sa(r,n,i,o,s,a,u,m,p,b)}function S1(t){if(Un(t))return t;let{years:e,months:r,weeks:n,days:i,hours:o,minutes:s,seconds:a,milliseconds:u,microseconds:m,nanoseconds:p}=Ng(t);return new(Fe("%Temporal.Duration%"))(e,r,n,i,o,s,a,u,m,p)}function Au(t){if(ji(t))return t;if(Qe(t))return new(Fe("%Temporal.Instant%"))(j(t,ht));let e=cXe(As(t));return new(Fe("%Temporal.Instant%"))(e)}function Y0e(t,e){let r=t;if(yn(r)){if(Hi(r))return r;let a,u;if(Ji(r,xe))a=j(r,xe),u=!1;else{let p=r.calendar;u=p===void 0,p===void 0&&(p="iso8601"),a=Ta(p)}let m=Gt(r,pi(a,["day","month","monthCode","year"]),[]);return u&&m.month!==void 0&&m.monthCode===void 0&&m.year===void 0&&(m.year=1972),B1(a,m,e)}ni(e);let{month:n,day:i,referenceISOYear:o,calendar:s}=H$(As(r));if(s===void 0&&(s="iso8601"),!Lh(s))throw new RangeError(`invalid calendar identifier ${s}`);return s=Xl(s),o===void 0?(Ql(1972,n,i),pS(n,i,s)):B1(s,pS(n,i,s,o))}function Bh(t,e="constrain"){let r,n,i,o,s,a,u=t;if(yn(u)){if(Fn(u))return u;if(Qe(u)&&(u=Qa(j(u,Gr),j(u,Qo),j(u,xe))),It(u))return new(Fe("%Temporal.PlainTime%"))(j(u,Ot),j(u,Bt),j(u,Dt),j(u,Ct),j(u,Nt),j(u,jt));({hour:r,minute:n,second:i,millisecond:o,microsecond:s,nanosecond:a}=bP(u)),{hour:r,minute:n,second:i,millisecond:o,microsecond:s,nanosecond:a}=RP(r,n,i,o,s,a,e)}else({hour:r,minute:n,second:i,millisecond:o,microsecond:s,nanosecond:a}=function(p){let b=KQe.exec(p),A,M,S,P,k,R,B;if(b){A=hi(b[1]),M=hi(b[2]||b[5]),S=hi(b[3]||b[6]),S===60&&(S=59);let I=(b[4]||b[7])+"000000000";P=hi(I.slice(0,3)),k=hi(I.slice(3,6)),R=hi(I.slice(6,9)),B=b[14];for(let[,q,$,U]of B.matchAll(W0))if($!=="u-ca"&&q==="!")throw new RangeError(`Unrecognized annotation: !${$}=${U}`);if(b[8])throw new RangeError("Z designator not supported for PlainTime")}else{let I,q;if({hasTime:q,hour:A,minute:M,second:S,millisecond:P,microsecond:k,nanosecond:R,z:I}=rd(p),!q)throw new RangeError(`time is missing in string: ${p}`);if(I)throw new RangeError("Z designator not supported for PlainTime")}if(/[tT ][0-9][0-9]/.test(p))return{hour:A,minute:M,second:S,millisecond:P,microsecond:k,nanosecond:R};try{let{month:I,day:q}=H$(p);Ql(1972,I,q)}catch{try{let{year:I,month:q}=V$(p);Ql(I,q,1)}catch{return{hour:A,minute:M,second:S,millisecond:P,microsecond:k,nanosecond:R}}}throw new RangeError(`invalid ISO 8601 time-only string ${p}; may need a T prefix`)}(As(u))),FP(r,n,i,o,s,a);return new(Fe("%Temporal.PlainTime%"))(r,n,i,o,s,a)}function fS(t,e){if(yn(t)){if(Rr(t))return t;let s=IS(t);return kg(s,Gt(t,pi(s,["month","monthCode","year"]),[]),e)}ni(e);let{year:r,month:n,referenceISODay:i,calendar:o}=V$(As(t));if(o===void 0&&(o="iso8601"),!Lh(o))throw new RangeError(`invalid calendar identifier ${o}`);return o=Xl(o),i===void 0?(Ql(r,n,1),mS(r,n,o)):kg(o,mS(r,n,o,i))}function vP(t,e,r,n,i,o,s,a,u,m,p,b,A,M,S){let P=new(Fe("%Temporal.PlainDateTime%"))(t,e,r,n,i,o,s,a,u);if(m==="wall"||M==="ignore")return j(Ms(b,P,A),ht);if(m==="exact"||M==="use"){let R=L0(t,e,r,n,i,o,s,a,u);if(R===null)throw new RangeError("ZonedDateTime outside of supported range");return K.default.subtract(R,K.default.BigInt(p))}let k=wP(b,P);for(let R of k){let B=Tu(b,R),I=K.default.toNumber(Ya(K.default.BigInt(B),Cme,"halfExpand"));if(B===p||S&&I===p)return j(R,ht)}if(M==="reject"){let R=LP(p),B=Rc(b)?j(b,Gl):"time zone";throw new RangeError(`Offset ${R} is invalid for ${P.toString()} in ${B}`)}return j(Vme(k,b,P,A),ht)}function uS(t,e){let r,n,i,o,s,a,u,m,p,b,A,M,S,P,k=!1,R="option";if(yn(t)){if(Qe(t))return t;M=IS(t);let I=pi(M,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);I.push("timeZone","offset");let q=Gt(t,I,["timeZone"]);b=Xo(q.timeZone),A=q.offset,A===void 0&&(R="wall"),S=O1(e),P=gP(e,"reject"),{year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:u,microsecond:m,nanosecond:p}=PS(M,q,e)}else{let I,q;if({year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:u,microsecond:m,nanosecond:p,ianaName:I,offset:A,z:q,calendar:M}=function(U){let F=rd(U);if(!F.ianaName)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return F}(As(t)),b=Xo(I),q?R="exact":A||(R="wall"),M||(M="iso8601"),!Lh(M))throw new RangeError(`invalid calendar identifier ${M}`);M=Xl(M),k=!0,S=O1(e),P=gP(e,"reject"),ni(e)}let B=0;return R==="option"&&(B=$0(A)),Po(vP(r,n,i,o,s,a,u,m,p,R,B,b,S,P,k),b,M)}function $me(t,e,r,n,i){Ql(e,r,n),rye(e,r,n),td(t),Ft(t,We,e),Ft(t,Ve,r),Ft(t,Ze,n),Ft(t,xe,i),Ft(t,Eme,!0)}function Dc(t,e,r,n="iso8601"){let i=Fe("%Temporal.PlainDate%"),o=es(i.prototype);return $me(o,t,e,r,n),o}function Lme(t,e,r,n,i,o,s,a,u,m,p){iL(e,r,n,i,o,s,a,u,m),nye(e,r,n,i,o,s,a,u,m),td(t),Ft(t,We,e),Ft(t,Ve,r),Ft(t,Ze,n),Ft(t,Ot,i),Ft(t,Bt,o),Ft(t,Dt,s),Ft(t,Ct,a),Ft(t,Nt,u),Ft(t,jt,m),Ft(t,xe,p)}function Sa(t,e,r,n,i,o,s,a,u,m="iso8601"){let p=Fe("%Temporal.PlainDateTime%"),b=es(p.prototype);return Lme(b,t,e,r,n,i,o,s,a,u,m),b}function Ume(t,e,r,n,i){Ql(i,e,r),rye(i,e,r),td(t),Ft(t,Ve,e),Ft(t,Ze,r),Ft(t,We,i),Ft(t,xe,n),Ft(t,Mme,!0)}function pS(t,e,r="iso8601",n=1972){let i=Fe("%Temporal.PlainMonthDay%"),o=es(i.prototype);return Ume(o,t,e,r,n),o}function Fme(t,e,r,n,i){Ql(e,r,i),function(s,a){Ro(s,dP,hP),s===dP?Ro(a,4,12):s===hP&&Ro(a,1,9)}(e,r),td(t),Ft(t,We,e),Ft(t,Ve,r),Ft(t,Ze,i),Ft(t,xe,n),Ft(t,Sme,!0)}function mS(t,e,r="iso8601",n=1){let i=Fe("%Temporal.PlainYearMonth%"),o=es(i.prototype);return Fme(o,t,e,r,n),o}function zme(t,e,r,n){xg(e),td(t),Ft(t,ht,e),Ft(t,Gr,r),Ft(t,xe,n);let i=new(Fe("%Temporal.Instant%"))(j(t,ht));Ft(t,Qo,i)}function Po(t,e,r="iso8601"){let n=Fe("%Temporal.ZonedDateTime%"),i=es(n.prototype);return zme(i,t,e,r),i}function pi(t,e){if(typeof t=="string"){let i=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.fields%"),i,[e])}let r=nt(Nr(t,"fields"),t,[e]),n=[];for(let i of r){if(typeof i!="string")throw new TypeError("bad return from calendar.fields()");kme.call(n,i)}return n}function Ig(t,e,r){if(typeof t=="string"){let i=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.mergeFields%"),i,[e,r])}let n=nt(Nr(t,"mergeFields"),t,[e,r]);if(!yn(n))throw new TypeError("bad return from calendar.mergeFields()");return n}function To(t,e,r,n,i){let o=i;if(typeof t=="string"){let a=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.dateAdd%"),a,[e,r,n])}o===void 0&&(o=Nr(t,"dateAdd"));let s=TP(o,t,[e,r,n]);if(!Xt(s))throw new TypeError("invalid result");return s}function q0(t,e,r,n,i){let o=i;if(typeof t=="string"){let a=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.dateUntil%"),a,[e,r,n])}o===void 0&&(o=Nr(t,"dateUntil"));let s=TP(o,t,[e,r,n]);if(!Un(s))throw new TypeError("invalid result");return s}function IP(t,e){if(typeof t=="string"){let n=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.year%"),n,[e])}let r=nt(Nr(t,"year"),t,[e]);if(typeof r!="number")throw new TypeError("calendar year result must be an integer");if(!Xa(r))throw new RangeError("calendar year result must be an integer");return r}function kP(t,e){if(typeof t=="string"){let n=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.month%"),n,[e])}let r=nt(Nr(t,"month"),t,[e]);if(typeof r!="number")throw new TypeError("calendar month result must be a positive integer");if(!Xa(r)||r<1)throw new RangeError("calendar month result must be a positive integer");return r}function TS(t,e){if(typeof t=="string"){let n=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.monthCode%"),n,[e])}let r=nt(Nr(t,"monthCode"),t,[e]);if(typeof r!="string")throw new TypeError("calendar monthCode result must be a string");return r}function RS(t,e){if(typeof t=="string"){let n=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.day%"),n,[e])}let r=nt(Nr(t,"day"),t,[e]);if(typeof r!="number")throw new TypeError("calendar day result must be a positive integer");if(!Xa(r)||r<1)throw new RangeError("calendar day result must be a positive integer");return r}function OP(t,e){if(typeof t=="string"){let n=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.era%"),n,[e])}let r=nt(Nr(t,"era"),t,[e]);if(r===void 0)return r;if(typeof r!="string")throw new TypeError("calendar era result must be a string or undefined");return r}function BP(t,e){if(typeof t=="string"){let n=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.eraYear%"),n,[e])}let r=nt(Nr(t,"eraYear"),t,[e]);if(r===void 0)return r;if(typeof r!="number")throw new TypeError("calendar eraYear result must be an integer or undefined");if(!Xa(r))throw new RangeError("calendar eraYear result must be an integer or undefined");return r}function Z$(t,e){if(typeof t=="string"){let n=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.dayOfWeek%"),n,[e])}let r=nt(Nr(t,"dayOfWeek"),t,[e]);if(typeof r!="number")throw new TypeError("calendar dayOfWeek result must be a positive integer");if(!Xa(r)||r<1)throw new RangeError("calendar dayOfWeek result must be a positive integer");return r}function J$(t,e){if(typeof t=="string"){let n=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.dayOfYear%"),n,[e])}let r=nt(Nr(t,"dayOfYear"),t,[e]);if(typeof r!="number")throw new TypeError("calendar dayOfYear result must be a positive integer");if(!Xa(r)||r<1)throw new RangeError("calendar dayOfYear result must be a positive integer");return r}function Y$(t,e){if(typeof t=="string"){let n=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.weekOfYear%"),n,[e])}let r=nt(Nr(t,"weekOfYear"),t,[e]);if(typeof r!="number")throw new TypeError("calendar weekOfYear result must be a positive integer");if(!Xa(r)||r<1)throw new RangeError("calendar weekOfYear result must be a positive integer");return r}function Q$(t,e){if(typeof t=="string"){let n=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.yearOfWeek%"),n,[e])}let r=nt(Nr(t,"yearOfWeek"),t,[e]);if(typeof r!="number")throw new TypeError("calendar yearOfWeek result must be an integer");if(!Xa(r))throw new RangeError("calendar yearOfWeek result must be an integer");return r}function X$(t,e){if(typeof t=="string"){let n=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.daysInWeek%"),n,[e])}let r=nt(Nr(t,"daysInWeek"),t,[e]);if(typeof r!="number")throw new TypeError("calendar daysInWeek result must be a positive integer");if(!Xa(r)||r<1)throw new RangeError("calendar daysInWeek result must be a positive integer");return r}function DP(t,e){if(typeof t=="string"){let n=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.daysInMonth%"),n,[e])}let r=nt(Nr(t,"daysInMonth"),t,[e]);if(typeof r!="number")throw new TypeError("calendar daysInMonth result must be a positive integer");if(!Xa(r)||r<1)throw new RangeError("calendar daysInMonth result must be a positive integer");return r}function CP(t,e){if(typeof t=="string"){let n=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.daysInYear%"),n,[e])}let r=nt(Nr(t,"daysInYear"),t,[e]);if(typeof r!="number")throw new TypeError("calendar daysInYear result must be a positive integer");if(!Xa(r)||r<1)throw new RangeError("calendar daysInYear result must be a positive integer");return r}function NP(t,e){if(typeof t=="string"){let n=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.monthsInYear%"),n,[e])}let r=nt(Nr(t,"monthsInYear"),t,[e]);if(typeof r!="number")throw new TypeError("calendar monthsInYear result must be a positive integer");if(!Xa(r)||r<1)throw new RangeError("calendar monthsInYear result must be a positive integer");return r}function jP(t,e){if(typeof t=="string"){let n=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.inLeapYear%"),n,[e])}let r=nt(Nr(t,"inLeapYear"),t,[e]);if(typeof r!="boolean")throw new TypeError("calendar inLeapYear result must be a boolean");return r}function Ta(t){if(yn(t)){if(Ji(t,xe))return j(t,xe);if(!function(i){return!!Ln(i)||"dateAdd"in i&&"dateFromFields"in i&&"dateUntil"in i&&"day"in i&&"dayOfWeek"in i&&"dayOfYear"in i&&"daysInMonth"in i&&"daysInWeek"in i&&"daysInYear"in i&&"fields"in i&&"id"in i&&"inLeapYear"in i&&"mergeFields"in i&&"month"in i&&"monthCode"in i&&"monthDayFromFields"in i&&"monthsInYear"in i&&"weekOfYear"in i&&"year"in i&&"yearMonthFromFields"in i&&"yearOfWeek"in i}(t))throw new TypeError("expected a Temporal.Calendar or object implementing the Temporal.Calendar protocol");return t}let e=As(t);if(Lh(e))return Xl(e);let r;try{({calendar:r}=rd(e))}catch{try{({calendar:r}=V$(e))}catch{({calendar:r}=H$(e))}}if(r||(r="iso8601"),!Lh(r))throw new RangeError(`invalid calendar identifier ${r}`);return Xl(r)}function IS(t){if(Ji(t,xe))return j(t,xe);let{calendar:e}=t;return e===void 0?"iso8601":Ta(e)}function Io(t){if(typeof t=="string")return t;let e=t.id;if(typeof e!="string")throw new TypeError("calendar.id should be a string");return e}function F1(t){return yn(t)?t:new(Fe("%Temporal.Calendar%"))(t)}function kS(t,e){return t===e?!0:Io(t)===Io(e)}function qP(t,e,r){if(t===e)return;let n=Io(t),i=Io(e);if(n!==i)throw new RangeError(`cannot ${r} of ${n} and ${i} calendars`)}function Kme(t,e){if(t===e)return e;let r=Io(t),n=Io(e);if(r===n||r==="iso8601")return e;if(n==="iso8601")return t;throw new RangeError("irreconcilable calendars")}function qh(t,e,r,n){if(typeof t=="string"){let o=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.dateFromFields%"),o,[e,r])}let i=nt(n??Nr(t,"dateFromFields"),t,[e,r]);if(!Xt(i))throw new TypeError("invalid result");return i}function kg(t,e,r){if(typeof t=="string"){let i=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.yearMonthFromFields%"),i,[e,r])}let n=nt(Nr(t,"yearMonthFromFields"),t,[e,r]);if(!Rr(n))throw new TypeError("invalid result");return n}function B1(t,e,r){if(typeof t=="string"){let i=new(Fe("%Temporal.Calendar%"))(t);return nt(Fe("%Temporal.Calendar.prototype.monthDayFromFields%"),i,[e,r])}let n=nt(Nr(t,"monthDayFromFields"),t,[e,r]);if(!Hi(n))throw new TypeError("invalid result");return n}function Xo(t){if(yn(t)){if(Qe(t))return j(t,Gr);if(!function(r){return!!Rc(r)||"getOffsetNanosecondsFor"in r&&"getPossibleInstantsFor"in r&&"id"in r}(t))throw new TypeError("expected a Temporal.TimeZone or object implementing the Temporal.TimeZone protocol");return t}return aXe(As(t))}function yS(t){if(typeof t=="string")return t;let e=t.id;if(typeof e!="string")throw new TypeError("timeZone.id should be a string");return e}function Wme(t){return yn(t)?t:new(Fe("%Temporal.TimeZone%"))(t)}function Gme(t,e){return t===e?!0:yS(t)===yS(e)}function D1(t){return Dc(j(t,We),j(t,Ve),j(t,Ze),j(t,xe))}function eL(t){return new(Fe("%Temporal.PlainTime%"))(j(t,Ot),j(t,Bt),j(t,Dt),j(t,Ct),j(t,Nt),j(t,jt))}function Tu(t,e,r){if(typeof t=="string"){let i=new(Fe("%Temporal.TimeZone%"))(t);return nt(Fe("%Temporal.TimeZone.prototype.getOffsetNanosecondsFor%"),i,[e])}let n=nt(r??Nr(t,"getOffsetNanosecondsFor"),t,[e]);if(typeof n!="number")throw new TypeError("bad return from getOffsetNanosecondsFor");if(!Xa(n)||mn(n)>=864e11)throw new RangeError("out-of-range return from getOffsetNanosecondsFor");return n}function v$(t,e){return LP(Tu(t,e))}function Qa(t,e,r){let n=j(e,ht),i=Tu(t,e),{year:o,month:s,day:a,hour:u,minute:m,second:p,millisecond:b,microsecond:A,nanosecond:M}=Zme(n);return{year:o,month:s,day:a,hour:u,minute:m,second:p,millisecond:b,microsecond:A,nanosecond:M}=rL(o,s,a,u,m,p,b,A,M+i),Sa(o,s,a,u,m,p,b,A,M,r)}function Ms(t,e,r){return Vme(wP(t,e),t,e,r)}function Vme(t,e,r,n){let i=Fe("%Temporal.Instant%"),o=t.length;if(o===1)return t[0];if(o)switch(n){case"compatible":case"earlier":return t[0];case"later":return t[o-1];case"reject":throw new RangeError("multiple instants found")}let s=j(r,We),a=j(r,Ve),u=j(r,Ze),m=j(r,Ot),p=j(r,Bt),b=j(r,Dt),A=j(r,Ct),M=j(r,Nt),S=j(r,jt),P=L0(s,a,u,m,p,b,A,M,S);if(P===null)throw new RangeError("DateTime outside of supported range");let k=new i(K.default.subtract(P,Yl)),R=new i(K.default.add(P,Yl)),B=Tu(e,k),I=Tu(e,R)-B;switch(n){case"earlier":{let q=j(r,xe),$=Fe("%Temporal.PlainDateTime%"),U=E$(s,a,u,m,p,b,A,M,S,q,0,0,0,0,0,0,0,0,0,-I,void 0);return wP(e,new $(U.year,U.month,U.day,U.hour,U.minute,U.second,U.millisecond,U.microsecond,U.nanosecond,q))[0]}case"compatible":case"later":{let q=j(r,xe),$=Fe("%Temporal.PlainDateTime%"),U=E$(s,a,u,m,p,b,A,M,S,q,0,0,0,0,0,0,0,0,0,I,void 0),F=wP(e,new $(U.year,U.month,U.day,U.hour,U.minute,U.second,U.millisecond,U.microsecond,U.nanosecond,q));return F[F.length-1]}case"reject":throw new RangeError("no such instant found")}}function wP(t,e,r){if(typeof t=="string"){let o=new(Fe("%Temporal.TimeZone%"))(t);return nt(Fe("%Temporal.TimeZone.prototype.getPossibleInstantsFor%"),o,[e])}let n=nt(r??Nr(t,"getPossibleInstantsFor"),t,[e]),i=[];for(let o of n){if(!ji(o))throw new TypeError("bad return from getPossibleInstantsFor");kme.call(i,o)}return i}function jg(t){let e;return t<0||t>9999?e=(t<0?"-":"+")+`000000${mn(t)}`.slice(-6):e=`0000${t}`.slice(-4),e}function En(t){return`00${t}`.slice(-2)}function $P(t,e,r,n,i){if(i==="minute")return"";let o=`:${En(t)}`,s,a=1e6*e+1e3*r+n;if(i==="auto"){if(a===0)return o;for(s=`${a}`.padStart(9,"0");s[s.length-1]==="0";)s=s.slice(0,-1)}else{if(i===0)return o;s=`${a}`.padStart(9,"0").slice(0,i)}return`${o}.${s}`}function Q0e(t,e,r){let n=e;n===void 0&&(n="UTC");let i=Qa(n,t,"iso8601"),o=jg(j(i,We)),s=En(j(i,Ve)),a=En(j(i,Ze)),u=En(j(i,Ot)),m=En(j(i,Bt)),p=$P(j(i,Dt),j(i,Ct),j(i,Nt),j(i,jt),r),b="Z";return e!==void 0&&(b=Hme(Tu(n,t))),`${o}-${s}-${a}T${u}:${m}${p}${b}`}function f$(t,e="auto",r){function n(W){return W<=XQe?W.toString(10):K.default.BigInt(W).toString(10)}let i=j(t,ys),o=j(t,ho),s=j(t,ia),a=j(t,gs),u=j(t,bs),m=j(t,vs),p=j(t,ws),b=j(t,_s),A=j(t,xs),M=j(t,Es),S=Jl(i,o,s,a,u,m,p,b,A,M);if(r){let{unit:W,increment:E,roundingMode:c}=r;({seconds:p,milliseconds:b,microseconds:A,nanoseconds:M}=$h(0,0,0,0,0,0,p,b,A,M,E,W,c))}let P=[];i&&P.push(`${n(mn(i))}Y`),o&&P.push(`${n(mn(o))}M`),s&&P.push(`${n(mn(s))}W`),a&&P.push(`${n(mn(a))}D`);let k=[];u&&k.push(`${n(mn(u))}H`),m&&k.push(`${n(mn(m))}M`);let R=[],B,I,q,$,U=C1(0,0,0,p,b,A,M,0);({quotient:U,remainder:B}=ri(U,Ir)),{quotient:U,remainder:I}=ri(U,Ir),{quotient:$,remainder:q}=ri(U,Ir);let F=1e6*mn(K.default.toNumber(q))+1e3*mn(K.default.toNumber(I))+mn(K.default.toNumber(B)),L;if(e==="auto"){if(F!==0)for(L=`${F}`.padStart(9,"0");L[L.length-1]==="0";)L=L.slice(0,-1)}else e!==0&&(L=`${F}`.padStart(9,"0").slice(0,e));return L&&R.unshift(".",L),K.default.equal($,zn)&&!R.length&&e==="auto"||R.unshift(Mu($).toString()),R.length&&k.push(`${R.join("")}S`),k.length&&k.unshift("T"),P.length||k.length?`${S<0?"-":""}P${P.join("")}${k.join("")}`:"PT0S"}function X0e(t,e="auto"){return`${jg(j(t,We))}-${En(j(t,Ve))}-${En(j(t,Ze))}${W$(j(t,xe),e)}`}function eme(t,e,r="auto",n){let i=j(t,We),o=j(t,Ve),s=j(t,Ze),a=j(t,Ot),u=j(t,Bt),m=j(t,Dt),p=j(t,Ct),b=j(t,Nt),A=j(t,jt);if(n){let{unit:M,increment:S,roundingMode:P}=n;({year:i,month:o,day:s,hour:a,minute:u,second:m,millisecond:p,microsecond:b,nanosecond:A}=cL(i,o,s,a,u,m,p,b,A,S,M,P))}return`${jg(i)}-${En(o)}-${En(s)}T${En(a)}:${En(u)}${$P(m,p,b,A,e)}${W$(j(t,xe),r)}`}function tme(t,e="auto"){let r=`${En(j(t,Ve))}-${En(j(t,Ze))}`,n=Io(j(t,xe));(e==="always"||e==="critical"||n!=="iso8601")&&(r=`${jg(j(t,We))}-${r}`);let i=G$(n,e);return i&&(r+=i),r}function rme(t,e="auto"){let r=`${jg(j(t,We))}-${En(j(t,Ve))}`,n=Io(j(t,xe));(e==="always"||e==="critical"||n!=="iso8601")&&(r+=`-${En(j(t,Ze))}`);let i=G$(n,e);return i&&(r+=i),r}function nme(t,e,r="auto",n="auto",i="auto",o){let s=j(t,Qo);if(o){let{unit:p,increment:b,roundingMode:A}=o,M=EP(j(t,ht),b,p,A);s=new(Fe("%Temporal.Instant%"))(M)}let a=j(t,Gr),u=Qa(a,s,"iso8601"),m=`${jg(j(u,We))}-${En(j(u,Ve))}-${En(j(u,Ze))}T${En(j(u,Ot))}:${En(j(u,Bt))}${$P(j(u,Dt),j(u,Ct),j(u,Nt),j(u,jt),e)}`;return i!=="never"&&(m+=Hme(Tu(a,s))),n!=="never"&&(m+=`[${n==="critical"?"!":""}${yS(a)}]`),m+=W$(j(t,xe),r),m}function _1(t){return uye.test(xS(t))}function $0(t){let e=uye.exec(xS(t));if(!e)throw new RangeError(`invalid time zone offset: ${t}`);return(e[1]==="-"||e[1]==="\u2212"?-1:1)*(1e9*(60*(60*+e[2]+ +(e[3]||0))+ +(e[4]||0))+ +((e[5]||0)+"000000000").slice(0,9))}function tL(t){return _1(t)?LP($0(t)):qme(xS(t)).resolvedOptions().timeZone}function Dh(t,e){let{year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:u,microsecond:m,nanosecond:p}=Jme(t,e),b=r%400,A=(r-b)/400,M=K.default.multiply(K.default.BigInt(146097),Yl),S=L0(b,n,i,o,s,a,u,m,p),P=K.default.add(S,K.default.multiply(M,K.default.BigInt(A)));return K.default.toNumber(K.default.subtract(P,e))}function LP(t){let e=t<0?"-":"+",r=mn(t),n=r%1e9,i=Aa(r/1e9)%60,o=Aa(r/6e10)%60,s=En(Aa(r/36e11)),a=En(o),u=En(i),m="";if(n){let p=`${n}`.padStart(9,"0");for(;p[p.length-1]==="0";)p=p.slice(0,-1);m=`:${u}.${p}`}else i&&(m=`:${u}`);return`${e}${s}:${a}${m}`}function Hme(t){let e=K.default.toNumber(Ya(K.default.BigInt(t),Cme,"halfExpand")),r=e<0?"-":"+";e=mn(e);let n=e/6e10%60;return`${r}${En(Aa(e/36e11))}:${En(n)}`}function L0(t,e,r,n,i,o,s,a,u){let m=new Date;m.setUTCHours(n,i,o,s),m.setUTCFullYear(t,e-1,r);let p=m.getTime();if(PP(p))return null;let b=K.default.multiply(K.default.BigInt(p),Oc);return b=K.default.add(b,K.default.multiply(K.default.BigInt(a),Ir)),b=K.default.add(b,K.default.BigInt(u)),K.default.lessThan(b,hS)||K.default.greaterThan(b,I1)?null:b}function Zme(t){let{quotient:e,remainder:r}=ri(t,Oc),n=K.default.toNumber(e),i=K.default.toNumber(r);i<0&&(i+=1e6,n-=1);let o=Aa(i/1e3)%1e3,s=i%1e3,a=new Date(n);return{epochMilliseconds:n,year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds(),microsecond:o,nanosecond:s}}function Jme(t,e){let{epochMilliseconds:r,millisecond:n,microsecond:i,nanosecond:o}=Zme(e),{year:s,month:a,day:u,hour:m,minute:p,second:b}=function(M,S){let P=qme(M).format(new Date(S));return function(R){let B=R.split(/[^\w]+/);if(B.length!==7)throw new RangeError(`expected 7 parts in "${R}`);let I=+B[0],q=+B[1],$=+B[2],U=B[3].toUpperCase();if(U==="B"||U==="BC")$=1-$;else if(U!=="A"&&U!=="AD")throw new RangeError(`Unknown era ${U} in "${R}`);let F=+B[4];F===24&&(F=0);let L=+B[5],W=+B[6];if(!(Ss($)&&Ss(I)&&Ss(q)&&Ss(F)&&Ss(L)&&Ss(W)))throw new RangeError(`Invalid number in "${R}`);return{year:$,month:I,day:q,hour:F,minute:L,second:W}}(P)}(t,r);return rL(s,a,u,m,p,b,n,i,o)}function ime(t,e){return K.default.lessThan(t,e)?e:t}function Yme(){return K.default.add(uL(),nXe)}function Qme(t,e){if(K.default.lessThan(e,x1))return Qme(t,x1);let r=K.default.add(e,Nme),n=ime(Yme(),r),i=ime(x1,e),o=Dh(t,i),s=i,a=o;for(;o===a&&K.default.lessThan(K.default.BigInt(i),n);){if(s=K.default.add(i,jme),K.default.greaterThan(s,I1))return null;a=Dh(t,s),o===a&&(i=s)}return o===a?null:lye(u=>Dh(t,u),i,s,o,a)}function w$(t,e){let r=Yme(),n=K.default.greaterThan(e,r),i=n?K.default.subtract(e,Nme):x1;if(t==="Africa/Casablanca"||t==="Africa/El_Aaiun"){let m=j(Au("2088-01-01T00Z"),ht);if(K.default.lessThan(m,e))return w$(t,m)}let o=K.default.subtract(e,q1);if(K.default.lessThan(o,x1))return null;let s=Dh(t,o),a=o,u=s;for(;s===u&&K.default.greaterThan(o,i);){if(a=K.default.subtract(o,jme),K.default.lessThan(a,x1))return null;u=Dh(t,a),s===u&&(o=a)}if(s===u){if(n){let m=K.default.subtract(r,Yl);return w$(t,m)}return null}return lye(m=>Dh(t,m),a,o,u,s)}function U0(t){return t===void 0?!1:t%4==0&&(t%100!=0||t%400==0)}function Ch(t,e){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[U0(t)?"leapyear":"standard"][e-1]}function _$(t,e,r){let n=e+(e<3?10:-2),i=t-(e<3?1:0),o=Aa(i/100),s=i-100*o,a=(r+Aa(2.6*n-.2)+(s+Aa(s/4))+(Aa(o/4)-2*o))%7;return a+(a<=0?7:0)}function _P(t,e,r){let n=r;for(let i=e-1;i>0;i--)n+=Ch(t,i);return n}function ome(t,e,r){let n=_P(t,e,r),i=_$(t,e,r)||7,o=_$(t,1,1),s=Aa((n-i+10)/7);return s<1?o===5||o===6&&U0(t-1)?{week:53,year:t-1}:{week:52,year:t-1}:s===53&&(U0(t)?366:365)-n<4-i?{week:1,year:t+1}:{week:s,year:t}}function Jl(t,e,r,n,i,o,s,a,u,m){for(let p of[t,e,r,n,i,o,s,a,u,m])if(p!==0)return p<0?-1:1;return 0}function cP(t,e){let r=t,n=e;if(!Ss(r)||!Ss(n))throw new RangeError("infinity is out of range");return n-=1,r+=Aa(n/12),n%=12,n<0&&(n+=12),n+=1,{year:r,month:n}}function UP(t,e,r){let n=t,i=e,o=r;if(!Ss(o))throw new RangeError("infinity is out of range");({year:n,month:i}=cP(n,i));let s=146097;if(mn(o)>s){let m=Eg(o/s);n+=400*m,o-=m*s}let a=0,u=i>2?n:n-1;for(;a=U0(u)?366:365,o<-a;)n-=1,u-=1,o+=a;for(u+=1;a=U0(u)?366:365,o>a;)n+=1,u+=1,o-=a;for(;o<1;)({year:n,month:i}=cP(n,i-1)),o+=Ch(n,i);for(;o>Ch(n,i);)o-=Ch(n,i),{year:n,month:i}=cP(n,i+1);return{year:n,month:i,day:o}}function rL(t,e,r,n,i,o,s,a,u){let{deltaDays:m,hour:p,minute:b,second:A,millisecond:M,microsecond:S,nanosecond:P}=Oh(n,i,o,s,a,u),{year:k,month:R,day:B}=UP(t,e,r+m);return{year:k,month:R,day:B,hour:p,minute:b,second:A,millisecond:M,microsecond:S,nanosecond:P}}function Oh(t,e,r,n,i,o){let s,a=K.default.BigInt(t),u=K.default.BigInt(e),m=K.default.BigInt(r),p=K.default.BigInt(n),b=K.default.BigInt(i),A=K.default.BigInt(o);return{quotient:s,remainder:A}=_g(A,Ir),b=K.default.add(b,s),{quotient:s,remainder:b}=_g(b,Ir),p=K.default.add(p,s),{quotient:s,remainder:p}=_g(p,Ir),m=K.default.add(m,s),{quotient:s,remainder:m}=_g(m,Hl),u=K.default.add(u,s),{quotient:s,remainder:u}=_g(u,Hl),a=K.default.add(a,s),{quotient:s,remainder:a}=_g(a,Bme),{deltaDays:K.default.toNumber(s),hour:K.default.toNumber(a),minute:K.default.toNumber(u),second:K.default.toNumber(m),millisecond:K.default.toNumber(p),microsecond:K.default.toNumber(b),nanosecond:K.default.toNumber(A)}}function C1(t,e,r,n,i,o,s,a){let u=K.default.BigInt(t),m=K.default.BigInt(s);t!==0&&(m=K.default.subtract(K.default.BigInt(s),K.default.BigInt(a)));let p=K.default.add(K.default.BigInt(e),K.default.multiply(u,K.default.BigInt(24))),b=K.default.add(K.default.BigInt(r),K.default.multiply(p,Hl)),A=K.default.add(K.default.BigInt(n),K.default.multiply(b,Hl)),M=K.default.add(K.default.BigInt(i),K.default.multiply(A,Ir)),S=K.default.add(K.default.BigInt(o),K.default.multiply(M,Ir));return K.default.add(K.default.BigInt(m),K.default.multiply(S,Ir))}function nL(t,e){let r=Fe("%Temporal.Instant%"),n=R1(K.default.toNumber(t)),i=K.default.BigInt(t),o=864e11;if(n===0)return{days:0,nanoseconds:zn,dayLengthNs:o};if(!Qe(e)){let I;return{quotient:I,remainder:i}=ri(i,K.default.BigInt(o)),{days:K.default.toNumber(I),nanoseconds:i,dayLengthNs:o}}let s=j(e,ht),a=j(e,Qo),u=K.default.add(s,i),m=new r(u),p=j(e,Gr),b=j(e,xe),A=Qa(p,a,b),M=Qa(p,m,b),{days:S}=aL(j(A,We),j(A,Ve),j(A,Ze),j(A,Ot),j(A,Bt),j(A,Dt),j(A,Ct),j(A,Nt),j(A,jt),j(M,We),j(M,Ve),j(M,Ze),j(M,Ot),j(M,Bt),j(M,Dt),j(M,Ct),j(M,Nt),j(M,jt),b,"day",es(null)),P=Bc(a,p,b,0,0,0,S,0,0,0,0,0,0),k=K.default.BigInt(S);if(n===1)for(;K.default.greaterThan(k,zn)&&K.default.greaterThan(P,u);)k=K.default.subtract(k,q1),P=Bc(a,p,b,0,0,0,K.default.toNumber(k),0,0,0,0,0,0);i=K.default.subtract(u,P);let R=!1,B=new r(P);do{let I=Bc(B,p,b,0,0,0,n,0,0,0,0,0,0),q=j(B,ht);o=K.default.toNumber(K.default.subtract(I,q)),R=K.default.greaterThanOrEqual(K.default.multiply(K.default.subtract(i,K.default.BigInt(o)),K.default.BigInt(n)),zn),R&&(i=K.default.subtract(i,K.default.BigInt(o)),B=new r(I),k=K.default.add(k,K.default.BigInt(n)))}while(R);if(!Ic(k)&&W0e(k)!==n)throw new RangeError("Time zone or calendar converted nanoseconds into a number of days with the opposite sign");if(!Ic(i)&&W0e(i)!==n)throw pP(i)&&n===1?new Error("assert not reached"):new RangeError("Time zone or calendar ended up with a remainder of nanoseconds with the opposite sign");if(K.default.greaterThanOrEqual(Mu(i),Mu(K.default.BigInt(o))))throw new Error("assert not reached");return{days:K.default.toNumber(k),nanoseconds:i,dayLengthNs:mn(o)}}function Af(t,e,r,n,i,o,s,a,u){let m=Xme(t,e,r,n,i,o,s,a,u);if(m==="positive overflow"||m==="negative overflow")throw new RangeError("Duration out of range");return m}function Xme(t,e,r,n,i,o,s,a,u){let m,p,b,A,M,S,P=t;if(Qe(u)){let F=Bc(j(u,Qo),j(u,Gr),j(u,xe),0,0,0,P,e,r,n,i,o,s),L=j(u,ht);m=K.default.subtract(F,L)}else m=C1(P,e,r,n,i,o,s,0);a==="year"||a==="month"||a==="week"||a==="day"?{days:P,nanoseconds:m}=nL(m,u):P=0;let k=K.default.lessThan(m,zn)?-1:1;switch(m=Mu(m),p=b=A=M=S=zn,a){case"year":case"month":case"week":case"day":case"hour":({quotient:p,remainder:m}=ri(m,Ir)),{quotient:b,remainder:p}=ri(p,Ir),{quotient:A,remainder:b}=ri(b,Ir),{quotient:M,remainder:A}=ri(A,Hl),{quotient:S,remainder:M}=ri(M,Hl);break;case"minute":({quotient:p,remainder:m}=ri(m,Ir)),{quotient:b,remainder:p}=ri(p,Ir),{quotient:A,remainder:b}=ri(b,Ir),{quotient:M,remainder:A}=ri(A,Hl);break;case"second":({quotient:p,remainder:m}=ri(m,Ir)),{quotient:b,remainder:p}=ri(p,Ir),{quotient:A,remainder:b}=ri(b,Ir);break;case"millisecond":({quotient:p,remainder:m}=ri(m,Ir)),{quotient:b,remainder:p}=ri(p,Ir);break;case"microsecond":({quotient:p,remainder:m}=ri(m,Ir));break;case"nanosecond":break;default:throw new Error("assert not reached")}let R=K.default.toNumber(S)*k,B=K.default.toNumber(M)*k,I=K.default.toNumber(A)*k,q=K.default.toNumber(b)*k,$=K.default.toNumber(p)*k,U=K.default.toNumber(m)*k;for(let F of[P,R,B,I,q,$,U])if(!Ss(F))return k===1?"positive overflow":"negative overflow";return{days:P,hours:R,minutes:B,seconds:I,milliseconds:q,microseconds:$,nanoseconds:U}}function sP(t,e,r,n,i,o){let s=Fe("%Temporal.Duration%"),a=Jl(t,e,r,n,0,0,0,0,0,0);if(a===0)return{years:t,months:e,weeks:r,days:n};let u=K.default.BigInt(a),m,p,b=K.default.BigInt(t),A=K.default.BigInt(e),M=K.default.BigInt(r),S=K.default.BigInt(n);o&&(p=Zr(o),m=j(p,xe));let P=new s(a),k=new s(0,a),R=new s(0,0,a);switch(i){case"year":break;case"month":{if(!m)throw new RangeError("a starting point is required for months balancing");let B,I;for(typeof m!="string"&&(B=Nr(m,"dateAdd"),I=Nr(m,"dateUntil"));!Ic(b);){let q=To(m,p,P,void 0,B),$=es(null);$.largestUnit="month";let U=q0(m,p,q,$,I),F=K.default.BigInt(j(U,ho));p=q,A=K.default.add(A,F),b=K.default.subtract(b,u)}}break;case"week":{if(!m)throw new RangeError("a starting point is required for weeks balancing");let B=typeof m!="string"?Nr(m,"dateAdd"):void 0;for(;!Ic(b);){let I;({relativeTo:p,days:I}=Yo(m,p,P,B)),S=K.default.add(S,K.default.BigInt(I)),b=K.default.subtract(b,u)}for(;!Ic(A);){let I;({relativeTo:p,days:I}=Yo(m,p,k,B)),S=K.default.add(S,K.default.BigInt(I)),A=K.default.subtract(A,u)}break}default:{if(Ic(b)&&Ic(A)&&Ic(M))break;if(!m)throw new RangeError("a starting point is required for balancing calendar units");let B=typeof m!="string"?Nr(m,"dateAdd"):void 0;for(;!Ic(b);){let I;({relativeTo:p,days:I}=Yo(m,p,P,B)),S=K.default.add(S,K.default.BigInt(I)),b=K.default.subtract(b,u)}for(;!Ic(A);){let I;({relativeTo:p,days:I}=Yo(m,p,k,B)),S=K.default.add(S,K.default.BigInt(I)),A=K.default.subtract(A,u)}for(;!Ic(M);){let I;({relativeTo:p,days:I}=Yo(m,p,R,B)),S=K.default.add(S,K.default.BigInt(I)),M=K.default.subtract(M,u)}break}}return{years:K.default.toNumber(b),months:K.default.toNumber(A),weeks:K.default.toNumber(M),days:K.default.toNumber(S)}}function sme(t,e,r,n,i){if(Qe(t)){let o=j(t,Qo),s=j(t,Gr),a=j(t,xe),u=Tu(s,o),m=Bc(o,s,a,e,r,n,i,0,0,0,0,0,0);return Tu(s,new(Fe("%Temporal.Instant%"))(m))-u}return 0}function eye(t){return new(Fe("%Temporal.Duration%"))(-j(t,ys),-j(t,ho),-j(t,ia),-j(t,gs),-j(t,bs),-j(t,vs),-j(t,ws),-j(t,_s),-j(t,xs),-j(t,Es))}function Ma(t,e,r){return JQe(r,YQe(e,t))}function tye(t,e,r){let n=Ma(e,1,12);return{year:t,month:n,day:Ma(r,1,Ch(t,n))}}function Ro(t,e,r){if(t<e||t>r)throw new RangeError(`value out of range: ${e} <= ${t} <= ${r}`)}function Ql(t,e,r){Ro(e,1,12),Ro(r,1,Ch(t,e))}function rye(t,e,r){nye(t,e,r,12,0,0,0,0,0)}function FP(t,e,r,n,i,o){Ro(t,0,23),Ro(e,0,59),Ro(r,0,59),Ro(n,0,999),Ro(i,0,999),Ro(o,0,999)}function iL(t,e,r,n,i,o,s,a,u){Ql(t,e,r),FP(n,i,o,s,a,u)}function nye(t,e,r,n,i,o,s,a,u){if(Ro(t,dP,hP),t===dP&&L0(t,e,r+1,n,i,o,s,a,u-1)==null||t===hP&&L0(t,e,r-1,n,i,o,s,a,u+1)==null)throw new RangeError("DateTime outside of supported range")}function xg(t){if(K.default.lessThan(t,hS)||K.default.greaterThan(t,I1))throw new RangeError("Instant outside of supported range")}function xP(t,e,r,n,i,o,s,a,u,m){let p=Jl(t,e,r,n,i,o,s,a,u,m);for(let b of[t,e,r,n,i,o,s,a,u,m]){if(!Ss(b))throw new RangeError("infinite values not allowed as duration fields");let A=R1(b);if(A!==0&&A!==p)throw new RangeError("mixed-sign values not allowed as duration fields")}}function oL(t,e,r,n,i,o,s){switch(s){case"year":case"month":{let a=-j0(t,e,r,n,i,o);if(a===0)return{years:0,months:0,weeks:0,days:0};let u={year:t,month:e,day:r},m={year:n,month:i,day:o},p=m.year-u.year,b=Mg(t,e,r,p,0,0,0,"constrain"),A=-j0(b.year,b.month,b.day,n,i,o);if(A===0)return s==="year"?{years:p,months:0,weeks:0,days:0}:{years:0,months:12*p,weeks:0,days:0};let M=m.month-u.month;if(A!==a&&(p-=a,M+=12*a),b=Mg(t,e,r,p,M,0,0,"constrain"),A=-j0(b.year,b.month,b.day,n,i,o),A===0)return s==="year"?{years:p,months:M,weeks:0,days:0}:{years:0,months:M+12*p,weeks:0,days:0};A!==a&&(M-=a,M===-a&&(p-=a,M=11*a),b=Mg(t,e,r,p,M,0,0,"constrain"));let S=0;return S=b.month===m.month?m.day-b.day:a<0?-b.day-(Ch(m.year,m.month)-m.day):m.day+(Ch(b.year,b.month)-b.day),s==="month"&&(M+=12*p,p=0),{years:p,months:M,weeks:0,days:S}}case"week":case"day":{let a,u,m;j0(t,e,r,n,i,o)<0?(u={year:t,month:e,day:r},a={year:n,month:i,day:o},m=1):(u={year:n,month:i,day:o},a={year:t,month:e,day:r},m=-1);let p=_P(a.year,a.month,a.day)-_P(u.year,u.month,u.day);for(let A=u.year;A<a.year;++A)p+=U0(A)?366:365;let b=0;return s==="week"&&(b=Aa(p/7),p%=7),b*=m,p*=m,{years:0,months:0,weeks:b,days:p}}default:throw new Error("assert not reached")}}function iye(t,e,r,n,i,o,s,a,u,m,p,b){let A=s-t,M=a-e,S=u-r,P=m-n,k=p-i,R=b-o,B=Jl(0,0,0,0,A,M,S,P,k,R);A*=B,M*=B,S*=B,P*=B,k*=B,R*=B;let I=0;if({deltaDays:I,hour:A,minute:M,second:S,millisecond:P,microsecond:k,nanosecond:R}=Oh(A,M,S,P,k,R),I!=0)throw new Error("assertion failure in DifferenceTime: _bt_.[[Days]] should be 0");return A*=B,M*=B,S*=B,P*=B,k*=B,R*=B,{hours:A,minutes:M,seconds:S,milliseconds:P,microseconds:k,nanoseconds:R}}function sL(t,e,r,n,i,o){let s=K.default.subtract(e,t),a=0,u=0,m=K.default.toNumber(K.default.remainder(s,Ir)),p=K.default.toNumber(K.default.remainder(K.default.divide(s,Ir),Ir)),b=K.default.toNumber(K.default.remainder(K.default.divide(s,Oc),Ir)),A=K.default.toNumber(K.default.divide(s,Zl));return{hours:a,minutes:u,seconds:A,milliseconds:b,microseconds:p,nanoseconds:m}=$h(0,0,0,0,0,0,A,b,p,m,r,n,o),Af(0,a,u,A,b,p,m,i)}function aL(t,e,r,n,i,o,s,a,u,m,p,b,A,M,S,P,k,R,B,I,q){let $=t,U=e,F=r,{hours:L,minutes:W,seconds:E,milliseconds:c,microseconds:l,nanoseconds:y}=iye(n,i,o,s,a,u,A,M,S,P,k,R),d=Jl(0,0,0,0,L,W,E,c,l,y);j0(m,p,b,$,U,F)===-d&&({year:$,month:U,day:F}=UP($,U,F-d),{hours:L,minutes:W,seconds:E,milliseconds:c,microseconds:l,nanoseconds:y}=Af(-d,L,W,E,c,l,y,I));let h=Dc($,U,F,B),v=Dc(m,p,b,B),x=Rg("day",I),g=G0(q);g.largestUnit=x;let{years:f,months:w,weeks:D,days:T}=q0(B,h,v,g);return{days:T,hours:L,minutes:W,seconds:E,milliseconds:c,microseconds:l,nanoseconds:y}=Af(T,L,W,E,c,l,y,I),{years:f,months:w,weeks:D,days:T,hours:L,minutes:W,seconds:E,milliseconds:c,microseconds:l,nanoseconds:y}}function oye(t,e,r,n,i,o){let s=K.default.subtract(e,t);if(K.default.equal(s,zn))return{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let a=Fe("%Temporal.Instant%"),u=new a(t),m=new a(e),p=Qa(r,u,n),b=Qa(r,m,n),{years:A,months:M,weeks:S,days:P}=aL(j(p,We),j(p,Ve),j(p,Ze),j(p,Ot),j(p,Bt),j(p,Dt),j(p,Ct),j(p,Nt),j(p,jt),j(b,We),j(b,Ve),j(b,Ze),j(b,Ot),j(b,Bt),j(b,Dt),j(b,Ct),j(b,Nt),j(b,jt),n,i,o),k=Bc(u,r,n,A,M,S,0,0,0,0,0,0,0),R=K.default.subtract(e,k),B=Po(k,r,n);({nanoseconds:R,days:P}=nL(R,B));let{hours:I,minutes:q,seconds:$,milliseconds:U,microseconds:F,nanoseconds:L}=Af(0,0,0,0,0,0,K.default.toNumber(R),"hour");return{years:A,months:M,weeks:S,days:P,hours:I,minutes:q,seconds:$,milliseconds:U,microseconds:F,nanoseconds:L}}function z1(t,e,r,n,i,o){let s=ES.reduce((M,S)=>{let P=S[0],k=S[1],R=S[2];return r!=="datetime"&&R!==r||n.includes(k)||M.push(k,P),M},[]),a=Pa(e,"largestUnit",r,"auto");if(n.includes(a))throw new RangeError(`largestUnit must be one of ${s.join(", ")}, not ${a}`);let u=L1(e),m=Pu(e,"trunc");t==="since"&&(m=function(S){switch(S){case"ceil":return"floor";case"floor":return"ceil";case"halfCeil":return"halfFloor";case"halfFloor":return"halfCeil";default:return S}}(m));let p=Pa(e,"smallestUnit",r,i);if(n.includes(p))throw new RangeError(`smallestUnit must be one of ${s.join(", ")}, not ${p}`);let b=Rg(o,p);if(a==="auto"&&(a=b),Rg(a,p)!==a)throw new RangeError(`largestUnit ${a} cannot be smaller than smallestUnit ${p}`);let A={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[p];return A!==void 0&&U1(u,A,!1),{largestUnit:a,roundingIncrement:u,roundingMode:m,smallestUnit:p}}function ame(t,e,r,n){let i=t==="since"?-1:1,o=Au(r),s=z1(t,G0(n),"time",[],"nanosecond","second"),a=j(e,ht),u=j(o,ht),{hours:m,minutes:p,seconds:b,milliseconds:A,microseconds:M,nanoseconds:S}=sL(a,u,s.roundingIncrement,s.smallestUnit,s.largestUnit,s.roundingMode);return new(Fe("%Temporal.Duration%"))(0,0,0,0,i*m,i*p,i*b,i*A,i*M,i*S)}function cme(t,e,r,n){let i=t==="since"?-1:1,o=Zr(r),s=j(e,xe);qP(s,j(o,xe),"compute difference between dates");let a=G0(n),u=z1(t,a,"date",[],"day","day");a.largestUnit=u.largestUnit;let{years:m,months:p,weeks:b,days:A}=q0(s,e,o,a);return u.smallestUnit==="day"&&u.roundingIncrement===1||({years:m,months:p,weeks:b,days:A}=$h(m,p,b,A,0,0,0,0,0,0,u.roundingIncrement,u.smallestUnit,u.roundingMode,e)),new(Fe("%Temporal.Duration%"))(i*m,i*p,i*b,i*A,0,0,0,0,0,0)}function fme(t,e,r,n){let i=t==="since"?-1:1,o=Sg(r),s=j(e,xe);qP(s,j(o,xe),"compute difference between dates");let a=G0(n),u=z1(t,a,"datetime",[],"nanosecond","day"),{years:m,months:p,weeks:b,days:A,hours:M,minutes:S,seconds:P,milliseconds:k,microseconds:R,nanoseconds:B}=aL(j(e,We),j(e,Ve),j(e,Ze),j(e,Ot),j(e,Bt),j(e,Dt),j(e,Ct),j(e,Nt),j(e,jt),j(o,We),j(o,Ve),j(o,Ze),j(o,Ot),j(o,Bt),j(o,Dt),j(o,Ct),j(o,Nt),j(o,jt),s,u.largestUnit,a),I=D1(e);return{years:m,months:p,weeks:b,days:A,hours:M,minutes:S,seconds:P,milliseconds:k,microseconds:R,nanoseconds:B}=$h(m,p,b,A,M,S,P,k,R,B,u.roundingIncrement,u.smallestUnit,u.roundingMode,I),{days:A,hours:M,minutes:S,seconds:P,milliseconds:k,microseconds:R,nanoseconds:B}=Af(A,M,S,P,k,R,B,u.largestUnit),new(Fe("%Temporal.Duration%"))(i*m,i*p,i*b,i*A,i*M,i*S,i*P,i*k,i*R,i*B)}function ume(t,e,r,n){let i=t==="since"?-1:1,o=Bh(r),s=z1(t,G0(n),"time",[],"nanosecond","hour"),{hours:a,minutes:u,seconds:m,milliseconds:p,microseconds:b,nanoseconds:A}=iye(j(e,Ot),j(e,Bt),j(e,Dt),j(e,Ct),j(e,Nt),j(e,jt),j(o,Ot),j(o,Bt),j(o,Dt),j(o,Ct),j(o,Nt),j(o,jt));return{hours:a,minutes:u,seconds:m,milliseconds:p,microseconds:b,nanoseconds:A}=$h(0,0,0,0,a,u,m,p,b,A,s.roundingIncrement,s.smallestUnit,s.roundingMode),{hours:a,minutes:u,seconds:m,milliseconds:p,microseconds:b,nanoseconds:A}=Af(0,a,u,m,p,b,A,s.largestUnit),new(Fe("%Temporal.Duration%"))(0,0,0,0,i*a,i*u,i*m,i*p,i*b,i*A)}function lme(t,e,r,n){let i=t==="since"?-1:1,o=fS(r),s=j(e,xe);qP(s,j(o,xe),"compute difference between months");let a=G0(n),u=z1(t,a,"date",["week","day"],"month","year");a.largestUnit=u.largestUnit;let m=pi(s,["monthCode","year"]),p=Gt(e,m,[]);p.day=1;let b=qh(s,p),A=Gt(o,m,[]);A.day=1;let M=qh(s,A),{years:S,months:P}=q0(s,b,M,a);return u.smallestUnit==="month"&&u.roundingIncrement===1||({years:S,months:P}=$h(S,P,0,0,0,0,0,0,0,0,u.roundingIncrement,u.smallestUnit,u.roundingMode,b)),new(Fe("%Temporal.Duration%"))(i*S,i*P,0,0,0,0,0,0,0,0)}function dme(t,e,r,n){let i=t==="since"?-1:1,o=uS(r),s=j(e,xe);qP(s,j(o,xe),"compute difference between dates");let a=G0(n),u=z1(t,a,"datetime",[],"nanosecond","hour");a.largestUnit=u.largestUnit;let m=j(e,ht),p=j(o,ht),b,A,M,S,P,k,R,B,I,q;if(u.largestUnit!=="year"&&u.largestUnit!=="month"&&u.largestUnit!=="week"&&u.largestUnit!=="day")b=0,A=0,M=0,S=0,{hours:P,minutes:k,seconds:R,milliseconds:B,microseconds:I,nanoseconds:q}=sL(m,p,u.roundingIncrement,u.smallestUnit,u.largestUnit,u.roundingMode);else{let $=j(e,Gr);if(!Gme($,j(o,Gr)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");({years:b,months:A,weeks:M,days:S,hours:P,minutes:k,seconds:R,milliseconds:B,microseconds:I,nanoseconds:q}=oye(m,p,$,s,u.largestUnit,a)),{years:b,months:A,weeks:M,days:S,hours:P,minutes:k,seconds:R,milliseconds:B,microseconds:I,nanoseconds:q}=$h(b,A,M,S,P,k,R,B,I,q,u.roundingIncrement,u.smallestUnit,u.roundingMode,e),{years:b,months:A,weeks:M,days:S,hours:P,minutes:k,seconds:R,milliseconds:B,microseconds:I,nanoseconds:q}=fye(b,A,M,S,P,k,R,B,I,q,u.roundingIncrement,u.smallestUnit,u.roundingMode,e)}return new(Fe("%Temporal.Duration%"))(i*b,i*A,i*M,i*S,i*P,i*k,i*R,i*B,i*I,i*q)}function Mg(t,e,r,n,i,o,s,a){let u=t,m=e,p=r,b=o,A=s;return u+=n,m+=i,{year:u,month:m}=cP(u,m),{year:u,month:m,day:p}=yP(u,m,p,a),A+=7*b,p+=A,{year:u,month:m,day:p}=UP(u,m,p),{year:u,month:m,day:p}}function sye(t,e,r,n,i,o,s,a,u,m,p,b){let A=t,M=e,S=r,P=n,k=i,R=o;A+=s,M+=a,S+=u,P+=m,k+=p,R+=b;let B=0;return{deltaDays:B,hour:A,minute:M,second:S,millisecond:P,microsecond:k,nanosecond:R}=Oh(A,M,S,P,k,R),{deltaDays:B,hour:A,minute:M,second:S,millisecond:P,microsecond:k,nanosecond:R}}function aye(t,e,r,n,i,o,s,a,u,m,p,b,A,M,S,P,k,R,B,I,q){let $=Rg(b$(t,e,r,n,i,o,s,a,u,m),b$(p,b,A,M,S,P,k,R,B,I)),U,F,L,W,E,c,l,y,d,h;if(q)if(Xt(q)){let v=Fe("%Temporal.Duration%"),x=j(q,xe),g=new v(t,e,r,n,0,0,0,0,0,0),f=new v(p,b,A,M,0,0,0,0,0,0),w=typeof x!="string"?Nr(x,"dateAdd"):void 0,D=To(x,q,g,void 0,w),T=To(x,D,f,void 0,w),C=Rg("day",$),z=es(null);z.largestUnit=C,{years:U,months:F,weeks:L,days:W}=q0(x,q,T,z),{days:W,hours:E,minutes:c,seconds:l,milliseconds:y,microseconds:d,nanoseconds:h}=Af(W,K.default.add(K.default.BigInt(i),K.default.BigInt(S)),K.default.add(K.default.BigInt(o),K.default.BigInt(P)),K.default.add(K.default.BigInt(s),K.default.BigInt(k)),K.default.add(K.default.BigInt(a),K.default.BigInt(R)),K.default.add(K.default.BigInt(u),K.default.BigInt(B)),K.default.add(K.default.BigInt(m),K.default.BigInt(I)),$)}else{let v=Fe("%Temporal.Instant%"),x=j(q,Gr),g=j(q,xe),f=Bc(j(q,Qo),x,g,t,e,r,n,i,o,s,a,u,m),w=Bc(new v(f),x,g,p,b,A,M,S,P,k,R,B,I);$!=="year"&&$!=="month"&&$!=="week"&&$!=="day"?(U=0,F=0,L=0,W=0,{hours:E,minutes:c,seconds:l,milliseconds:y,microseconds:d,nanoseconds:h}=sL(j(q,ht),w,1,"nanosecond",$,"halfExpand")):{years:U,months:F,weeks:L,days:W,hours:E,minutes:c,seconds:l,milliseconds:y,microseconds:d,nanoseconds:h}=oye(j(q,ht),w,x,g,$,es(null))}else{if($==="year"||$==="month"||$==="week")throw new RangeError("relativeTo is required for years, months, or weeks arithmetic");U=F=L=0,{days:W,hours:E,minutes:c,seconds:l,milliseconds:y,microseconds:d,nanoseconds:h}=Af(n+M,K.default.add(K.default.BigInt(i),K.default.BigInt(S)),K.default.add(K.default.BigInt(o),K.default.BigInt(P)),K.default.add(K.default.BigInt(s),K.default.BigInt(k)),K.default.add(K.default.BigInt(a),K.default.BigInt(R)),K.default.add(K.default.BigInt(u),K.default.BigInt(B)),K.default.add(K.default.BigInt(m),K.default.BigInt(I)),$)}return xP(U,F,L,W,E,c,l,y,d,h),{years:U,months:F,weeks:L,days:W,hours:E,minutes:c,seconds:l,milliseconds:y,microseconds:d,nanoseconds:h}}function x$(t,e,r,n,i,o,s){let a=zn;a=K.default.add(a,K.default.BigInt(s)),a=K.default.add(a,K.default.multiply(K.default.BigInt(o),Ir)),a=K.default.add(a,K.default.multiply(K.default.BigInt(i),Oc)),a=K.default.add(a,K.default.multiply(K.default.BigInt(n),Zl)),a=K.default.add(a,K.default.multiply(K.default.BigInt(r),K.default.BigInt(6e10))),a=K.default.add(a,K.default.multiply(K.default.BigInt(e),K.default.BigInt(36e11)));let u=K.default.add(t,a);return xg(u),u}function E$(t,e,r,n,i,o,s,a,u,m,p,b,A,M,S,P,k,R,B,I,q){let $=M,{deltaDays:U,hour:F,minute:L,second:W,millisecond:E,microsecond:c,nanosecond:l}=sye(n,i,o,s,a,u,S,P,k,R,B,I);$+=U;let y=Fe("%Temporal.Duration%"),d=To(m,Dc(t,e,r,m),new y(p,b,A,$,0,0,0,0,0,0),q);return{year:j(d,We),month:j(d,Ve),day:j(d,Ze),hour:F,minute:L,second:W,millisecond:E,microsecond:c,nanosecond:l}}function Bc(t,e,r,n,i,o,s,a,u,m,p,b,A,M){let S=Fe("%Temporal.Duration%");if(Jl(n,i,o,s,0,0,0,0,0,0)===0)return x$(j(t,ht),a,u,m,p,b,A);let P=Qa(e,t,r),k=To(r,Dc(j(P,We),j(P,Ve),j(P,Ze),r),new S(n,i,o,s,0,0,0,0,0,0),M),R=Sa(j(k,We),j(k,Ve),j(k,Ze),j(P,Ot),j(P,Bt),j(P,Dt),j(P,Ct),j(P,Nt),j(P,jt),r);return x$(j(Ms(e,R,"compatible"),ht),a,u,m,p,b,A)}function hme(t,e,r,n){let i=t==="subtract"?-1:1,{years:o,months:s,weeks:a,days:u,hours:m,minutes:p,seconds:b,milliseconds:A,microseconds:M,nanoseconds:S}=Ng(r),P=aP(tr(n));return{years:o,months:s,weeks:a,days:u,hours:m,minutes:p,seconds:b,milliseconds:A,microseconds:M,nanoseconds:S}=aye(j(e,ys),j(e,ho),j(e,ia),j(e,gs),j(e,bs),j(e,vs),j(e,ws),j(e,_s),j(e,xs),j(e,Es),i*o,i*s,i*a,i*u,i*m,i*p,i*b,i*A,i*M,i*S,P),new(Fe("%Temporal.Duration%"))(o,s,a,u,m,p,b,A,M,S)}function pme(t,e,r){let n=t==="subtract"?-1:1,{hours:i,minutes:o,seconds:s,milliseconds:a,microseconds:u,nanoseconds:m}=function(A,M){let S=Ng(A);for(let P of M)if(S[P]!==0)throw new RangeError(`Duration field ${P} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);return S}(r,["years","months","weeks","days"]),p=x$(j(e,ht),n*i,n*o,n*s,n*a,n*u,n*m);return new(Fe("%Temporal.Instant%"))(p)}function mme(t,e,r,n){let i=t==="subtract"?-1:1,{years:o,months:s,weeks:a,days:u,hours:m,minutes:p,seconds:b,milliseconds:A,microseconds:M,nanoseconds:S}=Ng(r),P=tr(n),k=j(e,xe),{year:R,month:B,day:I,hour:q,minute:$,second:U,millisecond:F,microsecond:L,nanosecond:W}=E$(j(e,We),j(e,Ve),j(e,Ze),j(e,Ot),j(e,Bt),j(e,Dt),j(e,Ct),j(e,Nt),j(e,jt),k,i*o,i*s,i*a,i*u,i*m,i*p,i*b,i*A,i*M,i*S,P);return Sa(R,B,I,q,$,U,F,L,W,k)}function yme(t,e,r){let n=t==="subtract"?-1:1,{hours:i,minutes:o,seconds:s,milliseconds:a,microseconds:u,nanoseconds:m}=Ng(r),{hour:p,minute:b,second:A,millisecond:M,microsecond:S,nanosecond:P}=sye(j(e,Ot),j(e,Bt),j(e,Dt),j(e,Ct),j(e,Nt),j(e,jt),n*i,n*o,n*s,n*a,n*u,n*m);return{hour:p,minute:b,second:A,millisecond:M,microsecond:S,nanosecond:P}=RP(p,b,A,M,S,P,"reject"),new(Fe("%Temporal.PlainTime%"))(p,b,A,M,S,P)}function gme(t,e,r,n){let i=Ng(r);t==="subtract"&&(i={years:-i.years,months:-i.months,weeks:-i.weeks,days:-i.days,hours:-i.hours,minutes:-i.minutes,seconds:-i.seconds,milliseconds:-i.milliseconds,microseconds:-i.microseconds,nanoseconds:-i.nanoseconds});let{years:o,months:s,weeks:a,days:u,hours:m,minutes:p,seconds:b,milliseconds:A,microseconds:M,nanoseconds:S}=i;({days:u}=Af(u,m,p,b,A,M,S,"day"));let P=tr(n),k=j(e,xe),R=pi(k,["monthCode","year"]),B=Gt(e,R,[]),I=es(null);E1(I,B,[]),B.day=1;let q=qh(k,B),$=Jl(o,s,a,u,0,0,0,0,0,0),U=Nr(k,"dateAdd"),F=Fe("%Temporal.Duration%");if($<0){let E=To(k,q,new F(0,1,0,0,0,0,0,0,0,0),void 0,U),c=To(k,E,new F(0,0,0,-1,0,0,0,0,0,0),void 0,U);I.day=RS(k,c),q=qh(k,I)}let L=new F(o,s,a,u,0,0,0,0,0,0),W=G0(P);return kg(k,Gt(To(k,q,L,P,U),R,[]),W)}function bme(t,e,r,n){let i=t==="subtract"?-1:1,{years:o,months:s,weeks:a,days:u,hours:m,minutes:p,seconds:b,milliseconds:A,microseconds:M,nanoseconds:S}=Ng(r),P=tr(n),k=j(e,Gr),R=j(e,xe);return Po(Bc(j(e,Qo),k,R,i*o,i*s,i*a,i*u,i*m,i*p,i*b,i*A,i*M,i*S,P),k,R)}function Ya(t,e,r){if(K.default.equal(e,q1))return t;let{quotient:n,remainder:i}=ri(t,e);if(K.default.equal(i,zn))return t;let o=K.default.lessThan(i,zn)?-1:1,s=Mu(K.default.multiply(i,K.default.BigInt(2))),a=K.default.equal(s,e),u=K.default.greaterThan(s,e);switch(r){case"ceil":o>0&&(n=K.default.add(n,K.default.BigInt(o)));break;case"floor":o<0&&(n=K.default.add(n,K.default.BigInt(o)));break;case"expand":n=K.default.add(n,K.default.BigInt(o));break;case"trunc":break;case"halfCeil":(u||a&&o>0)&&(n=K.default.add(n,K.default.BigInt(o)));break;case"halfFloor":(u||a&&o<0)&&(n=K.default.add(n,K.default.BigInt(o)));break;case"halfExpand":(u||a)&&(n=K.default.add(n,K.default.BigInt(o)));break;case"halfTrunc":u&&(n=K.default.add(n,K.default.BigInt(o)));break;case"halfEven":(u||a&&K.default.toNumber(K.default.remainder(Mu(n),K.default.BigInt(2)))===1)&&(n=K.default.add(n,K.default.BigInt(o)))}return K.default.multiply(n,e)}function EP(t,e,r,n){let{remainder:i}=_g(t,Yl),o=K.default.subtract(t,i),s=Ya(i,K.default.BigInt(dye[r]*e),n);return K.default.add(o,s)}function cL(t,e,r,n,i,o,s,a,u,m,p,b,A=864e11){let{deltaDays:M,hour:S,minute:P,second:k,millisecond:R,microsecond:B,nanosecond:I}=fL(n,i,o,s,a,u,m,p,b,A),{year:q,month:$,day:U}=UP(t,e,r+M);return{year:q,month:$,day:U,hour:S,minute:P,second:k,millisecond:R,microsecond:B,nanosecond:I}}function fL(t,e,r,n,i,o,s,a,u,m=864e11){let p=zn;switch(a){case"day":case"hour":p=K.default.BigInt(t);case"minute":p=K.default.add(K.default.multiply(p,Hl),K.default.BigInt(e));case"second":p=K.default.add(K.default.multiply(p,Hl),K.default.BigInt(r));case"millisecond":p=K.default.add(K.default.multiply(p,Ir),K.default.BigInt(n));case"microsecond":p=K.default.add(K.default.multiply(p,Ir),K.default.BigInt(i));case"nanosecond":p=K.default.add(K.default.multiply(p,Ir),K.default.BigInt(o))}let b=a==="day"?m:dye[a],A=Ya(p,K.default.BigInt(b*s),u),M=K.default.toNumber(K.default.divide(A,K.default.BigInt(b)));switch(a){case"day":return{deltaDays:M,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return Oh(M,0,0,0,0,0);case"minute":return Oh(t,M,0,0,0,0);case"second":return Oh(t,e,M,0,0,0);case"millisecond":return Oh(t,e,r,M,0,0);case"microsecond":return Oh(t,e,r,n,M,0);case"nanosecond":return Oh(t,e,r,n,i,M);default:throw new Error(`Invalid unit ${a}`)}}function fP(t,e){return oL(j(t,We),j(t,Ve),j(t,Ze),j(e,We),j(e,Ve),j(e,Ze),"day").days}function Yo(t,e,r,n){let i=To(t,e,r,void 0,n);return{relativeTo:i,days:fP(e,i)}}function cye(t,e,r,n,i){let o=j(t,Gr),s=j(t,xe);return Po(Bc(j(t,Qo),o,s,e,r,n,i,0,0,0,0,0,0),o,s)}function fye(t,e,r,n,i,o,s,a,u,m,p,b,A,M){let S=t,P=e,k=r,R=n,B=i,I=o,q=s,$=a,U=u,F=m;if(!Qe(M)||b==="year"||b==="month"||b==="week"||b==="day"||b==="nanosecond"&&p===1)return{years:S,months:P,weeks:k,days:R,hours:B,minutes:I,seconds:q,milliseconds:$,microseconds:U,nanoseconds:F};let L=C1(0,B,I,q,$,U,F,0),W=R1(K.default.toNumber(L)),E=j(M,Gr),c=j(M,xe),l=Bc(j(M,Qo),E,c,S,P,k,R,0,0,0,0,0,0),y=Bc(new(Fe("%Temporal.Instant%"))(l),E,c,0,0,0,W,0,0,0,0,0,0),d=K.default.subtract(y,l);return K.default.greaterThanOrEqual(K.default.multiply(K.default.subtract(L,d),K.default.BigInt(W)),zn)&&({years:S,months:P,weeks:k,days:R}=aye(S,P,k,R,0,0,0,0,0,0,0,0,0,W,0,0,0,0,0,0,M),L=EP(K.default.subtract(L,d),p,b,A),{hours:B,minutes:I,seconds:q,milliseconds:$,microseconds:U,nanoseconds:F}=Af(0,0,0,0,0,0,K.default.toNumber(L),"hour")),{years:S,months:P,weeks:k,days:R,hours:B,minutes:I,seconds:q,milliseconds:$,microseconds:U,nanoseconds:F}}function $h(t,e,r,n,i,o,s,a,u,m,p,b,A,M){let S=t,P=e,k=r,R=n,B=i,I=o,q=s,$=a,U=u,F=K.default.BigInt(m),L=Fe("%Temporal.Duration%"),W,E,c,l,y=M;if(y){if(Qe(y))E=y,y=Zr(y);else if(!Xt(y))throw new TypeError("starting point must be PlainDate or ZonedDateTime");W=j(y,xe)}if(b==="year"||b==="month"||b==="week"||b==="day"){let d,h,v;F=C1(0,B,I,q,$,U,m,0),E&&(d=cye(E,S,P,k,R)),{days:h,nanoseconds:F,dayLengthNs:v}=nL(F,d),c=K.default.BigInt(v),R+=h,B=I=q=$=U=0}switch(b){case"year":{if(!W)throw new RangeError("A starting point is required for years rounding");let d=new L(S),h=typeof W!="string"?Nr(W,"dateAdd"):void 0,v=To(W,y,d,void 0,h),x=To(W,y,new L(S,P,k),void 0,h);y=v,R+=fP(v,x);let g=To(W,y,new L(0,0,0,R),void 0,h),f=es(null);f.largestUnit="year";let w=q0(W,y,g,f).years;S+=w;let D=y;y=To(W,y,new L(w),void 0,h),R-=fP(D,y);let T=new L(R<0?-1:1),{days:C}=Yo(W,y,T,h);C=mn(C);let z=K.default.multiply(K.default.BigInt(C),c);F=K.default.add(K.default.add(K.default.multiply(z,K.default.BigInt(S)),K.default.multiply(K.default.BigInt(R),c)),F);let G=Ya(F,K.default.multiply(z,K.default.BigInt(p)),A);l=Wl(F,z),S=K.default.toNumber(K.default.divide(G,z)),F=zn,P=k=R=0;break}case"month":{if(!W)throw new RangeError("A starting point is required for months rounding");let d=new L(S,P),h=typeof W!="string"?Nr(W,"dateAdd"):void 0,v=To(W,y,d,void 0,h),x=To(W,y,new L(S,P,k),void 0,h);y=v,R+=fP(v,x);let g=R1(R),f=new L(0,R<0?-1:1),w;for({relativeTo:y,days:w}=Yo(W,y,f,h);mn(R)>=mn(w);)P+=g,R-=w,{relativeTo:y,days:w}=Yo(W,y,f,h);w=mn(w);let D=K.default.multiply(K.default.BigInt(w),c);F=K.default.add(K.default.add(K.default.multiply(D,K.default.BigInt(P)),K.default.multiply(K.default.BigInt(R),c)),F);let T=Ya(F,K.default.multiply(D,K.default.BigInt(p)),A);l=Wl(F,D),P=K.default.toNumber(K.default.divide(T,D)),F=zn,k=R=0;break}case"week":{if(!W)throw new RangeError("A starting point is required for weeks rounding");let d=R1(R),h=new L(0,0,R<0?-1:1),v=typeof W!="string"?Nr(W,"dateAdd"):void 0,x;for({relativeTo:y,days:x}=Yo(W,y,h,v);mn(R)>=mn(x);)k+=d,R-=x,{relativeTo:y,days:x}=Yo(W,y,h,v);x=mn(x);let g=K.default.multiply(K.default.BigInt(x),c);F=K.default.add(K.default.add(K.default.multiply(g,K.default.BigInt(k)),K.default.multiply(K.default.BigInt(R),c)),F);let f=Ya(F,K.default.multiply(g,K.default.BigInt(p)),A);l=Wl(F,g),k=K.default.toNumber(K.default.divide(f,g)),F=zn,R=0;break}case"day":{let d=c;F=K.default.add(K.default.multiply(d,K.default.BigInt(R)),F);let h=Ya(F,K.default.multiply(d,K.default.BigInt(p)),A);l=Wl(F,d),R=K.default.toNumber(K.default.divide(h,d)),F=zn;break}case"hour":{let h=K.default.multiply(K.default.BigInt(B),K.default.BigInt(36e11));h=K.default.add(h,K.default.multiply(K.default.BigInt(I),K.default.BigInt(6e10))),h=K.default.add(h,K.default.multiply(K.default.BigInt(q),Zl)),h=K.default.add(h,K.default.multiply(K.default.BigInt($),Oc)),h=K.default.add(h,K.default.multiply(K.default.BigInt(U),Ir)),h=K.default.add(h,F),l=Wl(h,K.default.BigInt(36e11));let v=Ya(h,K.default.BigInt(36e11*p),A);B=K.default.toNumber(K.default.divide(v,K.default.BigInt(36e11))),F=zn,I=q=$=U=0;break}case"minute":{let h=K.default.multiply(K.default.BigInt(I),K.default.BigInt(6e10));h=K.default.add(h,K.default.multiply(K.default.BigInt(q),Zl)),h=K.default.add(h,K.default.multiply(K.default.BigInt($),Oc)),h=K.default.add(h,K.default.multiply(K.default.BigInt(U),Ir)),h=K.default.add(h,F),l=Wl(h,K.default.BigInt(6e10));let v=Ya(h,K.default.BigInt(6e10*p),A);I=K.default.toNumber(K.default.divide(v,K.default.BigInt(6e10))),F=zn,q=$=U=0;break}case"second":{let h=K.default.multiply(K.default.BigInt(q),Zl);h=K.default.add(h,K.default.multiply(K.default.BigInt($),Oc)),h=K.default.add(h,K.default.multiply(K.default.BigInt(U),Ir)),h=K.default.add(h,F),l=Wl(h,K.default.BigInt(1e9));let v=Ya(h,K.default.BigInt(1e9*p),A);q=K.default.toNumber(K.default.divide(v,K.default.BigInt(1e9))),F=zn,$=U=0;break}case"millisecond":{let h=K.default.multiply(K.default.BigInt($),Oc);h=K.default.add(h,K.default.multiply(K.default.BigInt(U),Ir)),h=K.default.add(h,F),l=Wl(h,K.default.BigInt(1e6));let v=Ya(h,K.default.BigInt(1e6*p),A);$=K.default.toNumber(K.default.divide(v,K.default.BigInt(1e6))),F=zn,U=0;break}case"microsecond":{let h=K.default.multiply(K.default.BigInt(U),Ir);h=K.default.add(h,F),l=Wl(h,K.default.BigInt(1e3));let v=Ya(h,K.default.BigInt(1e3*p),A);U=K.default.toNumber(K.default.divide(v,K.default.BigInt(1e3))),F=zn;break}case"nanosecond":l=K.default.toNumber(F),F=Ya(K.default.BigInt(F),K.default.BigInt(p),A)}return{years:S,months:P,weeks:k,days:R,hours:B,minutes:I,seconds:q,milliseconds:$,microseconds:U,nanoseconds:K.default.toNumber(F),total:l}}function j0(t,e,r,n,i,o){for(let[s,a]of[[t,n],[e,i],[r,o]])if(s!==a)return Ag(s-a);return 0}function _g(t,e){let{quotient:r,remainder:n}=ri(t,e);return K.default.lessThan(n,zn)&&(r=K.default.subtract(r,q1),n=K.default.add(n,e)),{quotient:r,remainder:n}}function M1(t,e){let{quotient:r,remainder:n}=ri(t,e);return Ic(n)||!pP(t)==!pP(e)?r:K.default.subtract(r,q1)}function Wl(t,e){let{quotient:r,remainder:n}=ri(t,e);return K.default.toNumber(r)+K.default.toNumber(n)/K.default.toNumber(e)}function SP(t){let e=lS(t);return globalThis.BigInt!==void 0?globalThis.BigInt(e.toString(10)):e}function lS(t){let e=t;if(typeof t=="object"){let r=t[Symbol.toPrimitive];r&&typeof r=="function"&&(e=TP(r,t,["number"]))}if(typeof e=="number")throw new TypeError("cannot convert number to bigint");return typeof e=="bigint"?K.default.BigInt(e.toString(10)):K.default.BigInt(e)}var uL=(()=>{let t=K.default.BigInt(Date.now()%1e6);return()=>{let e=K.default.BigInt(Date.now()),r=K.default.add(K.default.multiply(e,Oc),t);return t=K.default.remainder(e,Oc),K.default.greaterThan(r,I1)?I1:K.default.lessThan(r,hS)?hS:r}})();function N0(){return new Ome().resolvedOptions().timeZone}function Ag(t){return t<0?-1:t>0?1:t}function tr(t){if(t===void 0)return es(null);if(yn(t)&&t!==null)return t;throw new TypeError("Options parameter must be an object, not "+(t===null?"null":typeof t))}function N1(t,e){let r=es(null);return r[t]=e,r}function G0(t){let e=es(null);return E1(e,tr(t),[]),e}function F0(t,e,r,n){let i=t[e];if(i!==void 0){if(i=As(i),!r.includes(i))throw new RangeError(`${e} must be one of ${r.join(", ")}, not ${i}`);return i}return n}function Lh(t){return iXe.includes(Xl(t))}function Xl(t){return t.replace(/[A-Z]/g,e=>{let r=e.charCodeAt(0);return String.fromCharCode(r+32)})}var uye=new RegExp(`^${Rme.source}$`);function lye(t,e,r,n=t(e),i=t(r)){let o=K.default.BigInt(e),s=K.default.BigInt(r),a=n,u=i;for(;K.default.greaterThan(K.default.subtract(s,o),q1);){let m=K.default.divide(K.default.add(o,s),K.default.BigInt(2)),p=t(m);if(p===a)o=m,a=p;else{if(p!==u)throw new Error(`invalid state in bisection ${a} - ${p} - ${u}`);s=m,u=p}}return s}var dye={hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},hye=Symbol("date"),pye=Symbol("ym"),mye=Symbol("md"),yye=Symbol("time"),gye=Symbol("datetime"),bye=Symbol("instant"),A1=Symbol("original"),w1=Symbol("timezone"),Mf=Symbol("calendar-id"),vye=Symbol("locale"),S$=Symbol("options"),dS=t=>({value:t,enumerable:!0,writable:!1,configurable:!0}),P1=globalThis.Intl.DateTimeFormat,Uh=Object.assign,fXe=Object.prototype.hasOwnProperty,uXe=Reflect.apply;function v1(t,e){let r=t[e];return typeof r=="function"&&(r=new P1(t[vye],r(t[S$])),t[e]=r),r}function Og(t,e={}){if(!(this instanceof Og))return new Og(t,e);let r=e!==void 0,n=r?Uh({},e):{},i=new P1(t,n),o=i.resolvedOptions();if(r){let s=Uh({},o);for(let a in s)uXe(fXe,n,[a])||delete s[a];this[S$]=s}else this[S$]=n;this[vye]=o.locale,this[A1]=i,this[w1]=o.timeZone,this[Mf]=o.calendar,this[hye]=pXe,this[pye]=dXe,this[mye]=hXe,this[yye]=lXe,this[gye]=mXe,this[bye]=yXe}Object.defineProperty(Og,"name",{writable:!0,value:"DateTimeFormat"}),Og.supportedLocalesOf=function(t,e){return P1.supportedLocalesOf(t,e)};var u$={resolvedOptions:dS(function(){return this[A1].resolvedOptions()}),format:dS(function(e,...r){let{instant:n,formatter:i}=T1(e,this);return n&&i?i.format(n.epochMilliseconds):this[A1].format(e,...r)}),formatRange:dS(function(e,r){if(j1(e)||j1(r)){if(!wye(e,r))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");let{instant:n,formatter:i}=T1(e,this),{instant:o,formatter:s}=T1(r,this);if(n&&o&&i&&s&&i===s)return i.formatRange(n.epochMilliseconds,o.epochMilliseconds)}return this[A1].formatRange(e,r)})};"formatToParts"in P1.prototype&&(u$.formatToParts=dS(function(e,...r){let{instant:n,formatter:i}=T1(e,this);return n&&i?i.formatToParts(n.epochMilliseconds):this[A1].formatToParts(e,...r)})),"formatRangeToParts"in P1.prototype&&(u$.formatRangeToParts=dS(function(e,r){if(j1(e)||j1(r)){if(!wye(e,r))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");let{instant:n,formatter:i}=T1(e,this),{instant:o,formatter:s}=T1(r,this);if(n&&o&&i&&s&&i===s)return i.formatRangeToParts(n.epochMilliseconds,o.epochMilliseconds)}return this[A1].formatRangeToParts(e,r)})),Og.prototype=Object.create(P1.prototype,u$),Object.defineProperty(Og,"prototype",{writable:!1,enumerable:!1,configurable:!1});var Fh=Og;function OS(t={},e={}){let r=Uh({},t);for(let n of["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"])r[n]=n in e?e[n]:r[n],r[n]!==!1&&r[n]!==void 0||delete r[n];return r}function lXe(t){let e=OS(t,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});return dL(e)||(e=Uh({},e,{hour:"numeric",minute:"numeric",second:"numeric"})),e}function dXe(t){let e=OS(t,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"year"in e||"month"in e||(e=Uh(e,{year:"numeric",month:"numeric"})),e}function hXe(t){let e=OS(t,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"month"in e||"day"in e||(e=Uh({},e,{month:"numeric",day:"numeric"})),e}function pXe(t){let e=OS(t,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});return lL(e)||(e=Uh({},e,{year:"numeric",month:"numeric",day:"numeric"})),e}function mXe(t){let e=OS(t,{timeZoneName:!1});return dL(e)||lL(e)||(e=Uh({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function yXe(t){let e=t;return dL(e)||lL(e)||(e=Uh({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function lL(t){return"year"in t||"month"in t||"day"in t||"weekday"in t||"dateStyle"in t}function dL(t){return"hour"in t||"minute"in t||"second"in t||"timeStyle"in t||"dayPeriod"in t}function j1(t){return Xt(t)||Fn(t)||It(t)||Qe(t)||Rr(t)||Hi(t)||ji(t)}function wye(t,e){return!(!j1(t)||!j1(e))&&!(Fn(t)&&!Fn(e))&&!(Xt(t)&&!Xt(e))&&!(It(t)&&!It(e))&&!(Qe(t)&&!Qe(e))&&!(Rr(t)&&!Rr(e))&&!(Hi(t)&&!Hi(e))&&!(ji(t)&&!ji(e))}function T1(t,e){let r=Fe("%Temporal.PlainDateTime%");if(Fn(t)){let n=new r(1970,1,1,j(t,Ot),j(t,Bt),j(t,Dt),j(t,Ct),j(t,Nt),j(t,jt),e[Mf]);return{instant:Ms(e[w1],n,"compatible"),formatter:v1(e,yye)}}if(Rr(t)){let n=j(t,We),i=j(t,Ve),o=j(t,Ze),s=Io(j(t,xe));if(s!==e[Mf])throw new RangeError(`cannot format PlainYearMonth with calendar ${s} in locale with calendar ${e[Mf]}`);let a=new r(n,i,o,12,0,0,0,0,0,s);return{instant:Ms(e[w1],a,"compatible"),formatter:v1(e,pye)}}if(Hi(t)){let n=j(t,We),i=j(t,Ve),o=j(t,Ze),s=Io(j(t,xe));if(s!==e[Mf])throw new RangeError(`cannot format PlainMonthDay with calendar ${s} in locale with calendar ${e[Mf]}`);let a=new r(n,i,o,12,0,0,0,0,0,s);return{instant:Ms(e[w1],a,"compatible"),formatter:v1(e,mye)}}if(Xt(t)){let n=j(t,We),i=j(t,Ve),o=j(t,Ze),s=Io(j(t,xe));if(s!=="iso8601"&&s!==e[Mf])throw new RangeError(`cannot format PlainDate with calendar ${s} in locale with calendar ${e[Mf]}`);let a=new r(n,i,o,12,0,0,0,0,0,e[Mf]);return{instant:Ms(e[w1],a,"compatible"),formatter:v1(e,hye)}}if(It(t)){let n=j(t,We),i=j(t,Ve),o=j(t,Ze),s=j(t,Ot),a=j(t,Bt),u=j(t,Dt),m=j(t,Ct),p=j(t,Nt),b=j(t,jt),A=Io(j(t,xe));if(A!=="iso8601"&&A!==e[Mf])throw new RangeError(`cannot format PlainDateTime with calendar ${A} in locale with calendar ${e[Mf]}`);let M=t;return A==="iso8601"&&(M=new r(n,i,o,s,a,u,m,p,b,e[Mf])),{instant:Ms(e[w1],M,"compatible"),formatter:v1(e,gye)}}if(Qe(t))throw new TypeError("Temporal.ZonedDateTime not supported in DateTimeFormat methods. Use toLocaleString() instead.");return ji(t)?{instant:t,formatter:v1(e,bye)}:{}}var Ljt=Object.freeze({__proto__:null,DateTimeFormat:Fh}),kc=class{constructor(e){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");let r=lS(e);xg(r),td(this),Ft(this,ht,r)}get epochSeconds(){if(!ji(this))throw new TypeError("invalid receiver");let e=j(this,ht);return K.default.toNumber(M1(e,Zl))}get epochMilliseconds(){if(!ji(this))throw new TypeError("invalid receiver");let e=K.default.BigInt(j(this,ht));return K.default.toNumber(M1(e,Oc))}get epochMicroseconds(){if(!ji(this))throw new TypeError("invalid receiver");return SP(M1(K.default.BigInt(j(this,ht)),Ir))}get epochNanoseconds(){if(!ji(this))throw new TypeError("invalid receiver");return SP(K.default.BigInt(j(this,ht)))}add(e){if(!ji(this))throw new TypeError("invalid receiver");return pme("add",this,e)}subtract(e){if(!ji(this))throw new TypeError("invalid receiver");return pme("subtract",this,e)}until(e,r){if(!ji(this))throw new TypeError("invalid receiver");return ame("until",this,e,r)}since(e,r){if(!ji(this))throw new TypeError("invalid receiver");return ame("since",this,e,r)}round(e){if(!ji(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let r=typeof e=="string"?N1("smallestUnit",e):tr(e),n=L1(r),i=Pu(r,"halfExpand"),o=Pa(r,"smallestUnit","time",Tg);U1(n,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[o],!0);let s=EP(j(this,ht),n,o,i);return new kc(s)}equals(e){if(!ji(this))throw new TypeError("invalid receiver");let r=Au(e),n=j(this,ht),i=j(r,ht);return K.default.equal(K.default.BigInt(n),K.default.BigInt(i))}toString(e){if(!ji(this))throw new TypeError("invalid receiver");let r=tr(e),n=MS(r),i=Pu(r,"trunc"),o=Pa(r,"smallestUnit","time",void 0);if(o==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let s=r.timeZone;s!==void 0&&(s=Xo(s));let{precision:a,unit:u,increment:m}=AS(o,n),p=EP(j(this,ht),m,u,i);return Q0e(new kc(p),s,a)}toJSON(){if(!ji(this))throw new TypeError("invalid receiver");return Q0e(this,void 0,"auto")}toLocaleString(e,r){if(!ji(this))throw new TypeError("invalid receiver");return new Fh(e,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.Instant")}toZonedDateTime(e){if(!ji(this))throw new TypeError("invalid receiver");if(!yn(e))throw new TypeError("invalid argument in toZonedDateTime");let r=e.calendar;if(r===void 0)throw new TypeError("missing calendar property in toZonedDateTime");let n=Ta(r),i=e.timeZone;if(i===void 0)throw new TypeError("missing timeZone property in toZonedDateTime");let o=Xo(i);return Po(j(this,ht),o,n)}toZonedDateTimeISO(e){if(!ji(this))throw new TypeError("invalid receiver");let r=Xo(e);return Po(j(this,ht),r,"iso8601")}static fromEpochSeconds(e){let r=k1(e),n=K.default.multiply(K.default.BigInt(r),Zl);return xg(n),new kc(n)}static fromEpochMilliseconds(e){let r=k1(e),n=K.default.multiply(K.default.BigInt(r),Oc);return xg(n),new kc(n)}static fromEpochMicroseconds(e){let r=lS(e),n=K.default.multiply(r,Ir);return xg(n),new kc(n)}static fromEpochNanoseconds(e){let r=lS(e);return xg(r),new kc(r)}static from(e){return ji(e)?new kc(j(e,ht)):Au(e)}static compare(e,r){let n=Au(e),i=Au(r),o=j(n,ht),s=j(i,ht);return K.default.lessThan(o,s)?-1:K.default.greaterThan(o,s)?1:0}};ed(kc,"Temporal.Instant");var _ye=Array.prototype.includes,gXe=Array.prototype.push,bXe=globalThis.Intl.DateTimeFormat,vXe=Array.prototype.sort,wXe=Math.abs,_Xe=Math.floor,l$=Object.create,M$=Object.entries,xye=Set,vme=Reflect.ownKeys,Jo=Set.prototype.add,Eye=Set.prototype.values,xn={},_n=class{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: id is required");let r=As(e);if(!Lh(r))throw new RangeError(`invalid calendar identifier ${r}`);td(this),Ft(this,kn,Xl(r))}get id(){if(!Ln(this))throw new TypeError("invalid receiver");return j(this,kn)}dateFromFields(e,r){if(!Ln(this))throw new TypeError("invalid receiver");if(!yn(e))throw new TypeError("invalid fields");let n=tr(r),i=j(this,kn);return xn[i].dateFromFields(e,n,i)}yearMonthFromFields(e,r){if(!Ln(this))throw new TypeError("invalid receiver");if(!yn(e))throw new TypeError("invalid fields");let n=tr(r),i=j(this,kn);return xn[i].yearMonthFromFields(e,n,i)}monthDayFromFields(e,r){if(!Ln(this))throw new TypeError("invalid receiver");if(!yn(e))throw new TypeError("invalid fields");let n=tr(r),i=j(this,kn);return xn[i].monthDayFromFields(e,n,i)}fields(e){if(!Ln(this))throw new TypeError("invalid receiver");let r=[],n=new Set(["year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond"]);for(let i of e){if(typeof i!="string")throw new TypeError("invalid fields");if(!n.has(i))throw new RangeError(`invalid field name ${i}`);n.delete(i),gXe.call(r,i)}return xn[j(this,kn)].fields(r)}mergeFields(e,r){if(!Ln(this))throw new TypeError("invalid receiver");let n=J0e(e),i=l$(null);E1(i,n,[],[void 0]);let o=J0e(r),s=l$(null);E1(s,o,[],[void 0]);let a=vme(s),u=xn[j(this,kn)].fieldKeysToIgnore(a),m=l$(null),p=vme(i);for(let b of p){let A;A=nt(_ye,u,[b])?s[b]:i[b],A!==void 0&&(m[b]=A)}return E1(m,s,[]),m}dateAdd(e,r,n){if(!Ln(this))throw new TypeError("invalid receiver");let i=Zr(e),o=S1(r),s=ni(tr(n)),{days:a}=Af(j(o,gs),j(o,bs),j(o,vs),j(o,ws),j(o,_s),j(o,xs),j(o,Es),"day"),u=j(this,kn);return xn[u].dateAdd(i,j(o,ys),j(o,ho),j(o,ia),a,s,u)}dateUntil(e,r,n){if(!Ln(this))throw new TypeError("invalid receiver");let i=Zr(e),o=Zr(r),s=Pa(tr(n),"largestUnit","date","auto");s==="auto"&&(s="day");let{years:a,months:u,weeks:m,days:p}=xn[j(this,kn)].dateUntil(i,o,s);return new(Fe("%Temporal.Duration%"))(a,u,m,p,0,0,0,0,0,0)}year(e){let r=e;if(!Ln(this))throw new TypeError("invalid receiver");return Rr(r)||(r=Zr(r)),xn[j(this,kn)].year(r)}month(e){let r=e;if(!Ln(this))throw new TypeError("invalid receiver");if(Hi(r))throw new TypeError("use monthCode on PlainMonthDay instead");return Rr(r)||(r=Zr(r)),xn[j(this,kn)].month(r)}monthCode(e){let r=e;if(!Ln(this))throw new TypeError("invalid receiver");return Rr(r)||Hi(r)||(r=Zr(r)),xn[j(this,kn)].monthCode(r)}day(e){let r=e;if(!Ln(this))throw new TypeError("invalid receiver");return Hi(r)||(r=Zr(r)),xn[j(this,kn)].day(r)}era(e){let r=e;if(!Ln(this))throw new TypeError("invalid receiver");return Rr(r)||(r=Zr(r)),xn[j(this,kn)].era(r)}eraYear(e){let r=e;if(!Ln(this))throw new TypeError("invalid receiver");return Rr(r)||(r=Zr(r)),xn[j(this,kn)].eraYear(r)}dayOfWeek(e){if(!Ln(this))throw new TypeError("invalid receiver");let r=Zr(e);return xn[j(this,kn)].dayOfWeek(r)}dayOfYear(e){if(!Ln(this))throw new TypeError("invalid receiver");let r=Zr(e);return xn[j(this,kn)].dayOfYear(r)}weekOfYear(e){if(!Ln(this))throw new TypeError("invalid receiver");let r=Zr(e);return xn[j(this,kn)].weekOfYear(r)}yearOfWeek(e){if(!Ln(this))throw new TypeError("invalid receiver");let r=Zr(e);return xn[j(this,kn)].yearOfWeek(r)}daysInWeek(e){if(!Ln(this))throw new TypeError("invalid receiver");let r=Zr(e);return xn[j(this,kn)].daysInWeek(r)}daysInMonth(e){let r=e;if(!Ln(this))throw new TypeError("invalid receiver");return Rr(r)||(r=Zr(r)),xn[j(this,kn)].daysInMonth(r)}daysInYear(e){let r=e;if(!Ln(this))throw new TypeError("invalid receiver");return Rr(r)||(r=Zr(r)),xn[j(this,kn)].daysInYear(r)}monthsInYear(e){let r=e;if(!Ln(this))throw new TypeError("invalid receiver");return Rr(r)||(r=Zr(r)),xn[j(this,kn)].monthsInYear(r)}inLeapYear(e){let r=e;if(!Ln(this))throw new TypeError("invalid receiver");return Rr(r)||(r=Zr(r)),xn[j(this,kn)].inLeapYear(r)}toString(){if(!Ln(this))throw new TypeError("invalid receiver");return j(this,kn)}toJSON(){if(!Ln(this))throw new TypeError("invalid receiver");return j(this,kn)}static from(e){return F1(Ta(e))}};function hL(t){if(!t.startsWith("M"))throw new RangeError(`Invalid month code: ${t}.  Month codes must start with M.`);let e=+t.slice(1);if(isNaN(e))throw new RangeError(`Invalid month code: ${t}`);return e}function Nh(t,e=!1){return`M${t.toString().padStart(2,"0")}${e?"L":""}`}function uP(t,e,r=12){let{month:n,monthCode:i}=t;if(i===void 0){if(n===void 0)throw new TypeError("Either month or monthCode are required");e==="reject"&&Ro(n,1,r),e==="constrain"&&(n=Ma(n,1,r)),i=Nh(n)}else{let o=hL(i);if(n!==void 0&&n!==o)throw new RangeError(`monthCode ${i} and month ${n} must match if both are present`);if(i!==Nh(o))throw new RangeError(`Invalid month code: ${i}`);if(n=o,n<1||n>r)throw new RangeError(`Invalid monthCode: ${i}`)}return{...t,month:n,monthCode:i}}ed(_n,"Temporal.Calendar"),On("Temporal.Calendar.from",_n.from),On("Temporal.Calendar.prototype.dateAdd",_n.prototype.dateAdd),On("Temporal.Calendar.prototype.dateFromFields",_n.prototype.dateFromFields),On("Temporal.Calendar.prototype.dateUntil",_n.prototype.dateUntil),On("Temporal.Calendar.prototype.day",_n.prototype.day),On("Temporal.Calendar.prototype.dayOfWeek",_n.prototype.dayOfWeek),On("Temporal.Calendar.prototype.dayOfYear",_n.prototype.dayOfYear),On("Temporal.Calendar.prototype.daysInMonth",_n.prototype.daysInMonth),On("Temporal.Calendar.prototype.daysInWeek",_n.prototype.daysInWeek),On("Temporal.Calendar.prototype.daysInYear",_n.prototype.daysInYear),On("Temporal.Calendar.prototype.era",_n.prototype.era),On("Temporal.Calendar.prototype.eraYear",_n.prototype.eraYear),On("Temporal.Calendar.prototype.fields",_n.prototype.fields),On("Temporal.Calendar.prototype.inLeapYear",_n.prototype.inLeapYear),On("Temporal.Calendar.prototype.mergeFields",_n.prototype.mergeFields),On("Temporal.Calendar.prototype.month",_n.prototype.month),On("Temporal.Calendar.prototype.monthCode",_n.prototype.monthCode),On("Temporal.Calendar.prototype.monthDayFromFields",_n.prototype.monthDayFromFields),On("Temporal.Calendar.prototype.monthsInYear",_n.prototype.monthsInYear),On("Temporal.Calendar.prototype.weekOfYear",_n.prototype.weekOfYear),On("Temporal.Calendar.prototype.year",_n.prototype.year),On("Temporal.Calendar.prototype.yearMonthFromFields",_n.prototype.yearMonthFromFields),On("Temporal.Calendar.prototype.yearOfWeek",_n.prototype.yearOfWeek),xn.iso8601={dateFromFields(t,e,r){let n=Gt(t,["day","month","monthCode","year"],["year","day"]),i=ni(e);n=uP(n);let{year:o,month:s,day:a}=n;return{year:o,month:s,day:a}=yP(o,s,a,i),Dc(o,s,a,r)},yearMonthFromFields(t,e,r){let n=Gt(t,["month","monthCode","year"],["year"]),i=ni(e);n=uP(n);let{year:o,month:s}=n;return{year:o,month:s}=function(u,m,p){let b=u,A=m;switch(p){case"reject":Ql(b,A,1);break;case"constrain":({year:b,month:A}=tye(b,A))}return{year:b,month:A}}(o,s,i),mS(o,s,r,1)},monthDayFromFields(t,e,r){let n=Gt(t,["day","month","monthCode","year"],["day"]),i=ni(e);if(n.month!==void 0&&n.year===void 0&&n.monthCode===void 0)throw new TypeError("either year or monthCode required with month");let o=n.monthCode===void 0;n=uP(n);let{month:s,day:a,year:u}=n;return{month:s,day:a}=yP(o?u:1972,s,a,i),pS(s,a,r,1972)},fields:t=>t,fieldKeysToIgnore(t){let e=new xye;for(let r=0;r<t.length;r++){let n=t[r];nt(Jo,e,[n]),n==="month"?nt(Jo,e,["monthCode"]):n==="monthCode"&&nt(Jo,e,["month"])}return[...nt(Eye,e,[])]},dateAdd(t,e,r,n,i,o,s){let a=j(t,We),u=j(t,Ve),m=j(t,Ze);return{year:a,month:u,day:m}=Mg(a,u,m,e,r,n,i,o),Dc(a,u,m,s)},dateUntil:(t,e,r)=>oL(j(t,We),j(t,Ve),j(t,Ze),j(e,We),j(e,Ve),j(e,Ze),r),year:t=>j(t,We),era(){},eraYear(){},month:t=>j(t,Ve),monthCode:t=>Nh(j(t,Ve)),day:t=>j(t,Ze),dayOfWeek:t=>_$(j(t,We),j(t,Ve),j(t,Ze)),dayOfYear:t=>_P(j(t,We),j(t,Ve),j(t,Ze)),weekOfYear:t=>ome(j(t,We),j(t,Ve),j(t,Ze)).week,yearOfWeek:t=>ome(j(t,We),j(t,Ve),j(t,Ze)).year,daysInWeek:()=>7,daysInMonth:t=>Ch(j(t,We),j(t,Ve)),daysInYear(t){let e=t;return Ji(e,We)||(e=Zr(e)),U0(j(e,We))?366:365},monthsInYear:()=>12,inLeapYear(t){let e=t;return Ji(e,We)||(e=Zr(e)),U0(j(e,We))}};var pn=class{constructor(e){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,this.now=globalThis.performance?globalThis.performance.now():Date.now(),e!==void 0){let r=0;for(let n of e.map.entries()){if(++r>pn.MAX_CACHE_ENTRIES)break;this.map.set(...n)}}}get(e){let r=this.map.get(e);return r&&(this.hits++,this.report()),this.calls++,r}set(e,r){this.map.set(e,r),this.misses++,this.report()}report(){}setObject(e){if(pn.objectMap.get(e))throw new RangeError("object already cached");pn.objectMap.set(e,this),this.report()}static getCacheForObject(e){let r=pn.objectMap.get(e);return r||(r=new pn,pn.objectMap.set(e,r)),r}};function Sye({isoYear:t,isoMonth:e,isoDay:r}){return`${jg(t)}-${En(e)}-${En(r)}T00:00Z`}function d$(t,e){return{years:t.year-e.year,months:t.month-e.month,days:t.day-e.day}}pn.objectMap=new WeakMap,pn.MAX_CACHE_ENTRIES=1e3;var z0=class{constructor(){this.eraLength="short",this.hasEra=!0,this.erasBeginMidYear=!1}getFormatter(){return this.formatter===void 0&&(this.formatter=new bXe(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:this.eraLength,timeZone:"UTC"})),this.formatter}isoToCalendarDate(e,r){let{year:n,month:i,day:o}=e,s=JSON.stringify({func:"isoToCalendarDate",isoYear:n,isoMonth:i,isoDay:o,id:this.id}),a=r.get(s);if(a)return a;let u=this.getFormatter(),m,p;try{p=Sye({isoYear:n,isoMonth:i,isoDay:o}),m=u.formatToParts(new Date(p))}catch{throw new RangeError(`Invalid ISO date: ${JSON.stringify({isoYear:n,isoMonth:i,isoDay:o})}`)}let b={};for(let{type:M,value:S}of m){if(M==="year"&&(b.eraYear=+S),M==="relatedYear"&&(b.eraYear=+S),M==="month"){let P=/^([0-9]*)(.*?)$/.exec(S);if(!P||P.length!=3||!P[1]&&!P[2])throw new RangeError(`Unexpected month: ${S}`);if(b.month=P[1]?+P[1]:1,b.month<1)throw new RangeError(`Invalid month ${S} from ${p}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(b.month>13)throw new RangeError(`Invalid month ${S} from ${p}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);P[2]&&(b.monthExtra=P[2])}M==="day"&&(b.day=+S),this.hasEra&&M==="era"&&S!=null&&S!==""&&(S=S.split(" (")[0],b.era=S.normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(" ","-").toLowerCase())}if(b.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.reviseIntlEra){let{era:M,eraYear:S}=this.reviseIntlEra(b,e);b.era=M,b.eraYear=S}this.checkIcuBugs&&this.checkIcuBugs(e);let A=this.adjustCalendarDate(b,r,"constrain",!0);if(A.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(e)}`);if(A.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(e)}`);if(A.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(e)}`);return r.set(s,A),["constrain","reject"].forEach(M=>{let S=JSON.stringify({func:"calendarToIsoDate",year:A.year,month:A.month,day:A.day,overflow:M,id:this.id});r.set(S,e)}),A}validateCalendarDate(e){let{era:r,month:n,year:i,day:o,eraYear:s,monthCode:a,monthExtra:u}=e;if(u!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(i===void 0&&s===void 0)throw new TypeError("year or eraYear is required");if(n===void 0&&a===void 0)throw new TypeError("month or monthCode is required");if(o===void 0)throw new RangeError("Missing day");if(a!==void 0){if(typeof a!="string")throw new RangeError("monthCode must be a string, not "+typeof a);if(!/^M([01]?\d)(L?)$/.test(a))throw new RangeError(`Invalid monthCode: ${a}`)}if(this.constantEra){if(r!==void 0&&r!==this.constantEra)throw new RangeError(`era must be ${this.constantEra}, not ${r}`);if(s!==void 0&&i!==void 0&&s!==i)throw new RangeError(`eraYear ${s} does not match year ${i}`)}if(this.hasEra&&e.era===void 0!=(e.eraYear===void 0))throw new RangeError("properties 'era' and 'eraYear' must be provided together")}adjustCalendarDate(e,r,n="constrain",i=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let o=e;if(this.validateCalendarDate(o),this.constantEra){let{year:m,eraYear:p}=o;o={...o,era:this.constantEra,year:m!==void 0?m:p,eraYear:p!==void 0?p:m}}let s=this.monthsInYear(o,r),{month:a,monthCode:u}=o;return{month:a,monthCode:u}=uP(o,n,s),{...o,month:a,monthCode:u}}regulateMonthDayNaive(e,r,n){let i=this.monthsInYear(e,n),{month:o,day:s}=e;return r==="reject"?(Ro(o,1,i),Ro(s,1,this.maximumMonthLength(e))):(o=Ma(o,1,i),s=Ma(s,1,this.maximumMonthLength({...e,month:o}))),{...e,month:o,day:s}}calendarToIsoDate(e,r="constrain",n){let i=e,o=this.adjustCalendarDate(e,n,r,!1);o=this.regulateMonthDayNaive(o,r,n);let{year:s,month:a,day:u}=o,m=JSON.stringify({func:"calendarToIsoDate",year:s,month:a,day:u,overflow:r,id:this.id}),p,b=n.get(m);if(b||i.year!==void 0&&i.month!==void 0&&i.day!==void 0&&(i.year!==o.year||i.month!==o.month||i.day!==o.day)&&(p=JSON.stringify({func:"calendarToIsoDate",year:i.year,month:i.month,day:i.day,overflow:r,id:this.id}),b=n.get(p),b))return b;let A=this.estimateIsoDate({year:s,month:a,day:u}),M=B=>{let I=this.addDaysIso(A,B);if(o.day>this.minimumMonthLength(o)){let q=this.isoToCalendarDate(I,n);for(;q.month!==a||q.year!==s;){if(r==="reject")throw new RangeError(`day ${u} does not exist in month ${a} of year ${s}`);I=this.addDaysIso(I,-1),q=this.isoToCalendarDate(I,n)}}return I},S=0,P=this.isoToCalendarDate(A,n),k=d$(o,P);if(k.years!==0||k.months!==0||k.days!==0){let B=365*k.years+30*k.months+k.days;A=this.addDaysIso(A,B),P=this.isoToCalendarDate(A,n),k=d$(o,P),k.years===0&&k.months===0?A=M(k.days):S=this.compareCalendarDates(o,P)}let R=8;for(;S;){A=this.addDaysIso(A,S*R);let B=P;P=this.isoToCalendarDate(A,n);let I=S;if(S=this.compareCalendarDates(o,P),S){if(k=d$(o,P),k.years===0&&k.months===0)A=M(k.days),S=0;else if(I&&S!==I)if(R>1)R/=2;else{if(r==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...i})}`);this.compareCalendarDates(P,B)>0&&(A=this.addDaysIso(A,-1)),S=0}}}if(n.set(m,A),p&&n.set(p,A),o.year===void 0||o.month===void 0||o.day===void 0||o.monthCode===void 0||this.hasEra&&(o.era===void 0||o.eraYear===void 0))throw new RangeError("Unexpected missing property");return A}temporalToCalendarDate(e,r){let n={year:j(e,We),month:j(e,Ve),day:j(e,Ze)};return this.isoToCalendarDate(n,r)}compareCalendarDates(e,r){let n=Gt(e,["day","month","year"],["day","month","year"]),i=Gt(r,["day","month","year"],["day","month","year"]);return n.year!==i.year?Ag(n.year-i.year):n.month!==i.month?Ag(n.month-i.month):n.day!==i.day?Ag(n.day-i.day):0}regulateDate(e,r="constrain",n){let i=this.calendarToIsoDate(e,r,n);return this.isoToCalendarDate(i,n)}addDaysIso(e,r){return Mg(e.year,e.month,e.day,0,0,0,r,"constrain")}addDaysCalendar(e,r,n){let i=this.calendarToIsoDate(e,"constrain",n),o=this.addDaysIso(i,r);return this.isoToCalendarDate(o,n)}addMonthsCalendar(e,r,n,i){let o=e,{day:s}=o;for(let a=0,u=wXe(r);a<u;a++){let{month:m}=o,p=o,b=r<0?-Math.max(s,this.daysInPreviousMonth(o,i)):this.daysInMonth(o,i),A=this.calendarToIsoDate(o,"constrain",i),M=this.addDaysIso(A,b);if(o=this.isoToCalendarDate(M,i),r>0){let S=this.monthsInYear(p,i);for(;o.month-1!=m%S;)M=this.addDaysIso(M,-1),o=this.isoToCalendarDate(M,i)}o.day!==s&&(o=this.regulateDate({...o,day:s},"constrain",i))}if(n==="reject"&&o.day!==s)throw new RangeError(`Day ${s} does not exist in resulting calendar month`);return o}addCalendar(e,{years:r=0,months:n=0,weeks:i=0,days:o=0},s,a){let{year:u,day:m,monthCode:p}=e,b=this.adjustCalendarDate({year:u+r,monthCode:p,day:m},a),A=this.addMonthsCalendar(b,n,s,a),M=o+7*i;return this.addDaysCalendar(A,M,a)}untilCalendar(e,r,n,i){let o=0,s=0,a=0,u=0;switch(n){case"day":o=this.calendarDaysUntil(e,r,i);break;case"week":{let m=this.calendarDaysUntil(e,r,i);o=m%7,s=(m-o)/7;break}case"month":case"year":{let m=this.compareCalendarDates(r,e);if(!m)return{years:0,months:0,weeks:0,days:0};let p=r.year-e.year,b=r.day-e.day;if(n==="year"&&p){let S=0;r.monthCode>e.monthCode&&(S=1),r.monthCode<e.monthCode&&(S=-1),S||(S=Math.sign(b)),u=S*m<0?p-m:p}let A,M=u?this.addCalendar(e,{years:u},"constrain",i):e;do a+=m,A=M,M=this.addMonthsCalendar(A,m,"constrain",i),M.day!==e.day&&(M=this.regulateDate({...M,day:e.day},"constrain",i));while(this.compareCalendarDates(r,M)*m>=0);a-=m,o=this.calendarDaysUntil(A,r,i);break}}return{years:u,months:a,weeks:s,days:o}}daysInMonth(e,r){let{day:n}=e,i=this.maximumMonthLength(e),o=this.minimumMonthLength(e);if(o===i)return o;let s=n<=i-o?i:o,a=this.calendarToIsoDate(e,"constrain",r),u=this.addDaysIso(a,s),m=this.isoToCalendarDate(u,r),p=this.addDaysIso(u,-m.day);return this.isoToCalendarDate(p,r).day}daysInPreviousMonth(e,r){let{day:n,month:i,year:o}=e,s={year:i>1?o:o-1,month:i,day:1},a=i>1?i-1:this.monthsInYear(s,r);s={...s,month:a};let u=this.minimumMonthLength(s),m=this.maximumMonthLength(s);if(u===m)return m;let p=this.calendarToIsoDate(e,"constrain",r),b=this.addDaysIso(p,-n);return this.isoToCalendarDate(b,r).day}startOfCalendarYear(e){return{year:e.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(e){return{year:e.year,month:e.month,day:1}}calendarDaysUntil(e,r,n){let i=this.calendarToIsoDate(e,"constrain",n),o=this.calendarToIsoDate(r,"constrain",n);return this.isoDaysUntil(i,o)}isoDaysUntil(e,r){return oL(e.year,e.month,e.day,r.year,r.month,r.day,"day").days}monthDayFromFields(e,r,n){let i,o,s,a,u,{monthCode:m,day:p}=e;if(m===void 0){let{year:M,era:S,eraYear:P}=e;if(M===void 0&&(S===void 0||P===void 0))throw new TypeError("when `monthCode` is omitted, `year` (or `era` and `eraYear`) and `month` are required");({monthCode:m,day:p}=this.isoToCalendarDate(this.calendarToIsoDate(e,r,n),n))}let b=this.isoToCalendarDate({year:1972,month:12,day:31},n),A=b.monthCode>m||b.monthCode===m&&b.day>=p?b.year:b.year-1;for(let M=0;M<100;M++){let S=this.adjustCalendarDate({day:p,monthCode:m,year:A-M},n),P=this.calendarToIsoDate(S,"constrain",n),k=this.isoToCalendarDate(P,n);if({year:i,month:o,day:s}=P,k.monthCode===m&&k.day===p)return{month:o,day:s,year:i};r==="constrain"&&(a===void 0||k.monthCode===a.monthCode&&k.day>a.day)&&(a=k,u=P)}if(r==="constrain"&&u!==void 0)return u;throw new RangeError(`No recent ${this.id} year with monthCode ${m} and day ${p}`)}},A$=class extends z0{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}},this.hasEra=!1}inLeapYear(e){let{year:r}=e;return(7*r+1)%19<7}monthsInYear(e){return this.inLeapYear(e)?13:12}minimumMonthLength(e){return this.minMaxMonthLength(e,"min")}maximumMonthLength(e){return this.minMaxMonthLength(e,"max")}minMaxMonthLength(e,r){let{month:n,year:i}=e,o=this.getMonthCode(i,n),s=M$(this.months).find(u=>u[1].monthCode===o);if(s===void 0)throw new RangeError(`unmatched Hebrew month: ${n}`);let a=s[1].days;return typeof a=="number"?a:a[r]}estimateIsoDate(e){let{year:r}=e;return{year:r-3760,month:1,day:1}}getMonthCode(e,r){return this.inLeapYear({year:e})?r===6?Nh(5,!0):Nh(r<6?r:r-1):Nh(r)}adjustCalendarDate(e,r,n="constrain",i=!1){let{year:o,eraYear:s,month:a,monthCode:u,day:m,monthExtra:p}=e;if(o===void 0&&s!==void 0&&(o=s),s===void 0&&o!==void 0&&(s=o),i){if(p){let b=this.months[p];if(!b)throw new RangeError(`Unrecognized month from formatToParts: ${p}`);a=this.inLeapYear({year:o})?b.leap:b.regular}return u=this.getMonthCode(o,a),{year:o,month:a,day:m,era:void 0,eraYear:s,monthCode:u}}if(this.validateCalendarDate(e),a===void 0)if(u.endsWith("L")){if(u!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${u}`);if(a=6,!this.inLeapYear({year:o})){if(n==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${o} which is not a leap year`);a=6,u="M06"}}else{a=hL(u),this.inLeapYear({year:o})&&a>=6&&a++;let b=this.monthsInYear({year:o});if(a<1||a>b)throw new RangeError(`Invalid monthCode: ${u}`)}else if(n==="reject"?(Ro(a,1,this.monthsInYear({year:o})),Ro(m,1,this.maximumMonthLength({year:o,month:a}))):(a=Ma(a,1,this.monthsInYear({year:o})),m=Ma(m,1,this.maximumMonthLength({year:o,month:a}))),u===void 0)u=this.getMonthCode(o,a);else if(this.getMonthCode(o,a)!==u)throw new RangeError(`monthCode ${u} doesn't correspond to month ${a} in Hebrew year ${o}`);return{...e,day:m,month:a,monthCode:u,year:o,eraYear:s}}},K0=class extends z0{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425,this.constantEra="ah"}inLeapYear(e,r){return this.daysInMonth({year:e.year,month:12,day:1},r)===30}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}estimateIsoDate(e){let{year:r}=this.adjustCalendarDate(e);return{year:_Xe(r*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}},MP=class extends K0{constructor(){super(...arguments),this.id="islamic"}},P$=class extends K0{constructor(){super(...arguments),this.id="islamic-umalqura"}},T$=class extends K0{constructor(){super(...arguments),this.id="islamic-tbla"}},R$=class extends K0{constructor(){super(...arguments),this.id="islamic-civil"}},I$=class extends K0{constructor(){super(...arguments),this.id="islamic-rgsa"}},k$=class extends K0{constructor(){super(...arguments),this.id="islamicc"}},O$=class extends z0{constructor(){super(...arguments),this.id="persian",this.calendarType="solar",this.constantEra="ap"}inLeapYear(e,r){return MP.prototype.inLeapYear.call(this,e,r)}monthsInYear(){return 12}minimumMonthLength(e){let{month:r}=e;return r===12?29:r<=6?31:30}maximumMonthLength(e){let{month:r}=e;return r===12?30:r<=6?31:30}estimateIsoDate(e){let{year:r}=this.adjustCalendarDate(e);return{year:r+621,month:1,day:1}}},B$=class extends z0{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.constantEra="saka",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(e){return Mye(e.year+78)}monthsInYear(){return 12}minimumMonthLength(e){return this.getMonthInfo(e).length}maximumMonthLength(e){return this.getMonthInfo(e).length}getMonthInfo(e){let{month:r}=e,n=this.months[r];if(n===void 0)throw new RangeError(`Invalid month: ${r}`);return this.inLeapYear(e)&&n.leap&&(n=n.leap),n}estimateIsoDate(e){let r=this.adjustCalendarDate(e),n=this.getMonthInfo(r);return Mg(r.year+78+(n.nextYear?1:0),n.month,n.day,0,0,0,r.day-1,"constrain")}checkIcuBugs(e){if(this.vulnerableToBceBug&&e.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}};function Mye(t){return t%4==0&&(t%100!=0||t%400==0)}var Bg=class extends z0{constructor(e,r){super(),this.calendarType="solar",this.v8IsVulnerableToJulianBug=new Date("+001001-01-01T00:00Z").toLocaleDateString("en-US-u-ca-japanese",{timeZone:"UTC"}).startsWith("12"),this.calendarIsVulnerableToJulianBug=!1,this.id=e;let{eras:n,anchorEra:i}=function(s){let a,u=s;if(u.length===0)throw new RangeError("Invalid era data: eras are required");if(u.length===1&&u[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(u.length===1&&!u[0].name)throw new RangeError("Invalid era data: at least one named era is required");if(u.filter(p=>p.reverseOf!=null).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");u.forEach(p=>{if(p.isAnchor||!p.anchorEpoch&&!p.reverseOf){if(a)throw new RangeError("Invalid era data: cannot have multiple anchor eras");a=p,p.anchorEpoch={year:p.hasYearZero?0:1}}else if(!p.name)throw new RangeError("If era name is blank, it must be the anchor era")}),u=u.filter(p=>p.name),u.forEach(p=>{let{reverseOf:b}=p;if(b){let A=u.find(M=>M.name===b);if(A===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${b}`);p.reverseOf=A,p.anchorEpoch=A.anchorEpoch,p.isoEpoch=A.isoEpoch}p.anchorEpoch.month===void 0&&(p.anchorEpoch.month=1),p.anchorEpoch.day===void 0&&(p.anchorEpoch.day=1)}),vXe.call(u,(p,b)=>{if(p.reverseOf)return 1;if(b.reverseOf)return-1;if(!p.isoEpoch||!b.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return b.isoEpoch.year-p.isoEpoch.year});let m=u[u.length-1].reverseOf;if(m&&m!==u[u.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return u.forEach((p,b)=>{p.genericName="era"+(u.length-1-b)}),{eras:u,anchorEra:a||u[0]}}(r);this.anchorEra=i,this.eras=n}inLeapYear(e){let{year:r}=this.estimateIsoDate({month:1,day:1,year:e.year});return Mye(r)}monthsInYear(){return 12}minimumMonthLength(e){let{month:r}=e;return r===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(r)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}completeEraYear(e){let r=(a,u)=>{let m=e[a];if(m!=null&&m!=u)throw new RangeError(`Input ${a} ${m} doesn't match calculated value ${u}`)},n=a=>{let u,m={...e,year:a},p=this.eras.find((b,A)=>{if(A===this.eras.length-1){if(b.reverseOf){if(a>0)throw new RangeError(`Signed year ${a} is invalid for era ${b.name}`);return u=b.anchorEpoch.year-a,!0}return u=a-b.anchorEpoch.year+(b.hasYearZero?0:1),!0}return this.compareCalendarDates(m,b.anchorEpoch)>=0&&(u=a-b.anchorEpoch.year+(b.hasYearZero?0:1),!0)});if(!p)throw new RangeError(`Year ${a} was not matched by any era`);return{eraYear:u,era:p.name}},{year:i,eraYear:o,era:s}=e;if(i!=null)({eraYear:o,era:s}=n(i)),r("era",s),r("eraYear",o);else{if(o==null)throw new RangeError("Either `year` or `eraYear` and `era` are required");{let a=s===void 0?void 0:this.eras.find(u=>u.name===s||u.genericName===s);if(!a)throw new RangeError(`Era ${s} (ISO year ${o}) was not matched by any era`);if(o<1&&a.reverseOf)throw new RangeError(`Years in ${s} era must be positive, not ${i}`);i=a.reverseOf?a.anchorEpoch.year-o:o+a.anchorEpoch.year-(a.hasYearZero?0:1),r("year",i),{eraYear:o,era:s}=n(i)}}return{...e,year:i,eraYear:o,era:s}}adjustCalendarDate(e,r,n="constrain"){let i=e,{month:o,monthCode:s}=i;return o===void 0&&(i={...i,month:hL(s)}),this.validateCalendarDate(i),i=this.completeEraYear(i),super.adjustCalendarDate(i,r,n)}estimateIsoDate(e){let r=this.adjustCalendarDate(e),{year:n,month:i,day:o}=r,{anchorEra:s}=this;return yP(n+s.isoEpoch.year-(s.hasYearZero?0:1),i,o,"constrain")}checkIcuBugs(e){if(this.calendarIsVulnerableToJulianBug&&this.v8IsVulnerableToJulianBug&&j0(e.year,e.month,e.day,1582,10,15)<0)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 1582-10-15 (see https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)`)}},gS=class extends Bg{constructor(e,r){super(e,r)}inLeapYear(e){let{year:r}=e;return(r+1)%4==0}monthsInYear(){return 13}minimumMonthLength(e){let{month:r}=e;return r===13?this.inLeapYear(e)?6:5:30}maximumMonthLength(e){return this.minimumMonthLength(e)}},D$=class extends gS{constructor(){super("ethioaa",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}}])}},C$=class extends gS{constructor(){super("coptic",[{name:"era1",isoEpoch:{year:284,month:8,day:29}},{name:"era0",reverseOf:"era1"}])}},N$=class extends gS{constructor(){super("ethiopic",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}},{name:"era1",isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}},j$=class extends Bg{constructor(){super("roc",[{name:"minguo",isoEpoch:{year:1912,month:1,day:1}},{name:"before-roc",reverseOf:"minguo"}]),this.calendarIsVulnerableToJulianBug=!0}},q$=class extends Bg{constructor(){super("buddhist",[{name:"be",hasYearZero:!0,isoEpoch:{year:-543,month:1,day:1}}]),this.calendarIsVulnerableToJulianBug=!0}},$$=class extends Bg{constructor(){super("gregory",[{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}])}reviseIntlEra(e){let{era:r,eraYear:n}=e;return r!=="bc"&&r!=="b"||(r="bce"),r!=="ad"&&r!=="a"||(r="ce"),{era:r,eraYear:n}}},L$=class extends Bg{constructor(){super("japanese",[{name:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{name:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{name:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{name:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{name:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}]),this.calendarIsVulnerableToJulianBug=!0,this.eraLength="long",this.erasBeginMidYear=!0}reviseIntlEra(e,r){let{era:n,eraYear:i}=e,{year:o}=r;return this.eras.find(s=>s.name===n)?{era:n,eraYear:i}:o<1?{era:"bce",eraYear:1-o}:{era:"ce",eraYear:o}}},AP=class extends z0{constructor(){super(...arguments),this.calendarType="lunisolar",this.hasEra=!1}inLeapYear(e,r){let n=this.getMonthList(e.year,r);return M$(n).length===13}monthsInYear(e,r){return this.inLeapYear(e,r)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}getMonthList(e,r){if(e===void 0)throw new TypeError("Missing year");let n=JSON.stringify({func:"getMonthList",calendarYear:e,id:this.id}),i=r.get(n);if(i)return i;let o=this.getFormatter(),s=(k,R)=>{let B=Sye({isoYear:k,isoMonth:2,isoDay:1}),I=new Date(B);I.setUTCDate(R+1);let q=o.formatToParts(I),$=q.find(L=>L.type==="month").value,U=+q.find(L=>L.type==="day").value,F=q.find(L=>L.type==="relatedYear");if(F===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return F=+F.value,{calendarMonthString:$,calendarDay:U,calendarYearToVerify:F}},a=17,{calendarMonthString:u,calendarDay:m,calendarYearToVerify:p}=s(e,a);u!=="1"&&(a+=29,{calendarMonthString:u,calendarDay:m}=s(e,a)),a-=m-5;let b={},A,M,S=1,P=!1;do({calendarMonthString:u,calendarDay:m,calendarYearToVerify:p}=s(e,a)),A&&(b[M].daysInMonth=A+30-m),p!==e?P=!0:(b[u]={monthIndex:S++},a+=30),A=m,M=u;while(!P);return b[M].daysInMonth=A+30-m,r.set(n,b),b}estimateIsoDate(e){let{year:r,month:n}=e;return{year:r,month:n>=12?12:n+1,day:1}}adjustCalendarDate(e,r,n="constrain",i=!1){let{year:o,month:s,monthExtra:a,day:u,monthCode:m,eraYear:p}=e;if(i){if(o=p,a&&a!=="bis")throw new RangeError(`Unexpected leap month suffix: ${a}`);let b=Nh(s,a!==void 0),A=`${s}${a||""}`,M=this.getMonthList(o,r)[A];if(M===void 0)throw new RangeError(`Unmatched month ${A} in Chinese year ${o}`);return s=M.monthIndex,{year:o,month:s,day:u,era:void 0,eraYear:p,monthCode:b}}if(this.validateCalendarDate(e),o===void 0&&(o=p),p===void 0&&(p=o),s===void 0){let b=this.getMonthList(o,r),A=m.replace("L","bis").slice(1);A[0]==="0"&&(A=A.slice(1));let M=b[A];if(s=M&&M.monthIndex,s===void 0&&m.endsWith("L")&&m!="M13L"&&n==="constrain"){let S=m.slice(1,-1);S[0]==="0"&&(S=S.slice(1)),M=b[S],M&&(s=M.monthIndex,m=Nh(S))}if(s===void 0)throw new RangeError(`Unmatched month ${m} in Chinese year ${o}`)}else if(m===void 0){let b=this.getMonthList(o,r),A=M$(b),M=A.length;n==="reject"?(Ro(s,1,M),Ro(u,1,this.maximumMonthLength())):(s=Ma(s,1,M),u=Ma(u,1,this.maximumMonthLength()));let S=A.find(([,P])=>P.monthIndex===s);if(S===void 0)throw new RangeError(`Invalid month ${s} in Chinese year ${o}`);m=Nh(S[0].replace("bis",""),S[0].indexOf("bis")!==-1)}else{let b=this.getMonthList(o,r),A=m.replace("L","bis").slice(1);A[0]==="0"&&(A=A.slice(1));let M=b[A];if(!M)throw new RangeError(`Unmatched monthCode ${m} in Chinese year ${o}`);if(s!==M.monthIndex)throw new RangeError(`monthCode ${m} doesn't correspond to month ${s} in Chinese year ${o}`)}return{...e,year:o,eraYear:p,month:s,monthCode:m,day:u}}},U$=class extends AP{constructor(){super(...arguments),this.id="chinese"}},F$=class extends AP{constructor(){super(...arguments),this.id="dangi"}},z$=class{constructor(e){this.helper=e}dateFromFields(e,r,n){let i=new pn,o=Gt(e,this.fields(["day","month","monthCode","year"]),[]),s=ni(r),{year:a,month:u,day:m}=this.helper.calendarToIsoDate(o,s,i),p=Dc(a,u,m,n);return i.setObject(p),p}yearMonthFromFields(e,r,n){let i=new pn,o=Gt(e,this.fields(["month","monthCode","year"]),[]),s=ni(r),{year:a,month:u,day:m}=this.helper.calendarToIsoDate({...o,day:1},s,i),p=mS(a,u,n,m);return i.setObject(p),p}monthDayFromFields(e,r,n){let i=new pn,o=Gt(e,this.fields(["day","month","monthCode","year"]),[]),s=ni(r),{year:a,month:u,day:m}=this.helper.monthDayFromFields(o,s,i),p=pS(u,m,n,a);return i.setObject(p),p}fields(e){let r=e;return _ye.call(r,"year")&&(r=[...r,"era","eraYear"]),r}fieldKeysToIgnore(e){let r=new xye;for(let n=0;n<e.length;n++){let i=e[n];switch(nt(Jo,r,[i]),i){case"era":nt(Jo,r,["eraYear"]),nt(Jo,r,["year"]);break;case"eraYear":nt(Jo,r,["era"]),nt(Jo,r,["year"]);break;case"year":nt(Jo,r,["era"]),nt(Jo,r,["eraYear"]);break;case"month":nt(Jo,r,["monthCode"]),this.helper.erasBeginMidYear&&(nt(Jo,r,["era"]),nt(Jo,r,["eraYear"]));break;case"monthCode":nt(Jo,r,["month"]),this.helper.erasBeginMidYear&&(nt(Jo,r,["era"]),nt(Jo,r,["eraYear"]));break;case"day":this.helper.erasBeginMidYear&&(nt(Jo,r,["era"]),nt(Jo,r,["eraYear"]))}}return[...nt(Eye,r,[])]}dateAdd(e,r,n,i,o,s,a){let u=pn.getCacheForObject(e),m=this.helper.temporalToCalendarDate(e,u),p=this.helper.addCalendar(m,{years:r,months:n,weeks:i,days:o},s,u),b=this.helper.calendarToIsoDate(p,"constrain",u),{year:A,month:M,day:S}=b,P=Dc(A,M,S,a);return new pn(u).setObject(P),P}dateUntil(e,r,n){let i=pn.getCacheForObject(e),o=pn.getCacheForObject(r),s=this.helper.temporalToCalendarDate(e,i),a=this.helper.temporalToCalendarDate(r,o);return this.helper.untilCalendar(s,a,n,i)}year(e){let r=pn.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).year}month(e){let r=pn.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).month}day(e){let r=pn.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).day}era(e){if(!this.helper.hasEra)return;let r=pn.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).era}eraYear(e){if(!this.helper.hasEra)return;let r=pn.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).eraYear}monthCode(e){let r=pn.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).monthCode}dayOfWeek(e){return xn.iso8601.dayOfWeek(e)}dayOfYear(e){let r=pn.getCacheForObject(e),n=this.helper.isoToCalendarDate(e,r),i=this.helper.startOfCalendarYear(n);return this.helper.calendarDaysUntil(i,n,r)+1}weekOfYear(e){return xn.iso8601.weekOfYear(e)}yearOfWeek(e){return xn.iso8601.yearOfWeek(e)}daysInWeek(e){return xn.iso8601.daysInWeek(e)}daysInMonth(e){let r=pn.getCacheForObject(e),n=this.helper.temporalToCalendarDate(e,r),i=this.helper.maximumMonthLength(n);if(i===this.helper.minimumMonthLength(n))return i;let o=this.helper.startOfCalendarMonth(n),s=this.helper.addMonthsCalendar(o,1,"constrain",r);return this.helper.calendarDaysUntil(o,s,r)}daysInYear(e){let r=e;Ji(r,We)||(r=Zr(r));let n=pn.getCacheForObject(r),i=this.helper.temporalToCalendarDate(r,n),o=this.helper.startOfCalendarYear(i),s=this.helper.addCalendar(o,{years:1},"constrain",n);return this.helper.calendarDaysUntil(o,s,n)}monthsInYear(e){let r=pn.getCacheForObject(e),n=this.helper.temporalToCalendarDate(e,r);return this.helper.monthsInYear(n,r)}inLeapYear(e){let r=e;Ji(r,We)||(r=Zr(r));let n=pn.getCacheForObject(r),i=this.helper.temporalToCalendarDate(r,n);return this.helper.inLeapYear(i,n)}};for(let t of[A$,O$,N$,D$,C$,U$,F$,j$,B$,q$,$$,L$,MP,P$,T$,R$,I$,k$]){let e=new t;xn[e.id]=new z$(e)}var Dg=class{constructor(e,r,n,i="iso8601"){$me(this,vr(e),vr(r),vr(n),Ta(i))}get calendarId(){if(!Xt(this))throw new TypeError("invalid receiver");return Io(j(this,xe))}get era(){if(!Xt(this))throw new TypeError("invalid receiver");return OP(j(this,xe),this)}get eraYear(){if(!Xt(this))throw new TypeError("invalid receiver");return BP(j(this,xe),this)}get year(){if(!Xt(this))throw new TypeError("invalid receiver");return IP(j(this,xe),this)}get month(){if(!Xt(this))throw new TypeError("invalid receiver");return kP(j(this,xe),this)}get monthCode(){if(!Xt(this))throw new TypeError("invalid receiver");return TS(j(this,xe),this)}get day(){if(!Xt(this))throw new TypeError("invalid receiver");return RS(j(this,xe),this)}get dayOfWeek(){if(!Xt(this))throw new TypeError("invalid receiver");return Z$(j(this,xe),this)}get dayOfYear(){if(!Xt(this))throw new TypeError("invalid receiver");return J$(j(this,xe),this)}get weekOfYear(){if(!Xt(this))throw new TypeError("invalid receiver");return Y$(j(this,xe),this)}get yearOfWeek(){if(!Xt(this))throw new TypeError("invalid receiver");return Q$(j(this,xe),this)}get daysInWeek(){if(!Xt(this))throw new TypeError("invalid receiver");return X$(j(this,xe),this)}get daysInMonth(){if(!Xt(this))throw new TypeError("invalid receiver");return DP(j(this,xe),this)}get daysInYear(){if(!Xt(this))throw new TypeError("invalid receiver");return CP(j(this,xe),this)}get monthsInYear(){if(!Xt(this))throw new TypeError("invalid receiver");return NP(j(this,xe),this)}get inLeapYear(){if(!Xt(this))throw new TypeError("invalid receiver");return jP(j(this,xe),this)}with(e,r){if(!Xt(this))throw new TypeError("invalid receiver");if(!yn(e))throw new TypeError("invalid argument");$1(e);let n=tr(r),i=j(this,xe),o=pi(i,["day","month","monthCode","year"]),s=Gt(this,o,[]);return s=Ig(i,s,Gt(e,o,"partial")),s=Gt(s,o,[]),qh(i,s,n)}withCalendar(e){if(!Xt(this))throw new TypeError("invalid receiver");let r=Ta(e);return new Dg(j(this,We),j(this,Ve),j(this,Ze),r)}add(e,r){if(!Xt(this))throw new TypeError("invalid receiver");let n=S1(e),i=tr(r);return To(j(this,xe),this,n,i)}subtract(e,r){if(!Xt(this))throw new TypeError("invalid receiver");let n=eye(S1(e)),i=tr(r);return To(j(this,xe),this,n,i)}until(e,r){if(!Xt(this))throw new TypeError("invalid receiver");return cme("until",this,e,r)}since(e,r){if(!Xt(this))throw new TypeError("invalid receiver");return cme("since",this,e,r)}equals(e){if(!Xt(this))throw new TypeError("invalid receiver");let r=Zr(e);for(let n of[We,Ve,Ze])if(j(this,n)!==j(r,n))return!1;return kS(j(this,xe),j(r,xe))}toString(e){if(!Xt(this))throw new TypeError("invalid receiver");return X0e(this,SS(tr(e)))}toJSON(){if(!Xt(this))throw new TypeError("invalid receiver");return X0e(this)}toLocaleString(e,r){if(!Xt(this))throw new TypeError("invalid receiver");return new Fh(e,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDate")}toPlainDateTime(e){if(!Xt(this))throw new TypeError("invalid receiver");let r=j(this,We),n=j(this,Ve),i=j(this,Ze),o=j(this,xe);if(e===void 0)return Sa(r,n,i,0,0,0,0,0,0,o);let s=Bh(e);return Sa(r,n,i,j(s,Ot),j(s,Bt),j(s,Dt),j(s,Ct),j(s,Nt),j(s,jt),o)}toZonedDateTime(e){if(!Xt(this))throw new TypeError("invalid receiver");let r,n;if(yn(e))if(Rc(e))r=e;else{let S=e.timeZone;S===void 0?r=Xo(e):(r=Xo(S),n=e.plainTime)}else r=Xo(e);let i=j(this,We),o=j(this,Ve),s=j(this,Ze),a=j(this,xe),u=0,m=0,p=0,b=0,A=0,M=0;return n!==void 0&&(n=Bh(n),u=j(n,Ot),m=j(n,Bt),p=j(n,Dt),b=j(n,Ct),A=j(n,Nt),M=j(n,jt)),Po(j(Ms(r,Sa(i,o,s,u,m,p,b,A,M,a),"compatible"),ht),r,a)}toPlainYearMonth(){if(!Xt(this))throw new TypeError("invalid receiver");let e=j(this,xe);return kg(e,Gt(this,pi(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!Xt(this))throw new TypeError("invalid receiver");let e=j(this,xe);return B1(e,Gt(this,pi(e,["day","monthCode"]),[]))}getISOFields(){if(!Xt(this))throw new TypeError("invalid receiver");return{calendar:j(this,xe),isoDay:j(this,Ze),isoMonth:j(this,Ve),isoYear:j(this,We)}}getCalendar(){if(!Xt(this))throw new TypeError("invalid receiver");return F1(j(this,xe))}static from(e,r){let n=tr(r);return Xt(e)?(ni(n),Dc(j(e,We),j(e,Ve),j(e,Ze),j(e,xe))):Zr(e,n)}static compare(e,r){let n=Zr(e),i=Zr(r);return j0(j(n,We),j(n,Ve),j(n,Ze),j(i,We),j(i,Ve),j(i,Ze))}};ed(Dg,"Temporal.PlainDate");var Cg=class{constructor(e,r,n,i=0,o=0,s=0,a=0,u=0,m=0,p="iso8601"){Lme(this,vr(e),vr(r),vr(n),i===void 0?0:vr(i),o===void 0?0:vr(o),s===void 0?0:vr(s),a===void 0?0:vr(a),u===void 0?0:vr(u),m===void 0?0:vr(m),Ta(p))}get calendarId(){if(!It(this))throw new TypeError("invalid receiver");return Io(j(this,xe))}get year(){if(!It(this))throw new TypeError("invalid receiver");return IP(j(this,xe),this)}get month(){if(!It(this))throw new TypeError("invalid receiver");return kP(j(this,xe),this)}get monthCode(){if(!It(this))throw new TypeError("invalid receiver");return TS(j(this,xe),this)}get day(){if(!It(this))throw new TypeError("invalid receiver");return RS(j(this,xe),this)}get hour(){if(!It(this))throw new TypeError("invalid receiver");return j(this,Ot)}get minute(){if(!It(this))throw new TypeError("invalid receiver");return j(this,Bt)}get second(){if(!It(this))throw new TypeError("invalid receiver");return j(this,Dt)}get millisecond(){if(!It(this))throw new TypeError("invalid receiver");return j(this,Ct)}get microsecond(){if(!It(this))throw new TypeError("invalid receiver");return j(this,Nt)}get nanosecond(){if(!It(this))throw new TypeError("invalid receiver");return j(this,jt)}get era(){if(!It(this))throw new TypeError("invalid receiver");return OP(j(this,xe),this)}get eraYear(){if(!It(this))throw new TypeError("invalid receiver");return BP(j(this,xe),this)}get dayOfWeek(){if(!It(this))throw new TypeError("invalid receiver");return Z$(j(this,xe),this)}get dayOfYear(){if(!It(this))throw new TypeError("invalid receiver");return J$(j(this,xe),this)}get weekOfYear(){if(!It(this))throw new TypeError("invalid receiver");return Y$(j(this,xe),this)}get yearOfWeek(){if(!It(this))throw new TypeError("invalid receiver");return Q$(j(this,xe),this)}get daysInWeek(){if(!It(this))throw new TypeError("invalid receiver");return X$(j(this,xe),this)}get daysInYear(){if(!It(this))throw new TypeError("invalid receiver");return CP(j(this,xe),this)}get daysInMonth(){if(!It(this))throw new TypeError("invalid receiver");return DP(j(this,xe),this)}get monthsInYear(){if(!It(this))throw new TypeError("invalid receiver");return NP(j(this,xe),this)}get inLeapYear(){if(!It(this))throw new TypeError("invalid receiver");return jP(j(this,xe),this)}with(e,r){if(!It(this))throw new TypeError("invalid receiver");if(!yn(e))throw new TypeError("invalid argument");$1(e);let n=tr(r),i=j(this,xe),o=pi(i,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),s=Gt(this,o,[]);s=Ig(i,s,Gt(e,o,"partial")),s=Gt(s,o,[]);let{year:a,month:u,day:m,hour:p,minute:b,second:A,millisecond:M,microsecond:S,nanosecond:P}=PS(i,s,n);return Sa(a,u,m,p,b,A,M,S,P,i)}withPlainTime(e){if(!It(this))throw new TypeError("invalid receiver");let r=j(this,We),n=j(this,Ve),i=j(this,Ze),o=j(this,xe);if(e===void 0)return Sa(r,n,i,0,0,0,0,0,0,o);let s=Bh(e);return Sa(r,n,i,j(s,Ot),j(s,Bt),j(s,Dt),j(s,Ct),j(s,Nt),j(s,jt),o)}withPlainDate(e){if(!It(this))throw new TypeError("invalid receiver");let r=Zr(e),n=j(r,We),i=j(r,Ve),o=j(r,Ze),s=j(r,xe),a=j(this,Ot),u=j(this,Bt),m=j(this,Dt),p=j(this,Ct),b=j(this,Nt),A=j(this,jt);return s=Kme(j(this,xe),s),Sa(n,i,o,a,u,m,p,b,A,s)}withCalendar(e){if(!It(this))throw new TypeError("invalid receiver");let r=Ta(e);return new Cg(j(this,We),j(this,Ve),j(this,Ze),j(this,Ot),j(this,Bt),j(this,Dt),j(this,Ct),j(this,Nt),j(this,jt),r)}add(e,r){if(!It(this))throw new TypeError("invalid receiver");return mme("add",this,e,r)}subtract(e,r){if(!It(this))throw new TypeError("invalid receiver");return mme("subtract",this,e,r)}until(e,r){if(!It(this))throw new TypeError("invalid receiver");return fme("until",this,e,r)}since(e,r){if(!It(this))throw new TypeError("invalid receiver");return fme("since",this,e,r)}round(e){if(!It(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let r=typeof e=="string"?N1("smallestUnit",e):tr(e),n=L1(r),i=Pu(r,"halfExpand"),o=Pa(r,"smallestUnit","time",Tg,["day"]),s={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o];U1(n,s,s===1);let a=j(this,We),u=j(this,Ve),m=j(this,Ze),p=j(this,Ot),b=j(this,Bt),A=j(this,Dt),M=j(this,Ct),S=j(this,Nt),P=j(this,jt);return{year:a,month:u,day:m,hour:p,minute:b,second:A,millisecond:M,microsecond:S,nanosecond:P}=cL(a,u,m,p,b,A,M,S,P,n,o,i),Sa(a,u,m,p,b,A,M,S,P,j(this,xe))}equals(e){if(!It(this))throw new TypeError("invalid receiver");let r=Sg(e);for(let n of[We,Ve,Ze,Ot,Bt,Dt,Ct,Nt,jt])if(j(this,n)!==j(r,n))return!1;return kS(j(this,xe),j(r,xe))}toString(e){if(!It(this))throw new TypeError("invalid receiver");let r=tr(e),n=SS(r),i=MS(r),o=Pu(r,"trunc"),s=Pa(r,"smallestUnit","time",void 0);if(s==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let{precision:a,unit:u,increment:m}=AS(s,i);return eme(this,a,n,{unit:u,increment:m,roundingMode:o})}toJSON(){if(!It(this))throw new TypeError("invalid receiver");return eme(this,"auto")}toLocaleString(e,r){if(!It(this))throw new TypeError("invalid receiver");return new Fh(e,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDateTime")}toZonedDateTime(e,r){if(!It(this))throw new TypeError("invalid receiver");let n=Xo(e);return Po(j(Ms(n,this,O1(tr(r))),ht),n,j(this,xe))}toPlainDate(){if(!It(this))throw new TypeError("invalid receiver");return D1(this)}toPlainYearMonth(){if(!It(this))throw new TypeError("invalid receiver");let e=j(this,xe);return kg(e,Gt(this,pi(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!It(this))throw new TypeError("invalid receiver");let e=j(this,xe);return B1(e,Gt(this,pi(e,["day","monthCode"]),[]))}toPlainTime(){if(!It(this))throw new TypeError("invalid receiver");return eL(this)}getISOFields(){if(!It(this))throw new TypeError("invalid receiver");return{calendar:j(this,xe),isoDay:j(this,Ze),isoHour:j(this,Ot),isoMicrosecond:j(this,Nt),isoMillisecond:j(this,Ct),isoMinute:j(this,Bt),isoMonth:j(this,Ve),isoNanosecond:j(this,jt),isoSecond:j(this,Dt),isoYear:j(this,We)}}getCalendar(){if(!It(this))throw new TypeError("invalid receiver");return F1(j(this,xe))}static from(e,r){let n=tr(r);return It(e)?(ni(n),Sa(j(e,We),j(e,Ve),j(e,Ze),j(e,Ot),j(e,Bt),j(e,Dt),j(e,Ct),j(e,Nt),j(e,jt),j(e,xe))):Sg(e,n)}static compare(e,r){let n=Sg(e),i=Sg(r);for(let o of[We,Ve,Ze,Ot,Bt,Dt,Ct,Nt,jt]){let s=j(n,o),a=j(i,o);if(s!==a)return Ag(s-a)}return 0}};ed(Cg,"Temporal.PlainDateTime");var Vl=class{constructor(e=0,r=0,n=0,i=0,o=0,s=0,a=0,u=0,m=0,p=0){let b=e===void 0?0:Zi(e),A=r===void 0?0:Zi(r),M=n===void 0?0:Zi(n),S=i===void 0?0:Zi(i),P=o===void 0?0:Zi(o),k=s===void 0?0:Zi(s),R=a===void 0?0:Zi(a),B=u===void 0?0:Zi(u),I=m===void 0?0:Zi(m),q=p===void 0?0:Zi(p);xP(b,A,M,S,P,k,R,B,I,q),td(this),Ft(this,ys,b),Ft(this,ho,A),Ft(this,ia,M),Ft(this,gs,S),Ft(this,bs,P),Ft(this,vs,k),Ft(this,ws,R),Ft(this,_s,B),Ft(this,xs,I),Ft(this,Es,q)}get years(){if(!Un(this))throw new TypeError("invalid receiver");return j(this,ys)}get months(){if(!Un(this))throw new TypeError("invalid receiver");return j(this,ho)}get weeks(){if(!Un(this))throw new TypeError("invalid receiver");return j(this,ia)}get days(){if(!Un(this))throw new TypeError("invalid receiver");return j(this,gs)}get hours(){if(!Un(this))throw new TypeError("invalid receiver");return j(this,bs)}get minutes(){if(!Un(this))throw new TypeError("invalid receiver");return j(this,vs)}get seconds(){if(!Un(this))throw new TypeError("invalid receiver");return j(this,ws)}get milliseconds(){if(!Un(this))throw new TypeError("invalid receiver");return j(this,_s)}get microseconds(){if(!Un(this))throw new TypeError("invalid receiver");return j(this,xs)}get nanoseconds(){if(!Un(this))throw new TypeError("invalid receiver");return j(this,Es)}get sign(){if(!Un(this))throw new TypeError("invalid receiver");return Jl(j(this,ys),j(this,ho),j(this,ia),j(this,gs),j(this,bs),j(this,vs),j(this,ws),j(this,_s),j(this,xs),j(this,Es))}get blank(){if(!Un(this))throw new TypeError("invalid receiver");return Jl(j(this,ys),j(this,ho),j(this,ia),j(this,gs),j(this,bs),j(this,vs),j(this,ws),j(this,_s),j(this,xs),j(this,Es))===0}with(e){if(!Un(this))throw new TypeError("invalid receiver");let r=Gt(e,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],"partial"),{years:n=j(this,ys),months:i=j(this,ho),weeks:o=j(this,ia),days:s=j(this,gs),hours:a=j(this,bs),minutes:u=j(this,vs),seconds:m=j(this,ws),milliseconds:p=j(this,_s),microseconds:b=j(this,xs),nanoseconds:A=j(this,Es)}=r;return new Vl(n,i,o,s,a,u,m,p,b,A)}negated(){if(!Un(this))throw new TypeError("invalid receiver");return eye(this)}abs(){if(!Un(this))throw new TypeError("invalid receiver");return new Vl(Math.abs(j(this,ys)),Math.abs(j(this,ho)),Math.abs(j(this,ia)),Math.abs(j(this,gs)),Math.abs(j(this,bs)),Math.abs(j(this,vs)),Math.abs(j(this,ws)),Math.abs(j(this,_s)),Math.abs(j(this,xs)),Math.abs(j(this,Es)))}add(e,r){if(!Un(this))throw new TypeError("invalid receiver");return hme("add",this,e,r)}subtract(e,r){if(!Un(this))throw new TypeError("invalid receiver");return hme("subtract",this,e,r)}round(e){if(!Un(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let r=j(this,ys),n=j(this,ho),i=j(this,ia),o=j(this,gs),s=j(this,bs),a=j(this,vs),u=j(this,ws),m=j(this,_s),p=j(this,xs),b=j(this,Es),A=b$(r,n,i,o,s,a,u,m,p,b),M=typeof e=="string"?N1("smallestUnit",e):tr(e),S=Pa(M,"largestUnit","datetime",void 0,["auto"]),P=aP(M),k=L1(M),R=Pu(M,"halfExpand"),B=Pa(M,"smallestUnit","datetime",void 0),I=!0;B||(I=!1,B="nanosecond"),A=Rg(A,B);let q=!0;if(S||(q=!1,S=A),S==="auto"&&(S=A),!I&&!q)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(Rg(S,B)!==S)throw new RangeError(`largestUnit ${S} cannot be smaller than smallestUnit ${B}`);let $={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[B];return $!==void 0&&U1(k,$,!1),{years:r,months:n,weeks:i,days:o}=sP(r,n,i,o,S,P),{years:r,months:n,weeks:i,days:o,hours:s,minutes:a,seconds:u,milliseconds:m,microseconds:p,nanoseconds:b}=$h(r,n,i,o,s,a,u,m,p,b,k,B,R,P),{years:r,months:n,weeks:i,days:o,hours:s,minutes:a,seconds:u,milliseconds:m,microseconds:p,nanoseconds:b}=fye(r,n,i,o,s,a,u,m,p,b,k,B,R,P),{days:o,hours:s,minutes:a,seconds:u,milliseconds:m,microseconds:p,nanoseconds:b}=Af(o,s,a,u,m,p,b,S,P),{years:r,months:n,weeks:i,days:o}=function(F,L,W,E,c,l){let y=Fe("%Temporal.Duration%"),d=Jl(F,L,W,E,0,0,0,0,0,0);if(d===0)return{years:F,months:L,weeks:W,days:E};let h=K.default.BigInt(d),v,x,g=K.default.BigInt(F),f=K.default.BigInt(L),w=K.default.BigInt(W),D=K.default.BigInt(E);l&&(x=Zr(l),v=j(x,xe));let T=new y(d),C=new y(0,d),z=new y(0,0,d);switch(c){case"year":{if(!v)throw new RangeError("a starting point is required for years balancing");let G=typeof v!="string"?Nr(v,"dateAdd"):void 0,V,Z,J;for({relativeTo:V,days:Z}=Yo(v,x,T,G);K.default.greaterThanOrEqual(Mu(D),K.default.BigInt(mn(Z)));)D=K.default.subtract(D,K.default.BigInt(Z)),g=K.default.add(g,h),x=V,{relativeTo:V,days:Z}=Yo(v,x,T,G);for({relativeTo:V,days:J}=Yo(v,x,C,G);K.default.greaterThanOrEqual(Mu(D),K.default.BigInt(mn(J)));)D=K.default.subtract(D,K.default.BigInt(J)),f=K.default.add(f,h),x=V,{relativeTo:V,days:J}=Yo(v,x,C,G);V=To(v,x,T,void 0,G);let X=typeof v!="string"?Nr(v,"dateUntil"):void 0,se=es(null);se.largestUnit="month";let Q=q0(v,x,V,se,X),te=j(Q,ho);for(;K.default.greaterThanOrEqual(Mu(f),K.default.BigInt(mn(te)));){f=K.default.subtract(f,K.default.BigInt(te)),g=K.default.add(g,h),x=V,V=To(v,x,T,void 0,G);let de=es(null);de.largestUnit="month",Q=q0(v,x,V,de,X),te=j(Q,ho)}break}case"month":{if(!v)throw new RangeError("a starting point is required for months balancing");let G=typeof v!="string"?Nr(v,"dateAdd"):void 0,V,Z;for({relativeTo:V,days:Z}=Yo(v,x,C,G);K.default.greaterThanOrEqual(Mu(D),K.default.BigInt(mn(Z)));)D=K.default.subtract(D,K.default.BigInt(Z)),f=K.default.add(f,h),x=V,{relativeTo:V,days:Z}=Yo(v,x,C,G);break}case"week":{if(!v)throw new RangeError("a starting point is required for weeks balancing");let G=typeof v!="string"?Nr(v,"dateAdd"):void 0,V,Z;for({relativeTo:V,days:Z}=Yo(v,x,z,G);K.default.greaterThanOrEqual(Mu(D),K.default.BigInt(mn(Z)));)D=K.default.subtract(D,K.default.BigInt(Z)),w=K.default.add(w,h),x=V,{relativeTo:V,days:Z}=Yo(v,x,z,G);break}}return{years:K.default.toNumber(g),months:K.default.toNumber(f),weeks:K.default.toNumber(w),days:K.default.toNumber(D)}}(r,n,i,o,S,P),new Vl(r,n,i,o,s,a,u,m,p,b)}total(e){if(!Un(this))throw new TypeError("invalid receiver");let r=j(this,ys),n=j(this,ho),i=j(this,ia),o=j(this,gs),s=j(this,bs),a=j(this,vs),u=j(this,ws),m=j(this,_s),p=j(this,xs),b=j(this,Es);if(e===void 0)throw new TypeError("options argument is required");let A=typeof e=="string"?N1("unit",e):tr(e),M=aP(A),S=Pa(A,"unit","datetime",Tg),P;({years:r,months:n,weeks:i,days:o}=sP(r,n,i,o,S,M)),Qe(M)&&(P=cye(M,r,n,i,0));let k=Xme(o,s,a,u,m,p,b,S,P);if(k==="positive overflow")return 1/0;if(k==="negative overflow")return-1/0;({days:o,hours:s,minutes:a,seconds:u,milliseconds:m,microseconds:p,nanoseconds:b}=k);let{total:R}=$h(r,n,i,o,s,a,u,m,p,b,1,S,"trunc",M);return R}toString(e){if(!Un(this))throw new TypeError("invalid receiver");let r=tr(e),n=MS(r),i=Pu(r,"trunc"),o=Pa(r,"smallestUnit","time",void 0);if(o==="hour"||o==="minute")throw new RangeError('smallestUnit must be a time unit other than "hours" or "minutes"');let{precision:s,unit:a,increment:u}=AS(o,n);return f$(this,s,{unit:a,increment:u,roundingMode:i})}toJSON(){if(!Un(this))throw new TypeError("invalid receiver");return f$(this)}toLocaleString(e,r){if(!Un(this))throw new TypeError("invalid receiver");return typeof Intl<"u"&&Intl.DurationFormat!==void 0?new Intl.DurationFormat(e,r).format(this):(console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),f$(this))}valueOf(){throw new TypeError("use compare() to compare Temporal.Duration")}static from(e){return Un(e)?new Vl(j(e,ys),j(e,ho),j(e,ia),j(e,gs),j(e,bs),j(e,vs),j(e,ws),j(e,_s),j(e,xs),j(e,Es)):S1(e)}static compare(e,r,n){let i=S1(e),o=S1(r),s=aP(tr(n)),a=j(i,ys),u=j(i,ho),m=j(i,ia),p=j(i,gs),b=j(i,bs),A=j(i,vs),M=j(i,ws),S=j(i,_s),P=j(i,xs),k=j(i,Es),R=j(o,ys),B=j(o,ho),I=j(o,ia),q=j(o,gs),$=j(o,bs),U=j(o,vs),F=j(o,ws),L=j(o,_s),W=j(o,xs),E=j(o,Es),c=sme(s,a,u,m,p),l=sme(s,R,B,I,q);a===0&&R===0&&u===0&&B===0&&m===0&&I===0||({days:p}=sP(a,u,m,p,"day",s),{days:q}=sP(R,B,I,q,"day",s));let y=C1(p,b,A,M,S,P,k,c),d=C1(q,$,U,F,L,W,E,l);return Ag(K.default.toNumber(K.default.subtract(y,d)))}};ed(Vl,"Temporal.Duration");var xXe=Object.create,bS=class{constructor(e,r,n="iso8601",i=1972){Ume(this,vr(e),vr(r),Ta(n),vr(i))}get monthCode(){if(!Hi(this))throw new TypeError("invalid receiver");return TS(j(this,xe),this)}get day(){if(!Hi(this))throw new TypeError("invalid receiver");return RS(j(this,xe),this)}get calendarId(){if(!Hi(this))throw new TypeError("invalid receiver");return Io(j(this,xe))}with(e,r){if(!Hi(this))throw new TypeError("invalid receiver");if(!yn(e))throw new TypeError("invalid argument");$1(e);let n=tr(r),i=j(this,xe),o=pi(i,["day","month","monthCode","year"]),s=Gt(this,o,[]);return s=Ig(i,s,Gt(e,o,"partial")),s=Gt(s,o,[]),B1(i,s,n)}equals(e){if(!Hi(this))throw new TypeError("invalid receiver");let r=Y0e(e);for(let n of[Ve,Ze,We])if(j(this,n)!==j(r,n))return!1;return kS(j(this,xe),j(r,xe))}toString(e){if(!Hi(this))throw new TypeError("invalid receiver");return tme(this,SS(tr(e)))}toJSON(){if(!Hi(this))throw new TypeError("invalid receiver");return tme(this)}toLocaleString(e,r){if(!Hi(this))throw new TypeError("invalid receiver");return new Fh(e,r).format(this)}valueOf(){throw new TypeError("use equals() to compare Temporal.PlainMonthDay")}toPlainDate(e){if(!Hi(this))throw new TypeError("invalid receiver");if(!yn(e))throw new TypeError("argument should be an object");let r=j(this,xe),n=pi(r,["day","monthCode"]),i=Gt(this,n,[]),o=pi(r,["year"]),s=Ig(r,i,Gt(e,o,[]));s=Gt(s,[...new Set([...n,...o])],[]);let a=xXe(null);return a.overflow="reject",qh(r,s,a)}getISOFields(){if(!Hi(this))throw new TypeError("invalid receiver");return{calendar:j(this,xe),isoDay:j(this,Ze),isoMonth:j(this,Ve),isoYear:j(this,We)}}getCalendar(){if(!Hi(this))throw new TypeError("invalid receiver");return F1(j(this,xe))}static from(e,r){let n=tr(r);return Hi(e)?(ni(n),pS(j(e,Ve),j(e,Ze),j(e,xe),j(e,We))):Y0e(e,n)}};ed(bS,"Temporal.PlainMonthDay");var pL=()=>new(Fe("%Temporal.Instant%"))(uL()),wme=(t,e=N0())=>{let r=Xo(e),n=Ta(t);return Qa(r,pL(),n)},h$=(t=N0())=>Qa(Xo(t),pL(),"iso8601"),_me=(t,e=N0())=>{let r=Xo(e),n=Ta(t);return Po(uL(),r,n)},Aye={instant:pL,plainDateTime:wme,plainDateTimeISO:h$,plainDate:(t,e=N0())=>D1(wme(t,e)),plainDateISO:(t=N0())=>D1(h$(t)),plainTimeISO:(t=N0())=>eL(h$(t)),timeZoneId:()=>N0(),zonedDateTime:_me,zonedDateTimeISO:(t=N0())=>_me("iso8601",t),[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(Aye,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});var EXe=Object.assign;function xme(t,e,r){let n=j(t,Ot),i=j(t,Bt),o=j(t,Dt),s=j(t,Ct),a=j(t,Nt),u=j(t,jt);if(r){let{unit:m,increment:p,roundingMode:b}=r;({hour:n,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:u}=fL(n,i,o,s,a,u,p,m,b))}return`${En(n)}:${En(i)}${$P(o,s,a,u,e)}`}var jh=class{constructor(e=0,r=0,n=0,i=0,o=0,s=0){let a=e===void 0?0:vr(e),u=r===void 0?0:vr(r),m=n===void 0?0:vr(n),p=i===void 0?0:vr(i),b=o===void 0?0:vr(o),A=s===void 0?0:vr(s);FP(a,u,m,p,b,A),td(this),Ft(this,Ot,a),Ft(this,Bt,u),Ft(this,Dt,m),Ft(this,Ct,p),Ft(this,Nt,b),Ft(this,jt,A)}get hour(){if(!Fn(this))throw new TypeError("invalid receiver");return j(this,Ot)}get minute(){if(!Fn(this))throw new TypeError("invalid receiver");return j(this,Bt)}get second(){if(!Fn(this))throw new TypeError("invalid receiver");return j(this,Dt)}get millisecond(){if(!Fn(this))throw new TypeError("invalid receiver");return j(this,Ct)}get microsecond(){if(!Fn(this))throw new TypeError("invalid receiver");return j(this,Nt)}get nanosecond(){if(!Fn(this))throw new TypeError("invalid receiver");return j(this,jt)}with(e,r){if(!Fn(this))throw new TypeError("invalid receiver");if(!yn(e))throw new TypeError("invalid argument");$1(e);let n=ni(tr(r)),i=bP(e,"partial"),o=bP(this),{hour:s,minute:a,second:u,millisecond:m,microsecond:p,nanosecond:b}=EXe(o,i);return{hour:s,minute:a,second:u,millisecond:m,microsecond:p,nanosecond:b}=RP(s,a,u,m,p,b,n),new jh(s,a,u,m,p,b)}add(e){if(!Fn(this))throw new TypeError("invalid receiver");return yme("add",this,e)}subtract(e){if(!Fn(this))throw new TypeError("invalid receiver");return yme("subtract",this,e)}until(e,r){if(!Fn(this))throw new TypeError("invalid receiver");return ume("until",this,e,r)}since(e,r){if(!Fn(this))throw new TypeError("invalid receiver");return ume("since",this,e,r)}round(e){if(!Fn(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let r=typeof e=="string"?N1("smallestUnit",e):tr(e),n=L1(r),i=Pu(r,"halfExpand"),o=Pa(r,"smallestUnit","time",Tg);U1(n,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o],!1);let s=j(this,Ot),a=j(this,Bt),u=j(this,Dt),m=j(this,Ct),p=j(this,Nt),b=j(this,jt);return{hour:s,minute:a,second:u,millisecond:m,microsecond:p,nanosecond:b}=fL(s,a,u,m,p,b,n,o,i),new jh(s,a,u,m,p,b)}equals(e){if(!Fn(this))throw new TypeError("invalid receiver");let r=Bh(e);for(let n of[Ot,Bt,Dt,Ct,Nt,jt])if(j(this,n)!==j(r,n))return!1;return!0}toString(e){if(!Fn(this))throw new TypeError("invalid receiver");let r=tr(e),n=MS(r),i=Pu(r,"trunc"),o=Pa(r,"smallestUnit","time",void 0);if(o==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let{precision:s,unit:a,increment:u}=AS(o,n);return xme(this,s,{unit:a,increment:u,roundingMode:i})}toJSON(){if(!Fn(this))throw new TypeError("invalid receiver");return xme(this,"auto")}toLocaleString(e,r){if(!Fn(this))throw new TypeError("invalid receiver");return new Fh(e,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainTime")}toPlainDateTime(e){if(!Fn(this))throw new TypeError("invalid receiver");let r=Zr(e),n=j(r,We),i=j(r,Ve),o=j(r,Ze),s=j(r,xe);return Sa(n,i,o,j(this,Ot),j(this,Bt),j(this,Dt),j(this,Ct),j(this,Nt),j(this,jt),s)}toZonedDateTime(e){if(!Fn(this))throw new TypeError("invalid receiver");if(!yn(e))throw new TypeError("invalid argument");let r=e.plainDate;if(r===void 0)throw new TypeError("missing date property");let n=Zr(r),i=e.timeZone;if(i===void 0)throw new TypeError("missing timeZone property");let o=Xo(i),s=j(n,We),a=j(n,Ve),u=j(n,Ze),m=j(n,xe),p=j(this,Ot),b=j(this,Bt),A=j(this,Dt),M=j(this,Ct),S=j(this,Nt),P=j(this,jt);return Po(j(Ms(o,new(Fe("%Temporal.PlainDateTime%"))(s,a,u,p,b,A,M,S,P,m),"compatible"),ht),o,m)}getISOFields(){if(!Fn(this))throw new TypeError("invalid receiver");return{isoHour:j(this,Ot),isoMicrosecond:j(this,Nt),isoMillisecond:j(this,Ct),isoMinute:j(this,Bt),isoNanosecond:j(this,jt),isoSecond:j(this,Dt)}}static from(e,r){let n=ni(tr(r));return Fn(e)?new jh(j(e,Ot),j(e,Bt),j(e,Dt),j(e,Ct),j(e,Nt),j(e,jt)):Bh(e,n)}static compare(e,r){let n=Bh(e),i=Bh(r);for(let o of[Ot,Bt,Dt,Ct,Nt,jt]){let s=j(n,o),a=j(i,o);if(s!==a)return Ag(s-a)}return 0}};ed(jh,"Temporal.PlainTime");var Pg=class{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: identifier is required");let r=tL(e);td(this),Ft(this,Gl,r)}get id(){if(!Rc(this))throw new TypeError("invalid receiver");return j(this,Gl)}getOffsetNanosecondsFor(e){if(!Rc(this))throw new TypeError("invalid receiver");let r=Au(e),n=j(this,Gl);return _1(n)?$0(n):Dh(n,j(r,ht))}getOffsetStringFor(e){if(!Rc(this))throw new TypeError("invalid receiver");return v$(this,Au(e))}getPlainDateTimeFor(e,r="iso8601"){if(!Rc(this))throw new TypeError("invalid receiver");return Qa(this,Au(e),Ta(r))}getInstantFor(e,r){if(!Rc(this))throw new TypeError("invalid receiver");return Ms(this,Sg(e),O1(tr(r)))}getPossibleInstantsFor(e){if(!Rc(this))throw new TypeError("invalid receiver");let r=Sg(e),n=Fe("%Temporal.Instant%"),i=j(this,Gl);if(_1(i)){let s=L0(j(r,We),j(r,Ve),j(r,Ze),j(r,Ot),j(r,Bt),j(r,Dt),j(r,Ct),j(r,Nt),j(r,jt));if(s===null)throw new RangeError("DateTime outside of supported range");let a=$0(i);return[new n(K.default.subtract(s,K.default.BigInt(a)))]}return function(a,u,m,p,b,A,M,S,P,k){let R=L0(u,m,p,b,A,M,S,P,k);if(R===null)throw new RangeError("DateTime outside of supported range");let B=K.default.subtract(R,Yl);K.default.lessThan(B,hS)&&(B=R);let I=K.default.add(R,Yl);K.default.greaterThan(I,I1)&&(I=R);let q=Dh(a,B),$=Dh(a,I);return(q===$?[q]:[q,$]).map(U=>{let F=K.default.subtract(R,K.default.BigInt(U)),L=Jme(a,F);if(u===L.year&&m===L.month&&p===L.day&&b===L.hour&&A===L.minute&&M===L.second&&S===L.millisecond&&P===L.microsecond&&k===L.nanosecond)return F}).filter(U=>U!==void 0)}(i,j(r,We),j(r,Ve),j(r,Ze),j(r,Ot),j(r,Bt),j(r,Dt),j(r,Ct),j(r,Nt),j(r,jt)).map(s=>new n(s))}getNextTransition(e){if(!Rc(this))throw new TypeError("invalid receiver");let r=Au(e),n=j(this,Gl);if(_1(n)||n==="UTC")return null;let i=j(r,ht),o=Fe("%Temporal.Instant%");return i=Qme(n,i),i===null?null:new o(i)}getPreviousTransition(e){if(!Rc(this))throw new TypeError("invalid receiver");let r=Au(e),n=j(this,Gl);if(_1(n)||n==="UTC")return null;let i=j(r,ht),o=Fe("%Temporal.Instant%");return i=w$(n,i),i===null?null:new o(i)}toString(){if(!Rc(this))throw new TypeError("invalid receiver");return j(this,Gl)}toJSON(){if(!Rc(this))throw new TypeError("invalid receiver");return j(this,Gl)}static from(e){return Wme(Xo(e))}};ed(Pg,"Temporal.TimeZone"),On("Temporal.TimeZone.prototype.getOffsetNanosecondsFor",Pg.prototype.getOffsetNanosecondsFor),On("Temporal.TimeZone.prototype.getPossibleInstantsFor",Pg.prototype.getPossibleInstantsFor);var SXe=Object.create,vS=class{constructor(e,r,n="iso8601",i=1){Fme(this,vr(e),vr(r),Ta(n),vr(i))}get year(){if(!Rr(this))throw new TypeError("invalid receiver");return IP(j(this,xe),this)}get month(){if(!Rr(this))throw new TypeError("invalid receiver");return kP(j(this,xe),this)}get monthCode(){if(!Rr(this))throw new TypeError("invalid receiver");return TS(j(this,xe),this)}get calendarId(){if(!Rr(this))throw new TypeError("invalid receiver");return Io(j(this,xe))}get era(){if(!Rr(this))throw new TypeError("invalid receiver");return OP(j(this,xe),this)}get eraYear(){if(!Rr(this))throw new TypeError("invalid receiver");return BP(j(this,xe),this)}get daysInMonth(){if(!Rr(this))throw new TypeError("invalid receiver");return DP(j(this,xe),this)}get daysInYear(){if(!Rr(this))throw new TypeError("invalid receiver");return CP(j(this,xe),this)}get monthsInYear(){if(!Rr(this))throw new TypeError("invalid receiver");return NP(j(this,xe),this)}get inLeapYear(){if(!Rr(this))throw new TypeError("invalid receiver");return jP(j(this,xe),this)}with(e,r){if(!Rr(this))throw new TypeError("invalid receiver");if(!yn(e))throw new TypeError("invalid argument");$1(e);let n=tr(r),i=j(this,xe),o=pi(i,["month","monthCode","year"]),s=Gt(this,o,[]);return s=Ig(i,s,Gt(e,o,"partial")),s=Gt(s,o,[]),kg(i,s,n)}add(e,r){if(!Rr(this))throw new TypeError("invalid receiver");return gme("add",this,e,r)}subtract(e,r){if(!Rr(this))throw new TypeError("invalid receiver");return gme("subtract",this,e,r)}until(e,r){if(!Rr(this))throw new TypeError("invalid receiver");return lme("until",this,e,r)}since(e,r){if(!Rr(this))throw new TypeError("invalid receiver");return lme("since",this,e,r)}equals(e){if(!Rr(this))throw new TypeError("invalid receiver");let r=fS(e);for(let n of[We,Ve,Ze])if(j(this,n)!==j(r,n))return!1;return kS(j(this,xe),j(r,xe))}toString(e){if(!Rr(this))throw new TypeError("invalid receiver");return rme(this,SS(tr(e)))}toJSON(){if(!Rr(this))throw new TypeError("invalid receiver");return rme(this)}toLocaleString(e,r){if(!Rr(this))throw new TypeError("invalid receiver");return new Fh(e,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainYearMonth")}toPlainDate(e){if(!Rr(this))throw new TypeError("invalid receiver");if(!yn(e))throw new TypeError("argument should be an object");let r=j(this,xe),n=pi(r,["monthCode","year"]),i=Gt(this,n,[]),o=pi(r,["day"]),s=Ig(r,i,Gt(e,o,[]));s=Gt(s,[...new Set([...n,...o])],[]);let a=SXe(null);return a.overflow="reject",qh(r,s,a)}getISOFields(){if(!Rr(this))throw new TypeError("invalid receiver");return{calendar:j(this,xe),isoDay:j(this,Ze),isoMonth:j(this,Ve),isoYear:j(this,We)}}getCalendar(){if(!Rr(this))throw new TypeError("invalid receiver");return F1(j(this,xe))}static from(e,r){let n=tr(r);return Rr(e)?(ni(n),mS(j(e,We),j(e,Ve),j(e,xe),j(e,Ze))):fS(e,n)}static compare(e,r){let n=fS(e),i=fS(r);return j0(j(n,We),j(n,Ve),j(n,Ze),j(i,We),j(i,Ve),j(i,Ze))}};ed(vS,"Temporal.PlainYearMonth");var MXe=Fh.prototype.resolvedOptions,AXe=Object.create,wS=class{constructor(e,r,n="iso8601"){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");zme(this,lS(e),Xo(r),Ta(n))}get calendarId(){if(!Qe(this))throw new TypeError("invalid receiver");return Io(j(this,xe))}get timeZoneId(){if(!Qe(this))throw new TypeError("invalid receiver");return yS(j(this,Gr))}get year(){if(!Qe(this))throw new TypeError("invalid receiver");return IP(j(this,xe),hn(this))}get month(){if(!Qe(this))throw new TypeError("invalid receiver");return kP(j(this,xe),hn(this))}get monthCode(){if(!Qe(this))throw new TypeError("invalid receiver");return TS(j(this,xe),hn(this))}get day(){if(!Qe(this))throw new TypeError("invalid receiver");return RS(j(this,xe),hn(this))}get hour(){if(!Qe(this))throw new TypeError("invalid receiver");return j(hn(this),Ot)}get minute(){if(!Qe(this))throw new TypeError("invalid receiver");return j(hn(this),Bt)}get second(){if(!Qe(this))throw new TypeError("invalid receiver");return j(hn(this),Dt)}get millisecond(){if(!Qe(this))throw new TypeError("invalid receiver");return j(hn(this),Ct)}get microsecond(){if(!Qe(this))throw new TypeError("invalid receiver");return j(hn(this),Nt)}get nanosecond(){if(!Qe(this))throw new TypeError("invalid receiver");return j(hn(this),jt)}get era(){if(!Qe(this))throw new TypeError("invalid receiver");return OP(j(this,xe),hn(this))}get eraYear(){if(!Qe(this))throw new TypeError("invalid receiver");return BP(j(this,xe),hn(this))}get epochSeconds(){if(!Qe(this))throw new TypeError("invalid receiver");let e=j(this,ht);return K.default.toNumber(M1(e,Zl))}get epochMilliseconds(){if(!Qe(this))throw new TypeError("invalid receiver");let e=j(this,ht);return K.default.toNumber(M1(e,Oc))}get epochMicroseconds(){if(!Qe(this))throw new TypeError("invalid receiver");return SP(M1(j(this,ht),Ir))}get epochNanoseconds(){if(!Qe(this))throw new TypeError("invalid receiver");return SP(j(this,ht))}get dayOfWeek(){if(!Qe(this))throw new TypeError("invalid receiver");return Z$(j(this,xe),hn(this))}get dayOfYear(){if(!Qe(this))throw new TypeError("invalid receiver");return J$(j(this,xe),hn(this))}get weekOfYear(){if(!Qe(this))throw new TypeError("invalid receiver");return Y$(j(this,xe),hn(this))}get yearOfWeek(){if(!Qe(this))throw new TypeError("invalid receiver");return Q$(j(this,xe),hn(this))}get hoursInDay(){if(!Qe(this))throw new TypeError("invalid receiver");let e=hn(this),r=Fe("%Temporal.PlainDateTime%"),n=j(e,We),i=j(e,Ve),o=j(e,Ze),s=new r(n,i,o,0,0,0,0,0,0),a=Mg(n,i,o,0,0,0,1,"reject"),u=new r(a.year,a.month,a.day,0,0,0,0,0,0),m=j(this,Gr),p=j(Ms(m,s,"compatible"),ht),b=j(Ms(m,u,"compatible"),ht);return Wl(K.default.subtract(b,p),Dme)}get daysInWeek(){if(!Qe(this))throw new TypeError("invalid receiver");return X$(j(this,xe),hn(this))}get daysInMonth(){if(!Qe(this))throw new TypeError("invalid receiver");return DP(j(this,xe),hn(this))}get daysInYear(){if(!Qe(this))throw new TypeError("invalid receiver");return CP(j(this,xe),hn(this))}get monthsInYear(){if(!Qe(this))throw new TypeError("invalid receiver");return NP(j(this,xe),hn(this))}get inLeapYear(){if(!Qe(this))throw new TypeError("invalid receiver");return jP(j(this,xe),hn(this))}get offset(){if(!Qe(this))throw new TypeError("invalid receiver");return v$(j(this,Gr),j(this,Qo))}get offsetNanoseconds(){if(!Qe(this))throw new TypeError("invalid receiver");return Tu(j(this,Gr),j(this,Qo))}with(e,r){if(!Qe(this))throw new TypeError("invalid receiver");if(!yn(e))throw new TypeError("invalid zoned-date-time-like");$1(e);let n=tr(r),i=j(this,xe),o=pi(i,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);o.push("offset");let s=Gt(this,o,["offset"]);s=Ig(i,s,Gt(e,o,"partial")),s=Gt(s,o,["offset"]);let a=O1(n),u=gP(n,"prefer"),{year:m,month:p,day:b,hour:A,minute:M,second:S,millisecond:P,microsecond:k,nanosecond:R}=PS(i,s,n),B=$0(s.offset),I=j(this,Gr);return Po(vP(m,p,b,A,M,S,P,k,R,"option",B,I,a,u,!1),I,i)}withPlainDate(e){if(!Qe(this))throw new TypeError("invalid receiver");let r=Zr(e),n=j(r,We),i=j(r,Ve),o=j(r,Ze),s=j(r,xe),a=hn(this),u=j(a,Ot),m=j(a,Bt),p=j(a,Dt),b=j(a,Ct),A=j(a,Nt),M=j(a,jt);s=Kme(j(this,xe),s);let S=j(this,Gr);return Po(j(Ms(S,new(Fe("%Temporal.PlainDateTime%"))(n,i,o,u,m,p,b,A,M,s),"compatible"),ht),S,s)}withPlainTime(e){if(!Qe(this))throw new TypeError("invalid receiver");let r=Fe("%Temporal.PlainTime%"),n=e===void 0?new r:Bh(e),i=hn(this),o=j(i,We),s=j(i,Ve),a=j(i,Ze),u=j(this,xe),m=j(n,Ot),p=j(n,Bt),b=j(n,Dt),A=j(n,Ct),M=j(n,Nt),S=j(n,jt),P=j(this,Gr);return Po(j(Ms(P,new(Fe("%Temporal.PlainDateTime%"))(o,s,a,m,p,b,A,M,S,u),"compatible"),ht),P,u)}withTimeZone(e){if(!Qe(this))throw new TypeError("invalid receiver");let r=Xo(e);return Po(j(this,ht),r,j(this,xe))}withCalendar(e){if(!Qe(this))throw new TypeError("invalid receiver");let r=Ta(e);return Po(j(this,ht),j(this,Gr),r)}add(e,r){if(!Qe(this))throw new TypeError("invalid receiver");return bme("add",this,e,r)}subtract(e,r){if(!Qe(this))throw new TypeError("invalid receiver");return bme("subtract",this,e,r)}until(e,r){if(!Qe(this))throw new TypeError("invalid receiver");return dme("until",this,e,r)}since(e,r){if(!Qe(this))throw new TypeError("invalid receiver");return dme("since",this,e,r)}round(e){if(!Qe(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let r=typeof e=="string"?N1("smallestUnit",e):tr(e),n=L1(r),i=Pu(r,"halfExpand"),o=Pa(r,"smallestUnit","time",Tg,["day"]),s={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[o];U1(n,s,s===1);let a=hn(this),u=j(a,We),m=j(a,Ve),p=j(a,Ze),b=j(a,Ot),A=j(a,Bt),M=j(a,Dt),S=j(a,Ct),P=j(a,Nt),k=j(a,jt),R=Fe("%Temporal.PlainDateTime%"),B=j(this,Gr),I=j(this,xe),q=Ms(B,new R(j(a,We),j(a,Ve),j(a,Ze),0,0,0,0,0,0),"compatible"),$=Bc(q,B,I,0,0,0,1,0,0,0,0,0,0),U=K.default.subtract($,K.default.BigInt(j(q,ht)));if(K.default.lessThanOrEqual(U,zn))throw new RangeError("cannot round a ZonedDateTime in a calendar with zero or negative length days");return{year:u,month:m,day:p,hour:b,minute:A,second:M,millisecond:S,microsecond:P,nanosecond:k}=cL(u,m,p,b,A,M,S,P,k,n,o,i,K.default.toNumber(U)),Po(vP(u,m,p,b,A,M,S,P,k,"option",Tu(B,j(this,Qo)),B,"compatible","prefer",!1),B,j(this,xe))}equals(e){if(!Qe(this))throw new TypeError("invalid receiver");let r=uS(e),n=j(this,ht),i=j(r,ht);return!!K.default.equal(K.default.BigInt(n),K.default.BigInt(i))&&!!Gme(j(this,Gr),j(r,Gr))&&kS(j(this,xe),j(r,xe))}toString(e){if(!Qe(this))throw new TypeError("invalid receiver");let r=tr(e),n=SS(r),i=MS(r),o=function(M){return F0(M,"offset",["auto","never"],"auto")}(r),s=Pu(r,"trunc"),a=Pa(r,"smallestUnit","time",void 0);if(a==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let u=function(M){return F0(M,"timeZoneName",["auto","never","critical"],"auto")}(r),{precision:m,unit:p,increment:b}=AS(a,i);return nme(this,m,n,u,o,{unit:p,increment:b,roundingMode:s})}toLocaleString(e,r){if(!Qe(this))throw new TypeError("invalid receiver");let n=tr(r),i=AXe(null);if(E1(i,n,["timeZone"]),n.timeZone!==void 0)throw new TypeError("ZonedDateTime toLocaleString does not accept a timeZone option");i.year===void 0&&i.month===void 0&&i.day===void 0&&i.weekday===void 0&&i.dateStyle===void 0&&i.hour===void 0&&i.minute===void 0&&i.second===void 0&&i.timeStyle===void 0&&i.dayPeriod===void 0&&i.timeZoneName===void 0&&(i.timeZoneName="short");let o=yS(j(this,Gr));if(_1(o))throw new RangeError("toLocaleString does not support offset string time zones");o=tL(o),i.timeZone=o;let s=new Fh(e,i),a=nt(MXe,s,[]).calendar,u=Io(j(this,xe));if(u!=="iso8601"&&a!=="iso8601"&&a!==u)throw new RangeError(`cannot format ZonedDateTime with calendar ${u} in locale with calendar ${a}`);return s.format(j(this,Qo))}toJSON(){if(!Qe(this))throw new TypeError("invalid receiver");return nme(this,"auto")}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.ZonedDateTime")}startOfDay(){if(!Qe(this))throw new TypeError("invalid receiver");let e=hn(this),r=Fe("%Temporal.PlainDateTime%"),n=j(this,xe),i=new r(j(e,We),j(e,Ve),j(e,Ze),0,0,0,0,0,0,n),o=j(this,Gr);return Po(j(Ms(o,i,"compatible"),ht),o,n)}toInstant(){if(!Qe(this))throw new TypeError("invalid receiver");return new(Fe("%Temporal.Instant%"))(j(this,ht))}toPlainDate(){if(!Qe(this))throw new TypeError("invalid receiver");return D1(hn(this))}toPlainTime(){if(!Qe(this))throw new TypeError("invalid receiver");return eL(hn(this))}toPlainDateTime(){if(!Qe(this))throw new TypeError("invalid receiver");return hn(this)}toPlainYearMonth(){if(!Qe(this))throw new TypeError("invalid receiver");let e=j(this,xe);return kg(e,Gt(this,pi(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!Qe(this))throw new TypeError("invalid receiver");let e=j(this,xe);return B1(e,Gt(this,pi(e,["day","monthCode"]),[]))}getISOFields(){if(!Qe(this))throw new TypeError("invalid receiver");let e=hn(this),r=j(this,Gr);return{calendar:j(this,xe),isoDay:j(e,Ze),isoHour:j(e,Ot),isoMicrosecond:j(e,Nt),isoMillisecond:j(e,Ct),isoMinute:j(e,Bt),isoMonth:j(e,Ve),isoNanosecond:j(e,jt),isoSecond:j(e,Dt),isoYear:j(e,We),offset:v$(r,j(this,Qo)),timeZone:r}}getCalendar(){if(!Qe(this))throw new TypeError("invalid receiver");return F1(j(this,xe))}getTimeZone(){if(!Qe(this))throw new TypeError("invalid receiver");return Wme(j(this,Gr))}static from(e,r){let n=tr(r);return Qe(e)?(O1(n),gP(n,"reject"),ni(n),Po(j(e,ht),j(e,Gr),j(e,xe))):uS(e,n)}static compare(e,r){let n=uS(e),i=uS(r),o=j(n,ht),s=j(i,ht);return K.default.lessThan(K.default.BigInt(o),K.default.BigInt(s))?-1:K.default.greaterThan(K.default.BigInt(o),K.default.BigInt(s))?1:0}};function hn(t){return Qa(j(t,Gr),j(t,Qo),j(t,xe))}ed(wS,"Temporal.ZonedDateTime");var qg=Object.freeze({__proto__:null,Calendar:_n,Duration:Vl,Instant:kc,Now:Aye,PlainDate:Dg,PlainDateTime:Cg,PlainMonthDay:bS,PlainTime:jh,PlainYearMonth:vS,TimeZone:Pg,ZonedDateTime:wS});var PXe=[kc,_n,Dg,Cg,Vl,bS,jh,Pg,vS,wS];for(let t of PXe){let e=Object.getOwnPropertyDescriptor(t,"prototype");(e.configurable||e.enumerable||e.writable)&&(e.configurable=!1,e.enumerable=!1,e.writable=!1,Object.defineProperty(t,"prototype",e))}var Yt=class{static async sleep(e){return new Promise(r=>setTimeout(r,e))}static async minimalSleep(){await Yt.sleep(2)}static getCurrentTimestamp(){return qg.Now.instant().toString({smallestUnit:"microseconds"})}static createTimestamp(e){let{year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:u,microsecond:m}=e;return qg.ZonedDateTime.from({timeZone:"UTC",year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:u,microsecond:m}).toInstant().toString({smallestUnit:"microseconds"})}static createOffsetTimestamp(e,r){let n=r?qg.Instant.from(r):qg.Now.instant(),i=qg.Duration.from(e);return n.add(i).toString({smallestUnit:"microseconds"})}static validateTimestamp(e){try{qg.Instant.from(e)}catch{throw new be("TimestampInvalid",`Invalid timestamp: ${e}`)}}};var _t=class{get message(){if(this._message.authorization===void 0)throw new be("RecordsWriteMissingSigner","This RecordsWrite is not yet signed, JSON message cannot be generated from an incomplete state.");return this._message}get author(){return this._author}get signaturePayload(){return this._signaturePayload}get owner(){return this._owner}get ownerSignaturePayload(){return this._ownerSignaturePayload}get isSignedByAuthorDelegate(){return Ue.isSignedByAuthorDelegate(this._message)}get isSignedByOwnerDelegate(){return Ue.isSignedByOwnerDelegate(this._message)}get signer(){return Ue.getSigner(this._message)}get ownerSignatureSigner(){return this._message.authorization?.ownerSignature===void 0?void 0:Kt.getSignerDid(this._message.authorization.ownerSignature.signatures[0])}constructor(e,r){this.parentContextId=r,this._message=e,e.authorization!==void 0&&(this._author=et.getAuthor(e),this._signaturePayload=Kt.decodePlainObjectPayload(e.authorization.signature),e.authorization.ownerSignature!==void 0&&(e.authorization.ownerDelegatedGrant!==void 0?this._owner=Ue.getSigner(e.authorization.ownerDelegatedGrant):this._owner=Kt.getSignerDid(e.authorization.ownerSignature.signatures[0]),this._ownerSignaturePayload=Kt.decodePlainObjectPayload(e.authorization.ownerSignature))),this.attesters=_t.getAttesters(e)}static async parse(e){let r=JSON.parse(JSON.stringify(e));await Ue.validateSignatureStructure(r.authorization.signature,r.descriptor,"RecordsWriteSignaturePayload"),r.authorization.ownerSignature!==void 0&&await Ue.validateSignatureStructure(r.authorization.ownerSignature,r.descriptor),await _t.validateAttestationIntegrity(r);let n=new _t(r);return await n.validateIntegrity(),n}static async create(e){if(e.protocol===void 0&&e.protocolPath!==void 0||e.protocol!==void 0&&e.protocolPath===void 0)throw new be("RecordsWriteCreateProtocolAndProtocolPathMutuallyInclusive","`protocol` and `protocolPath` must both be defined or undefined at the same time");if(e.data===void 0&&e.dataCid===void 0||e.data!==void 0&&e.dataCid!==void 0)throw new be("RecordsWriteCreateDataAndDataCidMutuallyExclusive","one and only one parameter between `data` and `dataCid` is required");if(e.dataCid===void 0&&e.dataSize!==void 0||e.dataCid!==void 0&&e.dataSize===void 0)throw new be("RecordsWriteCreateDataCidAndDataSizeMutuallyInclusive","`dataCid` and `dataSize` must both be defined or undefined at the same time");if(e.signer===void 0&&e.delegatedGrant!==void 0)throw new be("RecordsWriteCreateMissingSigner","`signer` must be given when `delegatedGrant` is given");let r=e.dataCid??await jn.computeDagPbCidFromBytes(e.data),n=e.dataSize??e.data.length,i=Yt.getCurrentTimestamp(),o={interface:"Records",method:"Write",protocol:e.protocol!==void 0?Ja(e.protocol):void 0,protocolPath:e.protocolPath,recipient:e.recipient,schema:e.schema!==void 0?wg(e.schema):void 0,tags:e.tags,parentId:_t.getRecordIdFromContextId(e.parentContextId),dataCid:r,dataSize:n,dateCreated:e.dateCreated??i,messageTimestamp:e.messageTimestamp??i,published:e.published,datePublished:e.datePublished,dataFormat:e.dataFormat};e.published===!0&&e.datePublished===void 0&&(o.datePublished=i),sn(o);let s=e.recordId,a=await jn.computeCid(o),u=await _t.createAttestation(a,e.attestationSigners),m=await _t.createEncryptionProperty(o,e.encryptionInput),p={recordId:s,descriptor:o};u!==void 0&&(p.attestation=u),m!==void 0&&(p.encryption=m);let b=new _t(p,e.parentContextId);return e.signer!==void 0&&await b.sign({signer:e.signer,delegatedGrant:e.delegatedGrant,permissionGrantId:e.permissionGrantId,protocolRole:e.protocolRole}),b}static getRecordIdFromContextId(e){return e?.split("/").filter(r=>r!=="").pop()}static async createFrom(e){let r=e.recordsWriteMessage,n=await _t.parse(r),i=Yt.getCurrentTimestamp(),o=e.published??(e.datePublished?!0:r.descriptor.published),s;e.datePublished?s=e.datePublished:o&&(r.descriptor.published?s=r.descriptor.datePublished:s=i);let a={recipient:r.descriptor.recipient,recordId:r.recordId,dateCreated:r.descriptor.dateCreated,protocol:r.descriptor.protocol,protocolPath:r.descriptor.protocolPath,schema:r.descriptor.schema,parentContextId:et.getParentContextFromOfContextId(r.contextId),messageTimestamp:e.messageTimestamp??i,published:o,datePublished:s,tags:e.tags,data:e.data,dataCid:e.data?void 0:r.descriptor.dataCid,dataSize:e.data?void 0:r.descriptor.dataSize,dataFormat:e.dataFormat??r.descriptor.dataFormat,protocolRole:e.protocolRole??n.signaturePayload.protocolRole,delegatedGrant:e.delegatedGrant,signer:e.signer,attestationSigners:e.attestationSigners};return await _t.create(a)}toJSON(){return this.message}async encryptSymmetricEncryptionKey(e){this._message.encryption=await _t.createEncryptionProperty(this._message.descriptor,e),delete this._message.authorization,this._signaturePayload=void 0,this._author=void 0}async sign(e){let{signer:r,delegatedGrant:n,permissionGrantId:i,protocolRole:o}=e,s,a;n!==void 0?(s=await Ue.getCid(n),a=Kt.getSignerDid(n.authorization.signature.signatures[0])):a=Kt.extractDid(r.keyId);let u=this._message.descriptor,m=await jn.computeCid(u);this._message.recordId=this._message.recordId??await _t.getEntryId(a,u),this._message.descriptor.protocol!==void 0&&(this.parentContextId===void 0||this.parentContextId===""?this._message.contextId=this._message.recordId:this._message.contextId=this.parentContextId+"/"+this._message.recordId);let p=await _t.createSignerSignature({recordId:this._message.recordId,contextId:this._message.contextId,descriptorCid:m,attestation:this._message.attestation,encryption:this._message.encryption,signer:r,delegatedGrantId:s,permissionGrantId:i,protocolRole:o});this._message.authorization={signature:p},n!==void 0&&(this._message.authorization.authorDelegatedGrant=n),this._signaturePayload=Kt.decodePlainObjectPayload(p),this._author=a}async signAsOwner(e){if(this._author===void 0)throw new be("RecordsWriteSignAsOwnerUnknownAuthor","Unable to sign as owner without message signature because owner needs to sign over `recordId` which depends on author DID.");let r=this._message.descriptor,n=await Ue.createSignature(r,e);this._message.authorization.ownerSignature=n,this._ownerSignaturePayload=Kt.decodePlainObjectPayload(n),this._owner=Kt.extractDid(e.keyId)}async signAsOwnerDelegate(e,r){if(this._author===void 0)throw new be("RecordsWriteSignAsOwnerDelegateUnknownAuthor","Unable to sign as owner delegate without message signature because owner delegate needs to sign over `recordId` which depends on author DID.");let n=await Ue.getCid(r),i=this._message.descriptor,o=await Ue.createSignature(i,e,{delegatedGrantId:n});this._message.authorization.ownerSignature=o,this._message.authorization.ownerDelegatedGrant=r,this._ownerSignaturePayload=Kt.decodePlainObjectPayload(o),this._owner=Kt.getSignerDid(r.authorization.signature.signatures[0])}async validateIntegrity(){if(await this.isInitialWrite()){let n=this.message.descriptor.dateCreated,i=this.message.descriptor.messageTimestamp;if(i!==n)throw new be("RecordsWriteValidateIntegrityDateCreatedMismatch",`messageTimestamp ${i} must match dateCreated ${n} for the initial write`);if(this.message.descriptor.protocol!==void 0&&this.message.descriptor.parentId===void 0){let o=await this.getEntryId();if(this.message.contextId!==o)throw new be("RecordsWriteValidateIntegrityContextIdMismatch",`contextId in message: ${this.message.contextId} does not match deterministic contextId: ${o}`)}}let r=this.signaturePayload;if(this.message.recordId!==r.recordId)throw new be("RecordsWriteValidateIntegrityRecordIdUnauthorized",`recordId in message ${this.message.recordId} does not match recordId in authorization: ${r.recordId}`);if(this.message.contextId!==r.contextId)throw new be("RecordsWriteValidateIntegrityContextIdNotInSignerSignaturePayload",`contextId in message ${this.message.contextId} does not match contextId in authorization: ${r.contextId}`);if(await et.validateDelegatedGrantReferentialIntegrity(this.message,r,this.ownerSignaturePayload),r.attestationCid!==void 0){let n=await jn.computeCid(this.message.attestation),i=r.attestationCid;if(i!==n)throw new be("RecordsWriteValidateIntegrityAttestationMismatch",`CID ${n} of attestation property in message does not match attestationCid in authorization: ${i}`)}if(r.encryptionCid!==void 0){let n=await jn.computeCid(this.message.encryption),i=r.encryptionCid;if(i!==n)throw new be("RecordsWriteValidateIntegrityEncryptionCidMismatch",`CID ${n} of encryption property in message does not match encryptionCid in authorization: ${i}`)}this.message.descriptor.protocol!==void 0&&ra(this.message.descriptor.protocol),this.message.descriptor.schema!==void 0&&C0(this.message.descriptor.schema),Yt.validateTimestamp(this.message.descriptor.messageTimestamp),Yt.validateTimestamp(this.message.descriptor.dateCreated),this.message.descriptor.datePublished&&Yt.validateTimestamp(this.message.descriptor.datePublished)}static async validateAttestationIntegrity(e){if(e.attestation===void 0)return;if(e.attestation.signatures.length!==1)throw new be("RecordsWriteAttestationIntegrityMoreThanOneSignature",`Currently implementation only supports 1 attester, but got ${e.attestation.signatures.length}`);let r=Kt.decodePlainObjectPayload(e.attestation),{descriptorCid:n}=r,i=await jn.computeCid(e.descriptor);if(n!==i)throw new be("RecordsWriteAttestationIntegrityDescriptorCidMismatch",`descriptorCid ${n} does not match expected descriptorCid ${i}`);let o=Object.keys(r).length;if(o>1)throw new be("RecordsWriteAttestationIntegrityInvalidPayloadProperty",`Only 'descriptorCid' is allowed in attestation payload, but got ${o} properties.`)}async getEntryId(){return await _t.getEntryId(this.author,this.message.descriptor)}static async getEntryId(e,r){if(e===void 0)throw new be("RecordsWriteGetEntryIdUndefinedAuthor","Property `author` is needed to compute entry ID.");let n={...r};return n.author=e,await jn.computeCid(n)}async isInitialWrite(){return await this.getEntryId()===this.message.recordId}async constructIndexes(e){let r=this.message,{tags:n,...i}=r.descriptor;delete i.published;let o={...i,isLatestBaseState:e,published:!!r.descriptor.published,author:this.author,recordId:r.recordId,entryId:await _t.getEntryId(this.author,this.message.descriptor)};if(n!==void 0&&e===!0){let s=et.buildTagIndexes({...n});o={...o,...s}}return this.attesters.length>0&&(o.attester=this.attesters[0]),r.contextId!==void 0&&(o.contextId=r.contextId),o}async authorizeAuthorDelegate(e){let r=await Ni.parse(this.message.authorization.authorDelegatedGrant);await Vi.authorizeWrite({recordsWriteMessage:this.message,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:r,messageStore:e})}async authorizeOwnerDelegate(e){let r=await Ni.parse(this.message.authorization.ownerDelegatedGrant);await Vi.authorizeWrite({recordsWriteMessage:this.message,expectedGrantor:this.owner,expectedGrantee:this.ownerSignatureSigner,permissionGrant:r,messageStore:e})}static async isInitialWrite(e){if(e.descriptor.interface!=="Records"||e.descriptor.method!=="Write")return!1;let r=e,n=et.getAuthor(r);return await _t.getEntryId(n,r.descriptor)===r.recordId}static async createEncryptionProperty(e,r){if(r===void 0)return;let n=[];for(let o of r.keyEncryptionInputs){if(o.derivationScheme==="protocolPath"&&e.protocol===void 0)throw new be("RecordsWriteMissingProtocol","`protocols` encryption scheme cannot be applied to record without the `protocol` property.");if(o.derivationScheme==="schemas"&&e.schema===void 0)throw new be("RecordsWriteMissingSchema","`schemas` encryption scheme cannot be applied to record without the `schema` property.");let s=fn.publicJwkToBytes(o.publicKey),a=await Sf.eciesSecp256k1Encrypt(s,r.key),u=Je.bytesToBase64Url(a.ciphertext),m=await fn.publicKeyToJwk(a.ephemeralPublicKey),p=Je.bytesToBase64Url(a.initializationVector),b=Je.bytesToBase64Url(a.messageAuthenticationCode),A={rootKeyId:o.publicKeyId,algorithm:o.algorithm??"ECIES-ES256K",derivationScheme:o.derivationScheme,ephemeralPublicKey:m,initializationVector:p,messageAuthenticationCode:b,encryptedKey:u};o.derivationScheme==="protocolContext"&&(A.derivedPublicKey=o.publicKey),n.push(A)}return{algorithm:r.algorithm??"A256CTR",initializationVector:Je.bytesToBase64Url(r.initializationVector),keyEncryption:n}}static async createAttestation(e,r){if(r===void 0||r.length===0)return;let n={descriptorCid:e},i=Je.objectToBytes(n);return(await kh.create(i,r)).getJws()}static async createSignerSignature(e){let{recordId:r,contextId:n,descriptorCid:i,attestation:o,encryption:s,signer:a,delegatedGrantId:u,permissionGrantId:m,protocolRole:p}=e,b=o?await jn.computeCid(o):void 0,A=s?await jn.computeCid(s):void 0,M={recordId:r,descriptorCid:i,contextId:n,attestationCid:b,encryptionCid:A,delegatedGrantId:u,permissionGrantId:m,protocolRole:p};sn(M);let S=Je.objectToBytes(M);return(await kh.create(S,[a])).getJws()}static async getInitialWrite(e){for(let r of e)if(await _t.isInitialWrite(r))return r;throw new be("RecordsWriteGetInitialWriteNotFound","Initial write is not found.")}static verifyEqualityOfImmutableProperties(e,r){let n=["dataCid","dataSize","dataFormat","datePublished","published","messageTimestamp","tags"],i=[];i.push(...Object.keys(e.descriptor)),i.push(...Object.keys(r.descriptor)),i=[...new Set(i)];for(let o of i)if(n.indexOf(o)===-1){let s=e.descriptor[o],a=r.descriptor[o];if(a!==s)throw new be("RecordsWriteImmutablePropertyChanged",`${o} is an immutable property: cannot change '${s}' to '${a}'`)}return!0}static getAttesters(e){return(e.attestation?.signatures??[]).map(i=>Kt.getSignerDid(i))}static async fetchNewestRecordsWrite(e,r,n){let i={interface:"Records",method:"Write",recordId:n},{messages:o}=await e.query(r,[i]),s=await Ue.getNewestMessage(o);if(s!==void 0)return s;throw new be("RecordsWriteGetNewestWriteRecordNotFound","record not found")}static async fetchInitialRecordsWrite(e,r,n){let i={entryId:n},{messages:o}=await e.query(r,[i]);return o.length===0?void 0:await _t.parse(o[0])}};async function Yi(t,e){if(t===void 0)throw new be("AuthenticateJwsMissing","Missing JWS.");if(await Fa.verifySignatures(t.signature,e),t.ownerSignature!==void 0&&await Fa.verifySignatures(t.ownerSignature,e),t.authorDelegatedGrant!==void 0){let r=await _t.parse(t.authorDelegatedGrant);await Fa.verifySignatures(r.message.authorization.signature,e)}if(t.ownerDelegatedGrant!==void 0){let r=await _t.parse(t.ownerDelegatedGrant);await Fa.verifySignatures(r.message.authorization.signature,e)}}async function Pye(t,e){if(e.author!==t)throw new be("AuthorizationAuthorNotOwner",`Message authored by ${e.author}, not authored by expected owner ${t}.`)}_();var BS=class{async isActiveTenant(e){return{isActiveTenant:!0}}};_();_();var po=class{get message(){return this._message}get signer(){return this._signer}get author(){return this._author}get signaturePayload(){return this._signaturePayload}constructor(e){this._message=e,e.authorization!==void 0&&(this._signer=Ue.getSigner(e),e.authorization.authorDelegatedGrant!==void 0?this._author=Ue.getSigner(e.authorization.authorDelegatedGrant):this._author=this._signer,this._signaturePayload=Kt.decodePlainObjectPayload(e.authorization.signature))}toJSON(){return this.message}};var nd=class extends po{static async parse(e){if(e.descriptor.filter.published===!1&&(e.descriptor.dateSort==="publishedAscending"||e.descriptor.dateSort==="publishedDescending"))throw new be("RecordsQueryParseFilterPublishedSortInvalid",`queries must not filter for \`published:false\` and sort by ${e.descriptor.dateSort}`);let r;if(e.authorization!==void 0&&(r=await Ue.validateSignatureStructure(e.authorization.signature,e.descriptor)),await et.validateDelegatedGrantReferentialIntegrity(e,r),r?.protocolRole!==void 0&&e.descriptor.filter.protocolPath===void 0)throw new be("RecordsQueryFilterMissingRequiredProperties","Role-authorized queries must include `protocolPath` in the filter");return e.descriptor.filter.protocol!==void 0&&ra(e.descriptor.filter.protocol),e.descriptor.filter.schema!==void 0&&C0(e.descriptor.filter.schema),Yt.validateTimestamp(e.descriptor.messageTimestamp),new nd(e)}static async create(e){let r={interface:"Records",method:"Query",messageTimestamp:e.messageTimestamp??Yt.getCurrentTimestamp(),filter:et.normalizeFilter(e.filter),dateSort:e.dateSort,pagination:e.pagination};if(e.filter.published===!1&&(e.dateSort==="publishedAscending"||e.dateSort==="publishedDescending"))throw new be("RecordsQueryCreateFilterPublishedSortInvalid",`queries must not filter for \`published:false\` and sort by ${e.dateSort}`);sn(r);let n=e.signer,i;n&&(i=await Ue.createAuthorization({descriptor:r,signer:n,protocolRole:e.protocolRole,delegatedGrant:e.delegatedGrant}));let o={descriptor:r,authorization:i};return Ue.validateJsonSchema(o),new nd(o)}async authorizeDelegate(e){let r=await Ni.parse(this.message.authorization.authorDelegatedGrant);await Vi.authorizeQueryOrSubscribe({incomingMessage:this.message,expectedGrantee:this.signer,expectedGrantor:this.author,permissionGrant:r,messageStore:e})}};_();_();_();var zP=Zt(rP(),1),mo=class{static async toBytes(e){return new Promise((r,n)=>{let i=[];e.on("data",o=>{i.push(o)}),e.on("end",()=>{let o=mo.concatenateArrayOfBytes(i);r(o)}),e.on("error",n)})}static async toObject(e){let r=await mo.toBytes(e);return Je.bytesToObject(r)}static concatenateArrayOfBytes(e){let r=e.reduce((o,s)=>o+s.length,0),n=new Uint8Array(r),i=0;for(let o of e)n.set(o,i),i+=o.length;return n}static fromBytes(e){let n=0;return new zP.Readable({read(o){n+1e5>e.length?(this.push(e.subarray(n)),this.push(null)):(this.push(e.subarray(n,n+1e5)),n=n+1e5)}})}static fromObject(e){let r=Je.objectToBytes(e);return mo.fromBytes(r)}static duplicateDataStream(e,r){let n=[];for(let i=0;i<r;i++){let o=new zP.PassThrough;e.pipe(o),n.push(o)}return n}};_();_();function gr(t,e){let r=t instanceof Error?t.message:"Error";return{status:{code:e,detail:r}}}_();_();_();_();var $g=class{static async parse(e){return new $g(e)}constructor(e){this.id=e.recordId,this.requester=Ue.getSigner(e);let r=e.encodedData,n=Je.base64UrlToObject(r);this.delegated=n.delegated,this.description=n.description,this.scope=n.scope,this.conditions=n.conditions}};var qi=class{static parseRequest(e){return Je.base64UrlToObject(e)}static async createRequest(e){if(this.isRecordPermissionScope(e.scope)&&e.scope.protocol===void 0)throw new be("PermissionsProtocolCreateRequestRecordsScopeMissingProtocol","Permission request for Records must have a scope with a `protocol` property");let r=qi.normalizePermissionScope(e.scope),n={description:e.description,delegated:e.delegated,scope:r,conditions:e.conditions},i;this.hasProtocolScope(r)&&(i={protocol:r.protocol});let o=Je.objectToBytes(n),s=await _t.create({signer:e.signer,messageTimestamp:e.dateRequested,protocol:qi.uri,protocolPath:qi.requestPath,dataFormat:"application/json",data:o,tags:i}),a={...s.message,encodedData:Je.bytesToBase64Url(o)};return{recordsWrite:s,permissionRequestData:n,permissionRequestBytes:o,dataEncodedMessage:a}}static async createGrant(e){if(this.isRecordPermissionScope(e.scope)&&e.scope.protocol===void 0)throw new be("PermissionsProtocolCreateGrantRecordsScopeMissingProtocol","Permission grants for Records must have a scope with a `protocol` property");let r=qi.normalizePermissionScope(e.scope),n={dateExpires:e.dateExpires,requestId:e.requestId,description:e.description,delegated:e.delegated,scope:r,conditions:e.conditions},i;this.hasProtocolScope(r)&&(i={protocol:r.protocol});let o=Je.objectToBytes(n),s=await _t.create({signer:e.signer,messageTimestamp:e.dateGranted,dateCreated:e.dateGranted,recipient:e.grantedTo,protocol:qi.uri,protocolPath:qi.grantPath,dataFormat:"application/json",data:o,tags:i}),a={...s.message,encodedData:Je.bytesToBase64Url(o)};return{recordsWrite:s,permissionGrantData:n,permissionGrantBytes:o,dataEncodedMessage:a}}static async createRevocation(e){let r={description:e.description},n=e.grant.id,i;this.hasProtocolScope(e.grant.scope)&&(i={protocol:Ja(e.grant.scope.protocol)});let o=Je.objectToBytes(r),s=await _t.create({signer:e.signer,parentContextId:n,protocol:qi.uri,protocolPath:qi.revocationPath,dataFormat:"application/json",data:o,tags:i}),a={...s.message,encodedData:Je.bytesToBase64Url(o)};return{recordsWrite:s,permissionRevocationData:r,permissionRevocationBytes:o,dataEncodedMessage:a}}static validateSchema(e,r){let n=Je.bytesToString(r),i=JSON.parse(n);if(e.descriptor.protocolPath===qi.requestPath){let o=i;Jd("PermissionRequestData",o),qi.validateScopeAndTags(o.scope,e)}else if(e.descriptor.protocolPath===qi.grantPath){Jd("PermissionGrantData",i);let o=i;qi.validateScopeAndTags(o.scope,e),Yt.validateTimestamp(o.dateExpires)}else if(e.descriptor.protocolPath===qi.revocationPath)Jd("PermissionRevocationData",i);else throw new be("PermissionsProtocolValidateSchemaUnexpectedRecord",`Unexpected permission record: ${e.descriptor.protocolPath}`)}static async fetchGrant(e,r,n){let i={recordId:n,isLatestBaseState:!0},{messages:o}=await r.query(e,[i]),s=o[0],a=s?.descriptor.interface,u=s?.descriptor.method;if(a!=="Records"||u!=="Write"||s.descriptor.protocolPath!==qi.grantPath)throw new be("GrantAuthorizationGrantMissing",`Could not find permission grant with record ID ${n}.`);let m=s;return await Ni.parse(m)}static async getScopeFromPermissionRecord(e,r,n){if(n.descriptor.protocol!==qi.uri)throw new be("PermissionsProtocolGetScopeInvalidProtocol",`Unexpected protocol for permission record: ${n.descriptor.protocol}`);return n.descriptor.protocolPath===qi.revocationPath?(await qi.fetchGrant(e,r,n.descriptor.parentId)).scope:n.descriptor.protocolPath===qi.grantPath?(await Ni.parse(n)).scope:(await $g.parse(n)).scope}static normalizePermissionScope(e){let r={...e};return qi.hasProtocolScope(r)&&(r.protocol=Ja(r.protocol)),r}static isRecordPermissionScope(e){return e.interface==="Records"}static hasProtocolScope(e){return"protocol"in e&&e.protocol!==void 0}static validateTags(e,r){if(e.descriptor.tags===void 0||e.descriptor.tags.protocol===void 0)throw new be("PermissionsProtocolValidateScopeMissingProtocolTag","Permission grants must have a `tags` property that contains a protocol tag");let n=e.descriptor.tags.protocol;if(n!==r)throw new be("PermissionsProtocolValidateScopeProtocolMismatch",`Permission grants must have a scope with a protocol that matches the tagged protocol: ${n}`)}static validateScopeAndTags(e,r){if(this.hasProtocolScope(e)&&(ra(e.protocol),this.validateTags(r,e.protocol)),!!this.isRecordPermissionScope(e)&&e.contextId!==void 0&&e.protocolPath!==void 0)throw new be("PermissionsProtocolValidateScopeContextIdProhibitedProperties","Permission grants cannot have both `contextId` and `protocolPath` present")}},wr=qi;wr.uri="https://tbd.website/dwn/permissions",wr.requestPath="request",wr.grantPath="grant",wr.revocationPath="grant/revocation",wr.definition={published:!0,protocol:qi.uri,types:{request:{dataFormats:["application/json"]},grant:{dataFormats:["application/json"]},revocation:{dataFormats:["application/json"]}},structure:{request:{$size:{max:1e4},$actions:[{who:"anyone",can:["create"]}]},grant:{$size:{max:1e4},$actions:[{who:"recipient",of:"grant",can:["read","query"]}],revocation:{$size:{max:1e4},$actions:[{who:"anyone",can:["read"]}]}}}};var V0=class{static normalizeFilters(e){let r=[];for(let n of e){let i=n.protocol!==void 0?Ja(n.protocol):void 0,o={...n,protocol:i};sn(o),aS(o)||r.push(o)}return r}static convertFilters(e){let r=[];for(let n of e){let i=this.constructPermissionRecordsFilter(n);i&&r.push(i),r.push(this.convertFilter(n))}return r}static constructPermissionRecordsFilter(e){let{protocol:r,messageTimestamp:n}=e;if(r!==void 0){let i={protocol:wr.uri,...et.convertTagsFilter({protocol:r})};if(n!=null){let o=ei.convertRangeCriterion(n);o&&(i.messageTimestamp=o)}return i}}static convertFilter(e){let r={...e},{messageTimestamp:n}=e,i=n?ei.convertRangeCriterion(n):void 0;return i&&(r.messageTimestamp=i,delete r.dateUpdated),r}};_();var id=class{static async authorizeMessagesRead(e){let{messagesReadMessage:r,messageToRead:n,expectedGrantor:i,expectedGrantee:o,permissionGrant:s,messageStore:a}=e;await na.performBaseValidation({incomingMessage:r,expectedGrantor:i,expectedGrantee:o,permissionGrant:s,messageStore:a});let u=s.scope;await id.verifyScope(i,n,u,a)}static async authorizeQueryOrSubscribe(e){let{incomingMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:o,messageStore:s}=e;if(await na.performBaseValidation({incomingMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:o,messageStore:s}),wr.hasProtocolScope(o.scope)){let a=o.scope.protocol;for(let u of r.descriptor.filters)if(u.protocol!==a)throw new be("EventsGrantAuthorizationMismatchedProtocol",`The protocol ${u.protocol} does not match the scoped protocol ${a}`)}}static async verifyScope(e,r,n,i){if(n.protocol!==void 0){if(r.descriptor.interface==="Records"){let o=r,s=et.isRecordsWrite(o)?o:await _t.fetchNewestRecordsWrite(i,e,o.descriptor.recordId);if(s.descriptor.protocol===n.protocol)return;if(s.descriptor.protocol===wr.uri){let a=await wr.getScopeFromPermissionRecord(e,i,s);if(wr.hasProtocolScope(a)&&a.protocol===n.protocol)return}}else if(r.descriptor.interface==="Protocols"&&r.descriptor.definition.protocol===n.protocol)return;throw new be("MessagesReadVerifyScopeFailed","record message failed scope authorization")}}};_();var od=class extends po{static async parse(e){Ue.validateJsonSchema(e),await Ue.validateSignatureStructure(e.authorization.signature,e.descriptor);for(let r of e.descriptor.filters)"protocol"in r&&r.protocol!==void 0&&ra(r.protocol);return new od(e)}static async create(e){let r={interface:"Messages",method:"Query",filters:e.filters?V0.normalizeFilters(e.filters):[],messageTimestamp:e.messageTimestamp??Yt.getCurrentTimestamp(),cursor:e.cursor};sn(r);let{permissionGrantId:n,signer:i}=e,o=await Ue.createAuthorization({descriptor:r,signer:i,permissionGrantId:n}),s={descriptor:r,authorization:o};return Ue.validateJsonSchema(s),new od(s)}};var K1=class{constructor(e,r,n){this.didResolver=e;this.messageStore=r;this.eventLog=n}async handle({tenant:e,message:r}){let n;try{n=await od.parse(r)}catch(a){return gr(a,400)}try{await Yi(r.authorization,this.didResolver),await K1.authorizeMessagesQuery(e,n,this.messageStore)}catch(a){return gr(a,401)}let i=V0.convertFilters(r.descriptor.filters),{events:o,cursor:s}=await this.eventLog.queryEvents(e,i,r.descriptor.cursor);return{status:{code:200,detail:"OK"},entries:o,cursor:s}}static async authorizeMessagesQuery(e,r,n){if(r.author!==e)if(r.author!==void 0&&r.signaturePayload.permissionGrantId!==void 0){let i=await wr.fetchGrant(e,n,r.signaturePayload.permissionGrantId);await id.authorizeQueryOrSubscribe({incomingMessage:r.message,expectedGrantor:e,expectedGrantee:r.author,permissionGrant:i,messageStore:n})}else throw new be("MessagesQueryAuthorizationFailed","message failed authorization")}};_();_();var Ru=class extends po{static async parse(e){return Ue.validateJsonSchema(e),this.validateMessageCid(e.descriptor.messageCid),await Ue.validateSignatureStructure(e.authorization.signature,e.descriptor),Yt.validateTimestamp(e.descriptor.messageTimestamp),new Ru(e)}static async create(e){let r={interface:"Messages",method:"Read",messageCid:e.messageCid,messageTimestamp:e.messageTimestamp??Yt.getCurrentTimestamp()},{signer:n,permissionGrantId:i}=e,o=await Ue.createAuthorization({descriptor:r,signer:n,permissionGrantId:i}),s={descriptor:r,authorization:o};return Ue.validateJsonSchema(s),Ru.validateMessageCid(e.messageCid),new Ru(s)}static validateMessageCid(e){try{jn.parseCid(e)}catch{throw new be("MessagesReadInvalidCid",`${e} is not a valid CID`)}}};var W1=class{constructor(e,r,n){this.didResolver=e;this.messageStore=r;this.dataStore=n}async handle({tenant:e,message:r}){let n;try{n=await Ru.parse(r)}catch(s){return gr(s,400)}try{await Yi(r.authorization,this.didResolver)}catch(s){return gr(s,401)}let i=await this.messageStore.get(e,r.descriptor.messageCid);if(i===void 0)return{status:{code:404,detail:"Not Found"}};try{await W1.authorizeMessagesRead(e,n,i,this.messageStore)}catch(s){return gr(s,401)}let o={message:i,messageCid:r.descriptor.messageCid};if(et.isRecordsWrite(i)){let s=o.message;if(s.encodedData!==void 0){let a=Je.base64UrlToBytes(s.encodedData);o.data=mo.fromBytes(a),delete s.encodedData}else{let a=await this.dataStore.get(e,s.recordId,s.descriptor.dataCid);a?.dataStream!==void 0&&(o.data=a.dataStream)}}return{status:{code:200,detail:"OK"},entry:o}}static async authorizeMessagesRead(e,r,n,i){if(r.author!==e)if(r.author!==void 0&&r.signaturePayload.permissionGrantId!==void 0){let o=await wr.fetchGrant(e,i,r.signaturePayload.permissionGrantId);await id.authorizeMessagesRead({messagesReadMessage:r.message,messageToRead:n,expectedGrantor:e,expectedGrantee:r.author,permissionGrant:o,messageStore:i})}else throw new be("MessagesReadAuthorizationFailed","protocol message failed authorization")}};_();_();var sd=class extends po{static async parse(e){Ue.validateJsonSchema(e),await Ue.validateSignatureStructure(e.authorization.signature,e.descriptor);for(let r of e.descriptor.filters)"protocol"in r&&r.protocol!==void 0&&ra(r.protocol);return Yt.validateTimestamp(e.descriptor.messageTimestamp),new sd(e)}static async create(e){let r=Yt.getCurrentTimestamp(),n={interface:"Messages",method:"Subscribe",filters:e.filters??[],messageTimestamp:e.messageTimestamp??r};sn(n);let{permissionGrantId:i,signer:o}=e,s=await Ue.createAuthorization({descriptor:n,signer:o,permissionGrantId:i}),a={descriptor:n,authorization:s};return Ue.validateJsonSchema(a),new sd(a)}};var G1=class{constructor(e,r,n){this.didResolver=e;this.messageStore=r;this.eventStream=n}async handle({tenant:e,message:r,subscriptionHandler:n}){if(this.eventStream===void 0)return gr(new be("MessagesSubscribeEventStreamUnimplemented","Subscriptions are not supported"),501);let i;try{i=await sd.parse(r)}catch(p){return gr(p,400)}try{await Yi(r.authorization,this.didResolver),await G1.authorizeMessagesSubscribe(e,i,this.messageStore)}catch(p){return gr(p,401)}let{filters:o}=r.descriptor,s=V0.convertFilters(o),a=await Ue.getCid(r),u=(p,b,A)=>{e===p&&ei.matchAnyFilter(A,s)&&n(b)},m=await this.eventStream.subscribe(e,a,u);return{status:{code:200,detail:"OK"},subscription:m}}static async authorizeMessagesSubscribe(e,r,n){if(r.author!==e)if(r.author!==void 0&&r.signaturePayload.permissionGrantId!==void 0){let i=await wr.fetchGrant(e,n,r.signaturePayload.permissionGrantId);await id.authorizeQueryOrSubscribe({incomingMessage:r.message,expectedGrantor:e,expectedGrantee:r.author,permissionGrant:i,messageStore:n})}else throw new be("MessagesSubscribeAuthorizationFailed","message failed authorization")}};_();_();var hve=Zt(fF(),1);_();var ts=class extends po{static async parse(e){return Ue.validateJsonSchema(e),ts.validateProtocolDefinition(e.descriptor.definition),await Ue.validateSignatureStructure(e.authorization.signature,e.descriptor),Yt.validateTimestamp(e.descriptor.messageTimestamp),new ts(e)}static async create(e){let r={interface:"Protocols",method:"Configure",messageTimestamp:e.messageTimestamp??Yt.getCurrentTimestamp(),definition:ts.normalizeDefinition(e.definition)},n=await Ue.createAuthorization({descriptor:r,signer:e.signer,permissionGrantId:e.permissionGrantId}),i={descriptor:r,authorization:n};return Ue.validateJsonSchema(i),ts.validateProtocolDefinition(i.descriptor.definition),new ts(i)}static validateProtocolDefinition(e){let{protocol:r,types:n}=e;ra(r);for(let i in n){let o=n[i].schema;o!==void 0&&C0(o)}ts.validateStructure(e)}static validateStructure(e){let r=Object.keys(e.types),n=ts.fetchAllRolePathsRecursively("",e.structure,[]);ts.validateRuleSetRecursively({ruleSet:e.structure,ruleSetProtocolPath:"",recordTypes:r,roles:n})}static fetchAllRolePathsRecursively(e,r,n){if(e.split("/").length>10)throw new be("ProtocolsConfigureRecordNestingDepthExceeded","Record nesting depth exceeded 10 levels.");for(let i in r){if(i.startsWith("$"))continue;let o=r[i],s;e===""?s=i:s=`${e}/${i}`,o.$role?n.push(s):ts.fetchAllRolePathsRecursively(s,o,n)}return n}static validateRuleSetRecursively(e){let{ruleSet:r,ruleSetProtocolPath:n,recordTypes:i,roles:o}=e;if(r.$size!==void 0){let{min:a=0,max:u}=r.$size;if(u!==void 0&&u<a)throw new be("ProtocolsConfigureInvalidSize",`Invalid size range found: max limit ${u} less than min limit ${a} at protocol path '${n}'`)}if(r.$tags){let a=new hve.default.default,{$allowUndefinedTags:u,$requiredTags:m,...p}=r.$tags;for(let b in p){let A=p[b];if(!a.validateSchema(A)){let M=a.errorsText(a.errors,{dataVar:`${n}/$tags/${b}`});throw new be("ProtocolsConfigureInvalidTagSchema",`tags schema validation error: ${M}`)}}}let s=r.$actions??[];for(let a=0;a<s.length;a++){let u=s[a];if(u.role!==void 0&&!o.includes(u.role))throw new be("ProtocolsConfigureRoleDoesNotExistAtGivenPath",`Role in action ${JSON.stringify(u)} for rule set ${n} does not exist.`);if(u.who==="anyone"&&u.of)throw new be("ProtocolsConfigureInvalidActionOfNotAllowed",`'of' is not allowed at rule set protocol path (${n})`);if(u.who==="recipient"&&u.of===void 0&&u.can.some(p=>!["co-update","co-delete","co-prune"].includes(p)))throw new be("ProtocolsConfigureInvalidRecipientOfAction","Rules for `recipient` without `of` property must have `can` containing only `co-update`, `co-delete`, and `co-prune`.");if(u.who==="author"&&!u.of)throw new be("ProtocolsConfigureInvalidActionMissingOf","'of' is required when 'author' is specified as 'who'");if(u.can!==void 0){if(u.can.includes("update")&&!u.can.includes("create"))throw new be("ProtocolsConfigureInvalidActionUpdateWithoutCreate",`Action rule ${JSON.stringify(u)} contains 'update' action but missing the required 'create' action.`);if(u.can.includes("delete")&&!u.can.includes("create"))throw new be("ProtocolsConfigureInvalidActionDeleteWithoutCreate",`Action rule ${JSON.stringify(u)} contains 'delete' action but missing the required 'create' action.`)}for(let m=a+1;m<s.length;m++){let p=s[m];if(u.who!==void 0){if(u.who===p.who&&u.of===p.of)throw new be("ProtocolsConfigureDuplicateActorInRuleSet",`More than one action rule per actor ${u.who} of ${u.of} not allowed within a rule set: ${JSON.stringify(u)}`)}else if(u.role===p.role)throw new be("ProtocolsConfigureDuplicateRoleInRuleSet",`More than one action rule per role ${u.role} not allowed within a rule set: ${JSON.stringify(u)}`)}}for(let a in r){if(a.startsWith("$"))continue;if(!i.includes(a))throw new be("ProtocolsConfigureInvalidRuleSetRecordType",`Rule set ${a} is not declared as an allowed type in the protocol definition.`);let u=r[a],m;n===""?m=a:m=`${n}/${a}`,ts.validateRuleSetRecursively({ruleSet:u,ruleSetProtocolPath:m,recordTypes:i,roles:o})}}static normalizeDefinition(e){let r={...e.types};for(let n in r){let i=r[n].schema;i!==void 0&&(r[n].schema=wg(i))}return{...e,protocol:Ja(e.protocol),types:r}}};var o2=class{constructor(e,r,n,i){this.didResolver=e;this.messageStore=r;this.eventLog=n;this.eventStream=i}async handle({tenant:e,message:r}){let n;try{n=await ts.parse(r)}catch(p){return gr(p,400)}try{await Yi(r.authorization,this.didResolver),await Pye(e,n)}catch(p){return gr(p,401)}let i={interface:"Protocols",method:"Configure",protocol:r.descriptor.definition.protocol},{messages:o}=await this.messageStore.query(e,[i]),s=await Ue.getNewestMessage(o),a=!1;(s===void 0||await Ue.isNewer(r,s))&&(a=!0,s=r);let u;if(a){let p=o2.constructIndexes(n);await this.messageStore.put(e,r,p);let b=await Ue.getCid(r);await this.eventLog.append(e,b,p),this.eventStream!==void 0&&this.eventStream.emit(e,{message:r},p),u={status:{code:202,detail:"Accepted"}}}else u={status:{code:409,detail:"Conflict"}};let m=[];for(let p of o)if(await Ue.isNewer(s,p)){let b=await Ue.getCid(p);m.push(b),await this.messageStore.delete(e,b)}return await this.eventLog.deleteEventsByCid(e,m),u}static constructIndexes(e){let{definition:r,...n}=e.message.descriptor,{author:i}=e;return{...n,author:i,protocol:r.protocol,published:r.published}}};_();_();var Cu=class extends po{static async parse(e){return e.authorization!==void 0&&await Ue.validateSignatureStructure(e.authorization.signature,e.descriptor),e.descriptor.filter!==void 0&&ra(e.descriptor.filter.protocol),Yt.validateTimestamp(e.descriptor.messageTimestamp),new Cu(e)}static async create(e){let r={interface:"Protocols",method:"Query",messageTimestamp:e.messageTimestamp??Yt.getCurrentTimestamp(),filter:e.filter?Cu.normalizeFilter(e.filter):void 0};sn(r);let n;e.signer!==void 0&&(n=await Ue.createAuthorization({descriptor:r,signer:e.signer,permissionGrantId:e.permissionGrantId}));let i={descriptor:r,authorization:n};return Ue.validateJsonSchema(i),new Cu(i)}static normalizeFilter(e){return{...e,protocol:Ja(e.protocol)}}async authorize(e,r){if(this.author!==e)if(this.author!==void 0&&this.signaturePayload.permissionGrantId){let n=await wr.fetchGrant(e,r,this.signaturePayload.permissionGrantId);await na.performBaseValidation({incomingMessage:this.message,expectedGrantor:e,expectedGrantee:this.author,permissionGrant:n,messageStore:r})}else throw new be("ProtocolsQueryUnauthorized","The ProtocolsQuery failed authorization")}};var xT=class{constructor(e,r,n){this.didResolver=e;this.messageStore=r;this.dataStore=n}async handle({tenant:e,message:r}){let n;try{n=await Cu.parse(r)}catch(s){return gr(s,400)}try{await Yi(r.authorization,this.didResolver),await n.authorize(e,this.messageStore)}catch(s){if(s.code==="AuthenticateJwsMissing"||s.code==="ProtocolsQueryUnauthorized"){let a=await this.fetchPublishedProtocolsConfigure(e,n);return{status:{code:200,detail:"OK"},entries:a}}else return gr(s,401)}let i={...r.descriptor.filter,interface:"Protocols",method:"Configure"};sn(i);let{messages:o}=await this.messageStore.query(e,[i]);return{status:{code:200,detail:"OK"},entries:o}}async fetchPublishedProtocolsConfigure(e,r){let n={...r.message.descriptor.filter,interface:"Protocols",method:"Configure",published:!0},{messages:i}=await this.messageStore.query(e,[n]);return i}};_();_();var pve=Zt(fF(),1);var qt=class{static async validateReferentialIntegrity(e,r,n){let i=await qt.fetchProtocolDefinition(e,r.message.descriptor.protocol,n);qt.verifyType(r.message,i.types),await qt.verifyProtocolPathAndContextId(e,r,n);let o=qt.getRuleSet(r.message.descriptor.protocolPath,i);await qt.verifyAsRoleRecordIfNeeded(e,r,o,n),qt.verifySizeLimit(r,o),qt.verifyTagsIfNeeded(r,o)}static async authorizeWrite(e,r,n){let i=await qt.fetchInitialWrite(e,r.message.recordId,n),o;i===void 0?o=await qt.constructRecordChain(e,r.message.descriptor.parentId,n):o=await qt.constructRecordChain(e,r.message.recordId,n);let s=await qt.fetchProtocolDefinition(e,r.message.descriptor.protocol,n),a=qt.getRuleSet(r.message.descriptor.protocolPath,s);await qt.verifyInvokedRole(e,r,r.message.descriptor.protocol,r.message.contextId,s,n),await qt.authorizeAgainstAllowedActions(e,r,a,o,n)}static async authorizeRead(e,r,n,i){let o=await qt.constructRecordChain(e,n.message.recordId,i),s=await qt.fetchProtocolDefinition(e,n.message.descriptor.protocol,i),a=qt.getRuleSet(n.message.descriptor.protocolPath,s);await qt.verifyInvokedRole(e,r,n.message.descriptor.protocol,n.message.contextId,s,i),await qt.authorizeAgainstAllowedActions(e,r,a,o,i)}static async authorizeQueryOrSubscribe(e,r,n){let{protocol:i,protocolPath:o,contextId:s}=r.message.descriptor.filter,a=await qt.fetchProtocolDefinition(e,i,n),u=qt.getRuleSet(o,a);await qt.verifyInvokedRole(e,r,i,s,a,n),await qt.authorizeAgainstAllowedActions(e,r,u,[],n)}static async authorizeDelete(e,r,n,i){let o=await qt.constructRecordChain(e,r.message.descriptor.recordId,i),s=await qt.fetchProtocolDefinition(e,n.message.descriptor.protocol,i),a=qt.getRuleSet(n.message.descriptor.protocolPath,s);await qt.verifyInvokedRole(e,r,n.message.descriptor.protocol,n.message.contextId,s,i),await qt.authorizeAgainstAllowedActions(e,r,a,o,i)}static async fetchProtocolDefinition(e,r,n){if(r===wr.uri)return wr.definition;let i={interface:"Protocols",method:"Configure",protocol:r},{messages:o}=await n.query(e,[i]);if(o.length===0)throw new be("ProtocolAuthorizationProtocolNotFound",`unable to find protocol definition for ${r}`);return o[0].descriptor.definition}static async constructRecordChain(e,r,n){if(r===void 0)return[];let i=[],o=r;for(;o!==void 0;){let s=await qt.fetchInitialWrite(e,o,n);if(s===void 0)throw new be("ProtocolAuthorizationParentNotFoundConstructingRecordChain",`Unexpected error that should never trigger: no parent found with ID ${o} when constructing record chain.`);i.push(s),o=s.descriptor.parentId}return i.reverse()}static async fetchInitialWrite(e,r,n){let i={interface:"Records",method:"Write",recordId:r},{messages:o}=await n.query(e,[i]);return o.length===0?void 0:await _t.getInitialWrite(o)}static getRuleSet(e,r){let n=qt.getRuleSetAtProtocolPath(e,r);if(n===void 0)throw new be("ProtocolAuthorizationMissingRuleSet",`No rule set defined for protocolPath ${e}`);return n}static async verifyProtocolPathAndContextId(e,r,n){let i=r.message.descriptor.protocolPath,o=qt.getTypeName(i),s=r.message.descriptor.parentId;if(s===void 0){if(i!==o)throw new be("ProtocolAuthorizationParentlessIncorrectProtocolPath",`Declared protocol path '${i}' is not valid for records with no parent'.`);return}let a=r.message.descriptor.protocol,u={isLatestBaseState:!0,interface:"Records",method:"Write",protocol:a,recordId:s},{messages:m}=await n.query(e,[u]),p=m[0];if(`${p?.descriptor?.protocolPath}/${o}`!==i)throw new be("ProtocolAuthorizationIncorrectProtocolPath",`Could not find matching parent record to verify declared protocol path '${i}'.`);let M=`${p.contextId}/${r.message.recordId}`,S=r.message.contextId;if(S!==M)throw new be("ProtocolAuthorizationIncorrectContextId",`Declared contextId '${S}' is not the same as expected: '${M}'.`)}static verifyType(e,r){let n=Object.keys(r),i=e.descriptor.protocolPath,o=qt.getTypeName(i);if(!n.includes(o))throw new be("ProtocolAuthorizationInvalidType",`record with type ${o} not allowed in protocol`);let s=e.descriptor.protocolPath,a=qt.getTypeName(s),u=r[a],{schema:m}=e.descriptor;if(u.schema!==void 0&&u.schema!==m)throw new be("ProtocolAuthorizationInvalidSchema",`type '${a}' must have schema '${u.schema}',         instead has '${m}'`);let{dataFormat:p}=e.descriptor;if(u.dataFormats!==void 0&&!u.dataFormats.includes(p))throw new be("ProtocolAuthorizationIncorrectDataFormat",`type '${a}' must have data format in (${u.dataFormats}),         instead has '${p}'`)}static async verifyInvokedRole(e,r,n,i,o,s){let a=r.signaturePayload?.protocolRole;if(a===void 0)return;let u=qt.getRuleSetAtProtocolPath(a,o);if(u===void 0||!u.$role)throw new be("ProtocolAuthorizationNotARole",`Protocol path ${a} does not match role record type.`);let m={interface:"Records",method:"Write",protocol:n,protocolPath:a,recipient:r.author,isLatestBaseState:!0},p=a.split("/").length-1;if(i===void 0&&p>0)throw new be("ProtocolAuthorizationMissingContextId","Could not verify role because contextId is missing.");if(p>0){let M=i.split("/").slice(0,p).join("/"),S=ei.constructPrefixFilterAsRangeFilter(M);m.contextId=S}let{messages:b}=await s.query(e,[m]);if(b.length===0)throw new be("ProtocolAuthorizationMatchingRoleRecordNotFound",`No matching role record found for protocol path ${a}`)}static async getActionsSeekingARuleMatch(e,r,n){switch(r.message.descriptor.method){case"Delete":let i=r,o=i.message.descriptor.recordId,s=await _t.fetchInitialRecordsWrite(n,e,o);if(s===void 0)return[];let a=[];return i.message.descriptor.prune?(a.push("co-prune"),r.author===s.author&&a.push("prune")):(a.push("co-delete"),r.author===s.author&&a.push("delete")),a;case"Query":return["query"];case"Read":return["read"];case"Subscribe":return["subscribe"];case"Write":if(await r.isInitialWrite())return["create"];{let p=r.message.recordId,b=await _t.fetchInitialRecordsWrite(n,e,p);return b===void 0?[]:r.author===b.author?["co-update","update"]:["co-update"]}}return[]}static async authorizeAgainstAllowedActions(e,r,n,i,o){let s=r.message.descriptor.method,a=await qt.getActionsSeekingARuleMatch(e,r,o),u=r.author,m=n.$actions;if(m===void 0)throw new be("ProtocolAuthorizationActionRulesNotFound",`no action rule defined for Records${s}, ${u} is unauthorized`);let p=r.signaturePayload?.protocolRole;for(let b of m){if(!b.can.some(S=>a.includes(S)))continue;if(b.who==="anyone")return;if(u===void 0)continue;if(p!==void 0){if(b.role===p)return;continue}if(b.who==="recipient"&&b.of===void 0){let S;if(r.message.descriptor.method==="Write"?S=r.message:S=i[i.length-1],S.descriptor.recipient===u)return;continue}if(await qt.checkActor(u,b,i))return}throw new be("ProtocolAuthorizationActionNotAllowed",`Inbound message action Records${s} by author ${r.author} not allowed.`)}static verifySizeLimit(e,r){let{min:n=0,max:i}=r.$size||{},o=e.message.descriptor.dataSize;if(o<n)throw new be("ProtocolAuthorizationMinSizeInvalid",`data size ${o} is less than allowed ${n}`);if(i!==void 0&&o>i)throw new be("ProtocolAuthorizationMaxSizeInvalid",`data size ${o} is more than allowed ${i}`)}static verifyTagsIfNeeded(e,r){if(r.$tags!==void 0){let{tags:n={},protocol:i,protocolPath:o}=e.message.descriptor,{$allowUndefinedTags:s,$requiredTags:a,...u}=r.$tags,m=s||!1,p=a||[],b=new pve.default.default,A=b.compile({type:"object",properties:u,required:p,additionalProperties:m});if(!A(n)){let S=b.errorsText(A.errors,{dataVar:`${i}/${o}/$tags`});throw new be("ProtocolAuthorizationTagsInvalidSchema",`tags schema validation error: ${S}`)}}}static async verifyAsRoleRecordIfNeeded(e,r,n,i){if(!n.$role)return;let o=r,s=o.message.descriptor.recipient;if(s===void 0)throw new be("ProtocolAuthorizationRoleMissingRecipient","Role records must have a recipient");let a=o.message.descriptor.protocolPath,u={interface:"Records",method:"Write",isLatestBaseState:!0,protocol:o.message.descriptor.protocol,protocolPath:a,recipient:s},m=et.getParentContextFromOfContextId(o.message.contextId);if(m!==""){let M=ei.constructPrefixFilterAsRangeFilter(m);u.contextId=M}let{messages:p}=await i.query(e,[u]);if(p.filter(M=>M.recordId!==o.message.recordId).length>0)throw new be("ProtocolAuthorizationDuplicateRoleRecipient",`DID '${s}' is already recipient of a role record at protocol path '${a} under the parent context ${m}.`)}static getRuleSetAtProtocolPath(e,r){let n=e.split("/"),i=r.structure,o=0;for(;o<n.length;){let s=n[o],a=i[s];if(a===void 0)return;i=a,o++}return i}static async checkActor(e,r,n){let i=n.find(o=>o.descriptor.protocolPath===r.of);if(i===void 0)return!1;if(r.who==="recipient")return e===i.descriptor.recipient;{let o=(await _t.parse(i)).author;return e===o}}static getTypeName(e){return e.split("/").slice(-1)[0]}};_();var Of=class extends po{static async parse(e){let r;return e.authorization!==void 0&&(r=await Ue.validateSignatureStructure(e.authorization.signature,e.descriptor)),await et.validateDelegatedGrantReferentialIntegrity(e,r),Yt.validateTimestamp(e.descriptor.messageTimestamp),new Of(e)}static async create(e){let r=e.recordId,n=Yt.getCurrentTimestamp(),i={interface:"Records",method:"Delete",messageTimestamp:e.messageTimestamp??n,recordId:r,prune:e.prune??!1},o=await Ue.createAuthorization({descriptor:i,signer:e.signer,protocolRole:e.protocolRole,delegatedGrant:e.delegatedGrant}),s={descriptor:i,authorization:o};return Ue.validateJsonSchema(s),new Of(s)}constructIndexes(e){let n={...this.message.descriptor},{protocol:i,protocolPath:o,recipient:s,schema:a,parentId:u,dateCreated:m}=e.descriptor,p={protocol:i,protocolPath:o,recipient:s,schema:a,parentId:u,dateCreated:m,contextId:e.contextId,author:this.author,...n};return sn(p),p}async authorizeDelegate(e,r){let n=await Ni.parse(this.message.authorization.authorDelegatedGrant);await Vi.authorizeDelete({recordsDeleteMessage:this.message,recordsWriteToDelete:e,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:n,messageStore:r})}};_();var s2=class{constructor(e,r){this.resumableTaskStore=e;this.resumableTaskBatchSize=100;this.resumableTaskHandlers={["RecordsDelete"]:async n=>await r.performRecordsDelete(n)}}async run(e){let r=s2.timeoutExtensionFrequencyInSeconds*2,n=await this.resumableTaskStore.register(e,r);await this.runWithAutomaticTimeoutExtension(n)}async runWithAutomaticTimeoutExtension(e){let r=s2.timeoutExtensionFrequencyInSeconds*2,n;try{n=setInterval(()=>{this.resumableTaskStore.extend(e.id,r)},s2.timeoutExtensionFrequencyInSeconds*1e3);let i=this.resumableTaskHandlers[e.task.name];await i(e.task.data),await this.resumableTaskStore.delete(e.id)}finally{s2.clearTimeoutExtensionTimer(n)}}static clearTimeoutExtensionTimer(e){clearInterval(e)}async resumeTasksAndWaitForCompletion(){for(;;){let e=await this.resumableTaskStore.grab(this.resumableTaskBatchSize);if(e===void 0||e.length===0)break;await this.retryTasksUntilCompletion(e)}}async retryTasksUntilCompletion(e){let r=e;for(;r.length>0;){let n=r;r=[];let i=n.map(async o=>{try{await this.runWithAutomaticTimeoutExtension(o)}catch(s){console.error("Error while running resumable task:",s),console.error("Resumable task:",e),r.push(o)}});await Promise.all(i)}}},l3=s2;l3.timeoutExtensionFrequencyInSeconds=30;var a2=class{constructor(e,r,n){this.didResolver=e;this.messageStore=r;this.resumableTaskManager=n}async handle({tenant:e,message:r}){let n;try{n=await Of.parse(r)}catch(m){return gr(m,400)}try{await Yi(r.authorization,this.didResolver)}catch(m){return gr(m,401)}let i={interface:"Records",recordId:r.descriptor.recordId},{messages:o}=await this.messageStore.query(e,[i]),s=await Ue.getNewestMessage(o);if(!et.canPerformDeleteAgainstRecord(r,s))return{status:{code:404,detail:"Not Found"}};if(!await Ue.isNewer(r,s))return{status:{code:409,detail:"Conflict"}};try{let m=await _t.fetchInitialRecordsWrite(this.messageStore,e,r.descriptor.recordId);await a2.authorizeRecordsDelete(e,n,m,this.messageStore)}catch(m){return gr(m,401)}return await this.resumableTaskManager.run({name:"RecordsDelete",data:{tenant:e,message:r}}),{status:{code:202,detail:"Accepted"}}}static async authorizeRecordsDelete(e,r,n,i){if(Ue.isSignedByAuthorDelegate(r.message)&&await r.authorizeDelegate(n.message,i),r.author!==e)if(n.message.descriptor.protocol!==void 0)await qt.authorizeDelete(e,r,n,i);else throw new be("RecordsDeleteAuthorizationFailed","RecordsDelete message failed authorization")}};_();_();var d3=(r=>(r[r.Descending=-1]="Descending",r[r.Ascending=1]="Ascending",r))(d3||{});var Nu=class{constructor(e,r,n){this.didResolver=e;this.messageStore=r;this.dataStore=n}async handle({tenant:e,message:r}){let n;try{n=await nd.parse(r)}catch(s){return gr(s,400)}let i,o;if(et.filterIncludesPublishedRecords(n.message.descriptor.filter)&&n.author===void 0){let s=await this.fetchPublishedRecords(e,n);i=s.messages,o=s.cursor}else{try{await Yi(r.authorization,this.didResolver),await Nu.authorizeRecordsQuery(e,n,this.messageStore)}catch(s){return gr(s,401)}if(n.author===e){let s=await this.fetchRecordsAsOwner(e,n);i=s.messages,o=s.cursor}else{let s=await this.fetchRecordsAsNonOwner(e,n);i=s.messages,o=s.cursor}}for(let s of i)if(!await _t.isInitialWrite(s)){let u=(await this.messageStore.query(e,[{recordId:s.recordId,isLatestBaseState:!1,method:"Write"}])).messages[0];delete u.encodedData,s.initialWrite=u}return{status:{code:200,detail:"OK"},entries:i,cursor:o}}convertDateSort(e){switch(e){case"createdAscending":return{dateCreated:1};case"createdDescending":return{dateCreated:-1};case"publishedAscending":return{datePublished:1};case"publishedDescending":return{datePublished:-1};default:return{dateCreated:1}}}async fetchRecordsAsOwner(e,r){let{dateSort:n,filter:i,pagination:o}=r.message.descriptor,s={...et.convertFilter(i,n),interface:"Records",method:"Write",isLatestBaseState:!0},a=this.convertDateSort(n);return this.messageStore.query(e,[s],a,o)}async fetchRecordsAsNonOwner(e,r){let{dateSort:n,pagination:i,filter:o}=r.message.descriptor,s=[];et.filterIncludesPublishedRecords(o)&&s.push(Nu.buildPublishedRecordsFilter(r)),et.filterIncludesUnpublishedRecords(o)&&(et.shouldBuildUnpublishedAuthorFilter(o,r.author)&&s.push(Nu.buildUnpublishedRecordsByQueryAuthorFilter(r)),et.shouldProtocolAuthorize(r.signaturePayload)&&s.push(Nu.buildUnpublishedProtocolAuthorizedRecordsFilter(r)),et.shouldBuildUnpublishedRecipientFilter(o,r.author)&&s.push(Nu.buildUnpublishedRecordsForQueryAuthorFilter(r)));let a=this.convertDateSort(n);return this.messageStore.query(e,s,a,i)}async fetchPublishedRecords(e,r){let{dateSort:n,pagination:i}=r.message.descriptor,o=Nu.buildPublishedRecordsFilter(r),s=this.convertDateSort(n);return this.messageStore.query(e,[o],s,i)}static buildPublishedRecordsFilter(e){let{dateSort:r,filter:n}=e.message.descriptor;return{...et.convertFilter(n,r),interface:"Records",method:"Write",published:!0,isLatestBaseState:!0}}static buildUnpublishedRecordsForQueryAuthorFilter(e){let{dateSort:r,filter:n}=e.message.descriptor;return{...et.convertFilter(n,r),interface:"Records",method:"Write",recipient:e.author,isLatestBaseState:!0,published:!1}}static buildUnpublishedProtocolAuthorizedRecordsFilter(e){let{dateSort:r,filter:n}=e.message.descriptor;return{...et.convertFilter(n,r),interface:"Records",method:"Write",isLatestBaseState:!0,published:!1}}static buildUnpublishedRecordsByQueryAuthorFilter(e){let{dateSort:r,filter:n}=e.message.descriptor;return{...et.convertFilter(n,r),author:e.author,interface:"Records",method:"Write",isLatestBaseState:!0,published:!1}}static async authorizeRecordsQuery(e,r,n){Ue.isSignedByAuthorDelegate(r.message)&&await r.authorizeDelegate(n),et.shouldProtocolAuthorize(r.signaturePayload)&&await qt.authorizeQueryOrSubscribe(e,r,n)}};_();_();var rm=class extends po{static async parse(e){let r;return e.authorization!==void 0&&(r=await Ue.validateSignatureStructure(e.authorization.signature,e.descriptor)),await et.validateDelegatedGrantReferentialIntegrity(e,r),Yt.validateTimestamp(e.descriptor.messageTimestamp),new rm(e)}static async create(e){let{filter:r,signer:n,permissionGrantId:i,protocolRole:o}=e,s=Yt.getCurrentTimestamp(),a={interface:"Records",method:"Read",filter:et.normalizeFilter(r),messageTimestamp:e.messageTimestamp??s};sn(a);let u;n!==void 0&&(u=await Ue.createAuthorization({descriptor:a,signer:n,permissionGrantId:i,protocolRole:o,delegatedGrant:e.delegatedGrant}));let m={descriptor:a,authorization:u};return Ue.validateJsonSchema(m),new rm(m)}async authorizeDelegate(e,r){let n=await Ni.parse(this.message.authorization.authorDelegatedGrant);await Vi.authorizeRead({recordsReadMessage:this.message,recordsWriteMessageToBeRead:e,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:n,messageStore:r})}};var c2=class{constructor(e,r,n){this.didResolver=e;this.messageStore=r;this.dataStore=n}async handle({tenant:e,message:r}){let n;try{n=await rm.parse(r)}catch(p){return gr(p,400)}try{n.author!==void 0&&await Yi(r.authorization,this.didResolver)}catch(p){return gr(p,401)}let i={interface:"Records",isLatestBaseState:!0,...et.convertFilter(r.descriptor.filter)},{messages:o}=await this.messageStore.query(e,[i]);if(o.length===0)return{status:{code:404,detail:"Not Found"}};if(o.length>1)return gr(new be("RecordsReadReturnedMultiple","Multiple records exist for the RecordsRead filter"),400);let s=o[0];try{await c2.authorizeRecordsRead(e,n,await _t.parse(s),this.messageStore)}catch(p){return gr(p,401)}let a;if(s.encodedData!==void 0){let p=Je.base64UrlToBytes(s.encodedData);a=mo.fromBytes(p),delete s.encodedData}else{let p=await this.dataStore.get(e,s.recordId,s.descriptor.dataCid);if(p?.dataStream===void 0)return{status:{code:404,detail:"Not Found"}};a=p.dataStream}let u={...s,data:a};if(!await _t.isInitialWrite(u)){let b=(await this.messageStore.query(e,[{recordId:u.recordId,isLatestBaseState:!1,method:"Write"}])).messages[0];delete b.encodedData,u.initialWrite=b}return{status:{code:200,detail:"OK"},record:u}}static async authorizeRecordsRead(e,r,n,i){Ue.isSignedByAuthorDelegate(r.message)&&await r.authorizeDelegate(n.message,i);let{descriptor:o}=n.message;if(r.author!==e){if(o.published===!0)return;if(r.author!==void 0&&r.author===o.recipient)return;if(r.author!==void 0&&r.signaturePayload.permissionGrantId!==void 0){let s=await wr.fetchGrant(e,i,r.signaturePayload.permissionGrantId);await Vi.authorizeRead({recordsReadMessage:r.message,recordsWriteMessageToBeRead:n.message,expectedGrantor:e,expectedGrantee:r.author,permissionGrant:s,messageStore:i})}else if(o.protocol!==void 0)await qt.authorizeRead(e,r,n,i);else throw new be("RecordsReadAuthorizationFailed","message failed authorization")}}};_();_();var ud=class extends po{static async parse(e){let r;if(e.authorization!==void 0&&(r=await Ue.validateSignatureStructure(e.authorization.signature,e.descriptor)),await et.validateDelegatedGrantReferentialIntegrity(e,r),r?.protocolRole!==void 0&&e.descriptor.filter.protocolPath===void 0)throw new be("RecordsSubscribeFilterMissingRequiredProperties","Role-authorized subscriptions must include `protocolPath` in the filter");return e.descriptor.filter.protocol!==void 0&&ra(e.descriptor.filter.protocol),e.descriptor.filter.schema!==void 0&&C0(e.descriptor.filter.schema),Yt.validateTimestamp(e.descriptor.messageTimestamp),new ud(e)}static async create(e){let r={interface:"Records",method:"Subscribe",messageTimestamp:e.messageTimestamp??Yt.getCurrentTimestamp(),filter:et.normalizeFilter(e.filter)};sn(r);let n=e.signer,i;n&&(i=await Ue.createAuthorization({descriptor:r,signer:n,protocolRole:e.protocolRole,delegatedGrant:e.delegatedGrant}));let o={descriptor:r,authorization:i};return Ue.validateJsonSchema(o),new ud(o)}async authorizeDelegate(e){let r=await Ni.parse(this.message.authorization.authorDelegatedGrant);await Vi.authorizeQueryOrSubscribe({incomingMessage:this.message,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:r,messageStore:e})}};var Cc=class{constructor(e,r,n){this.didResolver=e;this.messageStore=r;this.eventStream=n}async handle({tenant:e,message:r,subscriptionHandler:n}){if(this.eventStream===void 0)return gr(new be("RecordsSubscribeEventStreamUnimplemented","Subscriptions are not supported"),501);let i;try{i=await ud.parse(r)}catch(m){return gr(m,400)}let o=[];if(et.filterIncludesPublishedRecords(i.message.descriptor.filter)&&i.author===void 0)o=[Cc.buildPublishedRecordsFilter(i)],delete r.authorization;else{try{await Yi(r.authorization,this.didResolver),await Cc.authorizeRecordsSubscribe(e,i,this.messageStore)}catch(m){return gr(m,401)}i.author===e?o=await Cc.filterAsOwner(i):o=await Cc.filterAsNonOwner(i)}let s=(m,p,b)=>{e===m&&ei.matchAnyFilter(b,o)&&n(p)},a=await Ue.getCid(r),u=await this.eventStream.subscribe(e,a,s);return{status:{code:200,detail:"OK"},subscription:u}}static async filterAsOwner(e){let{filter:r}=e.message.descriptor;return[{...et.convertFilter(r),interface:"Records",method:["Write","Delete"]}]}static async filterAsNonOwner(e){let r=[],{filter:n}=e.message.descriptor;return et.filterIncludesPublishedRecords(n)&&r.push(Cc.buildPublishedRecordsFilter(e)),et.filterIncludesUnpublishedRecords(n)&&(et.shouldBuildUnpublishedAuthorFilter(n,e.author)&&r.push(Cc.buildUnpublishedRecordsBySubscribeAuthorFilter(e)),et.shouldProtocolAuthorize(e.signaturePayload)&&r.push(Cc.buildUnpublishedProtocolAuthorizedRecordsFilter(e)),et.shouldBuildUnpublishedRecipientFilter(n,e.author)&&r.push(Cc.buildUnpublishedRecordsForSubscribeAuthorFilter(e))),r}static buildPublishedRecordsFilter(e){return{...et.convertFilter(e.message.descriptor.filter),interface:"Records",method:["Write","Delete"],published:!0}}static buildUnpublishedRecordsForSubscribeAuthorFilter(e){return{...et.convertFilter(e.message.descriptor.filter),interface:"Records",method:["Write","Delete"],recipient:e.author,published:!1}}static buildUnpublishedProtocolAuthorizedRecordsFilter(e){return{...et.convertFilter(e.message.descriptor.filter),interface:"Records",method:["Write","Delete"],published:!1}}static buildUnpublishedRecordsBySubscribeAuthorFilter(e){return{...et.convertFilter(e.message.descriptor.filter),author:e.author,interface:"Records",method:["Write","Delete"],published:!1}}static async authorizeRecordsSubscribe(e,r,n){Ue.isSignedByAuthorDelegate(r.message)&&await r.authorizeDelegate(n),et.shouldProtocolAuthorize(r.signaturePayload)&&await qt.authorizeQueryOrSubscribe(e,r,n)}};_();_();var Gh=class{};Gh.maxDataSizeAllowedToBeEncoded=3e4;_();var Bf=class{constructor({messageStore:e,dataStore:r,eventLog:n,eventStream:i}){this.messageStore=e,this.dataStore=r,this.eventLog=n,this.eventStream=i}async performRecordsDelete({tenant:e,message:r}){let n={interface:"Records",recordId:r.descriptor.recordId},{messages:i}=await this.messageStore.query(e,[n]),o=await Ue.getNewestMessage(i);if(!et.canPerformDeleteAgainstRecord(r,o))return;let s=await Of.parse(r),a=await _t.getInitialWrite(i),u=s.constructIndexes(a),m=await Ue.getCid(r);await this.messageStore.put(e,r,u),await this.eventLog.append(e,m,u),this.eventStream!==void 0&&this.eventStream.emit(e,{message:r,initialWrite:a},u),r.descriptor.prune&&await Bf.purgeRecordDescendants(e,r.descriptor.recordId,this.messageStore,this.dataStore,this.eventLog),await Bf.deleteAllOlderMessagesButKeepInitialWrite(e,i,r,this.messageStore,this.dataStore,this.eventLog)}static async deleteFromDataStoreIfNeeded(e,r,n,i){if(n.descriptor.method!=="Write")return;let o=n;o.descriptor.dataSize<=Gh.maxDataSizeAllowedToBeEncoded||o.descriptor.dataCid!==i.descriptor.dataCid&&await e.delete(r,o.recordId,o.descriptor.dataCid)}static async purgeRecordDescendants(e,r,n,i,o){let s={interface:"Records",parentId:r},{messages:a}=await n.query(e,[s]),u=new Map;for(let m of a){let p;et.isRecordsWrite(m)?p=m.recordId:p=m.descriptor.recordId,u.has(p)||u.set(p,[]),u.get(p).push(m)}for(let m of u.keys())await Bf.purgeRecordDescendants(e,m,n,i,o);for(let m of u.keys())await Bf.purgeRecordMessages(e,u.get(m),n,i,o)}static async purgeRecordMessages(e,r,n,i,o){let s=r.filter(m=>m.descriptor.method==="Write"),a=await Ue.getNewestMessage(s);await i.delete(e,a.recordId,a.descriptor.dataCid);let u=await Promise.all(r.map(m=>Ue.getCid(m)));await o.deleteEventsByCid(e,u),await Promise.all(u.map(m=>n.delete(e,m)))}static async deleteAllOlderMessagesButKeepInitialWrite(e,r,n,i,o,s){let a=[];for(let u of r){if(await Ue.isOlder(u,n)){await Bf.deleteFromDataStoreIfNeeded(o,e,u,n);let p=await Ue.getCid(u);if(await i.delete(e,p),await _t.isInitialWrite(u)){let A=await _t.parse(u),M=!1,S=await A.constructIndexes(M),P=u;delete P.encodedData,await i.put(e,P,S)}else{let A=await Ue.getCid(u);a.push(A)}}await s.deleteEventsByCid(e,a)}}};var ld=class{constructor(e,r,n,i,o){this.didResolver=e;this.messageStore=r;this.dataStore=n;this.eventLog=i;this.eventStream=o}async handle({tenant:e,message:r,dataStream:n}){let i;try{i=await _t.parse(r),r.descriptor.protocol!==void 0&&await qt.validateReferentialIntegrity(e,i,this.messageStore)}catch(M){return gr(M,400)}try{await Yi(r.authorization,this.didResolver),await ld.authorizeRecordsWrite(e,i,this.messageStore)}catch(M){return gr(M,401)}let o={interface:"Records",recordId:r.recordId},{messages:s}=await this.messageStore.query(e,[o]),a=await i.isInitialWrite(),u;if(!a)try{u=await _t.getInitialWrite(s),_t.verifyEqualityOfImmutableProperties(u,r)}catch(M){return gr(M,400)}let m=await Ue.getNewestMessage(s),p=!1,b;if(m===void 0||await Ue.isNewer(r,m)?(p=!0,b=r):b=m,!p)return{status:{code:409,detail:"Conflict"}};try{if(m?.descriptor.method==="Delete")throw new be("RecordsWriteNotAllowedAfterDelete","RecordsWrite is not allowed after a RecordsDelete.");await this.preProcessingForCoreRecordsWrite(e,r);let M=!1,S=r;if(n!==void 0)S=await this.processMessageWithDataStream(e,r,n),M=!0;else if(!a){let k=m;S=await this.processMessageWithoutDataStream(e,r,k),M=!0}let P=await i.constructIndexes(M);await this.messageStore.put(e,S,P),await this.eventLog.append(e,await Ue.getCid(r),P),this.eventStream!==void 0&&M&&this.eventStream.emit(e,{message:r,initialWrite:u},P)}catch(M){let S=M;if(S.code!==void 0&&(S.code==="RecordsWriteMissingEncodedDataInPrevious"||S.code==="RecordsWriteMissingDataInPrevious"||S.code==="RecordsWriteNotAllowedAfterDelete"||S.code==="RecordsWriteDataCidMismatch"||S.code==="RecordsWriteDataSizeMismatch"||S.code.startsWith("PermissionsProtocolValidate")||S.code.startsWith("SchemaValidator")))return gr(M,400);throw M}let A={status:a&&n===void 0?{code:204,detail:"No Content"}:{code:202,detail:"Accepted"}};return await Bf.deleteAllOlderMessagesButKeepInitialWrite(e,s,b,this.messageStore,this.dataStore,this.eventLog),await this.postProcessingForCoreRecordsWrite(e,i),A}async preProcessingForCoreRecordsWrite(e,r){if(r.descriptor.protocol===wr.uri&&r.descriptor.protocolPath===wr.revocationPath){let n=r.descriptor.parentId,i=await wr.fetchGrant(e,this.messageStore,n),o=r.descriptor.tags?.protocol,s="protocol"in i.scope?i.scope.protocol:void 0;if(s!==o)throw new be("PermissionsProtocolValidateRevocationProtocolTagMismatch",`Revocation protocol ${o} does not match grant protocol ${s}`)}}static validateSchemaForCoreRecordsWrite(e,r){e.descriptor.protocol===wr.uri&&wr.validateSchema(e,r)}async postProcessingForCoreRecordsWrite(e,r){if(r.message.descriptor.protocol===wr.uri&&r.message.descriptor.protocolPath===wr.revocationPath){let i={permissionGrantId:r.message.descriptor.parentId,dateCreated:{gte:r.message.descriptor.messageTimestamp}},{messages:o}=await this.messageStore.query(e,[i]),s=[];for(let a of o){let u=await Ue.getCid(a);await this.messageStore.delete(e,u)}this.eventLog.deleteEventsByCid(e,s)}}async cloneAndAddEncodedData(e,r){let n={...e};return n.encodedData=Je.bytesToBase64Url(r),n}async processMessageWithDataStream(e,r,n){let i=r;if(r.descriptor.dataSize<=Gh.maxDataSizeAllowedToBeEncoded){let o=await mo.toBytes(n),s=await jn.computeDagPbCidFromBytes(o);ld.validateDataIntegrity(r.descriptor.dataCid,r.descriptor.dataSize,s,o.length),ld.validateSchemaForCoreRecordsWrite(r,o),i=await this.cloneAndAddEncodedData(r,o)}else{let[o,s]=mo.duplicateDataStream(n,2);try{let[a,u]=await Promise.all([jn.computeDagPbCidFromStream(o),this.dataStore.put(e,r.recordId,r.descriptor.dataCid,s)]);ld.validateDataIntegrity(r.descriptor.dataCid,r.descriptor.dataSize,a,u.dataSize)}catch(a){throw await this.dataStore.delete(e,r.recordId,r.descriptor.dataCid),a}}return i}async processMessageWithoutDataStream(e,r,n){let i={...r},{dataCid:o,dataSize:s}=r.descriptor;if(ld.validateDataIntegrity(o,s,n.descriptor.dataCid,n.descriptor.dataSize),s<=Gh.maxDataSizeAllowedToBeEncoded)if(n.encodedData!==void 0)i.encodedData=n.encodedData;else throw new be("RecordsWriteMissingEncodedDataInPrevious","No dataStream was provided and unable to get data from previous message");else if(await this.dataStore.get(e,n.recordId,r.descriptor.dataCid)===void 0)throw new be("RecordsWriteMissingDataInPrevious","No dataStream was provided and unable to get data from previous message");return i}static validateDataIntegrity(e,r,n,i){if(e!==n)throw new be("RecordsWriteDataCidMismatch",`actual data CID ${n} does not match dataCid in descriptor: ${e}`);if(r!==i)throw new be("RecordsWriteDataSizeMismatch",`actual data size ${i} bytes does not match dataSize in descriptor: ${r}`)}static async authorizeRecordsWrite(e,r,n){if(r.owner!==void 0&&r.owner!==e)throw new be("RecordsWriteOwnerAndTenantMismatch",`Owner ${r.owner} must be the same as tenant ${e} when specified.`);if(r.isSignedByAuthorDelegate&&await r.authorizeAuthorDelegate(n),r.isSignedByOwnerDelegate&&await r.authorizeOwnerDelegate(n),r.owner===void 0){if(r.author===e)return;if(r.author!==void 0&&r.signaturePayload.permissionGrantId!==void 0){let i=await wr.fetchGrant(e,n,r.signaturePayload.permissionGrantId);await Vi.authorizeWrite({recordsWriteMessage:r.message,expectedGrantor:e,expectedGrantee:r.author,permissionGrant:i,messageStore:n})}else if(r.message.descriptor.protocol!==void 0)await qt.authorizeWrite(e,r,n);else throw new be("RecordsWriteAuthorizationFailed","message failed authorization")}}};_();_();var Jg;(function(t){t.authentication="authentication",t.assertionMethod="assertionMethod",t.keyAgreement="keyAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(Jg||(Jg={}));_();var yi={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};_();var ar=class{constructor({method:e,id:r,path:n,query:i,fragment:o,params:s}){this.uri=`did:${e}:${r}`,this.method=e,this.id=r,this.path=n,this.query=i,this.fragment=o,this.params=s}static parse(e){if(!e)return null;let r=ar.DID_URI_PATTERN.exec(e);if(!r||!r.groups)return null;let{method:n,id:i,path:o,query:s,fragment:a}=r.groups,u={uri:`did:${n}:${i}`,method:n,id:i};if(o&&(u.path=o),s&&(u.query=s.slice(1)),a&&(u.fragment=a.slice(1)),s){let m={},p=s.slice(1).split("&");for(let b of p){let[A,M]=b.split("=");m[A]=M}u.params=m}return u}};ar.METHOD_PATTERN="([a-z0-9]+)";ar.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";ar.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${ar.PCT_ENCODED_PATTERN})`;ar.METHOD_ID_PATTERN=`((?:${ar.ID_CHAR_PATTERN}*:)*(${ar.ID_CHAR_PATTERN}+))`;ar.PATH_PATTERN="(/[^#?]*)?";ar.QUERY_PATTERN="([?][^#]*)?";ar.FRAGMENT_PATTERN="(#.*)?";ar.DID_URI_PATTERN=new RegExp(`^did:(?<method>${ar.METHOD_PATTERN}):(?<id>${ar.METHOD_ID_PATTERN})(?<path>${ar.PATH_PATTERN})(?<query>${ar.QUERY_PATTERN})(?<fragment>${ar.FRAGMENT_PATTERN})$`);_();var ft=class extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ft)}},ut;(function(t){t.InvalidDid="invalidDid",t.MethodNotSupported="methodNotSupported",t.InternalError="internalError",t.InvalidDidDocument="invalidDidDocument",t.InvalidDidDocumentLength="invalidDidDocumentLength",t.InvalidDidUrl="invalidDidUrl",t.InvalidPreviousDidProof="invalidPreviousDidProof",t.InvalidPublicKey="invalidPublicKey",t.InvalidPublicKeyLength="invalidPublicKeyLength",t.InvalidPublicKeyType="invalidPublicKeyType",t.InvalidSignature="invalidSignature",t.NotFound="notFound",t.RepresentationNotSupported="representationNotSupported",t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(ut||(ut={}));_();_();_();_();_();var Pot=Zt(lF(),1);_();_();_();_();var RGt=new Uint8Array(0);function yve(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function f2(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}_();function Rot(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,u=t.charAt(0),m=Math.log(a)/Math.log(256),p=Math.log(256)/Math.log(a);function b(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var P=0,k=0,R=0,B=S.length;R!==B&&S[R]===0;)R++,P++;for(var I=(B-R)*p+1>>>0,q=new Uint8Array(I);R!==B;){for(var $=S[R],U=0,F=I-1;($!==0||U<k)&&F!==-1;F--,U++)$+=256*q[F]>>>0,q[F]=$%a>>>0,$=$/a>>>0;if($!==0)throw new Error("Non-zero carry");k=U,R++}for(var L=I-k;L!==I&&q[L]===0;)L++;for(var W=u.repeat(P);L<I;++L)W+=t.charAt(q[L]);return W}function A(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var P=0;if(S[P]!==" "){for(var k=0,R=0;S[P]===u;)k++,P++;for(var B=(S.length-P)*m+1>>>0,I=new Uint8Array(B);S[P];){var q=r[S.charCodeAt(P)];if(q===255)return;for(var $=0,U=B-1;(q!==0||$<R)&&U!==-1;U--,$++)q+=a*I[U]>>>0,I[U]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");R=$,P++}if(S[P]!==" "){for(var F=B-R;F!==B&&I[F]===0;)F++;for(var L=new Uint8Array(k+(B-F)),W=k;F!==B;)L[W++]=I[F++];return L}}}function M(S){var P=A(S);if(P)return P;throw new Error(`Non-${e} character`)}return{encode:b,decodeUnsafe:A,decode:M}}var Iot=Rot,kot=Iot,gve=kot;var dF=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},hF=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return bve(this,e)}},pF=class{decoders;constructor(e){this.decoders=e}or(e){return bve(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function bve(t,e){return new pF({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}var mF=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new dF(e,r,n),this.decoder=new hF(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function vve({name:t,prefix:e,encode:r,decode:n}){return new mF(t,e,r,n)}function yF({name:t,prefix:e,alphabet:r}){let{encode:n,decode:i}=gve(r,t);return vve({prefix:e,name:t,encode:n,decode:o=>f2(i(o))})}function Oot(t,e,r,n){let i={};for(let p=0;p<e.length;++p)i[e[p]]=p;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,u=0,m=0;for(let p=0;p<o;++p){let b=i[t[p]];if(b===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|b,a+=r,a>=8&&(a-=8,s[m++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s}function Bot(t,e,r){let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s!==0&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o}function Oa({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return vve({prefix:e,name:t,encode(i){return Bot(i,n,r)},decode(i){return Oot(i,n,r,t)}})}var p3=Oa({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qGt=Oa({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),$Gt=Oa({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),LGt=Oa({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),UGt=Oa({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),FGt=Oa({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),zGt=Oa({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),KGt=Oa({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),gF=Oa({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});_();var nc=yF({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),HGt=yF({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});_();var QGt=Oa({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),XGt=Oa({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),dd=Oa({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),eVt=Oa({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});_();function wve(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function _ve(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function ST(t){let r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,i]=r;return i}var m3=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},xve=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(m){o({value:m,done:a})},s)}},MT=new TextEncoder,Yg=new TextDecoder,at=class{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new at(e,"ArrayBuffer")}static asyncIterable(e){if(!_ve(e))throw new TypeError("Input must be of type AsyncIterable.");return new at(e,"AsyncIterable")}static base32Z(e){return new at(e,"Base32Z")}static base58Btc(e){return new at(e,"Base58Btc")}static base64Url(e){return new at(e,"Base64Url")}static bufferSource(e){return new at(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new at(e,"Hex")}static multibase(e){return new at(e,"Multibase")}static object(e){return new at(e,"Object")}static string(e){return new at(e,"String")}static uint8Array(e){return new at(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return nc.baseDecode(this.data).buffer;case"Base64Url":return dd.baseDecode(this.data).buffer;case"BufferSource":{if(ST(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return wve(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return m3(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return gF.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return nc.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return nc.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return dd.baseEncode(e)}case"BufferSource":{let e=this.toUint8Array();return dd.baseEncode(e)}case"Object":{let e=JSON.stringify(this.data),r=MT.encode(e);return dd.baseEncode(r)}case"String":{let e=MT.encode(this.data);return dd.baseEncode(e)}case"Uint8Array":return dd.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){return m3(this,void 0,void 0,function*(){var e,r,n,i;switch(this.format){case"AsyncIterable":{let u=[];try{for(var o=!0,s=xve(this.data),a;a=yield s.next(),e=a.done,!e;o=!0){i=a.value,o=!1;let p=i;u.push(p)}}catch(p){r={error:p}}finally{try{!o&&!e&&(n=s.return)&&(yield n.call(s))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){let e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{let r=this.toUint8Array();return at.uint8Array(r).toHex()}case"Base64Url":{let r=this.toUint8Array();return at.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{let e=dd.baseDecode(this.data),r=Yg.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{let e=Yg.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return m3(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return Yg.decode(this.data);case"Base64Url":{let e=dd.baseDecode(this.data);return Yg.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return Yg.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){return m3(this,void 0,void 0,function*(){var e,r,n,i;switch(this.format){case"AsyncIterable":{let u="";try{for(var o=!0,s=xve(this.data),a;a=yield s.next(),e=a.done,!e;o=!0){i=a.value,o=!1;let m=i;typeof m=="string"?u+=m:u+=Yg.decode(m,{stream:!0})}}catch(m){r={error:m}}finally{try{!o&&!e&&(n=s.return)&&(yield n.call(s))}finally{if(r)throw r.error}}return u+=Yg.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return gF.baseDecode(this.data);case"Base58Btc":return nc.baseDecode(this.data);case"Base64Url":return dd.baseDecode(this.data);case"BufferSource":{let e=ST(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{let e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){let n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{let e=JSON.stringify(this.data);return MT.encode(e)}case"String":return MT.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return m3(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};_();_();_();_();var Vh={};zt(Vh,{decode:()=>u2,encodeTo:()=>Qg,encodingLength:()=>Xg});_();_();var Dot=Mve,Eve=128,Cot=127,Not=~Cot,jot=Math.pow(2,31);function Mve(t,e,r){e=e||[],r=r||0;for(var n=r;t>=jot;)e[r++]=t&255|Eve,t/=128;for(;t&Not;)e[r++]=t&255|Eve,t>>>=7;return e[r]=t|0,Mve.bytes=r-n+1,e}var qot=bF,$ot=128,Sve=127;function bF(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw bF.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&Sve)<<i:(s&Sve)*Math.pow(2,i),i+=7}while(s>=$ot);return bF.bytes=o-n,r}var Lot=Math.pow(2,7),Uot=Math.pow(2,14),Fot=Math.pow(2,21),zot=Math.pow(2,28),Kot=Math.pow(2,35),Wot=Math.pow(2,42),Got=Math.pow(2,49),Vot=Math.pow(2,56),Hot=Math.pow(2,63),Zot=function(t){return t<Lot?1:t<Uot?2:t<Fot?3:t<zot?4:t<Kot?5:t<Wot?6:t<Got?7:t<Vot?8:t<Hot?9:10},Jot={encode:Dot,decode:qot,encodingLength:Zot},Yot=Jot,y3=Yot;function u2(t,e=0){return[y3.decode(t,e),y3.decode.bytes]}function Qg(t,e,r=0){return y3.encode(t,e,r),e}function Xg(t){return y3.encodingLength(t)}function vF(t,e){let r=e.byteLength,n=Xg(t),i=n+Xg(r),o=new Uint8Array(i+r);return Qg(t,o,0),Qg(r,o,n),o.set(e,i),new l2(t,r,e,o)}function Ave(t){let e=f2(t),[r,n]=u2(e),[i,o]=u2(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new l2(r,i,s,e)}function Pve(t,e){if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&yve(t.bytes,r.bytes)}}var l2=class{code;size;digest;bytes;constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};_();function Tve(t,e){let{bytes:r,version:n}=t;switch(n){case 0:return Xot(r,_F(t),e??nc.encoder);default:return est(r,_F(t),e??p3.encoder)}}var Rve=new WeakMap;function _F(t){let e=Rve.get(t);if(e==null){let r=new Map;return Rve.set(t,r),r}return e}var ko=class{code;version;multihash;bytes;"/";constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==g3)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==tst)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return ko.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=vF(e,r);return ko.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return ko.equals(this,e)}static equals(e,r){let n=r;return n!=null&&e.code===n.code&&e.version===n.version&&Pve(e.multihash,n.multihash)}toString(e){return Tve(this,e)}toJSON(){return{"/":Tve(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof ko)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new ko(n,i,o,s??Ive(n,i,o.bytes))}else if(r[rst]===!0){let{version:n,multihash:i,code:o}=r,s=Ave(i);return ko.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==g3)throw new Error(`Version 0 CID must use dag-pb (code: ${g3}) block encoding`);return new ko(e,r,n,n.bytes)}case 1:{let i=Ive(e,r,n.bytes);return new ko(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return ko.create(0,g3,e)}static createV1(e,r){return ko.create(1,e,r)}static decode(e){let[r,n]=ko.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=ko.inspectBytes(e),n=r.size-r.multihashSize,i=f2(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new l2(r.multihashCode,r.digestSize,o,i);return[r.version===0?ko.createV0(s):ko.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[b,A]=u2(e.subarray(r));return r+=A,b},i=n(),o=g3;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),u=n(),m=r+u,p=m-s;return{version:i,codec:o,multihashCode:a,digestSize:u,multihashSize:p,size:m}}static parse(e,r){let[n,i]=Qot(e,r),o=ko.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return _F(o).set(n,e),o}};function Qot(t,e){switch(t[0]){case"Q":{let r=e??nc;return[nc.prefix,r.decode(`${nc.prefix}${t}`)]}case nc.prefix:{let r=e??nc;return[nc.prefix,r.decode(t)]}case p3.prefix:{let r=e??p3;return[p3.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function Xot(t,e,r){let{prefix:n}=r;if(n!==nc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i}function est(t,e,r){let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i}var g3=112,tst=18;function Ive(t,e,r){let n=Xg(t),i=n+Xg(e),o=new Uint8Array(i+r.byteLength);return Qg(t,o,0),Qg(e,o,n),o.set(r,i),o}var rst=Symbol.for("@ipld/js-cid/CID");_();_();_();_();_();_();var rs=class{static addPrefix(e){var r;let{code:n,data:i,name:o}=e;if(!(o?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=rs.codeToName.has(n)?n:rs.nameToCode.get(o),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);let s=Vh.encodingLength(n),a=new Uint8Array(s+i.byteLength);return a.set(i,s),Vh.encodeTo(n,a),a}static getCodeFromData(e){let{prefixedData:r}=e,[n,i]=Vh.decode(r);return n}static getCodeFromName(e){let{name:r}=e,n=rs.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){let{code:r}=e,n=rs.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){rs.codeToName.set(e.code,e.name),rs.nameToCode.set(e.name,e.code)}static removePrefix(e){let{prefixedData:r}=e,[n,i]=Vh.decode(r),o=rs.codeToName.get(n);if(o===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(i),name:o}}};rs.codeToName=new Map;rs.nameToCode=new Map;rs.registerCodec({code:237,name:"ed25519-pub"});rs.registerCodec({code:4864,name:"ed25519-priv"});rs.registerCodec({code:236,name:"x25519-pub"});rs.registerCodec({code:4866,name:"x25519-priv"});rs.registerCodec({code:231,name:"secp256k1-pub"});rs.registerCodec({code:4865,name:"secp256k1-priv"});_();function xF(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&xF(t[e])})}_();var nat=Zt(Owe(),1),pb=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})};var QT=class{constructor(){this.store=new Map}clear(){return pb(this,void 0,void 0,function*(){this.store.clear()})}close(){return pb(this,void 0,void 0,function*(){})}delete(e){return pb(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return pb(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return pb(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return pb(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return pb(this,void 0,void 0,function*(){this.store.set(e,r)})}};_();_();var $lt=Zt(bK(),1);var Llt=Zt(bK(),1);_();_();_();_();_();function Ult(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function vK(t,...e){if(!Ult(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function wK(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function s_e(t,e){vK(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}_();_();var I2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var PR=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Fu=(t,e)=>t<<32-e|t>>>e;var yJt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Flt(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function _K(t){return typeof t=="string"&&(t=Flt(t)),vK(t),t}var AR=class{clone(){return this._cloneInto()}},gJt={}.toString;function a_e(t){let e=n=>t().update(_K(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function c_e(t=32){if(I2&&typeof I2.getRandomValues=="function")return I2.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function zlt(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,m=n?0:4;t.setUint32(e+u,s,n),t.setUint32(e+m,a,n)}var f_e=(t,e,r)=>t&e^~t&r,u_e=(t,e,r)=>t&e^t&r^e&r,TR=class extends AR{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=PR(this.buffer)}update(e){wK(this);let{view:r,buffer:n,blockLen:i}=this;e=_K(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let u=PR(e);for(;i<=o-s;s+=i)this.process(u,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){wK(this),s_e(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let b=s;b<i;b++)r[b]=0;zlt(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=PR(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let m=u/4,p=this.get();if(m>p.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<m;b++)a.setUint32(4*b,p[b],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};var Klt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),pm=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),mm=new Uint32Array(64),xK=class extends TR{constructor(){super(64,32,8,!1),this.A=pm[0]|0,this.B=pm[1]|0,this.C=pm[2]|0,this.D=pm[3]|0,this.E=pm[4]|0,this.F=pm[5]|0,this.G=pm[6]|0,this.H=pm[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:u}=this;return[e,r,n,i,o,s,a,u]}set(e,r,n,i,o,s,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=u|0}process(e,r){for(let b=0;b<16;b++,r+=4)mm[b]=e.getUint32(r,!1);for(let b=16;b<64;b++){let A=mm[b-15],M=mm[b-2],S=Fu(A,7)^Fu(A,18)^A>>>3,P=Fu(M,17)^Fu(M,19)^M>>>10;mm[b]=P+mm[b-7]+S+mm[b-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:u,G:m,H:p}=this;for(let b=0;b<64;b++){let A=Fu(a,6)^Fu(a,11)^Fu(a,25),M=p+A+f_e(a,u,m)+Klt[b]+mm[b]|0,P=(Fu(n,2)^Fu(n,13)^Fu(n,22))+u_e(n,i,o)|0;p=m,m=u,u=a,a=s+M|0,s=o,o=i,i=n,n=M+P|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,u=u+this.F|0,m=m+this.G|0,p=p+this.H|0,this.set(n,i,o,s,a,u,m,p)}roundClean(){mm.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var ym=a_e(()=>new xK);var Wlt=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},k2=class{static digest(e){return Wlt(this,arguments,void 0,function*({data:r}){return ym(r)})}};_();var xd=class{};var Glt=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},RR=class extends xd{digest(e){return Glt(this,arguments,void 0,function*({algorithm:r,data:n}){switch(r){case"SHA-256":return yield k2.digest({data:n})}})}};_();_();_();_();_();_();function l_e(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Vlt(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function EK(t,...e){if(!Vlt(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function d_e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");l_e(t.outputLen),l_e(t.blockLen)}function O2(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function h_e(t,e){EK(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}_();_();var IR=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function p_e(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var kR=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),zu=(t,e)=>t<<32-e|t>>>e,Hlt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Hlt)throw new Error("Non little-endian hardware is not supported");function SK(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function V3(t){if(typeof t=="string"&&(t=SK(t)),!p_e(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function OR(...t){let e=0;for(let n=0;n<t.length;n++){let i=t[n];if(!p_e(i))throw new Error("Uint8Array expected");e+=i.length}let r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}var B2=class{clone(){return this._cloneInto()}},FJt={}.toString;function BR(t){let e=n=>t().update(V3(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function H3(t=32){if(IR&&typeof IR.getRandomValues=="function")return IR.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function Zlt(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,m=n?0:4;t.setUint32(e+u,s,n),t.setUint32(e+m,a,n)}var D2=class extends B2{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=kR(this.buffer)}update(e){O2(this);let{view:r,buffer:n,blockLen:i}=this;e=V3(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let u=kR(e);for(;i<=o-s;s+=i)this.process(u,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){O2(this),h_e(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let b=s;b<i;b++)r[b]=0;Zlt(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=kR(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let m=u/4,p=this.get();if(m>p.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<m;b++)a.setUint32(4*b,p[b],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};var Jlt=(t,e,r)=>t&e^~t&r,Ylt=(t,e,r)=>t&e^t&r^e&r,Qlt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),gm=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),bm=new Uint32Array(64),MK=class extends D2{constructor(){super(64,32,8,!1),this.A=gm[0]|0,this.B=gm[1]|0,this.C=gm[2]|0,this.D=gm[3]|0,this.E=gm[4]|0,this.F=gm[5]|0,this.G=gm[6]|0,this.H=gm[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:u}=this;return[e,r,n,i,o,s,a,u]}set(e,r,n,i,o,s,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=u|0}process(e,r){for(let b=0;b<16;b++,r+=4)bm[b]=e.getUint32(r,!1);for(let b=16;b<64;b++){let A=bm[b-15],M=bm[b-2],S=zu(A,7)^zu(A,18)^A>>>3,P=zu(M,17)^zu(M,19)^M>>>10;bm[b]=P+bm[b-7]+S+bm[b-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:u,G:m,H:p}=this;for(let b=0;b<64;b++){let A=zu(a,6)^zu(a,11)^zu(a,25),M=p+A+Jlt(a,u,m)+Qlt[b]+bm[b]|0,P=(zu(n,2)^zu(n,13)^zu(n,22))+Ylt(n,i,o)|0;p=m,m=u,u=a,a=s+M|0,s=o,o=i,i=n,n=M+P|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,u=u+this.F|0,m=m+this.G|0,p=p+this.H|0,this.set(n,i,o,s,a,u,m,p)}roundClean(){bm.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var DR=BR(()=>new MK);_();var NR={};zt(NR,{bitGet:()=>odt,bitLen:()=>idt,bitMask:()=>Z3,bitSet:()=>sdt,bytesToHex:()=>sp,bytesToNumberBE:()=>ap,bytesToNumberLE:()=>Wu,concatBytes:()=>fp,createHmacDrbg:()=>TK,ensureBytes:()=>Hn,equalBytes:()=>rdt,hexToBytes:()=>Mb,hexToNumber:()=>PK,isBytes:()=>Ku,numberToBytesBE:()=>oc,numberToBytesLE:()=>cp,numberToHexUnpadded:()=>b_e,numberToVarBytesBE:()=>tdt,utf8ToBytes:()=>ndt,validateObject:()=>qf});_();var g_e=BigInt(0),CR=BigInt(1),Xlt=BigInt(2);function Ku(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var edt=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function sp(t){if(!Ku(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=edt[t[r]];return e}function b_e(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function PK(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var op={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function m_e(t){if(t>=op._0&&t<=op._9)return t-op._0;if(t>=op._A&&t<=op._F)return t-(op._A-10);if(t>=op._a&&t<=op._f)return t-(op._a-10)}function Mb(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=m_e(t.charCodeAt(o)),a=m_e(t.charCodeAt(o+1));if(s===void 0||a===void 0){let u=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+o)}n[i]=s*16+a}return n}function ap(t){return PK(sp(t))}function Wu(t){if(!Ku(t))throw new Error("Uint8Array expected");return PK(sp(Uint8Array.from(t).reverse()))}function oc(t,e){return Mb(t.toString(16).padStart(e*2,"0"))}function cp(t,e){return oc(t,e).reverse()}function tdt(t){return Mb(b_e(t))}function Hn(t,e,r){let n;if(typeof e=="string")try{n=Mb(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else if(Ku(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function fp(...t){let e=0;for(let i=0;i<t.length;i++){let o=t[i];if(!Ku(o))throw new Error("Uint8Array expected");e+=o.length}let r=new Uint8Array(e),n=0;for(let i=0;i<t.length;i++){let o=t[i];r.set(o,n),n+=o.length}return r}function rdt(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function ndt(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function idt(t){let e;for(e=0;t>g_e;t>>=CR,e+=1);return e}function odt(t,e){return t>>BigInt(e)&CR}var sdt=(t,e,r)=>t|(r?CR:g_e)<<BigInt(e),Z3=t=>(Xlt<<BigInt(t-1))-CR,AK=t=>new Uint8Array(t),y_e=t=>Uint8Array.from(t);function TK(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=AK(t),i=AK(t),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...b)=>r(i,n,...b),u=(b=AK())=>{i=a(y_e([0]),b),n=a(),b.length!==0&&(i=a(y_e([1]),b),n=a())},m=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let b=0,A=[];for(;b<e;){n=a();let M=n.slice();A.push(M),b+=n.length}return fp(...A)};return(b,A)=>{s(),u(b);let M;for(;!(M=A(m()));)u();return s(),M}}var adt={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Ku(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function qf(t,e,r={}){let n=(i,o,s)=>{let a=adt[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let u=t[i];if(!(s&&u===void 0)&&!a(u,t))throw new Error(`Invalid param ${String(i)}=${u} (${typeof u}), expected ${o}`)};for(let[i,o]of Object.entries(e))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return t}var Bo=BigInt(0),ii=BigInt(1),Ab=BigInt(2),cdt=BigInt(3),RK=BigInt(4),v_e=BigInt(5),w_e=BigInt(8),fdt=BigInt(9),udt=BigInt(16);function an(t,e){let r=t%e;return r>=Bo?r:e+r}function IK(t,e,r){if(r<=Bo||e<Bo)throw new Error("Expected power/modulo > 0");if(r===ii)return Bo;let n=ii;for(;e>Bo;)e&ii&&(n=n*t%r),t=t*t%r,e>>=ii;return n}function Zn(t,e,r){let n=t;for(;e-- >Bo;)n*=n,n%=r;return n}function jR(t,e){if(t===Bo||e<=Bo)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=an(t,e),n=e,i=Bo,o=ii,s=ii,a=Bo;for(;r!==Bo;){let m=n/r,p=n%r,b=i-s*m,A=o-a*m;n=r,r=p,i=s,o=a,s=b,a=A}if(n!==ii)throw new Error("invert: does not exist");return an(i,e)}function ldt(t){let e=(t-ii)/Ab,r,n,i;for(r=t-ii,n=0;r%Ab===Bo;r/=Ab,n++);for(i=Ab;i<t&&IK(i,e,t)!==t-ii;i++);if(n===1){let s=(t+ii)/RK;return function(u,m){let p=u.pow(m,s);if(!u.eql(u.sqr(p),m))throw new Error("Cannot find square root");return p}}let o=(r+ii)/Ab;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let m=n,p=a.pow(a.mul(a.ONE,i),r),b=a.pow(u,o),A=a.pow(u,r);for(;!a.eql(A,a.ONE);){if(a.eql(A,a.ZERO))return a.ZERO;let M=1;for(let P=a.sqr(A);M<m&&!a.eql(P,a.ONE);M++)P=a.sqr(P);let S=a.pow(p,ii<<BigInt(m-M-1));p=a.sqr(S),b=a.mul(b,S),A=a.mul(A,p),m=M}return b}}function ddt(t){if(t%RK===cdt){let e=(t+ii)/RK;return function(n,i){let o=n.pow(i,e);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(t%w_e===v_e){let e=(t-v_e)/w_e;return function(n,i){let o=n.mul(i,Ab),s=n.pow(o,e),a=n.mul(i,s),u=n.mul(n.mul(a,Ab),s),m=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(m),i))throw new Error("Cannot find square root");return m}}return t%udt,ldt(t)}var __e=(t,e)=>(an(t,e)&ii)===ii,hdt=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function kK(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=hdt.reduce((n,i)=>(n[i]="function",n),e);return qf(t,r)}function pdt(t,e,r){if(r<Bo)throw new Error("Expected power > 0");if(r===Bo)return t.ONE;if(r===ii)return e;let n=t.ONE,i=e;for(;r>Bo;)r&ii&&(n=t.mul(n,i)),i=t.sqr(i),r>>=ii;return n}function mdt(t,e){let r=new Array(e.length),n=e.reduce((o,s,a)=>t.is0(s)?o:(r[a]=o,t.mul(o,s)),t.ONE),i=t.inv(n);return e.reduceRight((o,s,a)=>t.is0(s)?o:(r[a]=t.mul(o,r[a]),t.mul(o,s)),i),r}function OK(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function C2(t,e,r=!1,n={}){if(t<=Bo)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:i,nByteLength:o}=OK(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=ddt(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:Z3(i),ZERO:Bo,ONE:ii,create:u=>an(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return Bo<=u&&u<t},is0:u=>u===Bo,isOdd:u=>(u&ii)===ii,neg:u=>an(-u,t),eql:(u,m)=>u===m,sqr:u=>an(u*u,t),add:(u,m)=>an(u+m,t),sub:(u,m)=>an(u-m,t),mul:(u,m)=>an(u*m,t),pow:(u,m)=>pdt(a,u,m),div:(u,m)=>an(u*jR(m,t),t),sqrN:u=>u*u,addN:(u,m)=>u+m,subN:(u,m)=>u-m,mulN:(u,m)=>u*m,inv:u=>jR(u,t),sqrt:n.sqrt||(u=>s(a,u)),invertBatch:u=>mdt(a,u),cmov:(u,m,p)=>p?m:u,toBytes:u=>r?cp(u,o):oc(u,o),fromBytes:u=>{if(u.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${u.length}`);return r?Wu(u):ap(u)}});return Object.freeze(a)}function x_e(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function E_e(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function BK(t){let e=E_e(t);return e+Math.ceil(e/2)}function S_e(t,e,r=!1){let n=t.length,i=E_e(e),o=BK(e);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?ap(t):Wu(t),a=an(s,e-ii)+ii;return r?cp(a,i):oc(a,i)}_();_();var gdt=BigInt(0),DK=BigInt(1);function qR(t,e){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(e/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=t.ZERO,a=i;for(;o>gdt;)o&DK&&(s=s.add(a)),a=a.double(),o>>=DK;return s},precomputeWindow(i,o){let{windows:s,windowSize:a}=n(o),u=[],m=i,p=m;for(let b=0;b<s;b++){p=m,u.push(p);for(let A=1;A<a;A++)p=p.add(m),u.push(p);m=p.double()}return u},wNAF(i,o,s){let{windows:a,windowSize:u}=n(i),m=t.ZERO,p=t.BASE,b=BigInt(2**i-1),A=2**i,M=BigInt(i);for(let S=0;S<a;S++){let P=S*u,k=Number(s&b);s>>=M,k>u&&(k-=A,s+=DK);let R=P,B=P+Math.abs(k)-1,I=S%2!==0,q=k<0;k===0?p=p.add(r(I,o[R])):m=m.add(r(q,o[B]))}return{p:m,f:p}},wNAFCached(i,o,s,a){let u=i._WINDOW_SIZE||1,m=o.get(i);return m||(m=this.precomputeWindow(i,u),u!==1&&o.set(i,a(m))),this.wNAF(u,m,s)}}}function J3(t){return kK(t.Fp),qf(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...OK(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function bdt(t){let e=J3(t);qf(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:vdt,hexToBytes:wdt}=NR,Pb={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=Pb;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:vdt(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=Pb,r=typeof t=="string"?wdt(t):t;if(!Ku(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:i,l:o}=Pb._parseInt(r.subarray(2)),{d:s,l:a}=Pb._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){let e=m=>Number.parseInt(m[0],16)&8?"00"+m:m,r=m=>{let p=m.toString(16);return p.length&1?`0${p}`:p},n=e(r(t.s)),i=e(r(t.r)),o=n.length/2,s=i.length/2,a=r(o),u=r(s);return`30${r(s+o+4)}02${u}${i}02${a}${n}`}},up=BigInt(0),$f=BigInt(1),fYt=BigInt(2),M_e=BigInt(3),uYt=BigInt(4);function _dt(t){let e=bdt(t),{Fp:r}=e,n=e.toBytes||((S,P,k)=>{let R=P.toAffine();return fp(Uint8Array.from([4]),r.toBytes(R.x),r.toBytes(R.y))}),i=e.fromBytes||(S=>{let P=S.subarray(1),k=r.fromBytes(P.subarray(0,r.BYTES)),R=r.fromBytes(P.subarray(r.BYTES,2*r.BYTES));return{x:k,y:R}});function o(S){let{a:P,b:k}=e,R=r.sqr(S),B=r.mul(R,S);return r.add(r.add(B,r.mul(S,P)),k)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(S){return typeof S=="bigint"&&up<S&&S<e.n}function a(S){if(!s(S))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(S){let{allowedPrivateKeyLengths:P,nByteLength:k,wrapPrivateKey:R,n:B}=e;if(P&&typeof S!="bigint"){if(Ku(S)&&(S=sp(S)),typeof S!="string"||!P.includes(S.length))throw new Error("Invalid key");S=S.padStart(k*2,"0")}let I;try{I=typeof S=="bigint"?S:ap(Hn("private key",S,k))}catch{throw new Error(`private key must be ${k} bytes, hex or bigint, not ${typeof S}`)}return R&&(I=an(I,B)),a(I),I}let m=new Map;function p(S){if(!(S instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(P,k,R){if(this.px=P,this.py=k,this.pz=R,P==null||!r.isValid(P))throw new Error("x required");if(k==null||!r.isValid(k))throw new Error("y required");if(R==null||!r.isValid(R))throw new Error("z required")}static fromAffine(P){let{x:k,y:R}=P||{};if(!P||!r.isValid(k)||!r.isValid(R))throw new Error("invalid affine point");if(P instanceof b)throw new Error("projective point not allowed");let B=I=>r.eql(I,r.ZERO);return B(k)&&B(R)?b.ZERO:new b(k,R,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(P){let k=r.invertBatch(P.map(R=>R.pz));return P.map((R,B)=>R.toAffine(k[B])).map(b.fromAffine)}static fromHex(P){let k=b.fromAffine(i(Hn("pointHex",P)));return k.assertValidity(),k}static fromPrivateKey(P){return b.BASE.multiply(u(P))}_setWindowSize(P){this._WINDOW_SIZE=P,m.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:P,y:k}=this.toAffine();if(!r.isValid(P)||!r.isValid(k))throw new Error("bad point: x or y not FE");let R=r.sqr(k),B=o(P);if(!r.eql(R,B))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:P}=this.toAffine();if(r.isOdd)return!r.isOdd(P);throw new Error("Field doesn't support isOdd")}equals(P){p(P);let{px:k,py:R,pz:B}=this,{px:I,py:q,pz:$}=P,U=r.eql(r.mul(k,$),r.mul(I,B)),F=r.eql(r.mul(R,$),r.mul(q,B));return U&&F}negate(){return new b(this.px,r.neg(this.py),this.pz)}double(){let{a:P,b:k}=e,R=r.mul(k,M_e),{px:B,py:I,pz:q}=this,$=r.ZERO,U=r.ZERO,F=r.ZERO,L=r.mul(B,B),W=r.mul(I,I),E=r.mul(q,q),c=r.mul(B,I);return c=r.add(c,c),F=r.mul(B,q),F=r.add(F,F),$=r.mul(P,F),U=r.mul(R,E),U=r.add($,U),$=r.sub(W,U),U=r.add(W,U),U=r.mul($,U),$=r.mul(c,$),F=r.mul(R,F),E=r.mul(P,E),c=r.sub(L,E),c=r.mul(P,c),c=r.add(c,F),F=r.add(L,L),L=r.add(F,L),L=r.add(L,E),L=r.mul(L,c),U=r.add(U,L),E=r.mul(I,q),E=r.add(E,E),L=r.mul(E,c),$=r.sub($,L),F=r.mul(E,W),F=r.add(F,F),F=r.add(F,F),new b($,U,F)}add(P){p(P);let{px:k,py:R,pz:B}=this,{px:I,py:q,pz:$}=P,U=r.ZERO,F=r.ZERO,L=r.ZERO,W=e.a,E=r.mul(e.b,M_e),c=r.mul(k,I),l=r.mul(R,q),y=r.mul(B,$),d=r.add(k,R),h=r.add(I,q);d=r.mul(d,h),h=r.add(c,l),d=r.sub(d,h),h=r.add(k,B);let v=r.add(I,$);return h=r.mul(h,v),v=r.add(c,y),h=r.sub(h,v),v=r.add(R,B),U=r.add(q,$),v=r.mul(v,U),U=r.add(l,y),v=r.sub(v,U),L=r.mul(W,h),U=r.mul(E,y),L=r.add(U,L),U=r.sub(l,L),L=r.add(l,L),F=r.mul(U,L),l=r.add(c,c),l=r.add(l,c),y=r.mul(W,y),h=r.mul(E,h),l=r.add(l,y),y=r.sub(c,y),y=r.mul(W,y),h=r.add(h,y),c=r.mul(l,h),F=r.add(F,c),c=r.mul(v,h),U=r.mul(d,U),U=r.sub(U,c),c=r.mul(d,l),L=r.mul(v,L),L=r.add(L,c),new b(U,F,L)}subtract(P){return this.add(P.negate())}is0(){return this.equals(b.ZERO)}wNAF(P){return M.wNAFCached(this,m,P,k=>{let R=r.invertBatch(k.map(B=>B.pz));return k.map((B,I)=>B.toAffine(R[I])).map(b.fromAffine)})}multiplyUnsafe(P){let k=b.ZERO;if(P===up)return k;if(a(P),P===$f)return this;let{endo:R}=e;if(!R)return M.unsafeLadder(this,P);let{k1neg:B,k1:I,k2neg:q,k2:$}=R.splitScalar(P),U=k,F=k,L=this;for(;I>up||$>up;)I&$f&&(U=U.add(L)),$&$f&&(F=F.add(L)),L=L.double(),I>>=$f,$>>=$f;return B&&(U=U.negate()),q&&(F=F.negate()),F=new b(r.mul(F.px,R.beta),F.py,F.pz),U.add(F)}multiply(P){a(P);let k=P,R,B,{endo:I}=e;if(I){let{k1neg:q,k1:$,k2neg:U,k2:F}=I.splitScalar(k),{p:L,f:W}=this.wNAF($),{p:E,f:c}=this.wNAF(F);L=M.constTimeNegate(q,L),E=M.constTimeNegate(U,E),E=new b(r.mul(E.px,I.beta),E.py,E.pz),R=L.add(E),B=W.add(c)}else{let{p:q,f:$}=this.wNAF(k);R=q,B=$}return b.normalizeZ([R,B])[0]}multiplyAndAddUnsafe(P,k,R){let B=b.BASE,I=($,U)=>U===up||U===$f||!$.equals(B)?$.multiplyUnsafe(U):$.multiply(U),q=I(this,k).add(I(P,R));return q.is0()?void 0:q}toAffine(P){let{px:k,py:R,pz:B}=this,I=this.is0();P==null&&(P=I?r.ONE:r.inv(B));let q=r.mul(k,P),$=r.mul(R,P),U=r.mul(B,P);if(I)return{x:r.ZERO,y:r.ZERO};if(!r.eql(U,r.ONE))throw new Error("invZ was invalid");return{x:q,y:$}}isTorsionFree(){let{h:P,isTorsionFree:k}=e;if(P===$f)return!0;if(k)return k(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:P,clearCofactor:k}=e;return P===$f?this:k?k(b,this):this.multiplyUnsafe(e.h)}toRawBytes(P=!0){return this.assertValidity(),n(b,this,P)}toHex(P=!0){return sp(this.toRawBytes(P))}}b.BASE=new b(e.Gx,e.Gy,r.ONE),b.ZERO=new b(r.ZERO,r.ONE,r.ZERO);let A=e.nBitLength,M=qR(b,e.endo?Math.ceil(A/2):A);return{CURVE:e,ProjectivePoint:b,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:s}}function xdt(t){let e=J3(t);return qf(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function A_e(t){let e=xdt(t),{Fp:r,n}=e,i=r.BYTES+1,o=2*r.BYTES+1;function s(h){return up<h&&h<r.ORDER}function a(h){return an(h,n)}function u(h){return jR(h,n)}let{ProjectivePoint:m,normPrivateKeyToScalar:p,weierstrassEquation:b,isWithinCurveOrder:A}=_dt({...e,toBytes(h,v,x){let g=v.toAffine(),f=r.toBytes(g.x),w=fp;return x?w(Uint8Array.from([v.hasEvenY()?2:3]),f):w(Uint8Array.from([4]),f,r.toBytes(g.y))},fromBytes(h){let v=h.length,x=h[0],g=h.subarray(1);if(v===i&&(x===2||x===3)){let f=ap(g);if(!s(f))throw new Error("Point is not on curve");let w=b(f),D=r.sqrt(w),T=(D&$f)===$f;return(x&1)===1!==T&&(D=r.neg(D)),{x:f,y:D}}else if(v===o&&x===4){let f=r.fromBytes(g.subarray(0,r.BYTES)),w=r.fromBytes(g.subarray(r.BYTES,2*r.BYTES));return{x:f,y:w}}else throw new Error(`Point of length ${v} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),M=h=>sp(oc(h,e.nByteLength));function S(h){let v=n>>$f;return h>v}function P(h){return S(h)?a(-h):h}let k=(h,v,x)=>ap(h.slice(v,x));class R{constructor(v,x,g){this.r=v,this.s=x,this.recovery=g,this.assertValidity()}static fromCompact(v){let x=e.nByteLength;return v=Hn("compactSignature",v,x*2),new R(k(v,0,x),k(v,x,2*x))}static fromDER(v){let{r:x,s:g}=Pb.toSig(Hn("DER",v));return new R(x,g)}assertValidity(){if(!A(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!A(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(v){return new R(this.r,this.s,v)}recoverPublicKey(v){let{r:x,s:g,recovery:f}=this,w=F(Hn("msgHash",v));if(f==null||![0,1,2,3].includes(f))throw new Error("recovery id invalid");let D=f===2||f===3?x+e.n:x;if(D>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let T=f&1?"03":"02",C=m.fromHex(T+M(D)),z=u(D),G=a(-w*z),V=a(g*z),Z=m.BASE.multiplyAndAddUnsafe(C,G,V);if(!Z)throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return S(this.s)}normalizeS(){return this.hasHighS()?new R(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Mb(this.toDERHex())}toDERHex(){return Pb.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Mb(this.toCompactHex())}toCompactHex(){return M(this.r)+M(this.s)}}let B={isValidPrivateKey(h){try{return p(h),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{let h=BK(e.n);return S_e(e.randomBytes(h),e.n)},precompute(h=8,v=m.BASE){return v._setWindowSize(h),v.multiply(BigInt(3)),v}};function I(h,v=!0){return m.fromPrivateKey(h).toRawBytes(v)}function q(h){let v=Ku(h),x=typeof h=="string",g=(v||x)&&h.length;return v?g===i||g===o:x?g===2*i||g===2*o:h instanceof m}function $(h,v,x=!0){if(q(h))throw new Error("first arg must be private key");if(!q(v))throw new Error("second arg must be public key");return m.fromHex(v).multiply(p(h)).toRawBytes(x)}let U=e.bits2int||function(h){let v=ap(h),x=h.length*8-e.nBitLength;return x>0?v>>BigInt(x):v},F=e.bits2int_modN||function(h){return a(U(h))},L=Z3(e.nBitLength);function W(h){if(typeof h!="bigint")throw new Error("bigint expected");if(!(up<=h&&h<L))throw new Error(`bigint expected < 2^${e.nBitLength}`);return oc(h,e.nByteLength)}function E(h,v,x=c){if(["recovered","canonical"].some(X=>X in x))throw new Error("sign() legacy options not supported");let{hash:g,randomBytes:f}=e,{lowS:w,prehash:D,extraEntropy:T}=x;w==null&&(w=!0),h=Hn("msgHash",h),D&&(h=Hn("prehashed msgHash",g(h)));let C=F(h),z=p(v),G=[W(z),W(C)];if(T!=null){let X=T===!0?f(r.BYTES):T;G.push(Hn("extraEntropy",X))}let V=fp(...G),Z=C;function J(X){let se=U(X);if(!A(se))return;let Q=u(se),te=m.BASE.multiply(se).toAffine(),de=a(te.x);if(de===up)return;let ie=a(Q*a(Z+de*z));if(ie===up)return;let ae=(te.x===de?0:2)|Number(te.y&$f),fe=ie;return w&&S(ie)&&(fe=P(ie),ae^=1),new R(de,fe,ae)}return{seed:V,k2sig:J}}let c={lowS:e.lowS,prehash:!1},l={lowS:e.lowS,prehash:!1};function y(h,v,x=c){let{seed:g,k2sig:f}=E(h,v,x),w=e;return TK(w.hash.outputLen,w.nByteLength,w.hmac)(g,f)}m.BASE._setWindowSize(8);function d(h,v,x,g=l){let f=h;if(v=Hn("msgHash",v),x=Hn("publicKey",x),"strict"in g)throw new Error("options.strict was renamed to lowS");let{lowS:w,prehash:D}=g,T,C;try{if(typeof f=="string"||Ku(f))try{T=R.fromDER(f)}catch(te){if(!(te instanceof Pb.Err))throw te;T=R.fromCompact(f)}else if(typeof f=="object"&&typeof f.r=="bigint"&&typeof f.s=="bigint"){let{r:te,s:de}=f;T=new R(te,de)}else throw new Error("PARSE");C=m.fromHex(x)}catch(te){if(te.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(w&&T.hasHighS())return!1;D&&(v=e.hash(v));let{r:z,s:G}=T,V=F(v),Z=u(G),J=a(V*Z),X=a(z*Z),se=m.BASE.multiplyAndAddUnsafe(C,J,X)?.toAffine();return se?a(se.x)===z:!1}return{CURVE:e,getPublicKey:I,getSharedSecret:$,sign:y,verify:d,ProjectivePoint:m,Signature:R,utils:B}}_();_();var $R=class extends B2{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,d_e(e);let n=V3(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return O2(this),this.iHash.update(e),this}digestInto(e){O2(this),EK(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},CK=(t,e,r)=>new $R(t,e).update(r).digest();CK.create=(t,e)=>new $R(t,e);function Edt(t){return{hash:t,hmac:(e,...r)=>CK(t,e,OR(...r)),randomBytes:H3}}function LR(t,e){let r=n=>A_e({...t,...Edt(n)});return Object.freeze({...r(e),create:r})}var R_e=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),P_e=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Sdt=BigInt(1),NK=BigInt(2),T_e=(t,e)=>(t+e/NK)/e;function Mdt(t){let e=R_e,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),u=BigInt(88),m=t*t*t%e,p=m*m*t%e,b=Zn(p,r,e)*p%e,A=Zn(b,r,e)*p%e,M=Zn(A,NK,e)*m%e,S=Zn(M,i,e)*M%e,P=Zn(S,o,e)*S%e,k=Zn(P,a,e)*P%e,R=Zn(k,u,e)*k%e,B=Zn(R,a,e)*P%e,I=Zn(B,r,e)*p%e,q=Zn(I,s,e)*S%e,$=Zn(q,n,e)*m%e,U=Zn($,NK,e);if(!jK.eql(jK.sqr(U),t))throw new Error("Cannot find square root");return U}var jK=C2(R_e,void 0,void 0,{sqrt:Mdt}),sc=LR({a:BigInt(0),b:BigInt(7),Fp:jK,n:P_e,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=P_e,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Sdt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=T_e(o*t,e),u=T_e(-n*t,e),m=an(t-a*r-u*i,e),p=an(-a*n-u*o,e),b=m>s,A=p>s;if(b&&(m=e-m),A&&(p=e-p),m>s||p>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:b,k1:m,k2neg:A,k2:p}}}},DR),MYt=BigInt(0);var AYt=sc.ProjectivePoint;_();_();function I_e(t){let e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){let i=Object.keys(n).sort(),o={};for(let s of i)o[s]=e(n[s]);return o}return n},r=e(t);return JSON.stringify(r)}var Adt=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},qK="urn:jwk:";function nr(t){return Adt(this,arguments,void 0,function*({jwk:e}){let r=e.kty,n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);xF(n);let i=I_e(n),o=at.string(i).toUint8Array(),s=yield k2.digest({data:o});return at.uint8Array(s).toBase64Url()})}function Ed(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function N2(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function Sd(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function j2(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function k_e(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var ks=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},Pdt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Mn=class{static adjustSignatureToLowS(e){return ks(this,arguments,void 0,function*({signature:r}){let n=sc.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(e){return ks(this,arguments,void 0,function*({privateKeyBytes:r}){let n=yield Mn.getCurvePoint({keyBytes:r}),i={kty:"EC",crv:"secp256k1",d:at.uint8Array(r).toBase64Url(),x:at.uint8Array(n.x).toBase64Url(),y:at.uint8Array(n.y).toBase64Url()};return i.kid=yield nr({jwk:i}),i})}static bytesToPublicKey(e){return ks(this,arguments,void 0,function*({publicKeyBytes:r}){let n=yield Mn.getCurvePoint({keyBytes:r}),i={kty:"EC",crv:"secp256k1",x:at.uint8Array(n.x).toBase64Url(),y:at.uint8Array(n.y).toBase64Url()};return i.kid=yield nr({jwk:i}),i})}static compressPublicKey(e){return ks(this,arguments,void 0,function*({publicKeyBytes:r}){return sc.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(e){return ks(this,arguments,void 0,function*({key:r}){let n=yield Mn.privateKeyToBytes({privateKey:r}),i=yield Mn.getCurvePoint({keyBytes:n}),o={kty:"EC",crv:"secp256k1",x:at.uint8Array(i.x).toBase64Url(),y:at.uint8Array(i.y).toBase64Url()};return o.kid=yield nr({jwk:o}),o})}static convertDerToCompactSignature(e){return ks(this,arguments,void 0,function*({derSignature:r}){return sc.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(e){return ks(this,arguments,void 0,function*({publicKeyBytes:r}){return sc.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return ks(this,void 0,void 0,function*(){let e=sc.utils.randomPrivateKey(),r=yield Mn.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield nr({jwk:r}),r})}static getPublicKey(e){return ks(this,arguments,void 0,function*({key:r}){var n;if(!(Ed(r)&&r.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let{d:i}=r,o=Pdt(r,["d"]);return(n=o.kid)!==null&&n!==void 0||(o.kid=yield nr({jwk:o})),o})}static privateKeyToBytes(e){return ks(this,arguments,void 0,function*({privateKey:r}){if(!Ed(r))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return at.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return ks(this,arguments,void 0,function*({publicKey:r}){if(!(N2(r)&&r.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");let n=new Uint8Array([4]),i=at.base64Url(r.x).toUint8Array(),o=at.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...i,...o])})}static sharedSecret(e){return ks(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let i=yield Mn.privateKeyToBytes({privateKey:r}),o=yield Mn.publicKeyToBytes({publicKey:n});return sc.getSharedSecret(i,o,!0).slice(1)})}static sign(e){return ks(this,arguments,void 0,function*({data:r,key:n}){let i=yield Mn.privateKeyToBytes({privateKey:n}),o=ym(r);return sc.sign(o,i).toCompactRawBytes()})}static validatePrivateKey(e){return ks(this,arguments,void 0,function*({privateKeyBytes:r}){return sc.utils.isValidPrivateKey(r)})}static validatePublicKey(e){return ks(this,arguments,void 0,function*({publicKeyBytes:r}){try{sc.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return ks(this,arguments,void 0,function*({key:r,signature:n,data:i}){let o=yield Mn.publicKeyToBytes({publicKey:r}),s=ym(i);return sc.verify(n,s,o,{lowS:!1})})}static getCurvePoint(e){return ks(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=sc.getPublicKey(r));let n=sc.ProjectivePoint.fromHex(r),i=oc(n.x,32),o=oc(n.y,32);return{x:i,y:o}})}};_();_();var O_e=C2(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),Tdt=O_e.create(BigInt("-3")),Rdt=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Idt=LR({a:Tdt,b:Rdt,Fp:O_e,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},DR),$c=Idt;var Os=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},kdt=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Dn=class{static adjustSignatureToLowS(e){return Os(this,arguments,void 0,function*({signature:r}){let n=$c.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(e){return Os(this,arguments,void 0,function*({privateKeyBytes:r}){let n=yield Dn.getCurvePoint({keyBytes:r}),i={kty:"EC",crv:"P-256",d:at.uint8Array(r).toBase64Url(),x:at.uint8Array(n.x).toBase64Url(),y:at.uint8Array(n.y).toBase64Url()};return i.kid=yield nr({jwk:i}),i})}static bytesToPublicKey(e){return Os(this,arguments,void 0,function*({publicKeyBytes:r}){let n=yield Dn.getCurvePoint({keyBytes:r}),i={kty:"EC",crv:"P-256",x:at.uint8Array(n.x).toBase64Url(),y:at.uint8Array(n.y).toBase64Url()};return i.kid=yield nr({jwk:i}),i})}static compressPublicKey(e){return Os(this,arguments,void 0,function*({publicKeyBytes:r}){return $c.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(e){return Os(this,arguments,void 0,function*({key:r}){let n=yield Dn.privateKeyToBytes({privateKey:r}),i=yield Dn.getCurvePoint({keyBytes:n}),o={kty:"EC",crv:"P-256",x:at.uint8Array(i.x).toBase64Url(),y:at.uint8Array(i.y).toBase64Url()};return o.kid=yield nr({jwk:o}),o})}static convertDerToCompactSignature(e){return Os(this,arguments,void 0,function*({derSignature:r}){return $c.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(e){return Os(this,arguments,void 0,function*({publicKeyBytes:r}){return $c.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return Os(this,void 0,void 0,function*(){let e=$c.utils.randomPrivateKey(),r=yield Dn.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield nr({jwk:r}),r})}static getPublicKey(e){return Os(this,arguments,void 0,function*({key:r}){var n;if(!(Ed(r)&&r.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let{d:i}=r,o=kdt(r,["d"]);return(n=o.kid)!==null&&n!==void 0||(o.kid=yield nr({jwk:o})),o})}static privateKeyToBytes(e){return Os(this,arguments,void 0,function*({privateKey:r}){if(!Ed(r))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return at.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return Os(this,arguments,void 0,function*({publicKey:r}){if(!(N2(r)&&r.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");let n=new Uint8Array([4]),i=at.base64Url(r.x).toUint8Array(),o=at.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...i,...o])})}static sharedSecret(e){return Os(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let i=yield Dn.privateKeyToBytes({privateKey:r}),o=yield Dn.publicKeyToBytes({publicKey:n});return $c.getSharedSecret(i,o,!0).slice(1)})}static sign(e){return Os(this,arguments,void 0,function*({data:r,key:n}){let i=yield Dn.privateKeyToBytes({privateKey:n}),o=ym(r);return $c.sign(o,i).toCompactRawBytes()})}static validatePrivateKey(e){return Os(this,arguments,void 0,function*({privateKeyBytes:r}){return $c.utils.isValidPrivateKey(r)})}static validatePublicKey(e){return Os(this,arguments,void 0,function*({publicKeyBytes:r}){try{$c.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return Os(this,arguments,void 0,function*({key:r,signature:n,data:i}){let o=yield Dn.publicKeyToBytes({publicKey:r}),s=ym(i);return $c.verify(n,s,o,{lowS:!1})})}static getCurvePoint(e){return Os(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=$c.getPublicKey(r));let n=$c.ProjectivePoint.fromHex(r),i=oc(n.x,32),o=oc(n.y,32);return{x:i,y:o}})}};var Y3=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},Q3=class extends xd{computePublicKey(e){return Y3(this,arguments,void 0,function*({key:r}){if(!Ed(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{let n=yield Mn.computePublicKey({key:r});return n.alg="ES256K",n}case"P-256":{let n=yield Dn.computePublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(e){return Y3(this,arguments,void 0,function*({algorithm:r}){switch(r){case"ES256K":case"secp256k1":{let n=yield Mn.generateKey();return n.alg="ES256K",n}case"ES256":case"secp256r1":{let n=yield Dn.generateKey();return n.alg="ES256",n}}})}getPublicKey(e){return Y3(this,arguments,void 0,function*({key:r}){if(!Ed(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{let n=yield Mn.getPublicKey({key:r});return n.alg="ES256K",n}case"P-256":{let n=yield Dn.getPublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(e){return Y3(this,arguments,void 0,function*({key:r,data:n}){if(!Ed(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":return yield Mn.sign({key:r,data:n});case"P-256":return yield Dn.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(e){return Y3(this,arguments,void 0,function*({key:r,signature:n,data:i}){if(!N2(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(r.crv){case"secp256k1":return yield Mn.verify({key:r,signature:n,data:i});case"P-256":return yield Dn.verify({key:r,signature:n,data:i});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}};_();_();_();_();_();var UR=BigInt(4294967295),$K=BigInt(32);function B_e(t,e=!1){return e?{h:Number(t&UR),l:Number(t>>$K&UR)}:{h:Number(t>>$K&UR)|0,l:Number(t&UR)|0}}function Odt(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:o,l:s}=B_e(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]}var Bdt=(t,e)=>BigInt(t>>>0)<<$K|BigInt(e>>>0),Ddt=(t,e,r)=>t>>>r,Cdt=(t,e,r)=>t<<32-r|e>>>r,Ndt=(t,e,r)=>t>>>r|e<<32-r,jdt=(t,e,r)=>t<<32-r|e>>>r,qdt=(t,e,r)=>t<<64-r|e>>>r-32,$dt=(t,e,r)=>t>>>r-32|e<<64-r,Ldt=(t,e)=>e,Udt=(t,e)=>t,Fdt=(t,e,r)=>t<<r|e>>>32-r,zdt=(t,e,r)=>e<<r|t>>>32-r,Kdt=(t,e,r)=>e<<r-32|t>>>64-r,Wdt=(t,e,r)=>t<<r-32|e>>>64-r;function Gdt(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}var Vdt=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Hdt=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Zdt=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Jdt=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,Ydt=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Qdt=(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0;var Xdt={fromBig:B_e,split:Odt,toBig:Bdt,shrSH:Ddt,shrSL:Cdt,rotrSH:Ndt,rotrSL:jdt,rotrBH:qdt,rotrBL:$dt,rotr32H:Ldt,rotr32L:Udt,rotlSH:Fdt,rotlSL:zdt,rotlBH:Kdt,rotlBL:Wdt,add:Gdt,add3L:Vdt,add3H:Hdt,add4L:Zdt,add4H:Jdt,add5H:Qdt,add5L:Ydt},cr=Xdt;var[eht,tht]=(()=>cr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),vm=new Uint32Array(80),wm=new Uint32Array(80),LK=class extends D2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:u,Eh:m,El:p,Fh:b,Fl:A,Gh:M,Gl:S,Hh:P,Hl:k}=this;return[e,r,n,i,o,s,a,u,m,p,b,A,M,S,P,k]}set(e,r,n,i,o,s,a,u,m,p,b,A,M,S,P,k){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=u|0,this.Eh=m|0,this.El=p|0,this.Fh=b|0,this.Fl=A|0,this.Gh=M|0,this.Gl=S|0,this.Hh=P|0,this.Hl=k|0}process(e,r){for(let I=0;I<16;I++,r+=4)vm[I]=e.getUint32(r),wm[I]=e.getUint32(r+=4);for(let I=16;I<80;I++){let q=vm[I-15]|0,$=wm[I-15]|0,U=cr.rotrSH(q,$,1)^cr.rotrSH(q,$,8)^cr.shrSH(q,$,7),F=cr.rotrSL(q,$,1)^cr.rotrSL(q,$,8)^cr.shrSL(q,$,7),L=vm[I-2]|0,W=wm[I-2]|0,E=cr.rotrSH(L,W,19)^cr.rotrBH(L,W,61)^cr.shrSH(L,W,6),c=cr.rotrSL(L,W,19)^cr.rotrBL(L,W,61)^cr.shrSL(L,W,6),l=cr.add4L(F,c,wm[I-7],wm[I-16]),y=cr.add4H(l,U,E,vm[I-7],vm[I-16]);vm[I]=y|0,wm[I]=l|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:u,Dh:m,Dl:p,Eh:b,El:A,Fh:M,Fl:S,Gh:P,Gl:k,Hh:R,Hl:B}=this;for(let I=0;I<80;I++){let q=cr.rotrSH(b,A,14)^cr.rotrSH(b,A,18)^cr.rotrBH(b,A,41),$=cr.rotrSL(b,A,14)^cr.rotrSL(b,A,18)^cr.rotrBL(b,A,41),U=b&M^~b&P,F=A&S^~A&k,L=cr.add5L(B,$,F,tht[I],wm[I]),W=cr.add5H(L,R,q,U,eht[I],vm[I]),E=L|0,c=cr.rotrSH(n,i,28)^cr.rotrBH(n,i,34)^cr.rotrBH(n,i,39),l=cr.rotrSL(n,i,28)^cr.rotrBL(n,i,34)^cr.rotrBL(n,i,39),y=n&o^n&a^o&a,d=i&s^i&u^s&u;R=P|0,B=k|0,P=M|0,k=S|0,M=b|0,S=A|0,{h:b,l:A}=cr.add(m|0,p|0,W|0,E|0),m=a|0,p=u|0,a=o|0,u=s|0,o=n|0,s=i|0;let h=cr.add3L(E,l,d);n=cr.add3H(h,W,c,y),i=h|0}({h:n,l:i}=cr.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=cr.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:u}=cr.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:m,l:p}=cr.add(this.Dh|0,this.Dl|0,m|0,p|0),{h:b,l:A}=cr.add(this.Eh|0,this.El|0,b|0,A|0),{h:M,l:S}=cr.add(this.Fh|0,this.Fl|0,M|0,S|0),{h:P,l:k}=cr.add(this.Gh|0,this.Gl|0,P|0,k|0),{h:R,l:B}=cr.add(this.Hh|0,this.Hl|0,R|0,B|0),this.set(n,i,o,s,a,u,m,p,b,A,M,S,P,k,R,B)}roundClean(){vm.fill(0),wm.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var UK=BR(()=>new LK);_();var Gu=BigInt(0),Lc=BigInt(1),FR=BigInt(2),rht=BigInt(8),nht={zip215:!0};function iht(t){let e=J3(t);return qf(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function zR(t){let e=iht(t),{Fp:r,n,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:u}=e,m=FR<<BigInt(a*8)-Lc,p=r.create,b=e.uvRatio||((g,f)=>{try{return{isValid:!0,value:r.sqrt(g*r.inv(f))}}catch{return{isValid:!1,value:Gu}}}),A=e.adjustScalarBytes||(g=>g),M=e.domain||((g,f,w)=>{if(f.length||w)throw new Error("Contexts/pre-hash are not supported");return g}),S=g=>typeof g=="bigint"&&Gu<g,P=(g,f)=>S(g)&&S(f)&&g<f,k=g=>g===Gu||P(g,m);function R(g,f){if(P(g,f))return g;throw new Error(`Expected valid scalar < ${f}, got ${typeof g} ${g}`)}function B(g){return g===Gu?g:R(g,n)}let I=new Map;function q(g){if(!(g instanceof $))throw new Error("ExtendedPoint expected")}class ${constructor(f,w,D,T){if(this.ex=f,this.ey=w,this.ez=D,this.et=T,!k(f))throw new Error("x required");if(!k(w))throw new Error("y required");if(!k(D))throw new Error("z required");if(!k(T))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(f){if(f instanceof $)throw new Error("extended point not allowed");let{x:w,y:D}=f||{};if(!k(w)||!k(D))throw new Error("invalid affine point");return new $(w,D,Lc,p(w*D))}static normalizeZ(f){let w=r.invertBatch(f.map(D=>D.ez));return f.map((D,T)=>D.toAffine(w[T])).map($.fromAffine)}_setWindowSize(f){this._WINDOW_SIZE=f,I.delete(this)}assertValidity(){let{a:f,d:w}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:D,ey:T,ez:C,et:z}=this,G=p(D*D),V=p(T*T),Z=p(C*C),J=p(Z*Z),X=p(G*f),se=p(Z*p(X+V)),Q=p(J+p(w*p(G*V)));if(se!==Q)throw new Error("bad point: equation left != right (1)");let te=p(D*T),de=p(C*z);if(te!==de)throw new Error("bad point: equation left != right (2)")}equals(f){q(f);let{ex:w,ey:D,ez:T}=this,{ex:C,ey:z,ez:G}=f,V=p(w*G),Z=p(C*T),J=p(D*G),X=p(z*T);return V===Z&&J===X}is0(){return this.equals($.ZERO)}negate(){return new $(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){let{a:f}=e,{ex:w,ey:D,ez:T}=this,C=p(w*w),z=p(D*D),G=p(FR*p(T*T)),V=p(f*C),Z=w+D,J=p(p(Z*Z)-C-z),X=V+z,se=X-G,Q=V-z,te=p(J*se),de=p(X*Q),ie=p(J*Q),ae=p(se*X);return new $(te,de,ae,ie)}add(f){q(f);let{a:w,d:D}=e,{ex:T,ey:C,ez:z,et:G}=this,{ex:V,ey:Z,ez:J,et:X}=f;if(w===BigInt(-1)){let it=p((C-T)*(Z+V)),we=p((C+T)*(Z-V)),Ae=p(we-it);if(Ae===Gu)return this.double();let er=p(z*FR*X),me=p(G*FR*J),he=me+er,mt=we+it,ye=me-er,le=p(he*Ae),kt=p(mt*ye),_e=p(he*ye),Ee=p(Ae*mt);return new $(le,kt,Ee,_e)}let se=p(T*V),Q=p(C*Z),te=p(G*D*X),de=p(z*J),ie=p((T+C)*(V+Z)-se-Q),ae=de-te,fe=de+te,oe=p(Q-w*se),ce=p(ie*ae),Ke=p(fe*oe),pe=p(ie*oe),Me=p(ae*fe);return new $(ce,Ke,Me,pe)}subtract(f){return this.add(f.negate())}wNAF(f){return L.wNAFCached(this,I,f,$.normalizeZ)}multiply(f){let{p:w,f:D}=this.wNAF(R(f,n));return $.normalizeZ([w,D])[0]}multiplyUnsafe(f){let w=B(f);return w===Gu?F:this.equals(F)||w===Lc?this:this.equals(U)?this.wNAF(w).p:L.unsafeLadder(this,w)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return L.unsafeLadder(this,n).is0()}toAffine(f){let{ex:w,ey:D,ez:T}=this,C=this.is0();f==null&&(f=C?rht:r.inv(T));let z=p(w*f),G=p(D*f),V=p(T*f);if(C)return{x:Gu,y:Lc};if(V!==Lc)throw new Error("invZ was invalid");return{x:z,y:G}}clearCofactor(){let{h:f}=e;return f===Lc?this:this.multiplyUnsafe(f)}static fromHex(f,w=!1){let{d:D,a:T}=e,C=r.BYTES;f=Hn("pointHex",f,C);let z=f.slice(),G=f[C-1];z[C-1]=G&-129;let V=Wu(z);V===Gu||(w?R(V,m):R(V,r.ORDER));let Z=p(V*V),J=p(Z-Lc),X=p(D*Z-T),{isValid:se,value:Q}=b(J,X);if(!se)throw new Error("Point.fromHex: invalid y coordinate");let te=(Q&Lc)===Lc,de=(G&128)!==0;if(!w&&Q===Gu&&de)throw new Error("Point.fromHex: x=0 and x_0=1");return de!==te&&(Q=p(-Q)),$.fromAffine({x:Q,y:V})}static fromPrivateKey(f){return c(f).point}toRawBytes(){let{x:f,y:w}=this.toAffine(),D=cp(w,r.BYTES);return D[D.length-1]|=f&Lc?128:0,D}toHex(){return sp(this.toRawBytes())}}$.BASE=new $(e.Gx,e.Gy,Lc,p(e.Gx*e.Gy)),$.ZERO=new $(Gu,Lc,Lc,Gu);let{BASE:U,ZERO:F}=$,L=qR($,a*8);function W(g){return an(g,n)}function E(g){return W(Wu(g))}function c(g){let f=a;g=Hn("private key",g,f);let w=Hn("hashed private key",o(g),2*f),D=A(w.slice(0,f)),T=w.slice(f,2*f),C=E(D),z=U.multiply(C),G=z.toRawBytes();return{head:D,prefix:T,scalar:C,point:z,pointBytes:G}}function l(g){return c(g).pointBytes}function y(g=new Uint8Array,...f){let w=fp(...f);return E(o(M(w,Hn("context",g),!!i)))}function d(g,f,w={}){g=Hn("message",g),i&&(g=i(g));let{prefix:D,scalar:T,pointBytes:C}=c(f),z=y(w.context,D,g),G=U.multiply(z).toRawBytes(),V=y(w.context,G,C,g),Z=W(z+V*T);B(Z);let J=fp(G,cp(Z,r.BYTES));return Hn("result",J,a*2)}let h=nht;function v(g,f,w,D=h){let{context:T,zip215:C}=D,z=r.BYTES;g=Hn("signature",g,2*z),f=Hn("message",f),i&&(f=i(f));let G=Wu(g.slice(z,2*z)),V,Z,J;try{V=$.fromHex(w,C),Z=$.fromHex(g.slice(0,z),C),J=U.multiplyUnsafe(G)}catch{return!1}if(!C&&V.isSmallOrder())return!1;let X=y(T,Z.toRawBytes(),V.toRawBytes(),f);return Z.add(V.multiplyUnsafe(X)).subtract(J).clearCofactor().equals($.ZERO)}return U._setWindowSize(8),{CURVE:e,getPublicKey:l,sign:d,verify:v,ExtendedPoint:$,utils:{getExtendedPublicKey:c,randomPrivateKey:()=>s(r.BYTES),precompute(g=8,f=$.BASE){return f._setWindowSize(g),f.multiply(BigInt(3)),f}}}}_();var X3=BigInt(0),FK=BigInt(1);function oht(t){return qf(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function D_e(t){let e=oht(t),{P:r}=e,n=I=>an(I,r),i=e.montgomeryBits,o=Math.ceil(i/8),s=e.nByteLength,a=e.adjustScalarBytes||(I=>I),u=e.powPminus2||(I=>IK(I,r-BigInt(2),r));function m(I,q,$){let U=n(I*(q-$));return q=n(q-U),$=n($+U),[q,$]}function p(I){if(typeof I=="bigint"&&X3<=I&&I<r)return I;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}let b=(e.a-BigInt(2))/BigInt(4);function A(I,q){let $=p(I),U=p(q),F=$,L=FK,W=X3,E=$,c=FK,l=X3,y;for(let h=BigInt(i-1);h>=X3;h--){let v=U>>h&FK;l^=v,y=m(l,L,E),L=y[0],E=y[1],y=m(l,W,c),W=y[0],c=y[1],l=v;let x=L+W,g=n(x*x),f=L-W,w=n(f*f),D=g-w,T=E+c,C=E-c,z=n(C*x),G=n(T*f),V=z+G,Z=z-G;E=n(V*V),c=n(F*n(Z*Z)),L=n(g*w),W=n(D*(g+n(b*D)))}y=m(l,L,E),L=y[0],E=y[1],y=m(l,W,c),W=y[0],c=y[1];let d=u(W);return n(L*d)}function M(I){return cp(n(I),o)}function S(I){let q=Hn("u coordinate",I,o);return s===32&&(q[31]&=127),Wu(q)}function P(I){let q=Hn("scalar",I),$=q.length;if($!==o&&$!==s)throw new Error(`Expected ${o} or ${s} bytes, got ${$}`);return Wu(a(q))}function k(I,q){let $=S(q),U=P(I),F=A($,U);if(F===X3)throw new Error("Invalid private or public key received");return M(F)}let R=M(e.Gu);function B(I){return k(I,R)}return{scalarMult:k,scalarMultBase:B,getSharedSecret:(I,q)=>k(I,q),getPublicKey:I=>B(I),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:R}}var e6=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),C_e=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),TQt=BigInt(0),sht=BigInt(1),zK=BigInt(2),aht=BigInt(5),N_e=BigInt(10),cht=BigInt(20),fht=BigInt(40),j_e=BigInt(80);function q_e(t){let e=e6,n=t*t%e*t%e,i=Zn(n,zK,e)*n%e,o=Zn(i,sht,e)*t%e,s=Zn(o,aht,e)*o%e,a=Zn(s,N_e,e)*s%e,u=Zn(a,cht,e)*a%e,m=Zn(u,fht,e)*u%e,p=Zn(m,j_e,e)*m%e,b=Zn(p,j_e,e)*m%e,A=Zn(b,N_e,e)*s%e;return{pow_p_5_8:Zn(A,zK,e)*t%e,b2:n}}function $_e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function uht(t,e){let r=e6,n=an(e*e*e,r),i=an(n*n*e,r),o=q_e(t*i).pow_p_5_8,s=an(t*n*o,r),a=an(e*s*s,r),u=s,m=an(s*C_e,r),p=a===t,b=a===an(-t,r),A=a===an(-t*C_e,r);return p&&(s=u),(b||A)&&(s=m),__e(s,r)&&(s=an(-s,r)),{isValid:p||b,value:s}}var Lf=C2(e6,void 0,!0),t6={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Lf,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:UK,randomBytes:H3,adjustScalarBytes:$_e,uvRatio:uht},_m=zR(t6);function L_e(t,e,r){if(e.length>255)throw new Error("Context is too big");return OR(SK("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}var RQt=zR({...t6,domain:L_e}),IQt=zR({...t6,domain:L_e,prehash:UK}),Tb=(()=>D_e({P:e6,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{let e=e6,{pow_p_5_8:r,b2:n}=q_e(t);return an(Zn(r,BigInt(3),e)*n,e)},adjustScalarBytes:$_e,randomBytes:H3}))();function U_e(t){let{y:e}=_m.ExtendedPoint.fromHex(t),r=BigInt(1);return Lf.toBytes(Lf.create((r+e)*Lf.inv(r-e)))}function F_e(t){let e=t6.hash(t.subarray(0,32));return t6.adjustScalarBytes(e).subarray(0,32)}var lht=(Lf.ORDER+BigInt(3))/BigInt(8),kQt=Lf.pow(zK,lht),OQt=Lf.sqrt(Lf.neg(Lf.ONE)),BQt=(Lf.ORDER-BigInt(5))/BigInt(8),DQt=BigInt(486662);var CQt=x_e(Lf,Lf.neg(BigInt(486664)));var NQt=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),jQt=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),qQt=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),$Qt=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var LQt=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Uf=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},dht=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Cn=class{static bytesToPrivateKey(e){return Uf(this,arguments,void 0,function*({privateKeyBytes:r}){let n=_m.getPublicKey(r),i={crv:"Ed25519",d:at.uint8Array(r).toBase64Url(),kty:"OKP",x:at.uint8Array(n).toBase64Url()};return i.kid=yield nr({jwk:i}),i})}static bytesToPublicKey(e){return Uf(this,arguments,void 0,function*({publicKeyBytes:r}){let n={kty:"OKP",crv:"Ed25519",x:at.uint8Array(r).toBase64Url()};return n.kid=yield nr({jwk:n}),n})}static computePublicKey(e){return Uf(this,arguments,void 0,function*({key:r}){let n=yield Cn.privateKeyToBytes({privateKey:r}),i=_m.getPublicKey(n),o={kty:"OKP",crv:"Ed25519",x:at.uint8Array(i).toBase64Url()};return o.kid=yield nr({jwk:o}),o})}static convertPrivateKeyToX25519(e){return Uf(this,arguments,void 0,function*({privateKey:r}){let n=yield Cn.privateKeyToBytes({privateKey:r}),i=F_e(n),o=Tb.getPublicKey(i),s={kty:"OKP",crv:"X25519",d:at.uint8Array(i).toBase64Url(),x:at.uint8Array(o).toBase64Url()};return s.kid=yield nr({jwk:s}),s})}static convertPublicKeyToX25519(e){return Uf(this,arguments,void 0,function*({publicKey:r}){let n=yield Cn.publicKeyToBytes({publicKey:r});if(!(yield Cn.validatePublicKey({publicKeyBytes:n})))throw new Error("Ed25519: Invalid public key.");let o=U_e(n),s={kty:"OKP",crv:"X25519",x:at.uint8Array(o).toBase64Url()};return s.kid=yield nr({jwk:s}),s})}static generateKey(){return Uf(this,void 0,void 0,function*(){let e=_m.utils.randomPrivateKey(),r=yield Cn.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield nr({jwk:r}),r})}static getPublicKey(e){return Uf(this,arguments,void 0,function*({key:r}){var n;if(!(Sd(r)&&r.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let{d:i}=r,o=dht(r,["d"]);return(n=o.kid)!==null&&n!==void 0||(o.kid=yield nr({jwk:o})),o})}static privateKeyToBytes(e){return Uf(this,arguments,void 0,function*({privateKey:r}){if(!Sd(r))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return at.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return Uf(this,arguments,void 0,function*({publicKey:r}){if(!j2(r))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return at.base64Url(r.x).toUint8Array()})}static sign(e){return Uf(this,arguments,void 0,function*({key:r,data:n}){let i=yield Cn.privateKeyToBytes({privateKey:r});return _m.sign(n,i)})}static validatePublicKey(e){return Uf(this,arguments,void 0,function*({publicKeyBytes:r}){try{_m.ExtendedPoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return Uf(this,arguments,void 0,function*({key:r,signature:n,data:i}){let o=yield Cn.publicKeyToBytes({publicKey:r});return _m.verify(n,i,o)})}};var r6=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},KR=class extends xd{computePublicKey(e){return r6(this,arguments,void 0,function*({key:r}){if(!Sd(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{let n=yield Cn.computePublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(e){return r6(this,arguments,void 0,function*({algorithm:r}){switch(r){case"Ed25519":{let n=yield Cn.generateKey();return n.alg="EdDSA",n}}})}getPublicKey(e){return r6(this,arguments,void 0,function*({key:r}){if(!Sd(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{let n=yield Cn.getPublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(e){return r6(this,arguments,void 0,function*({key:r,data:n}){if(!Sd(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":return yield Cn.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(e){return r6(this,arguments,void 0,function*({key:r,signature:n,data:i}){if(!j2(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(r.crv){case"Ed25519":return yield Cn.verify({key:r,signature:n,data:i});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}};var lp=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},KK={Ed25519:{implementation:KR,names:["Ed25519"]},secp256k1:{implementation:Q3,names:["ES256K","secp256k1"]},secp256r1:{implementation:Q3,names:["ES256","secp256r1"]},"SHA-256":{implementation:RR,names:["SHA-256"]}},ca=class{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e?.keyStore)!==null&&r!==void 0?r:new QT}digest(e){return lp(this,arguments,void 0,function*({algorithm:r,data:n}){return yield this.getAlgorithm({algorithm:r}).digest({algorithm:r,data:n})})}exportKey(e){return lp(this,arguments,void 0,function*({keyUri:r}){return yield this.getPrivateKey({keyUri:r})})}generateKey(e){return lp(this,arguments,void 0,function*({algorithm:r}){let i=yield this.getAlgorithm({algorithm:r}).generateKey({algorithm:r});if(i?.kid===void 0)throw new Error("Generated key is missing a required property: kid");let o=`${qK}${i.kid}`;return yield this._keyStore.set(o,i),o})}getKeyUri(e){return lp(this,arguments,void 0,function*({key:r}){let n=yield nr({jwk:r});return`${qK}${n}`})}getPublicKey(e){return lp(this,arguments,void 0,function*({keyUri:r}){let n=yield this.getPrivateKey({keyUri:r}),i=this.getAlgorithmName({key:n});return yield this.getAlgorithm({algorithm:i}).getPublicKey({key:n})})}importKey(e){return lp(this,arguments,void 0,function*({key:r}){var n;if(!k_e(r))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");let i=structuredClone(r);(n=i.kid)!==null&&n!==void 0||(i.kid=yield nr({jwk:i}));let o=yield this.getKeyUri({key:i});return yield this._keyStore.set(o,i),o})}sign(e){return lp(this,arguments,void 0,function*({keyUri:r,data:n}){let i=yield this.getPrivateKey({keyUri:r}),o=this.getAlgorithmName({key:i});return this.getAlgorithm({algorithm:o}).sign({data:n,key:i})})}verify(e){return lp(this,arguments,void 0,function*({key:r,signature:n,data:i}){let o=this.getAlgorithmName({key:r});return this.getAlgorithm({algorithm:o}).verify({key:r,signature:n,data:i})})}getAlgorithm({algorithm:e}){var r;let n=(r=KK[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){let r=e.alg,n=e.crv;for(let i in KK){let o=KK[i];if(r&&o.names.includes(r))return i;if(n&&o.names.includes(n))return i}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey(e){return lp(this,arguments,void 0,function*({keyUri:r}){let n=yield this._keyStore.get(r);if(!n)throw new Error(`Key not found: ${r}`);return n})}};var n6={};zt(n6,{CryptoUtils:()=>hht,checkRequiredProperty:()=>z_e,checkValidProperty:()=>K_e,getJoseSignatureAlgorithmFromPublicKey:()=>W_e,isWebCryptoSupported:()=>G_e,randomBytes:()=>WR,randomPin:()=>H_e,randomUuid:()=>V_e});_();function z_e(t){if(!t||t.property===void 0||t.inObject===void 0)throw new TypeError("One or more required parameters missing: 'property, properties'");let{property:e,inObject:r}=t;if(!(e in r))throw new TypeError(`Required parameter missing: '${e}'`)}function K_e(t){if(!t||t.property===void 0||t.allowedProperties===void 0)throw new TypeError("One or more required parameters missing: 'property, allowedProperties'");let{property:e,allowedProperties:r}=t;if(Array.isArray(r)&&!r.includes(e)||r instanceof Set&&!r.has(e)||r instanceof Map&&!r.has(e)){let n=Array.from(r instanceof Map?r.keys():r).join(", ");throw new TypeError(`Out of range: '${e}'. Must be one of '${n}'`)}}function W_e(t){let e={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(t.alg&&Object.values(e).includes(t.alg))return t.alg;if(t.crv&&Object.keys(e).includes(t.crv))return e[t.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${t.alg}, crv=${t.crv}. Supported 'alg' values: ${Object.values(e).join(", ")}. Supported 'crv' values: ${Object.keys(e).join(", ")}.`)}function G_e(){return!!(globalThis.crypto&&globalThis.crypto.subtle)}function WR(t){return c_e(t)}function V_e(){return I2.randomUUID()}function H_e({length:t}){if(3>t||t>10)throw new Error("randomPin() can securely generate a PIN between 3 to 10 digits.");let e=Math.pow(10,t)-1,r;if(t<=6){let n=Math.pow(10,t);do{let i=WR(Math.ceil(t/2));r=new DataView(i.buffer).getUint16(0,!1)%n}while(r>e)}else{let n=Math.pow(10,10);do{let i=WR(4);r=new DataView(i.buffer).getUint32(0,!1)%n}while(r>e)}return r.toString().padStart(t,"0")}var hht={randomPin:H_e,randomUuid:V_e,randomBytes:WR,isWebCryptoSupported:G_e,getJoseSignatureAlgorithmFromPublicKey:W_e,checkValidProperty:K_e,checkRequiredProperty:z_e};_();_();_();_();_();_();_();_();_();_();var xm=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},pht=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Vu=class{static bytesToPrivateKey(e){return xm(this,arguments,void 0,function*({privateKeyBytes:r}){let n=Tb.getPublicKey(r),i={kty:"OKP",crv:"X25519",d:at.uint8Array(r).toBase64Url(),x:at.uint8Array(n).toBase64Url()};return i.kid=yield nr({jwk:i}),i})}static bytesToPublicKey(e){return xm(this,arguments,void 0,function*({publicKeyBytes:r}){let n={kty:"OKP",crv:"X25519",x:at.uint8Array(r).toBase64Url()};return n.kid=yield nr({jwk:n}),n})}static computePublicKey(e){return xm(this,arguments,void 0,function*({key:r}){let n=yield Vu.privateKeyToBytes({privateKey:r}),i=Tb.getPublicKey(n),o={kty:"OKP",crv:"X25519",x:at.uint8Array(i).toBase64Url()};return o.kid=yield nr({jwk:o}),o})}static generateKey(){return xm(this,void 0,void 0,function*(){let e=Tb.utils.randomPrivateKey(),r=yield Vu.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield nr({jwk:r}),r})}static getPublicKey(e){return xm(this,arguments,void 0,function*({key:r}){var n;if(!(Sd(r)&&r.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let{d:i}=r,o=pht(r,["d"]);return(n=o.kid)!==null&&n!==void 0||(o.kid=yield nr({jwk:o})),o})}static privateKeyToBytes(e){return xm(this,arguments,void 0,function*({privateKey:r}){if(!Sd(r))throw new Error("X25519: The provided key is not a valid OKP private key.");return at.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return xm(this,arguments,void 0,function*({publicKey:r}){if(!j2(r))throw new Error("X25519: The provided key is not a valid OKP public key.");return at.base64Url(r.x).toUint8Array()})}static sharedSecret(e){return xm(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let i=yield Vu.privateKeyToBytes({privateKey:r}),o=yield Vu.publicKeyToBytes({publicKey:n});return Tb.getSharedSecret(i,o)})}};_();_();var tG={};zt(tG,{extractDidFragment:()=>ac,getServices:()=>tgt,getVerificationMethodByKey:()=>rgt,getVerificationMethodTypes:()=>XW,getVerificationMethods:()=>m6,getVerificationRelationshipsById:()=>eG,isDidService:()=>ASe,isDidVerificationMethod:()=>wI,isDwnDidService:()=>ngt,keyBytesToMultibaseId:()=>_I,multibaseIdToKeyBytes:()=>xI});_();_();_();var mht=Zt(lF(),1);_();_();function Z_e(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function J_e(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function i6(t){let r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,i]=r;return i}var o6=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},Y_e=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(m){o({value:m,done:a})},s)}},GR=new TextEncoder,Rb=new TextDecoder,Hr=class{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new Hr(e,"ArrayBuffer")}static asyncIterable(e){if(!J_e(e))throw new TypeError("Input must be of type AsyncIterable.");return new Hr(e,"AsyncIterable")}static base32Z(e){return new Hr(e,"Base32Z")}static base58Btc(e){return new Hr(e,"Base58Btc")}static base64Url(e){return new Hr(e,"Base64Url")}static bufferSource(e){return new Hr(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new Hr(e,"Hex")}static multibase(e){return new Hr(e,"Multibase")}static object(e){return new Hr(e,"Object")}static string(e){return new Hr(e,"String")}static uint8Array(e){return new Hr(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return za.baseDecode(this.data).buffer;case"Base64Url":return da.baseDecode(this.data).buffer;case"BufferSource":{if(i6(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return Z_e(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return o6(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return s9.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return za.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return za.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return da.baseEncode(e)}case"BufferSource":{let e=this.toUint8Array();return da.baseEncode(e)}case"Object":{let e=JSON.stringify(this.data),r=GR.encode(e);return da.baseEncode(r)}case"String":{let e=GR.encode(this.data);return da.baseEncode(e)}case"Uint8Array":return da.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var e,r,n,i;return o6(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u=[];try{for(var o=!0,s=Y_e(this.data),a;a=yield s.next(),e=a.done,!e;o=!0){i=a.value,o=!1;let p=i;u.push(p)}}catch(p){r={error:p}}finally{try{!o&&!e&&(n=s.return)&&(yield n.call(s))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){let e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{let r=this.toUint8Array();return Hr.uint8Array(r).toHex()}case"Base64Url":{let r=this.toUint8Array();return Hr.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{let e=da.baseDecode(this.data),r=Rb.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{let e=Rb.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return o6(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return Rb.decode(this.data);case"Base64Url":{let e=da.baseDecode(this.data);return Rb.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return Rb.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var e,r,n,i;return o6(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u="";try{for(var o=!0,s=Y_e(this.data),a;a=yield s.next(),e=a.done,!e;o=!0){i=a.value,o=!1;let m=i;typeof m=="string"?u+=m:u+=Rb.decode(m,{stream:!0})}}catch(m){r={error:m}}finally{try{!o&&!e&&(n=s.return)&&(yield n.call(s))}finally{if(r)throw r.error}}return u+=Rb.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return s9.baseDecode(this.data);case"Base58Btc":return za.baseDecode(this.data);case"Base64Url":return da.baseDecode(this.data);case"BufferSource":{let e=i6(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{let e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){let n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{let e=JSON.stringify(this.data);return GR.encode(e)}case"String":return GR.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return o6(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};_();var oi=class{static addPrefix(e){var r;let{code:n,data:i,name:o}=e;if(!(o?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=oi.codeToName.has(n)?n:oi.nameToCode.get(o),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);let s=Kd.encodingLength(n),a=new Uint8Array(s+i.byteLength);return a.set(i,s),Kd.encodeTo(n,a),a}static getCodeFromData(e){let{prefixedData:r}=e,[n,i]=Kd.decode(r);return n}static getCodeFromName(e){let{name:r}=e,n=oi.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){let{code:r}=e,n=oi.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){oi.codeToName.set(e.code,e.name),oi.nameToCode.set(e.name,e.code)}static removePrefix(e){let{prefixedData:r}=e,[n,i]=Kd.decode(r),o=oi.codeToName.get(n);if(o===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(i),name:o}}};oi.codeToName=new Map;oi.nameToCode=new Map;oi.registerCodec({code:237,name:"ed25519-pub"});oi.registerCodec({code:4864,name:"ed25519-priv"});oi.registerCodec({code:236,name:"x25519-pub"});oi.registerCodec({code:4866,name:"x25519-priv"});oi.registerCodec({code:231,name:"secp256k1-pub"});oi.registerCodec({code:4865,name:"secp256k1-priv"});_();_();var yht=Zt(GK(),1);_();_();var Qyt=Zt(QW(),1);var Xyt=Zt(QW(),1);var egt=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})};function ac(t){if(typeof t=="string"&&t.length!==0)return t.split("#").pop()}function tgt({didDocument:t,id:e,type:r}){var n,i;return(i=(n=t?.service)===null||n===void 0?void 0:n.filter(o=>!(e&&o.id!==e||r&&o.type!==r)))!==null&&i!==void 0?i:[]}function rgt(t){return egt(this,arguments,void 0,function*({didDocument:e,publicKeyJwk:r,publicKeyMultibase:n}){let i=m6({didDocument:e});for(let o of i)if(r&&o.publicKeyJwk){if((yield nr({jwk:r}))===(yield nr({jwk:o.publicKeyJwk})))return o}else if(n&&o.publicKeyMultibase&&n===o.publicKeyMultibase)return o;return null})}function m6({didDocument:t}){var e,r;if(!t)throw new TypeError("Required parameter missing: 'didDocument'");let n=[];return n.push(...(r=(e=t.verificationMethod)===null||e===void 0?void 0:e.filter(wI))!==null&&r!==void 0?r:[]),Object.keys(Jg).forEach(i=>{var o,s;n.push(...(s=(o=t[i])===null||o===void 0?void 0:o.filter(wI))!==null&&s!==void 0?s:[])}),n}function XW({didDocument:t}){let r=m6({didDocument:t}).map(n=>n.type);return[...new Set(r)]}function eG({didDocument:t,methodId:e}){let r=[];return Object.keys(Jg).forEach(n=>{if(Array.isArray(t[n])){let i=t[n],o=ac(e);i.some(a=>{let u=ac(a)===o,m=wI(a)&&ac(a.id)===o;return u||m})&&r.push(n)}}),r}function ASe(t){return!t||typeof t!="object"||t===null?!1:"id"in t&&"type"in t&&"serviceEndpoint"in t}function ngt(t){if(!ASe(t)||t.type!=="DecentralizedWebNode"||!("enc"in t&&"sig"in t))return!1;let e=r=>typeof r=="string"||Array.isArray(r)&&r.every(n=>typeof n=="string");return e(t.enc)&&e(t.sig)}function wI(t){return!(!t||typeof t!="object"||t===null||!("id"in t&&"type"in t&&"controller"in t)||typeof t.id!="string"||typeof t.type!="string"||typeof t.controller!="string")}function _I({keyBytes:t,multicodecCode:e,multicodecName:r}){let n=oi.addPrefix({code:e,data:t,name:r}),i=Hr.uint8Array(n).toBase58Btc();return Hr.base58Btc(i).toMultibase()}function xI({multibaseKeyId:t}){try{let e=Hr.multibase(t).toBase58Btc(),r=Hr.base58Btc(e).toUint8Array(),{code:n,data:i,name:o}=oi.removePrefix({prefixedData:r});return{keyBytes:i,multicodecCode:n,multicodecName:o}}catch{throw new ft(ut.InvalidDid,`Invalid multibase identifier: ${t}`)}}var y6=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},fa=class{constructor({uri:e,document:r,metadata:n,keyManager:i}){this.uri=e,this.document=r,this.metadata=n,this.keyManager=i}export(){return y6(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let e={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){let r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);let i=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),o=yield this.keyManager.exportKey({keyUri:i});r.push(Object.assign({},o))}e.privateKeys=r}return e})}getSigner(e){return y6(this,void 0,void 0,function*(){var r;let n=(r=this.document.verificationMethod)===null||r===void 0?void 0:r.find(u=>{var m,p;return ac(u.id)===((m=ac(e?.methodId))!==null&&m!==void 0?m:ac((p=this.document.assertionMethod)===null||p===void 0?void 0:p[0]))});if(!(n&&n.publicKeyJwk))throw new ft(ut.InternalError,"A verification method intended for signing could not be determined from the DID Document");let i=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),o=yield this.keyManager.getPublicKey({keyUri:i}),s=this.keyManager;return{algorithm:n6.getJoseSignatureAlgorithmFromPublicKey(o),keyId:n.id,sign(u){return y6(this,arguments,void 0,function*({data:m}){return yield s.sign({data:m,keyUri:i})})},verify(u){return y6(this,arguments,void 0,function*({data:m,signature:p}){return yield s.verify({data:m,key:o,signature:p})})}}})}static import(e){return y6(this,arguments,void 0,function*({portableDid:r,keyManager:n=new ca}){var i;let o=m6({didDocument:r.document});if(o.length===0)throw new ft(ut.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let a of(i=r.privateKeys)!==null&&i!==void 0?i:[])yield n.importKey({key:a});for(let a of o){if(!a.publicKeyJwk)throw new Error(`Verification method '${a.id}' does not contain a public key in JWK format`);let u=yield n.getKeyUri({key:a.publicKeyJwk});yield n.getPublicKey({keyUri:u})}return new fa({uri:r.uri,document:r.document,metadata:r.metadata,keyManager:n})})}};_();_();_();_();_();var rG="0123456789abcdef",TSe=[],PSe=[];for(let t=0;t<256;t++)TSe[t]=rG[t>>4&15]+rG[t&15],t<16&&(t<10?PSe[48+t]=t:PSe[97-10+t]=t);var nG=t=>{let e=t.length,r="",n=0;for(;n<e;)r+=TSe[t[n++]];return r};var RSe=(t,e=0)=>{let r=t.length||0;if(!e){let s=r;for(;s--;)e+=t[s].length}let n=new Uint8Array(e),i=e,o=r;for(;o--;)i-=t[o].length,n.set(t[o],i);return n};_();var ISe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",igt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(g6=0;g6<ISe.length;g6++)igt[ISe.charCodeAt(g6)]=g6;var g6;var ogt=new TextDecoder,iG=(t,e)=>e?new TextDecoder(e).decode(t):ogt.decode(t),sgt=new TextEncoder,Kf=t=>sgt.encode(t);var kSe=typeof window<"u"?window:self,OSe=kSe.crypto||kSe.msCrypto||{},grr=OSe.subtle||OSe.webkitSubtle;_();function G2(t){let e=t<0?1:0;return t=Math.abs(Number(t||1)),Math.floor(Math.log10(t))+1+e}function EI(t){return ArrayBuffer.isView(t)?"arraybufferview":Array.isArray(t)?"array":t instanceof Number?"number":t instanceof Boolean?"boolean":t instanceof Set?"set":t instanceof Map?"map":t instanceof String?"string":t instanceof ArrayBuffer?"arraybuffer":typeof t}function cn(t,e,r){let n=[],i=null;return cn._encode(n,t),i=RSe(n),cn.bytes=i.length,ArrayBuffer.isView(e)?(e.set(i,r),e):i}cn.bytes=-1;cn._floatConversionDetected=!1;cn._encode=function(t,e){if(e!=null)switch(EI(e)){case"object":cn.dict(t,e);break;case"map":cn.dictMap(t,e);break;case"array":cn.list(t,e);break;case"set":cn.listSet(t,e);break;case"string":cn.string(t,e);break;case"number":cn.number(t,e);break;case"boolean":cn.number(t,e);break;case"arraybufferview":cn.buffer(t,new Uint8Array(e.buffer,e.byteOffset,e.byteLength));break;case"arraybuffer":cn.buffer(t,new Uint8Array(e));break}};var SI=new Uint8Array([101]),BSe=new Uint8Array([100]),DSe=new Uint8Array([108]);cn.buffer=function(t,e){t.push(Kf(e.length+":"),e)};cn.string=function(t,e){t.push(Kf(Kf(e).byteLength+":"+e))};cn.number=function(t,e){if(Number.isInteger(e))return t.push(Kf("i"+BigInt(e)+"e"));let r=2147483648,n=e/r<<0,i=e%r<<0,o=n*r+i;t.push(Kf("i"+o+"e")),o!==e&&!cn._floatConversionDetected&&(cn._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+e+'":','Bencoding only defines support for integers, value was converted to "'+o+'"'),console.trace())};cn.dict=function(t,e){t.push(BSe);let r=0,n,i=Object.keys(e).sort(),o=i.length;for(;r<o;r++)n=i[r],e[n]!=null&&(cn.string(t,n),cn._encode(t,e[n]));t.push(SI)};cn.dictMap=function(t,e){t.push(BSe);let r=Array.from(e.keys()).sort();for(let n of r)e.get(n)!=null&&(ArrayBuffer.isView(n)?cn._encode(t,n):cn.string(t,String(n)),cn._encode(t,e.get(n)));t.push(SI)};cn.list=function(t,e){let r=0,n=e.length;for(t.push(DSe);r<n;r++)e[r]!=null&&cn._encode(t,e[r]);t.push(SI)};cn.listSet=function(t,e){t.push(DSe);for(let r of e)r!=null&&cn._encode(t,r);t.push(SI)};var CSe=cn;_();var agt=105,cgt=58,fgt=100,ugt=108,oG=101;function NSe(t,e,r){let n=0,i=1;for(let o=e;o<r;o++){let s=t[o];if(s<58&&s>=48){n=n*10+(s-48);continue}if(!(o===e&&s===43)){if(o===e&&s===45){i=-1;continue}if(s===46)break;throw new Error("not a number: buffer["+o+"] = "+s)}}return n*i}function $t(t,e,r,n){return t==null||t.length===0?null:(typeof e!="number"&&n==null&&(n=e,e=void 0),typeof r!="number"&&n==null&&(n=r,r=void 0),$t.position=0,$t.encoding=n||null,$t.data=ArrayBuffer.isView(t)?new Uint8Array(t.slice(e,r)):Kf(t),$t.bytes=$t.data.length,$t.next())}$t.bytes=0;$t.position=0;$t.data=null;$t.encoding=null;$t.next=function(){switch($t.data[$t.position]){case fgt:return $t.dictionary();case ugt:return $t.list();case agt:return $t.integer();default:return $t.buffer()}};$t.find=function(t){let e=$t.position,r=$t.data.length,n=$t.data;for(;e<r;){if(n[e]===t)return e;e++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(t)+'" [0x'+t.toString(16)+"]")};$t.dictionary=function(){$t.position++;let t={};for(;$t.data[$t.position]!==oG;){let e=$t.buffer(),r=iG(e);r.includes("\uFFFD")&&(r=nG(e)),t[r]=$t.next()}return $t.position++,t};$t.list=function(){$t.position++;let t=[];for(;$t.data[$t.position]!==oG;)t.push($t.next());return $t.position++,t};$t.integer=function(){let t=$t.find(oG),e=NSe($t.data,$t.position+1,t);return $t.position+=t+1-$t.position,e};$t.buffer=function(){let t=$t.find(cgt),e=NSe($t.data,$t.position,t),r=++t+e;return $t.position=r,$t.encoding?iG($t.data.slice(t,r)):$t.data.slice(t,r)};var jSe=$t;_();function lgt(t){let e=2;for(let r of t)e+=MI(r);return e}function dgt(t){let e=2;for(let[r,n]of t){let i=Kf(r).byteLength;e+=G2(i)+1+i,e+=MI(n)}return e}function hgt(t){let e=2,r=Object.keys(t);for(let n=0;n<r.length;n++){let i=Kf(r[n]).byteLength;e+=G2(i)+1+i,e+=MI(t[r[n]])}return e}function pgt(t){let e=Kf(t).byteLength;return G2(e)+1+e}function mgt(t){let e=t.byteLength-t.byteOffset;return G2(e)+1+e}function MI(t){if(t==null)return 0;let r=EI(t);switch(r){case"arraybufferview":return mgt(t);case"string":return pgt(t);case"array":case"set":return lgt(t);case"number":return 1+G2(Math.floor(t))+1;case"bigint":return 1+t.toString().length+1;case"object":return hgt(t);case"map":return dgt(t);default:throw new TypeError(`Unsupported value of type "${r}"`)}}var sG=MI;var ygt=sG,aG={encode:CSe,decode:jSe,byteLength:sG,encodingLength:ygt};_();_();var ggt=/^(\d{1,3}\.){3,3}\d{1,3}$/;var bgt=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;var Ju={name:"v4",size:4,isFormat:t=>ggt.test(t),encode(t,e,r){r=~~r,e=e||new Uint8Array(r+4);let n=t.length,i=0;for(let o=0;o<n;){let s=t.charCodeAt(o++);s===46?(e[r++]=i,i=0):i=i*10+(s-48)}return e[r]=i,e},decode(t,e){return e=~~e,`${t[e++]}.${t[e++]}.${t[e++]}.${t[e]}`}},yp={name:"v6",size:16,isFormat:t=>t.length>0&&bgt.test(t),encode(t,e,r){r=~~r;let n=r+16,i=-1,o=0,s=0,a=!0,u=!1;e=e||new Uint8Array(r+16);for(let m=0;m<t.length;m++){let p=t.charCodeAt(m);p===58?(a?i!==-1?(r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2):r<n&&(i=r):(u===!0?(r<n&&(e[r]=s),r++):(r<n&&(e[r]=o>>8),r<n-1&&(e[r+1]=o&255),r+=2),o=0,s=0),a=!0,u=!1):p===46?(r<n&&(e[r]=s),r++,s=0,o=0,a=!1,u=!0):(a=!1,p>=97?p-=87:p>=65?p-=55:(p-=48,s=s*10+p),o=(o<<4)+p)}if(a===!1)u===!0?(r<n&&(e[r]=s),r++):(r<n&&(e[r]=o>>8),r<n-1&&(e[r+1]=o&255),r+=2);else if(i===0)r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2;else if(i!==-1){r+=2;for(let m=Math.min(r-1,n-1);m>=i+2;m--)e[m]=e[m-2];e[i]=0,e[i+1]=0,i=r}if(i!==r&&i!==-1)for(r>n-2&&(r=n-2);n>i;)e[--n]=r<n&&r>i?e[--r]:0;else for(;r<n;)e[r++]=0;return e},decode(t,e){e=~~e;let r="";for(let n=0;n<16;n+=2)n!==0&&(r+=":"),r+=(t[e+n]<<8|t[e+n+1]).toString(16);return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};function qSe(t){if(Ju.isFormat(t))return Ju.size;if(yp.isFormat(t))return yp.size;throw Error(`Invalid ip address: ${t}`)}function $Se(t){return qSe(t)===Ju.size?1:2}function LSe(t,e,r){r=~~r;let n=qSe(t);return typeof e=="function"&&(e=e(r+n)),n===Ju.size?Ju.encode(t,e,r):yp.encode(t,e,r)}function USe(t,e,r){if(e=~~e,r=r||t.length-e,r===Ju.size)return Ju.decode(t,e,r);if(r===yp.size)return yp.decode(t,e,r);throw Error(`Invalid buffer size needs to be ${Ju.size} for v4 or ${yp.size} for v6.`)}_();function b6(t){switch(t){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+t}function V2(t){switch(t.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return t.toUpperCase().startsWith("UNKNOWN_")?parseInt(t.slice(8)):0}_();function FSe(t){switch(t){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+t}_();function zSe(t){switch(t){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+t}_();function cG(t){switch(t){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+t}function fG(t){switch(t.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}_();function KSe(t){switch(t){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return t<0?null:`OPTION_${t}`}function uG(t){if(typeof t=="number")return t;if(!t)return-1;switch(t.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}let e=t.match(/_(\d+)$/);return e?parseInt(e[1],10):-1}_();_();function lG(t){let e=0,r=t.length;for(let n=0;n<r;n+=1){let i=t.charCodeAt(n);if(i<=127)e+=1;else if(i<=2047)e+=2;else if((i&63488)!==55296)e+=3;else{let o=n+1;o===r||i>=56320||(t.charCodeAt(o)&64512)!==56320?e+=3:(n=o,e+=4)}}return e}function H2(t,e,r){let n=t.length;r==null&&(r=0),e===void 0&&(e=new Uint8Array(lG(t)+r));let i=r;for(let o=0;o<n;o+=1){let s=t.charCodeAt(o);if(s<=127)e[i++]=s;else if(s<=2047)e[i++]=192|(s&1984)>>6,e[i++]=128|s&63;else if((s&63488)!==55296)e[i++]=224|(s&61440)>>12,e[i++]=128|(s&4032)>>6,e[i++]=128|s&63;else{let a=o+1;if(a===n||s>=56320)e[i++]=239,e[i++]=191,e[i++]=189;else{let u=t.charCodeAt(a);(u&64512)!==56320?(e[i++]=239,e[i++]=191,e[i++]=189):(o=a,s=65536|(s&1023)<<10|u&1023,e[i++]=240|(s&1835008)>>18,e[i++]=128|(s&258048)>>12,e[i++]=128|(s&4032)>>6,e[i++]=128|s&63)}}}return H2.bytes=i-r,e}H2.bytes=0;function Z2(t,e,r){let n="";e==null&&(e=0),r==null&&(r=t.length);for(let i=e;i<r;){let o=t[i++],s;if(o<=128)s=o;else if(o>191&&o<224)s=(o&31)<<6|t[i++]&63;else if(o>239&&o<365){s=((o&7)<<18|(t[i++]&63)<<12|(t[i++]&63)<<6|t[i++]&63)-65536;let a=55296|s>>10&1023;n+=String.fromCharCode(a),s=56320|s&1023}else s=(o&15)<<12|(t[i++]&63)<<6|t[i++]&63;n+=String.fromCharCode(s)}return Z2.bytes=r-e,n}Z2.bytes=0;var Mm=t=>t instanceof Uint8Array;function gp(t){return typeof t=="string"?lG(t):t.byteLength}function AI(t){return t instanceof Uint8Array?t:Array.isArray(t)?new Uint8Array(t):H2(t)}function PI(t,e,r){if(typeof e!="string")throw new Error("unknown input type");return H2(e,t,r),H2.bytes}var v6={},WSe=new Array(255);for(let t=0;t<=15;t+=1){let e=t.toString(16),r=e.toUpperCase();for(let n=0;n<=15;n+=1){let i=n.toString(16),o=i.toUpperCase(),s=t<<4|n,a=`${e}${i}`;WSe[s]=a,v6[a]=s,v6[`${r}${i}`]=s,v6[`${e}${o}`]=s,v6[`${r}${o}`]=s}}function GSe(t,e,r){let n="";for(let i=e;i<r;){let o=t[i++];n+=WSe[o]}return n}function dG(t){return t.length>>>1}function VSe(t,e,r,n){let i=0;for(;r<n;){let o=e.substr(i,2),s=v6[o];if(s===void 0)return;t[r++]=s,i+=2}return t}var Agt=Math.pow(2,24),Pgt=Math.pow(2,16),Tgt=Math.pow(2,8),kd=(t,e)=>t[e]*Agt+t[e+1]*Pgt+t[e+2]*Tgt+t[e+3],fr=(t,e)=>t[e]<<8|t[e+1],Od=(t,e,r)=>(e=+e,t[r+3]=e,e=e>>>8,t[r+2]=e,e=e>>>8,t[r+1]=e,e=e>>>8,t[r]=e,r+4),Et=(t,e,r)=>(t[r]=e>>8,t[r+1]=e&255,r+2);function cc(t,e,r,n,i){return r<0&&(n-=r,r=0),n<0&&(n=0),i<0?new Uint8Array(0):r>=e.length||n>=i?0:Rgt(t,e,r,n,i)}function Rgt(t,e,r,n,i){i-n>e.length-r&&(i=n+e.length-r);let o=i-n,s=t.length-n;return o>s&&(o=s),(n!==0||i<t.length)&&(t=new Uint8Array(t.buffer,t.byteOffset+n,o)),e.set(t,r),o}var kgt=0,HSe=1<<15,pG=1<<15,Ogt=~pG,JSe=1<<15,Bgt=~JSe;function Nn({bytes:t=0,encode:e,decode:r,encodingLength:n}){return e.bytes=t,r.bytes=t,{encode:e,decode:r,encodingLength:n||(()=>t)}}var lt=Nn({encode(t,e,r){e||(e=new Uint8Array(lt.encodingLength(t))),r||(r=0);let n=r,i=t.replace(/^\.|\.$/gm,"");if(i.length){let o=i.split(".");for(let s=0;s<o.length;s++){let a=PI(e,o[s],r+1);e[r]=a,r+=a+1}}return e[r++]=0,lt.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=[],n=e,i=0,o=0,s=!1;for(;;){if(e>=t.length)throw new Error("Cannot decode name (buffer overflow)");let a=t[e++];if(o+=s?0:1,a===0)break;if(a&192)if((a&192)===192){if(e+1>t.length)throw new Error("Cannot decode name (buffer overflow)");let u=fr(t,e-1)-49152;if(u>=n)throw new Error("Cannot decode name (bad pointer)");e=u,n=u,o+=s?0:1,s=!0}else throw new Error("Cannot decode name (bad label)");else{if(e+a>t.length)throw new Error("Cannot decode name (buffer overflow)");if(i+=a+1,i>254)throw new Error("Cannot decode name (name too long)");r.push(Z2(t,e,e+a)),e+=a,o+=s?0:a}}return lt.decode.bytes=o,r.length===0?".":r.join(".")},encodingLength(t){return t==="."||t===".."?1:gp(t.replace(/^\.|\.$/gm,""))+2}}),Co=Nn({encode(t,e,r){e||(e=new Uint8Array(Co.encodingLength(t))),r||(r=0);let n=PI(e,t,r+1);return e[r]=n,Co.encode.bytes=n+1,e},decode(t,e){e||(e=0);let r=t[e],n=Z2(t,e+1,e+1+r);return Co.decode.bytes=r+1,n},encodingLength(t){return gp(t)+1}}),J2=Nn({bytes:12,encode(t,e,r){e||(e=new Uint8Array(J2.encodingLength(t))),r||(r=0);let n=(t.flags||0)&32767,i=t.type==="response"?HSe:kgt;return Et(e,t.id||0,r),Et(e,n|i,r+2),Et(e,t.questions.length,r+4),Et(e,t.answers.length,r+6),Et(e,t.authorities.length,r+8),Et(e,t.additionals.length,r+10),e},decode(t,e){if(e||(e=0),t.length<12)throw new Error("Header must be 12 bytes");let r=fr(t,e+2);return{id:fr(t,e),type:r&HSe?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:zSe(r>>11&15),flag_aa:(r>>10&1)===1,flag_tc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:FSe(r&15),questions:new Array(fr(t,e+4)),answers:new Array(fr(t,e+6)),authorities:new Array(fr(t,e+8)),additionals:new Array(fr(t,e+10))}},encodingLength(){return 12}}),RI=Nn({encode(t,e,r){e||(e=new Uint8Array(RI.encodingLength(t))),r||(r=0);let n=t.length;return Et(e,n,r),cc(t,e,r+2,0,n),RI.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=fr(t,e),n=t.slice(e+2,e+2+r);return RI.decode.bytes=r+2,n},encodingLength(t){return t.length+2}}),II=Nn({encode(t,e,r){return e||(e=new Uint8Array(II.encodingLength(t))),r||(r=0),lt.encode(t,e,r+2),Et(e,lt.encode.bytes,r),II.encode.bytes=lt.encode.bytes+2,e},decode(t,e){e||(e=0);let r=fr(t,e),n=lt.decode(t,e+2);return II.decode.bytes=r+2,n},encodingLength(t){return lt.encodingLength(t)+2}}),kI=Nn({encode(t,e,r){e||(e=new Uint8Array(kI.encodingLength(t))),r||(r=0);let n=r;return r+=2,lt.encode(t.mname,e,r),r+=lt.encode.bytes,lt.encode(t.rname,e,r),r+=lt.encode.bytes,Od(e,t.serial||0,r),r+=4,Od(e,t.refresh||0,r),r+=4,Od(e,t.retry||0,r),r+=4,Od(e,t.expire||0,r),r+=4,Od(e,t.minimum||0,r),r+=4,Et(e,r-n-2,n),kI.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mname=lt.decode(t,e),e+=lt.decode.bytes,n.rname=lt.decode(t,e),e+=lt.decode.bytes,n.serial=kd(t,e),e+=4,n.refresh=kd(t,e),e+=4,n.retry=kd(t,e),e+=4,n.expire=kd(t,e),e+=4,n.minimum=kd(t,e),e+=4,kI.decode.bytes=e-r,n},encodingLength(t){return 22+lt.encodingLength(t.mname)+lt.encodingLength(t.rname)}}),OI=Nn({encode(t,e,r){Array.isArray(t)||(t=[t]);for(let i=0;i<t.length;i++)if(typeof t[i]=="string"&&(t[i]=AI(t[i])),!Mm(t[i]))throw new Error("Must be a Buffer");e||(e=new Uint8Array(OI.encodingLength(t))),r||(r=0);let n=r;return r+=2,t.forEach(function(i){e[r++]=i.length,cc(i,e,r,0,i.length),r+=i.length}),Et(e,r-n-2,n),OI.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=fr(t,e);e+=2;let i=[];for(;n>0;){let o=t[e++];if(--n,n<o)throw new Error("Buffer overflow");i.push(t.slice(e,e+o)),e+=o,n-=o}return OI.decode.bytes=e-r,i},encodingLength(t){Array.isArray(t)||(t=[t]);let e=2;return t.forEach(function(r){typeof r=="string"?e+=gp(r)+1:e+=r.length+1}),e}}),BI=Nn({encode(t,e,r){e||(e=new Uint8Array(BI.encodingLength(t))),r||(r=0),typeof t=="string"&&(t=AI(t)),t||(t=new Uint8Array(0));let n=r;r+=2;let i=t.length;return cc(t,e,r,0,i),r+=i,Et(e,r-n-2,n),BI.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=fr(t,e);e+=2;let i=t.slice(e,e+n);return e+=n,BI.decode.bytes=e-r,i},encodingLength(t){return t?(Mm(t)?t.length:gp(t))+2:2}}),DI=Nn({encode(t,e,r){e||(e=new Uint8Array(DI.encodingLength(t))),r||(r=0);let n=r;return r+=2,Co.encode(t.cpu,e,r),r+=Co.encode.bytes,Co.encode(t.os,e,r),r+=Co.encode.bytes,Et(e,r-n-2,n),DI.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.cpu=Co.decode(t,e),e+=Co.decode.bytes,n.os=Co.decode(t,e),e+=Co.decode.bytes,DI.decode.bytes=e-r,n},encodingLength(t){return Co.encodingLength(t.cpu)+Co.encodingLength(t.os)+2}}),X2=Nn({encode(t,e,r){return e||(e=new Uint8Array(X2.encodingLength(t))),r||(r=0),lt.encode(t,e,r+2),Et(e,lt.encode.bytes,r),X2.encode.bytes=lt.encode.bytes+2,e},decode(t,e){e||(e=0);let r=lt.decode(t,e+2);return X2.decode.bytes=lt.decode.bytes+2,r},encodingLength(t){return lt.encodingLength(t)+2}}),CI=Nn({encode(t,e,r){e||(e=new Uint8Array(CI.encodingLength(t))),r||(r=0),Et(e,t.priority||0,r+2),Et(e,t.weight||0,r+4),Et(e,t.port||0,r+6),lt.encode(t.target,e,r+8);let n=lt.encode.bytes+6;return Et(e,n,r),CI.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=fr(t,e),n={};return n.priority=fr(t,e+2),n.weight=fr(t,e+4),n.port=fr(t,e+6),n.target=lt.decode(t,e+8),CI.decode.bytes=r+2,n},encodingLength(t){return 8+lt.encodingLength(t.target)}}),Am=Nn({encode(t,e,r){let n=Am.encodingLength(t);return e||(e=new Uint8Array(Am.encodingLength(t))),r||(r=0),t.issuerCritical&&(t.flags=Am.ISSUER_CRITICAL),Et(e,n-2,r),r+=2,e[r]=t.flags||0,r+=1,Co.encode(t.tag,e,r),r+=Co.encode.bytes,PI(e,t.value,r),r+=gp(t.value),Am.encode.bytes=n,e},decode(t,e){e||(e=0);let r=fr(t,e);e+=2;let n=e,i={};return i.flags=t[e],e+=1,i.tag=Co.decode(t,e),e+=Co.decode.bytes,i.value=Z2(t,e,n+r),i.issuerCritical=!!(i.flags&Am.ISSUER_CRITICAL),Am.decode.bytes=r+2,i},encodingLength(t){return Co.encodingLength(t.tag)+Co.encodingLength(t.value)+2}});Am.ISSUER_CRITICAL=1<<7;var NI=Nn({encode(t,e,r){e||(e=new Uint8Array(NI.encodingLength(t))),r||(r=0);let n=r;return r+=2,Et(e,t.preference||0,r),r+=2,lt.encode(t.exchange,e,r),r+=lt.encode.bytes,Et(e,r-n-2,n),NI.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.preference=fr(t,e),e+=2,n.exchange=lt.decode(t,e),e+=lt.decode.bytes,NI.decode.bytes=e-r,n},encodingLength(t){return 4+lt.encodingLength(t.exchange)}}),YSe=Nn({encode(t,e,r){return e||(e=new Uint8Array(YSe.encodingLength(t))),r||(r=0),Et(e,4,r),r+=2,Ju.encode(t,e,r),e},decode(t,e){return e||(e=0),e+=2,Ju.decode(t,e)},bytes:6}),jI=Nn({encode(t,e,r){return e||(e=new Uint8Array(jI.encodingLength(t))),r||(r=0),Et(e,16,r),r+=2,yp.encode(t,e,r),jI.encode.bytes=18,e},decode(t,e){e||(e=0),e+=2;let r=yp.decode(t,e);return jI.decode.bytes=18,r},bytes:18}),ZSe=t=>new Uint8Array(t),bp=Nn({encode(t,e,r){e||(e=new Uint8Array(bp.encodingLength(t))),r||(r=0);let n=r,i=uG(t.code);if(Et(e,i,r),r+=2,t.data)Et(e,t.data.length,r),r+=2,cc(t.data,e,r),r+=t.data.length;else switch(i){case 8:{let o=t.sourcePrefixLength||0,s=t.family||$Se(t.ip,ZSe),a=LSe(t.ip,ZSe),u=Math.ceil(o/8);Et(e,u+4,r),r+=2,Et(e,s,r),r+=2,e[r++]=o,e[r++]=t.scopePrefixLength||0,cc(a,e,r,0,u),r+=u}break;case 11:t.timeout?(Et(e,2,r),r+=2,Et(e,t.timeout,r),r+=2):(Et(e,0,r),r+=2);break;case 12:{let o=t.length||0;Et(e,o,r),r+=2,e.fill(0,r,r+o),r+=o}break;case 14:{let o=t.tags.length*2;Et(e,o,r),r+=2;for(let s of t.tags)Et(e,s,r),r+=2}break;default:throw new Error(`Unknown roption code: ${t.code}`)}return bp.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={};r.code=fr(t,e),r.type=KSe(r.code),e+=2;let n=fr(t,e);switch(e+=2,r.data=t.slice(e,e+n),r.code){case 8:r.family=fr(t,e),e+=2,r.sourcePrefixLength=t[e++],r.scopePrefixLength=t[e++];{let i=new Uint8Array(r.family===1?4:16);cc(t,i,0,e,e+n-4),r.ip=USe(i)}break;case 11:n>0&&(r.timeout=fr(t,e),e+=2);break;case 14:r.tags=[];for(let i=0;i<n;i+=2)r.tags.push(fr(t,e)),e+=2}return bp.decode.bytes=n+4,r},encodingLength(t){if(t.data)return t.data.length+4;switch(uG(t.code)){case 8:{let r=t.sourcePrefixLength||0;return Math.ceil(r/8)+8}case 11:return typeof t.timeout=="number"?6:4;case 12:return t.length+4;case 14:return 4+t.tags.length*2}throw new Error(`Unknown roption code: ${t.code}`)}}),Pm=Nn({encode(t,e,r){e||(e=new Uint8Array(Pm.encodingLength(t))),r||(r=0);let n=r,i=Q2(t,bp);return Et(e,i,r),r=M6(t,bp,e,r+2),Pm.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=[],i=fr(t,e);e+=2;let o=0;for(;i>0;)n[o++]=bp.decode(t,e),e+=bp.decode.bytes,i-=bp.decode.bytes;return Pm.decode.bytes=e-r,n},encodingLength(t){return 2+Q2(t||[],bp)}}),Bd=Nn({encode(t,e,r){e||(e=new Uint8Array(Bd.encodingLength(t))),r||(r=0);let n=r,i=t.key;if(!Mm(i))throw new Error("Key must be a Buffer");return r+=2,Et(e,t.flags,r),r+=2,e[r]=Bd.PROTOCOL_DNSSEC,r+=1,e[r]=t.algorithm,r+=1,cc(i,e,r,0,i.length),r+=i.length,Bd.encode.bytes=r-n,Et(e,Bd.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},i=fr(t,e);if(e+=2,n.flags=fr(t,e),e+=2,t[e]!==Bd.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return e+=1,n.algorithm=t[e],e+=1,n.key=t.slice(e,r+i+2),e+=n.key.length,Bd.decode.bytes=e-r,n},encodingLength(t){return 6+gp(t.key)}});Bd.PROTOCOL_DNSSEC=3;Bd.ZONE_KEY=128;Bd.SECURE_ENTRYPOINT=32768;var w6=Nn({encode(t,e,r){e||(e=new Uint8Array(w6.encodingLength(t))),r||(r=0);let n=r,i=t.signature;if(!Mm(i))throw new Error("Signature must be a Buffer");return r+=2,Et(e,V2(t.typeCovered),r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.labels,r+=1,Od(e,t.originalTTL,r),r+=4,Od(e,t.expiration,r),r+=4,Od(e,t.inception,r),r+=4,Et(e,t.keyTag,r),r+=2,lt.encode(t.signersName,e,r),r+=lt.encode.bytes,cc(i,e,r,0,i.length),r+=i.length,w6.encode.bytes=r-n,Et(e,w6.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},i=fr(t,e);return e+=2,n.typeCovered=b6(fr(t,e)),e+=2,n.algorithm=t[e],e+=1,n.labels=t[e],e+=1,n.originalTTL=kd(t,e),e+=4,n.expiration=kd(t,e),e+=4,n.inception=kd(t,e),e+=4,n.keyTag=fr(t,e),e+=2,n.signersName=lt.decode(t,e),e+=lt.decode.bytes,n.signature=t.slice(e,r+i+2),e+=n.signature.length,w6.decode.bytes=e-r,n},encodingLength(t){return 20+lt.encodingLength(t.signersName)+gp(t.signature)}}),_6=Nn({encode(t,e,r){e||(e=new Uint8Array(_6.encodingLength(t))),r||(r=0);let n=r;return r+=2,lt.encode(t.mbox||".",e,r),r+=lt.encode.bytes,lt.encode(t.txt||".",e,r),r+=lt.encode.bytes,_6.encode.bytes=r-n,Et(e,_6.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mbox=lt.decode(t,e)||".",e+=lt.decode.bytes,n.txt=lt.decode(t,e)||".",e+=lt.decode.bytes,_6.decode.bytes=e-r,n},encodingLength(t){return 2+lt.encodingLength(t.mbox||".")+lt.encodingLength(t.txt||".")}}),Uc=Nn({encode(t,e,r){e||(e=new Uint8Array(Uc.encodingLength(t))),r||(r=0);let n=r,i=[];for(let o=0;o<t.length;o++){let s=V2(t[o]);i[s>>8]===void 0&&(i[s>>8]=[]),i[s>>8][s>>3&31]|=1<<7-(s&7)}for(let o=0;o<i.length;o++)if(i[o]!==void 0){let s=AI(i[o]);e[r]=o,r+=1,e[r]=s.length,r+=1,cc(s,e,r,0,s.length),r+=s.length}return Uc.encode.bytes=r-n,e},decode(t,e,r){e||(e=0);let n=e,i=[];for(;e-n<r;){let o=t[e];e+=1;let s=t[e];e+=1;for(let a=0;a<s;a++){let u=t[e+a];for(let m=0;m<8;m++)if(u&1<<7-m){let p=b6(o<<8|a<<3|m);i.push(p)}}e+=s}return Uc.decode.bytes=e-n,i},encodingLength(t){let e=[];for(let n=0;n<t.length;n++){let i=V2(t[n]);e[i>>8]=Math.max(e[i>>8]||0,i&255)}let r=0;for(let n=0;n<e.length;n++)e[n]!==void 0&&(r+=2+Math.ceil((e[n]+1)/8));return r}}),x6=Nn({encode(t,e,r){e||(e=new Uint8Array(x6.encodingLength(t))),r||(r=0);let n=r;return r+=2,lt.encode(t.nextDomain,e,r),r+=lt.encode.bytes,Uc.encode(t.rrtypes,e,r),r+=Uc.encode.bytes,x6.encode.bytes=r-n,Et(e,x6.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},i=fr(t,e);return e+=2,n.nextDomain=lt.decode(t,e),e+=lt.decode.bytes,n.rrtypes=Uc.decode(t,e,i-(e-r)),e+=Uc.decode.bytes,x6.decode.bytes=e-r,n},encodingLength(t){return 2+lt.encodingLength(t.nextDomain)+Uc.encodingLength(t.rrtypes)}}),E6=Nn({encode(t,e,r){e||(e=new Uint8Array(E6.encodingLength(t))),r||(r=0);let n=r,i=t.salt;if(!Mm(i))throw new Error("salt must be a Buffer");let o=t.nextDomain;if(!Mm(o))throw new Error("nextDomain must be a Buffer");return r+=2,e[r]=t.algorithm,r+=1,e[r]=t.flags,r+=1,Et(e,t.iterations,r),r+=2,e[r]=i.length,r+=1,cc(i,e,r,0,i.length),r+=i.length,e[r]=o.length,r+=1,cc(o,e,r,0,o.length),r+=o.length,Uc.encode(t.rrtypes,e,r),r+=Uc.encode.bytes,E6.encode.bytes=r-n,Et(e,E6.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},i=fr(t,e);e+=2,n.algorithm=t[e],e+=1,n.flags=t[e],e+=1,n.iterations=fr(t,e),e+=2;let o=t[e];e+=1,n.salt=t.slice(e,e+o),e+=o;let s=t[e];return e+=1,n.nextDomain=t.slice(e,e+s),e+=s,n.rrtypes=Uc.decode(t,e,i-(e-r)),e+=Uc.decode.bytes,E6.decode.bytes=e-r,n},encodingLength(t){return 8+t.salt.length+t.nextDomain.length+Uc.encodingLength(t.rrtypes)}}),S6=Nn({encode(t,e,r){e||(e=new Uint8Array(S6.encodingLength(t))),r||(r=0);let n=r,i=t.digest;if(!Mm(i))throw new Error("Digest must be a Buffer");return r+=2,Et(e,t.keyTag,r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.digestType,r+=1,cc(i,e,r,0,i.length),r+=i.length,S6.encode.bytes=r-n,Et(e,S6.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},i=fr(t,e);return e+=2,n.keyTag=fr(t,e),e+=2,n.algorithm=t[e],e+=1,n.digestType=t[e],e+=1,n.digest=t.slice(e,r+i+2),e+=n.digest.length,S6.decode.bytes=e-r,n},encodingLength(t){return 6+gp(t.digest)}}),Y2=Nn({encode(t,e,r){e||(e=new Uint8Array(Y2.encodingLength(t))),r||(r=0);let n=r;r+=2,e[r]=t.algorithm,r+=1,e[r]=t.hash,r+=1;let i=dG(t.fingerprint),o=mG(t.hash);if(i!==o)throw new Error(`Invalid length of fingerprint "${t.fingerprint}" for hashType=${t.hash}: ${i} != ${o}`);return VSe(e,t.fingerprint,r,r+=i),Y2.encode.bytes=r-n,Et(e,Y2.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};e+=2,n.algorithm=t[e],e+=1,n.hash=t[e],e+=1;let i=mG(n.hash);return n.fingerprint=GSe(t,e,e+i),e+=i,Y2.decode.bytes=e-r,n},encodingLength(t){return 4+dG(t.fingerprint)}});function mG(t){if(t===1)return 20;if(t===2)return 32;throw new Error(`Invalid hashType=${t}, supported=1,2`)}Y2.getFingerprintLengthForHashType=mG;function hG(t){switch(t.toUpperCase()){case"A":return YSe;case"PTR":return X2;case"CNAME":return X2;case"DNAME":return X2;case"TXT":return OI;case"NULL":return BI;case"AAAA":return jI;case"SRV":return CI;case"HINFO":return DI;case"CAA":return Am;case"NS":return II;case"SOA":return kI;case"MX":return NI;case"OPT":return Pm;case"DNSKEY":return Bd;case"RRSIG":return w6;case"RP":return _6;case"NSEC":return x6;case"NSEC3":return E6;case"SSHFP":return Y2;case"DS":return S6}return RI}var Wf=Nn({encode(t,e,r){e||(e=new Uint8Array(Wf.encodingLength(t))),r||(r=0);let n=r;if(lt.encode(t.name,e,r),r+=lt.encode.bytes,Et(e,V2(t.type),r),t.type.toUpperCase()==="OPT"){if(t.name!==".")throw new Error("OPT name must be root.");Et(e,t.udpPayloadSize||4096,r+2),e[r+4]=t.extendedRcode||0,e[r+5]=t.ednsVersion||0,Et(e,t.flags||0,r+6),r+=8,Pm.encode(t.options||[],e,r),r+=Pm.encode.bytes}else{let i=fG(t.class===void 0?"IN":t.class);t.flush&&(i|=pG),Et(e,i,r+2),Od(e,t.ttl||0,r+4),r+=8;let o=hG(t.type);o.encode(t.data,e,r),r+=o.encode.bytes}return Wf.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={},n=e;if(r.name=lt.decode(t,e),e+=lt.decode.bytes,r.type=b6(fr(t,e)),r.type==="OPT")r.udpPayloadSize=fr(t,e+2),r.extendedRcode=t[e+4],r.ednsVersion=t[e+5],r.flags=fr(t,e+6),r.flag_do=(r.flags>>15&1)===1,r.options=Pm.decode(t,e+8),e+=8+Pm.decode.bytes;else{let i=fr(t,e+2);r.ttl=kd(t,e+4),r.class=cG(i&Ogt),r.flush=!!(i&pG);let o=hG(r.type);r.data=o.decode(t,e+8),e+=8+o.decode.bytes}return Wf.decode.bytes=e-n,r},encodingLength(t){let e=t.data!==null&&t.data!==void 0?t.data:t.options;return lt.encodingLength(t.name)+8+hG(t.type).encodingLength(e)}}),e_=Nn({encode(t,e,r){e||(e=new Uint8Array(e_.encodingLength(t))),r||(r=0);let n=r;return lt.encode(t.name,e,r),r+=lt.encode.bytes,Et(e,V2(t.type),r),r+=2,Et(e,fG(t.class===void 0?"IN":t.class),r),r+=2,e_.encode.bytes=r-n,t},decode(t,e){e||(e=0);let r=e,n={};return n.name=lt.decode(t,e),e+=lt.decode.bytes,n.type=b6(fr(t,e)),e+=2,n.class=cG(fr(t,e)),e+=2,!!(n.class&JSe)&&(n.class&=Bgt),e_.decode.bytes=e-r,n},encodingLength(t){return lt.encodingLength(t.name)+4}});var QSe=1<<10,Hrr=1<<9,Zrr=1<<8,Jrr=1<<7,Yrr=1<<5,Qrr=1<<4,Xrr=1<<15,Ds={encode:function(t,e,r){let n=!e;n&&(e=new Uint8Array(Dgt(t))),r||(r=0);let i=r;return t.questions||(t.questions=[]),t.answers||(t.answers=[]),t.authorities||(t.authorities=[]),t.additionals||(t.additionals=[]),J2.encode(t,e,r),r+=J2.encode.bytes,r=M6(t.questions,e_,e,r),r=M6(t.answers,Wf,e,r),r=M6(t.authorities,Wf,e,r),r=M6(t.additionals,Wf,e,r),Ds.encode.bytes=r-i,n&&A6.bytes!==e.length?e.slice(0,A6.bytes):e},decode:function(t,e){e||(e=0);let r=e,n=J2.decode(t,e);return e+=J2.decode.bytes,e=TI(n.questions,e_,t,e),e=TI(n.answers,Wf,t,e),e=TI(n.authorities,Wf,t,e),e=TI(n.additionals,Wf,t,e),Ds.decode.bytes=e-r,n},encodingLength:function(t){return J2.encodingLength(t)+Q2(t.questions||[],e_)+Q2(t.answers||[],Wf)+Q2(t.authorities||[],Wf)+Q2(t.additionals||[],Wf)}};Ds.encode.bytes=0;Ds.decode.bytes=0;function qI(t,e){if(t.questions)throw new Error("Only one .question object expected instead of a .questions array!");let r=Object.assign({type:e},t);return r.question&&(r.questions=[r.question],delete r.question),r}var $I={encode:function(t,e,r){return e=Ds.encode(qI(t,"query"),e,r),$I.encode.bytes=Ds.encode.bytes,e},decode:function(t,e){let r=Ds.decode(t,e);return $I.decode.bytes=Ds.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return Ds.encodingLength(qI(t,"query"))}};$I.encode.bytes=0;$I.decode.bytes=0;var LI={encode:function(t,e,r){return e=Ds.encode(qI(t,"response"),e,r),LI.encode.bytes=Ds.encode.bytes,e},decode:function(t,e){let r=Ds.decode(t,e);return LI.decode.bytes=Ds.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return Ds.encodingLength(qI(t,"response"))}};LI.encode.bytes=0;LI.decode.bytes=0;var A6=Ds.encode,UI=Ds.decode,Dgt=Ds.encodingLength;function XSe(t){let e=A6(t),r=new Uint8Array(2+e.byteLength);return Et(r,e.byteLength),cc(e,r,2,0,e.length),XSe.bytes=r.byteLength,r}XSe.bytes=0;function e3e(t){let e=fr(t,0);if(t.byteLength<e+2)return null;let r=UI(t.slice(2));return e3e.bytes=UI.bytes,r}e3e.bytes=0;function Q2(t,e){let r=0;for(let n=0;n<t.length;n++)r+=e.encodingLength(t[n]);return r}function M6(t,e,r,n){for(let i=0;i<t.length;i++)e.encode(t[i],r,n),n+=e.encode.bytes;return n}function TI(t,e,r,n){for(let i=0;i<t.length;i++)t[i]=e.decode(r,n),n+=e.decode.bytes;return n}_();var t3e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},Gf=class{static getSigningMethod(e){return t3e(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(e,r){return t3e(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}};var ns=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},r3e=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},n3e="https://diddht.tbddev.org",Cgt=0,Tm=7200,FI=";",ja=",",yG;(function(t){t[t.Discoverable=0]="Discoverable",t[t.Organization=1]="Organization",t[t.Government=2]="Government",t[t.Corporation=3]="Corporation",t[t.LocalBusiness=4]="LocalBusiness",t[t.SoftwarePackage=5]="SoftwarePackage",t[t.WebApp=6]="WebApp",t[t.FinancialInstitution=7]="FinancialInstitution"})(yG||(yG={}));var qa;(function(t){t[t.Ed25519=0]="Ed25519",t[t.secp256k1=1]="secp256k1",t[t.secp256r1=2]="secp256r1",t[t.X25519=3]="X25519"})(qa||(qa={}));var gG;(function(t){t.authentication="auth",t.assertionMethod="asm",t.capabilityDelegation="del",t.capabilityInvocation="inv",t.keyAgreement="agm"})(gG||(gG={}));var o3e={Ed25519:qa.Ed25519,ES256K:qa.secp256k1,ES256:qa.secp256r1,"P-256":qa.secp256r1,secp256k1:qa.secp256k1,secp256r1:qa.secp256r1,X25519:qa.X25519},i3e={[qa.Ed25519]:"EdDSA",[qa.secp256k1]:"ES256K",[qa.secp256r1]:"ES256",[qa.X25519]:"ECDH-ES+A256KW"},Dd=class extends Gf{static create(){return ns(this,arguments,void 0,function*({keyManager:e=new ca,options:r={}}={}){var n,i,o,s,a,u,m,p,b,A,M;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some($=>!($.algorithm in o3e)))throw new Error("One or more verification method algorithms are not supported");let S=(i=r.verificationMethods)===null||i===void 0?void 0:i.filter($=>"id"in $).map($=>$.id);if(S&&S.length!==new Set(S).size)throw new Error("One or more verification method IDs are not unique");if(!((o=r.services)===null||o===void 0)&&o.some($=>!$.id||!$.type||!$.serviceEndpoint))throw new Error("One or more services are missing required properties");let P=yield e.generateKey({algorithm:"Ed25519"}),k=yield e.getPublicKey({keyUri:P}),R=yield $i.identityKeyToIdentifier({identityKey:k}),B=Object.assign(Object.assign({id:R},r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs}),r.controllers&&{controller:r.controllers}),I=[...(s=r.verificationMethods)!==null&&s!==void 0?s:[]];I?.some($=>{var U;return((U=$.id)===null||U===void 0?void 0:U.split("#").pop())==="0"})||I.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(let $ of I){let U=$.id&&$.id.split("#").pop()==="0"?P:yield e.generateKey({algorithm:$.algorithm}),F=yield e.getPublicKey({keyUri:U}),L=(u=(a=$.id)!==null&&a!==void 0?a:F.kid)!==null&&u!==void 0?u:yield nr({jwk:F});L=`${R}#${ac(L)}`,(m=B.verificationMethod)!==null&&m!==void 0||(B.verificationMethod=[]),B.verificationMethod.push({id:L,type:"JsonWebKey",controller:(p=$.controller)!==null&&p!==void 0?p:R,publicKeyJwk:F});for(let W of(b=$.purposes)!==null&&b!==void 0?b:[])B[W]||(B[W]=[]),B[W].push(L)}(A=r.services)===null||A===void 0||A.forEach($=>{var U;(U=B.service)!==null&&U!==void 0||(B.service=[]),$.id=`${R}#${$.id.split("#").pop()}`,B.service.push($)});let q=new fa({uri:R,document:B,metadata:Object.assign({published:!1},r.types&&{types:r.types}),keyManager:e});if(!((M=r.publish)!==null&&M!==void 0)||M){let $=yield Dd.publish({did:q,gatewayUri:r.gatewayUri});q.metadata=$.didDocumentMetadata}return q})}static import(e){return ns(this,arguments,void 0,function*({portableDid:r,keyManager:n=new ca}){var i;let o=ar.parse(r.uri);if(o?.method!==Dd.methodName)throw new ft(ut.MethodNotSupported,"Method not supported");let s=yield fa.import({portableDid:r,keyManager:n});if(!(!((i=s.document.verificationMethod)===null||i===void 0)&&i.some(a=>{var u;return((u=a.id)===null||u===void 0?void 0:u.split("#").pop())==="0"})))throw new ft(ut.InvalidDidDocument,"DID document must contain an Identity Key");return s})}static getSigningMethod(e){return ns(this,arguments,void 0,function*({didDocument:r,methodId:n="#0"}){var i;let o=ar.parse(r.id);if(o&&o.method!==this.methodName)throw new ft(ut.MethodNotSupported,`Method not supported: ${o.method}`);let s=(i=r.verificationMethod)===null||i===void 0?void 0:i.find(a=>{var u,m;return ac(a.id)===((u=ac(n))!==null&&u!==void 0?u:ac((m=r.assertionMethod)===null||m===void 0?void 0:m[0]))});if(!(s&&s.publicKeyJwk))throw new ft(ut.InternalError,"A verification method intended for signing could not be determined from the DID Document");return s})}static publish(e){return ns(this,arguments,void 0,function*({did:r,gatewayUri:n=n3e}){return yield Yu.put({did:r,gatewayUri:n})})}static resolve(e){return ns(this,arguments,void 0,function*(r,n={}){var i;let o=(i=n?.gatewayUri)!==null&&i!==void 0?i:n3e;try{yield $i.identifierToIdentityKey({didUri:r});let{didDocument:s,didDocumentMetadata:a}=yield Yu.get({didUri:r,gatewayUri:o});return Object.assign(Object.assign({},yi),{didDocument:s,didDocumentMetadata:a})}catch(s){if(!(s instanceof ft))throw new Error(s);return Object.assign(Object.assign({},yi),{didResolutionMetadata:Object.assign({error:s.code},s.message&&{errorMessage:s.message})})}})}};Dd.methodName="dht";var Yu=class{static get(e){return ns(this,arguments,void 0,function*({didUri:r,gatewayUri:n}){let i=$i.identifierToIdentityKeyBytes({didUri:r}),o=yield Yu.pkarrGet({gatewayUri:n,publicKeyBytes:i}),s=yield $i.parseBep44GetMessage({bep44Message:o}),a=yield Yu.fromDnsPacket({didUri:r,dnsPacket:s});return a.didDocumentMetadata.versionId=o.seq.toString(),a})}static put(e){return ns(this,arguments,void 0,function*({did:r,gatewayUri:n}){let i=yield Yu.toDnsPacket({didDocument:r.document,didMetadata:r.metadata,authoritativeGatewayUris:[n]}),o=yield $i.createBep44PutMessage({dnsPacket:i,publicKeyBytes:$i.identifierToIdentityKeyBytes({didUri:r.uri}),signer:yield r.getSigner({methodId:"0"})}),s=yield Yu.pkarrPut({gatewayUri:n,bep44Message:o});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:s,versionId:o.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet(e){return ns(this,arguments,void 0,function*({gatewayUri:r,publicKeyBytes:n}){let i=Hr.uint8Array(n).toBase32Z(),o=new URL(i,r).href,s;try{if(s=yield fetch(o,{method:"GET"}),!s.ok)throw new ft(ut.NotFound,`Pkarr record not found for: ${i}`)}catch(m){throw m instanceof ft?m:new ft(ut.InternalError,`Failed to fetch Pkarr record: ${m.message}`)}let a=yield s.arrayBuffer();if(!a)throw new ft(ut.NotFound,`Pkarr record not found for: ${i}`);if(a.byteLength<72)throw new ft(ut.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${a.byteLength}`);if(a.byteLength>1072)throw new ft(ut.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${a.byteLength}`);return{k:n,seq:Number(new DataView(a).getBigUint64(64)),sig:new Uint8Array(a,0,64),v:new Uint8Array(a,72)}})}static pkarrPut(e){return ns(this,arguments,void 0,function*({gatewayUri:r,bep44Message:n}){let i=Hr.uint8Array(n.k).toBase32Z(),o=new URL(i,r).href,s=new Uint8Array(n.v.length+72);s.set(n.sig,0),new DataView(s.buffer).setBigUint64(n.sig.length,BigInt(n.seq)),s.set(n.v,n.sig.length+8);let a;try{a=yield fetch(o,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:s})}catch(u){throw new ft(ut.InternalError,`Failed to put Pkarr record for identifier ${i}: ${u.message}`)}return a.ok})}static fromDnsPacket(e){return ns(this,arguments,void 0,function*({didUri:r,dnsPacket:n}){var i,o,s;let a={id:r},u={published:!0},m=new Map;for(let p of(i=n?.answers)!==null&&i!==void 0?i:[]){if(p.type!=="TXT")continue;let b=p.name.split(".")[0].substring(1);switch(!0){case b.startsWith("aka"):{let A=$i.parseTxtDataToString(p.data);a.alsoKnownAs=A.split(ja);break}case b.startsWith("cnt"):{let A=$i.parseTxtDataToString(p.data);a.controller=A.includes(ja)?A.split(ja):A;break}case b.startsWith("k"):{let{id:A,t:M,k:S,c:P,a:k}=$i.parseTxtDataToObject(p.data),R=Hr.base64Url(S).toUint8Array(),B=qa[Number(M)],I=yield $i.keyConverter(B).bytesToPublicKey({publicKeyBytes:R});I.alg=k||i3e[Number(M)];let q=b==="k0"?"0":A!==void 0?A:yield nr({jwk:I});(o=a.verificationMethod)!==null&&o!==void 0||(a.verificationMethod=[]);let $=`${r}#${q}`;a.verificationMethod.push({id:$,type:"JsonWebKey",controller:P??r,publicKeyJwk:I}),m.set(b,$);break}case b.startsWith("s"):{let A=$i.parseTxtDataToObject(p.data),{id:M,t:S,se:P}=A,k=r3e(A,["id","t","se"]),R=P.includes(ja)?P.split(ja):[P],B=Object.fromEntries(Object.entries(k).map(([I,q])=>[I,q.includes(ja)?q.split(ja):q]));(s=a.service)!==null&&s!==void 0||(a.service=[]),a.service.push(Object.assign(Object.assign({},B),{id:`${r}#${M}`,type:S,serviceEndpoint:R}));break}case b.startsWith("typ"):{let{id:A}=$i.parseTxtDataToObject(p.data);u.types=A.split(ja).map(M=>Number(M));break}case b.startsWith("did"):{let A=B=>B.split(ja).map(I=>m.get(I)).filter(I=>typeof I=="string"),{auth:M,asm:S,del:P,inv:k,agm:R}=$i.parseTxtDataToObject(p.data);M&&(a.authentication=A(M)),S&&(a.assertionMethod=A(S)),P&&(a.capabilityDelegation=A(P)),k&&(a.capabilityInvocation=A(k)),R&&(a.keyAgreement=A(R));break}}}return{didDocument:a,didDocumentMetadata:u,didResolutionMetadata:{}}})}static toDnsPacket(e){return ns(this,arguments,void 0,function*({didDocument:r,didMetadata:n,authoritativeGatewayUris:i,previousDidProof:o}){var s,a,u,m,p;let b=[],A=[],M=new Map,S=[],P=[];if(o!==void 0){let{signature:B,previousDid:I}=o;yield $i.validatePreviousDidProof({newDid:r.id,previousDidProof:o}),b.push({type:"TXT",name:"_prv._did.",ttl:Tm,data:`id=${I};s=${B}`})}if(r.alsoKnownAs&&b.push({type:"TXT",name:"_aka._did.",ttl:Tm,data:r.alsoKnownAs.join(ja)}),r.controller){let B=Array.isArray(r.controller)?r.controller.join(ja):r.controller;b.push({type:"TXT",name:"_cnt._did.",ttl:Tm,data:B})}for(let[B,I]of(a=(s=r.verificationMethod)===null||s===void 0?void 0:s.entries())!==null&&a!==void 0?a:[]){let q=`k${B}`;P.push(q);let $=I.id.split("#").pop();M.set($,q);let U=I.publicKeyJwk;if(!(U?.crv&&U.crv in o3e))throw new ft(ut.InvalidPublicKeyType,`Verification method '${I.id}' contains an unsupported key type: ${(u=U?.crv)!==null&&u!==void 0?u:"undefined"}`);let F=qa[U.crv],L=yield $i.keyConverter(U.crv).publicKeyToBytes({publicKey:U}),W=Hr.uint8Array(L).toBase64Url(),E=[`t=${F}`,`k=${W}`];$!=="0"&&(yield nr({jwk:U}))!==$&&E.unshift(`id=${$}`),U.alg!==i3e[F]&&E.push(`a=${U.alg}`),I.controller!==r.id&&E.push(`c=${I.controller}`),b.push({type:"TXT",name:`_${q}._did.`,ttl:Tm,data:E.join(FI)})}(m=r.service)===null||m===void 0||m.forEach((B,I)=>{let q=`s${I}`;S.push(q);let{id:$,type:U,serviceEndpoint:F}=B,L=r3e(B,["id","type","serviceEndpoint"]);$=ac($),F=Array.isArray(F)?F.join(","):F;let E=Object.entries(Object.assign({id:$,t:U,se:F},L)).map(([l,y])=>`${l}=${y}`).join(FI),c=$i.chunkDataIfNeeded(E);b.push({type:"TXT",name:`_${q}._did.`,ttl:Tm,data:c})});let k=[`v=${Cgt}`];if(P.length&&k.push(`vm=${P.join(ja)}`),Object.keys(Jg).forEach(B=>{var I;let q=(I=r[B])===null||I===void 0?void 0:I.map($=>M.get($.split("#").pop()));if(q){let $=gG[B];k.push(`${$}=${q.join(ja)}`)}}),S.length&&k.push(`svc=${S.join(ja)}`),!((p=n.types)===null||p===void 0)&&p.length){let I=n.types.map(q=>typeof q=="string"?yG[q]:q);b.push({type:"TXT",name:"_typ._did.",ttl:Tm,data:`id=${I.join(ja)}`})}b.push({type:"TXT",name:"_did."+Yu.getUniqueDidSuffix(r.id)+".",ttl:Tm,data:k.join(FI)});for(let B of i||[])A.push({type:"NS",name:"_did."+Yu.getUniqueDidSuffix(r.id)+".",ttl:Tm,data:B+"."});return{id:0,type:"response",flags:QSe,answers:[...b,...A]}})}static getUniqueDidSuffix(e){return e.split(":")[2]}},$i=class{static createBep44PutMessage(e){return ns(this,arguments,void 0,function*({dnsPacket:r,publicKeyBytes:n,signer:i}){let o=Math.ceil(Date.now()/1e3),s=A6(r),a=aG.encode({seq:o,v:s}).subarray(1,-1);if(a.length>1e3)throw new ft(ut.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${a.length} bytes`);let u=yield i.sign({data:a});return{k:n,seq:o,sig:u,v:s}})}static identifierToIdentityKey(e){return ns(this,arguments,void 0,function*({didUri:r}){let n=$i.identifierToIdentityKeyBytes({didUri:r});return yield Cn.bytesToPublicKey({publicKeyBytes:n})})}static identifierToIdentityKeyBytes({didUri:e}){let r=ar.parse(e);if(!r)throw new ft(ut.InvalidDid,`Invalid DID URI: ${e}`);if(r.method!==Dd.methodName)throw new ft(ut.MethodNotSupported,`Method not supported: ${r.method}`);let n;try{n=Hr.base32Z(r.id).toUint8Array()}catch{throw new ft(ut.InvalidPublicKey,"Failed to decode method-specific identifier")}if(n.length!==32)throw new ft(ut.InvalidPublicKeyLength,`Invalid public key length: ${n.length}`);return n}static identityKeyToIdentifier(e){return ns(this,arguments,void 0,function*({identityKey:r}){let n=yield Cn.publicKeyToBytes({publicKey:r}),i=Hr.uint8Array(n).toBase32Z();return`did:${Dd.methodName}:${i}`})}static keyConverter(e){let n={Ed25519:Cn,"P-256":{publicKeyToBytes:i=>ns(this,[i],void 0,function*({publicKey:o}){let s=yield Dn.publicKeyToBytes({publicKey:o});return yield Dn.compressPublicKey({publicKeyBytes:s})}),bytesToPublicKey:Dn.bytesToPublicKey,privateKeyToBytes:Dn.privateKeyToBytes,bytesToPrivateKey:Dn.bytesToPrivateKey},secp256k1:{publicKeyToBytes:i=>ns(this,[i],void 0,function*({publicKey:o}){let s=yield Mn.publicKeyToBytes({publicKey:o});return yield Mn.compressPublicKey({publicKeyBytes:s})}),bytesToPublicKey:Mn.bytesToPublicKey,privateKeyToBytes:Mn.privateKeyToBytes,bytesToPrivateKey:Mn.bytesToPrivateKey},X25519:Vu}[e];if(!n)throw new ft(ut.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static parseBep44GetMessage(e){return ns(this,arguments,void 0,function*({bep44Message:r}){let n=yield Cn.bytesToPublicKey({publicKeyBytes:r.k}),i=aG.encode({seq:r.seq,v:r.v}).subarray(1,-1);if(!(yield Cn.verify({key:n,signature:r.sig,data:i})))throw new ft(ut.InvalidSignature,"Invalid signature for DHT BEP44 message");return UI(r.v)})}static parseTxtDataToObject(e){return this.parseTxtDataToString(e).split(FI).reduce((r,n)=>{let[i,o]=n.split("=");return r[i]=o,r},{})}static parseTxtDataToString(e){if(typeof e=="string")return e;if(e instanceof Uint8Array)return Hr.uint8Array(e).toString();if(Array.isArray(e))return e.map(r=>this.parseTxtDataToString(r)).join("");throw new ft(ut.InternalError,"Pkarr returned DNS TXT record with invalid data type")}static validatePreviousDidProof(e){return ns(this,arguments,void 0,function*({newDid:r,previousDidProof:n}){let i=yield $i.identifierToIdentityKey({didUri:n.previousDid}),o=$i.identifierToIdentityKeyBytes({didUri:r}),s=Hr.base64Url(n.signature).toUint8Array();if(!(yield Cn.verify({key:i,data:o,signature:s})))throw new ft(ut.InvalidPreviousDidProof,"The previous DID proof is invalid.")})}static chunkDataIfNeeded(e){if(e.length<=255)return e;let r=[];for(let n=0;n<e.length;n+=255)r.push(e.slice(n,n+255));return r}};_();_();_();_();_();var Jn={DeltaExceedsMaximumSize:"DeltaExceedsMaximumSize",DidDocumentPublicKeyIdDuplicated:"DidDocumentPublicKeyIdDuplicated",DidDocumentPublicKeyMissingOrIncorrectType:"DidDocumentPublicKeyMissingOrIncorrectType",DidDocumentServiceIdDuplicated:"DidDocumentServiceIdDuplicated",DidSuffixIncorrectLength:"DidSuffixIncorrectLength",EncodedStringIncorrectEncoding:"EncodedStringIncorrectEncoding",IdNotUsingBase64UrlCharacterSet:"IdNotUsingBase64UrlCharacterSet",IdTooLong:"IdTooLong",JwkEs256kMissingOrInvalidCrv:"JwkEs256kMissingOrInvalidCrv",JwkEs256kMissingOrInvalidKty:"JwkEs256kMissingOrInvalidKty",JwkEs256kHasIncorrectLengthOfX:"JwkEs256kHasIncorrectLengthOfX",JwkEs256kHasIncorrectLengthOfY:"JwkEs256kHasIncorrectLengthOfY",JwkEs256kHasIncorrectLengthOfD:"JwkEs256kHasIncorrectLengthOfD",MultihashStringNotAMultihash:"MultihashStringNotAMultihash",MultihashUnsupportedHashAlgorithm:"MultihashUnsupportedHashAlgorithm",PublicKeyJwkEs256kHasUnexpectedProperty:"PublicKeyJwkEs256kHasUnexpectedProperty",PublicKeyPurposeDuplicated:"PublicKeyPurposeDuplicated",ServiceEndpointCannotBeAnArray:"ServiceEndpointCannotBeAnArray",ServiceEndpointStringNotValidUri:"ServiceEndpointStringNotValidUri",ServiceTypeTooLong:"ServiceTypeTooLong"};_();var An=class extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,Object.setPrototypeOf(this,new.target.prototype)}};_();_();_();_();var Enr=new Uint8Array(0);var bG=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};_();var vG=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},wG=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return s3e(this,e)}},_G=class{constructor(e){this.decoders=e}or(e){return s3e(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},s3e=(t,e)=>new _G({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),xG=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new vG(e,r,n),this.decoder=new wG(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Ngt=({name:t,prefix:e,encode:r,decode:n})=>new xG(t,e,r,n);var jgt=(t,e,r,n)=>{let i={};for(let p=0;p<e.length;++p)i[e[p]]=p;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,u=0,m=0;for(let p=0;p<o;++p){let b=i[t[p]];if(b===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|b,a+=r,a>=8&&(a-=8,s[m++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s},qgt=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},P6=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Ngt({prefix:e,name:t,encode(i){return qgt(i,n,r)},decode(i){return jgt(i,n,r,t)}});var Dnr=P6({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Cnr=P6({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),T6=P6({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Nnr=P6({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var is=class{static encode(e){return T6.baseEncode(e)}static decodeAsBytes(e,r){if(!is.isBase64UrlString(e))throw new An(Jn.EncodedStringIncorrectEncoding,`Given ${r} must be base64url string.`);return T6.baseDecode(e)}static decodeAsString(e,r){let n=is.decodeAsBytes(e,r);return is.bytesToString(n)}static isBase64UrlString(e){return/^[A-Za-z0-9_-]+$/.test(e)}static stringToBytes(e){return new TextEncoder().encode(e)}static bytesToString(e){return new TextDecoder().decode(e)}};_();var m3e=Zt(rU(),1);_();_();var EG;(function(t){t.Public="public",t.Private="private"})(EG||(EG={}));var Fc=EG;var No=class{static validateEs256kOperationKey(e,r){let n=new Set(["kty","crv","x","y"]);r===Fc.Private&&n.add("d");for(let i in e)if(!n.has(i))throw new An(Jn.PublicKeyJwkEs256kHasUnexpectedProperty,`SECP256K1 JWK key has unexpected property '${i}'.`);if(e.crv!=="secp256k1")throw new An(Jn.JwkEs256kMissingOrInvalidCrv,`SECP256K1 JWK 'crv' property must be 'secp256k1' but got '${e.crv}.'`);if(e.kty!=="EC")throw new An(Jn.JwkEs256kMissingOrInvalidKty,`SECP256K1 JWK 'kty' property must be 'EC' but got '${e.kty}.'`);if(e.x.length!==43)throw new An(Jn.JwkEs256kHasIncorrectLengthOfX,"SECP256K1 JWK 'x' property must be 43 bytes.");if(e.y.length!==43)throw new An(Jn.JwkEs256kHasIncorrectLengthOfY,"SECP256K1 JWK 'y' property must be 43 bytes.");if(r===Fc.Private&&(e.d===void 0||e.d.length!==43))throw new An(Jn.JwkEs256kHasIncorrectLengthOfD,"SECP256K1 JWK 'd' property must be 43 bytes.")}static validateId(e){if(e.length>50)throw new An(Jn.IdTooLong,`Key ID length ${e.length} exceed max allowed length of ${50}.`);if(!is.isBase64UrlString(e))throw new An(Jn.IdNotUsingBase64UrlCharacterSet,`Key ID '${e}' is not a Base64URL string.`)}static validatePublicKeyPurposes(e){if(e===void 0)return;let r=new Set;for(let n of e){if(r.has(n))throw new An(Jn.PublicKeyPurposeDuplicated,`Public key purpose '${n}' already specified.`);r.add(n)}}};_();var R6=class{};R6.hashAlgorithmInMultihashCode=18;R6.maxCanonicalizedDeltaSizeInBytes=1e3;var $a=R6;_();var f3e=Zt(c3e(),1);var fc=class{static canonicalizeAsBytes(e){let r=fc.removeAllUndefinedProperties(e),n=f3e.default(r);return is.stringToBytes(n)}static removeAllUndefinedProperties(e){for(let r in e)typeof e[r]=="object"?fc.removeAllUndefinedProperties(e[r]):e[r]===void 0&&delete e[r];return e}};_();_();_();_();var $gt=d3e,u3e=128,Lgt=127,Ugt=~Lgt,Fgt=Math.pow(2,31);function d3e(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Fgt;)e[r++]=t&255|u3e,t/=128;for(;t&Ugt;)e[r++]=t&255|u3e,t>>>=7;return e[r]=t|0,d3e.bytes=r-n+1,e}var zgt=SG,Kgt=128,l3e=127;function SG(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw SG.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&l3e)<<i:(s&l3e)*Math.pow(2,i),i+=7}while(s>=Kgt);return SG.bytes=o-n,r}var Wgt=Math.pow(2,7),Ggt=Math.pow(2,14),Vgt=Math.pow(2,21),Hgt=Math.pow(2,28),Zgt=Math.pow(2,35),Jgt=Math.pow(2,42),Ygt=Math.pow(2,49),Qgt=Math.pow(2,56),Xgt=Math.pow(2,63),ebt=function(t){return t<Wgt?1:t<Ggt?2:t<Vgt?3:t<Hgt?4:t<Zgt?5:t<Jgt?6:t<Ygt?7:t<Qgt?8:t<Xgt?9:10},tbt={encode:$gt,decode:zgt,encodingLength:ebt},rbt=tbt,I6=rbt;var MG=(t,e=0)=>[I6.decode(t,e),I6.decode.bytes],AG=(t,e,r=0)=>(I6.encode(t,e,r),e),PG=t=>I6.encodingLength(t);var TG=(t,e)=>{let r=e.byteLength,n=PG(t),i=n+PG(r),o=new Uint8Array(i+r);return AG(t,o,0),AG(r,o,n),o.set(e,i),new zI(t,r,e,o)},h3e=t=>{let e=bG(t),[r,n]=MG(e),[i,o]=MG(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new zI(r,i,s,e)};var zI=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};_();_();var IG=({name:t,code:e,encode:r})=>new RG(t,e,r),RG=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?TG(this.code,r):r.then(n=>TG(this.code,n))}else throw Error("Unknown type, must be binary type")}};var p3e=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),KI=IG({name:"sha2-256",code:18,encode:p3e("SHA-256")}),mir=IG({name:"sha2-512",code:19,encode:p3e("SHA-512")});var k6=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},vi=class{static hash(e,r){return k6(this,void 0,void 0,function*(){let n;switch(r){case 18:n=(yield KI.digest(e)).bytes;break;default:throw new An(Jn.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static hashAsNonMultihashBytes(e,r){return k6(this,void 0,void 0,function*(){let n;switch(r){case 18:n=yield KI.encode(e);break;default:throw new An(Jn.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static canonicalizeThenHashThenEncode(e,r){return k6(this,void 0,void 0,function*(){let n=fc.canonicalizeAsBytes(e);return yield vi.hashThenEncode(n,r)})}static canonicalizeThenDoubleHashThenEncode(e,r){return k6(this,void 0,void 0,function*(){let n=fc.canonicalizeAsBytes(e),i=yield vi.hashAsNonMultihashBytes(n,r);return yield vi.hashThenEncode(i,r)})}static hashThenEncode(e,r){return k6(this,void 0,void 0,function*(){let n=yield vi.hash(e,r);return is.encode(n)})}static validateEncodedHashComputedUsingSupportedHashAlgorithm(e,r){let n,i=is.decodeAsBytes(e,r);try{n=h3e(i)}catch{throw new An(Jn.MultihashStringNotAMultihash,`Given ${r} string '${e}' is not a multihash after decoding.`)}let o=$a.hashAlgorithmInMultihashCode;if(o!==n.code)throw new An(Jn.MultihashUnsupportedHashAlgorithm,`Given ${r} uses unsupported multihash algorithm with code ${n.code}, should use ${o} or change IonSdkConfig to desired hashing algorithm.`)}};_();var kG;(function(t){t.Create="create",t.Update="update",t.Deactivate="deactivate",t.Recover="recover"})(kG||(kG={}));var O6=kG;_();var OG;(function(t){t.Replace="replace",t.AddPublicKeys="add-public-keys",t.RemovePublicKeys="remove-public-keys",t.AddServices="add-services",t.RemoveServices="remove-services"})(OG||(OG={}));var Lb=OG;var WI=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},bo=class{static createCreateRequest(e){return WI(this,void 0,void 0,function*(){let r=e.recoveryKey,n=e.updateKey,i=e.document.publicKeys,o=e.document.services;No.validateEs256kOperationKey(r,Fc.Public),No.validateEs256kOperationKey(n,Fc.Public),bo.validateDidDocumentKeys(i),bo.validateServices(o);let s=$a.hashAlgorithmInMultihashCode,a=[{action:Lb.Replace,document:e.document}],u={updateCommitment:yield vi.canonicalizeThenDoubleHashThenEncode(n,s),patches:a};bo.validateDeltaSize(u);let p={deltaHash:yield vi.canonicalizeThenHashThenEncode(u,s),recoveryCommitment:yield vi.canonicalizeThenDoubleHashThenEncode(r,s)};return{type:O6.Create,suffixData:p,delta:u}})}static createDeactivateRequest(e){return WI(this,void 0,void 0,function*(){bo.validateDidSuffix(e.didSuffix),No.validateEs256kOperationKey(e.recoveryPublicKey,Fc.Public);let r=$a.hashAlgorithmInMultihashCode,n=yield vi.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),i={didSuffix:e.didSuffix,recoveryKey:e.recoveryPublicKey},o=yield e.signer.sign({alg:"ES256K"},i);return{type:O6.Deactivate,didSuffix:e.didSuffix,revealValue:n,signedData:o}})}static createRecoverRequest(e){return WI(this,void 0,void 0,function*(){bo.validateDidSuffix(e.didSuffix),No.validateEs256kOperationKey(e.recoveryPublicKey,Fc.Public),No.validateEs256kOperationKey(e.nextRecoveryPublicKey,Fc.Public),No.validateEs256kOperationKey(e.nextUpdatePublicKey,Fc.Public),bo.validateDidDocumentKeys(e.document.publicKeys),bo.validateServices(e.document.services);let r=$a.hashAlgorithmInMultihashCode,n=yield vi.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),i=[{action:Lb.Replace,document:e.document}],o=yield vi.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,r),s={patches:i,updateCommitment:o},a=yield vi.canonicalizeThenHashThenEncode(s,r),m={recoveryCommitment:yield vi.canonicalizeThenDoubleHashThenEncode(e.nextRecoveryPublicKey,r),recoveryKey:e.recoveryPublicKey,deltaHash:a},p=yield e.signer.sign({alg:"ES256K"},m);return{type:O6.Recover,didSuffix:e.didSuffix,revealValue:n,delta:s,signedData:p}})}static createUpdateRequest(e){return WI(this,void 0,void 0,function*(){if(bo.validateDidSuffix(e.didSuffix),No.validateEs256kOperationKey(e.updatePublicKey,Fc.Public),No.validateEs256kOperationKey(e.nextUpdatePublicKey,Fc.Public),bo.validateServices(e.servicesToAdd),bo.validateDidDocumentKeys(e.publicKeysToAdd),e.idsOfServicesToRemove!==void 0)for(let S of e.idsOfServicesToRemove)No.validateId(S);if(e.idsOfPublicKeysToRemove!==void 0)for(let S of e.idsOfPublicKeysToRemove)No.validateId(S);let r=[],n=e.servicesToAdd;if(n!==void 0&&n.length>0){let S={action:Lb.AddServices,services:n};r.push(S)}let i=e.idsOfServicesToRemove;if(i!==void 0&&i.length>0){let S={action:Lb.RemoveServices,ids:i};r.push(S)}let o=e.publicKeysToAdd;if(o!==void 0&&o.length>0){let S={action:Lb.AddPublicKeys,publicKeys:o};r.push(S)}let s=e.idsOfPublicKeysToRemove;if(s!==void 0&&s.length>0){let S={action:Lb.RemovePublicKeys,ids:s};r.push(S)}let a=$a.hashAlgorithmInMultihashCode,u=yield vi.canonicalizeThenHashThenEncode(e.updatePublicKey,a),m=yield vi.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,a),p={patches:r,updateCommitment:m},b=yield vi.canonicalizeThenHashThenEncode(p,a),A={updateKey:e.updatePublicKey,deltaHash:b},M=yield e.signer.sign({alg:"ES256K"},A);return{type:O6.Update,didSuffix:e.didSuffix,revealValue:u,delta:p,signedData:M}})}static validateDidSuffix(e){vi.validateEncodedHashComputedUsingSupportedHashAlgorithm(e,"didSuffix")}static validateDidDocumentKeys(e){if(e===void 0)return;let r=new Set;for(let n of e){if(Array.isArray(n.publicKeyJwk))throw new An(Jn.DidDocumentPublicKeyMissingOrIncorrectType,"DID Document key 'publicKeyJwk' property is not a non-array object.");if(No.validateId(n.id),r.has(n.id))throw new An(Jn.DidDocumentPublicKeyIdDuplicated,`DID Document key with ID '${n.id}' already exists.`);r.add(n.id),No.validatePublicKeyPurposes(n.purposes)}}static validateServices(e){if(e!==void 0&&e.length!==0){let r=new Set;for(let n of e){if(bo.validateService(n),r.has(n.id))throw new An(Jn.DidDocumentServiceIdDuplicated,"Service id has to be unique");r.add(n.id)}}}static validateService(e){No.validateId(e.id);let r=30;if(e.type.length>r){let n=`Service endpoint type length ${e.type.length} exceeds max allowed length of ${r}.`;throw new An(Jn.ServiceTypeTooLong,n)}if(Array.isArray(e.serviceEndpoint)){let n="Service endpoint value cannot be an array.";throw new An(Jn.ServiceEndpointCannotBeAnArray,n)}if(typeof e.serviceEndpoint=="string"&&m3e.parse(e.serviceEndpoint).error!==void 0)throw new An(Jn.ServiceEndpointStringNotValidUri,`Service endpoint string '${e.serviceEndpoint}' is not a URI.`)}static validateDeltaSize(e){let r=fc.canonicalizeAsBytes(e);if(r.length>$a.maxCanonicalizedDeltaSizeInBytes){let n=`Delta of ${r.length} bytes exceeded limit of ${$a.maxCanonicalizedDeltaSizeInBytes} bytes.`;throw new An(Jn.DeltaExceedsMaximumSize,n)}}};var y3e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},Rm=class{static createLongFormDid(e){return y3e(this,void 0,void 0,function*(){let r=yield bo.createCreateRequest(e),n=yield Rm.computeDidUniqueSuffix(r.suffixData),i;$a.network===void 0||$a.network==="mainnet"?i=`did:ion:${n}`:i=`did:ion:${$a.network}:${n}`;let o={suffixData:r.suffixData,delta:r.delta},s=fc.canonicalizeAsBytes(o),a=is.encode(s);return`${i}:${a}`})}static computeDidUniqueSuffix(e){return y3e(this,void 0,void 0,function*(){let r=fc.canonicalizeAsBytes(e),n=yield vi.hash(r,$a.hashAlgorithmInMultihashCode);return is.encode(n)})}};_();_();var g3e;(function(t){t.Mainnet="mainnet",t.Testnet="test"})(g3e||(g3e={}));_();var b3e;(function(t){t.Authentication="authentication",t.AssertionMethod="assertionMethod",t.CapabilityInvocation="capabilityInvocation",t.CapabilityDelegation="capabilityDelegation",t.KeyAgreement="keyAgreement"})(b3e||(b3e={}));_();var Im=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},Cd;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(Cd||(Cd={}));var obt={Ed25519:Cd.Ed25519,ES256K:Cd.secp256k1,ES256:Cd.secp256r1,"P-256":Cd.secp256r1,secp256k1:Cd.secp256k1,secp256r1:Cd.secp256r1},v3e="https://ion.tbd.engineering",km=class extends Gf{static create(){return Im(this,arguments,void 0,function*({keyManager:e=new ca,options:r={}}={}){var n,i,o,s,a,u,m;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some($=>!($.algorithm in obt)))throw new Error("One or more verification method algorithms are not supported");let p=(i=r.verificationMethods)===null||i===void 0?void 0:i.filter($=>"id"in $).map($=>$.id);if(p&&p.length!==new Set(p).size)throw new Error("One or more verification method IDs are not unique");if(!((o=r.services)===null||o===void 0)&&o.some($=>!$.id||!$.type||!$.serviceEndpoint))throw new Error("One or more services are missing required properties");let b={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},A=[];for(let $ of(s=r.verificationMethods)!==null&&s!==void 0?s:[b]){let U=yield e.generateKey({algorithm:$.algorithm}),F=yield e.getPublicKey({keyUri:U});A.push({id:$.id,publicKeyJwk:F,purposes:(a=$.purposes)!==null&&a!==void 0?a:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}let M=yield e.generateKey({algorithm:Cd.secp256k1}),S=yield e.getPublicKey({keyUri:M}),P=yield e.generateKey({algorithm:Cd.secp256k1}),k=yield e.getPublicKey({keyUri:P}),R=yield uc.computeLongFormDidUri({recoveryKey:S,updateKey:k,services:(u=r.services)!==null&&u!==void 0?u:[],verificationMethods:A}),{didDocument:B,didResolutionMetadata:I}=yield km.resolve(R,{gatewayUri:r.gatewayUri});if(B===null)throw new Error(`Unable to resolve DID during creation: ${I?.error}`);let q=new fa({uri:R,document:B,metadata:{published:!1,canonicalId:R.split(":",3).join(":"),recoveryKey:S,updateKey:k},keyManager:e});if(!((m=r.publish)!==null&&m!==void 0)||m){let $=yield km.publish({did:q,gatewayUri:r.gatewayUri});q.metadata=$.didDocumentMetadata}return q})}static getSigningMethod(e){return Im(this,arguments,void 0,function*({didDocument:r,methodId:n}){var i;let o=ar.parse(r.id);if(o&&o.method!==this.methodName)throw new ft(ut.MethodNotSupported,`Method not supported: ${o.method}`);let s=(i=r.verificationMethod)===null||i===void 0?void 0:i.find(a=>{var u;return a.id===(n??((u=r.assertionMethod)===null||u===void 0?void 0:u[0]))});if(!(s&&s.publicKeyJwk))throw new ft(ut.InternalError,"A verification method intended for signing could not be determined from the DID Document");return s})}static import(e){return Im(this,arguments,void 0,function*({portableDid:r,keyManager:n=new ca}){let i=ar.parse(r.uri);if(i?.method!==km.methodName)throw new ft(ut.MethodNotSupported,"Method not supported");return yield fa.import({portableDid:r,keyManager:n})})}static publish(e){return Im(this,arguments,void 0,function*({did:r,gatewayUri:n=v3e}){var i,o,s;let a=(o=(i=r.document.verificationMethod)===null||i===void 0?void 0:i.map(p=>({id:p.id,publicKeyJwk:p.publicKeyJwk,purposes:eG({didDocument:r.document,methodId:p.id})})))!==null&&o!==void 0?o:[],u=yield uc.createIonDocument({services:(s=r.document.service)!==null&&s!==void 0?s:[],verificationMethods:a}),m=yield uc.constructCreateRequest({ionDocument:u,recoveryKey:r.metadata.recoveryKey,updateKey:r.metadata.updateKey});try{let p=uc.appendPathToUrl({baseUrl:n,path:"/operations"}),b=yield fetch(p,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:b.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:ut.InternalError,errorMessage:`Failed to publish DID document for: ${r.uri}`}}}})}static resolve(e){return Im(this,arguments,void 0,function*(r,n={}){var i,o;let s=ar.parse(r);if(!s)return Object.assign(Object.assign({},yi),{didResolutionMetadata:{error:"invalidDid"}});if(s.method!==km.methodName)return Object.assign(Object.assign({},yi),{didResolutionMetadata:{error:"methodNotSupported"}});let a=(i=n?.gatewayUri)!==null&&i!==void 0?i:v3e;try{let u=uc.appendPathToUrl({baseUrl:a,path:`/identifiers/${r}`}),m=yield fetch(u);if(!m.ok)throw new ft(ut.NotFound,`Unable to find DID document for: ${r}`);let{didDocument:p,didDocumentMetadata:b}=yield m.json();return Object.assign(Object.assign(Object.assign({},yi),p&&{didDocument:p}),{didDocumentMetadata:Object.assign({published:(o=b?.method)===null||o===void 0?void 0:o.published},b)})}catch(u){if(!(u instanceof ft))throw new Error(u);return Object.assign(Object.assign({},yi),{didResolutionMetadata:Object.assign({error:u.code},u.message&&{errorMessage:u.message})})}})}};km.methodName="ion";var uc=class{static appendPathToUrl({baseUrl:e,path:r}){let n=new URL(e);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static computeLongFormDidUri(e){return Im(this,arguments,void 0,function*({recoveryKey:r,updateKey:n,services:i,verificationMethods:o}){let s=yield uc.createIonDocument({services:i,verificationMethods:o}),a=uc.normalizeJwk(r),u=uc.normalizeJwk(n);return yield Rm.createLongFormDid({document:s,recoveryKey:a,updateKey:u})})}static constructCreateRequest(e){return Im(this,arguments,void 0,function*({ionDocument:r,recoveryKey:n,updateKey:i}){return yield bo.createCreateRequest({document:r,recoveryKey:uc.normalizeJwk(n),updateKey:uc.normalizeJwk(i)})})}static createIonDocument(e){return Im(this,arguments,void 0,function*({services:r,verificationMethods:n}){var i,o;let s=[];for(let m of n){let p=(o=(i=m.id)!==null&&i!==void 0?i:m.publicKeyJwk.kid)!==null&&o!==void 0?o:yield nr({jwk:m.publicKeyJwk});p=`${p.split("#").pop()}`;let b={id:p,publicKeyJwk:uc.normalizeJwk(m.publicKeyJwk),purposes:m.purposes,type:"JsonWebKey2020"};s.push(b)}let a=r.map(m=>Object.assign(Object.assign({},m),{id:`${m.id.split("#").pop()}`}));return{publicKeys:s,services:a}})}static normalizeJwk(e){let r=e.kty,n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);return n}};_();var GI=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},Nd=class extends Gf{static create(){return GI(this,arguments,void 0,function*({keyManager:e=new ca,options:r={}}={}){var n,i,o,s;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(s=(n=r.algorithm)!==null&&n!==void 0?n:(o=(i=r.verificationMethods)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.algorithm)!==null&&s!==void 0?s:"Ed25519",u=yield e.generateKey({algorithm:a}),m=yield e.getPublicKey({keyUri:u}),p=Hr.object(m).toBase64Url(),b=`did:${Nd.methodName}:${p}`,M=(yield Nd.resolve(b)).didDocument;return new fa({uri:b,document:M,metadata:{},keyManager:e})})}static getSigningMethod(e){return GI(this,arguments,void 0,function*({didDocument:r}){var n;let i=ar.parse(r.id);if(i&&i.method!==this.methodName)throw new ft(ut.MethodNotSupported,`Method not supported: ${i.method}`);let[o]=(n=r.verificationMethod)!==null&&n!==void 0?n:[];if(!(o&&o.publicKeyJwk))throw new ft(ut.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return GI(this,arguments,void 0,function*({portableDid:r,keyManager:n=new ca}){let i=ar.parse(r.uri);if(i?.method!==Nd.methodName)throw new ft(ut.MethodNotSupported,"Method not supported");let o=yield fa.import({portableDid:r,keyManager:n});if(o.document.verificationMethod.length!==1)throw new ft(ut.InvalidDidDocument,"DID document must contain exactly one verification method");return o})}static resolve(e,r){return GI(this,void 0,void 0,function*(){let n=ar.parse(e),i;try{i=Hr.base64Url(n.id).toObject()}catch{}if(!n||!i)return Object.assign(Object.assign({},yi),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==Nd.methodName)return Object.assign(Object.assign({},yi),{didResolutionMetadata:{error:"methodNotSupported"}});let o={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},s=`${o.id}#0`;switch(o.verificationMethod=[{id:s,type:"JsonWebKey",controller:o.id,publicKeyJwk:i}],o.authentication=[s],o.assertionMethod=[s],o.capabilityInvocation=[s],o.capabilityDelegation=[s],o.keyAgreement=[s],i.use){case"sig":{delete o.keyAgreement;break}case"enc":{delete o.authentication,delete o.assertionMethod,delete o.capabilityInvocation,delete o.capabilityDelegation;break}}return Object.assign(Object.assign({},yi),{didDocument:o})})}};Nd.methodName="jwk";_();var Qu=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},vp;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(vp||(vp={}));var BG={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},sbt={Ed25519:vp.Ed25519,ES256K:vp.secp256k1,ES256:vp.secp256r1,"P-256":vp.secp256r1,secp256k1:vp.secp256k1,secp256r1:vp.secp256r1,X25519:vp.X25519},Cs=class extends Gf{static create(){return Qu(this,arguments,void 0,function*({keyManager:e=new ca,options:r={}}={}){var n,i,o,s;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(s=(n=r.algorithm)!==null&&n!==void 0?n:(o=(i=r.verificationMethods)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.algorithm)!==null&&s!==void 0?s:"Ed25519",u=yield e.generateKey({algorithm:a}),m=yield e.getPublicKey({keyUri:u}),p=yield vo.publicKeyToMultibaseId({publicKey:m}),b=`did:${Cs.methodName}:${p}`,M=(yield Cs.resolve(b,r)).didDocument;return new fa({uri:b,document:M,metadata:{},keyManager:e})})}static getSigningMethod(e){return Qu(this,arguments,void 0,function*({didDocument:r}){var n;let i=ar.parse(r.id);if(i&&i.method!==this.methodName)throw new ft(ut.MethodNotSupported,`Method not supported: ${i.method}`);let[o]=r.assertionMethod||[],s=(n=r.verificationMethod)===null||n===void 0?void 0:n.find(a=>a.id===o);if(!(s&&s.publicKeyJwk))throw new ft(ut.InternalError,"A verification method intended for signing could not be determined from the DID Document");return s})}static import(e){return Qu(this,arguments,void 0,function*({portableDid:r,keyManager:n=new ca}){let i=ar.parse(r.uri);if(i?.method!==Cs.methodName)throw new ft(ut.MethodNotSupported,"Method not supported");let o=yield fa.import({portableDid:r,keyManager:n});if(o.document.verificationMethod.length!==1)throw new ft(ut.InvalidDidDocument,"DID document must contain exactly one verification method");return o})}static resolve(e,r){return Qu(this,void 0,void 0,function*(){try{let n=yield Cs.createDocument({didUri:e,options:r});return Object.assign(Object.assign({},yi),{didDocument:n})}catch(n){if(!(n instanceof ft))throw new Error(n);return Object.assign(Object.assign({},yi),{didResolutionMetadata:Object.assign({error:n.code},n.message&&{errorMessage:n.message})})}})}static createDocument(e){return Qu(this,arguments,void 0,function*({didUri:r,options:n={}}){let{defaultContext:i="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:o=!1,enableExperimentalPublicKeyTypes:s=!1,publicKeyFormat:a="JsonWebKey2020"}=n,u={id:""},m=ar.parse(r);if(!m)throw new ft(ut.InvalidDid,`Invalid DID URI: ${r}`);let p=m.id;if(m.method!==Cs.methodName)throw new ft(ut.MethodNotSupported,`Method not supported: ${m.method}`);if(!Cs.validateIdentifier(m))throw new ft(ut.InvalidDid,`Invalid DID URI: ${r}`);let b=yield Cs.createSignatureMethod({didUri:r,multibaseValue:p,options:{enableExperimentalPublicKeyTypes:s,publicKeyFormat:a}});if(u.id=m.uri,u.verificationMethod=[b],u.authentication=[b.id],u.assertionMethod=[b.id],u.capabilityInvocation=[b.id],u.capabilityDelegation=[b.id],o===!0){let S=a==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",P=yield this.createEncryptionMethod({didUri:r,multibaseValue:p,options:{enableExperimentalPublicKeyTypes:s,publicKeyFormat:S}});u.verificationMethod.push(P),u.keyAgreement=[P.id]}let A=[i];return XW({didDocument:u}).forEach(S=>{let P=BG[S];A.push(P)}),u["@context"]=A,u})}static createEncryptionMethod(e){return Qu(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:i}){let{enableExperimentalPublicKeyTypes:o,publicKeyFormat:s}=i,a={id:"",type:"",controller:""},{keyBytes:u,multicodecCode:m}=yield Cs.deriveEncryptionKey({multibaseValue:n}),p=u.byteLength,b=vo.MULTICODEC_PUBLIC_KEY_LENGTH[m];if(p!==b)throw new ft(ut.InvalidPublicKeyLength,`Expected ${p} bytes. Actual: ${b}`);let A=_I({keyBytes:u,multicodecCode:m});a.id=`${r}#${A}`;try{new URL(a.id)}catch{throw new ft(ut.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(s in BG))throw new ft(ut.UnsupportedPublicKeyType,`Unsupported format: ${s}`);if(o===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(s))throw new ft(ut.InvalidPublicKeyType,`Specified '${s}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=s,a.controller=r,s==="X25519KeyAgreementKey2020"&&(a.publicKeyMultibase=A),s==="JsonWebKey2020"){let{crv:S}=yield vo.multicodecToJwk({code:m});a.publicKeyJwk=yield vo.keyConverter(S).bytesToPublicKey({publicKeyBytes:u})}return a})}static createSignatureMethod(e){return Qu(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:i}){let{enableExperimentalPublicKeyTypes:o,publicKeyFormat:s}=i,a={id:"",type:"",controller:""},{keyBytes:u,multicodecCode:m,multicodecName:p}=xI({multibaseKeyId:n}),b=u.byteLength,A=vo.MULTICODEC_PUBLIC_KEY_LENGTH[m];if(b!==A)throw new ft(ut.InvalidPublicKeyLength,`Expected ${b} bytes. Actual: ${A}`);let M=!1;switch(p){case"secp256k1-pub":M=yield Mn.validatePublicKey({publicKeyBytes:u});break;case"ed25519-pub":M=yield Cn.validatePublicKey({publicKeyBytes:u});break;case"x25519-pub":M=!0;break}if(!M)throw new ft(ut.InvalidPublicKey,"Invalid public key detected.");a.id=`${r}#${n}`;try{new URL(a.id)}catch{throw new ft(ut.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(s in BG))throw new ft(ut.UnsupportedPublicKeyType,`Unsupported format: ${s}`);if(o===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(s))throw new ft(ut.InvalidPublicKeyType,`Specified '${s}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=s,a.controller=r,s==="Ed25519VerificationKey2020"&&(a.publicKeyMultibase=n),s==="JsonWebKey2020"){let{crv:P}=yield vo.multicodecToJwk({code:m});a.publicKeyJwk=yield vo.keyConverter(P).bytesToPublicKey({publicKeyBytes:u})}return a})}static deriveEncryptionKey(e){return Qu(this,arguments,void 0,function*({multibaseValue:r}){let n={keyBytes:new Uint8Array,multicodecCode:0},{keyBytes:i,multicodecCode:o}=xI({multibaseKeyId:r});if(o===237){let s=yield vo.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:i}),a=yield Cn.convertPublicKeyToX25519({publicKey:s});n={keyBytes:yield vo.keyConverter("Ed25519").publicKeyToBytes({publicKey:a}),multicodecCode:236}}return n})}static validateIdentifier(e){let{method:r,id:n}=e,[i]=e.uri.split(":",1);return i==="did"&&r==="key"&&Number("1")>0&&i6(n)==="String"&&n.startsWith("z")}};Cs.methodName="key";var vo=class{static jwkToMulticodec(e){return Qu(this,arguments,void 0,function*({jwk:r}){let n=[];r.crv&&(n.push(r.crv),r.d?n.push("private"):n.push("public"));let i=n.join(":"),o=vo.JWK_TO_MULTICODEC[i];if(o===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${i}'`);return{code:oi.getCodeFromName({name:o}),name:o}})}static keyCompressor(e){let n={"P-256":Dn.compressPublicKey,secp256k1:Mn.compressPublicKey}[e];if(!n)throw new ft(ut.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static keyConverter(e){let n={Ed25519:Cn,"P-256":Dn,secp256k1:Mn,X25519:Vu}[e];if(!n)throw new ft(ut.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static multicodecToJwk(e){return Qu(this,arguments,void 0,function*({code:r,name:n}){if(!(n?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");n=n===void 0?oi.getNameFromCode({code:r}):n;let i=n,o=vo.MULTICODEC_TO_JWK[i];if(o===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},o)})}static publicKeyToMultibaseId(e){return Qu(this,arguments,void 0,function*({publicKey:r}){var n;if(!(r?.crv&&r.crv in sbt))throw new ft(ut.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(n=r?.crv)!==null&&n!==void 0?n:"undefined"}`);let i=yield vo.keyConverter(r.crv).publicKeyToBytes({publicKey:r});/^(secp256k1|P-256|P-384|P-521)$/.test(r.crv)&&(i=yield vo.keyCompressor(r.crv)({publicKeyBytes:i}));let{name:o}=yield vo.jwkToMulticodec({jwk:r});return _I({keyBytes:i,multicodecName:o})})}};vo.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};vo.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};vo.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};_();var abt=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},B6=class extends Gf{static resolve(e,r){return abt(this,void 0,void 0,function*(){let n=ar.parse(e);if(!n)return Object.assign(Object.assign({},yi),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==B6.methodName)return Object.assign(Object.assign({},yi),{didResolutionMetadata:{error:"methodNotSupported"}});let i=`https://${n.id.replace(/:/g,"/")}`;i=decodeURIComponent(i);let o=n.id.includes(":")?`${i}/did.json`:`${i}/.well-known/did.json`;try{let s=yield fetch(o);if(!s.ok)throw new Error("HTTP error status code returned");let a=yield s.json();return Object.assign(Object.assign({},yi),{didDocument:a})}catch{return Object.assign(Object.assign({},yi),{didResolutionMetadata:{error:"notFound"}})}})}};B6.methodName="web";_();var S3e=Zt(_3e(),1),M3e=Zt(E3e(),1),hbt=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},HI=class{constructor({db:e,location:r="DATA/DID_RESOLVERCACHE",ttl:n="15m"}={}){this.cache=e??new M3e.Level(r),this.ttl=(0,S3e.default)(n)}get(e){return hbt(this,void 0,void 0,function*(){try{let r=yield this.cache.get(e),n=JSON.parse(r);if(Date.now()>=n.ttlMillis){this.cache.nextTick(()=>this.cache.del(e));return}else return n.value}catch(r){if(r.notFound)return;throw r}})}set(e,r){let n={ttlMillis:Date.now()+this.ttl,value:r},i=JSON.stringify(n);return this.cache.put(e,i)}delete(e){return this.cache.del(e)}clear(){return this.cache.clear()}close(){return this.cache.close()}};_();var A3e={get:function(t){return null},set:function(t,e){return null},delete:function(t){return null},clear:function(){return null},close:function(){return null}};_();var P3e=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{m(n.next(p))}catch(b){s(b)}}function u(p){try{m(n.throw(p))}catch(b){s(b)}}function m(p){p.done?o(p.value):i(p.value).then(a,u)}m((n=n.apply(t,e||[])).next())})},ZI=class{constructor({cache:e,didResolvers:r}){this.didResolvers=new Map,this.cache=e||A3e;for(let n of r)this.didResolvers.set(n.methodName,n)}resolve(e,r){return P3e(this,void 0,void 0,function*(){let n=ar.parse(e);if(!n)return Object.assign(Object.assign({},yi),{didResolutionMetadata:{error:ut.InvalidDid,errorMessage:`Invalid DID URI: ${e}`}});let i=this.didResolvers.get(n.method);if(!i)return Object.assign(Object.assign({},yi),{didResolutionMetadata:{error:ut.MethodNotSupported,errorMessage:`Method not supported: ${n.method}`}});let o=yield this.cache.get(n.uri);if(o)return o;{let s=yield i.resolve(n.uri,r);return s.didResolutionMetadata.error||(yield this.cache.set(n.uri,s)),s}})}dereference(e,r){return P3e(this,void 0,void 0,function*(){let n=ar.parse(e);if(!n)return{dereferencingMetadata:{error:ut.InvalidDidUrl},contentStream:null,contentMetadata:{}};let{didDocument:i,didResolutionMetadata:o,didDocumentMetadata:s}=yield this.resolve(n.uri);if(!i)return{dereferencingMetadata:{error:o.error},contentStream:null,contentMetadata:{}};if(!n.fragment||n.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:i,contentMetadata:s};let{service:a=[],verificationMethod:u=[]}=i,m=new Set([e,n.fragment,`#${n.fragment}`]),p;for(let b of u)if(m.has(b.id)){p=b;break}for(let b of a)if(m.has(b.id)){p=b;break}return p?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:p,contentMetadata:o}:{dereferencingMetadata:{error:ut.NotFound},contentStream:null,contentMetadata:{}}})}};var D6=class{constructor(e){this.didResolver=e.didResolver,this.tenantGate=e.tenantGate,this.eventStream=e.eventStream,this.messageStore=e.messageStore,this.dataStore=e.dataStore,this.resumableTaskStore=e.resumableTaskStore,this.eventLog=e.eventLog,this.eventStream=e.eventStream,this.storageController=new Bf({messageStore:this.messageStore,dataStore:this.dataStore,eventLog:this.eventLog,eventStream:this.eventStream}),this.resumableTaskManager=new l3(e.resumableTaskStore,this.storageController),this.methodHandlers={["Messages"+"Query"]:new K1(this.didResolver,this.messageStore,this.eventLog),["Messages"+"Read"]:new W1(this.didResolver,this.messageStore,this.dataStore),["Messages"+"Subscribe"]:new G1(this.didResolver,this.messageStore,this.eventStream),["Protocols"+"Configure"]:new o2(this.didResolver,this.messageStore,this.eventLog,this.eventStream),["Protocols"+"Query"]:new xT(this.didResolver,this.messageStore,this.dataStore),["Records"+"Delete"]:new a2(this.didResolver,this.messageStore,this.resumableTaskManager),["Records"+"Query"]:new Nu(this.didResolver,this.messageStore,this.dataStore),["Records"+"Read"]:new c2(this.didResolver,this.messageStore,this.dataStore),["Records"+"Subscribe"]:new Cc(this.didResolver,this.messageStore,this.eventStream),["Records"+"Write"]:new ld(this.didResolver,this.messageStore,this.dataStore,this.eventLog,this.eventStream)}}static async create(e){e.didResolver??=new ZI({didResolvers:[Dd,Nd,Cs],cache:new HI({location:"RESOLVERCACHE"})}),e.tenantGate??=new BS;let r=new D6(e);return await r.open(),r}async open(){await this.messageStore.open(),await this.dataStore.open(),await this.resumableTaskStore.open(),await this.eventLog.open(),await this.eventStream?.open(),await this.resumableTaskManager.resumeTasksAndWaitForCompletion()}async close(){await this.eventStream?.close(),await this.messageStore.close(),await this.dataStore.close(),await this.resumableTaskStore.close(),await this.eventLog.close()}async processMessage(e,r,n={}){let i=await this.validateTenant(e)??await this.validateMessageIntegrity(r);if(i!==void 0)return i;let{dataStream:o,subscriptionHandler:s}=n,a=r.descriptor.interface+r.descriptor.method;return await this.methodHandlers[a].handle({tenant:e,message:r,dataStream:o,subscriptionHandler:s})}async validateTenant(e){let r=await this.tenantGate.isActiveTenant(e);if(!r.isActiveTenant)return{status:{code:401,detail:r.detail??`DID ${e} is not an active tenant.`}}}async validateMessageIntegrity(e){let r=e?.descriptor?.interface,n=e?.descriptor?.method;if(r===void 0||n===void 0)return{status:{code:400,detail:`Both interface and method must be present, interface: ${r}, method: ${n}`}};try{Ue.validateJsonSchema(e)}catch(i){return gr(i,400)}}};_();function pbt(t){return new Promise((e,r)=>{if(t.aborted){r(t.reason);return}t.addEventListener("abort",()=>{r(t.reason)})})}async function wo(t,e){return e?Promise.race([t,pbt(e)]):t}_();_();_();var DG=class{static async deriveAndInjectPublicEncryptionKeys(e,r,n){let i=JSON.parse(JSON.stringify(e));async function o(u,m){for(let p in u)if(!p.startsWith("$")){let b=await Ea.derivePrivateKey(m,[p]),A=await fn.getPublicJwk(b.derivedPrivateKey);u[p].$encryption={rootKeyId:r,publicKeyJwk:A},await o(u[p],b)}}let s={derivationScheme:"protocolPath",derivedPrivateKey:n,rootKeyId:r},a=await Ea.derivePrivateKey(s,["protocolPath",e.protocol]);return await o(i.structure,a),i}};_();_();_();_();var T3e=Zt(GK(),1);async function zc(t,e){return new T3e.Level(t,{...e,keyEncoding:"utf8"})}var Xu=class{constructor(e,r){this.config={createLevelDatabase:zc,...e},this.db=r}async open(){switch(await this.createLevelDatabase(),this.db.status){case"open":return;case"opening":return new Promise(e=>{this.db.once("open",e)});case"closing":return new Promise((e,r)=>{let n=()=>{this.db.open().then(e).catch(r)};this.db.once("closed",n)});case"closed":return this.db.open()}}async close(){if(this.db)switch(this.db.status){case"open":return this.db.close();case"opening":return new Promise((e,r)=>{let n=()=>{this.db.close().then(e).catch(r)};this.db.once("open",n)});case"closing":return new Promise(e=>{this.db.once("closed",e)});case"closed":return}}async partition(e){return await this.createLevelDatabase(),new Xu(this.config,this.db.sublevel(e,{keyEncoding:"utf8",valueEncoding:this.config.valueEncoding}))}async get(e,r){r?.signal?.throwIfAborted(),await wo(this.createLevelDatabase(),r?.signal);try{return await wo(this.db.get(String(e)),r?.signal)}catch(n){if(n.code==="LEVEL_NOT_FOUND")return;throw n}}async has(e,r){return!!await this.get(e,r)}async*keys(e){e?.signal?.throwIfAborted(),await wo(this.createLevelDatabase(),e?.signal);for await(let r of this.db.keys())e?.signal?.throwIfAborted(),yield r}async*iterator(e,r){r?.signal?.throwIfAborted(),await wo(this.createLevelDatabase(),r?.signal);for await(let n of this.db.iterator(e))r?.signal?.throwIfAborted(),yield n}async put(e,r,n){return n?.signal?.throwIfAborted(),await wo(this.createLevelDatabase(),n?.signal),wo(this.db.put(String(e),r),n?.signal)}async delete(e,r){return r?.signal?.throwIfAborted(),await wo(this.createLevelDatabase(),r?.signal),wo(this.db.del(String(e)),r?.signal)}async isEmpty(e){for await(let r of this.keys(e))return!1;return!0}async clear(){await this.createLevelDatabase(),await this.db.clear(),await this.compactUnderlyingStorage()}async batch(e,r){return r?.signal?.throwIfAborted(),await wo(this.createLevelDatabase(),r?.signal),wo(this.db.batch(e),r?.signal)}createPartitionOperation(e,r){return{...r,sublevel:this.db.sublevel(e,{keyEncoding:"utf8",valueEncoding:this.config.valueEncoding})}}async compactUnderlyingStorage(e){e?.signal?.throwIfAborted(),await wo(this.createLevelDatabase(),e?.signal);let r=this.sublevelRange;if(!r)return;let n=this.root;if(n.db.supports.additionalMethods.compactRange)return wo(n.db.compactRange?.(...r),e?.signal)}get sublevelRange(){let e=this.db.prefix;if(!e)return;let r=e.slice(0,-1)+String.fromCharCode(e.charCodeAt(e.length-1)+1);return[e,r]}get root(){let e=this.db;for(let r=e.db;r&&r!==e;)e=r;return new Xu(this.config,e)}async createLevelDatabase(){this.db??=await this.config.createLevelDatabase(this.config.location,{keyEncoding:"utf8",valueEncoding:this.config.valueEncoding})}};var Om=class{constructor(e,r){this.config={createLevelDatabase:zc,...e},this.db=r??new Xu({...this.config,valueEncoding:"binary"})}async open(){return this.db.open()}async close(){return this.db.close()}async partition(e){let r=await this.db.partition(e);return new Om({...this.config,location:""},r)}async put(e,r,n){return await this.db.put(String(e),r,n),Mt.parse(e.toString())}async get(e,r){return await this.db.get(String(e),r)}async has(e,r){return this.db.has(String(e),r)}async delete(e,r){return this.db.delete(String(e),r)}async isEmpty(e){return this.db.isEmpty(e)}async*putMany(e,r){for await(let n of e)await this.put(n.cid,n.block,r),yield n.cid}async*getMany(e,r){for await(let n of e)yield{cid:n,block:await this.get(n,r)}}async*getAll(e){let r=this.db.iterator({keys:!0,keyEncoding:"buffer"},e);for await(let[n,i]of r)yield{cid:Mt.decode(n),block:i}}async*deleteMany(e,r){for await(let n of e)await this.delete(n,r),yield n}async clear(){return this.db.clear()}};_();var ck=Zt(vc(),1);_();function mbt(t){return t[Symbol.asyncIterator]!=null}function ybt(t){if(mbt(t))return(async()=>{let r;for await(let n of t)r=n;return r})();let e;for(let r of t)e=r;return e}var R3e=ybt;_();var c6e=Zt(vc(),1);_();var I3e=0,gbt="identity",k3e=Vf,bbt=t=>zm(I3e,k3e(t)),O3e={code:I3e,name:gbt,encode:k3e,digest:bbt};_();var B3e=Zt(vc(),1);var vbt=async(t,e,r,n,i,o,s,a)=>{let u=await s.get(t,a),m=o9(u),p=m,b=r;for(;n.length>0;){let A=n[0];if(A in p){n.shift(),b=`${b}/${A}`;let M=Mt.asCID(p[A]);if(M!=null)return{entry:{type:"object",name:e,path:r,cid:t,node:u,depth:o,size:BigInt(u.length),content:async function*(){yield m}},next:{cid:M,name:A,path:b,toResolve:n}};p=p[A]}else throw(0,B3e.default)(new Error(`No property named ${A} found in cbor node ${t}`),"ERR_NO_PROP")}return{entry:{type:"object",name:e,path:r,cid:t,node:u,depth:o,size:BigInt(u.length),content:async function*(){yield m}}}},D3e=vbt;_();var C3e=Zt(vc(),1);_();function wbt(t,e,r,n){let i=BigInt(t.length),o=BigInt(e+i);return r>=o||n<e?new Uint8Array(0):(n>=e&&n<o&&(t=t.subarray(0,Number(n-e))),r>=e&&r<o&&(t=t.subarray(Number(r-e))),t)}var Fb=wbt;_();var C6=Zt(vc(),1),_bt=(t,e=0,r=t)=>{let n=BigInt(t),i=BigInt(e??0),o=BigInt(r);if(o!==n&&(o=i+o),o>n&&(o=n),i<0n)throw(0,C6.default)(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(i>n)throw(0,C6.default)(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(o<0n)throw(0,C6.default)(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(o>n)throw(0,C6.default)(new Error("Length must be less than the file size"),"ERR_INVALID_PARAMS");return{start:i,end:o}},i_=_bt;var xbt=t=>{async function*e(r={}){let{start:n,end:i}=i_(t.length,r.offset,r.length),o=Fb(t,0n,n,i);r.onProgress?.(new Ti("unixfs:exporter:progress:identity",{bytesRead:BigInt(o.byteLength),totalBytes:i-n,fileSize:BigInt(t.byteLength)})),yield o}return e},Ebt=async(t,e,r,n,i,o,s,a)=>{if(n.length>0)throw(0,C3e.default)(new Error(`No link named ${r} found in raw node ${t}`),"ERR_NOT_FOUND");let u=dM(t.multihash.bytes);return{entry:{type:"identity",name:e,path:r,cid:t,content:xbt(u.digest),depth:o,size:BigInt(u.digest.length),node:u.digest}}},N3e=Ebt;_();var j3e=Zt(vc(),1);var Sbt=t=>{async function*e(r={}){let{start:n,end:i}=i_(t.length,r.offset,r.length),o=Fb(t,0n,n,i);r.onProgress?.(new Ti("unixfs:exporter:progress:raw",{bytesRead:BigInt(o.byteLength),totalBytes:i-n,fileSize:BigInt(t.byteLength)})),yield o}return e},Mbt=async(t,e,r,n,i,o,s,a)=>{if(n.length>0)throw(0,j3e.default)(new Error(`No link named ${r} found in raw node ${t}`),"ERR_NOT_FOUND");let u=await s.get(t,a);return{entry:{type:"raw",name:e,path:r,cid:t,content:Sbt(u),depth:o,size:BigInt(u.length),node:u}}},q3e=Mbt;_();var W6=Zt(vc(),1);_();var Abt=async function(t){return(await JM.encode(t)).slice(0,8).reverse()},Pbt=async(t,e,r)=>{await Promise.all(t.map(async n=>{if(n.Name==null)throw new Error("Unexpected Link without a Name");if(n.Name.length===2){let i=parseInt(n.Name,16);e._putObjectAt(i,new zo({hash:r._options.hash,bits:r._options.bits},e,i));return}await r.put(n.Name.substring(2),!0)}))},$3e=t=>t.toString(16).toUpperCase().padStart(2,"0").substring(0,2),Tbt=t=>{let e=t.bucket,r=[];for(;e._parent!=null;)r.push(e),e=e._parent;return r.push(e),r.reverse()},L3e=async(t,e,r,n,i)=>{if(n==null){let p=t8({hashFn:Abt});n={rootBucket:p,hamtDepth:1,lastBucket:p}}await Pbt(t.Links,n.lastBucket,n.rootBucket);let o=await n.rootBucket._findNewBucketAndPos(e),s=$3e(o.pos),a=Tbt(o);a.length>n.hamtDepth&&(n.lastBucket=a[n.hamtDepth],s=$3e(n.lastBucket._posAtParent));let u=t.Links.find(p=>{if(p.Name==null)return!1;let b=p.Name.substring(0,2),A=p.Name.substring(2);return!(b!==s||A!==""&&A!==e)});if(u==null)return;if(u.Name!=null&&u.Name.substring(2)===e)return u.Hash;n.hamtDepth++;let m=await r.get(u.Hash,i);return t=rh(m),L3e(t,e,r,n,i)},U3e=L3e;_();_();_();function Rbt(t){let[e,r]=t[Symbol.asyncIterator]!=null?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:i=>{n.push(i)},next:()=>n.length>0?{done:!1,value:n.shift()}:e.next(),[r](){return this}}}var JI=Rbt;function Ibt(t){return t[Symbol.asyncIterator]!=null}function kbt(t,e){if(Ibt(t))return async function*(){for await(let a of t)await e(a)&&(yield a)}();let r=JI(t),{value:n,done:i}=r.next();if(i===!0)return function*(){}();let o=e(n);if(typeof o.then=="function")return async function*(){await o&&(yield n);for await(let a of r)await e(a)&&(yield a)}();let s=e;return function*(){o===!0&&(yield n);for(let a of r)s(a)&&(yield a)}()}var F3e=kbt;_();function Obt(t){return t[Symbol.asyncIterator]!=null}function Bbt(t,e){if(Obt(t))return async function*(){for await(let a of t)yield e(a)}();let r=JI(t),{value:n,done:i}=r.next();if(i===!0)return function*(){}();let o=e(n);if(typeof o.then=="function")return async function*(){yield await o;for await(let a of r)yield e(a)}();let s=e;return function*(){yield o;for(let a of r)yield s(a)}()}var o_=Bbt;_();_();function wp(){let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}var YI=globalThis.CustomEvent??Event;async function*zb(t,e={}){let r=e.concurrency??1/0;r<1&&(r=1/0);let n=e.ordered==null?!1:e.ordered,i=new EventTarget,o=[],s=wp(),a=wp(),u=!1,m,p=!1;i.addEventListener("task-complete",()=>{a.resolve()}),Promise.resolve().then(async()=>{try{for await(let S of t){if(o.length===r&&(s=wp(),await s.promise),p)break;let P={done:!1};o.push(P),S().then(k=>{P.done=!0,P.ok=!0,P.value=k,i.dispatchEvent(new YI("task-complete"))},k=>{P.done=!0,P.err=k,i.dispatchEvent(new YI("task-complete"))})}u=!0,i.dispatchEvent(new YI("task-complete"))}catch(S){m=S,i.dispatchEvent(new YI("task-complete"))}});function b(){return n?o[0]?.done:Boolean(o.find(S=>S.done))}function*A(){for(;o.length>0&&o[0].done;){let S=o[0];if(o.shift(),S.ok)yield S.value;else throw p=!0,s.resolve(),S.err;s.resolve()}}function*M(){for(;b();)for(let S=0;S<o.length;S++)if(o[S].done){let P=o[S];if(o.splice(S,1),S--,P.ok)yield P.value;else throw p=!0,s.resolve(),P.err;s.resolve()}}for(;;){if(b()||(a=wp(),await a.promise),m!=null)throw m;if(n?yield*A():yield*M(),u&&o.length===0)break}}_();_();_();var QI=class{buffer;mask;top;btm;next;constructor(e){if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},s_=class{size;hwm;head;tail;constructor(e={}){this.hwm=e.splitLimit??16,this.head=new QI(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let r=this.head;this.head=r.next=new QI(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let r=this.tail.next;this.tail.next=null,this.tail=r,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};var CG=class extends Error{type;code;constructor(e,r){super(e??"The operation was aborted"),this.type="aborted",this.code=r??"ABORT_ERR"}};function a_(t={}){return Dbt(r=>{let n=r.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},t)}function Dbt(t,e){e=e??{};let r=e.onEnd,n=new s_,i,o,s,a=wp(),u=async()=>{try{return n.isEmpty()?s?{done:!0}:await new Promise((k,R)=>{o=B=>{o=null,n.push(B);try{k(t(n))}catch(I){R(I)}return i}}):t(n)}finally{n.isEmpty()&&queueMicrotask(()=>{a.resolve(),a=wp()})}},m=k=>o!=null?o(k):(n.push(k),i),p=k=>(n=new s_,o!=null?o({error:k}):(n.push({error:k}),i)),b=k=>{if(s)return i;if(e?.objectMode!==!0&&k?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return m({done:!1,value:k})},A=k=>s?i:(s=!0,k!=null?p(k):m({done:!0})),M=()=>(n=new s_,A(),{done:!0}),S=k=>(A(k),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:u,return:M,throw:S,push:b,end:A,get readableLength(){return n.size},onEmpty:async k=>{let R=k?.signal;if(R?.throwIfAborted(),n.isEmpty())return;let B,I;R!=null&&(B=new Promise((q,$)=>{I=()=>{$(new CG)},R.addEventListener("abort",I)}));try{await Promise.race([a.promise,B])}finally{I!=null&&R!=null&&R?.removeEventListener("abort",I)}}},r==null)return i;let P=i;return i={[Symbol.asyncIterator](){return this},next(){return P.next()},throw(k){return P.throw(k),r!=null&&(r(k),r=void 0),{done:!0}},return(){return P.return(),r!=null&&(r(),r=void 0),{done:!0}},push:b,end(k){return P.end(k),r!=null&&(r(k),r=void 0),i},get readableLength(){return P.readableLength}},i}_();function Cbt(t){return t[Symbol.asyncIterator]!=null}function Nbt(...t){let e=[];for(let r of t)Cbt(r)||e.push(r);return e.length===t.length?function*(){for(let r of e)yield*r}():async function*(){let r=a_({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(t.map(async n=>{for await(let i of n)r.push(i)})),r.end()}catch(n){r.end(n)}}),yield*r}()}var z3e=Nbt;function c_(t,...e){if(t==null)throw new Error("Empty pipeline");if(NG(t)){let n=t;t=()=>n.source}else if(W3e(t)||K3e(t)){let n=t;t=()=>n}let r=[t,...e];if(r.length>1&&NG(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)NG(r[n])&&(r[n]=qbt(r[n]));return jbt(...r)}var jbt=(...t)=>{let e;for(;t.length>0;)e=t.shift()(e);return e},K3e=t=>t?.[Symbol.asyncIterator]!=null,W3e=t=>t?.[Symbol.iterator]!=null,NG=t=>t==null?!1:t.sink!=null&&t.source!=null,qbt=t=>e=>{let r=t.sink(e);if(r?.then!=null){let n=a_({objectMode:!0});r.then(()=>{n.end()},s=>{n.end(s)});let i,o=t.source;if(K3e(o))i=async function*(){yield*o,n.end()};else if(W3e(o))i=function*(){yield*o,n.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return z3e(n,i())}return t.source};var $bt=(t,e,r,n,i,o,s)=>{async function*a(u={}){let m=u.offset??0,p=u.length??e.Links.length,b=e.Links.slice(m,p);u.onProgress?.(new Ti("unixfs:exporter:walk:directory",{cid:t})),yield*c_(b,A=>o_(A,M=>async()=>{let S=M.Name??"",P=`${n}/${S}`;return(await i(M.Hash,S,P,[],o+1,s,u)).entry}),A=>zb(A,{ordered:!0}),A=>F3e(A,M=>M!=null))}return a},G3e=$bt;_();var Wb=Zt(vc(),1);_();var n6e=Zt(H3e(),1);_();var j6=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},qG=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},Z3e=t=>globalThis.DOMException===void 0?new qG(t):new DOMException(t),J3e=t=>{let e=t.reason===void 0?Z3e("This operation was aborted."):t.reason;return e instanceof Error?e:Z3e(e)};function $G(t,e,r,n){let i,o=new Promise((s,a)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){s(t);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:u}=n;u.aborted&&a(J3e(u)),u.addEventListener("abort",()=>{a(J3e(u))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{s(r())}catch(p){a(p)}return}let u=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,m=r instanceof Error?r:new j6(u);typeof t.cancel=="function"&&t.cancel(),a(m)},e),(async()=>{try{s(await t)}catch(u){a(u)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return o.clear=()=>{clearTimeout(i),i=void 0},o}_();_();function LG(t,e,r){let n=0,i=t.length;for(;i>0;){let o=Math.trunc(i/2),s=n+o;r(t[s],e)<=0?(n=++s,i-=o+1):i=o}return n}var Kb=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},_p,q6=class{constructor(){_p.set(this,[])}enqueue(e,r){r={priority:0,...r};let n={priority:r.priority,run:e};if(this.size&&Kb(this,_p,"f")[this.size-1].priority>=r.priority){Kb(this,_p,"f").push(n);return}let i=LG(Kb(this,_p,"f"),n,(o,s)=>s.priority-o.priority);Kb(this,_p,"f").splice(i,0,n)}dequeue(){let e=Kb(this,_p,"f").shift();return e?.run}filter(e){return Kb(this,_p,"f").filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return Kb(this,_p,"f").length}};_p=new WeakMap;var wi=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},dt=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},no,L6,U6,Dm,ok,F6,ek,el,$6,Kc,tk,Wc,z6,Bm,rk,Y3e,Q3e,t6e,X3e,e6e,nk,UG,FG,sk,r6e,ik,ak=class extends Error{},K6=class extends n6e.default{constructor(e){var r,n,i,o;if(super(),no.add(this),L6.set(this,void 0),U6.set(this,void 0),Dm.set(this,0),ok.set(this,void 0),F6.set(this,void 0),ek.set(this,0),el.set(this,void 0),$6.set(this,void 0),Kc.set(this,void 0),tk.set(this,void 0),Wc.set(this,0),z6.set(this,void 0),Bm.set(this,void 0),rk.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:q6,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);wi(this,L6,e.carryoverConcurrencyCount,"f"),wi(this,U6,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),wi(this,ok,e.intervalCap,"f"),wi(this,F6,e.interval,"f"),wi(this,Kc,new e.queueClass,"f"),wi(this,tk,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,wi(this,rk,e.throwOnTimeout===!0,"f"),wi(this,Bm,e.autoStart===!1,"f")}get concurrency(){return dt(this,z6,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);wi(this,z6,e,"f"),dt(this,no,"m",sk).call(this)}async add(e,r={}){return r={timeout:this.timeout,throwOnTimeout:dt(this,rk,"f"),...r},new Promise((n,i)=>{dt(this,Kc,"f").enqueue(async()=>{var o,s,a;wi(this,Wc,(s=dt(this,Wc,"f"),s++,s),"f"),wi(this,Dm,(a=dt(this,Dm,"f"),a++,a),"f");try{if(!((o=r.signal)===null||o===void 0)&&o.aborted)throw new ak("The task was aborted.");let u=e({signal:r.signal});r.timeout&&(u=$G(Promise.resolve(u),r.timeout)),r.signal&&(u=Promise.race([u,dt(this,no,"m",r6e).call(this,r.signal)]));let m=await u;n(m),this.emit("completed",m)}catch(u){if(u instanceof j6&&!r.throwOnTimeout){n();return}i(u),this.emit("error",u)}finally{dt(this,no,"m",t6e).call(this)}},r),this.emit("add"),dt(this,no,"m",nk).call(this)})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return dt(this,Bm,"f")?(wi(this,Bm,!1,"f"),dt(this,no,"m",sk).call(this),this):this}pause(){wi(this,Bm,!0,"f")}clear(){wi(this,Kc,new(dt(this,tk,"f")),"f")}async onEmpty(){dt(this,Kc,"f").size!==0&&await dt(this,no,"m",ik).call(this,"empty")}async onSizeLessThan(e){dt(this,Kc,"f").size<e||await dt(this,no,"m",ik).call(this,"next",()=>dt(this,Kc,"f").size<e)}async onIdle(){dt(this,Wc,"f")===0&&dt(this,Kc,"f").size===0||await dt(this,no,"m",ik).call(this,"idle")}get size(){return dt(this,Kc,"f").size}sizeBy(e){return dt(this,Kc,"f").filter(e).length}get pending(){return dt(this,Wc,"f")}get isPaused(){return dt(this,Bm,"f")}};L6=new WeakMap,U6=new WeakMap,Dm=new WeakMap,ok=new WeakMap,F6=new WeakMap,ek=new WeakMap,el=new WeakMap,$6=new WeakMap,Kc=new WeakMap,tk=new WeakMap,Wc=new WeakMap,z6=new WeakMap,Bm=new WeakMap,rk=new WeakMap,no=new WeakSet,Y3e=function(){return dt(this,U6,"f")||dt(this,Dm,"f")<dt(this,ok,"f")},Q3e=function(){return dt(this,Wc,"f")<dt(this,z6,"f")},t6e=function(){var e;wi(this,Wc,(e=dt(this,Wc,"f"),e--,e),"f"),dt(this,no,"m",nk).call(this),this.emit("next")},X3e=function(){dt(this,no,"m",FG).call(this),dt(this,no,"m",UG).call(this),wi(this,$6,void 0,"f")},e6e=function(){let e=Date.now();if(dt(this,el,"f")===void 0){let r=dt(this,ek,"f")-e;if(r<0)wi(this,Dm,dt(this,L6,"f")?dt(this,Wc,"f"):0,"f");else return dt(this,$6,"f")===void 0&&wi(this,$6,setTimeout(()=>{dt(this,no,"m",X3e).call(this)},r),"f"),!0}return!1},nk=function(){if(dt(this,Kc,"f").size===0)return dt(this,el,"f")&&clearInterval(dt(this,el,"f")),wi(this,el,void 0,"f"),this.emit("empty"),dt(this,Wc,"f")===0&&this.emit("idle"),!1;if(!dt(this,Bm,"f")){let e=!dt(this,no,"a",e6e);if(dt(this,no,"a",Y3e)&&dt(this,no,"a",Q3e)){let r=dt(this,Kc,"f").dequeue();return r?(this.emit("active"),r(),e&&dt(this,no,"m",UG).call(this),!0):!1}}return!1},UG=function(){dt(this,U6,"f")||dt(this,el,"f")!==void 0||(wi(this,el,setInterval(()=>{dt(this,no,"m",FG).call(this)},dt(this,F6,"f")),"f"),wi(this,ek,Date.now()+dt(this,F6,"f"),"f"))},FG=function(){dt(this,Dm,"f")===0&&dt(this,Wc,"f")===0&&dt(this,el,"f")&&(clearInterval(dt(this,el,"f")),wi(this,el,void 0,"f")),wi(this,Dm,dt(this,L6,"f")?dt(this,Wc,"f"):0,"f"),dt(this,no,"m",sk).call(this)},sk=function(){for(;dt(this,no,"m",nk).call(this););},r6e=async function(e){return new Promise((r,n)=>{e.addEventListener("abort",()=>{n(new ak("The task was aborted."))},{once:!0})})},ik=async function(e,r){return new Promise(n=>{let i=()=>{r&&!r()||(this.off(e,i),n())};this.on(e,i)})};async function i6e(t,e,r,n,i,o,s){if(e instanceof Uint8Array){let m=Fb(e,n,i,o);r.push(m);return}if(e.Data==null)throw(0,Wb.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let a;try{a=ao.unmarshal(e.Data)}catch(m){throw(0,Wb.default)(m,"ERR_NOT_UNIXFS")}if(a.data!=null){let m=a.data,p=Fb(m,n,i,o);r.push(p),n+=BigInt(p.byteLength)}let u=[];if(e.Links.length!==a.blockSizes.length)throw(0,Wb.default)(new Error("Inconsistent block sizes and dag links"),"ERR_NOT_UNIXFS");for(let m=0;m<e.Links.length;m++){let p=e.Links[m],b=n,A=b+a.blockSizes[m];if((i>=b&&i<A||o>=b&&o<=A||i<b&&o>A)&&u.push({link:p,blockStart:n}),n=A,n>o)break}await c_(u,m=>o_(m,p=>async()=>{let b=await t.get(p.link.Hash,s);return{...p,block:b}}),m=>zb(m,{ordered:!0}),async m=>{for await(let{link:p,block:b,blockStart:A}of m){let M;switch(p.Hash.code){case sx:M=rh(b);break;case Kp:M=b;break;default:r.end((0,Wb.default)(new Error(`Unsupported codec: ${p.Hash.code}`),"ERR_NOT_UNIXFS"));return}let S=new K6({concurrency:1});S.on("error",P=>{r.end(P)}),S.add(async()=>{s.onProgress?.(new Ti("unixfs:exporter:walk:file",{cid:p.Hash})),await i6e(t,M,r,A,i,o,s)}),await S.onIdle()}}),n>=o&&r.end()}var Fbt=(t,e,r,n,i,o,s)=>{async function*a(u={}){let m=r.fileSize();if(m===void 0)throw new Error("File was a directory");let{start:p,end:b}=i_(m,u.offset,u.length);if(b===0n)return;let A=0n,M=b-p,S=a_();u.onProgress?.(new Ti("unixfs:exporter:walk:file",{cid:t})),i6e(s,e,S,0n,p,b,u).catch(P=>{S.end(P)});for await(let P of S)if(P!=null){if(A+=BigInt(P.byteLength),A>M)throw S.end(),(0,Wb.default)(new Error("Read too many bytes - the file size reported by the UnixFS data in the root node may be incorrect"),"ERR_OVER_READ");A===M&&S.end(),u.onProgress?.(new Ti("unixfs:exporter:progress:unixfs:file",{bytesRead:A,totalBytes:M,fileSize:m})),yield P}if(A<M)throw(0,Wb.default)(new Error("Traversed entire DAG but did not read enough bytes"),"ERR_UNDER_READ")}return a},zG=Fbt;_();var zbt=(t,e,r,n,i,o,s)=>{function a(u={}){return u.onProgress?.(new Ti("unixfs:exporter:walk:hamt-sharded-directory",{cid:t})),o6e(e,n,i,o,s,u)}return a};async function*o6e(t,e,r,n,i,o){let s=t.Links,a=c_(s,u=>o_(u,m=>async()=>{let p=m.Name!=null?m.Name.substring(2):null;if(p!=null&&p!==""){let b=await r(m.Hash,p,`${e}/${p}`,[],n+1,i,o);return{entries:b.entry==null?[]:[b.entry]}}else{let b=await i.get(m.Hash,o);return t=rh(b),o.onProgress?.(new Ti("unixfs:exporter:walk:hamt-sharded-directory",{cid:m.Hash})),{entries:o6e(t,e,r,n,i,o)}}}),u=>zb(u,{ordered:!0}));for await(let{entries:u}of a)yield*u}var s6e=zbt;var Kbt=(t,e)=>t.Links.find(n=>n.Name===e)?.Hash,Wbt={raw:zG,file:zG,directory:G3e,"hamt-sharded-directory":s6e,metadata:(t,e,r,n,i,o,s)=>()=>[],symlink:(t,e,r,n,i,o,s)=>()=>[]},Gbt=async(t,e,r,n,i,o,s,a)=>{let u=await s.get(t,a),m=rh(u),p,b;if(e==null&&(e=t.toString()),m.Data==null)throw(0,W6.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{p=ao.unmarshal(m.Data)}catch(M){throw(0,W6.default)(M,"ERR_NOT_UNIXFS")}if(r==null&&(r=e),n.length>0){let M;if(p?.type==="hamt-sharded-directory"?M=await U3e(m,n[0],s):M=Kbt(m,n[0]),M==null)throw(0,W6.default)(new Error("file does not exist"),"ERR_NOT_FOUND");let S=n.shift(),P=`${r}/${S}`;b={cid:M,toResolve:n,name:S??"",path:P}}let A=Wbt[p.type](t,m,p,r,i,o,s);if(A==null)throw(0,W6.default)(new Error("could not find content exporter"),"ERR_NOT_FOUND");return p.isDirectory()?{entry:{type:"directory",name:e,path:r,cid:t,content:A,unixfs:p,depth:o,node:m,size:p.fileSize()},next:b}:{entry:{type:"file",name:e,path:r,cid:t,content:A,unixfs:p,depth:o,node:m,size:p.fileSize()},next:b}},a6e=Gbt;var Vbt={[sx]:a6e,[Kp]:q3e,[Up]:D3e,[O3e.code]:N3e},f6e=async(t,e,r,n,i,o,s)=>{let a=Vbt[t.code];if(a==null)throw(0,c6e.default)(new Error(`No resolver for code ${t.code}`),"ERR_NO_RESOLVER");return a(t,e,r,n,f6e,i,o,s)},u6e=f6e;var Hbt=(t="")=>(t.trim().match(/([^\\^/]|\\\/)+/g)??[]).filter(Boolean),Zbt=t=>{if(t instanceof Uint8Array)return{cid:Mt.decode(t),toResolve:[]};let e=Mt.asCID(t);if(e!=null)return{cid:e,toResolve:[]};if(typeof t=="string"){t.indexOf("/ipfs/")===0&&(t=t.substring(6));let r=Hbt(t);return{cid:Mt.parse(r[0]),toResolve:r.slice(1)}}throw(0,ck.default)(new Error(`Unknown path type ${t}`),"ERR_BAD_PATH")};async function*Jbt(t,e,r={}){let{cid:n,toResolve:i}=Zbt(t),o=n.toString(),s=o,a=i.length;for(;;){let u=await u6e(n,o,s,i,a,e,r);if(u.entry==null&&u.next==null)throw(0,ck.default)(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");if(u.entry!=null&&(yield u.entry),u.next==null)return;i=u.next.toResolve,n=u.next.cid,o=u.next.name,s=u.next.path}}async function l6e(t,e,r={}){let n=await R3e(Jbt(t,e,r));if(n==null)throw(0,ck.default)(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");return n}var d6e=Zt(rP(),1),KG=class{constructor(e={}){this.config={blockstoreLocation:"DATASTORE",createLevelDatabase:zc,...e},this.blockstore=new Om({location:this.config.blockstoreLocation,createLevelDatabase:this.config.createLevelDatabase})}async open(){await this.blockstore.open()}async close(){await this.blockstore.close()}async put(e,r,n,i){let o=await this.getBlockstoreForStoringData(e,r,n),s=Rx([{content:i}],o,{cidVersion:1}),a;for await(a of s);return{dataSize:Number(a.unixfs?.fileSize()??a.size)}}async get(e,r,n){let i=await this.getBlockstoreForStoringData(e,r,n);if(!await i.has(n))return;let s=await l6e(n,i),a=s.content(),u=new d6e.Readable({async read(){let p=await a.next();p.done?this.push(null):this.push(p.value)}}),m=s.size;return(s.type==="file"||s.type==="directory")&&(m=s.unixfs.fileSize()),{dataSize:Number(m),dataStream:u}}async delete(e,r,n){await(await this.getBlockstoreForStoringData(e,r,n)).clear()}async clear(){await this.blockstore.clear()}async getBlockstoreForStoringData(e,r,n){let i="data";return await(await(await(await this.blockstore.partition(i)).partition(e)).partition(r)).partition(n)}};_();_();var h6e="index",Li=class{constructor(e){this.config={createLevelDatabase:zc,...e},this.db=new Xu({location:this.config.location,createLevelDatabase:this.config.createLevelDatabase,keyEncoding:"utf8"})}async open(){await this.db.open()}async close(){await this.db.close()}async clear(){await this.db.clear()}async put(e,r,n,i){if(aS(n))throw new be("IndexMissingIndexableProperty","Index must include at least one valid indexable property");let o={messageCid:r,indexes:n},s=[];for(let p in n){let b=n[p];if(Array.isArray(b))for(let A of b){let M=this.createPutIndexedItemOperation(e,o,p,A);s.push(M)}else{let A=this.createPutIndexedItemOperation(e,o,p,b);s.push(A)}}let a=this.createOperationForIndexesLookupPartition(e,{type:"put",key:r,value:JSON.stringify(n)});s.push(a);let u=await Promise.all(s);await(await this.db.partition(e)).batch(u,i)}async delete(e,r,n){let i=[],o=await this.getIndexes(e,r);if(o===void 0)return;let s=this.createOperationForIndexesLookupPartition(e,{type:"del",key:r});i.push(s);for(let m in o){let p=o[m];if(Array.isArray(p))for(let b of p){let A=this.createDeleteIndexedItemOperation(e,r,m,b);i.push(A)}else{let b=this.createDeleteIndexedItemOperation(e,r,m,p);i.push(b)}}let a=await Promise.all(i);await(await this.db.partition(e)).batch(a,n)}async createPutIndexedItemOperation(e,r,n,i){let{messageCid:o}=r,s=Li.keySegmentJoin(Li.encodeValue(i),o);return this.createOperationForIndexPartition(e,n,{type:"put",key:s,value:JSON.stringify(r)})}async createDeleteIndexedItemOperation(e,r,n,i){let o=Li.keySegmentJoin(Li.encodeValue(i),r);return this.createOperationForIndexPartition(e,n,{type:"del",key:o})}async createOperationForIndexPartition(e,r,n){let i=await this.db.partition(e),o=Li.getIndexPartitionName(r);return i.createPartitionOperation(o,n)}async createOperationForIndexesLookupPartition(e,r){return(await this.db.partition(e)).createPartitionOperation(h6e,r)}static getIndexPartitionName(e){return`__${e}__`}async getIndexPartition(e,r){let n=Li.getIndexPartitionName(r);return(await this.db.partition(e)).partition(n)}async getIndexesLookupPartition(e){return(await this.db.partition(e)).partition(h6e)}async query(e,r,n,i){return Li.shouldQueryWithInMemoryPaging(r,n)?this.queryWithInMemoryPaging(e,r,n,i):this.queryWithIteratorPaging(e,r,n,i)}async queryWithIteratorPaging(e,r,n,i){let{cursor:o,limit:s}=n,a=o?this.createStartingKeyFromCursor(o):"",u=[];for await(let m of this.getIndexIterator(e,a,n,i)){if(s!==void 0&&s===u.length)break;let{indexes:p}=m;ei.matchAnyFilter(p,r)&&u.push(m)}return u}async*getIndexIterator(e,r,n,i){let{sortProperty:o,sortDirection:s=1,cursor:a}=n,u={gt:r};s===-1&&(u.reverse=!0,a!==void 0&&(u.lt=r,delete u.gt));let m=await this.getIndexPartition(e,o);for await(let[p,b]of m.iterator(u,i)){let{indexes:A,messageCid:M}=JSON.parse(b);yield{indexes:A,messageCid:M}}}createStartingKeyFromCursor(e){let{messageCid:r,value:n}=e;return Li.keySegmentJoin(Li.encodeValue(n),r)}static createCursorFromLastArrayItem(e,r){if(e.length>0)return this.createCursorFromItem(e.at(-1),r)}static createCursorFromItem(e,r){let{messageCid:n,indexes:i}=e,o=i[r];if(o===void 0)throw new be("IndexInvalidCursorSortProperty",`the sort property '${r}' is not defined within the given item.`);if(typeof o=="boolean"||Array.isArray(o))throw new be("IndexInvalidCursorValueType",`only string or number values are supported for cursors, a(n) ${typeof o} was given.`);return{messageCid:n,value:o}}async queryWithInMemoryPaging(e,r,n,i){let{sortProperty:o,sortDirection:s=1,cursor:a,limit:u}=n,m=a?this.createStartingKeyFromCursor(a):void 0,p=new Map;r.length===0&&(r=[{}]);try{await Promise.all(r.map(S=>this.executeSingleFilterQuery(e,S,o,p,i)))}catch(S){if(S.code==="IndexInvalidSortPropertyInMemory")return[]}let b=[...p.values()].sort((S,P)=>this.sortItems(S,P,o,s)),A=m!==void 0?this.findCursorStartingIndex(b,s,o,m):0;if(A<0)return[];let M=u!==void 0?A+u:void 0;return b.slice(A,M)}async executeSingleFilterQuery(e,r,n,i,o){let s=[];if(aS(r)){let u=this.getAllItems(e,n);s.push(u)}let a=oP.reduceFilter(r);for(let u in a){let m=a[u];if(ei.isEqualFilter(m)){let p=this.filterExactMatches(e,u,m,o);s.push(p)}else if(ei.isOneOfFilter(m))for(let p of new Set(m)){let b=this.filterExactMatches(e,u,p,o);s.push(b)}else if(ei.isRangeFilter(m)){let p=this.filterRangeMatches(e,u,m,o);s.push(p)}}for(let u of s){let m=await u;for(let p of m)if(!(i.has(p.messageCid)||!ei.matchFilter(p.indexes,r))){if(p.indexes[n]===void 0)throw new be("IndexInvalidSortPropertyInMemory",`invalid sort property ${n}`);i.set(p.messageCid,p)}}}async getAllItems(e,r){let n=await this.getIndexPartition(e,r),i=[];for await(let[o,s]of n.iterator())i.push(JSON.parse(s));return i}async filterExactMatches(e,r,n,i){let o=Li.keySegmentJoin(Li.encodeValue(n)),s={gt:o},a=await this.getIndexPartition(e,r),u=[];for await(let[m,p]of a.iterator(s,i)){if(!m.startsWith(o))break;u.push(JSON.parse(p))}return u}async filterRangeMatches(e,r,n,i){let o={};for(let u in n){let m=u;o[m]=Li.encodeValue(n[m])}o.gt===void 0&&o.gte===void 0&&(o.reverse=!0);let s=[],a=await this.getIndexPartition(e,r);for await(let[u,m]of a.iterator(o,i))"gt"in n&&this.extractIndexValueFromKey(u)===Li.encodeValue(n.gt)||s.push(JSON.parse(m));if("lte"in n)for(let u of await this.filterExactMatches(e,r,n.lte,i))s.push(u);return s}sortItems(e,r,n,i){let o=e.indexes[n],s=r.indexes[n],a=Li.encodeValue(o)+e.messageCid,u=Li.encodeValue(s)+r.messageCid;return i===1?sS(a,u):sS(u,a)}findCursorStartingIndex(e,r,n,i){let o=s=>{let{messageCid:a,indexes:u}=s,m=u[n],p=Li.keySegmentJoin(Li.encodeValue(m),a);return r===1?p>i:p<i};return e.findIndex(o)}async getIndexes(e,r){let i=await(await this.getIndexesLookupPartition(e)).get(r);if(i!==void 0)return JSON.parse(i)}extractIndexValueFromKey(e){let[r]=e.split(Li.delimiter);return r}static keySegmentJoin(...e){return e.join(Li.delimiter)}static encodeNumberValue(e){let r=Number.MAX_SAFE_INTEGER,n="!",i=String(Number.MAX_SAFE_INTEGER).length,o=e<0?n:"",s=e<0?r:0;return o+String(e+s).padStart(i,"0")}static encodeValue(e){switch(typeof e){case"number":return this.encodeNumberValue(e);default:return JSON.stringify(e)}}static shouldQueryWithInMemoryPaging(e,r){for(let n of e)if(!Li.isFilterConcise(n,r))return!1;return!0}static isFilterConcise(e,r){return e.recordId!==void 0?!0:r.cursor!==void 0?!1:e.protocolPath!==void 0||e.contextId!==void 0||e.parentId!==void 0||e.schema!==void 0}},xp=Li;xp.delimiter="\0";_();_();_();_();function G6(t){if(!f_(t))throw new Error("Parameter was not an error")}function f_(t){return Ybt(t)==="[object Error]"||t instanceof Error}function Ybt(t){return Object.prototype.toString.call(t)}_();function p6e(t){let e,r="";if(t.length===0)e={};else if(f_(t[0]))e={cause:t[0]},r=t.slice(1).join(" ")||"";else if(t[0]&&typeof t[0]=="object")e=Object.assign({},t[0]),r=t.slice(1).join(" ")||"";else if(typeof t[0]=="string")e={},r=r=t.join(" ")||"";else throw new Error("Invalid arguments passed to Layerr");return{options:e,shortMessage:r}}var Ns=class extends Error{constructor(e,r){let n=[...arguments],{options:i,shortMessage:o}=p6e(n),s=o;if(i.cause&&(s=`${s}: ${i.cause.message}`),super(s),this.message=s,i.name&&typeof i.name=="string"?this.name=i.name:this.name="Layerr",i.cause&&Object.defineProperty(this,"_cause",{value:i.cause}),Object.defineProperty(this,"_info",{value:{}}),i.info&&typeof i.info=="object"&&Object.assign(this._info,i.info),Error.captureStackTrace){let a=i.constructorOpt||this.constructor;Error.captureStackTrace(this,a)}}static cause(e){return G6(e),e._cause&&f_(e._cause)?e._cause:null}static fullStack(e){G6(e);let r=Ns.cause(e);return r?`${e.stack}
caused by: ${Ns.fullStack(r)}`:e.stack}static info(e){G6(e);let r={},n=Ns.cause(e);return n&&Object.assign(r,Ns.info(n)),e._info&&Object.assign(r,e._info),r}cause(){return Ns.cause(this)}toString(){let e=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e=`${e}: ${this.message}`),e}};_();var V6="0123456789ABCDEFGHJKMNPQRSTVWXYZ",u_=32,m6e=0xffffffffffff,y6e=10,Qbt=16,Gb=Object.freeze({source:"ulid"});function Xbt(t){let e=t||evt(),r=e&&(e.crypto||e.msCrypto)||null;if(typeof r?.getRandomValues=="function")return()=>{let n=new Uint8Array(1);return r.getRandomValues(n),n[0]/255};if(typeof r?.randomBytes=="function")return()=>r.randomBytes(1).readUInt8()/255;throw new Ns({info:{code:"PRNG_DETECT",...Gb}},"Failed to find a reliable PRNG")}function evt(){return nvt()?self:typeof window<"u"?window:typeof globalThis<"u"||typeof globalThis<"u"?globalThis:null}function tvt(t,e){let r="";for(;t>0;t--)r=ivt(e)+r;return r}function g6e(t,e){if(isNaN(t))throw new Ns({info:{code:"ENC_TIME_NAN",...Gb}},`Time must be a number: ${t}`);if(t>m6e)throw new Ns({info:{code:"ENC_TIME_SIZE_EXCEED",...Gb}},`Cannot encode a time larger than ${m6e}: ${t}`);if(t<0)throw new Ns({info:{code:"ENC_TIME_NEG",...Gb}},`Time must be positive: ${t}`);if(Number.isInteger(t)===!1)throw new Ns({info:{code:"ENC_TIME_TYPE",...Gb}},`Time must be an integer: ${t}`);let r,n="";for(let i=e;i>0;i--)r=t%u_,n=V6.charAt(r)+n,t=(t-r)/u_;return n}function rvt(t){let e,r=t.length,n,i,o=t,s=u_-1;for(;!e&&r-->=0;){if(n=o[r],i=V6.indexOf(n),i===-1)throw new Ns({info:{code:"B32_INC_ENC",...Gb}},"Incorrectly encoded string");if(i===s){o=b6e(o,r,V6[0]);continue}e=b6e(o,r,V6[i+1])}if(typeof e=="string")return e;throw new Ns({info:{code:"B32_INC_INVALID",...Gb}},"Failed incrementing string")}function nvt(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function v6e(t){let e=t||Xbt(),r=0,n;return function(o){let s=isNaN(o)?Date.now():o;if(s<=r){let u=n=rvt(n);return g6e(r,y6e)+u}r=s;let a=n=tvt(Qbt,e);return g6e(s,y6e)+a}}function ivt(t){let e=Math.floor(t()*u_);return e===u_&&(e=u_-1),V6.charAt(e)}function b6e(t,e,r){return e>t.length-1?t:t.substr(0,e)+r+t.substr(e+1)}var WG=class{constructor(e){this.index=new xp({location:"EVENTLOG",createLevelDatabase:zc,...e}),this.ulidFactory=v6e()}async open(){return this.index.open()}async close(){return this.index.close()}async clear(){return this.index.clear()}async append(e,r,n){let i=this.ulidFactory();await this.index.put(e,r,{...n,watermark:i})}async queryEvents(e,r,n){let i=await this.index.query(e,r,{sortProperty:"watermark",cursor:n});return{events:i.map(({messageCid:o})=>o),cursor:xp.createCursorFromLastArrayItem(i,"watermark")}}async getEvents(e,r){return this.queryEvents(e,[],r)}async deleteEventsByCid(e,r){let n=[];for(let i of r)n.push(this.index.delete(e,i));await Promise.all(n)}};_();_();function fk({enumerable:t=!0,configurable:e=!1}={}){return{enumerable:t,configurable:e,writable:!1}}function*ovt(t,e){if(e!=null&&typeof e=="object")if(Array.isArray(e))for(let[r,n]of e.entries()){let i=[...t,r],o=Mt.asCID(n);o?yield[i.join("/"),o]:typeof n=="object"&&(yield*GG(n,i))}else{let r=Mt.asCID(e);r?yield[t.join("/"),r]:yield*GG(e,t)}}function*GG(t,e){if(t==null||t instanceof Uint8Array)return;let r=Mt.asCID(t);r&&(yield[e.join("/"),r]);for(let[n,i]of Object.entries(t)){let o=[...e,n];yield*ovt(o,i)}}function*svt(t,e){if(Array.isArray(e))for(let[r,n]of e.entries()){let i=[...t,r];yield i.join("/"),typeof n=="object"&&!Mt.asCID(n)&&(yield*VG(n,i))}else yield*VG(e,t)}function*VG(t,e){if(!(t==null||typeof t!="object"))for(let[r,n]of Object.entries(t)){let i=[...e,r];yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!Mt.asCID(n)&&(yield*svt(i,n))}}function avt(t,e){let r=t;for(let[n,i]of e.entries()){if(r=r[i],r==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(s=>`[${JSON.stringify(s)}]`).join("")}`);let o=Mt.asCID(r);if(o)return{value:o,remaining:e.slice(n+1).join("/")}}return{value:r}}var uk=class{constructor({cid:e,bytes:r,value:n}){if(!e||!r||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=r,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:fk(),bytes:fk(),value:fk(),asBlock:fk()})}links(){return GG(this.value,[])}tree(){return VG(this.value,[])}get(e="/"){return avt(this.value,e.split("/").filter(Boolean))}};async function w6e({value:t,codec:e,hasher:r}){if(typeof t>"u")throw new Error('Missing required argument "value"');if(!e||!r)throw new Error("Missing required argument: codec or hasher");let n=e.encode(t),i=await r.digest(n),o=Mt.create(1,e.code,i);return new uk({value:t,bytes:n,cid:o})}async function _6e({bytes:t,codec:e,hasher:r}){if(!t)throw new Error('Missing required argument "bytes"');if(!e||!r)throw new Error("Missing required argument: codec or hasher");let n=e.decode(t),i=await r.digest(t),o=Mt.create(1,e.code,i);return new uk({value:n,bytes:t,cid:o})}var H6=class{constructor(e={}){this.config={blockstoreLocation:"MESSAGESTORE",indexLocation:"INDEX",createLevelDatabase:zc,...e},this.blockstore=new Om({location:this.config.blockstoreLocation,createLevelDatabase:this.config.createLevelDatabase}),this.index=new xp({location:this.config.indexLocation,createLevelDatabase:this.config.createLevelDatabase})}async open(){await this.blockstore.open(),await this.index.open()}async close(){await this.blockstore.close(),await this.index.close()}async get(e,r,n){n?.signal?.throwIfAborted();let i=await wo(this.blockstore.partition(e),n?.signal),o=Mt.parse(r),s=await i.get(o,n);return s?(await wo(_6e({bytes:s,codec:Xd,hasher:ss}),n?.signal)).value:void 0}async query(e,r,n,i,o){o?.signal?.throwIfAborted();let s=H6.buildQueryOptions(n,i),a=await this.index.query(e,r,s,o),u;i?.limit!==void 0&&i.limit<a.length&&(a.splice(-1),u=xp.createCursorFromLastArrayItem(a,s.sortProperty));let m=[];for(let p=0;p<a.length;p++){let{messageCid:b}=a[p],A=await this.get(e,b,o);A&&m.push(A)}return{messages:m,cursor:u}}static buildQueryOptions(e={},r={}){let{limit:n,cursor:i}=r,{dateCreated:o,datePublished:s,messageTimestamp:a}=e,u=1,m="messageTimestamp";return o!==void 0?m="dateCreated":s!==void 0?m="datePublished":a!==void 0&&(m="messageTimestamp"),e[m]!==void 0&&(u=e[m]),n!==void 0&&n>0&&(n=n+1),{sortDirection:u,sortProperty:m,limit:n,cursor:i}}async delete(e,r,n){n?.signal?.throwIfAborted();let i=await wo(this.blockstore.partition(e),n?.signal),o=Mt.parse(r);await i.delete(o,n),await this.index.delete(e,r,n)}async put(e,r,n,i){i?.signal?.throwIfAborted();let o=await wo(this.blockstore.partition(e),i?.signal),s=await wo(w6e({value:r,codec:Xd,hasher:ss}),i?.signal),a=jn.parseCid(await Ue.getCid(r));await o.put(a,s.bytes,i);let u=a.toString();await this.index.put(e,u,n,i)}async clear(){await this.blockstore.clear(),await this.index.clear()}};_();var HG=class{constructor(e){this.config={location:"RESUMABLE-TASK-STORE",createLevelDatabase:zc,...e},this.db=new Xu({location:this.config.location,createLevelDatabase:this.config.createLevelDatabase,keyEncoding:"utf8"})}async open(){await this.db.open()}async close(){await this.db.close()}async register(e,r){let n=await jn.computeCid(e),i={id:n,timeout:Date.now()+r*1e3,retryCount:0,task:e};return await this.db.put(n,JSON.stringify(i)),i}async grab(e){let r=[];for await(let[n,i]of this.db.iterator()){let o=JSON.parse(i);if(Date.now()>=o.timeout&&(o.timeout=Date.now()+HG.taskTimeoutInSeconds*1e3,o.retryCount++,await this.db.put(o.id,JSON.stringify(o)),r.push(o)),r.length>=e)break}return r}async read(e){let r=await this.db.get(e);if(r)return JSON.parse(r)}async extend(e,r){let n=await this.db.get(e);if(n){let i=JSON.parse(n);i.timeout=Date.now()+r*1e3,await this.db.put(i.id,JSON.stringify(i))}}async delete(e){return this.db.delete(e)}async clear(){await this.db.clear()}},lk=HG;lk.taskTimeoutInSeconds=60;_();var x6e=Zt(uo(),1);var ZG="events",JG=class{constructor(e={}){this.isOpen=!1;this.errorHandler=e=>{console.error("event emitter error",e)};this.eventEmitter=new x6e.EventEmitter({captureRejections:!0}),this.eventEmitter.setMaxListeners(0),e.errorHandler&&(this.errorHandler=e.errorHandler),this.eventEmitter.on("error",this.errorHandler)}async subscribe(e,r,n){return this.eventEmitter.on(`${e}_${ZG}`,n),{id:r,close:async()=>{this.eventEmitter.off(`${e}_${ZG}`,n)}}}async open(){this.isOpen=!0}async close(){this.isOpen=!1,this.eventEmitter.removeAllListeners()}emit(e,r,n){if(!this.isOpen){this.errorHandler(new be("EventEmitterStreamNotOpenError","a message emitted when EventEmitterStream is closed"));return}this.eventEmitter.emit(`${e}_${ZG}`,e,r,n)}};_();var on=class{static async generatePersona(e){let r=e?.did;r||(r=`did:example:${on.randomString(32)}`);let n=on.randomString(10),i=e?.keyId??`${r}#${n}`,o=e?.keyPair??await fn.generateKeyPair();return{did:r,keyId:i,keyPair:o,signer:new Cp({privateJwk:o.privateJwk,algorithm:o.privateJwk.alg,keyId:`${r}#${i}`})}}static async generateProtocolsConfigure(e){let r=e?.author??await on.generatePersona(),n=e?.protocolDefinition;if(!n){let a="record"+on.randomString(10);n={protocol:on.randomString(20),published:e?.published??!1,types:{},structure:{}},n.types[a]={schema:"test-object",dataFormats:["text/plain"]},n.structure[a]={}}let i=Kt.createSigner(r),o={messageTimestamp:e?.messageTimestamp,definition:n,signer:i,permissionGrantId:e?.permissionGrantId},s=await ts.create(o);return{author:r,message:s.message,protocolsConfigure:s}}static async generateProtocolsQuery(e){let r=e?.author??await on.generatePersona(),n=Kt.createSigner(r),i={messageTimestamp:e?.messageTimestamp,filter:e?.filter,signer:n,permissionGrantId:e?.permissionGrantId};sn(i);let o=await Cu.create(i);return{author:r,message:o.message,protocolsQuery:o}}static async generateGrantCreate(e){let r=e?.author??await on.generatePersona(),n=e?.grantedTo??await on.generatePersona(),i=e?.dateExpires??Yt.createOffsetTimestamp({seconds:10}),o=e?.scope??{interface:"Messages",method:"Query"},s=Kt.createSigner(r),a=n.did,u={signer:s,grantedTo:a,dateExpires:i,scope:o,description:e?.description??on.randomString(10),delegated:e?.delegated??!1,requestId:e?.requestId,conditions:e?.conditions},m=await wr.createGrant(u);return{dataStream:mo.fromBytes(m.permissionGrantBytes),recordsWrite:m.recordsWrite,dataBytes:m.permissionGrantBytes,message:m.recordsWrite.message,dataEncodedMessage:m.dataEncodedMessage}}static async generateRecordsWrite(e){let r=e?.author??await on.generatePersona(),n=Kt.createSigner(r),i=Kt.createSigners(e?.attesters??[]),o=e?.dataCid,s=e?.dataSize,a,u;o===void 0&&s===void 0&&(a=e?.data??on.randomBytes(32),u=mo.fromBytes(a));let m={recipient:e?.recipient,protocol:e?.protocol,protocolPath:e?.protocolPath,protocolRole:e?.protocolRole,schema:e?.schema??`http://${on.randomString(20)}`,tags:e?.tags,recordId:e?.recordId,parentContextId:e?.parentContextId,published:e?.published,dataFormat:e?.dataFormat??"application/json",dateCreated:e?.dateCreated,messageTimestamp:e?.messageTimestamp,datePublished:e?.datePublished,data:a,dataCid:o,dataSize:s,signer:n,attestationSigners:i,encryptionInput:e?.encryptionInput,permissionGrantId:e?.permissionGrantId},p=await _t.create(m),b=p.message;return{author:r,message:b,dataCid:o,dataSize:s,dataBytes:a,dataStream:u,recordsWrite:p}}static async generateProtocolEncryptedRecordsWrite(e){let{plaintextBytes:r,author:n,recipient:i,protocolDefinition:o,protocolPath:s,protocolParentContextId:a,protocolContextDerivingRootKeyId:u,protocolContextDerivedPublicJwk:m}=e,p=mo.fromBytes(r),b=on.randomBytes(16),A=on.randomBytes(32),M=await Sf.aes256CtrEncrypt(A,b,p),S=await mo.toBytes(M),P=s.split("/"),k=P[P.length-1],{message:R,dataStream:B,recordsWrite:I}=await on.generateRecordsWrite({author:n,recipient:i,protocol:o.protocol,protocolPath:s,parentContextId:a,schema:o.types[k].schema,dataFormat:o.types[k].dataFormats?.[0],data:S}),q={initializationVector:b,key:A,keyEncryptionInputs:[]};if(e.encryptSymmetricKeyWithProtocolPathDerivedKey){let $=o.structure;for(let W of P)$=$[W];let U=$.$encryption?.publicKeyJwk,L={publicKeyId:$.$encryption?.rootKeyId,publicKey:U,derivationScheme:"protocolPath"};q.keyEncryptionInputs.push(L)}if(e.encryptSymmetricKeyWithProtocolContextDerivedKey){let $;if(a===void 0){let U={rootKeyId:n.keyId,derivationScheme:"protocolContext",derivedPrivateKey:n.keyPair.privateJwk},F=await _t.getEntryId(n.did,R.descriptor),L=et.constructKeyDerivationPathUsingProtocolContextScheme(F),W=await Ea.derivePublicKey(U,L);$={publicKeyId:n.keyId,publicKey:W,derivationScheme:"protocolContext"}}else{if(u===void 0||m===void 0)throw new Error("`protocolContextDerivingRootKeyId` and `protocolContextDerivedPublicJwk` must both be defined if `protocolContextId` is given");$={publicKeyId:u,publicKey:m,derivationScheme:"protocolContext"}}q.keyEncryptionInputs.push($)}return await I.encryptSymmetricEncryptionKey(q),await I.sign({signer:Kt.createSigner(n)}),{message:R,dataStream:B,recordsWrite:I,encryptedDataBytes:S,encryptionInput:q}}static async generateFromRecordsWrite(e){let r=e.existingWrite.message,n=Yt.getCurrentTimestamp(),i=!(e.published??r.descriptor.published),o=e.datePublished??(i?n:void 0),s=e.data??on.randomBytes(32),a=mo.fromBytes(s),u={recordsWriteMessage:e.existingWrite.message,data:s,published:i,datePublished:o,messageTimestamp:e.messageTimestamp,protocolRole:e.protocolRole,tags:e.tags,signer:Kt.createSigner(e.author)},m=await _t.createFrom(u);return{message:m.message,recordsWrite:m,dataBytes:s,dataStream:a}}static async generateRecordsQuery(e){let r=e?.author,n=e?.anonymous??!1;if(n&&r)throw new Error("Cannot have `author` and be anonymous at the same time.");r===void 0&&!n&&(r=await on.generatePersona());let i;r!==void 0&&(i=Kt.createSigner(r));let o={messageTimestamp:e?.messageTimestamp,signer:i,filter:e?.filter??{schema:on.randomString(10)},dateSort:e?.dateSort,pagination:e?.pagination,protocolRole:e?.protocolRole};sn(o);let a=(await nd.create(o)).message;return{author:r,message:a}}static async generateRecordsSubscribe(e){let r=e?.author,n=e?.anonymous??!1;if(n&&r)throw new Error("Cannot have `author` and be anonymous at the same time.");r===void 0&&!n&&(r=await on.generatePersona());let i;r!==void 0&&(i=Kt.createSigner(r));let o={messageTimestamp:e?.messageTimestamp,signer:i,filter:e?.filter??{schema:on.randomString(10)},protocolRole:e?.protocolRole};sn(o);let a=(await ud.create(o)).message;return{author:r,message:a}}static async generateRecordsDelete(e){let r=e?.author??await on.generateDidKeyPersona(),n=await Of.create({recordId:e?.recordId??await on.randomCborSha256Cid(),protocolRole:e?.protocolRole,signer:Kt.createSigner(r)});return{author:r,recordsDelete:n,message:n.message}}static async generateMessagesQuery(e){let{filters:r,cursor:n,permissionGrantId:i}=e,o=e.author??await on.generatePersona(),a={signer:Kt.createSigner(o),filters:r,cursor:n,permissionGrantId:i},u=await od.create(a);return{author:o,messagesQuery:u,message:u.message}}static async generateMessagesSubscribe(e){let r=e?.author??await on.generatePersona(),n=Kt.createSigner(r),i={filters:e?.filters,messageTimestamp:e?.messageTimestamp,permissionGrantId:e?.permissionGrantId,signer:n};sn(i);let o=await sd.create(i),s=o.message;return{author:r,messagesSubscribe:o,message:s}}static async generateMessagesRead(e){let r=e?.author??await on.generatePersona(),i={signer:Kt.createSigner(r),messageCid:e.messageCid,permissionGrantId:e.permissionGrantId},o=await Ru.create(i);return{author:r,messagesRead:o,message:o.message}}static generateAuthorization(){return{signature:on.generateAuthorizationSignature()}}static generateAuthorizationSignature(){return{payload:"anyPayload",signatures:[{protected:"anyProtectedHeader",signature:"anySignature"}]}}static async randomSignatureString(){let e=await b_.generateKeyPair(),r=await b_.sign(on.randomBytes(32),e.privateJwk);return Je.bytesToBase64Url(r)}static randomString(e){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="";for(let i=0;i<e;i++)n+=r.charAt(Math.floor(Math.random()*r.length));return n}static randomBytes(e){let r=new Uint8Array(e);for(let n=0;n<e;n++)r[n]=Math.floor(Math.random()*256);return r}static async randomCborSha256Cid(){let e=on.randomBytes(32),r=await ss.digest(e);return(await Mt.createV1(Up,r)).toString()}static randomInt(e,r){return Math.floor(Math.random()*(r-e)+e)}static randomTimestamp(e){let{year:r,month:n,day:i,hour:o,minute:s,second:a,millisecond:u,microsecond:m}=e||{};return Yt.createTimestamp({year:r||this.randomInt(2e3,2022),month:n||this.randomInt(1,12),day:i||this.randomInt(1,28),hour:o||this.randomInt(0,23),minute:s||this.randomInt(0,59),second:a||this.randomInt(0,59),millisecond:u||this.randomInt(0,1e3),microsecond:m||this.randomInt(0,1e3)})}static createDidResolutionResult(e){return{didResolutionMetadata:{},didDocument:{id:e.did,verificationMethod:[{controller:e.did,id:e.keyId,type:"JsonWebKey2020",publicKeyJwk:e.keyPair.publicJwk}]},didDocumentMetadata:{}}}static async generateDidKeyPersona(){let e=await Cs.create(),r=await Cs.getSigningMethod({didDocument:e.document}),n=r.id,i=await e.export(),o={publicJwk:r.publicKeyJwk,privateJwk:i.privateKeys[0]};return{did:e.uri,keyId:n,keyPair:o,signer:new Cp({privateJwk:o.privateJwk,algorithm:o.privateJwk.alg,keyId:n})}}};_();var dk=class{static async pollUntilSuccessOrTimeout(e,r=dk.pollRetrySleep,n=dk.pollTimeout){let i=Date.now();for(;;)try{return await e()}catch{if(Date.now()-i>=n)throw new Error("Operation timed out");await Yt.sleep(r)}}},Z6=dk;Z6.pollRetrySleep=20,Z6.pollTimeout=2e3;export{BS as AllowAllTenantGate,jn as Cid,KG as DataStoreLevel,mo as DataStream,cS as DateSort,D6 as Dwn,Gh as DwnConstant,be as DwnError,Or as DwnErrorCode,$n as DwnInterfaceName,ti as DwnMethodName,Je as Encoder,Sf as Encryption,i$ as EncryptionAlgorithm,JG as EventEmitterStream,WG as EventLogLevel,Ea as HdKey,Kt as Jws,b1 as KeyDerivationScheme,Ue as Message,H6 as MessageStoreLevel,od as MessagesQuery,Ru as MessagesRead,sd as MessagesSubscribe,$0e as PermissionConditionPublication,Ni as PermissionGrant,$g as PermissionRequest,wr as PermissionsProtocol,Z6 as Poller,Cp as PrivateKeySigner,DG as Protocols,ts as ProtocolsConfigure,Cu as ProtocolsQuery,et as Records,Of as RecordsDelete,nd as RecordsQuery,rm as RecordsRead,ud as RecordsSubscribe,_t as RecordsWrite,lk as ResumableTaskStoreLevel,fn as Secp256k1,pa as Secp256r1,d3 as SortDirection,on as TestDataGenerator,Yt as Time,Yi as authenticate,wo as executeUnlessAborted};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@noble/ciphers/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/abstract/montgomery.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@noble/ed25519/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/secp256k1/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/montgomery.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

uint8-util/util.js:
  (* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
  *
  * @author   Jimmy Wrting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
  * @license  MIT
  *)
*/
